cscope 15 $HOME/ws/jemalloc/jemalloc-5.0.1               0001578755
	@include/jemalloc/internal/arena_externs.h

1 #i‚de‡
JEMALLOC_INTERNAL_ARENA_EXTERNS_H


2 
	#JEMALLOC_INTERNAL_ARENA_EXTERNS_H


	)

4 
	~"jemÆloc/öã∫Æ/bö.h
"

5 
	~"jemÆloc/öã∫Æ/exã¡_dss.h
"

6 
	~"jemÆloc/öã∫Æ/∑ges.h
"

7 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

8 
	~"jemÆloc/öã∫Æ/°©s.h
"

10 
ssize_t
 
›t_dúty_deˇy_ms
;

11 
ssize_t
 
›t_muzzy_deˇy_ms
;

13 
≥r˝u_¨ía_mode_t
 
›t_≥r˝u_¨ía
;

14 c⁄° *
≥r˝u_¨ía_mode_«mes
[];

16 c⁄° 
uöt64_t
 
h_°ïs
[
SMOOTHSTEP_NSTEPS
];

17 
mÆloc_muãx_t
 
¨ías_lock
;

19 
¨ía_basic_°©s_mîge
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

20 *
¡hªads
, c⁄° **
dss
, 
ssize_t
 *
dúty_deˇy_ms
,

21 
ssize_t
 *
muzzy_deˇy_ms
, 
size_t
 *
«˘ive
, size_à*
ndúty
, size_à*
nmuzzy
);

22 
¨ía_°©s_mîge
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, *
¡hªads
,

23 c⁄° **
dss
, 
ssize_t
 *
dúty_deˇy_ms
, ssize_à*
muzzy_deˇy_ms
,

24 
size_t
 *
«˘ive
, size_à*
ndúty
, size_à*
nmuzzy
, 
¨ía_°©s_t
 *
a°©s
,

25 
bö_°©s_t
 *
b°©s
, 
¨ía_°©s_œrge_t
 *
l°©s
);

26 
¨ía_exã¡s_dúty_dÆloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

27 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
);

28 #ifde‡
JEMALLOC_JET


29 
size_t
 
¨ía_¶ab_ªgöd
(
exã¡_t
 *
¶ab
, 
szöd_t
 
bööd
, c⁄° *
±r
);

31 
exã¡_t
 *
¨ía_exã¡_Æloc_œrge
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

32 
size_t
 
usize
, size_à
Æignmít
, 
boﬁ
 *
zîo
);

33 
¨ía_exã¡_dÆloc_œrge_¥ï
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

34 
exã¡_t
 *
exã¡
);

35 
¨ía_exã¡_øŒoc_œrge_shrök
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

36 
exã¡_t
 *
exã¡
, 
size_t
 
ﬁdsize
);

37 
¨ía_exã¡_øŒoc_œrge_ex∑nd
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

38 
exã¡_t
 *
exã¡
, 
size_t
 
ﬁdsize
);

39 
ssize_t
 
¨ía_dúty_deˇy_ms_gë
(
¨ía_t
 *
¨ía
);

40 
boﬁ
 
¨ía_dúty_deˇy_ms_£t
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
ssize_t
 
deˇy_ms
);

41 
ssize_t
 
¨ía_muzzy_deˇy_ms_gë
(
¨ía_t
 *
¨ía
);

42 
boﬁ
 
¨ía_muzzy_deˇy_ms_£t
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
ssize_t
 
deˇy_ms
);

43 
¨ía_deˇy
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
boﬁ
 
is_background_thªad
,

44 
boﬁ
 
Æl
);

45 
¨ía_ª£t
(
tsd_t
 *
tsd
, 
¨ía_t
 *
¨ía
);

46 
¨ía_de°roy
(
tsd_t
 *
tsd
, 
¨ía_t
 *
¨ía
);

47 
¨ía_tˇche_fûl_smÆl
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
tˇche_t
 *
tˇche
,

48 
ˇche_bö_t
 *
tbö
, 
szöd_t
 
bööd
, 
uöt64_t
 
¥of_accumbyãs
);

49 
¨ía_Æloc_junk_smÆl
(*
±r
, c⁄° 
bö_öfo_t
 *
bö_öfo
,

50 
boﬁ
 
zîo
);

52 (
	t¨ía_dÆloc_junk_smÆl_t
)(*, c⁄° 
	tbö_öfo_t
 *);

53 
¨ía_dÆloc_junk_smÆl_t
 *
JET_MUTABLE
 
¨ía_dÆloc_junk_smÆl
;

55 *
	`¨ía_mÆloc_h¨d
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
size
,

56 
szöd_t
 
öd
, 
boﬁ
 
zîo
);

57 *
	`¨ía_∑Œoc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
usize
,

58 
size_t
 
Æignmít
, 
boﬁ
 
zîo
, 
tˇche_t
 *
tˇche
);

59 
	`¨ía_¥of_¥omŸe
(
tsdn_t
 *
tsdn
, c⁄° *
±r
, 
size_t
 
usize
);

60 
	`¨ía_dÆloc_¥omŸed
(
tsdn_t
 *
tsdn
, *
±r
, 
tˇche_t
 *
tˇche
,

61 
boﬁ
 
¶ow_∑th
);

62 
	`¨ía_dÆloc_bö_junked_locked
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

63 
exã¡_t
 *
exã¡
, *
±r
);

64 
	`¨ía_dÆloc_smÆl
(
tsdn_t
 *
tsdn
, *
±r
);

65 
boﬁ
 
	`¨ía_øŒoc_no_move
(
tsdn_t
 *
tsdn
, *
±r
, 
size_t
 
ﬁdsize
, size_à
size
,

66 
size_t
 
exåa
, 
boﬁ
 
zîo
);

67 *
	`¨ía_øŒoc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, *
±r
, 
size_t
 
ﬁdsize
,

68 
size_t
 
size
, size_à
Æignmít
, 
boﬁ
 
zîo
, 
tˇche_t
 *
tˇche
);

69 
dss_¥ec_t
 
	`¨ía_dss_¥ec_gë
(
¨ía_t
 *
¨ía
);

70 
boﬁ
 
	`¨ía_dss_¥ec_£t
(
¨ía_t
 *
¨ía
, 
dss_¥ec_t
 
dss_¥ec
);

71 
ssize_t
 
	`¨ía_dúty_deˇy_ms_deÁu…_gë
();

72 
boﬁ
 
	`¨ía_dúty_deˇy_ms_deÁu…_£t
(
ssize_t
 
deˇy_ms
);

73 
ssize_t
 
	`¨ía_muzzy_deˇy_ms_deÁu…_gë
();

74 
boﬁ
 
	`¨ía_muzzy_deˇy_ms_deÁu…_£t
(
ssize_t
 
deˇy_ms
);

75 
boﬁ
 
	`¨ía_ªèö_grow_limô_gë_£t
(
tsd_t
 *
tsd
, 
¨ía_t
 *
¨ía
,

76 
size_t
 *
ﬁd_limô
, size_à*
√w_limô
);

77 
	`¨ía_¡hªads_gë
(
¨ía_t
 *
¨ía
, 
boﬁ
 
öã∫Æ
);

78 
	`¨ía_¡hªads_öc
(
¨ía_t
 *
¨ía
, 
boﬁ
 
öã∫Æ
);

79 
	`¨ía_¡hªads_dec
(
¨ía_t
 *
¨ía
, 
boﬁ
 
öã∫Æ
);

80 
size_t
 
	`¨ía_exã¡_¢_√xt
(
¨ía_t
 *
¨ía
);

81 
¨ía_t
 *
	`¨ía_√w
(
tsdn_t
 *
tsdn
, 
öd
, 
exã¡_hooks_t
 *
exã¡_hooks
);

82 
	`¨ía_boŸ
();

83 
	`¨ía_¥ef‹k0
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
);

84 
	`¨ía_¥ef‹k1
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
);

85 
	`¨ía_¥ef‹k2
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
);

86 
	`¨ía_¥ef‹k3
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
);

87 
	`¨ía_¥ef‹k4
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
);

88 
	`¨ía_¥ef‹k5
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
);

89 
	`¨ía_¥ef‹k6
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
);

90 
	`¨ía_¥ef‹k7
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
);

91 
	`¨ía_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
);

92 
	`¨ía_po°f‹k_chûd
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
);

	@include/jemalloc/internal/arena_inlines_a.h

1 #i‚de‡
JEMALLOC_INTERNAL_ARENA_INLINES_A_H


2 
	#JEMALLOC_INTERNAL_ARENA_INLINES_A_H


	)

4 
ölöe
 

5 
	$¨ía_öd_gë
(c⁄° 
¨ía_t
 *
¨ía
) {

6  
	`ba£_öd_gë
(
¨ía
->
ba£
);

7 
	}
}

9 
ölöe
 

10 
	$¨ía_öã∫Æ_add
(
¨ía_t
 *
¨ía
, 
size_t
 
size
) {

11 
	`©omic_„tch_add_zu
(&
¨ía
->
°©s
.
öã∫Æ
, 
size
, 
ATOMIC_RELAXED
);

12 
	}
}

14 
ölöe
 

15 
	$¨ía_öã∫Æ_sub
(
¨ía_t
 *
¨ía
, 
size_t
 
size
) {

16 
	`©omic_„tch_sub_zu
(&
¨ía
->
°©s
.
öã∫Æ
, 
size
, 
ATOMIC_RELAXED
);

17 
	}
}

19 
ölöe
 
size_t


20 
	$¨ía_öã∫Æ_gë
(
¨ía_t
 *
¨ía
) {

21  
	`©omic_lﬂd_zu
(&
¨ía
->
°©s
.
öã∫Æ
, 
ATOMIC_RELAXED
);

22 
	}
}

24 
ölöe
 
boﬁ


25 
	$¨ía_¥of_accum
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
uöt64_t
 
accumbyãs
) {

26 
	`ˇs£π
(
c⁄fig_¥of
);

28 i‡(
	`likñy
(
¥of_öãrvÆ
 == 0)) {

29  
Ál£
;

32  
	`¥of_accum_add
(
tsdn
, &
¨ía
->
¥of_accum
, 
accumbyãs
);

33 
	}
}

35 
ölöe
 

36 
	$≥r˝u_¨ía_upd©e
(
tsd_t
 *
tsd
, 
˝u
) {

37 
	`as£π
(
have_≥r˝u_¨ía
);

38 
¨ía_t
 *
ﬁd¨ía
 = 
	`tsd_¨ía_gë
(
tsd
);

39 
	`as£π
(
ﬁd¨ía
 !
NULL
);

40 
ﬁdöd
 = 
	`¨ía_öd_gë
(
ﬁd¨ía
);

42 i‡(
ﬁdöd
 !
˝u
) {

43 
√wöd
 = 
˝u
;

44 
¨ía_t
 *
√w¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
√wöd
, 
åue
);

45 
	`as£π
(
√w¨ía
 !
NULL
);

48 
	`¨ía_migøã
(
tsd
, 
ﬁdöd
, 
√wöd
);

49 
tˇche_t
 *
tˇche
 = 
	`tˇche_gë
(
tsd
);

50 i‡(
tˇche
 !
NULL
) {

51 
	`tˇche_¨ía_ªassocüã
(
	`tsd_tsdn
(
tsd
), 
tˇche
,

52 
√w¨ía
);

55 
	}
}

	@include/jemalloc/internal/arena_inlines_b.h

1 #i‚de‡
JEMALLOC_INTERNAL_ARENA_INLINES_B_H


2 
	#JEMALLOC_INTERNAL_ARENA_INLINES_B_H


	)

4 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ty≥s.h
"

5 
	~"jemÆloc/öã∫Æ/muãx.h
"

6 
	~"jemÆloc/öã∫Æ/πªe.h
"

7 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

8 
	~"jemÆloc/öã∫Æ/sz.h
"

9 
	~"jemÆloc/öã∫Æ/tickî.h
"

11 
JEMALLOC_ALWAYS_INLINE
 
¥of_t˘x_t
 *

12 
	$¨ía_¥of_t˘x_gë
(
tsdn_t
 *
tsdn
, c⁄° *
±r
, 
Æloc_˘x_t
 *
Æloc_˘x
) {

13 
	`ˇs£π
(
c⁄fig_¥of
);

14 
	`as£π
(
±r
 !
NULL
);

17 i‡(
Æloc_˘x
 =
NULL
) {

18 c⁄° 
exã¡_t
 *
exã¡
 = 
	`õÆloc
(
tsdn
, 
±r
);

19 i‡(
	`u∆ikñy
(!
	`exã¡_¶ab_gë
(
exã¡
))) {

20  
	`œrge_¥of_t˘x_gë
(
tsdn
, 
exã¡
);

23 i‡(
	`u∆ikñy
(!
Æloc_˘x
->
¶ab
)) {

24  
	`œrge_¥of_t˘x_gë
(
tsdn
, 
	`õÆloc
—sdn, 
±r
));

27  (
¥of_t˘x_t
 *)(
uöçå_t
)1U;

28 
	}
}

30 
JEMALLOC_ALWAYS_INLINE
 

31 
	$¨ía_¥of_t˘x_£t
(
tsdn_t
 *
tsdn
, c⁄° *
±r
, 
size_t
 
usize
,

32 
Æloc_˘x_t
 *
Æloc_˘x
, 
¥of_t˘x_t
 *
t˘x
) {

33 
	`ˇs£π
(
c⁄fig_¥of
);

34 
	`as£π
(
±r
 !
NULL
);

37 i‡(
Æloc_˘x
 =
NULL
) {

38 
exã¡_t
 *
exã¡
 = 
	`õÆloc
(
tsdn
, 
±r
);

39 i‡(
	`u∆ikñy
(!
	`exã¡_¶ab_gë
(
exã¡
))) {

40 
	`œrge_¥of_t˘x_£t
(
tsdn
, 
exã¡
, 
t˘x
);

43 i‡(
	`u∆ikñy
(!
Æloc_˘x
->
¶ab
)) {

44 
	`œrge_¥of_t˘x_£t
(
tsdn
, 
	`õÆloc
—sdn, 
±r
), 
t˘x
);

47 
	}
}

49 
ölöe
 

50 
	$¨ía_¥of_t˘x_ª£t
(
tsdn_t
 *
tsdn
, c⁄° *
±r
, 
¥of_t˘x_t
 *
t˘x
) {

51 
	`ˇs£π
(
c⁄fig_¥of
);

52 
	`as£π
(
±r
 !
NULL
);

54 
exã¡_t
 *
exã¡
 = 
	`õÆloc
(
tsdn
, 
±r
);

55 
	`as£π
(!
	`exã¡_¶ab_gë
(
exã¡
));

57 
	`œrge_¥of_t˘x_ª£t
(
tsdn
, 
exã¡
);

58 
	}
}

60 
JEMALLOC_ALWAYS_INLINE
 

61 
	$¨ía_deˇy_ticks
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
¡icks
) {

62 
tsd_t
 *
tsd
;

63 
tickî_t
 *
deˇy_tickî
;

65 i‡(
	`u∆ikñy
(
	`tsdn_nuŒ
(
tsdn
))) {

68 
tsd
 = 
	`tsdn_tsd
(
tsdn
);

69 
deˇy_tickî
 = 
	`deˇy_tickî_gë
(
tsd
, 
	`¨ía_öd_gë
(
¨ía
));

70 i‡(
	`u∆ikñy
(
deˇy_tickî
 =
NULL
)) {

73 i‡(
	`u∆ikñy
(
	`tickî_ticks
(
deˇy_tickî
, 
¡icks
))) {

74 
	`¨ía_deˇy
(
tsdn
, 
¨ía
, 
Ál£
, false);

76 
	}
}

78 
JEMALLOC_ALWAYS_INLINE
 

79 
	$¨ía_deˇy_tick
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

80 
	`mÆloc_muãx_as£π_nŸ_ow√r
(
tsdn
, &
¨ía
->
deˇy_dúty
.
mtx
);

81 
	`mÆloc_muãx_as£π_nŸ_ow√r
(
tsdn
, &
¨ía
->
deˇy_muzzy
.
mtx
);

83 
	`¨ía_deˇy_ticks
(
tsdn
, 
¨ía
, 1);

84 
	}
}

86 
JEMALLOC_ALWAYS_INLINE
 *

87 
	$¨ía_mÆloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
size
, 
szöd_t
 
öd
, 
boﬁ
 
zîo
,

88 
tˇche_t
 *
tˇche
, 
boﬁ
 
¶ow_∑th
) {

89 
	`as£π
(!
	`tsdn_nuŒ
(
tsdn
Ë|| 
tˇche
 =
NULL
);

90 
	`as£π
(
size
 != 0);

92 i‡(
	`likñy
(
tˇche
 !
NULL
)) {

93 i‡(
	`likñy
(
size
 <
SMALL_MAXCLASS
)) {

94  
	`tˇche_Æloc_smÆl
(
	`tsdn_tsd
(
tsdn
), 
¨ía
,

95 
tˇche
, 
size
, 
öd
, 
zîo
, 
¶ow_∑th
);

97 i‡(
	`likñy
(
size
 <
tˇche_max˛ass
)) {

98  
	`tˇche_Æloc_œrge
(
	`tsdn_tsd
(
tsdn
), 
¨ía
,

99 
tˇche
, 
size
, 
öd
, 
zîo
, 
¶ow_∑th
);

102 
	`as£π
(
size
 > 
tˇche_max˛ass
);

105  
	`¨ía_mÆloc_h¨d
(
tsdn
, 
¨ía
, 
size
, 
öd
, 
zîo
);

106 
	}
}

108 
JEMALLOC_ALWAYS_INLINE
 
¨ía_t
 *

109 
	$¨ía_ØŒoc
(
tsdn_t
 *
tsdn
, c⁄° *
±r
) {

110  
	`exã¡_¨ía_gë
(
	`õÆloc
(
tsdn
, 
±r
));

111 
	}
}

113 
JEMALLOC_ALWAYS_INLINE
 
size_t


114 
	$¨ía_ßŒoc
(
tsdn_t
 *
tsdn
, c⁄° *
±r
) {

115 
	`as£π
(
±r
 !
NULL
);

117 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

118 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

120 
szöd_t
 
szöd
 = 
	`πªe_szöd_ªad
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

121 (
uöçå_t
)
±r
, 
åue
);

122 
	`as£π
(
szöd
 !
NSIZES
);

124  
	`sz_ödex2size
(
szöd
);

125 
	}
}

127 
JEMALLOC_ALWAYS_INLINE
 
size_t


128 
	$¨ía_vßŒoc
(
tsdn_t
 *
tsdn
, c⁄° *
±r
) {

138 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

139 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

141 
exã¡_t
 *
exã¡
;

142 
szöd_t
 
szöd
;

143 i‡(
	`πªe_exã¡_szöd_ªad
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

144 (
uöçå_t
)
±r
, 
Ál£
, &
exã¡
, &
szöd
)) {

148 i‡(
exã¡
 =
NULL
) {

151 
	`as£π
(
	`exã¡_°©e_gë
(
exã¡
Ë=
exã¡_°©e_a˘ive
);

153 
	`as£π
(
	`exã¡_addr_gë
(
exã¡
Ë=
±r
 || 
	`exã¡_¶ab_gë
(extent));

155 
	`as£π
(
szöd
 !
NSIZES
);

157  
	`sz_ödex2size
(
szöd
);

158 
	}
}

160 
ölöe
 

161 
	$¨ía_dÆloc_no_tˇche
(
tsdn_t
 *
tsdn
, *
±r
) {

162 
	`as£π
(
±r
 !
NULL
);

164 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

165 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

167 
szöd_t
 
szöd
;

168 
boﬁ
 
¶ab
;

169 
	`πªe_szöd_¶ab_ªad
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
, (
uöçå_t
)
±r
,

170 
åue
, &
szöd
, &
¶ab
);

172 i‡(
c⁄fig_debug
) {

173 
exã¡_t
 *
exã¡
 = 
	`πªe_exã¡_ªad
(
tsdn
, &
exã¡s_πªe
,

174 
πªe_˘x
, (
uöçå_t
)
±r
, 
åue
);

175 
	`as£π
(
szöd
 =
	`exã¡_szöd_gë
(
exã¡
));

176 
	`as£π
(
szöd
 < 
NSIZES
);

177 
	`as£π
(
¶ab
 =
	`exã¡_¶ab_gë
(
exã¡
));

180 i‡(
	`likñy
(
¶ab
)) {

182 
	`¨ía_dÆloc_smÆl
(
tsdn
, 
±r
);

184 
exã¡_t
 *
exã¡
 = 
	`õÆloc
(
tsdn
, 
±r
);

185 
	`œrge_dÆloc
(
tsdn
, 
exã¡
);

187 
	}
}

189 
JEMALLOC_ALWAYS_INLINE
 

190 
	$¨ía_dÆloc
(
tsdn_t
 *
tsdn
, *
±r
, 
tˇche_t
 *
tˇche
,

191 
Æloc_˘x_t
 *
Æloc_˘x
, 
boﬁ
 
¶ow_∑th
) {

192 
	`as£π
(!
	`tsdn_nuŒ
(
tsdn
Ë|| 
tˇche
 =
NULL
);

193 
	`as£π
(
±r
 !
NULL
);

195 i‡(
	`u∆ikñy
(
tˇche
 =
NULL
)) {

196 
	`¨ía_dÆloc_no_tˇche
(
tsdn
, 
±r
);

200 
szöd_t
 
szöd
;

201 
boﬁ
 
¶ab
;

202 
πªe_˘x_t
 *
πªe_˘x
;

203 i‡(
Æloc_˘x
 !
NULL
) {

204 
szöd
 = 
Æloc_˘x
->szind;

205 
¶ab
 = 
Æloc_˘x
->slab;

206 
	`as£π
(
szöd
 !
NSIZES
);

208 
πªe_˘x
 = 
	`tsd_πªe_˘x
(
	`tsdn_tsd
(
tsdn
));

209 
	`πªe_szöd_¶ab_ªad
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

210 (
uöçå_t
)
±r
, 
åue
, &
szöd
, &
¶ab
);

213 i‡(
c⁄fig_debug
) {

214 
πªe_˘x
 = 
	`tsd_πªe_˘x
(
	`tsdn_tsd
(
tsdn
));

215 
exã¡_t
 *
exã¡
 = 
	`πªe_exã¡_ªad
(
tsdn
, &
exã¡s_πªe
,

216 
πªe_˘x
, (
uöçå_t
)
±r
, 
åue
);

217 
	`as£π
(
szöd
 =
	`exã¡_szöd_gë
(
exã¡
));

218 
	`as£π
(
szöd
 < 
NSIZES
);

219 
	`as£π
(
¶ab
 =
	`exã¡_¶ab_gë
(
exã¡
));

222 i‡(
	`likñy
(
¶ab
)) {

224 
	`tˇche_dÆloc_smÆl
(
	`tsdn_tsd
(
tsdn
), 
tˇche
, 
±r
, 
szöd
,

225 
¶ow_∑th
);

227 i‡(
szöd
 < 
nhbös
) {

228 i‡(
c⁄fig_¥of
 && 
	`u∆ikñy
(
szöd
 < 
NBINS
)) {

229 
	`¨ía_dÆloc_¥omŸed
(
tsdn
, 
±r
, 
tˇche
,

230 
¶ow_∑th
);

232 
	`tˇche_dÆloc_œrge
(
	`tsdn_tsd
(
tsdn
), 
tˇche
, 
±r
,

233 
szöd
, 
¶ow_∑th
);

236 
exã¡_t
 *
exã¡
 = 
	`õÆloc
(
tsdn
, 
±r
);

237 
	`œrge_dÆloc
(
tsdn
, 
exã¡
);

240 
	}
}

242 
ölöe
 

243 
	$¨ía_sdÆloc_no_tˇche
(
tsdn_t
 *
tsdn
, *
±r
, 
size_t
 
size
) {

244 
	`as£π
(
±r
 !
NULL
);

245 
	`as£π
(
size
 <
LARGE_MAXCLASS
);

247 
szöd_t
 
szöd
;

248 
boﬁ
 
¶ab
;

249 i‡(!
c⁄fig_¥of
 || !
›t_¥of
) {

254 
szöd
 = 
	`sz_size2ödex
(
size
);

255 
¶ab
 = (
szöd
 < 
NBINS
);

258 i‡((
c⁄fig_¥of
 && 
›t_¥of
Ë|| 
c⁄fig_debug
) {

259 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

260 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
,

261 &
πªe_˘x_ÁŒback
);

263 
	`πªe_szöd_¶ab_ªad
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

264 (
uöçå_t
)
±r
, 
åue
, &
szöd
, &
¶ab
);

266 
	`as£π
(
szöd
 =
	`sz_size2ödex
(
size
));

267 
	`as£π
((
c⁄fig_¥of
 && 
›t_¥of
Ë|| 
¶ab
 =(
szöd
 < 
NBINS
));

269 i‡(
c⁄fig_debug
) {

270 
exã¡_t
 *
exã¡
 = 
	`πªe_exã¡_ªad
(
tsdn
,

271 &
exã¡s_πªe
, 
πªe_˘x
, (
uöçå_t
)
±r
, 
åue
);

272 
	`as£π
(
szöd
 =
	`exã¡_szöd_gë
(
exã¡
));

273 
	`as£π
(
¶ab
 =
	`exã¡_¶ab_gë
(
exã¡
));

277 i‡(
	`likñy
(
¶ab
)) {

279 
	`¨ía_dÆloc_smÆl
(
tsdn
, 
±r
);

281 
exã¡_t
 *
exã¡
 = 
	`õÆloc
(
tsdn
, 
±r
);

282 
	`œrge_dÆloc
(
tsdn
, 
exã¡
);

284 
	}
}

286 
JEMALLOC_ALWAYS_INLINE
 

287 
	$¨ía_sdÆloc
(
tsdn_t
 *
tsdn
, *
±r
, 
size_t
 
size
, 
tˇche_t
 *
tˇche
,

288 
Æloc_˘x_t
 *
Æloc_˘x
, 
boﬁ
 
¶ow_∑th
) {

289 
	`as£π
(!
	`tsdn_nuŒ
(
tsdn
Ë|| 
tˇche
 =
NULL
);

290 
	`as£π
(
±r
 !
NULL
);

291 
	`as£π
(
size
 <
LARGE_MAXCLASS
);

293 i‡(
	`u∆ikñy
(
tˇche
 =
NULL
)) {

294 
	`¨ía_sdÆloc_no_tˇche
(
tsdn
, 
±r
, 
size
);

298 
szöd_t
 
szöd
;

299 
boﬁ
 
¶ab
;

300 
UNUSED
 
Æloc_˘x_t
 
loˇl_˘x
;

301 i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

302 i‡(
Æloc_˘x
 =
NULL
) {

304 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

305 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
,

306 &
πªe_˘x_ÁŒback
);

307 
	`πªe_szöd_¶ab_ªad
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

308 (
uöçå_t
)
±r
, 
åue
, &
loˇl_˘x
.
szöd
,

309 &
loˇl_˘x
.
¶ab
);

310 
	`as£π
(
loˇl_˘x
.
szöd
 =
	`sz_size2ödex
(
size
));

311 
Æloc_˘x
 = &
loˇl_˘x
;

313 
¶ab
 = 
Æloc_˘x
->slab;

314 
szöd
 = 
Æloc_˘x
->szind;

320 
szöd
 = 
	`sz_size2ödex
(
size
);

321 
¶ab
 = (
szöd
 < 
NBINS
);

324 i‡(
c⁄fig_debug
) {

325 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsd_πªe_˘x
(
	`tsdn_tsd
(
tsdn
));

326 
	`πªe_szöd_¶ab_ªad
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

327 (
uöçå_t
)
±r
, 
åue
, &
szöd
, &
¶ab
);

328 
exã¡_t
 *
exã¡
 = 
	`πªe_exã¡_ªad
(
tsdn
,

329 &
exã¡s_πªe
, 
πªe_˘x
, (
uöçå_t
)
±r
, 
åue
);

330 
	`as£π
(
szöd
 =
	`exã¡_szöd_gë
(
exã¡
));

331 
	`as£π
(
¶ab
 =
	`exã¡_¶ab_gë
(
exã¡
));

334 i‡(
	`likñy
(
¶ab
)) {

336 
	`tˇche_dÆloc_smÆl
(
	`tsdn_tsd
(
tsdn
), 
tˇche
, 
±r
, 
szöd
,

337 
¶ow_∑th
);

339 i‡(
szöd
 < 
nhbös
) {

340 i‡(
c⁄fig_¥of
 && 
	`u∆ikñy
(
szöd
 < 
NBINS
)) {

341 
	`¨ía_dÆloc_¥omŸed
(
tsdn
, 
±r
, 
tˇche
,

342 
¶ow_∑th
);

344 
	`tˇche_dÆloc_œrge
(
	`tsdn_tsd
(
tsdn
),

345 
tˇche
, 
±r
, 
szöd
, 
¶ow_∑th
);

348 
exã¡_t
 *
exã¡
 = 
	`õÆloc
(
tsdn
, 
±r
);

349 
	`œrge_dÆloc
(
tsdn
, 
exã¡
);

352 
	}
}

	@include/jemalloc/internal/arena_stats.h

1 #i‚de‡
JEMALLOC_INTERNAL_ARENA_STATS_H


2 
	#JEMALLOC_INTERNAL_ARENA_STATS_H


	)

4 
	~"jemÆloc/öã∫Æ/©omic.h
"

5 
	~"jemÆloc/öã∫Æ/muãx.h
"

6 
	~"jemÆloc/öã∫Æ/muãx_¥of.h
"

7 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

14 #ifde‡
JEMALLOC_ATOMIC_U64


15 
©omic_u64_t
 
	t¨ía_°©s_u64_t
;

18 
uöt64_t
 
	t¨ía_°©s_u64_t
;

21 
¨ía_°©s_œrge_s
 
	t¨ía_°©s_œrge_t
;

22 
	s¨ía_°©s_œrge_s
 {

27 
¨ía_°©s_u64_t
 
	mnmÆloc
;

28 
¨ía_°©s_u64_t
 
	mndÆloc
;

35 
¨ía_°©s_u64_t
 
	mƒeque°s
;

38 
size_t
 
	mcuæexã¡s
;

41 
¨ía_°©s_deˇy_s
 
	t¨ía_°©s_deˇy_t
;

42 
	s¨ía_°©s_deˇy_s
 {

44 
¨ía_°©s_u64_t
 
	m≈urge
;

46 
¨ía_°©s_u64_t
 
	mnmadvi£
;

48 
¨ía_°©s_u64_t
 
	mpurged
;

56 
¨ía_°©s_s
 
	t¨ía_°©s_t
;

57 
	s¨ía_°©s_s
 {

58 #i‚de‡
JEMALLOC_ATOMIC_U64


59 
mÆloc_muãx_t
 
	mmtx
;

63 
©omic_zu_t
 
	mm≠≥d
;

70 
©omic_zu_t
 
	mªèöed
;

72 
¨ía_°©s_deˇy_t
 
	mdeˇy_dúty
;

73 
¨ía_°©s_deˇy_t
 
	mdeˇy_muzzy
;

75 
©omic_zu_t
 
	mba£
;

76 
©omic_zu_t
 
	möã∫Æ
;

77 
©omic_zu_t
 
	mªsidít
;

78 
©omic_zu_t
 
	mmëad©a_thp
;

80 
©omic_zu_t
 
	mÆloˇãd_œrge
;

81 
¨ía_°©s_u64_t
 
	mnmÆloc_œrge
;

82 
¨ía_°©s_u64_t
 
	mndÆloc_œrge
;

83 
¨ía_°©s_u64_t
 
	mƒeque°s_œrge
;

86 
©omic_zu_t
 
	mtˇche_byãs
;

88 
muãx_¥of_d©a_t
 
	mmuãx_¥of_d©a
[
muãx_¥of_num_¨ía_muãxes
];

91 
¨ía_°©s_œrge_t
 
	ml°©s
[
NSIZES
 - 
NBINS
];

94 
n°ime_t
 
	mu±ime
;

97 
ölöe
 
boﬁ


98 
	$¨ía_°©s_öô
(
tsdn_t
 *
tsdn
, 
¨ía_°©s_t
 *
¨ía_°©s
) {

99 i‡(
c⁄fig_debug
) {

100 
size_t
 
i
 = 0; i < (
¨ía_°©s_t
); i++) {

101 
	`as£π
(((*)
¨ía_°©s
)[
i
] == 0);

104 #i‚de‡
JEMALLOC_ATOMIC_U64


105 i‡(
	`mÆloc_muãx_öô
(&
¨ía_°©s
->
mtx
, "arena_stats",

106 
WITNESS_RANK_ARENA_STATS
, 
mÆloc_muãx_ønk_ex˛usive
)) {

107  
åue
;

111  
Ál£
;

112 
	}
}

114 
ölöe
 

115 
	$¨ía_°©s_lock
(
tsdn_t
 *
tsdn
, 
¨ía_°©s_t
 *
¨ía_°©s
) {

116 #i‚de‡
JEMALLOC_ATOMIC_U64


117 
	`mÆloc_muãx_lock
(
tsdn
, &
¨ía_°©s
->
mtx
);

119 
	}
}

121 
ölöe
 

122 
	$¨ía_°©s_u∆ock
(
tsdn_t
 *
tsdn
, 
¨ía_°©s_t
 *
¨ía_°©s
) {

123 #i‚de‡
JEMALLOC_ATOMIC_U64


124 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ía_°©s
->
mtx
);

126 
	}
}

128 
ölöe
 
uöt64_t


129 
	$¨ía_°©s_ªad_u64
(
tsdn_t
 *
tsdn
, 
¨ía_°©s_t
 *
¨ía_°©s
,

130 
¨ía_°©s_u64_t
 *
p
) {

131 #ifde‡
JEMALLOC_ATOMIC_U64


132  
	`©omic_lﬂd_u64
(
p
, 
ATOMIC_RELAXED
);

134 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
¨ía_°©s
->
mtx
);

135  *
p
;

137 
	}
}

139 
ölöe
 

140 
	$¨ía_°©s_add_u64
(
tsdn_t
 *
tsdn
, 
¨ía_°©s_t
 *
¨ía_°©s
,

141 
¨ía_°©s_u64_t
 *
p
, 
uöt64_t
 
x
) {

142 #ifde‡
JEMALLOC_ATOMIC_U64


143 
	`©omic_„tch_add_u64
(
p
, 
x
, 
ATOMIC_RELAXED
);

145 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
¨ía_°©s
->
mtx
);

146 *
p
 +
x
;

148 
	}
}

150 
UNUSED
 
ölöe
 

151 
	$¨ía_°©s_sub_u64
(
tsdn_t
 *
tsdn
, 
¨ía_°©s_t
 *
¨ía_°©s
,

152 
¨ía_°©s_u64_t
 *
p
, 
uöt64_t
 
x
) {

153 #ifde‡
JEMALLOC_ATOMIC_U64


154 
UNUSED
 
uöt64_t
 
r
 = 
	`©omic_„tch_sub_u64
(
p
, 
x
, 
ATOMIC_RELAXED
);

155 
	`as£π
(
r
 - 
x
 <=Ñ);

157 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
¨ía_°©s
->
mtx
);

158 *
p
 -
x
;

159 
	`as£π
(*
p
 + 
x
 >= *p);

161 
	}
}

168 
ölöe
 

169 
	$¨ía_°©s_accum_u64
(
¨ía_°©s_u64_t
 *
d°
, 
uöt64_t
 
§c
) {

170 #ifde‡
JEMALLOC_ATOMIC_U64


171 
uöt64_t
 
cur_d°
 = 
	`©omic_lﬂd_u64
(
d°
, 
ATOMIC_RELAXED
);

172 
	`©omic_°‹e_u64
(
d°
, 
§c
 + 
cur_d°
, 
ATOMIC_RELAXED
);

174 *
d°
 +
§c
;

176 
	}
}

178 
ölöe
 
size_t


179 
	$¨ía_°©s_ªad_zu
(
tsdn_t
 *
tsdn
, 
¨ía_°©s_t
 *
¨ía_°©s
, 
©omic_zu_t
 *
p
) {

180 #ifde‡
JEMALLOC_ATOMIC_U64


181  
	`©omic_lﬂd_zu
(
p
, 
ATOMIC_RELAXED
);

183 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
¨ía_°©s
->
mtx
);

184  
	`©omic_lﬂd_zu
(
p
, 
ATOMIC_RELAXED
);

186 
	}
}

188 
ölöe
 

189 
	$¨ía_°©s_add_zu
(
tsdn_t
 *
tsdn
, 
¨ía_°©s_t
 *
¨ía_°©s
, 
©omic_zu_t
 *
p
,

190 
size_t
 
x
) {

191 #ifde‡
JEMALLOC_ATOMIC_U64


192 
	`©omic_„tch_add_zu
(
p
, 
x
, 
ATOMIC_RELAXED
);

194 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
¨ía_°©s
->
mtx
);

195 
size_t
 
cur
 = 
	`©omic_lﬂd_zu
(
p
, 
ATOMIC_RELAXED
);

196 
	`©omic_°‹e_zu
(
p
, 
cur
 + 
x
, 
ATOMIC_RELAXED
);

198 
	}
}

200 
ölöe
 

201 
	$¨ía_°©s_sub_zu
(
tsdn_t
 *
tsdn
, 
¨ía_°©s_t
 *
¨ía_°©s
, 
©omic_zu_t
 *
p
,

202 
size_t
 
x
) {

203 #ifde‡
JEMALLOC_ATOMIC_U64


204 
UNUSED
 
size_t
 
r
 = 
	`©omic_„tch_sub_zu
(
p
, 
x
, 
ATOMIC_RELAXED
);

205 
	`as£π
(
r
 - 
x
 <=Ñ);

207 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
¨ía_°©s
->
mtx
);

208 
size_t
 
cur
 = 
	`©omic_lﬂd_zu
(
p
, 
ATOMIC_RELAXED
);

209 
	`©omic_°‹e_zu
(
p
, 
cur
 - 
x
, 
ATOMIC_RELAXED
);

211 
	}
}

214 
ölöe
 

215 
	$¨ía_°©s_accum_zu
(
©omic_zu_t
 *
d°
, 
size_t
 
§c
) {

216 
size_t
 
cur_d°
 = 
	`©omic_lﬂd_zu
(
d°
, 
ATOMIC_RELAXED
);

217 
	`©omic_°‹e_zu
(
d°
, 
§c
 + 
cur_d°
, 
ATOMIC_RELAXED
);

218 
	}
}

220 
ölöe
 

221 
	$¨ía_°©s_œrge_ƒeque°s_add
(
tsdn_t
 *
tsdn
, 
¨ía_°©s_t
 *
¨ía_°©s
,

222 
szöd_t
 
szöd
, 
uöt64_t
 
ƒeque°s
) {

223 
	`¨ía_°©s_lock
(
tsdn
, 
¨ía_°©s
);

224 
	`¨ía_°©s_add_u64
(
tsdn
, 
¨ía_°©s
, &¨ía_°©s->
l°©s
[
szöd
 -

225 
NBINS
].
ƒeque°s
,Çrequests);

226 
	`¨ía_°©s_u∆ock
(
tsdn
, 
¨ía_°©s
);

227 
	}
}

229 
ölöe
 

230 
	$¨ía_°©s_m≠≥d_add
(
tsdn_t
 *
tsdn
, 
¨ía_°©s_t
 *
¨ía_°©s
, 
size_t
 
size
) {

231 
	`¨ía_°©s_lock
(
tsdn
, 
¨ía_°©s
);

232 
	`¨ía_°©s_add_zu
(
tsdn
, 
¨ía_°©s
, &¨ía_°©s->
m≠≥d
, 
size
);

233 
	`¨ía_°©s_u∆ock
(
tsdn
, 
¨ía_°©s
);

234 
	}
}

	@include/jemalloc/internal/arena_structs_a.h

1 #i‚de‡
JEMALLOC_INTERNAL_ARENA_STRUCTS_A_H


2 
	#JEMALLOC_INTERNAL_ARENA_STRUCTS_A_H


	)

4 
	~"jemÆloc/öã∫Æ/bôm≠.h
"

6 
	s¨ía_¶ab_d©a_s
 {

8 
bôm≠_t
 
	mbôm≠
[
BITMAP_GROUPS_MAX
];

	@include/jemalloc/internal/arena_structs_b.h

1 #i‚de‡
JEMALLOC_INTERNAL_ARENA_STRUCTS_B_H


2 
	#JEMALLOC_INTERNAL_ARENA_STRUCTS_B_H


	)

4 
	~"jemÆloc/öã∫Æ/¨ía_°©s.h
"

5 
	~"jemÆloc/öã∫Æ/©omic.h
"

6 
	~"jemÆloc/öã∫Æ/bö.h
"

7 
	~"jemÆloc/öã∫Æ/bôm≠.h
"

8 
	~"jemÆloc/öã∫Æ/exã¡_dss.h
"

9 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ty≥s.h
"

10 
	~"jemÆloc/öã∫Æ/muãx.h
"

11 
	~"jemÆloc/öã∫Æ/n°ime.h
"

12 
	~"jemÆloc/öã∫Æ/ql.h
"

13 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

14 
	~"jemÆloc/öã∫Æ/smoŸh°ï.h
"

15 
	~"jemÆloc/öã∫Æ/tickî.h
"

17 
	s¨ía_deˇy_s
 {

19 
mÆloc_muãx_t
 
	mmtx
;

24 
boﬁ
 
	mpurgög
;

30 
©omic_zd_t
 
	mtime_ms
;

32 
n°ime_t
 
	möãrvÆ
;

40 
n°ime_t
 
	mïoch
;

42 
uöt64_t
 
	mjôãr_°©e
;

50 
n°ime_t
 
	mdódlöe
;

57 
size_t
 
	mnu≈urged
;

64 
size_t
 
	mbacklog
[
SMOOTHSTEP_NSTEPS
];

72 
¨ía_°©s_deˇy_t
 *
	m°©s
;

74 
uöt64_t
 
	m˚û_≈ages
;

77 
	s¨ía_s
 {

91 
©omic_u_t
 
	m¡hªads
[2];

98 
tsdn_t
 *
	mœ°_thd
;

101 
¨ía_°©s_t
 
	m°©s
;

110 
ql_hód
(
tˇche_t
Ë
	mtˇche_ql
;

111 
ql_hód
(
ˇche_bö_¨øy_des¸ùt‹_t
Ë
	mˇche_bö_¨øy_des¸ùt‹_ql
;

112 
mÆloc_muãx_t
 
	mtˇche_ql_mtx
;

115 
¥of_accum_t
 
	m¥of_accum
;

116 
uöt64_t
 
	m¥of_accumbyãs
;

124 
©omic_zu_t
 
	moff£t_°©e
;

131 
©omic_zu_t
 
	mexã¡_¢_√xt
;

138 
©omic_u_t
 
	mdss_¥ec
;

145 
©omic_zu_t
 
	m«˘ive
;

152 
exã¡_li°_t
 
	mœrge
;

154 
mÆloc_muãx_t
 
	mœrge_mtx
;

162 
exã¡s_t
 
	mexã¡s_dúty
;

163 
exã¡s_t
 
	mexã¡s_muzzy
;

164 
exã¡s_t
 
	mexã¡s_ªèöed
;

172 
¨ía_deˇy_t
 
	mdeˇy_dúty
;

173 
¨ía_deˇy_t
 
	mdeˇy_muzzy
;

188 
pszöd_t
 
	mexã¡_grow_√xt
;

189 
pszöd_t
 
	mªèö_grow_limô
;

190 
mÆloc_muãx_t
 
	mexã¡_grow_mtx
;

198 
exã¡_åì_t
 
	mexã¡_avaû
;

199 
mÆloc_muãx_t
 
	mexã¡_avaû_mtx
;

206 
bö_t
 
	mbös
[
NBINS
];

213 
ba£_t
 *
	mba£
;

215 
n°ime_t
 
	m¸óã_time
;

219 
	s¨ía_td©a_s
 {

220 
tickî_t
 
	mdeˇy_tickî
;

224 
	sÆloc_˘x_s
 {

225 
szöd_t
 
	mszöd
;

226 
boﬁ
 
	m¶ab
;

	@include/jemalloc/internal/arena_types.h

1 #i‚de‡
JEMALLOC_INTERNAL_ARENA_TYPES_H


2 
	#JEMALLOC_INTERNAL_ARENA_TYPES_H


	)

5 
	#LG_SLAB_MAXREGS
 (
LG_PAGE
 - 
LG_TINY_MIN
)

	)

6 
	#SLAB_MAXREGS
 (1U << 
LG_SLAB_MAXREGS
)

	)

9 
	#DIRTY_DECAY_MS_DEFAULT
 
	`ZD
(10 * 1000)

	)

10 
	#MUZZY_DECAY_MS_DEFAULT
 
	`ZD
(10 * 1000)

	)

12 
	#DECAY_NTICKS_PER_UPDATE
 1000

	)

14 
¨ía_¶ab_d©a_s
 
	t¨ía_¶ab_d©a_t
;

15 
¨ía_deˇy_s
 
	t¨ía_deˇy_t
;

16 
¨ía_s
 
	t¨ía_t
;

17 
¨ía_td©a_s
 
	t¨ía_td©a_t
;

18 
Æloc_˘x_s
 
	tÆloc_˘x_t
;

21 
	m≥r˝u_¨ía_mode_«mes_ba£
 = 0,

27 
	m≥r˝u_¨ía_unöô
 = 0,

28 
	m≥r_phy˝u_¨ía_unöô
 = 1,

31 
	m≥r˝u_¨ía_dißbÀd
 = 2,

33 
	m≥r˝u_¨ía_mode_«mes_limô
 = 3,

34 
	m≥r˝u_¨ía_mode_íabÀd_ba£
 = 3,

36 
	m≥r˝u_¨ía
 = 3,

37 
	m≥r_phy˝u_¨ía
 = 4

38 } 
	t≥r˝u_¨ía_mode_t
;

40 
	#PERCPU_ARENA_ENABLED
(
m
Ë((mË>
≥r˝u_¨ía_mode_íabÀd_ba£
)

	)

41 
	#PERCPU_ARENA_DEFAULT
 
≥r˝u_¨ía_dißbÀd


	)

	@include/jemalloc/internal/assert.h

1 
	~"jemÆloc/öã∫Æ/mÆloc_io.h
"

2 
	~"jemÆloc/öã∫Æ/utû.h
"

8 #i‚de‡
as£π


9 
	#as£π
(
e
) do { \

10 i‡(
	`u∆ikñy
(
c⁄fig_debug
 && !(
e
))) { \

11 
	`mÆloc_¥ötf
( \

13 
__FILE__
, 
__LINE__
, #e); \

14 
	`ab‹t
(); \

16 } 0)

	)

19 #i‚de‡
nŸ_ªached


20 
	#nŸ_ªached
() do { \

21 i‡(
c⁄fig_debug
) { \

22 
	`mÆloc_¥ötf
( \

24 
__FILE__
, 
__LINE__
); \

25 
	`ab‹t
(); \

27 
	`uƒóchabÀ
(); \

28 } 0)

	)

31 #i‚de‡
nŸ_im∂emíãd


32 
	#nŸ_im∂emíãd
() do { \

33 i‡(
c⁄fig_debug
) { \

34 
	`mÆloc_¥ötf
("<jemalloc>: %s:%d: Not implemented\n", \

35 
__FILE__
, 
__LINE__
); \

36 
	`ab‹t
(); \

38 } 0)

	)

41 #i‚de‡
as£π_nŸ_im∂emíãd


42 
	#as£π_nŸ_im∂emíãd
(
e
) do { \

43 i‡(
	`u∆ikñy
(
c⁄fig_debug
 && !(
e
))) { \

44 
	`nŸ_im∂emíãd
(); \

46 } 0)

	)

50 #i‚de‡
ˇs£π


51 
	#ˇs£π
(
c
) do { \

52 i‡(
	`u∆ikñy
(!(
c
))) { \

53 
	`nŸ_ªached
(); \

55 } 0)

	)

	@include/jemalloc/internal/atomic.h

1 #i‚de‡
JEMALLOC_INTERNAL_ATOMIC_H


2 
	#JEMALLOC_INTERNAL_ATOMIC_H


	)

4 
	#ATOMIC_INLINE
 
ölöe


	)

6 #i‡
deföed
(
JEMALLOC_GCC_ATOMIC_ATOMICS
)

7 
	~"jemÆloc/öã∫Æ/©omic_gcc_©omic.h
"

8 #ñi‡
deföed
(
JEMALLOC_GCC_SYNC_ATOMICS
)

9 
	~"jemÆloc/öã∫Æ/©omic_gcc_sync.h
"

10 #ñi‡
deföed
(
_MSC_VER
)

11 
	~"jemÆloc/öã∫Æ/©omic_msvc.h
"

12 #ñi‡
deföed
(
JEMALLOC_C11_ATOMICS
)

13 
	~"jemÆloc/öã∫Æ/©omic_c11.h
"

41 
	#ATOMIC_RELAXED
 
©omic_mem‹y_‹dî_ªœxed


	)

42 
	#ATOMIC_ACQUIRE
 
©omic_mem‹y_‹dî_acquúe


	)

43 
	#ATOMIC_RELEASE
 
©omic_mem‹y_‹dî_ªÀa£


	)

44 
	#ATOMIC_ACQ_REL
 
©omic_mem‹y_‹dî_acq_ªl


	)

45 
	#ATOMIC_SEQ_CST
 
©omic_mem‹y_‹dî_£q_c°


	)

51 #i‡(
LG_SIZEOF_PTR
 =3 || 
LG_SIZEOF_INT
 == 3)

52 
	#JEMALLOC_ATOMIC_U64


	)

55 
	$JEMALLOC_GENERATE_ATOMICS
(*, 
p
, 
LG_SIZEOF_PTR
)

61 
	$JEMALLOC_GENERATE_ATOMICS
(
boﬁ
, 
b
, 0)

63 
	$JEMALLOC_GENERATE_INT_ATOMICS
(, 
u
, 
LG_SIZEOF_INT
)

65 
	$JEMALLOC_GENERATE_INT_ATOMICS
(
size_t
, 
zu
, 
LG_SIZEOF_PTR
)

67 
	$JEMALLOC_GENERATE_INT_ATOMICS
(
ssize_t
, 
zd
, 
LG_SIZEOF_PTR
)

69 
	$JEMALLOC_GENERATE_INT_ATOMICS
(
uöt32_t
, 
u32
, 2)

71 #ifde‡
JEMALLOC_ATOMIC_U64


72 
	$JEMALLOC_GENERATE_INT_ATOMICS
(
uöt64_t
, 
u64
, 3)

75 #unde‡
ATOMIC_INLINE


	@include/jemalloc/internal/atomic_c11.h

1 #i‚de‡
JEMALLOC_INTERNAL_ATOMIC_C11_H


2 
	#JEMALLOC_INTERNAL_ATOMIC_C11_H


	)

4 
	~<°d©omic.h
>

6 
	#ATOMIC_INIT
(...Ë
	`ATOMIC_VAR_INIT
(
__VA_ARGS__
)

	)

8 
	#©omic_mem‹y_‹dî_t
 
mem‹y_‹dî


	)

9 
	#©omic_mem‹y_‹dî_ªœxed
 
mem‹y_‹dî_ªœxed


	)

10 
	#©omic_mem‹y_‹dî_acquúe
 
mem‹y_‹dî_acquúe


	)

11 
	#©omic_mem‹y_‹dî_ªÀa£
 
mem‹y_‹dî_ªÀa£


	)

12 
	#©omic_mem‹y_‹dî_acq_ªl
 
mem‹y_‹dî_acq_ªl


	)

13 
	#©omic_mem‹y_‹dî_£q_c°
 
mem‹y_‹dî_£q_c°


	)

15 
	#©omic_„n˚
 
©omic_thªad_„n˚


	)

17 
	#JEMALLOC_GENERATE_ATOMICS
(
ty≥
, 
sh‹t_ty≥
, \

18  
lg_size
) \

19 
	`_Atomic
(
	tty≥
Ë
	t©omic_
##
	tsh‹t_ty≥
##
	t_t
; \

21 
ATOMIC_INLINE
 
ty≥
 \

22 
©omic_lﬂd_
##
	`sh‹t_ty≥
(c⁄° 
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

23 
©omic_mem‹y_‹dî_t
 
mo
) { \

29 
©omic_
##
sh‹t_ty≥
##
_t
* 
a_n⁄c⁄°
 = \

30 (
©omic_
##
sh‹t_ty≥
##
_t
*)
a
; \

31  
	`©omic_lﬂd_ex∂icô
(
a_n⁄c⁄°
, 
mo
); \

34 
ATOMIC_INLINE
 \

35 
©omic_°‹e_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

36 
ty≥
 
vÆ
, 
©omic_mem‹y_‹dî_t
 
mo
) { \

37 
	`©omic_°‹e_ex∂icô
(
a
, 
vÆ
, 
mo
); \

40 
ATOMIC_INLINE
 
ty≥
 \

41 
©omic_exch™ge_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

42 
©omic_mem‹y_‹dî_t
 
mo
) { \

43  
	`©omic_exch™ge_ex∂icô
(
a
, 
vÆ
, 
mo
); \

46 
ATOMIC_INLINE
 
boﬁ
 \

47 
©omic_com∑ª_exch™ge_wók_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

48 
ty≥
 *
ex≥˘ed
,Åy≥ 
desúed
, 
©omic_mem‹y_‹dî_t
 
suc˚ss_mo
, \

49 
©omic_mem‹y_‹dî_t
 
Áûuª_mo
) { \

50  
	`©omic_com∑ª_exch™ge_wók_ex∂icô
(
a
, 
ex≥˘ed
, \

51 
desúed
, 
suc˚ss_mo
, 
Áûuª_mo
); \

54 
ATOMIC_INLINE
 
boﬁ
 \

55 
©omic_com∑ª_exch™ge_°r⁄g_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

56 
ty≥
 *
ex≥˘ed
,Åy≥ 
desúed
, 
©omic_mem‹y_‹dî_t
 
suc˚ss_mo
, \

57 
©omic_mem‹y_‹dî_t
 
Áûuª_mo
) { \

58  
	`©omic_com∑ª_exch™ge_°r⁄g_ex∂icô
(
a
, 
ex≥˘ed
, \

59 
desúed
, 
suc˚ss_mo
, 
Áûuª_mo
); \

60 }

	)

66 
	#JEMALLOC_GENERATE_INT_ATOMICS
(
ty≥
, 
sh‹t_ty≥
, \

67  
lg_size
) \

68 
	`JEMALLOC_GENERATE_ATOMICS
(
ty≥
, 
sh‹t_ty≥
, 
lg_size
) \

70 
ATOMIC_INLINE
 
ty≥
 \

71 
©omic_„tch_add_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

72 
ty≥
 
vÆ
, 
©omic_mem‹y_‹dî_t
 
mo
) { \

73  
	`©omic_„tch_add_ex∂icô
(
a
, 
vÆ
, 
mo
); \

76 
ATOMIC_INLINE
 
ty≥
 \

77 
©omic_„tch_sub_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

78 
ty≥
 
vÆ
, 
©omic_mem‹y_‹dî_t
 
mo
) { \

79  
	`©omic_„tch_sub_ex∂icô
(
a
, 
vÆ
, 
mo
); \

81 
ATOMIC_INLINE
 
ty≥
 \

82 
©omic_„tch_™d_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

83 
ty≥
 
vÆ
, 
©omic_mem‹y_‹dî_t
 
mo
) { \

84  
	`©omic_„tch_™d_ex∂icô
(
a
, 
vÆ
, 
mo
); \

86 
ATOMIC_INLINE
 
ty≥
 \

87 
©omic_„tch_‹_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

88 
ty≥
 
vÆ
, 
©omic_mem‹y_‹dî_t
 
mo
) { \

89  
	`©omic_„tch_‹_ex∂icô
(
a
, 
vÆ
, 
mo
); \

91 
ATOMIC_INLINE
 
ty≥
 \

92 
©omic_„tch_x‹_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

93 
ty≥
 
vÆ
, 
©omic_mem‹y_‹dî_t
 
mo
) { \

94  
	`©omic_„tch_x‹_ex∂icô
(
a
, 
vÆ
, 
mo
); \

95 }

	)

	@include/jemalloc/internal/atomic_gcc_atomic.h

1 #i‚de‡
JEMALLOC_INTERNAL_ATOMIC_GCC_ATOMIC_H


2 
	#JEMALLOC_INTERNAL_ATOMIC_GCC_ATOMIC_H


	)

4 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	#ATOMIC_INIT
(...Ë{
__VA_ARGS__
}

	)

9 
	m©omic_mem‹y_‹dî_ªœxed
,

10 
	m©omic_mem‹y_‹dî_acquúe
,

11 
	m©omic_mem‹y_‹dî_ªÀa£
,

12 
	m©omic_mem‹y_‹dî_acq_ªl
,

13 
	m©omic_mem‹y_‹dî_£q_c°


14 } 
	t©omic_mem‹y_‹dî_t
;

16 
ATOMIC_INLINE
 

17 
	$©omic_íum_to_buûtö
(
©omic_mem‹y_‹dî_t
 
mo
) {

18 
mo
) {

19 
©omic_mem‹y_‹dî_ªœxed
:

20  
__ATOMIC_RELAXED
;

21 
©omic_mem‹y_‹dî_acquúe
:

22  
__ATOMIC_ACQUIRE
;

23 
©omic_mem‹y_‹dî_ªÀa£
:

24  
__ATOMIC_RELEASE
;

25 
©omic_mem‹y_‹dî_acq_ªl
:

26  
__ATOMIC_ACQ_REL
;

27 
©omic_mem‹y_‹dî_£q_c°
:

28  
__ATOMIC_SEQ_CST
;

31 
	`nŸ_ªached
();

32 
	}
}

34 
ATOMIC_INLINE
 

35 
	$©omic_„n˚
(
©omic_mem‹y_‹dî_t
 
mo
) {

36 
	`__©omic_thªad_„n˚
(
	`©omic_íum_to_buûtö
(
mo
));

37 
	}
}

39 
	#JEMALLOC_GENERATE_ATOMICS
(
ty≥
, 
sh‹t_ty≥
, \

40  
lg_size
) \

42 
ty≥
 
ª¥
; \

43 } 
	t©omic_
##
	tsh‹t_ty≥
##
	t_t
; \

45 
ATOMIC_INLINE
 
ty≥
 \

46 
©omic_lﬂd_
##
	`sh‹t_ty≥
(c⁄° 
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

47 
©omic_mem‹y_‹dî_t
 
mo
) { \

48 
ty≥
 
ªsu…
; \

49 
	`__©omic_lﬂd
(&
a
->
ª¥
, &
ªsu…
, 
	`©omic_íum_to_buûtö
(
mo
)); \

50  
ªsu…
; \

53 
ATOMIC_INLINE
 \

54 
©omic_°‹e_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

55 
©omic_mem‹y_‹dî_t
 
mo
) { \

56 
	`__©omic_°‹e
(&
a
->
ª¥
, &
vÆ
, 
	`©omic_íum_to_buûtö
(
mo
)); \

59 
ATOMIC_INLINE
 
ty≥
 \

60 
©omic_exch™ge_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

61 
©omic_mem‹y_‹dî_t
 
mo
) { \

62 
ty≥
 
ªsu…
; \

63 
	`__©omic_exch™ge
(&
a
->
ª¥
, &
vÆ
, &
ªsu…
, \

64 
	`©omic_íum_to_buûtö
(
mo
)); \

65  
ªsu…
; \

68 
ATOMIC_INLINE
 
boﬁ
 \

69 
©omic_com∑ª_exch™ge_wók_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

70 
ty≥
 *
ex≥˘ed
,Åy≥ 
desúed
, 
©omic_mem‹y_‹dî_t
 
suc˚ss_mo
, \

71 
©omic_mem‹y_‹dî_t
 
Áûuª_mo
) { \

72  
	`__©omic_com∑ª_exch™ge
(&
a
->
ª¥
, 
ex≥˘ed
, &
desúed
, \

73 
åue
, 
	`©omic_íum_to_buûtö
(
suc˚ss_mo
), \

74 
	`©omic_íum_to_buûtö
(
Áûuª_mo
)); \

77 
ATOMIC_INLINE
 
boﬁ
 \

78 
©omic_com∑ª_exch™ge_°r⁄g_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

79 
ty≥
 *
ex≥˘ed
,Åy≥ 
desúed
, 
©omic_mem‹y_‹dî_t
 
suc˚ss_mo
, \

80 
©omic_mem‹y_‹dî_t
 
Áûuª_mo
) { \

81  
	`__©omic_com∑ª_exch™ge
(&
a
->
ª¥
, 
ex≥˘ed
, &
desúed
, \

82 
Ál£
, \

83 
	`©omic_íum_to_buûtö
(
suc˚ss_mo
), \

84 
	`©omic_íum_to_buûtö
(
Áûuª_mo
)); \

85 }

	)

88 
	#JEMALLOC_GENERATE_INT_ATOMICS
(
ty≥
, 
sh‹t_ty≥
, \

89  
lg_size
) \

90 
	`JEMALLOC_GENERATE_ATOMICS
(
ty≥
, 
sh‹t_ty≥
, 
lg_size
) \

92 
ATOMIC_INLINE
 
ty≥
 \

93 
©omic_„tch_add_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

94 
©omic_mem‹y_‹dî_t
 
mo
) { \

95  
	`__©omic_„tch_add
(&
a
->
ª¥
, 
vÆ
, \

96 
	`©omic_íum_to_buûtö
(
mo
)); \

99 
ATOMIC_INLINE
 
ty≥
 \

100 
©omic_„tch_sub_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

101 
©omic_mem‹y_‹dî_t
 
mo
) { \

102  
	`__©omic_„tch_sub
(&
a
->
ª¥
, 
vÆ
, \

103 
	`©omic_íum_to_buûtö
(
mo
)); \

106 
ATOMIC_INLINE
 
ty≥
 \

107 
©omic_„tch_™d_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

108 
©omic_mem‹y_‹dî_t
 
mo
) { \

109  
	`__©omic_„tch_™d
(&
a
->
ª¥
, 
vÆ
, \

110 
	`©omic_íum_to_buûtö
(
mo
)); \

113 
ATOMIC_INLINE
 
ty≥
 \

114 
©omic_„tch_‹_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

115 
©omic_mem‹y_‹dî_t
 
mo
) { \

116  
	`__©omic_„tch_‹
(&
a
->
ª¥
, 
vÆ
, \

117 
	`©omic_íum_to_buûtö
(
mo
)); \

120 
ATOMIC_INLINE
 
ty≥
 \

121 
©omic_„tch_x‹_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

122 
©omic_mem‹y_‹dî_t
 
mo
) { \

123  
	`__©omic_„tch_x‹
(&
a
->
ª¥
, 
vÆ
, \

124 
	`©omic_íum_to_buûtö
(
mo
)); \

125 }

	)

	@include/jemalloc/internal/atomic_gcc_sync.h

1 #i‚de‡
JEMALLOC_INTERNAL_ATOMIC_GCC_SYNC_H


2 
	#JEMALLOC_INTERNAL_ATOMIC_GCC_SYNC_H


	)

4 
	#ATOMIC_INIT
(...Ë{
__VA_ARGS__
}

	)

7 
	m©omic_mem‹y_‹dî_ªœxed
,

8 
	m©omic_mem‹y_‹dî_acquúe
,

9 
	m©omic_mem‹y_‹dî_ªÀa£
,

10 
	m©omic_mem‹y_‹dî_acq_ªl
,

11 
	m©omic_mem‹y_‹dî_£q_c°


12 } 
	t©omic_mem‹y_‹dî_t
;

14 
ATOMIC_INLINE
 

15 
	$©omic_„n˚
(
©omic_mem‹y_‹dî_t
 
mo
) {

17 i‡(
mo
 =
©omic_mem‹y_‹dî_ªœxed
) {

18 
asm
 volatile("" ::: "memory");

21 i‡(
mo
 =
©omic_mem‹y_‹dî_£q_c°
) {

22 
asm
 volatile("" ::: "memory");

23 
	`__sync_synchr⁄ize
();

24 
asm
 volatile("" ::: "memory");

27 
asm
 volatile("" ::: "memory");

28 #i‡
	`deföed
(
__i386__
Ë|| deföed(
__x86_64__
)

30 #ñi‡
	`deföed
(
__µc__
)

31 
asm
 volatile("lwsync");

32 #ñi‡
	`deföed
(
__•¨c__
Ë&& deföed(
__¨ch64__
)

33 i‡(
mo
 =
©omic_mem‹y_‹dî_acquúe
) {

34 
asm
 volatile("membar #LoadLoad | #LoadStore");

35 } i‡(
mo
 =
©omic_mem‹y_‹dî_ªÀa£
) {

36 
asm
 volatile("membar #LoadStore | #StoreStore");

38 
asm
 volatile("membar #LoadLoad | #LoadStore | #StoreStore");

41 
	`__sync_synchr⁄ize
();

43 
asm
 volatile("" ::: "memory");

44 
	}
}

63 
ATOMIC_INLINE
 

64 
	$©omic_¥e_sc_lﬂd_„n˚
() {

65 #i‡
	`deföed
(
__i386__
Ë|| deföed(
__x86_64__
) || \

66 (
	`deföed
(
__•¨c__
Ë&& deföed(
__¨ch64__
))

67 
	`©omic_„n˚
(
©omic_mem‹y_‹dî_ªœxed
);

69 
	`©omic_„n˚
(
©omic_mem‹y_‹dî_£q_c°
);

71 
	}
}

73 
ATOMIC_INLINE
 

74 
	$©omic_po°_sc_°‹e_„n˚
() {

75 #i‡
	`deföed
(
__i386__
Ë|| deföed(
__x86_64__
) || \

76 (
	`deföed
(
__•¨c__
Ë&& deföed(
__¨ch64__
))

77 
	`©omic_„n˚
(
©omic_mem‹y_‹dî_£q_c°
);

79 
	`©omic_„n˚
(
©omic_mem‹y_‹dî_ªœxed
);

82 
	}
}

84 
	#JEMALLOC_GENERATE_ATOMICS
(
ty≥
, 
sh‹t_ty≥
, \

85  
lg_size
) \

87 
ty≥
 vﬁ©ûê
ª¥
; \

88 } 
	t©omic_
##
	tsh‹t_ty≥
##
	t_t
; \

90 
ATOMIC_INLINE
 
ty≥
 \

91 
©omic_lﬂd_
##
	`sh‹t_ty≥
(c⁄° 
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

92 
©omic_mem‹y_‹dî_t
 
mo
) { \

93 i‡(
mo
 =
©omic_mem‹y_‹dî_£q_c°
) { \

94 
	`©omic_¥e_sc_lﬂd_„n˚
(); \

96 
ty≥
 
ªsu…
 = 
a
->
ª¥
; \

97 i‡(
mo
 !
©omic_mem‹y_‹dî_ªœxed
) { \

98 
	`©omic_„n˚
(
©omic_mem‹y_‹dî_acquúe
); \

100  
ªsu…
; \

103 
ATOMIC_INLINE
 \

104 
©omic_°‹e_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

105 
ty≥
 
vÆ
, 
©omic_mem‹y_‹dî_t
 
mo
) { \

106 i‡(
mo
 !
©omic_mem‹y_‹dî_ªœxed
) { \

107 
	`©omic_„n˚
(
©omic_mem‹y_‹dî_ªÀa£
); \

109 
a
->
ª¥
 = 
vÆ
; \

110 i‡(
mo
 =
©omic_mem‹y_‹dî_£q_c°
) { \

111 
	`©omic_po°_sc_°‹e_„n˚
(); \

115 
ATOMIC_INLINE
 
ty≥
 \

116 
©omic_exch™ge_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

117 
©omic_mem‹y_‹dî_t
 
mo
) { \

122 
åue
) { \

123 
ty≥
 
ﬁd
 = 
a
->
ª¥
; \

124 i‡(
	`__sync_boﬁ_com∑ª_™d_sw≠
(&
a
->
ª¥
, 
ﬁd
, 
vÆ
)) { \

125  
ﬁd
; \

130 
ATOMIC_INLINE
 
boﬁ
 \

131 
©omic_com∑ª_exch™ge_wók_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

132 
ty≥
 *
ex≥˘ed
,Åy≥ 
desúed
, 
©omic_mem‹y_‹dî_t
 
suc˚ss_mo
, \

133 
©omic_mem‹y_‹dî_t
 
Áûuª_mo
) { \

134 
ty≥
 
¥ev
 = 
	`__sync_vÆ_com∑ª_™d_sw≠
(&
a
->
ª¥
, *
ex≥˘ed
, \

135 
desúed
); \

136 i‡(
¥ev
 =*
ex≥˘ed
) { \

137  
åue
; \

139 *
ex≥˘ed
 = 
¥ev
; \

140  
Ál£
; \

143 
ATOMIC_INLINE
 
boﬁ
 \

144 
©omic_com∑ª_exch™ge_°r⁄g_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

145 
ty≥
 *
ex≥˘ed
,Åy≥ 
desúed
, 
©omic_mem‹y_‹dî_t
 
suc˚ss_mo
, \

146 
©omic_mem‹y_‹dî_t
 
Áûuª_mo
) { \

147 
ty≥
 
¥ev
 = 
	`__sync_vÆ_com∑ª_™d_sw≠
(&
a
->
ª¥
, *
ex≥˘ed
, \

148 
desúed
); \

149 i‡(
¥ev
 =*
ex≥˘ed
) { \

150  
åue
; \

152 *
ex≥˘ed
 = 
¥ev
; \

153  
Ál£
; \

155 }

	)

157 
	#JEMALLOC_GENERATE_INT_ATOMICS
(
ty≥
, 
sh‹t_ty≥
, \

158  
lg_size
) \

159 
	`JEMALLOC_GENERATE_ATOMICS
(
ty≥
, 
sh‹t_ty≥
, 
lg_size
) \

161 
ATOMIC_INLINE
 
ty≥
 \

162 
©omic_„tch_add_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

163 
©omic_mem‹y_‹dî_t
 
mo
) { \

164  
	`__sync_„tch_™d_add
(&
a
->
ª¥
, 
vÆ
); \

167 
ATOMIC_INLINE
 
ty≥
 \

168 
©omic_„tch_sub_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

169 
©omic_mem‹y_‹dî_t
 
mo
) { \

170  
	`__sync_„tch_™d_sub
(&
a
->
ª¥
, 
vÆ
); \

173 
ATOMIC_INLINE
 
ty≥
 \

174 
©omic_„tch_™d_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

175 
©omic_mem‹y_‹dî_t
 
mo
) { \

176  
	`__sync_„tch_™d_™d
(&
a
->
ª¥
, 
vÆ
); \

179 
ATOMIC_INLINE
 
ty≥
 \

180 
©omic_„tch_‹_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

181 
©omic_mem‹y_‹dî_t
 
mo
) { \

182  
	`__sync_„tch_™d_‹
(&
a
->
ª¥
, 
vÆ
); \

185 
ATOMIC_INLINE
 
ty≥
 \

186 
©omic_„tch_x‹_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

187 
©omic_mem‹y_‹dî_t
 
mo
) { \

188  
	`__sync_„tch_™d_x‹
(&
a
->
ª¥
, 
vÆ
); \

189 }

	)

	@include/jemalloc/internal/atomic_msvc.h

1 #i‚de‡
JEMALLOC_INTERNAL_ATOMIC_MSVC_H


2 
	#JEMALLOC_INTERNAL_ATOMIC_MSVC_H


	)

4 
	#ATOMIC_INIT
(...Ë{
__VA_ARGS__
}

	)

7 
	m©omic_mem‹y_‹dî_ªœxed
,

8 
	m©omic_mem‹y_‹dî_acquúe
,

9 
	m©omic_mem‹y_‹dî_ªÀa£
,

10 
	m©omic_mem‹y_‹dî_acq_ªl
,

11 
	m©omic_mem‹y_‹dî_£q_c°


12 } 
	t©omic_mem‹y_‹dî_t
;

14 
	t©omic_ª¥_0_t
;

15 
	t©omic_ª¥_1_t
;

16 
	t©omic_ª¥_2_t
;

17 
__öt64
 
	t©omic_ª¥_3_t
;

19 
ATOMIC_INLINE
 

20 
	$©omic_„n˚
(
©omic_mem‹y_‹dî_t
 
mo
) {

21 
	`_RódWrôeB¨rõr
();

22 #i‡
	`deföed
(
_M_ARM
Ë|| deföed(
_M_ARM64
)

24 i‡(
mo
 !
©omic_mem‹y_‹dî_ªœxed
) {

25 
	`Mem‹yB¨rõr
();

27 #ñi‡
	`deföed
(
_M_IX86
Ë|| deföed (
_M_X64
)

29 i‡(
mo
 =
©omic_mem‹y_‹dî_£q_c°
) {

30 
	`Mem‹yB¨rõr
();

35 
	`_RódWrôeB¨rõr
();

36 
	}
}

38 
	#ATOMIC_INTERLOCKED_REPR
(
lg_size
Ë
©omic_ª¥_
 ##Üg_sizê## 
_t


	)

40 
	#ATOMIC_CONCAT
(
a
, 
b
Ë
	`ATOMIC_RAW_CONCAT
◊, b)

	)

41 
	#ATOMIC_RAW_CONCAT
(
a
, 
b
Ë®## 
	)
b

43 
	#ATOMIC_INTERLOCKED_NAME
(
ba£_«me
, 
lg_size
Ë
	`ATOMIC_CONCAT
( \

44 
ba£_«me
, 
	`ATOMIC_INTERLOCKED_SUFFIX
(
lg_size
))

	)

46 
	#ATOMIC_INTERLOCKED_SUFFIX
(
lg_size
) \

47 
	`ATOMIC_CONCAT
(
ATOMIC_INTERLOCKED_SUFFIX_
, 
lg_size
)

	)

49 
	#ATOMIC_INTERLOCKED_SUFFIX_0
 8

	)

50 
	#ATOMIC_INTERLOCKED_SUFFIX_1
 16

	)

51 
	#ATOMIC_INTERLOCKED_SUFFIX_2


	)

52 
	#ATOMIC_INTERLOCKED_SUFFIX_3
 64

	)

54 
	#JEMALLOC_GENERATE_ATOMICS
(
ty≥
, 
sh‹t_ty≥
, 
lg_size
) \

56 
	`ATOMIC_INTERLOCKED_REPR
(
lg_size
Ë
ª¥
; \

57 } 
	t©omic_
##
	tsh‹t_ty≥
##
	t_t
; \

59 
ATOMIC_INLINE
 
ty≥
 \

60 
©omic_lﬂd_
##
	`sh‹t_ty≥
(c⁄° 
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

61 
©omic_mem‹y_‹dî_t
 
mo
) { \

62 
	`ATOMIC_INTERLOCKED_REPR
(
lg_size
Ë
ªt
 = 
a
->
ª¥
; \

63 i‡(
mo
 !
©omic_mem‹y_‹dî_ªœxed
) { \

64 
	`©omic_„n˚
(
©omic_mem‹y_‹dî_acquúe
); \

66  (
ty≥
Ë
ªt
; \

69 
ATOMIC_INLINE
 \

70 
©omic_°‹e_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

71 
ty≥
 
vÆ
, 
©omic_mem‹y_‹dî_t
 
mo
) { \

72 i‡(
mo
 !
©omic_mem‹y_‹dî_ªœxed
) { \

73 
	`©omic_„n˚
(
©omic_mem‹y_‹dî_ªÀa£
); \

75 
a
->
ª¥
 = (
	`ATOMIC_INTERLOCKED_REPR
(
lg_size
)Ë
vÆ
; \

76 i‡(
mo
 =
©omic_mem‹y_‹dî_£q_c°
) { \

77 
	`©omic_„n˚
(
©omic_mem‹y_‹dî_£q_c°
); \

81 
ATOMIC_INLINE
 
ty≥
 \

82 
©omic_exch™ge_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, 
ty≥
 
vÆ
, \

83 
©omic_mem‹y_‹dî_t
 
mo
) { \

84  (
ty≥
)
	`ATOMIC_INTERLOCKED_NAME
(
_I¡îlockedExch™ge
, \

85 
lg_size
)(&
a
->
ª¥
, (
	`ATOMIC_INTERLOCKED_REPR
÷g_size))
vÆ
); \

88 
ATOMIC_INLINE
 
boﬁ
 \

89 
©omic_com∑ª_exch™ge_wók_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

90 
ty≥
 *
ex≥˘ed
,Åy≥ 
desúed
, 
©omic_mem‹y_‹dî_t
 
suc˚ss_mo
, \

91 
©omic_mem‹y_‹dî_t
 
Áûuª_mo
) { \

92 
	`ATOMIC_INTERLOCKED_REPR
(
lg_size
Ë
e
 = \

93 (
	`ATOMIC_INTERLOCKED_REPR
(
lg_size
))*
ex≥˘ed
; \

94 
	`ATOMIC_INTERLOCKED_REPR
(
lg_size
Ë
d
 = \

95 (
	`ATOMIC_INTERLOCKED_REPR
(
lg_size
))
desúed
; \

96 
	`ATOMIC_INTERLOCKED_REPR
(
lg_size
Ë
ﬁd
 = \

97 
	`ATOMIC_INTERLOCKED_NAME
(
_I¡îlockedCom∑ªExch™ge
, \

98 
lg_size
)(&
a
->
ª¥
, 
d
, 
e
); \

99 i‡(
ﬁd
 =
e
) { \

100  
åue
; \

102 *
ex≥˘ed
 = (
ty≥
)
ﬁd
; \

103  
Ál£
; \

107 
ATOMIC_INLINE
 
boﬁ
 \

108 
©omic_com∑ª_exch™ge_°r⁄g_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

109 
ty≥
 *
ex≥˘ed
,Åy≥ 
desúed
, 
©omic_mem‹y_‹dî_t
 
suc˚ss_mo
, \

110 
©omic_mem‹y_‹dî_t
 
Áûuª_mo
) { \

112  
©omic_com∑ª_exch™ge_wók_
##
	`sh‹t_ty≥
(
a
, 
ex≥˘ed
, \

113 
desúed
, 
suc˚ss_mo
, 
Áûuª_mo
); \

114 }

	)

117 
	#JEMALLOC_GENERATE_INT_ATOMICS
(
ty≥
, 
sh‹t_ty≥
, 
lg_size
) \

118 
	`JEMALLOC_GENERATE_ATOMICS
(
ty≥
, 
sh‹t_ty≥
, 
lg_size
) \

120 
ATOMIC_INLINE
 
ty≥
 \

121 
©omic_„tch_add_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

122 
ty≥
 
vÆ
, 
©omic_mem‹y_‹dî_t
 
mo
) { \

123  (
ty≥
)
	`ATOMIC_INTERLOCKED_NAME
(
_I¡îlockedExch™geAdd
, \

124 
lg_size
)(&
a
->
ª¥
, (
	`ATOMIC_INTERLOCKED_REPR
÷g_size))
vÆ
); \

127 
ATOMIC_INLINE
 
ty≥
 \

128 
©omic_„tch_sub_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

129 
ty≥
 
vÆ
, 
©omic_mem‹y_‹dî_t
 
mo
) { \

134 
	`__¥agma
(
	`w¨nög
(
push
)) \

135 
	`__¥agma
(
	`w¨nög
(
dißbÀ
: 4146)) \

136  
©omic_„tch_add_
##
	`sh‹t_ty≥
(
a
, -
vÆ
, 
mo
); \

137 
	`__¥agma
(
	`w¨nög
(
p›
)) \

139 
ATOMIC_INLINE
 
ty≥
 \

140 
©omic_„tch_™d_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

141 
ty≥
 
vÆ
, 
©omic_mem‹y_‹dî_t
 
mo
) { \

142  (
ty≥
)
	`ATOMIC_INTERLOCKED_NAME
(
_I¡îlockedAnd
, 
lg_size
)( \

143 &
a
->
ª¥
, (
	`ATOMIC_INTERLOCKED_REPR
(
lg_size
))
vÆ
); \

145 
ATOMIC_INLINE
 
ty≥
 \

146 
©omic_„tch_‹_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

147 
ty≥
 
vÆ
, 
©omic_mem‹y_‹dî_t
 
mo
) { \

148  (
ty≥
)
	`ATOMIC_INTERLOCKED_NAME
(
_I¡îlockedOr
, 
lg_size
)( \

149 &
a
->
ª¥
, (
	`ATOMIC_INTERLOCKED_REPR
(
lg_size
))
vÆ
); \

151 
ATOMIC_INLINE
 
ty≥
 \

152 
©omic_„tch_x‹_
##
	`sh‹t_ty≥
(
©omic_
##
sh‹t_ty≥
##
_t
 *
a
, \

153 
ty≥
 
vÆ
, 
©omic_mem‹y_‹dî_t
 
mo
) { \

154  (
ty≥
)
	`ATOMIC_INTERLOCKED_NAME
(
_I¡îlockedX‹
, 
lg_size
)( \

155 &
a
->
ª¥
, (
	`ATOMIC_INTERLOCKED_REPR
(
lg_size
))
vÆ
); \

156 }

	)

	@include/jemalloc/internal/background_thread_externs.h

1 #i‚de‡
JEMALLOC_INTERNAL_BACKGROUND_THREAD_EXTERNS_H


2 
	#JEMALLOC_INTERNAL_BACKGROUND_THREAD_EXTERNS_H


	)

4 
boﬁ
 
›t_background_thªad
;

5 
mÆloc_muãx_t
 
background_thªad_lock
;

6 
©omic_b_t
 
background_thªad_íabÀd_°©e
;

7 
size_t
 
n_background_thªads
;

8 
background_thªad_öfo_t
 *
background_thªad_öfo
;

9 
boﬁ
 
ˇn_íabÀ_background_thªad
;

11 
boﬁ
 
background_thªad_¸óã
(
tsd_t
 *
tsd
, 
¨ía_öd
);

12 
boﬁ
 
background_thªads_íabÀ
(
tsd_t
 *
tsd
);

13 
boﬁ
 
background_thªads_dißbÀ
(
tsd_t
 *
tsd
);

14 
background_thªad_öãrvÆ_check
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

15 
¨ía_deˇy_t
 *
deˇy
, 
size_t
 
≈ages_√w
);

16 
background_thªad_¥ef‹k0
(
tsdn_t
 *
tsdn
);

17 
background_thªad_¥ef‹k1
(
tsdn_t
 *
tsdn
);

18 
background_thªad_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
);

19 
background_thªad_po°f‹k_chûd
(
tsdn_t
 *
tsdn
);

20 
boﬁ
 
background_thªad_°©s_ªad
(
tsdn_t
 *
tsdn
,

21 
background_thªad_°©s_t
 *
°©s
);

22 
background_thªad_˘l_öô
(
tsdn_t
 *
tsdn
);

24 #ifde‡
JEMALLOC_PTHREAD_CREATE_WRAPPER


25 
±hªad_¸óã_wøµî
(
±hªad_t
 *
__ª°ri˘
, c⁄° 
±hªad_©å_t
 *,

26 *(*)(*), *
__ª°ri˘
);

28 
boﬁ
 
background_thªad_boŸ0
();

29 
boﬁ
 
background_thªad_boŸ1
(
tsdn_t
 *
tsdn
);

	@include/jemalloc/internal/background_thread_inlines.h

1 #i‚de‡
JEMALLOC_INTERNAL_BACKGROUND_THREAD_INLINES_H


2 
	#JEMALLOC_INTERNAL_BACKGROUND_THREAD_INLINES_H


	)

4 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


5 
	$background_thªad_íabÀd
() {

6  
	`©omic_lﬂd_b
(&
background_thªad_íabÀd_°©e
, 
ATOMIC_RELAXED
);

7 
	}
}

9 
JEMALLOC_ALWAYS_INLINE
 

10 
	$background_thªad_íabÀd_£t
(
tsdn_t
 *
tsdn
, 
boﬁ
 
°©e
) {

11 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
background_thªad_lock
);

12 
	`©omic_°‹e_b
(&
background_thªad_íabÀd_°©e
, 
°©e
, 
ATOMIC_RELAXED
);

13 
	}
}

15 
JEMALLOC_ALWAYS_INLINE
 
background_thªad_öfo_t
 *

16 
	$¨ía_background_thªad_öfo_gë
(
¨ía_t
 *
¨ía
) {

17 
¨ía_öd
 = 
	`¨ía_öd_gë
(
¨ía
);

18  &
background_thªad_öfo
[
¨ía_öd
 % 
n˝us
];

19 
	}
}

21 
JEMALLOC_ALWAYS_INLINE
 
uöt64_t


22 
	$background_thªad_wakeup_time_gë
(
background_thªad_öfo_t
 *
öfo
) {

23 
uöt64_t
 
√xt_wakeup
 = 
	`n°ime_ns
(&
öfo
->next_wakeup);

24 
	`as£π
(
	`©omic_lﬂd_b
(&
öfo
->
ödeföôe_¶ìp
, 
ATOMIC_ACQUIRE
) ==

25 (
√xt_wakeup
 =
BACKGROUND_THREAD_INDEFINITE_SLEEP
));

26  
√xt_wakeup
;

27 
	}
}

29 
JEMALLOC_ALWAYS_INLINE
 

30 
	$background_thªad_wakeup_time_£t
(
tsdn_t
 *
tsdn
, 
background_thªad_öfo_t
 *
öfo
,

31 
uöt64_t
 
wakeup_time
) {

32 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
öfo
->
mtx
);

33 
	`©omic_°‹e_b
(&
öfo
->
ödeföôe_¶ìp
,

34 
wakeup_time
 =
BACKGROUND_THREAD_INDEFINITE_SLEEP
, 
ATOMIC_RELEASE
);

35 
	`n°ime_öô
(&
öfo
->
√xt_wakeup
, 
wakeup_time
);

36 
	}
}

38 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


39 
	$background_thªad_ödeföôe_¶ìp
(
background_thªad_öfo_t
 *
öfo
) {

40  
	`©omic_lﬂd_b
(&
öfo
->
ödeföôe_¶ìp
, 
ATOMIC_ACQUIRE
);

41 
	}
}

43 
JEMALLOC_ALWAYS_INLINE
 

44 
	$¨ía_background_thªad_öa˘ivôy_check
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

45 
boﬁ
 
is_background_thªad
) {

46 i‡(!
	`background_thªad_íabÀd
(Ë|| 
is_background_thªad
) {

49 
background_thªad_öfo_t
 *
öfo
 =

50 
	`¨ía_background_thªad_öfo_gë
(
¨ía
);

51 i‡(
	`background_thªad_ödeföôe_¶ìp
(
öfo
)) {

52 
	`background_thªad_öãrvÆ_check
(
tsdn
, 
¨ía
,

53 &
¨ía
->
deˇy_dúty
, 0);

55 
	}
}

	@include/jemalloc/internal/background_thread_structs.h

1 #i‚de‡
JEMALLOC_INTERNAL_BACKGROUND_THREAD_STRUCTS_H


2 
	#JEMALLOC_INTERNAL_BACKGROUND_THREAD_STRUCTS_H


	)

6 #i‡
deföed
(
JEMALLOC_BACKGROUND_THREAD
Ë|| deföed(
JEMALLOC_LAZY_LOCK
)

7 
	#JEMALLOC_PTHREAD_CREATE_WRAPPER


	)

10 
	#BACKGROUND_THREAD_INDEFINITE_SLEEP
 
UINT64_MAX


	)

13 
	mbackground_thªad_°›≥d
,

14 
	mbackground_thªad_°¨ãd
,

16 
	mbackground_thªad_∑u£d
,

17 } 
	tbackground_thªad_°©e_t
;

19 
	sbackground_thªad_öfo_s
 {

20 #ifde‡
JEMALLOC_BACKGROUND_THREAD


22 
±hªad_t
 
	mthªad
;

23 
±hªad_c⁄d_t
 
	mc⁄d
;

25 
mÆloc_muãx_t
 
	mmtx
;

26 
background_thªad_°©e_t
 
	m°©e
;

28 
©omic_b_t
 
	mödeföôe_¶ìp
;

30 
n°ime_t
 
	m√xt_wakeup
;

37 
size_t
 
	m≈ages_to_purge_√w
;

39 
uöt64_t
 
	mtŸ_n_runs
;

41 
n°ime_t
 
	mtŸ_¶ìp_time
;

43 
background_thªad_öfo_s
 
	tbackground_thªad_öfo_t
;

45 
	sbackground_thªad_°©s_s
 {

46 
size_t
 
	mnum_thªads
;

47 
uöt64_t
 
	mnum_runs
;

48 
n°ime_t
 
	mrun_öãrvÆ
;

50 
background_thªad_°©s_s
 
	tbackground_thªad_°©s_t
;

	@include/jemalloc/internal/base_externs.h

1 #i‚de‡
JEMALLOC_INTERNAL_BASE_EXTERNS_H


2 
	#JEMALLOC_INTERNAL_BASE_EXTERNS_H


	)

4 
mëad©a_thp_mode_t
 
›t_mëad©a_thp
;

5 c⁄° *
mëad©a_thp_mode_«mes
[];

7 
ba£_t
 *
b0gë
();

8 
ba£_t
 *
ba£_√w
(
tsdn_t
 *
tsdn
, 
öd
, 
exã¡_hooks_t
 *
exã¡_hooks
);

9 
ba£_dñëe
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
);

10 
exã¡_hooks_t
 *
ba£_exã¡_hooks_gë
(
ba£_t
 *
ba£
);

11 
exã¡_hooks_t
 *
ba£_exã¡_hooks_£t
(
ba£_t
 *
ba£
,

12 
exã¡_hooks_t
 *
exã¡_hooks
);

13 *
ba£_Æloc
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
, 
size_t
 
size
, size_à
Æignmít
);

14 
exã¡_t
 *
ba£_Æloc_exã¡
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
);

15 
ba£_°©s_gë
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
, 
size_t
 *
Æloˇãd
,

16 
size_t
 *
ªsidít
, size_à*
m≠≥d
, size_à*
n_thp
);

17 
ba£_¥ef‹k
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
);

18 
ba£_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
);

19 
ba£_po°f‹k_chûd
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
);

20 
boﬁ
 
ba£_boŸ
(
tsdn_t
 *
tsdn
);

	@include/jemalloc/internal/base_inlines.h

1 #i‚de‡
JEMALLOC_INTERNAL_BASE_INLINES_H


2 
	#JEMALLOC_INTERNAL_BASE_INLINES_H


	)

4 
ölöe
 

5 
	$ba£_öd_gë
(c⁄° 
ba£_t
 *
ba£
) {

6  
ba£
->
öd
;

7 
	}
}

9 
ölöe
 
boﬁ


10 
	$mëad©a_thp_íabÀd
() {

11  (
›t_mëad©a_thp
 !
mëad©a_thp_dißbÀd
);

12 
	}
}

	@include/jemalloc/internal/base_structs.h

1 #i‚de‡
JEMALLOC_INTERNAL_BASE_STRUCTS_H


2 
	#JEMALLOC_INTERNAL_BASE_STRUCTS_H


	)

4 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ty≥s.h
"

5 
	~"jemÆloc/öã∫Æ/muãx.h
"

6 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

9 
	sba£_block_s
 {

11 
size_t
 
	msize
;

14 
ba£_block_t
 *
	m√xt
;

17 
exã¡_t
 
	mexã¡
;

20 
	sba£_s
 {

22 
	möd
;

28 
©omic_p_t
 
	mexã¡_hooks
;

31 
mÆloc_muãx_t
 
	mmtx
;

34 
boﬁ
 
	mauto_thp_swôched
;

40 
pszöd_t
 
	mpöd_œ°
;

43 
size_t
 
	mexã¡_¢_√xt
;

46 
ba£_block_t
 *
	mblocks
;

49 
exã¡_hóp_t
 
	mavaû
[
NSIZES
];

52 
size_t
 
	mÆloˇãd
;

53 
size_t
 
	mªsidít
;

54 
size_t
 
	mm≠≥d
;

56 
size_t
 
	mn_thp
;

	@include/jemalloc/internal/base_types.h

1 #i‚de‡
JEMALLOC_INTERNAL_BASE_TYPES_H


2 
	#JEMALLOC_INTERNAL_BASE_TYPES_H


	)

4 
ba£_block_s
 
	tba£_block_t
;

5 
ba£_s
 
	tba£_t
;

7 
	#METADATA_THP_DEFAULT
 
mëad©a_thp_dißbÀd


	)

15 
	#BASE_AUTO_THP_THRESHOLD
 2

	)

16 
	#BASE_AUTO_THP_THRESHOLD_A0
 5

	)

19 
	mmëad©a_thp_dißbÀd
 = 0,

28 
	mmëad©a_thp_auto
 = 1,

29 
	mmëad©a_thp_Æways
 = 2,

30 
	mmëad©a_thp_mode_limô
 = 3

31 } 
	tmëad©a_thp_mode_t
;

	@include/jemalloc/internal/bin.h

1 #i‚de‡
JEMALLOC_INTERNAL_BIN_H


2 
	#JEMALLOC_INTERNAL_BIN_H


	)

4 
	~"jemÆloc/öã∫Æ/exã¡_ty≥s.h
"

5 
	~"jemÆloc/öã∫Æ/exã¡_°ru˘s.h
"

6 
	~"jemÆloc/öã∫Æ/muãx.h
"

7 
	~"jemÆloc/öã∫Æ/bö_°©s.h
"

33 
bö_öfo_s
 
	tbö_öfo_t
;

34 
	sbö_öfo_s
 {

36 
size_t
 
	mªg_size
;

39 
size_t
 
	m¶ab_size
;

42 
uöt32_t
 
	mƒegs
;

48 
bôm≠_öfo_t
 
	mbôm≠_öfo
;

51 c⁄° 
bö_öfo_t
 
bö_öfos
[
NBINS
];

54 
bö_s
 
	tbö_t
;

55 
	sbö_s
 {

57 
mÆloc_muãx_t
 
	mlock
;

65 
exã¡_t
 *
	m¶abcur
;

72 
exã¡_hóp_t
 
	m¶abs_n⁄fuŒ
;

75 
exã¡_li°_t
 
	m¶abs_fuŒ
;

78 
bö_°©s_t
 
	m°©s
;

82 
boﬁ
 
bö_öô
(
bö_t
 *
bö
);

85 
bö_¥ef‹k
(
tsdn_t
 *
tsdn
, 
bö_t
 *
bö
);

86 
bö_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
, 
bö_t
 *
bö
);

87 
bö_po°f‹k_chûd
(
tsdn_t
 *
tsdn
, 
bö_t
 *
bö
);

90 
ölöe
 

91 
	$bö_°©s_mîge
(
tsdn_t
 *
tsdn
, 
bö_°©s_t
 *
d°_bö_°©s
, 
bö_t
 *
bö
) {

92 
	`mÆloc_muãx_lock
(
tsdn
, &
bö
->
lock
);

93 
	`mÆloc_muãx_¥of_ªad
(
tsdn
, &
d°_bö_°©s
->
muãx_d©a
, &
bö
->
lock
);

94 
d°_bö_°©s
->
nmÆloc
 +
bö
->
°©s
.nmalloc;

95 
d°_bö_°©s
->
ndÆloc
 +
bö
->
°©s
.ndalloc;

96 
d°_bö_°©s
->
ƒeque°s
 +
bö
->
°©s
.nrequests;

97 
d°_bö_°©s
->
cuºegs
 +
bö
->
°©s
.curregs;

98 
d°_bö_°©s
->
nfûls
 +
bö
->
°©s
.nfills;

99 
d°_bö_°©s
->
nÊushes
 +
bö
->
°©s
.nflushes;

100 
d°_bö_°©s
->
n¶abs
 +
bö
->
°©s
.nslabs;

101 
d°_bö_°©s
->
ª¶abs
 +
bö
->
°©s
.reslabs;

102 
d°_bö_°©s
->
cur¶abs
 +
bö
->
°©s
.curslabs;

103 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
bö
->
lock
);

104 
	}
}

	@include/jemalloc/internal/bin_stats.h

1 #i‚de‡
JEMALLOC_INTERNAL_BIN_STATS_H


2 
	#JEMALLOC_INTERNAL_BIN_STATS_H


	)

4 
	~"jemÆloc/öã∫Æ/muãx_¥of.h
"

6 
bö_°©s_s
 
	tbö_°©s_t
;

7 
	sbö_°©s_s
 {

14 
uöt64_t
 
	mnmÆloc
;

15 
uöt64_t
 
	mndÆloc
;

22 
uöt64_t
 
	mƒeque°s
;

28 
size_t
 
	mcuºegs
;

31 
uöt64_t
 
	mnfûls
;

34 
uöt64_t
 
	mnÊushes
;

37 
uöt64_t
 
	mn¶abs
;

43 
uöt64_t
 
	mª¶abs
;

46 
size_t
 
	mcur¶abs
;

48 
muãx_¥of_d©a_t
 
	mmuãx_d©a
;

	@include/jemalloc/internal/bit_util.h

1 #i‚de‡
JEMALLOC_INTERNAL_BIT_UTIL_H


2 
	#JEMALLOC_INTERNAL_BIT_UTIL_H


	)

4 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	#BIT_UTIL_INLINE
 
ölöe


	)

9 #i‡!
deföed
(
JEMALLOC_INTERNAL_FFSLL
Ë|| !deföed(
JEMALLOC_INTERNAL_FFSL
) \

10 || !
	$deföed
(
JEMALLOC_INTERNAL_FFS
)

11 #îr‹ 
JEMALLOC_INTERNAL_FFS
{,
L
,
LL
} should havêbì¿deföed by c⁄figuª

15 
BIT_UTIL_INLINE
 

16 
	$ffs_Œu
(
bôm≠
) {

17  
	`JEMALLOC_INTERNAL_FFSLL
(
bôm≠
);

18 
	}
}

20 
BIT_UTIL_INLINE
 

21 
	$ffs_lu
(
bôm≠
) {

22  
	`JEMALLOC_INTERNAL_FFSL
(
bôm≠
);

23 
	}
}

25 
BIT_UTIL_INLINE
 

26 
	$ffs_u
(
bôm≠
) {

27  
	`JEMALLOC_INTERNAL_FFS
(
bôm≠
);

28 
	}
}

30 
BIT_UTIL_INLINE
 

31 
	$ffs_zu
(
size_t
 
bôm≠
) {

32 #i‡
LG_SIZEOF_PTR
 =
LG_SIZEOF_INT


33  
	`ffs_u
(
bôm≠
);

34 #ñi‡
LG_SIZEOF_PTR
 =
LG_SIZEOF_LONG


35  
	`ffs_lu
(
bôm≠
);

36 #ñi‡
LG_SIZEOF_PTR
 =
LG_SIZEOF_LONG_LONG


37  
	`ffs_Œu
(
bôm≠
);

39 #îr‹ 
No
 
im∂emíèti⁄
 
size_t
 
	`ffs
()

41 
	}
}

43 
BIT_UTIL_INLINE
 

44 
	$ffs_u64
(
uöt64_t
 
bôm≠
) {

45 #i‡
LG_SIZEOF_LONG
 == 3

46  
	`ffs_lu
(
bôm≠
);

47 #ñi‡
LG_SIZEOF_LONG_LONG
 == 3

48  
	`ffs_Œu
(
bôm≠
);

50 #îr‹ 
No
 
im∂emíèti⁄
 64-
bô
 
	`ffs
()

52 
	}
}

54 
BIT_UTIL_INLINE
 

55 
	$ffs_u32
(
uöt32_t
 
bôm≠
) {

56 #i‡
LG_SIZEOF_INT
 == 2

57  
	`ffs_u
(
bôm≠
);

59 #îr‹ 
No
 
im∂emíèti⁄
 32-
bô
 
	`ffs
()

61  
	`ffs_u
(
bôm≠
);

62 
	}
}

64 
BIT_UTIL_INLINE
 
uöt64_t


65 
	$pow2_˚û_u64
(
uöt64_t
 
x
) {

66 
x
--;

67 
x
 |= x >> 1;

68 
x
 |= x >> 2;

69 
x
 |= x >> 4;

70 
x
 |= x >> 8;

71 
x
 |= x >> 16;

72 
x
 |= x >> 32;

73 
x
++;

74  
x
;

75 
	}
}

77 
BIT_UTIL_INLINE
 
uöt32_t


78 
	$pow2_˚û_u32
(
uöt32_t
 
x
) {

79 
x
--;

80 
x
 |= x >> 1;

81 
x
 |= x >> 2;

82 
x
 |= x >> 4;

83 
x
 |= x >> 8;

84 
x
 |= x >> 16;

85 
x
++;

86  
x
;

87 
	}
}

90 
BIT_UTIL_INLINE
 
size_t


91 
	$pow2_˚û_zu
(
size_t
 
x
) {

92 #i‡(
LG_SIZEOF_PTR
 == 3)

93  
	`pow2_˚û_u64
(
x
);

95  
	`pow2_˚û_u32
(
x
);

97 
	}
}

99 #i‡(
deföed
(
__i386__
Ë|| deföed(
__amd64__
Ë|| deföed(
__x86_64__
))

100 
BIT_UTIL_INLINE
 

101 
	$lg_Êo‹
(
size_t
 
x
) {

102 
size_t
 
ªt
;

103 
	`as£π
(
x
 != 0);

105 
	`asm
 ("bsr %1, %0"

106 : "Ù"(
ªt
)

107 : "r"(
x
)

109 
	`as£π
(
ªt
 < 
UINT_MAX
);

110  ()
ªt
;

111 
	}
}

112 #ñi‡(
deföed
(
_MSC_VER
))

113 
BIT_UTIL_INLINE
 

114 
	$lg_Êo‹
(
size_t
 
x
) {

115 
ªt
;

117 
	`as£π
(
x
 != 0);

119 #i‡(
LG_SIZEOF_PTR
 == 3)

120 
	`_BôSˇnRevî£64
(&
ªt
, 
x
);

121 #ñi‡(
LG_SIZEOF_PTR
 == 2)

122 
	`_BôSˇnRevî£
(&
ªt
, 
x
);

126 
	`as£π
(
ªt
 < 
UINT_MAX
);

127  ()
ªt
;

128 
	}
}

129 #ñi‡(
deföed
(
JEMALLOC_HAVE_BUILTIN_CLZ
))

130 
BIT_UTIL_INLINE
 

131 
	$lg_Êo‹
(
size_t
 
x
) {

132 
	`as£π
(
x
 != 0);

134 #i‡(
LG_SIZEOF_PTR
 =
LG_SIZEOF_INT
)

135  ((8 << 
LG_SIZEOF_PTR
Ë- 1Ë- 
	`__buûtö_˛z
(
x
);

136 #ñi‡(
LG_SIZEOF_PTR
 =
LG_SIZEOF_LONG
)

137  ((8 << 
LG_SIZEOF_PTR
Ë- 1Ë- 
	`__buûtö_˛zl
(
x
);

141 
	}
}

143 
BIT_UTIL_INLINE
 

144 
	$lg_Êo‹
(
size_t
 
x
) {

145 
	`as£π
(
x
 != 0);

147 
x
 |= (x >> 1);

148 
x
 |= (x >> 2);

149 
x
 |= (x >> 4);

150 
x
 |= (x >> 8);

151 
x
 |= (x >> 16);

152 #i‡(
LG_SIZEOF_PTR
 == 3)

153 
x
 |= (x >> 32);

155 i‡(
x
 =
SIZE_T_MAX
) {

156  (8 << 
LG_SIZEOF_PTR
) - 1;

158 
x
++;

159  
	`ffs_zu
(
x
) - 2;

160 
	}
}

163 #unde‡
BIT_UTIL_INLINE


	@include/jemalloc/internal/bitmap.h

1 #i‚de‡
JEMALLOC_INTERNAL_BITMAP_H


2 
	#JEMALLOC_INTERNAL_BITMAP_H


	)

4 
	~"jemÆloc/öã∫Æ/¨ía_ty≥s.h
"

5 
	~"jemÆloc/öã∫Æ/bô_utû.h
"

6 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

8 
	tbôm≠_t
;

9 
	#LG_SIZEOF_BITMAP
 
LG_SIZEOF_LONG


	)

12 #i‡
LG_SLAB_MAXREGS
 > 
LG_CEIL_NSIZES


14 
	#LG_BITMAP_MAXBITS
 
LG_SLAB_MAXREGS


	)

17 
	#LG_BITMAP_MAXBITS
 
LG_CEIL_NSIZES


	)

19 
	#BITMAP_MAXBITS
 (
	`ZU
(1Ë<< 
LG_BITMAP_MAXBITS
)

	)

22 
	#LG_BITMAP_GROUP_NBITS
 (
LG_SIZEOF_BITMAP
 + 3)

	)

23 
	#BITMAP_GROUP_NBITS
 (1U << 
LG_BITMAP_GROUP_NBITS
)

	)

24 
	#BITMAP_GROUP_NBITS_MASK
 (
BITMAP_GROUP_NBITS
-1)

	)

31 #i‡
LG_BITMAP_MAXBITS
 - 
LG_BITMAP_GROUP_NBITS
 > 3

32 
	#BITMAP_USE_TREE


	)

36 
	#BITMAP_BITS2GROUPS
(
nbôs
) \

37 (((
nbôs
Ë+ 
BITMAP_GROUP_NBITS_MASK
Ë>> 
LG_BITMAP_GROUP_NBITS
)

	)

42 
	#BITMAP_GROUPS_L0
(
nbôs
) \

43 
	`BITMAP_BITS2GROUPS
(
nbôs
)

	)

44 
	#BITMAP_GROUPS_L1
(
nbôs
) \

45 
	`BITMAP_BITS2GROUPS
(BITMAP_BITS2GROUPS(
nbôs
))

	)

46 
	#BITMAP_GROUPS_L2
(
nbôs
) \

47 
	`BITMAP_BITS2GROUPS
(BITMAP_BITS2GROUPS(BITMAP_BITS2GROUPS((
nbôs
))))

	)

48 
	#BITMAP_GROUPS_L3
(
nbôs
) \

49 
	`BITMAP_BITS2GROUPS
(BITMAP_BITS2GROUPS(BITMAP_BITS2GROUPS( \

50 
	`BITMAP_BITS2GROUPS
((
nbôs
)))))

	)

51 
	#BITMAP_GROUPS_L4
(
nbôs
) \

52 
	`BITMAP_BITS2GROUPS
(BITMAP_BITS2GROUPS(BITMAP_BITS2GROUPS( \

53 
	`BITMAP_BITS2GROUPS
(BITMAP_BITS2GROUPS((
nbôs
))))))

	)

59 
	#BITMAP_GROUPS_1_LEVEL
(
nbôs
) \

60 
	`BITMAP_GROUPS_L0
(
nbôs
)

	)

61 
	#BITMAP_GROUPS_2_LEVEL
(
nbôs
) \

62 (
	`BITMAP_GROUPS_1_LEVEL
(
nbôs
Ë+ 
	`BITMAP_GROUPS_L1
“bôs))

	)

63 
	#BITMAP_GROUPS_3_LEVEL
(
nbôs
) \

64 (
	`BITMAP_GROUPS_2_LEVEL
(
nbôs
Ë+ 
	`BITMAP_GROUPS_L2
“bôs))

	)

65 
	#BITMAP_GROUPS_4_LEVEL
(
nbôs
) \

66 (
	`BITMAP_GROUPS_3_LEVEL
(
nbôs
Ë+ 
	`BITMAP_GROUPS_L3
“bôs))

	)

67 
	#BITMAP_GROUPS_5_LEVEL
(
nbôs
) \

68 (
	`BITMAP_GROUPS_4_LEVEL
(
nbôs
Ë+ 
	`BITMAP_GROUPS_L4
“bôs))

	)

73 #ifde‡
BITMAP_USE_TREE


75 #i‡
LG_BITMAP_MAXBITS
 <
LG_BITMAP_GROUP_NBITS


76 
	#BITMAP_GROUPS
(
nbôs
Ë
	`BITMAP_GROUPS_1_LEVEL
“bôs)

	)

77 
	#BITMAP_GROUPS_MAX
 
	`BITMAP_GROUPS_1_LEVEL
(
BITMAP_MAXBITS
)

	)

78 #ñi‡
LG_BITMAP_MAXBITS
 <
LG_BITMAP_GROUP_NBITS
 * 2

79 
	#BITMAP_GROUPS
(
nbôs
Ë
	`BITMAP_GROUPS_2_LEVEL
“bôs)

	)

80 
	#BITMAP_GROUPS_MAX
 
	`BITMAP_GROUPS_2_LEVEL
(
BITMAP_MAXBITS
)

	)

81 #ñi‡
LG_BITMAP_MAXBITS
 <
LG_BITMAP_GROUP_NBITS
 * 3

82 
	#BITMAP_GROUPS
(
nbôs
Ë
	`BITMAP_GROUPS_3_LEVEL
“bôs)

	)

83 
	#BITMAP_GROUPS_MAX
 
	`BITMAP_GROUPS_3_LEVEL
(
BITMAP_MAXBITS
)

	)

84 #ñi‡
LG_BITMAP_MAXBITS
 <
LG_BITMAP_GROUP_NBITS
 * 4

85 
	#BITMAP_GROUPS
(
nbôs
Ë
	`BITMAP_GROUPS_4_LEVEL
“bôs)

	)

86 
	#BITMAP_GROUPS_MAX
 
	`BITMAP_GROUPS_4_LEVEL
(
BITMAP_MAXBITS
)

	)

87 #ñi‡
LG_BITMAP_MAXBITS
 <
LG_BITMAP_GROUP_NBITS
 * 5

88 
	#BITMAP_GROUPS
(
nbôs
Ë
	`BITMAP_GROUPS_5_LEVEL
“bôs)

	)

89 
	#BITMAP_GROUPS_MAX
 
	`BITMAP_GROUPS_5_LEVEL
(
BITMAP_MAXBITS
)

	)

108 
	#BITMAP_MAX_LEVELS
 5

	)

110 
	#BITMAP_INFO_INITIALIZER
(
nbôs
) { \

112 
nbôs
, \

114 (
	`BITMAP_GROUPS_L0
(
nbôs
Ë> 
	`BITMAP_GROUPS_L1
(nbits)) + \

115 (
	`BITMAP_GROUPS_L1
(
nbôs
Ë> 
	`BITMAP_GROUPS_L2
(nbits)) + \

116 (
	`BITMAP_GROUPS_L2
(
nbôs
Ë> 
	`BITMAP_GROUPS_L3
(nbits)) + \

117 (
	`BITMAP_GROUPS_L3
(
nbôs
Ë> 
	`BITMAP_GROUPS_L4
(nbits)) + 1, \

121 {
	`BITMAP_GROUPS_L0
(
nbôs
)}, \

122 {
	`BITMAP_GROUPS_L1
(
nbôs
Ë+ 
	`BITMAP_GROUPS_L0
(nbits)}, \

123 {
	`BITMAP_GROUPS_L2
(
nbôs
Ë+ 
	`BITMAP_GROUPS_L1
(nbits) + \

124 
	`BITMAP_GROUPS_L0
(
nbôs
)}, \

125 {
	`BITMAP_GROUPS_L3
(
nbôs
Ë+ 
	`BITMAP_GROUPS_L2
(nbits) + \

126 
	`BITMAP_GROUPS_L1
(
nbôs
Ë+ 
	`BITMAP_GROUPS_L0
(nbits)}, \

127 {
	`BITMAP_GROUPS_L4
(
nbôs
Ë+ 
	`BITMAP_GROUPS_L3
(nbits) + \

128 
	`BITMAP_GROUPS_L2
(
nbôs
Ë+ 
	`BITMAP_GROUPS_L1
(nbits) \

129 + 
	`BITMAP_GROUPS_L0
(
nbôs
)} \

131 }

	)

135 
	#BITMAP_GROUPS
(
nbôs
Ë
	`BITMAP_BITS2GROUPS
“bôs)

	)

136 
	#BITMAP_GROUPS_MAX
 
	`BITMAP_BITS2GROUPS
(
BITMAP_MAXBITS
)

	)

138 
	#BITMAP_INFO_INITIALIZER
(
nbôs
) { \

140 
nbôs
, \

142 
	`BITMAP_BITS2GROUPS
(
nbôs
) \

143 }

	)

147 
	sbôm≠_Àvñ_s
 {

149 
size_t
 
	mgroup_off£t
;

150 } 
	tbôm≠_Àvñ_t
;

152 
	sbôm≠_öfo_s
 {

154 
size_t
 
	mnbôs
;

156 #ifde‡
BITMAP_USE_TREE


158 
	m∆evñs
;

164 
bôm≠_Àvñ_t
 
	mÀvñs
[
BITMAP_MAX_LEVELS
+1];

167 
size_t
 
	mngroups
;

169 } 
	tbôm≠_öfo_t
;

171 
bôm≠_öfo_öô
(
bôm≠_öfo_t
 *
böfo
, 
size_t
 
nbôs
);

172 
bôm≠_öô
(
bôm≠_t
 *
bôm≠
, c⁄° 
bôm≠_öfo_t
 *
böfo
, 
boﬁ
 
fûl
);

173 
size_t
 
bôm≠_size
(c⁄° 
bôm≠_öfo_t
 *
böfo
);

175 
ölöe
 
boﬁ


176 
	$bôm≠_fuŒ
(
bôm≠_t
 *
bôm≠
, c⁄° 
bôm≠_öfo_t
 *
böfo
) {

177 #ifde‡
BITMAP_USE_TREE


178 
size_t
 
rgoff
 = 
böfo
->
Àvñs
[böfo->
∆evñs
].
group_off£t
 - 1;

179 
bôm≠_t
 
rg
 = 
bôm≠
[
rgoff
];

181  (
rg
 == 0);

183 
size_t
 
i
;

185 
i
 = 0; i < 
böfo
->
ngroups
; i++) {

186 i‡(
bôm≠
[
i
] != 0) {

187  
Ál£
;

190  
åue
;

192 
	}
}

194 
ölöe
 
boﬁ


195 
	$bôm≠_gë
(
bôm≠_t
 *
bôm≠
, c⁄° 
bôm≠_öfo_t
 *
böfo
, 
size_t
 
bô
) {

196 
size_t
 
goff
;

197 
bôm≠_t
 
g
;

199 
	`as£π
(
bô
 < 
böfo
->
nbôs
);

200 
goff
 = 
bô
 >> 
LG_BITMAP_GROUP_NBITS
;

201 
g
 = 
bôm≠
[
goff
];

202  !(
g
 & (
	`ZU
(1Ë<< (
bô
 & 
BITMAP_GROUP_NBITS_MASK
)));

203 
	}
}

205 
ölöe
 

206 
	$bôm≠_£t
(
bôm≠_t
 *
bôm≠
, c⁄° 
bôm≠_öfo_t
 *
böfo
, 
size_t
 
bô
) {

207 
size_t
 
goff
;

208 
bôm≠_t
 *
gp
;

209 
bôm≠_t
 
g
;

211 
	`as£π
(
bô
 < 
böfo
->
nbôs
);

212 
	`as£π
(!
	`bôm≠_gë
(
bôm≠
, 
böfo
, 
bô
));

213 
goff
 = 
bô
 >> 
LG_BITMAP_GROUP_NBITS
;

214 
gp
 = &
bôm≠
[
goff
];

215 
g
 = *
gp
;

216 
	`as£π
(
g
 & (
	`ZU
(1Ë<< (
bô
 & 
BITMAP_GROUP_NBITS_MASK
)));

217 
g
 ^
	`ZU
(1Ë<< (
bô
 & 
BITMAP_GROUP_NBITS_MASK
);

218 *
gp
 = 
g
;

219 
	`as£π
(
	`bôm≠_gë
(
bôm≠
, 
böfo
, 
bô
));

220 #ifde‡
BITMAP_USE_TREE


222 i‡(
g
 == 0) {

223 
i
;

224 
i
 = 1; i < 
böfo
->
∆evñs
; i++) {

225 
bô
 = 
goff
;

226 
goff
 = 
bô
 >> 
LG_BITMAP_GROUP_NBITS
;

227 
gp
 = &
bôm≠
[
böfo
->
Àvñs
[
i
].
group_off£t
 + 
goff
];

228 
g
 = *
gp
;

229 
	`as£π
(
g
 & (
	`ZU
(1Ë<< (
bô
 & 
BITMAP_GROUP_NBITS_MASK
)));

230 
g
 ^
	`ZU
(1Ë<< (
bô
 & 
BITMAP_GROUP_NBITS_MASK
);

231 *
gp
 = 
g
;

232 i‡(
g
 != 0) {

238 
	}
}

241 
ölöe
 
size_t


242 
	$bôm≠_ffu
(c⁄° 
bôm≠_t
 *
bôm≠
, c⁄° 
bôm≠_öfo_t
 *
böfo
, 
size_t
 
mö_bô
) {

243 
	`as£π
(
mö_bô
 < 
böfo
->
nbôs
);

245 #ifde‡
BITMAP_USE_TREE


246 
size_t
 
bô
 = 0;

247 
Àvñ
 = 
böfo
->
∆evñs
;Üevel--;) {

248 
size_t
 
lg_bôs_≥r_group
 = (
LG_BITMAP_GROUP_NBITS
 * (
Àvñ
 +

250 
bôm≠_t
 
group
 = 
bôm≠
[
böfo
->
Àvñs
[
Àvñ
].
group_off£t
 + (
bô


251 >> 
lg_bôs_≥r_group
)];

252 
group_nmask
 = ()(((
mö_bô
 > 
bô
) ? (min_bit -

253 
bô
Ë: 0Ë>> (
lg_bôs_≥r_group
 - 
LG_BITMAP_GROUP_NBITS
));

254 
	`as£π
(
group_nmask
 <
BITMAP_GROUP_NBITS
);

255 
bôm≠_t
 
group_mask
 = ~((1LU << 
group_nmask
) - 1);

256 
bôm≠_t
 
group_masked
 = 
group
 & 
group_mask
;

257 i‡(
group_masked
 == 0LU) {

258 i‡(
group
 == 0LU) {

259  
böfo
->
nbôs
;

268 
size_t
 
sib_ba£
 = 
bô
 + (
	`ZU
(1Ë<< 
lg_bôs_≥r_group
);

269 
	`as£π
(
sib_ba£
 > 
mö_bô
);

270 
	`as£π
(
sib_ba£
 > 
bô
);

271 i‡(
sib_ba£
 >
böfo
->
nbôs
) {

272  
böfo
->
nbôs
;

274  
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 
sib_ba£
);

276 
bô
 +((
size_t
)(
	`ffs_lu
(
group_masked
) - 1)) <<

277 (
lg_bôs_≥r_group
 - 
LG_BITMAP_GROUP_NBITS
);

279 
	`as£π
(
bô
 >
mö_bô
);

280 
	`as£π
(
bô
 < 
böfo
->
nbôs
);

281  
bô
;

283 
size_t
 
i
 = 
mö_bô
 >> 
LG_BITMAP_GROUP_NBITS
;

284 
bôm≠_t
 
g
 = 
bôm≠
[
i
] & ~((1LU << (
mö_bô
 & 
BITMAP_GROUP_NBITS_MASK
))

286 
size_t
 
bô
;

288 
bô
 = 
	`ffs_lu
(
g
);

289 i‡(
bô
 != 0) {

290  (
i
 << 
LG_BITMAP_GROUP_NBITS
Ë+ (
bô
 - 1);

292 
i
++;

293 
g
 = 
bôm≠
[
i
];

294 } 
i
 < 
böfo
->
ngroups
);

295  
böfo
->
nbôs
;

297 
	}
}

300 
ölöe
 
size_t


301 
	$bôm≠_sfu
(
bôm≠_t
 *
bôm≠
, c⁄° 
bôm≠_öfo_t
 *
böfo
) {

302 
size_t
 
bô
;

303 
bôm≠_t
 
g
;

304 
i
;

306 
	`as£π
(!
	`bôm≠_fuŒ
(
bôm≠
, 
böfo
));

308 #ifde‡
BITMAP_USE_TREE


309 
i
 = 
böfo
->
∆evñs
 - 1;

310 
g
 = 
bôm≠
[
böfo
->
Àvñs
[
i
].
group_off£t
];

311 
bô
 = 
	`ffs_lu
(
g
) - 1;

312 
i
 > 0) {

313 
i
--;

314 
g
 = 
bôm≠
[
böfo
->
Àvñs
[
i
].
group_off£t
 + 
bô
];

315 
bô
 = (bô << 
LG_BITMAP_GROUP_NBITS
Ë+ (
	`ffs_lu
(
g
) - 1);

318 
i
 = 0;

319 
g
 = 
bôm≠
[0];

320 (
bô
 = 
	`ffs_lu
(
g
)) == 0) {

321 
i
++;

322 
g
 = 
bôm≠
[
i
];

324 
bô
 = (
i
 << 
LG_BITMAP_GROUP_NBITS
) + (bit - 1);

326 
	`bôm≠_£t
(
bôm≠
, 
böfo
, 
bô
);

327  
bô
;

328 
	}
}

330 
ölöe
 

331 
	$bôm≠_un£t
(
bôm≠_t
 *
bôm≠
, c⁄° 
bôm≠_öfo_t
 *
böfo
, 
size_t
 
bô
) {

332 
size_t
 
goff
;

333 
bôm≠_t
 *
gp
;

334 
bôm≠_t
 
g
;

335 
UNUSED
 
boﬁ
 
¥›ag©e
;

337 
	`as£π
(
bô
 < 
böfo
->
nbôs
);

338 
	`as£π
(
	`bôm≠_gë
(
bôm≠
, 
böfo
, 
bô
));

339 
goff
 = 
bô
 >> 
LG_BITMAP_GROUP_NBITS
;

340 
gp
 = &
bôm≠
[
goff
];

341 
g
 = *
gp
;

342 
¥›ag©e
 = (
g
 == 0);

343 
	`as£π
((
g
 & (
	`ZU
(1Ë<< (
bô
 & 
BITMAP_GROUP_NBITS_MASK
))) == 0);

344 
g
 ^
	`ZU
(1Ë<< (
bô
 & 
BITMAP_GROUP_NBITS_MASK
);

345 *
gp
 = 
g
;

346 
	`as£π
(!
	`bôm≠_gë
(
bôm≠
, 
böfo
, 
bô
));

347 #ifde‡
BITMAP_USE_TREE


349 i‡(
¥›ag©e
) {

350 
i
;

351 
i
 = 1; i < 
böfo
->
∆evñs
; i++) {

352 
bô
 = 
goff
;

353 
goff
 = 
bô
 >> 
LG_BITMAP_GROUP_NBITS
;

354 
gp
 = &
bôm≠
[
böfo
->
Àvñs
[
i
].
group_off£t
 + 
goff
];

355 
g
 = *
gp
;

356 
¥›ag©e
 = (
g
 == 0);

357 
	`as£π
((
g
 & (
	`ZU
(1Ë<< (
bô
 & 
BITMAP_GROUP_NBITS_MASK
)))

359 
g
 ^
	`ZU
(1Ë<< (
bô
 & 
BITMAP_GROUP_NBITS_MASK
);

360 *
gp
 = 
g
;

361 i‡(!
¥›ag©e
) {

367 
	}
}

	@include/jemalloc/internal/cache_bin.h

1 #i‚de‡
JEMALLOC_INTERNAL_CACHE_BIN_H


2 
	#JEMALLOC_INTERNAL_CACHE_BIN_H


	)

4 
	~"jemÆloc/öã∫Æ/ql.h
"

22 
öt32_t
 
	tˇche_bö_sz_t
;

24 
ˇche_bö_°©s_s
 
	tˇche_bö_°©s_t
;

25 
	sˇche_bö_°©s_s
 {

30 
uöt64_t
 
	mƒeque°s
;

37 
ˇche_bö_öfo_s
 
	tˇche_bö_öfo_t
;

38 
	sˇche_bö_öfo_s
 {

40 
ˇche_bö_sz_t
 
	mnˇched_max
;

43 
ˇche_bö_s
 
	tˇche_bö_t
;

44 
	sˇche_bö_s
 {

46 
ˇche_bö_sz_t
 
	mlow_w©î
;

48 
ˇche_bö_sz_t
 
	mnˇched
;

54 
ˇche_bö_°©s_t
 
	mt°©s
;

64 **
	mavaû
;

67 
ˇche_bö_¨øy_des¸ùt‹_s
 
	tˇche_bö_¨øy_des¸ùt‹_t
;

68 
	sˇche_bö_¨øy_des¸ùt‹_s
 {

73 
ql_ñm
(
ˇche_bö_¨øy_des¸ùt‹_t
Ë
	mlök
;

75 
ˇche_bö_t
 *
	mbös_smÆl
;

76 
ˇche_bö_t
 *
	mbös_œrge
;

79 
ölöe
 

80 
	$ˇche_bö_¨øy_des¸ùt‹_öô
(
ˇche_bö_¨øy_des¸ùt‹_t
 *
des¸ùt‹
,

81 
ˇche_bö_t
 *
bös_smÆl
, cache_bö_à*
bös_œrge
) {

82 
	`ql_ñm_√w
(
des¸ùt‹
, 
lök
);

83 
des¸ùt‹
->
bös_smÆl
 = bins_small;

84 
des¸ùt‹
->
bös_œrge
 = bins_large;

85 
	}
}

87 
JEMALLOC_ALWAYS_INLINE
 *

88 
	$ˇche_bö_Æloc_ósy
(
ˇche_bö_t
 *
bö
, 
boﬁ
 *
suc˚ss
) {

89 *
ªt
;

91 i‡(
	`u∆ikñy
(
bö
->
nˇched
 == 0)) {

92 
bö
->
low_w©î
 = -1;

93 *
suc˚ss
 = 
Ál£
;

94  
NULL
;

103 *
suc˚ss
 = 
åue
;

104 
ªt
 = *(
bö
->
avaû
 - bö->
nˇched
);

105 
bö
->
nˇched
--;

107 i‡(
	`u∆ikñy
(
bö
->
nˇched
 < bö->
low_w©î
)) {

108 
bö
->
low_w©î
 = bö->
nˇched
;

111  
ªt
;

112 
	}
}

	@include/jemalloc/internal/ckh.h

1 #i‚de‡
JEMALLOC_INTERNAL_CKH_H


2 
	#JEMALLOC_INTERNAL_CKH_H


	)

4 
	~"jemÆloc/öã∫Æ/tsd.h
"

21 
	#LG_CKH_BUCKET_CELLS
 (
LG_CACHELINE
 - 
LG_SIZEOF_PTR
 - 1)

	)

24 
	tckh_hash_t
 (c⁄° *, 
	tsize_t
[2]);

25 
boﬁ
 
	tckh_keycomp_t
 (const *, const *);

29 c⁄° *
	mkey
;

30 c⁄° *
	md©a
;

31 } 
	tckhc_t
;

35 #ifde‡
CKH_COUNT


37 
uöt64_t
 
	mngrows
;

38 
uöt64_t
 
	mnshröks
;

39 
uöt64_t
 
	mnshrökÁûs
;

40 
uöt64_t
 
	mnö£πs
;

41 
uöt64_t
 
	mƒñocs
;

45 
uöt64_t
 
	m¥ng_°©e
;

48 
size_t
 
	mcou¡
;

54 
	mlg_möbuckës
;

55 
	mlg_curbuckës
;

58 
ckh_hash_t
 *
	mhash
;

59 
ckh_keycomp_t
 *
	mkeycomp
;

62 
ckhc_t
 *
	mèb
;

63 } 
	tckh_t
;

70 
boﬁ
 
ckh_√w
(
tsd_t
 *
tsd
, 
ckh_t
 *
ckh
, 
size_t
 
möôems
, 
ckh_hash_t
 *
hash
,

71 
ckh_keycomp_t
 *
keycomp
);

72 
ckh_dñëe
(
tsd_t
 *
tsd
, 
ckh_t
 *
ckh
);

75 
size_t
 
ckh_cou¡
(
ckh_t
 *
ckh
);

83 
boﬁ
 
ckh_ôî
(
ckh_t
 *
ckh
, 
size_t
 *
èböd
, **
key
, **
d©a
);

90 
boﬁ
 
ckh_ö£π
(
tsd_t
 *
tsd
, 
ckh_t
 *
ckh
, c⁄° *
key
, c⁄° *
d©a
);

91 
boﬁ
 
ckh_ªmove
(
tsd_t
 *
tsd
, 
ckh_t
 *
ckh
, c⁄° *
£¨chkey
, **
key
,

92 **
d©a
);

93 
boﬁ
 
ckh_£¨ch
(
ckh_t
 *
ckh
, c⁄° *
£¨chkey
, **
key
, **
d©a
);

96 
ckh_°rög_hash
(c⁄° *
key
, 
size_t
 
r_hash
[2]);

97 
boﬁ
 
ckh_°rög_keycomp
(c⁄° *
k1
, c⁄° *
k2
);

98 
ckh_poöãr_hash
(c⁄° *
key
, 
size_t
 
r_hash
[2]);

99 
boﬁ
 
ckh_poöãr_keycomp
(c⁄° *
k1
, c⁄° *
k2
);

	@include/jemalloc/internal/ctl.h

1 #i‚de‡
JEMALLOC_INTERNAL_CTL_H


2 
	#JEMALLOC_INTERNAL_CTL_H


	)

4 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ty≥s.h
"

5 
	~"jemÆloc/öã∫Æ/mÆloc_io.h
"

6 
	~"jemÆloc/öã∫Æ/muãx_¥of.h
"

7 
	~"jemÆloc/öã∫Æ/ql.h
"

8 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

9 
	~"jemÆloc/öã∫Æ/°©s.h
"

12 
	#CTL_MAX_DEPTH
 7

	)

14 
	s˘l_node_s
 {

15 
boﬁ
 
	m«med
;

16 } 
	t˘l_node_t
;

18 
	s˘l_«med_node_s
 {

19 
˘l_node_t
 
	mnode
;

20 c⁄° *
	m«me
;

22 
size_t
 
	mnchûdªn
;

23 c⁄° 
˘l_node_t
 *
	mchûdªn
;

24 (*
	m˘l
)(
	mtsd_t
 *, c⁄° 
	msize_t
 *, size_t, *, size_t *, *,

25 
	msize_t
);

26 } 
	t˘l_«med_node_t
;

28 
	s˘l_ödexed_node_s
 {

29 
˘l_node_s
 
	mnode
;

30 c⁄° 
	m˘l_«med_node_t
 *(*
	mödex
)(
	mtsdn_t
 *, c⁄° 
	msize_t
 *, size_t,

31 
	msize_t
);

32 } 
	t˘l_ödexed_node_t
;

34 
	s˘l_¨ía_°©s_s
 {

35 
¨ía_°©s_t
 
	ma°©s
;

38 
size_t
 
	mÆloˇãd_smÆl
;

39 
uöt64_t
 
	mnmÆloc_smÆl
;

40 
uöt64_t
 
	mndÆloc_smÆl
;

41 
uöt64_t
 
	mƒeque°s_smÆl
;

43 
bö_°©s_t
 
	mb°©s
[
NBINS
];

44 
¨ía_°©s_œrge_t
 
	ml°©s
[
NSIZES
 - 
NBINS
];

45 } 
	t˘l_¨ía_°©s_t
;

47 
	s˘l_°©s_s
 {

48 
size_t
 
	mÆloˇãd
;

49 
size_t
 
	ma˘ive
;

50 
size_t
 
	mmëad©a
;

51 
size_t
 
	mmëad©a_thp
;

52 
size_t
 
	mªsidít
;

53 
size_t
 
	mm≠≥d
;

54 
size_t
 
	mªèöed
;

56 
background_thªad_°©s_t
 
	mbackground_thªad
;

57 
muãx_¥of_d©a_t
 
	mmuãx_¥of_d©a
[
muãx_¥of_num_globÆ_muãxes
];

58 } 
	t˘l_°©s_t
;

60 
˘l_¨ía_s
 
	t˘l_¨ía_t
;

61 
	s˘l_¨ía_s
 {

62 
	m¨ía_öd
;

63 
boﬁ
 
	möôülized
;

64 
ql_ñm
(
˘l_¨ía_t
Ë
	mde°royed_lök
;

67 
	m¡hªads
;

68 c⁄° *
	mdss
;

69 
ssize_t
 
	mdúty_deˇy_ms
;

70 
ssize_t
 
	mmuzzy_deˇy_ms
;

71 
size_t
 
	m∑˘ive
;

72 
size_t
 
	mpdúty
;

73 
size_t
 
	mpmuzzy
;

76 
˘l_¨ía_°©s_t
 *
	ma°©s
;

79 
	s˘l_¨ías_s
 {

80 
uöt64_t
 
	mïoch
;

81 
	m«ª«s
;

82 
ql_hód
(
˘l_¨ía_t
Ë
	mde°royed
;

90 
˘l_¨ía_t
 *
	m¨ías
[2 + 
MALLOCX_ARENA_LIMIT
];

91 } 
	t˘l_¨ías_t
;

93 
˘l_by«me
(
tsd_t
 *
tsd
, c⁄° *
«me
, *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
,

94 *
√wp
, 
size_t
 
√wÀn
);

95 
˘l_«mëomib
(
tsd_t
 *
tsd
, c⁄° *
«me
, 
size_t
 *
mibp
, size_à*
mibÀ≈
);

97 
˘l_bymib
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

98 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
);

99 
boﬁ
 
˘l_boŸ
();

100 
˘l_¥ef‹k
(
tsdn_t
 *
tsdn
);

101 
˘l_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
);

102 
˘l_po°f‹k_chûd
(
tsdn_t
 *
tsdn
);

104 
	#xmÆl˘l
(
«me
, 
ﬁdp
, 
ﬁdÀ≈
, 
√wp
, 
√wÀn
) do { \

105 i‡(
	`je_mÆl˘l
(
«me
, 
ﬁdp
, 
ﬁdÀ≈
, 
√wp
, 
√wÀn
) \

107 
	`mÆloc_¥ötf
( \

109 
«me
); \

110 
	`ab‹t
(); \

112 } 0)

	)

114 
	#xmÆl˘ amëomib
(
«me
, 
mibp
, 
mibÀ≈
) do { \

115 i‡(
	`je_mÆl˘ amëomib
(
«me
, 
mibp
, 
mibÀ≈
) != 0) { \

116 
	`mÆloc_¥ötf
("<jemalloc>: Failure in " \

117 "xmÆl˘ amëomib(\"%s\", ...)\n", 
«me
); \

118 
	`ab‹t
(); \

120 } 0)

	)

122 
	#xmÆl˘lbymib
(
mib
, 
mibÀn
, 
ﬁdp
, 
ﬁdÀ≈
, 
√wp
, 
√wÀn
) do { \

123 i‡(
	`je_mÆl˘lbymib
(
mib
, 
mibÀn
, 
ﬁdp
, 
ﬁdÀ≈
, 
√wp
, \

124 
√wÀn
) != 0) { \

125 
	`mÆloc_wrôe
( \

127 
	`ab‹t
(); \

129 } 0)

	)

	@include/jemalloc/internal/div.h

1 #i‚de‡
JEMALLOC_INTERNAL_DIV_H


2 
	#JEMALLOC_INTERNAL_DIV_H


	)

4 
	~"jemÆloc/öã∫Æ/as£π.h
"

15 
div_öfo_s
 
	tdiv_öfo_t
;

16 
	sdiv_öfo_s
 {

17 
uöt32_t
 
	mmagic
;

18 #ifde‡
JEMALLOC_DEBUG


19 
size_t
 
	md
;

23 
div_öô
(
div_öfo_t
 *
div_öfo
, 
size_t
 
divis‹
);

25 
ölöe
 
size_t


26 
	$div_compuã
(
div_öfo_t
 *
div_öfo
, 
size_t
 
n
) {

27 
	`as£π
(
n
 <(
uöt32_t
)-1);

34 
size_t
 
i
 = ((
uöt64_t
)
n
 * (uöt64_t)
div_öfo
->
magic
) >> 32;

35 #ifde‡
JEMALLOC_DEBUG


36 
	`as£π
(
i
 * 
div_öfo
->
d
 =
n
);

38  
i
;

39 
	}
}

	@include/jemalloc/internal/extent_dss.h

1 #i‚de‡
JEMALLOC_INTERNAL_EXTENT_DSS_H


2 
	#JEMALLOC_INTERNAL_EXTENT_DSS_H


	)

5 
	mdss_¥ec_dißbÀd
 = 0,

6 
	mdss_¥ec_¥im¨y
 = 1,

7 
	mdss_¥ec_£c⁄d¨y
 = 2,

9 
	mdss_¥ec_limô
 = 3

10 } 
	tdss_¥ec_t
;

11 
	#DSS_PREC_DEFAULT
 
dss_¥ec_£c⁄d¨y


	)

12 
	#DSS_DEFAULT
 "£c⁄d¨y"

	)

14 c⁄° *
dss_¥ec_«mes
[];

16 c⁄° *
›t_dss
;

18 
dss_¥ec_t
 
exã¡_dss_¥ec_gë
();

19 
boﬁ
 
exã¡_dss_¥ec_£t
(
dss_¥ec_t
 
dss_¥ec
);

20 *
exã¡_Æloc_dss
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, *
√w_addr
,

21 
size_t
 
size
, size_à
Æignmít
, 
boﬁ
 *
zîo
, boﬁ *
commô
);

22 
boﬁ
 
exã¡_ö_dss
(*
addr
);

23 
boﬁ
 
exã¡_dss_mîgóbÀ
(*
addr_a
, *
addr_b
);

24 
exã¡_dss_boŸ
();

	@include/jemalloc/internal/extent_externs.h

1 #i‚de‡
JEMALLOC_INTERNAL_EXTENT_EXTERNS_H


2 
	#JEMALLOC_INTERNAL_EXTENT_EXTERNS_H


	)

4 
	~"jemÆloc/öã∫Æ/muãx.h
"

5 
	~"jemÆloc/öã∫Æ/muãx_poﬁ.h
"

6 
	~"jemÆloc/öã∫Æ/ph.h
"

7 
	~"jemÆloc/öã∫Æ/πªe.h
"

9 
size_t
 
›t_lg_exã¡_max_a˘ive_fô
;

11 
πªe_t
 
exã¡s_πªe
;

12 c⁄° 
exã¡_hooks_t
 
exã¡_hooks_deÁu…
;

13 
muãx_poﬁ_t
 
exã¡_muãx_poﬁ
;

15 
exã¡_t
 *
exã¡_Æloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
);

16 
exã¡_dÆloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
exã¡
);

18 
exã¡_hooks_t
 *
exã¡_hooks_gë
(
¨ía_t
 *
¨ía
);

19 
exã¡_hooks_t
 *
exã¡_hooks_£t
(
tsd_t
 *
tsd
, 
¨ía_t
 *
¨ía
,

20 
exã¡_hooks_t
 *
exã¡_hooks
);

22 #ifde‡
JEMALLOC_JET


23 
size_t
 
exã¡_size_qu™tize_Êo‹
(size_à
size
);

24 
size_t
 
exã¡_size_qu™tize_˚û
(size_à
size
);

27 
	$rb_¥Ÿo
(, 
exã¡_avaû_
, 
exã¡_åì_t
, 
exã¡_t
)

28 
	$ph_¥Ÿo
(, 
exã¡_hóp_
, 
exã¡_hóp_t
, 
exã¡_t
)

30 
boﬁ
 
	`exã¡s_öô
(
tsdn_t
 *
tsdn
, 
exã¡s_t
 *
exã¡s
, 
exã¡_°©e_t
 
°©e
,

31 
boﬁ
 
dñay_cﬂÀs˚
);

32 
exã¡_°©e_t
 
	`exã¡s_°©e_gë
(c⁄° 
exã¡s_t
 *
exã¡s
);

33 
size_t
 
	`exã¡s_≈ages_gë
(
exã¡s_t
 *
exã¡s
);

34 
exã¡_t
 *
	`exã¡s_Æloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

35 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡s_t
 *
exã¡s
, *
√w_addr
,

36 
size_t
 
size
, size_à
∑d
, size_à
Æignmít
, 
boﬁ
 
¶ab
, 
szöd_t
 
szöd
,

37 
boﬁ
 *
zîo
, boﬁ *
commô
);

38 
	`exã¡s_dÆloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

39 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡s_t
 *
exã¡s
, 
exã¡_t
 *
exã¡
);

40 
exã¡_t
 *
	`exã¡s_evi˘
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

41 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡s_t
 *
exã¡s
, 
size_t
 
≈ages_mö
);

42 
	`exã¡s_¥ef‹k
(
tsdn_t
 *
tsdn
, 
exã¡s_t
 *
exã¡s
);

43 
	`exã¡s_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
, 
exã¡s_t
 *
exã¡s
);

44 
	`exã¡s_po°f‹k_chûd
(
tsdn_t
 *
tsdn
, 
exã¡s_t
 *
exã¡s
);

45 
exã¡_t
 *
	`exã¡_Æloc_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

46 
exã¡_hooks_t
 **
r_exã¡_hooks
, *
√w_addr
, 
size_t
 
size
, size_à
∑d
,

47 
size_t
 
Æignmít
, 
boﬁ
 
¶ab
, 
szöd_t
 
szöd
, boﬁ *
zîo
, boﬁ *
commô
);

48 
	`exã¡_dÆloc_g≠
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
exã¡
);

49 
	`exã¡_dÆloc_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

50 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
);

51 
	`exã¡_de°roy_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

52 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
);

53 
boﬁ
 
	`exã¡_commô_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

54 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
off£t
,

55 
size_t
 
Àngth
);

56 
boﬁ
 
	`exã¡_decommô_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

57 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
off£t
,

58 
size_t
 
Àngth
);

59 
boﬁ
 
	`exã¡_purge_œzy_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

60 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
off£t
,

61 
size_t
 
Àngth
);

62 
boﬁ
 
	`exã¡_purge_f‹˚d_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

63 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
off£t
,

64 
size_t
 
Àngth
);

65 
exã¡_t
 *
	`exã¡_•lô_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

66 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
size_a
,

67 
szöd_t
 
szöd_a
, 
boﬁ
 
¶ab_a
, 
size_t
 
size_b
, szöd_à
szöd_b
, boﬁ 
¶ab_b
);

68 
boﬁ
 
	`exã¡_mîge_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

69 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
a
,Éxã¡_à*
b
);

71 
boﬁ
 
	`exã¡_boŸ
();

	@include/jemalloc/internal/extent_inlines.h

1 #i‚de‡
JEMALLOC_INTERNAL_EXTENT_INLINES_H


2 
	#JEMALLOC_INTERNAL_EXTENT_INLINES_H


	)

4 
	~"jemÆloc/öã∫Æ/muãx.h
"

5 
	~"jemÆloc/öã∫Æ/muãx_poﬁ.h
"

6 
	~"jemÆloc/öã∫Æ/∑ges.h
"

7 
	~"jemÆloc/öã∫Æ/¥ng.h
"

8 
	~"jemÆloc/öã∫Æ/ql.h
"

9 
	~"jemÆloc/öã∫Æ/sz.h
"

11 
ölöe
 

12 
	$exã¡_lock
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
) {

13 
	`as£π
(
exã¡
 !
NULL
);

14 
	`muãx_poﬁ_lock
(
tsdn
, &
exã¡_muãx_poﬁ
, (
uöçå_t
)
exã¡
);

15 
	}
}

17 
ölöe
 

18 
	$exã¡_u∆ock
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
) {

19 
	`as£π
(
exã¡
 !
NULL
);

20 
	`muãx_poﬁ_u∆ock
(
tsdn
, &
exã¡_muãx_poﬁ
, (
uöçå_t
)
exã¡
);

21 
	}
}

23 
ölöe
 

24 
	$exã¡_lock2
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡1
,Éxã¡_à*
exã¡2
) {

25 
	`as£π
(
exã¡1
 !
NULL
 && 
exã¡2
 != NULL);

26 
	`muãx_poﬁ_lock2
(
tsdn
, &
exã¡_muãx_poﬁ
, (
uöçå_t
)
exã¡1
,

27 (
uöçå_t
)
exã¡2
);

28 
	}
}

30 
ölöe
 

31 
	$exã¡_u∆ock2
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡1
,Éxã¡_à*
exã¡2
) {

32 
	`as£π
(
exã¡1
 !
NULL
 && 
exã¡2
 != NULL);

33 
	`muãx_poﬁ_u∆ock2
(
tsdn
, &
exã¡_muãx_poﬁ
, (
uöçå_t
)
exã¡1
,

34 (
uöçå_t
)
exã¡2
);

35 
	}
}

37 
ölöe
 
¨ía_t
 *

38 
	$exã¡_¨ía_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

39 
¨ía_öd
 = ()((
exã¡
->
e_bôs
 &

40 
EXTENT_BITS_ARENA_MASK
Ë>> 
EXTENT_BITS_ARENA_SHIFT
);

45 i‡(
Ál£
 && 
¨ía_öd
 >
MALLOCX_ARENA_LIMIT
) {

46  
NULL
;

48 
	`as£π
(
¨ía_öd
 < 
MALLOCX_ARENA_LIMIT
);

49  (
¨ía_t
 *)
	`©omic_lﬂd_p
(&
¨ías
[
¨ía_öd
], 
ATOMIC_ACQUIRE
);

50 
	}
}

52 
ölöe
 
szöd_t


53 
	$exã¡_szöd_gë_maybe_övÆid
(c⁄° 
exã¡_t
 *
exã¡
) {

54 
szöd_t
 
szöd
 = (szöd_t)((
exã¡
->
e_bôs
 & 
EXTENT_BITS_SZIND_MASK
) >>

55 
EXTENT_BITS_SZIND_SHIFT
);

56 
	`as£π
(
szöd
 <
NSIZES
);

57  
szöd
;

58 
	}
}

60 
ölöe
 
szöd_t


61 
	$exã¡_szöd_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

62 
szöd_t
 
szöd
 = 
	`exã¡_szöd_gë_maybe_övÆid
(
exã¡
);

63 
	`as£π
(
szöd
 < 
NSIZES
);

64  
szöd
;

65 
	}
}

67 
ölöe
 
size_t


68 
	$exã¡_usize_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

69  
	`sz_ödex2size
(
	`exã¡_szöd_gë
(
exã¡
));

70 
	}
}

72 
ölöe
 
size_t


73 
	$exã¡_¢_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

74  (
size_t
)((
exã¡
->
e_bôs
 & 
EXTENT_BITS_SN_MASK
) >>

75 
EXTENT_BITS_SN_SHIFT
);

76 
	}
}

78 
ölöe
 
exã¡_°©e_t


79 
	$exã¡_°©e_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

80  (
exã¡_°©e_t
)((
exã¡
->
e_bôs
 & 
EXTENT_BITS_STATE_MASK
) >>

81 
EXTENT_BITS_STATE_SHIFT
);

82 
	}
}

84 
ölöe
 
boﬁ


85 
	$exã¡_zî€d_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

86  (
boﬁ
)((
exã¡
->
e_bôs
 & 
EXTENT_BITS_ZEROED_MASK
) >>

87 
EXTENT_BITS_ZEROED_SHIFT
);

88 
	}
}

90 
ölöe
 
boﬁ


91 
	$exã¡_commôãd_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

92  (
boﬁ
)((
exã¡
->
e_bôs
 & 
EXTENT_BITS_COMMITTED_MASK
) >>

93 
EXTENT_BITS_COMMITTED_SHIFT
);

94 
	}
}

96 
ölöe
 
boﬁ


97 
	$exã¡_dum∑bÀ_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

98  (
boﬁ
)((
exã¡
->
e_bôs
 & 
EXTENT_BITS_DUMPABLE_MASK
) >>

99 
EXTENT_BITS_DUMPABLE_SHIFT
);

100 
	}
}

102 
ölöe
 
boﬁ


103 
	$exã¡_¶ab_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

104  (
boﬁ
)((
exã¡
->
e_bôs
 & 
EXTENT_BITS_SLAB_MASK
) >>

105 
EXTENT_BITS_SLAB_SHIFT
);

106 
	}
}

108 
ölöe
 

109 
	$exã¡_n‰ì_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

110 
	`as£π
(
	`exã¡_¶ab_gë
(
exã¡
));

111  ()((
exã¡
->
e_bôs
 & 
EXTENT_BITS_NFREE_MASK
) >>

112 
EXTENT_BITS_NFREE_SHIFT
);

113 
	}
}

115 
ölöe
 *

116 
	$exã¡_ba£_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

117 
	`as£π
(
exã¡
->
e_addr
 =
	`PAGE_ADDR2BASE
(extent->e_addr) ||

118 !
	`exã¡_¶ab_gë
(
exã¡
));

119  
	`PAGE_ADDR2BASE
(
exã¡
->
e_addr
);

120 
	}
}

122 
ölöe
 *

123 
	$exã¡_addr_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

124 
	`as£π
(
exã¡
->
e_addr
 =
	`PAGE_ADDR2BASE
(extent->e_addr) ||

125 !
	`exã¡_¶ab_gë
(
exã¡
));

126  
exã¡
->
e_addr
;

127 
	}
}

129 
ölöe
 
size_t


130 
	$exã¡_size_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

131  (
exã¡
->
e_size_e¢
 & 
EXTENT_SIZE_MASK
);

132 
	}
}

134 
ölöe
 
size_t


135 
	$exã¡_e¢_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

136  (
exã¡
->
e_size_e¢
 & 
EXTENT_ESN_MASK
);

137 
	}
}

139 
ölöe
 
size_t


140 
	$exã¡_bsize_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

141  
exã¡
->
e_bsize
;

142 
	}
}

144 
ölöe
 *

145 
	$exã¡_bef‹e_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

146  (*)((
uöçå_t
)
	`exã¡_ba£_gë
(
exã¡
Ë- 
PAGE
);

147 
	}
}

149 
ölöe
 *

150 
	$exã¡_œ°_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

151  (*)((
uöçå_t
)
	`exã¡_ba£_gë
(
exã¡
) +

152 
	`exã¡_size_gë
(
exã¡
Ë- 
PAGE
);

153 
	}
}

155 
ölöe
 *

156 
	$exã¡_∑°_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

157  (*)((
uöçå_t
)
	`exã¡_ba£_gë
(
exã¡
) +

158 
	`exã¡_size_gë
(
exã¡
));

159 
	}
}

161 
ölöe
 
¨ía_¶ab_d©a_t
 *

162 
	$exã¡_¶ab_d©a_gë
(
exã¡_t
 *
exã¡
) {

163 
	`as£π
(
	`exã¡_¶ab_gë
(
exã¡
));

164  &
exã¡
->
e_¶ab_d©a
;

165 
	}
}

167 
ölöe
 c⁄° 
¨ía_¶ab_d©a_t
 *

168 
	$exã¡_¶ab_d©a_gë_c⁄°
(c⁄° 
exã¡_t
 *
exã¡
) {

169 
	`as£π
(
	`exã¡_¶ab_gë
(
exã¡
));

170  &
exã¡
->
e_¶ab_d©a
;

171 
	}
}

173 
ölöe
 
¥of_t˘x_t
 *

174 
	$exã¡_¥of_t˘x_gë
(c⁄° 
exã¡_t
 *
exã¡
) {

175  (
¥of_t˘x_t
 *)
	`©omic_lﬂd_p
(&
exã¡
->
e_¥of_t˘x
,

176 
ATOMIC_ACQUIRE
);

177 
	}
}

179 
ölöe
 

180 
	$exã¡_¨ía_£t
(
exã¡_t
 *
exã¡
, 
¨ía_t
 *
¨ía
) {

181 
¨ía_öd
 = (
¨ía
 !
NULL
Ë? 
	`¨ía_öd_gë
(arena) : ((1U <<

182 
MALLOCX_ARENA_BITS
) - 1);

183 
exã¡
->
e_bôs
 = (exã¡->e_bô†& ~
EXTENT_BITS_ARENA_MASK
) |

184 ((
uöt64_t
)
¨ía_öd
 << 
EXTENT_BITS_ARENA_SHIFT
);

185 
	}
}

187 
ölöe
 

188 
	$exã¡_addr_£t
(
exã¡_t
 *
exã¡
, *
addr
) {

189 
exã¡
->
e_addr
 = 
addr
;

190 
	}
}

192 
ölöe
 

193 
	$exã¡_addr_øndomize
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
, 
size_t
 
Æignmít
) {

194 
	`as£π
(
	`exã¡_ba£_gë
(
exã¡
Ë=
	`exã¡_addr_gë
(extent));

196 i‡(
Æignmít
 < 
PAGE
) {

197 
lg_ønge
 = 
LG_PAGE
 -

198 
	`lg_Êo‹
(
	`CACHELINE_CEILING
(
Æignmít
));

199 
size_t
 
r
;

200 i‡(!
	`tsdn_nuŒ
(
tsdn
)) {

201 
tsd_t
 *
tsd
 = 
	`tsdn_tsd
(
tsdn
);

202 
r
 = (
size_t
)
	`¥ng_lg_ønge_u64
(

203 
	`tsd_off£t_°©ï_gë
(
tsd
), 
lg_ønge
);

205 
r
 = 
	`¥ng_lg_ønge_zu
(

206 &
	`exã¡_¨ía_gë
(
exã¡
)->
off£t_°©e
,

207 
lg_ønge
, 
åue
);

209 
uöçå_t
 
øndom_off£t
 = ((uöçå_t)
r
Ë<< (
LG_PAGE
 -

210 
lg_ønge
);

211 
exã¡
->
e_addr
 = (*)((
uöçå_t
)extent->e_addr +

212 
øndom_off£t
);

213 
	`as£π
(
	`ALIGNMENT_ADDR2BASE
(
exã¡
->
e_addr
, 
Æignmít
) ==

214 
exã¡
->
e_addr
);

216 
	}
}

218 
ölöe
 

219 
	$exã¡_size_£t
(
exã¡_t
 *
exã¡
, 
size_t
 
size
) {

220 
	`as£π
((
size
 & ~
EXTENT_SIZE_MASK
) == 0);

221 
exã¡
->
e_size_e¢
 = 
size
 | (exã¡->e_size_e¢ & ~
EXTENT_SIZE_MASK
);

222 
	}
}

224 
ölöe
 

225 
	$exã¡_e¢_£t
(
exã¡_t
 *
exã¡
, 
size_t
 
e¢
) {

226 
exã¡
->
e_size_e¢
 = (exã¡->e_size_e¢ & ~
EXTENT_ESN_MASK
Ë| (
e¢
 &

227 
EXTENT_ESN_MASK
);

228 
	}
}

230 
ölöe
 

231 
	$exã¡_bsize_£t
(
exã¡_t
 *
exã¡
, 
size_t
 
bsize
) {

232 
exã¡
->
e_bsize
 = 
bsize
;

233 
	}
}

235 
ölöe
 

236 
	$exã¡_szöd_£t
(
exã¡_t
 *
exã¡
, 
szöd_t
 
szöd
) {

237 
	`as£π
(
szöd
 <
NSIZES
);

238 
exã¡
->
e_bôs
 = (exã¡->e_bô†& ~
EXTENT_BITS_SZIND_MASK
) |

239 ((
uöt64_t
)
szöd
 << 
EXTENT_BITS_SZIND_SHIFT
);

240 
	}
}

242 
ölöe
 

243 
	$exã¡_n‰ì_£t
(
exã¡_t
 *
exã¡
, 
n‰ì
) {

244 
	`as£π
(
	`exã¡_¶ab_gë
(
exã¡
));

245 
exã¡
->
e_bôs
 = (exã¡->e_bô†& ~
EXTENT_BITS_NFREE_MASK
) |

246 ((
uöt64_t
)
n‰ì
 << 
EXTENT_BITS_NFREE_SHIFT
);

247 
	}
}

249 
ölöe
 

250 
	$exã¡_n‰ì_öc
(
exã¡_t
 *
exã¡
) {

251 
	`as£π
(
	`exã¡_¶ab_gë
(
exã¡
));

252 
exã¡
->
e_bôs
 +((
uöt64_t
)1U << 
EXTENT_BITS_NFREE_SHIFT
);

253 
	}
}

255 
ölöe
 

256 
	$exã¡_n‰ì_dec
(
exã¡_t
 *
exã¡
) {

257 
	`as£π
(
	`exã¡_¶ab_gë
(
exã¡
));

258 
exã¡
->
e_bôs
 -((
uöt64_t
)1U << 
EXTENT_BITS_NFREE_SHIFT
);

259 
	}
}

261 
ölöe
 

262 
	$exã¡_¢_£t
(
exã¡_t
 *
exã¡
, 
size_t
 
¢
) {

263 
exã¡
->
e_bôs
 = (exã¡->e_bô†& ~
EXTENT_BITS_SN_MASK
) |

264 ((
uöt64_t
)
¢
 << 
EXTENT_BITS_SN_SHIFT
);

265 
	}
}

267 
ölöe
 

268 
	$exã¡_°©e_£t
(
exã¡_t
 *
exã¡
, 
exã¡_°©e_t
 
°©e
) {

269 
exã¡
->
e_bôs
 = (exã¡->e_bô†& ~
EXTENT_BITS_STATE_MASK
) |

270 ((
uöt64_t
)
°©e
 << 
EXTENT_BITS_STATE_SHIFT
);

271 
	}
}

273 
ölöe
 

274 
	$exã¡_zî€d_£t
(
exã¡_t
 *
exã¡
, 
boﬁ
 
zî€d
) {

275 
exã¡
->
e_bôs
 = (exã¡->e_bô†& ~
EXTENT_BITS_ZEROED_MASK
) |

276 ((
uöt64_t
)
zî€d
 << 
EXTENT_BITS_ZEROED_SHIFT
);

277 
	}
}

279 
ölöe
 

280 
	$exã¡_commôãd_£t
(
exã¡_t
 *
exã¡
, 
boﬁ
 
commôãd
) {

281 
exã¡
->
e_bôs
 = (exã¡->e_bô†& ~
EXTENT_BITS_COMMITTED_MASK
) |

282 ((
uöt64_t
)
commôãd
 << 
EXTENT_BITS_COMMITTED_SHIFT
);

283 
	}
}

285 
ölöe
 

286 
	$exã¡_dum∑bÀ_£t
(
exã¡_t
 *
exã¡
, 
boﬁ
 
dum∑bÀ
) {

287 
exã¡
->
e_bôs
 = (exã¡->e_bô†& ~
EXTENT_BITS_DUMPABLE_MASK
) |

288 ((
uöt64_t
)
dum∑bÀ
 << 
EXTENT_BITS_DUMPABLE_SHIFT
);

289 
	}
}

291 
ölöe
 

292 
	$exã¡_¶ab_£t
(
exã¡_t
 *
exã¡
, 
boﬁ
 
¶ab
) {

293 
exã¡
->
e_bôs
 = (exã¡->e_bô†& ~
EXTENT_BITS_SLAB_MASK
) |

294 ((
uöt64_t
)
¶ab
 << 
EXTENT_BITS_SLAB_SHIFT
);

295 
	}
}

297 
ölöe
 

298 
	$exã¡_¥of_t˘x_£t
(
exã¡_t
 *
exã¡
, 
¥of_t˘x_t
 *
t˘x
) {

299 
	`©omic_°‹e_p
(&
exã¡
->
e_¥of_t˘x
, 
t˘x
, 
ATOMIC_RELEASE
);

300 
	}
}

302 
ölöe
 

303 
	$exã¡_öô
(
exã¡_t
 *
exã¡
, 
¨ía_t
 *
¨ía
, *
addr
, 
size_t
 
size
,

304 
boﬁ
 
¶ab
, 
szöd_t
 
szöd
, 
size_t
 
¢
, 
exã¡_°©e_t
 
°©e
, boﬁ 
zî€d
,

305 
boﬁ
 
commôãd
, boﬁ 
dum∑bÀ
) {

306 
	`as£π
(
addr
 =
	`PAGE_ADDR2BASE
◊ddrË|| !
¶ab
);

308 
	`exã¡_¨ía_£t
(
exã¡
, 
¨ía
);

309 
	`exã¡_addr_£t
(
exã¡
, 
addr
);

310 
	`exã¡_size_£t
(
exã¡
, 
size
);

311 
	`exã¡_¶ab_£t
(
exã¡
, 
¶ab
);

312 
	`exã¡_szöd_£t
(
exã¡
, 
szöd
);

313 
	`exã¡_¢_£t
(
exã¡
, 
¢
);

314 
	`exã¡_°©e_£t
(
exã¡
, 
°©e
);

315 
	`exã¡_zî€d_£t
(
exã¡
, 
zî€d
);

316 
	`exã¡_commôãd_£t
(
exã¡
, 
commôãd
);

317 
	`exã¡_dum∑bÀ_£t
(
exã¡
, 
dum∑bÀ
);

318 
	`ql_ñm_√w
(
exã¡
, 
ql_lök
);

319 i‡(
c⁄fig_¥of
) {

320 
	`exã¡_¥of_t˘x_£t
(
exã¡
, 
NULL
);

322 
	}
}

324 
ölöe
 

325 
	$exã¡_böô
(
exã¡_t
 *
exã¡
, *
addr
, 
size_t
 
bsize
, size_à
¢
) {

326 
	`exã¡_¨ía_£t
(
exã¡
, 
NULL
);

327 
	`exã¡_addr_£t
(
exã¡
, 
addr
);

328 
	`exã¡_bsize_£t
(
exã¡
, 
bsize
);

329 
	`exã¡_¶ab_£t
(
exã¡
, 
Ál£
);

330 
	`exã¡_szöd_£t
(
exã¡
, 
NSIZES
);

331 
	`exã¡_¢_£t
(
exã¡
, 
¢
);

332 
	`exã¡_°©e_£t
(
exã¡
, 
exã¡_°©e_a˘ive
);

333 
	`exã¡_zî€d_£t
(
exã¡
, 
åue
);

334 
	`exã¡_commôãd_£t
(
exã¡
, 
åue
);

335 
	`exã¡_dum∑bÀ_£t
(
exã¡
, 
åue
);

336 
	}
}

338 
ölöe
 

339 
	$exã¡_li°_öô
(
exã¡_li°_t
 *
li°
) {

340 
	`ql_√w
(
li°
);

341 
	}
}

343 
ölöe
 
exã¡_t
 *

344 
	$exã¡_li°_fú°
(c⁄° 
exã¡_li°_t
 *
li°
) {

345  
	`ql_fú°
(
li°
);

346 
	}
}

348 
ölöe
 
exã¡_t
 *

349 
	$exã¡_li°_œ°
(c⁄° 
exã¡_li°_t
 *
li°
) {

350  
	`ql_œ°
(
li°
, 
ql_lök
);

351 
	}
}

353 
ölöe
 

354 
	$exã¡_li°_≠≥nd
(
exã¡_li°_t
 *
li°
, 
exã¡_t
 *
exã¡
) {

355 
	`ql_èû_ö£π
(
li°
, 
exã¡
, 
ql_lök
);

356 
	}
}

358 
ölöe
 

359 
	$exã¡_li°_¥ïíd
(
exã¡_li°_t
 *
li°
, 
exã¡_t
 *
exã¡
) {

360 
	`ql_hód_ö£π
(
li°
, 
exã¡
, 
ql_lök
);

361 
	}
}

363 
ölöe
 

364 
	$exã¡_li°_ª∂a˚
(
exã¡_li°_t
 *
li°
, 
exã¡_t
 *
to_ªmove
,

365 
exã¡_t
 *
to_ö£π
) {

366 
	`ql_a·î_ö£π
(
to_ªmove
, 
to_ö£π
, 
ql_lök
);

367 
	`ql_ªmove
(
li°
, 
to_ªmove
, 
ql_lök
);

368 
	}
}

370 
ölöe
 

371 
	$exã¡_li°_ªmove
(
exã¡_li°_t
 *
li°
, 
exã¡_t
 *
exã¡
) {

372 
	`ql_ªmove
(
li°
, 
exã¡
, 
ql_lök
);

373 
	}
}

375 
ölöe
 

376 
	$exã¡_¢_comp
(c⁄° 
exã¡_t
 *
a
, c⁄°Éxã¡_à*
b
) {

377 
size_t
 
a_¢
 = 
	`exã¡_¢_gë
(
a
);

378 
size_t
 
b_¢
 = 
	`exã¡_¢_gë
(
b
);

380  (
a_¢
 > 
b_¢
) - (a_sn < b_sn);

381 
	}
}

383 
ölöe
 

384 
	$exã¡_e¢_comp
(c⁄° 
exã¡_t
 *
a
, c⁄°Éxã¡_à*
b
) {

385 
size_t
 
a_e¢
 = 
	`exã¡_e¢_gë
(
a
);

386 
size_t
 
b_e¢
 = 
	`exã¡_e¢_gë
(
b
);

388  (
a_e¢
 > 
b_e¢
) - (a_esn < b_esn);

389 
	}
}

391 
ölöe
 

392 
	$exã¡_ad_comp
(c⁄° 
exã¡_t
 *
a
, c⁄°Éxã¡_à*
b
) {

393 
uöçå_t
 
a_addr
 = (uöçå_t)
	`exã¡_addr_gë
(
a
);

394 
uöçå_t
 
b_addr
 = (uöçå_t)
	`exã¡_addr_gë
(
b
);

396  (
a_addr
 > 
b_addr
) - (a_addr < b_addr);

397 
	}
}

399 
ölöe
 

400 
	$exã¡_ód_comp
(c⁄° 
exã¡_t
 *
a
, c⁄°Éxã¡_à*
b
) {

401 
uöçå_t
 
a_óddr
 = (uöçå_t)
a
;

402 
uöçå_t
 
b_óddr
 = (uöçå_t)
b
;

404  (
a_óddr
 > 
b_óddr
) - (a_eaddr < b_eaddr);

405 
	}
}

407 
ölöe
 

408 
	$exã¡_¢ad_comp
(c⁄° 
exã¡_t
 *
a
, c⁄°Éxã¡_à*
b
) {

409 
ªt
;

411 
ªt
 = 
	`exã¡_¢_comp
(
a
, 
b
);

412 i‡(
ªt
 != 0) {

413  
ªt
;

416 
ªt
 = 
	`exã¡_ad_comp
(
a
, 
b
);

417  
ªt
;

418 
	}
}

420 
ölöe
 

421 
	$exã¡_e¢ód_comp
(c⁄° 
exã¡_t
 *
a
, c⁄°Éxã¡_à*
b
) {

422 
ªt
;

424 
ªt
 = 
	`exã¡_e¢_comp
(
a
, 
b
);

425 i‡(
ªt
 != 0) {

426  
ªt
;

429 
ªt
 = 
	`exã¡_ód_comp
(
a
, 
b
);

430  
ªt
;

431 
	}
}

	@include/jemalloc/internal/extent_mmap.h

1 #i‚de‡
JEMALLOC_INTERNAL_EXTENT_MMAP_EXTERNS_H


2 
	#JEMALLOC_INTERNAL_EXTENT_MMAP_EXTERNS_H


	)

4 
boﬁ
 
›t_ªèö
;

6 *
exã¡_Æloc_mm≠
(*
√w_addr
, 
size_t
 
size
, size_à
Æignmít
,

7 
boﬁ
 *
zîo
, boﬁ *
commô
);

8 
boﬁ
 
exã¡_dÆloc_mm≠
(*
addr
, 
size_t
 
size
);

	@include/jemalloc/internal/extent_structs.h

1 #i‚de‡
JEMALLOC_INTERNAL_EXTENT_STRUCTS_H


2 
	#JEMALLOC_INTERNAL_EXTENT_STRUCTS_H


	)

4 
	~"jemÆloc/öã∫Æ/©omic.h
"

5 
	~"jemÆloc/öã∫Æ/bôm≠.h
"

6 
	~"jemÆloc/öã∫Æ/muãx.h
"

7 
	~"jemÆloc/öã∫Æ/ql.h
"

8 
	~"jemÆloc/öã∫Æ/ph.h
"

9 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

12 
	mexã¡_°©e_a˘ive
 = 0,

13 
	mexã¡_°©e_dúty
 = 1,

14 
	mexã¡_°©e_muzzy
 = 2,

15 
	mexã¡_°©e_ªèöed
 = 3

16 } 
	texã¡_°©e_t
;

19 
	sexã¡_s
 {

88 
uöt64_t
 
	me_bôs
;

89 
	#MASK
(
CURRENT_FIELD_WIDTH
, 
CURRENT_FIELD_SHIFT
Ë((((((
uöt64_t
)0x1UË<< (CURRENT_FIELD_WIDTH)Ë- 1)Ë<< (CURRENT_FIELD_SHIFT))

	)

91 
	#EXTENT_BITS_ARENA_WIDTH
 
MALLOCX_ARENA_BITS


	)

92 
	#EXTENT_BITS_ARENA_SHIFT
 0

	)

93 
	#EXTENT_BITS_ARENA_MASK
 
	`MASK
(
EXTENT_BITS_ARENA_WIDTH
, 
EXTENT_BITS_ARENA_SHIFT
)

	)

95 
	#EXTENT_BITS_SLAB_WIDTH
 1

	)

96 
	#EXTENT_BITS_SLAB_SHIFT
 (
EXTENT_BITS_ARENA_WIDTH
 + 
EXTENT_BITS_ARENA_SHIFT
)

	)

97 
	#EXTENT_BITS_SLAB_MASK
 
	`MASK
(
EXTENT_BITS_SLAB_WIDTH
, 
EXTENT_BITS_SLAB_SHIFT
)

	)

99 
	#EXTENT_BITS_COMMITTED_WIDTH
 1

	)

100 
	#EXTENT_BITS_COMMITTED_SHIFT
 (
EXTENT_BITS_SLAB_WIDTH
 + 
EXTENT_BITS_SLAB_SHIFT
)

	)

101 
	#EXTENT_BITS_COMMITTED_MASK
 
	`MASK
(
EXTENT_BITS_COMMITTED_WIDTH
, 
EXTENT_BITS_COMMITTED_SHIFT
)

	)

103 
	#EXTENT_BITS_DUMPABLE_WIDTH
 1

	)

104 
	#EXTENT_BITS_DUMPABLE_SHIFT
 (
EXTENT_BITS_COMMITTED_WIDTH
 + 
EXTENT_BITS_COMMITTED_SHIFT
)

	)

105 
	#EXTENT_BITS_DUMPABLE_MASK
 
	`MASK
(
EXTENT_BITS_DUMPABLE_WIDTH
, 
EXTENT_BITS_DUMPABLE_SHIFT
)

	)

107 
	#EXTENT_BITS_ZEROED_WIDTH
 1

	)

108 
	#EXTENT_BITS_ZEROED_SHIFT
 (
EXTENT_BITS_DUMPABLE_WIDTH
 + 
EXTENT_BITS_DUMPABLE_SHIFT
)

	)

109 
	#EXTENT_BITS_ZEROED_MASK
 
	`MASK
(
EXTENT_BITS_ZEROED_WIDTH
, 
EXTENT_BITS_ZEROED_SHIFT
)

	)

111 
	#EXTENT_BITS_STATE_WIDTH
 2

	)

112 
	#EXTENT_BITS_STATE_SHIFT
 (
EXTENT_BITS_ZEROED_WIDTH
 + 
EXTENT_BITS_ZEROED_SHIFT
)

	)

113 
	#EXTENT_BITS_STATE_MASK
 
	`MASK
(
EXTENT_BITS_STATE_WIDTH
, 
EXTENT_BITS_STATE_SHIFT
)

	)

115 
	#EXTENT_BITS_SZIND_WIDTH
 
LG_CEIL_NSIZES


	)

116 
	#EXTENT_BITS_SZIND_SHIFT
 (
EXTENT_BITS_STATE_WIDTH
 + 
EXTENT_BITS_STATE_SHIFT
)

	)

117 
	#EXTENT_BITS_SZIND_MASK
 
	`MASK
(
EXTENT_BITS_SZIND_WIDTH
, 
EXTENT_BITS_SZIND_SHIFT
)

	)

119 
	#EXTENT_BITS_NFREE_WIDTH
 (
LG_SLAB_MAXREGS
 + 1)

	)

120 
	#EXTENT_BITS_NFREE_SHIFT
 (
EXTENT_BITS_SZIND_WIDTH
 + 
EXTENT_BITS_SZIND_SHIFT
)

	)

121 
	#EXTENT_BITS_NFREE_MASK
 
	`MASK
(
EXTENT_BITS_NFREE_WIDTH
, 
EXTENT_BITS_NFREE_SHIFT
)

	)

123 
	#EXTENT_BITS_SN_SHIFT
 (
EXTENT_BITS_NFREE_WIDTH
 + 
EXTENT_BITS_NFREE_SHIFT
)

	)

124 
	#EXTENT_BITS_SN_MASK
 (
UINT64_MAX
 << 
EXTENT_BITS_SN_SHIFT
)

	)

127 *
	me_addr
;

137 
size_t
 
	me_size_e¢
;

138 
	#EXTENT_SIZE_MASK
 ((
size_t
)~(
PAGE
-1))

	)

139 
	#EXTENT_ESN_MASK
 ((
size_t
)
PAGE
-1)

	)

141 
size_t
 
	me_bsize
;

151 
ql_ñm
(
exã¡_t
Ë
	mql_lök
;

157 
phn
(
exã¡_t
Ë
	mph_lök
;

161 
¨ía_¶ab_d©a_t
 
	me_¶ab_d©a
;

167 
©omic_p_t
 
	me_¥of_t˘x
;

170 
	$ql_hód
(
	texã¡_t
Ë
	texã¡_li°_t
;

171 
	$ph
(
	texã¡_t
Ë
	texã¡_åì_t
;

172 
	$ph
(
	texã¡_t
Ë
	texã¡_hóp_t
;

175 
	sexã¡s_s
 {

176 
mÆloc_muãx_t
 
mtx
;

183 
exã¡_hóp_t
 
hóps
[
NPSIZES
+1];

190 
bôm≠_t
 
bôm≠
[
	`BITMAP_GROUPS
(
NPSIZES
+1)];

197 
exã¡_li°_t
 
Ãu
;

207 
©omic_zu_t
 
≈ages
;

210 
exã¡_°©e_t
 
°©e
;

216 
boﬁ
 
dñay_cﬂÀs˚
;

	@include/jemalloc/internal/extent_types.h

1 #i‚de‡
JEMALLOC_INTERNAL_EXTENT_TYPES_H


2 
	#JEMALLOC_INTERNAL_EXTENT_TYPES_H


	)

4 
exã¡_s
 
	texã¡_t
;

5 
exã¡s_s
 
	texã¡s_t
;

7 
	#EXTENT_HOOKS_INITIALIZER
 
NULL


	)

9 
	#EXTENT_GROW_MAX_PIND
 (
NPSIZES
 - 1)

	)

15 
	#LG_EXTENT_MAX_ACTIVE_FIT_DEFAULT
 6

	)

	@include/jemalloc/internal/hash.h

1 #i‚de‡
JEMALLOC_INTERNAL_HASH_H


2 
	#JEMALLOC_INTERNAL_HASH_H


	)

4 
	~"jemÆloc/öã∫Æ/as£π.h
"

14 
ölöe
 
uöt32_t


15 
	$hash_rŸl_32
(
uöt32_t
 
x
, 
öt8_t
 
r
) {

16  ((
x
 << 
r
) | (x >> (32 -Ñ)));

17 
	}
}

19 
ölöe
 
uöt64_t


20 
	$hash_rŸl_64
(
uöt64_t
 
x
, 
öt8_t
 
r
) {

21  ((
x
 << 
r
) | (x >> (64 -Ñ)));

22 
	}
}

24 
ölöe
 
uöt32_t


25 
	$hash_gë_block_32
(c⁄° 
uöt32_t
 *
p
, 
i
) {

27 i‡(
	`u∆ikñy
((
uöçå_t
)
p
 & ((
uöt32_t
)-1)) != 0) {

28 
uöt32_t
 
ªt
;

30 
	`mem˝y
(&
ªt
, (
uöt8_t
 *)(
p
 + 
i
), (
uöt32_t
));

31  
ªt
;

34  
p
[
i
];

35 
	}
}

37 
ölöe
 
uöt64_t


38 
	$hash_gë_block_64
(c⁄° 
uöt64_t
 *
p
, 
i
) {

40 i‡(
	`u∆ikñy
((
uöçå_t
)
p
 & ((
uöt64_t
)-1)) != 0) {

41 
uöt64_t
 
ªt
;

43 
	`mem˝y
(&
ªt
, (
uöt8_t
 *)(
p
 + 
i
), (
uöt64_t
));

44  
ªt
;

47  
p
[
i
];

48 
	}
}

50 
ölöe
 
uöt32_t


51 
	$hash_fmix_32
(
uöt32_t
 
h
) {

52 
h
 ^= h >> 16;

53 
h
 *= 0x85ebca6b;

54 
h
 ^= h >> 13;

55 
h
 *= 0xc2b2ae35;

56 
h
 ^= h >> 16;

58  
h
;

59 
	}
}

61 
ölöe
 
uöt64_t


62 
	$hash_fmix_64
(
uöt64_t
 
k
) {

63 
k
 ^= k >> 33;

64 
k
 *
	`KQU
(0xff51afd7ed558ccd);

65 
k
 ^= k >> 33;

66 
k
 *
	`KQU
(0xc4ceb9fe1a85ec53);

67 
k
 ^= k >> 33;

69  
k
;

70 
	}
}

72 
ölöe
 
uöt32_t


73 
	$hash_x86_32
(c⁄° *
key
, 
Àn
, 
uöt32_t
 
£ed
) {

74 c⁄° 
uöt8_t
 *
d©a
 = (c⁄° uöt8_à*Ë
key
;

75 c⁄° 
nblocks
 = 
Àn
 / 4;

77 
uöt32_t
 
h1
 = 
£ed
;

79 c⁄° 
uöt32_t
 
c1
 = 0xcc9e2d51;

80 c⁄° 
uöt32_t
 
c2
 = 0x1b873593;

84 c⁄° 
uöt32_t
 *
blocks
 = (c⁄° uöt32_à*Ë(
d©a
 + 
nblocks
*4);

85 
i
;

87 
i
 = -
nblocks
; i; i++) {

88 
uöt32_t
 
k1
 = 
	`hash_gë_block_32
(
blocks
, 
i
);

90 
k1
 *
c1
;

91 
k1
 = 
	`hash_rŸl_32
(k1, 15);

92 
k1
 *
c2
;

94 
h1
 ^
k1
;

95 
h1
 = 
	`hash_rŸl_32
(h1, 13);

96 
h1
 = h1*5 + 0xe6546b64;

102 c⁄° 
uöt8_t
 *
èû
 = (c⁄° uöt8_à*Ë(
d©a
 + 
nblocks
*4);

104 
uöt32_t
 
k1
 = 0;

106 
Àn
 & 3) {

107 3: 
k1
 ^
èû
[2] << 16;

108 2: 
k1
 ^
èû
[1] << 8;

109 1: 
k1
 ^
èû
[0]; k1 *
c1
; k1 = 
	`hash_rŸl_32
(k1, 15);

110 
k1
 *
c2
; 
h1
 ^= k1;

115 
h1
 ^
Àn
;

117 
h1
 = 
	`hash_fmix_32
(h1);

119  
h1
;

120 
	}
}

122 
UNUSED
 
ölöe
 

123 
	$hash_x86_128
(c⁄° *
key
, c⁄° 
Àn
, 
uöt32_t
 
£ed
,

124 
uöt64_t
 
r_out
[2]) {

125 c⁄° 
uöt8_t
 * 
d©a
 = (c⁄° uöt8_à*Ë
key
;

126 c⁄° 
nblocks
 = 
Àn
 / 16;

128 
uöt32_t
 
h1
 = 
£ed
;

129 
uöt32_t
 
h2
 = 
£ed
;

130 
uöt32_t
 
h3
 = 
£ed
;

131 
uöt32_t
 
h4
 = 
£ed
;

133 c⁄° 
uöt32_t
 
c1
 = 0x239b961b;

134 c⁄° 
uöt32_t
 
c2
 = 0xab0e9789;

135 c⁄° 
uöt32_t
 
c3
 = 0x38b34ae5;

136 c⁄° 
uöt32_t
 
c4
 = 0xa1e38b93;

140 c⁄° 
uöt32_t
 *
blocks
 = (c⁄° uöt32_à*Ë(
d©a
 + 
nblocks
*16);

141 
i
;

143 
i
 = -
nblocks
; i; i++) {

144 
uöt32_t
 
k1
 = 
	`hash_gë_block_32
(
blocks
, 
i
*4 + 0);

145 
uöt32_t
 
k2
 = 
	`hash_gë_block_32
(
blocks
, 
i
*4 + 1);

146 
uöt32_t
 
k3
 = 
	`hash_gë_block_32
(
blocks
, 
i
*4 + 2);

147 
uöt32_t
 
k4
 = 
	`hash_gë_block_32
(
blocks
, 
i
*4 + 3);

149 
k1
 *
c1
; k1 = 
	`hash_rŸl_32
(k1, 15); k1 *
c2
; 
h1
 ^= k1;

151 
h1
 = 
	`hash_rŸl_32
(h1, 19); h1 +
h2
;

152 
h1
 = h1*5 + 0x561ccd1b;

154 
k2
 *
c2
; k2 = 
	`hash_rŸl_32
(k2, 16); k2 *
c3
; 
h2
 ^= k2;

156 
h2
 = 
	`hash_rŸl_32
(h2, 17); h2 +
h3
;

157 
h2
 = h2*5 + 0x0bcaa747;

159 
k3
 *
c3
; k3 = 
	`hash_rŸl_32
(k3, 17); k3 *
c4
; 
h3
 ^= k3;

161 
h3
 = 
	`hash_rŸl_32
(h3, 15); h3 +
h4
;

162 
h3
 = h3*5 + 0x96cd1c35;

164 
k4
 *
c4
; k4 = 
	`hash_rŸl_32
(k4, 18); k4 *
c1
; 
h4
 ^= k4;

166 
h4
 = 
	`hash_rŸl_32
(h4, 13); h4 +
h1
;

167 
h4
 = h4*5 + 0x32ac3b17;

173 c⁄° 
uöt8_t
 *
èû
 = (c⁄° uöt8_à*Ë(
d©a
 + 
nblocks
*16);

174 
uöt32_t
 
k1
 = 0;

175 
uöt32_t
 
k2
 = 0;

176 
uöt32_t
 
k3
 = 0;

177 
uöt32_t
 
k4
 = 0;

179 
Àn
 & 15) {

180 15: 
k4
 ^
èû
[14] << 16;

181 14: 
k4
 ^
èû
[13] << 8;

182 13: 
k4
 ^
èû
[12] << 0;

183 
k4
 *
c4
; k4 = 
	`hash_rŸl_32
(k4, 18); k4 *
c1
; 
h4
 ^= k4;

185 12: 
k3
 ^
èû
[11] << 24;

186 11: 
k3
 ^
èû
[10] << 16;

187 10: 
k3
 ^
èû
[ 9] << 8;

188 9: 
k3
 ^
èû
[ 8] << 0;

189 
k3
 *
c3
; k3 = 
	`hash_rŸl_32
(k3, 17); k3 *
c4
; 
h3
 ^= k3;

191 8: 
k2
 ^
èû
[ 7] << 24;

192 7: 
k2
 ^
èû
[ 6] << 16;

193 6: 
k2
 ^
èû
[ 5] << 8;

194 5: 
k2
 ^
èû
[ 4] << 0;

195 
k2
 *
c2
; k2 = 
	`hash_rŸl_32
(k2, 16); k2 *
c3
; 
h2
 ^= k2;

197 4: 
k1
 ^
èû
[ 3] << 24;

198 3: 
k1
 ^
èû
[ 2] << 16;

199 2: 
k1
 ^
èû
[ 1] << 8;

200 1: 
k1
 ^
èû
[ 0] << 0;

201 
k1
 *
c1
; k1 = 
	`hash_rŸl_32
(k1, 15); k1 *
c2
; 
h1
 ^= k1;

206 
h1
 ^
Àn
; 
h2
 ^Àn; 
h3
 ^Àn; 
h4
 ^=Üen;

208 
h1
 +
h2
; h1 +
h3
; h1 +
h4
;

209 
h2
 +
h1
; 
h3
 +h1; 
h4
 += h1;

211 
h1
 = 
	`hash_fmix_32
(h1);

212 
h2
 = 
	`hash_fmix_32
(h2);

213 
h3
 = 
	`hash_fmix_32
(h3);

214 
h4
 = 
	`hash_fmix_32
(h4);

216 
h1
 +
h2
; h1 +
h3
; h1 +
h4
;

217 
h2
 +
h1
; 
h3
 +h1; 
h4
 += h1;

219 
r_out
[0] = (((
uöt64_t
Ë
h2
Ë<< 32Ë| 
h1
;

220 
r_out
[1] = (((
uöt64_t
Ë
h4
Ë<< 32Ë| 
h3
;

221 
	}
}

223 
UNUSED
 
ölöe
 

224 
	$hash_x64_128
(c⁄° *
key
, c⁄° 
Àn
, c⁄° 
uöt32_t
 
£ed
,

225 
uöt64_t
 
r_out
[2]) {

226 c⁄° 
uöt8_t
 *
d©a
 = (c⁄° uöt8_à*Ë
key
;

227 c⁄° 
nblocks
 = 
Àn
 / 16;

229 
uöt64_t
 
h1
 = 
£ed
;

230 
uöt64_t
 
h2
 = 
£ed
;

232 c⁄° 
uöt64_t
 
c1
 = 
	`KQU
(0x87c37b91114253d5);

233 c⁄° 
uöt64_t
 
c2
 = 
	`KQU
(0x4cf5ad432745937f);

237 c⁄° 
uöt64_t
 *
blocks
 = (c⁄° uöt64_à*Ë(
d©a
);

238 
i
;

240 
i
 = 0; i < 
nblocks
; i++) {

241 
uöt64_t
 
k1
 = 
	`hash_gë_block_64
(
blocks
, 
i
*2 + 0);

242 
uöt64_t
 
k2
 = 
	`hash_gë_block_64
(
blocks
, 
i
*2 + 1);

244 
k1
 *
c1
; k1 = 
	`hash_rŸl_64
(k1, 31); k1 *
c2
; 
h1
 ^= k1;

246 
h1
 = 
	`hash_rŸl_64
(h1, 27); h1 +
h2
;

247 
h1
 = h1*5 + 0x52dce729;

249 
k2
 *
c2
; k2 = 
	`hash_rŸl_64
(k2, 33); k2 *
c1
; 
h2
 ^= k2;

251 
h2
 = 
	`hash_rŸl_64
(h2, 31); h2 +
h1
;

252 
h2
 = h2*5 + 0x38495ab5;

258 c⁄° 
uöt8_t
 *
èû
 = (c⁄° uöt8_t*)(
d©a
 + 
nblocks
*16);

259 
uöt64_t
 
k1
 = 0;

260 
uöt64_t
 
k2
 = 0;

262 
Àn
 & 15) {

263 15: 
k2
 ^((
uöt64_t
)(
èû
[14])) << 48;

264 14: 
k2
 ^((
uöt64_t
)(
èû
[13])) << 40;

265 13: 
k2
 ^((
uöt64_t
)(
èû
[12])) << 32;

266 12: 
k2
 ^((
uöt64_t
)(
èû
[11])) << 24;

267 11: 
k2
 ^((
uöt64_t
)(
èû
[10])) << 16;

268 10: 
k2
 ^((
uöt64_t
)(
èû
[ 9])) << 8;

269 9: 
k2
 ^((
uöt64_t
)(
èû
[ 8])) << 0;

270 
k2
 *
c2
; k2 = 
	`hash_rŸl_64
(k2, 33); k2 *
c1
; 
h2
 ^= k2;

272 8: 
k1
 ^((
uöt64_t
)(
èû
[ 7])) << 56;

273 7: 
k1
 ^((
uöt64_t
)(
èû
[ 6])) << 48;

274 6: 
k1
 ^((
uöt64_t
)(
èû
[ 5])) << 40;

275 5: 
k1
 ^((
uöt64_t
)(
èû
[ 4])) << 32;

276 4: 
k1
 ^((
uöt64_t
)(
èû
[ 3])) << 24;

277 3: 
k1
 ^((
uöt64_t
)(
èû
[ 2])) << 16;

278 2: 
k1
 ^((
uöt64_t
)(
èû
[ 1])) << 8;

279 1: 
k1
 ^((
uöt64_t
)(
èû
[ 0])) << 0;

280 
k1
 *
c1
; k1 = 
	`hash_rŸl_64
(k1, 31); k1 *
c2
; 
h1
 ^= k1;

285 
h1
 ^
Àn
; 
h2
 ^=Üen;

287 
h1
 +
h2
;

288 
h2
 +
h1
;

290 
h1
 = 
	`hash_fmix_64
(h1);

291 
h2
 = 
	`hash_fmix_64
(h2);

293 
h1
 +
h2
;

294 
h2
 +
h1
;

296 
r_out
[0] = 
h1
;

297 
r_out
[1] = 
h2
;

298 
	}
}

302 
ölöe
 

303 
	$hash
(c⁄° *
key
, 
size_t
 
Àn
, c⁄° 
uöt32_t
 
£ed
, size_à
r_hash
[2]) {

304 
	`as£π
(
Àn
 <
INT_MAX
);

306 #i‡(
LG_SIZEOF_PTR
 =3 && !
	`deföed
(
JEMALLOC_BIG_ENDIAN
))

307 
	`hash_x64_128
(
key
, ()
Àn
, 
£ed
, (
uöt64_t
 *)
r_hash
);

310 
uöt64_t
 
hashes
[2];

311 
	`hash_x86_128
(
key
, ()
Àn
, 
£ed
, 
hashes
);

312 
r_hash
[0] = (
size_t
)
hashes
[0];

313 
r_hash
[1] = (
size_t
)
hashes
[1];

316 
	}
}

	@include/jemalloc/internal/hooks.h

1 #i‚de‡
JEMALLOC_INTERNAL_HOOKS_H


2 
	#JEMALLOC_INTERNAL_HOOKS_H


	)

4 
JEMALLOC_EXPORT
 (*
hooks_¨ía_√w_hook
)();

5 
JEMALLOC_EXPORT
 (*
hooks_libc_hook
)();

7 
	#JEMALLOC_HOOK
(
‚
, 
hook
Ë(()(hook !
NULL
 && (
	`hook
(), 0)), fn)

	)

9 
	#›í
 
	`JEMALLOC_HOOK
(
›í
, 
hooks_libc_hook
)

	)

10 
	#ªad
 
	`JEMALLOC_HOOK
(
ªad
, 
hooks_libc_hook
)

	)

11 
	#wrôe
 
	`JEMALLOC_HOOK
(
wrôe
, 
hooks_libc_hook
)

	)

12 
	#ªadlök
 
	`JEMALLOC_HOOK
(
ªadlök
, 
hooks_libc_hook
)

	)

13 
	#˛o£
 
	`JEMALLOC_HOOK
(
˛o£
, 
hooks_libc_hook
)

	)

14 
	#¸ót
 
	`JEMALLOC_HOOK
(
¸ót
, 
hooks_libc_hook
)

	)

15 
	#£cuª_gëív
 
	`JEMALLOC_HOOK
(
£cuª_gëív
, 
hooks_libc_hook
)

	)

17 
	#_Unwöd_Backåa˚
 
	`JEMALLOC_HOOK
(
_Unwöd_Backåa˚
, 
hooks_libc_hook
)

	)

	@include/jemalloc/internal/jemalloc_internal_decls.h

1 #i‚de‡
JEMALLOC_INTERNAL_DECLS_H


2 
	#JEMALLOC_INTERNAL_DECLS_H


	)

4 
	~<m©h.h
>

5 #ifde‡
_WIN32


6 
	~<wödows.h
>

7 
	~"msvc_com∑t/wödows_exåa.h
"

8 #ifde‡
_WIN64


9 #i‡
LG_VADDR
 <= 32

10 #îr‹ 
Gíî©e
 
the
 
hódîs
 
usög
 
x64
 
vˇrgs


13 #i‡
LG_VADDR
 > 32

14 #unde‡
LG_VADDR


15 
	#LG_VADDR
 32

	)

19 
	~<sys/∑øm.h
>

20 
	~<sys/mm™.h
>

21 #i‡!
deföed
(
__≤a˛__
Ë&& !deföed(
__«tive_˛õ¡__
)

22 
	~<sys/sysˇŒ.h
>

23 #i‡!
deföed
(
SYS_wrôe
Ë&& deföed(
__NR_wrôe
)

24 
	#SYS_wrôe
 
__NR_wrôe


	)

26 #i‡
deföed
(
SYS_›í
Ë&& deföed(
__Ørch64__
)

29 #unde‡
SYS_›í


31 
	~<sys/uio.h
>

33 
	~<±hªad.h
>

34 
	~<sig«l.h
>

35 #ifde‡
JEMALLOC_OS_UNFAIR_LOCK


36 
	~<os/lock.h
>

38 #ifde‡
JEMALLOC_GLIBC_MALLOC_HOOK


39 
	~<sched.h
>

41 
	~<î∫o.h
>

42 
	~<sys/time.h
>

43 
	~<time.h
>

44 #ifde‡
JEMALLOC_HAVE_MACH_ABSOLUTE_TIME


45 
	~<mach/mach_time.h
>

48 
	~<sys/ty≥s.h
>

50 
	~<limôs.h
>

51 #i‚de‡
SIZE_T_MAX


52 
	#SIZE_T_MAX
 
SIZE_MAX


	)

54 #i‚de‡
SSIZE_MAX


55 
	#SSIZE_MAX
 ((
ssize_t
)(
SIZE_T_MAX
 >> 1))

	)

57 
	~<°d¨g.h
>

58 
	~<°dboﬁ.h
>

59 
	~<°dio.h
>

60 
	~<°dlib.h
>

61 
	~<°döt.h
>

62 
	~<°ddef.h
>

63 #i‚de‡
off£tof


64 
	#off£tof
(
ty≥
, 
membî
Ë((
size_t
)&((—y≥ *)
NULL
)->membî))

	)

66 
	~<°rög.h
>

67 
	~<°rögs.h
>

68 
	~<˘y≥.h
>

69 #ifde‡
_MSC_VER


70 
	~<io.h
>

71 
öçå_t
 
	tssize_t
;

72 
	#PATH_MAX
 1024

	)

73 
	#STDERR_FILENO
 2

	)

74 
	#__func__
 
__FUNCTION__


	)

75 #ifde‡
JEMALLOC_HAS_RESTRICT


76 
	#ª°ri˘
 
__ª°ri˘


	)

79 #¥agm®
w¨nög
(
dißbÀ
: 4996)

80 #i‡
_MSC_VER
 < 1800

82 
	$isbœnk
(
c
) {

83  (
c
 == '\t' || c == ' ');

84 
	}
}

87 
	~<uni°d.h
>

89 
	~<f˙é.h
>

	@include/jemalloc/internal/jemalloc_internal_defs.h

2 #i‚de‡
JEMALLOC_INTERNAL_DEFS_H_


3 
	#JEMALLOC_INTERNAL_DEFS_H_


	)

16 
	#JEMALLOC_OVERRIDE___LIBC_CALLOC


	)

17 
	#JEMALLOC_OVERRIDE___LIBC_FREE


	)

18 
	#JEMALLOC_OVERRIDE___LIBC_MALLOC


	)

19 
	#JEMALLOC_OVERRIDE___LIBC_MEMALIGN


	)

20 
	#JEMALLOC_OVERRIDE___LIBC_REALLOC


	)

21 
	#JEMALLOC_OVERRIDE___LIBC_VALLOC


	)

30 
	#JEMALLOC_PRIVATE_NAMESPACE
 
je_


	)

36 
	#CPU_SPINWAIT
 
__asm__
 vﬁ©ûe("∑u£")

	)

38 
	#HAVE_CPU_SPINWAIT
 1

	)

45 
	#LG_VADDR
 48

	)

48 
	#JEMALLOC_C11_ATOMICS
 1

	)

51 
	#JEMALLOC_GCC_ATOMIC_ATOMICS
 1

	)

54 
	#JEMALLOC_GCC_SYNC_ATOMICS
 1

	)

75 
	#JEMALLOC_HAVE_BUILTIN_CLZ


	)

89 
	#JEMALLOC_USE_SYSCALL


	)

94 
	#JEMALLOC_HAVE_SECURE_GETENV


	)

102 
	#JEMALLOC_HAVE_PTHREAD_ATFORK


	)

105 
	#JEMALLOC_HAVE_PTHREAD_SETNAME_NP


	)

110 
	#JEMALLOC_HAVE_CLOCK_MONOTONIC_COARSE
 1

	)

115 
	#JEMALLOC_HAVE_CLOCK_MONOTONIC
 1

	)

136 
	#JEMALLOC_THREADED_INIT


	)

146 
	#JEMALLOC_TLS_MODEL
 
	`__©åibuã__
((
	`és_modñ
("öôül-exec")))

	)

155 
	#JEMALLOC_STATS


	)

158 
	#JEMALLOC_PROF


	)

161 
	#JEMALLOC_PROF_LIBUNWIND


	)

173 
	#JEMALLOC_DSS


	)

176 
	#JEMALLOC_FILL


	)

194 
	#LG_PAGE
 12

	)

201 
	#LG_HUGEPAGE
 21

	)

210 
	#JEMALLOC_MAPS_COALESCE


	)

218 
	#JEMALLOC_RETAIN


	)

221 
	#JEMALLOC_TLS


	)

227 
	#JEMALLOC_INTERNAL_UNREACHABLE
 
__buûtö_uƒóchabÀ


	)

233 
	#JEMALLOC_INTERNAL_FFSLL
 
__buûtö_ff¶l


	)

234 
	#JEMALLOC_INTERNAL_FFSL
 
__buûtö_ff¶


	)

235 
	#JEMALLOC_INTERNAL_FFS
 
__buûtö_ffs


	)

261 
	#JEMALLOC_PROC_SYS_VM_OVERCOMMIT_MEMORY


	)

264 
	#JEMALLOC_HAVE_MADVISE


	)

270 
	#JEMALLOC_HAVE_MADVISE_HUGE


	)

285 
	#JEMALLOC_PURGE_MADVISE_FREE


	)

286 
	#JEMALLOC_PURGE_MADVISE_DONTNEED


	)

287 
	#JEMALLOC_PURGE_MADVISE_DONTNEED_ZEROS


	)

290 
	#JEMALLOC_DEFINE_MADVISE_FREE


	)

295 
	#JEMALLOC_MADVISE_DONTDUMP


	)

301 
	#JEMALLOC_THP


	)

304 
	#JEMALLOC_HAS_ALLOCA_H
 1

	)

307 
	#JEMALLOC_HAS_RESTRICT
 1

	)

313 
	#LG_SIZEOF_INT
 2

	)

316 
	#LG_SIZEOF_LONG
 3

	)

319 
	#LG_SIZEOF_LONG_LONG
 3

	)

322 
	#LG_SIZEOF_INTMAX_T
 3

	)

325 
	#JEMALLOC_GLIBC_MALLOC_HOOK


	)

328 
	#JEMALLOC_GLIBC_MEMALIGN_HOOK


	)

331 
	#JEMALLOC_HAVE_PTHREAD


	)

334 
	#JEMALLOC_HAVE_DLSYM


	)

337 
	#JEMALLOC_HAVE_PTHREAD_MUTEX_ADAPTIVE_NP


	)

340 
	#JEMALLOC_HAVE_SCHED_GETCPU


	)

343 
	#JEMALLOC_HAVE_SCHED_SETAFFINITY


	)

348 
	#JEMALLOC_BACKGROUND_THREAD
 1

	)

357 
	#JEMALLOC_CONFIG_MALLOC_CONF
 ""

	)

360 
	#JEMALLOC_IS_MALLOC
 1

	)

365 
	#JEMALLOC_STRERROR_R_RETURNS_CHAR_WITH_GNU_SOURCE


	)

	@include/jemalloc/internal/jemalloc_internal_externs.h

1 #i‚de‡
JEMALLOC_INTERNAL_EXTERNS_H


2 
	#JEMALLOC_INTERNAL_EXTERNS_H


	)

4 
	~"jemÆloc/öã∫Æ/©omic.h
"

5 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

6 
	~"jemÆloc/öã∫Æ/tsd_ty≥s.h
"

9 
boﬁ
 
mÆloc_¶ow
;

12 
boﬁ
 
›t_ab‹t
;

13 
boﬁ
 
›t_ab‹t_c⁄f
;

14 c⁄° *
›t_junk
;

15 
boﬁ
 
›t_junk_Æloc
;

16 
boﬁ
 
›t_junk_‰ì
;

17 
boﬁ
 
›t_uåa˚
;

18 
boﬁ
 
›t_xmÆloc
;

19 
boﬁ
 
›t_zîo
;

20 
›t_«ª«s
;

23 
n˝us
;

26 
«ª«s_auto
;

32 
©omic_p_t
 
¨ías
[];

34 *
a0mÆloc
(
size_t
 
size
);

35 
a0dÆloc
(*
±r
);

36 *
boŸ°øp_mÆloc
(
size_t
 
size
);

37 *
boŸ°øp_ˇŒoc
(
size_t
 
num
, size_à
size
);

38 
boŸ°øp_‰ì
(*
±r
);

39 
¨ía_£t
(
öd
, 
¨ía_t
 *
¨ía
);

40 
«ª«s_tŸÆ_gë
();

41 
¨ía_t
 *
¨ía_öô
(
tsdn_t
 *
tsdn
, 
öd
, 
exã¡_hooks_t
 *
exã¡_hooks
);

42 
¨ía_td©a_t
 *
¨ía_td©a_gë_h¨d
(
tsd_t
 *
tsd
, 
öd
);

43 
¨ía_t
 *
¨ía_choo£_h¨d
(
tsd_t
 *
tsd
, 
boﬁ
 
öã∫Æ
);

44 
¨ía_migøã
(
tsd_t
 *
tsd
, 
ﬁdöd
, 
√wöd
);

45 
üª«_˛ónup
(
tsd_t
 *
tsd
);

46 
¨ía_˛ónup
(
tsd_t
 *
tsd
);

47 
¨ías_td©a_˛ónup
(
tsd_t
 *
tsd
);

48 
jemÆloc_¥ef‹k
();

49 
jemÆloc_po°f‹k_∑ª¡
();

50 
jemÆloc_po°f‹k_chûd
();

51 
boﬁ
 
mÆloc_öôülized
();

	@include/jemalloc/internal/jemalloc_internal_includes.h

1 #i‚de‡
JEMALLOC_INTERNAL_INCLUDES_H


2 
	#JEMALLOC_INTERNAL_INCLUDES_H


	)

43 
	~"jemÆloc/öã∫Æ/exã¡_ty≥s.h
"

44 
	~"jemÆloc/öã∫Æ/ba£_ty≥s.h
"

45 
	~"jemÆloc/öã∫Æ/¨ía_ty≥s.h
"

46 
	~"jemÆloc/öã∫Æ/tˇche_ty≥s.h
"

47 
	~"jemÆloc/öã∫Æ/¥of_ty≥s.h
"

53 
	~"jemÆloc/öã∫Æ/¨ía_°ru˘s_a.h
"

54 
	~"jemÆloc/öã∫Æ/exã¡_°ru˘s.h
"

55 
	~"jemÆloc/öã∫Æ/ba£_°ru˘s.h
"

56 
	~"jemÆloc/öã∫Æ/¥of_°ru˘s.h
"

57 
	~"jemÆloc/öã∫Æ/¨ía_°ru˘s_b.h
"

58 
	~"jemÆloc/öã∫Æ/tˇche_°ru˘s.h
"

59 
	~"jemÆloc/öã∫Æ/background_thªad_°ru˘s.h
"

65 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_exã∫s.h
"

66 
	~"jemÆloc/öã∫Æ/exã¡_exã∫s.h
"

67 
	~"jemÆloc/öã∫Æ/ba£_exã∫s.h
"

68 
	~"jemÆloc/öã∫Æ/¨ía_exã∫s.h
"

69 
	~"jemÆloc/öã∫Æ/œrge_exã∫s.h
"

70 
	~"jemÆloc/öã∫Æ/tˇche_exã∫s.h
"

71 
	~"jemÆloc/öã∫Æ/¥of_exã∫s.h
"

72 
	~"jemÆloc/öã∫Æ/background_thªad_exã∫s.h
"

78 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ölöes_a.h
"

79 
	~"jemÆloc/öã∫Æ/ba£_ölöes.h
"

84 
	~"jemÆloc/öã∫Æ/¥of_ölöes_a.h
"

85 
	~"jemÆloc/öã∫Æ/¨ía_ölöes_a.h
"

86 
	~"jemÆloc/öã∫Æ/exã¡_ölöes.h
"

87 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ölöes_b.h
"

88 
	~"jemÆloc/öã∫Æ/tˇche_ölöes.h
"

89 
	~"jemÆloc/öã∫Æ/¨ía_ölöes_b.h
"

90 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ölöes_c.h
"

91 
	~"jemÆloc/öã∫Æ/¥of_ölöes_b.h
"

92 
	~"jemÆloc/öã∫Æ/background_thªad_ölöes.h
"

	@include/jemalloc/internal/jemalloc_internal_inlines_a.h

1 #i‚de‡
JEMALLOC_INTERNAL_INLINES_A_H


2 
	#JEMALLOC_INTERNAL_INLINES_A_H


	)

4 
	~"jemÆloc/öã∫Æ/©omic.h
"

5 
	~"jemÆloc/öã∫Æ/bô_utû.h
"

6 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ty≥s.h
"

7 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

8 
	~"jemÆloc/öã∫Æ/tickî.h
"

10 
JEMALLOC_ALWAYS_INLINE
 
mÆloc_˝uid_t


11 
	$mÆloc_gë˝u
() {

12 
	`as£π
(
have_≥r˝u_¨ía
);

13 #i‡
	`deföed
(
JEMALLOC_HAVE_SCHED_GETCPU
)

14  (
mÆloc_˝uid_t
)
	`sched_gë˝u
();

16 
	`nŸ_ªached
();

19 
	}
}

22 
JEMALLOC_ALWAYS_INLINE
 

23 
	$≥r˝u_¨ía_choo£
() {

24 
	`as£π
(
have_≥r˝u_¨ía
 && 
	`PERCPU_ARENA_ENABLED
(
›t_≥r˝u_¨ía
));

26 
mÆloc_˝uid_t
 
˝uid
 = 
	`mÆloc_gë˝u
();

27 
	`as£π
(
˝uid
 >= 0);

29 
¨ía_öd
;

30 i‡((
›t_≥r˝u_¨ía
 =
≥r˝u_¨ía
Ë|| (()
˝uid
 < 
n˝us
 /

32 
¨ía_öd
 = 
˝uid
;

34 
	`as£π
(
›t_≥r˝u_¨ía
 =
≥r_phy˝u_¨ía
);

36 
¨ía_öd
 = 
˝uid
 - 
n˝us
 / 2;

39  
¨ía_öd
;

40 
	}
}

43 
JEMALLOC_ALWAYS_INLINE
 

44 
	$≥r˝u_¨ía_öd_limô
(
≥r˝u_¨ía_mode_t
 
mode
) {

45 
	`as£π
(
have_≥r˝u_¨ía
 && 
	`PERCPU_ARENA_ENABLED
(
mode
));

46 i‡(
mode
 =
≥r_phy˝u_¨ía
 && 
n˝us
 > 1) {

47 i‡(
n˝us
 % 2) {

49  
n˝us
 / 2 + 1;

51  
n˝us
 / 2;

53  
n˝us
;

55 
	}
}

57 
ölöe
 
¨ía_td©a_t
 *

58 
	$¨ía_td©a_gë
(
tsd_t
 *
tsd
, 
öd
, 
boﬁ
 
ª‰esh_if_missög
) {

59 
¨ía_td©a_t
 *
td©a
;

60 
¨ía_td©a_t
 *
¨ías_td©a
 = 
	`tsd_¨ías_td©a_gë
(
tsd
);

62 i‡(
	`u∆ikñy
(
¨ías_td©a
 =
NULL
)) {

64  
	`¨ía_td©a_gë_h¨d
(
tsd
, 
öd
);

66 i‡(
	`u∆ikñy
(
öd
 >
	`tsd_«ª«s_td©a_gë
(
tsd
))) {

71  (
ª‰esh_if_missög
 ? 
	`¨ía_td©a_gë_h¨d
(
tsd
, 
öd
) :

72 
NULL
);

75 
td©a
 = &
¨ías_td©a
[
öd
];

76 i‡(
	`likñy
(
td©a
 !
NULL
Ë|| !
ª‰esh_if_missög
) {

77  
td©a
;

79  
	`¨ía_td©a_gë_h¨d
(
tsd
, 
öd
);

80 
	}
}

82 
ölöe
 
¨ía_t
 *

83 
	$¨ía_gë
(
tsdn_t
 *
tsdn
, 
öd
, 
boﬁ
 
öô_if_missög
) {

84 
¨ía_t
 *
ªt
;

86 
	`as£π
(
öd
 < 
MALLOCX_ARENA_LIMIT
);

88 
ªt
 = (
¨ía_t
 *)
	`©omic_lﬂd_p
(&
¨ías
[
öd
], 
ATOMIC_ACQUIRE
);

89 i‡(
	`u∆ikñy
(
ªt
 =
NULL
)) {

90 i‡(
öô_if_missög
) {

91 
ªt
 = 
	`¨ía_öô
(
tsdn
, 
öd
,

92 (
exã¡_hooks_t
 *)&
exã¡_hooks_deÁu…
);

95  
ªt
;

96 
	}
}

98 
ölöe
 
tickî_t
 *

99 
	$deˇy_tickî_gë
(
tsd_t
 *
tsd
, 
öd
) {

100 
¨ía_td©a_t
 *
td©a
;

102 
td©a
 = 
	`¨ía_td©a_gë
(
tsd
, 
öd
, 
åue
);

103 i‡(
	`u∆ikñy
(
td©a
 =
NULL
)) {

104  
NULL
;

106  &
td©a
->
deˇy_tickî
;

107 
	}
}

109 
JEMALLOC_ALWAYS_INLINE
 
ˇche_bö_t
 *

110 
	$tˇche_smÆl_bö_gë
(
tˇche_t
 *
tˇche
, 
szöd_t
 
bööd
) {

111 
	`as£π
(
bööd
 < 
NBINS
);

112  &
tˇche
->
bös_smÆl
[
bööd
];

113 
	}
}

115 
JEMALLOC_ALWAYS_INLINE
 
ˇche_bö_t
 *

116 
	$tˇche_œrge_bö_gë
(
tˇche_t
 *
tˇche
, 
szöd_t
 
bööd
) {

117 
	`as£π
(
bööd
 >
NBINS
 &&bööd < 
nhbös
);

118  &
tˇche
->
bös_œrge
[
bööd
 - 
NBINS
];

119 
	}
}

121 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


122 
	$tˇche_avaûabÀ
(
tsd_t
 *
tsd
) {

128 i‡(
	`likñy
(
	`tsd_tˇche_íabÀd_gë
(
tsd
))) {

130 
	`as£π
(
	`tsd_tˇchï_gë
(
tsd
)->
¨ía
 =
NULL
 ||

131 
	`tˇche_smÆl_bö_gë
(
	`tsd_tˇchï_gë
(
tsd
), 0)->
avaû
 !=

132 
NULL
);

133  
åue
;

136  
Ál£
;

137 
	}
}

139 
JEMALLOC_ALWAYS_INLINE
 
tˇche_t
 *

140 
	$tˇche_gë
(
tsd_t
 *
tsd
) {

141 i‡(!
	`tˇche_avaûabÀ
(
tsd
)) {

142  
NULL
;

145  
	`tsd_tˇchï_gë
(
tsd
);

146 
	}
}

148 
ölöe
 

149 
	$¥e_ªíå™cy
(
tsd_t
 *
tsd
, 
¨ía_t
 *
¨ía
) {

151 
	`as£π
(
¨ía
 !
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 0, 
Ál£
));

153 
boﬁ
 
Á°
 = 
	`tsd_Á°
(
tsd
);

154 
	`as£π
(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
Ë< 
INT8_MAX
);

155 ++*
	`tsd_ªíå™cy_Àvñp_gë
(
tsd
);

156 i‡(
Á°
) {

158 
	`tsd_¶ow_upd©e
(
tsd
);

159 
	`as£π
(
tsd
->
°©e
 =
tsd_°©e_nomöÆ_¶ow
);

161 
	}
}

163 
ölöe
 

164 
	$po°_ªíå™cy
(
tsd_t
 *
tsd
) {

165 
öt8_t
 *
ªíå™cy_Àvñ
 = 
	`tsd_ªíå™cy_Àvñp_gë
(
tsd
);

166 
	`as£π
(*
ªíå™cy_Àvñ
 > 0);

167 i‡(--*
ªíå™cy_Àvñ
 == 0) {

168 
	`tsd_¶ow_upd©e
(
tsd
);

170 
	}
}

	@include/jemalloc/internal/jemalloc_internal_inlines_b.h

1 #i‚de‡
JEMALLOC_INTERNAL_INLINES_B_H


2 
	#JEMALLOC_INTERNAL_INLINES_B_H


	)

4 
	~"jemÆloc/öã∫Æ/πªe.h
"

7 
ölöe
 
¨ía_t
 *

8 
	$¨ía_choo£_im∂
(
tsd_t
 *
tsd
, 
¨ía_t
 *
¨ía
, 
boﬁ
 
öã∫Æ
) {

9 
¨ía_t
 *
ªt
;

11 i‡(
¨ía
 !
NULL
) {

12  
¨ía
;

16 i‡(
	`u∆ikñy
(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) > 0)) {

17  
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 0, 
åue
);

20 
ªt
 = 
öã∫Æ
 ? 
	`tsd_üª«_gë
(
tsd
Ë: 
	`tsd_¨ía_gë
(tsd);

21 i‡(
	`u∆ikñy
(
ªt
 =
NULL
)) {

22 
ªt
 = 
	`¨ía_choo£_h¨d
(
tsd
, 
öã∫Æ
);

23 
	`as£π
(
ªt
);

24 i‡(
	`tˇche_avaûabÀ
(
tsd
)) {

25 
tˇche_t
 *
tˇche
 = 
	`tˇche_gë
(
tsd
);

26 i‡(
tˇche
->
¨ía
 !
NULL
) {

28 
	`as£π
(
tˇche
->
¨ía
 ==

29 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 0, 
Ál£
));

30 i‡(
tˇche
->
¨ía
 !
ªt
) {

31 
	`tˇche_¨ía_ªassocüã
(
	`tsd_tsdn
(
tsd
),

32 
tˇche
, 
ªt
);

35 
	`tˇche_¨ía_assocüã
(
	`tsd_tsdn
(
tsd
), 
tˇche
,

36 
ªt
);

46 i‡(
have_≥r˝u_¨ía
 && 
	`PERCPU_ARENA_ENABLED
(
›t_≥r˝u_¨ía
) &&

47 !
öã∫Æ
 && (
	`¨ía_öd_gë
(
ªt
) <

48 
	`≥r˝u_¨ía_öd_limô
(
›t_≥r˝u_¨ía
)Ë&& (
ªt
->
œ°_thd
 !=

49 
	`tsd_tsdn
(
tsd
))) {

50 
öd
 = 
	`≥r˝u_¨ía_choo£
();

51 i‡(
	`¨ía_öd_gë
(
ªt
Ë!
öd
) {

52 
	`≥r˝u_¨ía_upd©e
(
tsd
, 
öd
);

53 
ªt
 = 
	`tsd_¨ía_gë
(
tsd
);

55 
ªt
->
œ°_thd
 = 
	`tsd_tsdn
(
tsd
);

58  
ªt
;

59 
	}
}

61 
ölöe
 
¨ía_t
 *

62 
	$¨ía_choo£
(
tsd_t
 *
tsd
, 
¨ía_t
 *
¨ía
) {

63  
	`¨ía_choo£_im∂
(
tsd
, 
¨ía
, 
Ál£
);

64 
	}
}

66 
ölöe
 
¨ía_t
 *

67 
	$¨ía_ichoo£
(
tsd_t
 *
tsd
, 
¨ía_t
 *
¨ía
) {

68  
	`¨ía_choo£_im∂
(
tsd
, 
¨ía
, 
åue
);

69 
	}
}

71 
ölöe
 
boﬁ


72 
	$¨ía_is_auto
(
¨ía_t
 *
¨ía
) {

73 
	`as£π
(
«ª«s_auto
 > 0);

74  (
	`¨ía_öd_gë
(
¨ía
Ë< 
«ª«s_auto
);

75 
	}
}

77 
JEMALLOC_ALWAYS_INLINE
 
exã¡_t
 *

78 
	$õÆloc
(
tsdn_t
 *
tsdn
, c⁄° *
±r
) {

79 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

80 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

82  
	`πªe_exã¡_ªad
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

83 (
uöçå_t
)
±r
, 
åue
);

84 
	}
}

	@include/jemalloc/internal/jemalloc_internal_inlines_c.h

1 #i‚de‡
JEMALLOC_INTERNAL_INLINES_C_H


2 
	#JEMALLOC_INTERNAL_INLINES_C_H


	)

4 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ty≥s.h
"

5 
	~"jemÆloc/öã∫Æ/sz.h
"

6 
	~"jemÆloc/öã∫Æ/wô√ss.h
"

26 
JEMALLOC_ALWAYS_INLINE
 
¨ía_t
 *

27 
	$üÆloc
(
tsdn_t
 *
tsdn
, c⁄° *
±r
) {

28 
	`as£π
(
±r
 !
NULL
);

30  
	`¨ía_ØŒoc
(
tsdn
, 
±r
);

31 
	}
}

33 
JEMALLOC_ALWAYS_INLINE
 
size_t


34 
	$ißŒoc
(
tsdn_t
 *
tsdn
, c⁄° *
±r
) {

35 
	`as£π
(
±r
 !
NULL
);

37  
	`¨ía_ßŒoc
(
tsdn
, 
±r
);

38 
	}
}

40 
JEMALLOC_ALWAYS_INLINE
 *

41 
	$üŒocztm
(
tsdn_t
 *
tsdn
, 
size_t
 
size
, 
szöd_t
 
öd
, 
boﬁ
 
zîo
, 
tˇche_t
 *
tˇche
,

42 
boﬁ
 
is_öã∫Æ
, 
¨ía_t
 *
¨ía
, boﬁ 
¶ow_∑th
) {

43 *
ªt
;

45 
	`as£π
(
size
 != 0);

46 
	`as£π
(!
is_öã∫Æ
 || 
tˇche
 =
NULL
);

47 
	`as£π
(!
is_öã∫Æ
 || 
¨ía
 =
NULL
 || 
	`¨ía_is_auto
(arena));

48 i‡(!
	`tsdn_nuŒ
(
tsdn
Ë&& 
	`tsd_ªíå™cy_Àvñ_gë
(
	`tsdn_tsd
(tsdn)) == 0) {

49 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

50 
WITNESS_RANK_CORE
, 0);

53 
ªt
 = 
	`¨ía_mÆloc
(
tsdn
, 
¨ía
, 
size
, 
öd
, 
zîo
, 
tˇche
, 
¶ow_∑th
);

54 i‡(
c⁄fig_°©s
 && 
is_öã∫Æ
 && 
	`likñy
(
ªt
 !
NULL
)) {

55 
	`¨ía_öã∫Æ_add
(
	`üÆloc
(
tsdn
, 
ªt
), 
	`ißŒoc
(tsdn,Ñet));

57  
ªt
;

58 
	}
}

60 
JEMALLOC_ALWAYS_INLINE
 *

61 
	$üŒoc
(
tsd_t
 *
tsd
, 
size_t
 
size
, 
szöd_t
 
öd
, 
boﬁ
 
zîo
, boﬁ 
¶ow_∑th
) {

62  
	`üŒocztm
(
	`tsd_tsdn
(
tsd
), 
size
, 
öd
, 
zîo
, 
	`tˇche_gë
—sd), 
Ál£
,

63 
NULL
, 
¶ow_∑th
);

64 
	}
}

66 
JEMALLOC_ALWAYS_INLINE
 *

67 
	$ùÆlocztm
(
tsdn_t
 *
tsdn
, 
size_t
 
usize
, size_à
Æignmít
, 
boﬁ
 
zîo
,

68 
tˇche_t
 *
tˇche
, 
boﬁ
 
is_öã∫Æ
, 
¨ía_t
 *
¨ía
) {

69 *
ªt
;

71 
	`as£π
(
usize
 != 0);

72 
	`as£π
(
usize
 =
	`sz_ß2u
(usize, 
Æignmít
));

73 
	`as£π
(!
is_öã∫Æ
 || 
tˇche
 =
NULL
);

74 
	`as£π
(!
is_öã∫Æ
 || 
¨ía
 =
NULL
 || 
	`¨ía_is_auto
(arena));

75 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

76 
WITNESS_RANK_CORE
, 0);

78 
ªt
 = 
	`¨ía_∑Œoc
(
tsdn
, 
¨ía
, 
usize
, 
Æignmít
, 
zîo
, 
tˇche
);

79 
	`as£π
(
	`ALIGNMENT_ADDR2BASE
(
ªt
, 
Æignmít
) ==Ñet);

80 i‡(
c⁄fig_°©s
 && 
is_öã∫Æ
 && 
	`likñy
(
ªt
 !
NULL
)) {

81 
	`¨ía_öã∫Æ_add
(
	`üÆloc
(
tsdn
, 
ªt
), 
	`ißŒoc
(tsdn,Ñet));

83  
ªt
;

84 
	}
}

86 
JEMALLOC_ALWAYS_INLINE
 *

87 
	$ùÆlo˘
(
tsdn_t
 *
tsdn
, 
size_t
 
usize
, size_à
Æignmít
, 
boﬁ
 
zîo
,

88 
tˇche_t
 *
tˇche
, 
¨ía_t
 *
¨ía
) {

89  
	`ùÆlocztm
(
tsdn
, 
usize
, 
Æignmít
, 
zîo
, 
tˇche
, 
Ál£
, 
¨ía
);

90 
	}
}

92 
JEMALLOC_ALWAYS_INLINE
 *

93 
	$ùÆloc
(
tsd_t
 *
tsd
, 
size_t
 
usize
, size_à
Æignmít
, 
boﬁ
 
zîo
) {

94  
	`ùÆlocztm
(
	`tsd_tsdn
(
tsd
), 
usize
, 
Æignmít
, 
zîo
,

95 
	`tˇche_gë
(
tsd
), 
Ál£
, 
NULL
);

96 
	}
}

98 
JEMALLOC_ALWAYS_INLINE
 
size_t


99 
	$ivßŒoc
(
tsdn_t
 *
tsdn
, c⁄° *
±r
) {

100  
	`¨ía_vßŒoc
(
tsdn
, 
±r
);

101 
	}
}

103 
JEMALLOC_ALWAYS_INLINE
 

104 
	$idÆlo˘m
(
tsdn_t
 *
tsdn
, *
±r
, 
tˇche_t
 *
tˇche
, 
Æloc_˘x_t
 *
Æloc_˘x
,

105 
boﬁ
 
is_öã∫Æ
, boﬁ 
¶ow_∑th
) {

106 
	`as£π
(
±r
 !
NULL
);

107 
	`as£π
(!
is_öã∫Æ
 || 
tˇche
 =
NULL
);

108 
	`as£π
(!
is_öã∫Æ
 || 
	`¨ía_is_auto
(
	`üÆloc
(
tsdn
, 
±r
)));

109 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

110 
WITNESS_RANK_CORE
, 0);

111 i‡(
c⁄fig_°©s
 && 
is_öã∫Æ
) {

112 
	`¨ía_öã∫Æ_sub
(
	`üÆloc
(
tsdn
, 
±r
), 
	`ißŒoc
(tsdn,Ötr));

114 i‡(!
is_öã∫Æ
 && !
	`tsdn_nuŒ
(
tsdn
) &&

115 
	`tsd_ªíå™cy_Àvñ_gë
(
	`tsdn_tsd
(
tsdn
)) != 0) {

116 
	`as£π
(
tˇche
 =
NULL
);

118 
	`¨ía_dÆloc
(
tsdn
, 
±r
, 
tˇche
, 
Æloc_˘x
, 
¶ow_∑th
);

119 
	}
}

121 
JEMALLOC_ALWAYS_INLINE
 

122 
	$idÆloc
(
tsd_t
 *
tsd
, *
±r
) {

123 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
±r
, 
	`tˇche_gë
—sd), 
NULL
, 
Ál£
, 
åue
);

124 
	}
}

126 
JEMALLOC_ALWAYS_INLINE
 

127 
	$isdÆlo˘
(
tsdn_t
 *
tsdn
, *
±r
, 
size_t
 
size
, 
tˇche_t
 *
tˇche
,

128 
Æloc_˘x_t
 *
Æloc_˘x
, 
boﬁ
 
¶ow_∑th
) {

129 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

130 
WITNESS_RANK_CORE
, 0);

131 
	`¨ía_sdÆloc
(
tsdn
, 
±r
, 
size
, 
tˇche
, 
Æloc_˘x
, 
¶ow_∑th
);

132 
	}
}

134 
JEMALLOC_ALWAYS_INLINE
 *

135 
	$úÆlo˘_ªÆign
(
tsdn_t
 *
tsdn
, *
±r
, 
size_t
 
ﬁdsize
, size_à
size
,

136 
size_t
 
exåa
, size_à
Æignmít
, 
boﬁ
 
zîo
, 
tˇche_t
 *
tˇche
,

137 
¨ía_t
 *
¨ía
) {

138 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

139 
WITNESS_RANK_CORE
, 0);

140 *
p
;

141 
size_t
 
usize
, 
c›ysize
;

143 
usize
 = 
	`sz_ß2u
(
size
 + 
exåa
, 
Æignmít
);

144 i‡(
	`u∆ikñy
(
usize
 =0 || usizê> 
LARGE_MAXCLASS
)) {

145  
NULL
;

147 
p
 = 
	`ùÆlo˘
(
tsdn
, 
usize
, 
Æignmít
, 
zîo
, 
tˇche
, 
¨ía
);

148 i‡(
p
 =
NULL
) {

149 i‡(
exåa
 == 0) {

150  
NULL
;

153 
usize
 = 
	`sz_ß2u
(
size
, 
Æignmít
);

154 i‡(
	`u∆ikñy
(
usize
 =0 || usizê> 
LARGE_MAXCLASS
)) {

155  
NULL
;

157 
p
 = 
	`ùÆlo˘
(
tsdn
, 
usize
, 
Æignmít
, 
zîo
, 
tˇche
, 
¨ía
);

158 i‡(
p
 =
NULL
) {

159  
NULL
;

166 
c›ysize
 = (
size
 < 
ﬁdsize
) ? size : oldsize;

167 
	`mem˝y
(
p
, 
±r
, 
c›ysize
);

168 
	`isdÆlo˘
(
tsdn
, 
±r
, 
ﬁdsize
, 
tˇche
, 
NULL
, 
åue
);

169  
p
;

170 
	}
}

172 
JEMALLOC_ALWAYS_INLINE
 *

173 
	$úÆlo˘
(
tsdn_t
 *
tsdn
, *
±r
, 
size_t
 
ﬁdsize
, size_à
size
, size_à
Æignmít
,

174 
boﬁ
 
zîo
, 
tˇche_t
 *
tˇche
, 
¨ía_t
 *
¨ía
) {

175 
	`as£π
(
±r
 !
NULL
);

176 
	`as£π
(
size
 != 0);

177 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

178 
WITNESS_RANK_CORE
, 0);

180 i‡(
Æignmít
 !0 && ((
uöçå_t
)
±r
 & ((uintptr_t)alignment-1))

186  
	`úÆlo˘_ªÆign
(
tsdn
, 
±r
, 
ﬁdsize
, 
size
, 0, 
Æignmít
,

187 
zîo
, 
tˇche
, 
¨ía
);

190  
	`¨ía_øŒoc
(
tsdn
, 
¨ía
, 
±r
, 
ﬁdsize
, 
size
, 
Æignmít
, 
zîo
,

191 
tˇche
);

192 
	}
}

194 
JEMALLOC_ALWAYS_INLINE
 *

195 
	$úÆloc
(
tsd_t
 *
tsd
, *
±r
, 
size_t
 
ﬁdsize
, size_à
size
, size_à
Æignmít
,

196 
boﬁ
 
zîo
) {

197  
	`úÆlo˘
(
	`tsd_tsdn
(
tsd
), 
±r
, 
ﬁdsize
, 
size
, 
Æignmít
, 
zîo
,

198 
	`tˇche_gë
(
tsd
), 
NULL
);

199 
	}
}

201 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


202 
	$ixÆloc
(
tsdn_t
 *
tsdn
, *
±r
, 
size_t
 
ﬁdsize
, size_à
size
, size_à
exåa
,

203 
size_t
 
Æignmít
, 
boﬁ
 
zîo
) {

204 
	`as£π
(
±r
 !
NULL
);

205 
	`as£π
(
size
 != 0);

206 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

207 
WITNESS_RANK_CORE
, 0);

209 i‡(
Æignmít
 !0 && ((
uöçå_t
)
±r
 & ((uintptr_t)alignment-1))

212  
åue
;

215  
	`¨ía_øŒoc_no_move
(
tsdn
, 
±r
, 
ﬁdsize
, 
size
, 
exåa
, 
zîo
);

216 
	}
}

	@include/jemalloc/internal/jemalloc_internal_macros.h

1 #i‚de‡
JEMALLOC_INTERNAL_MACROS_H


2 
	#JEMALLOC_INTERNAL_MACROS_H


	)

4 #ifde‡
JEMALLOC_DEBUG


5 
	#JEMALLOC_ALWAYS_INLINE
 
ölöe


	)

7 
	#JEMALLOC_ALWAYS_INLINE
 
	`JEMALLOC_ATTR
(
Æways_ölöe
Ë
ölöe


	)

9 #ifde‡
_MSC_VER


10 
	#ölöe
 
_ölöe


	)

13 
	#UNUSED
 
	`JEMALLOC_ATTR
(
unu£d
)

	)

15 
	#ZU
(
z
Ë((
size_t
)z)

	)

16 
	#ZD
(
z
Ë((
ssize_t
)z)

	)

17 
	#QU
(
q
Ë((
uöt64_t
)q)

	)

18 
	#QD
(
q
Ë((
öt64_t
)q)

	)

20 
	#KZU
(
z
Ë
	`ZU
(z##
ULL
)

	)

21 
	#KZD
(
z
Ë
	`ZD
(z##
LL
)

	)

22 
	#KQU
(
q
Ë
	`QU
(q##
ULL
)

	)

23 
	#KQD
(
q
Ë
	`QI
(q##
LL
)

	)

25 #i‚de‡
__DECONST


26 
	#__DECONST
(
ty≥
, 
v¨
Ë(—y≥)(
uöçå_t
)(c⁄° *)(v¨))

	)

29 #i‡!
deföed
(
JEMALLOC_HAS_RESTRICT
Ë|| deföed(
__˝lu•lus
)

30 
	#ª°ri˘


	)

34 #ifde‡
JEMALLOC_JET


35 
	#JET_MUTABLE


	)

37 
	#JET_MUTABLE
 c⁄°

	)

40 
	#JEMALLOC_VA_ARGS_HEAD
(
hód
, ...Ë
	)
head

41 
	#JEMALLOC_VA_ARGS_TAIL
(
hód
, ...Ë
__VA_ARGS__


	)

	@include/jemalloc/internal/jemalloc_internal_types.h

1 #i‚de‡
JEMALLOC_INTERNAL_TYPES_H


2 
	#JEMALLOC_INTERNAL_TYPES_H


	)

5 
	tpszöd_t
;

8 
	tszöd_t
;

11 
	tmÆloc_˝uid_t
;

24 
	#MALLOCX_ARENA_BITS
 12

	)

25 
	#MALLOCX_TCACHE_BITS
 12

	)

26 
	#MALLOCX_LG_ALIGN_BITS
 6

	)

27 
	#MALLOCX_ARENA_SHIFT
 20

	)

28 
	#MALLOCX_TCACHE_SHIFT
 8

	)

29 
	#MALLOCX_ARENA_MASK
 \

30 (((1 << 
MALLOCX_ARENA_BITS
Ë- 1Ë<< 
MALLOCX_ARENA_SHIFT
)

	)

32 
	#MALLOCX_ARENA_LIMIT
 ((1 << 
MALLOCX_ARENA_BITS
Ë- 1)

	)

33 
	#MALLOCX_TCACHE_MASK
 \

34 (((1 << 
MALLOCX_TCACHE_BITS
Ë- 1Ë<< 
MALLOCX_TCACHE_SHIFT
)

	)

35 
	#MALLOCX_TCACHE_MAX
 ((1 << 
MALLOCX_TCACHE_BITS
Ë- 3)

	)

36 
	#MALLOCX_LG_ALIGN_MASK
 ((1 << 
MALLOCX_LG_ALIGN_BITS
Ë- 1)

	)

38 
	#MALLOCX_ALIGN_GET_SPECIFIED
(
Êags
) \

39 (
	`ZU
(1Ë<< (
Êags
 & 
MALLOCX_LG_ALIGN_MASK
))

	)

40 
	#MALLOCX_ALIGN_GET
(
Êags
) \

41 (
	`MALLOCX_ALIGN_GET_SPECIFIED
(
Êags
Ë& (
SIZE_T_MAX
-1))

	)

42 
	#MALLOCX_ZERO_GET
(
Êags
) \

43 ((
boﬁ
)(
Êags
 & 
MALLOCX_ZERO
))

	)

45 
	#MALLOCX_TCACHE_GET
(
Êags
) \

46 ((()((
Êags
 & 
MALLOCX_TCACHE_MASK
Ë>> 
MALLOCX_TCACHE_SHIFT
)Ë- 2)

	)

47 
	#MALLOCX_ARENA_GET
(
Êags
) \

48 ((()((()
Êags
Ë>> 
MALLOCX_ARENA_SHIFT
)Ë- 1)

	)

51 
	#TINY_MIN
 (1U << 
LG_TINY_MIN
)

	)

57 #i‚de‡
LG_QUANTUM


58 #i‡(
deföed
(
__i386__
Ë|| deföed(
_M_IX86
))

59 
	#LG_QUANTUM
 4

	)

61 #ifde‡
__ü64__


62 
	#LG_QUANTUM
 4

	)

64 #ifde‡
__Æpha__


65 
	#LG_QUANTUM
 4

	)

67 #i‡(
deföed
(
__•¨c64__
Ë|| deföed(
__•¨cv9
Ë|| deföed(
__•¨c_v9__
))

68 
	#LG_QUANTUM
 4

	)

70 #i‡(
deföed
(
__amd64__
Ë|| deföed(
__x86_64__
Ë|| deföed(
_M_X64
))

71 
	#LG_QUANTUM
 4

	)

73 #ifde‡
__¨m__


74 
	#LG_QUANTUM
 3

	)

76 #ifde‡
__Ørch64__


77 
	#LG_QUANTUM
 4

	)

79 #ifde‡
__hµa__


80 
	#LG_QUANTUM
 4

	)

82 #ifde‡
__m68k__


83 
	#LG_QUANTUM
 3

	)

85 #ifde‡
__mùs__


86 
	#LG_QUANTUM
 3

	)

88 #ifde‡
__nios2__


89 
	#LG_QUANTUM
 3

	)

91 #ifde‡
__‹1k__


92 
	#LG_QUANTUM
 3

	)

94 #ifde‡
__powîpc__


95 
	#LG_QUANTUM
 4

	)

97 #i‡
deföed
(
__riscv
Ë|| deföed(
__riscv__
)

98 
	#LG_QUANTUM
 4

	)

100 #ifde‡
__s390__


101 
	#LG_QUANTUM
 4

	)

103 #i‡(
deföed
 (
__SH3E__
Ë|| deföed(
__SH4_SINGLE__
Ë|| deföed(
__SH4__
) || \

104 
	$deföed
(
__SH4_SINGLE_ONLY__
))

105 
	#LG_QUANTUM
 4

	)

107 #ifde‡
__tûe__


108 
	#LG_QUANTUM
 4

	)

110 #ifde‡
__À32__


111 
	#LG_QUANTUM
 4

	)

113 #i‚de‡
LG_QUANTUM


119 
	#QUANTUM
 ((
size_t
)(1U << 
LG_QUANTUM
))

	)

120 
	#QUANTUM_MASK
 (
QUANTUM
 - 1)

	)

123 
	#QUANTUM_CEILING
(
a
) \

124 (((
a
Ë+ 
QUANTUM_MASK
Ë& ~QUANTUM_MASK)

	)

126 
	#LONG
 ((
size_t
)(1U << 
LG_SIZEOF_LONG
))

	)

127 
	#LONG_MASK
 (
LONG
 - 1)

	)

130 
	#LONG_CEILING
(
a
) \

131 (((
a
Ë+ 
LONG_MASK
Ë& ~LONG_MASK)

	)

133 
	#SIZEOF_PTR
 (1U << 
LG_SIZEOF_PTR
)

	)

134 
	#PTR_MASK
 (
SIZEOF_PTR
 - 1)

	)

137 
	#PTR_CEILING
(
a
) \

138 (((
a
Ë+ 
PTR_MASK
Ë& ~PTR_MASK)

	)

147 
	#LG_CACHELINE
 6

	)

148 
	#CACHELINE
 64

	)

149 
	#CACHELINE_MASK
 (
CACHELINE
 - 1)

	)

152 
	#CACHELINE_CEILING
(
s
) \

153 (((
s
Ë+ 
CACHELINE_MASK
Ë& ~CACHELINE_MASK)

	)

156 
	#ALIGNMENT_ADDR2BASE
(
a
, 
Æignmít
) \

157 ((*)((
uöçå_t
)(
a
Ë& ((~(
Æignmít
)Ë+ 1)))

	)

160 
	#ALIGNMENT_ADDR2OFFSET
(
a
, 
Æignmít
) \

161 ((
size_t
)((
uöçå_t
)(
a
Ë& (
Æignmít
 - 1)))

	)

164 
	#ALIGNMENT_CEILING
(
s
, 
Æignmít
) \

165 (((
s
Ë+ (
Æignmít
 - 1)Ë& ((~◊lignmít)Ë+ 1))

	)

168 #i‡
__STDC_VERSION__
 < 199901L

169 #ifde‡
_MSC_VER


170 
	~<mÆloc.h
>

171 
	#Æloˇ
 
_Æloˇ


	)

173 #ifde‡
JEMALLOC_HAS_ALLOCA_H


174 
	~<Æloˇ.h
>

176 
	~<°dlib.h
>

179 
	#VARIABLE_ARRAY
(
ty≥
, 
«me
, 
cou¡
) \

180 
ty≥
 *
«me
 = 
	`Æloˇ
(—y≥Ë* (
cou¡
))

	)

182 
	#VARIABLE_ARRAY
(
ty≥
, 
«me
, 
cou¡
Ëty≥Çame[(cou¡)]

	)

	@include/jemalloc/internal/jemalloc_preamble.h

1 #i‚de‡
JEMALLOC_PREAMBLE_H


2 
	#JEMALLOC_PREAMBLE_H


	)

4 
	~"jemÆloc_öã∫Æ_defs.h
"

5 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_de˛s.h
"

7 #ifde‡
JEMALLOC_UTRACE


8 
	~<sys/kåa˚.h
>

11 
	#JEMALLOC_NO_DEMANGLE


	)

12 #ifde‡
JEMALLOC_JET


13 #unde‡
JEMALLOC_IS_MALLOC


14 
	#JEMALLOC_N
(
n
Ë
jë_
##
	)
n

15 
	~"jemÆloc/öã∫Æ/public_«me•a˚.h
"

16 
	#JEMALLOC_NO_RENAME


	)

17 
	~"../jemÆloc.h
"

18 #unde‡
JEMALLOC_NO_RENAME


20 
	#JEMALLOC_N
(
n
Ë
je_
##
	)
n

21 
	~"../jemÆloc.h
"

24 #i‡(
deföed
(
JEMALLOC_OSATOMIC
Ë|| deföed(
JEMALLOC_OSSPIN
))

25 
	~<libkîn/OSAtomic.h
>

28 #ifde‡
JEMALLOC_ZONE


29 
	~<mach/mach_îr‹.h
>

30 
	~<mach/mach_öô.h
>

31 
	~<mach/vm_m≠.h
>

34 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ma¸os.h
"

41 #i‚de‡
JEMALLOC_NO_PRIVATE_NAMESPACE


42 #i‚de‡
JEMALLOC_JET


43 
	~"jemÆloc/öã∫Æ/¥iv©e_«me•a˚.h
"

45 
	~"jemÆloc/öã∫Æ/¥iv©e_«me•a˚_jë.h
"

48 
	~"jemÆloc/öã∫Æ/hooks.h
"

50 #ifde‡
JEMALLOC_DEFINE_MADVISE_FREE


51 
	#JEMALLOC_MADV_FREE
 8

	)

54 c⁄° 
boﬁ
 
	gc⁄fig_debug
 =

55 #ifde‡
JEMALLOC_DEBUG


56 
åue


58 
Ál£


61 c⁄° 
boﬁ
 
	ghave_dss
 =

62 #ifde‡
JEMALLOC_DSS


63 
åue


65 
Ál£


68 c⁄° 
boﬁ
 
	ghave_madvi£_huge
 =

69 #ifde‡
JEMALLOC_HAVE_MADVISE_HUGE


70 
åue


72 
Ál£


75 c⁄° 
boﬁ
 
	gc⁄fig_fûl
 =

76 #ifde‡
JEMALLOC_FILL


77 
åue


79 
Ál£


82 c⁄° 
boﬁ
 
	gc⁄fig_œzy_lock
 =

83 #ifde‡
JEMALLOC_LAZY_LOCK


84 
åue


86 
Ál£


89 c⁄° * c⁄° 
	gc⁄fig_mÆloc_c⁄f
 = 
JEMALLOC_CONFIG_MALLOC_CONF
;

90 c⁄° 
boﬁ
 
	gc⁄fig_¥of
 =

91 #ifde‡
JEMALLOC_PROF


92 
åue


94 
Ál£


97 c⁄° 
boﬁ
 
	gc⁄fig_¥of_libgcc
 =

98 #ifde‡
JEMALLOC_PROF_LIBGCC


99 
åue


101 
Ál£


104 c⁄° 
boﬁ
 
	gc⁄fig_¥of_libunwöd
 =

105 #ifde‡
JEMALLOC_PROF_LIBUNWIND


106 
åue


108 
Ál£


111 c⁄° 
boﬁ
 
	gm≠s_cﬂÀs˚
 =

112 #ifde‡
JEMALLOC_MAPS_COALESCE


113 
åue


115 
Ál£


118 c⁄° 
boﬁ
 
	gc⁄fig_°©s
 =

119 #ifde‡
JEMALLOC_STATS


120 
åue


122 
Ál£


125 c⁄° 
boﬁ
 
	gc⁄fig_thp
 =

126 #ifde‡
JEMALLOC_THP


127 
åue


129 
Ál£


132 c⁄° 
boﬁ
 
	gc⁄fig_és
 =

133 #ifde‡
JEMALLOC_TLS


134 
åue


136 
Ál£


139 c⁄° 
boﬁ
 
	gc⁄fig_uåa˚
 =

140 #ifde‡
JEMALLOC_UTRACE


141 
åue


143 
Ál£


146 c⁄° 
boﬁ
 
	gc⁄fig_xmÆloc
 =

147 #ifde‡
JEMALLOC_XMALLOC


148 
åue


150 
Ál£


153 c⁄° 
boﬁ
 
	gc⁄fig_ˇche_oblivious
 =

154 #ifde‡
JEMALLOC_CACHE_OBLIVIOUS


155 
åue


157 
Ál£


164 c⁄° 
boﬁ
 
	gc⁄fig_log
 =

165 #ifde‡
JEMALLOC_LOG


166 
åue


168 
Ál£


171 #ifde‡
JEMALLOC_HAVE_SCHED_GETCPU


173 
	#JEMALLOC_PERCPU_ARENA


	)

175 c⁄° 
boﬁ
 
	ghave_≥r˝u_¨ía
 =

176 #ifde‡
JEMALLOC_PERCPU_ARENA


177 
åue


179 
Ál£


186 c⁄° 
boﬁ
 
	gf‹˚_ivßŒoc
 =

187 #ifde‡
JEMALLOC_FORCE_IVSALLOC


188 
åue


190 
Ál£


193 c⁄° 
boﬁ
 
	ghave_background_thªad
 =

194 #ifde‡
JEMALLOC_BACKGROUND_THREAD


195 
åue


197 
Ál£


	@include/jemalloc/internal/large_externs.h

1 #i‚de‡
JEMALLOC_INTERNAL_LARGE_EXTERNS_H


2 
	#JEMALLOC_INTERNAL_LARGE_EXTERNS_H


	)

4 *
œrge_mÆloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
usize
, 
boﬁ
 
zîo
);

5 *
œrge_∑Œoc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
usize
, size_à
Æignmít
,

6 
boﬁ
 
zîo
);

7 
boﬁ
 
œrge_øŒoc_no_move
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
, 
size_t
 
usize_mö
,

8 
size_t
 
usize_max
, 
boﬁ
 
zîo
);

9 *
œrge_øŒoc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
exã¡
, 
size_t
 
usize
,

10 
size_t
 
Æignmít
, 
boﬁ
 
zîo
, 
tˇche_t
 *
tˇche
);

12 (
	tœrge_dÆloc_junk_t
)(*, 
	tsize_t
);

13 
œrge_dÆloc_junk_t
 *
JET_MUTABLE
 
œrge_dÆloc_junk
;

15 (
	tœrge_dÆloc_maybe_junk_t
)(*, 
	tsize_t
);

16 
œrge_dÆloc_maybe_junk_t
 *
JET_MUTABLE
 
œrge_dÆloc_maybe_junk
;

18 
	`œrge_dÆloc_¥ï_junked_locked
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
);

19 
	`œrge_dÆloc_föish
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
);

20 
	`œrge_dÆloc
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
);

21 
size_t
 
	`œrge_ßŒoc
(
tsdn_t
 *
tsdn
, c⁄° 
exã¡_t
 *
exã¡
);

22 
¥of_t˘x_t
 *
	`œrge_¥of_t˘x_gë
(
tsdn_t
 *
tsdn
, c⁄° 
exã¡_t
 *
exã¡
);

23 
	`œrge_¥of_t˘x_£t
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
, 
¥of_t˘x_t
 *
t˘x
);

24 
	`œrge_¥of_t˘x_ª£t
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
);

	@include/jemalloc/internal/log.h

1 #i‚de‡
JEMALLOC_INTERNAL_LOG_H


2 
	#JEMALLOC_INTERNAL_LOG_H


	)

4 
	~"jemÆloc/öã∫Æ/©omic.h
"

5 
	~"jemÆloc/öã∫Æ/mÆloc_io.h
"

6 
	~"jemÆloc/öã∫Æ/muãx.h
"

8 #ifde‡
JEMALLOC_LOG


9 
	#JEMALLOC_LOG_VAR_BUFSIZE
 1000

	)

11 
	#JEMALLOC_LOG_VAR_BUFSIZE
 1

	)

14 
	#JEMALLOC_LOG_BUFSIZE
 4096

	)

38 
log_v¨_«mes
[
JEMALLOC_LOG_VAR_BUFSIZE
];

39 
©omic_b_t
 
log_öô_d⁄e
;

41 
log_v¨_s
 
	tlog_v¨_t
;

42 
	slog_v¨_s
 {

47 
©omic_u_t
 
	m°©e
;

48 c⁄° *
	m«me
;

51 
	#LOG_NOT_INITIALIZED
 0U

	)

52 
	#LOG_INITIALIZED_NOT_ENABLED
 1U

	)

53 
	#LOG_ENABLED
 2U

	)

55 
	#LOG_VAR_INIT
(
«me_°r
Ë{
	`ATOMIC_INIT
(
LOG_NOT_INITIALIZED
),Çame_°r}

	)

62 
log_v¨_upd©e_°©e
(
log_v¨_t
 *
log_v¨
);

65 
	#log_do_begö
(
log_v¨
) \

66 i‡(
c⁄fig_log
) { \

67 
log_°©e
 = 
	`©omic_lﬂd_u
(&(
log_v¨
).
°©e
, \

68 
ATOMIC_RELAXED
); \

69 i‡(
	`u∆ikñy
(
log_°©e
 =
LOG_NOT_INITIALIZED
)) { \

70 
log_°©e
 = 
	`log_v¨_upd©e_°©e
(&(
log_v¨
)); \

71 
	`as£π
(
log_°©e
 !
LOG_NOT_INITIALIZED
); \

73 i‡(
log_°©e
 =
LOG_ENABLED
) { \

74 {

	)

76 
	#log_do_íd
(
log_v¨
) \

79 }

	)

88 
ölöe
 

89 
	$log_im∂_v¨¨gs
(c⁄° *
«me
, ...) {

90 
buf
[
JEMALLOC_LOG_BUFSIZE
];

91 
va_li°
 
≠
;

93 
	`va_°¨t
(
≠
, 
«me
);

94 c⁄° *
f‹m©
 = 
	`va_¨g
(
≠
, const *);

95 
size_t
 
d°_off£t
 = 0;

96 
d°_off£t
 +
	`mÆloc_¢¥ötf
(
buf
, 
JEMALLOC_LOG_BUFSIZE
, "%s: ", 
«me
);

97 
d°_off£t
 +
	`mÆloc_v¢¥ötf
(
buf
 + dst_offset,

98 
JEMALLOC_LOG_BUFSIZE
 - 
d°_off£t
, 
f‹m©
, 
≠
);

99 
d°_off£t
 +
	`mÆloc_¢¥ötf
(
buf
 + dst_offset,

100 
JEMALLOC_LOG_BUFSIZE
 - 
d°_off£t
, "\n");

101 
	`va_íd
(
≠
);

103 
	`mÆloc_wrôe
(
buf
);

104 
	}
}

107 
	#LOG
(
log_v¨_°r
, ...) \

109 
log_v¨_t
 
log_v¨
 = 
	`LOG_VAR_INIT
(
log_v¨_°r
); \

110 
	`log_do_begö
(
log_v¨
) \

111 
	`log_im∂_v¨¨gs
((
log_v¨
).
«me
, 
__VA_ARGS__
); \

112 
	`log_do_íd
(
log_v¨
) \

113 } 0)

	)

	@include/jemalloc/internal/malloc_io.h

1 #i‚de‡
JEMALLOC_INTERNAL_MALLOC_IO_H


2 
	#JEMALLOC_INTERNAL_MALLOC_IO_H


	)

4 #ifde‡
_WIN32


5 #ifde‡
_WIN64


6 
	#FMT64_PREFIX
 "Œ"

	)

7 
	#FMTPTR_PREFIX
 "Œ"

	)

9 
	#FMT64_PREFIX
 "Œ"

	)

10 
	#FMTPTR_PREFIX
 ""

	)

12 
	#FMTd32
 "d"

	)

13 
	#FMTu32
 "u"

	)

14 
	#FMTx32
 "x"

	)

15 
	#FMTd64
 
FMT64_PREFIX
 "d"

	)

16 
	#FMTu64
 
FMT64_PREFIX
 "u"

	)

17 
	#FMTx64
 
FMT64_PREFIX
 "x"

	)

18 
	#FMTdPTR
 
FMTPTR_PREFIX
 "d"

	)

19 
	#FMTuPTR
 
FMTPTR_PREFIX
 "u"

	)

20 
	#FMTxPTR
 
FMTPTR_PREFIX
 "x"

	)

22 
	~<öây≥s.h
>

23 
	#FMTd32
 
PRId32


	)

24 
	#FMTu32
 
PRIu32


	)

25 
	#FMTx32
 
PRIx32


	)

26 
	#FMTd64
 
PRId64


	)

27 
	#FMTu64
 
PRIu64


	)

28 
	#FMTx64
 
PRIx64


	)

29 
	#FMTdPTR
 
PRIdPTR


	)

30 
	#FMTuPTR
 
PRIuPTR


	)

31 
	#FMTxPTR
 
PRIxPTR


	)

35 
	#BUFERROR_BUF
 64

	)

41 
	#MALLOC_PRINTF_BUFSIZE
 4096

	)

43 
bu„º‹
(
îr
, *
buf
, 
size_t
 
buÊí
);

44 
uötmax_t
 
mÆloc_°πoumax
(c⁄° *
ª°ri˘
 
≈å
, **ª°ri˘ 
íd±r
,

45 
ba£
);

46 
mÆloc_wrôe
(c⁄° *
s
);

52 
size_t
 
mÆloc_v¢¥ötf
(*
°r
, size_à
size
, c⁄° *
f‹m©
,

53 
va_li°
 
≠
);

54 
size_t
 
	$mÆloc_¢¥ötf
(*
°r
, 
size_t
 
size
, c⁄° *
f‹m©
, ...)

55 
	`JEMALLOC_FORMAT_PRINTF
(3, 4);

60 
	`mÆloc_v˝rötf
((*
wrôe_cb
)(*, c⁄° *), *
cb›aque
,

61 c⁄° *
f‹m©
, 
va_li°
 
≠
);

62 
	$mÆloc_˝rötf
((*
wrôe_cb
)(*, c⁄° *), *
cb›aque
,

63 c⁄° *
f‹m©
, ...Ë
	`JEMALLOC_FORMAT_PRINTF
(3, 4);

64 
	$mÆloc_¥ötf
(c⁄° *
f‹m©
, ...Ë
	`JEMALLOC_FORMAT_PRINTF
(1, 2);

	@include/jemalloc/internal/mutex.h

1 #i‚de‡
JEMALLOC_INTERNAL_MUTEX_H


2 
	#JEMALLOC_INTERNAL_MUTEX_H


	)

4 
	~"jemÆloc/öã∫Æ/©omic.h
"

5 
	~"jemÆloc/öã∫Æ/muãx_¥of.h
"

6 
	~"jemÆloc/öã∫Æ/tsd.h
"

7 
	~"jemÆloc/öã∫Æ/wô√ss.h
"

11 
	mmÆloc_muãx_ønk_ex˛usive
,

16 
	mmÆloc_muãx_addªss_‹dîed


17 } 
	tmÆloc_muãx_lock_‹dî_t
;

19 
mÆloc_muãx_s
 
	tmÆloc_muãx_t
;

20 
	smÆloc_muãx_s
 {

31 
muãx_¥of_d©a_t
 
	m¥of_d©a
;

32 #ifde‡
_WIN32


33 #i‡
_WIN32_WINNT
 >= 0x0600

34 
SRWLOCK
 
	mlock
;

36 
CRITICAL_SECTION
 
	mlock
;

38 #ñi‡(
deföed
(
JEMALLOC_OS_UNFAIR_LOCK
))

39 
os_unÁú_lock
 
	mlock
;

40 #ñi‡(
deföed
(
JEMALLOC_OSSPIN
))

41 
OSSpöLock
 
	mlock
;

42 #ñi‡(
deföed
(
JEMALLOC_MUTEX_INIT_CB
))

43 
±hªad_muãx_t
 
	mlock
;

44 
mÆloc_muãx_t
 *
	mpo°p⁄ed_√xt
;

46 
±hªad_muãx_t
 
	mlock
;

55 #i‡!
deföed
(
JEMALLOC_DEBUG
)

56 
wô√ss_t
 
	mwô√ss
;

57 
mÆloc_muãx_lock_‹dî_t
 
	mlock_‹dî
;

61 #i‡
deföed
(
JEMALLOC_DEBUG
)

62 
wô√ss_t
 
	mwô√ss
;

63 
mÆloc_muãx_lock_‹dî_t
 
	mlock_‹dî
;

71 
	#MALLOC_MUTEX_MAX_SPIN
 250

	)

73 #ifde‡
_WIN32


74 #i‡
_WIN32_WINNT
 >= 0x0600

75 
	#MALLOC_MUTEX_LOCK
(
m
Ë
	`AcquúeSRWLockEx˛usive
(&(m)->
lock
)

	)

76 
	#MALLOC_MUTEX_UNLOCK
(
m
Ë
	`Rñó£SRWLockEx˛usive
(&(m)->
lock
)

	)

77 
	#MALLOC_MUTEX_TRYLOCK
(
m
Ë(!
	`TryAcquúeSRWLockEx˛usive
(&(m)->
lock
))

	)

79 
	#MALLOC_MUTEX_LOCK
(
m
Ë
	`E¡îCrôiˇlSe˘i⁄
(&(m)->
lock
)

	)

80 
	#MALLOC_MUTEX_UNLOCK
(
m
Ë
	`LóveCrôiˇlSe˘i⁄
(&(m)->
lock
)

	)

81 
	#MALLOC_MUTEX_TRYLOCK
(
m
Ë(!
	`TryE¡îCrôiˇlSe˘i⁄
(&(m)->
lock
))

	)

83 #ñi‡(
deföed
(
JEMALLOC_OS_UNFAIR_LOCK
))

84 
	#MALLOC_MUTEX_LOCK
(
m
Ë
	`os_unÁú_lock_lock
(&(m)->
lock
)

	)

85 
	#MALLOC_MUTEX_UNLOCK
(
m
Ë
	`os_unÁú_lock_u∆ock
(&(m)->
lock
)

	)

86 
	#MALLOC_MUTEX_TRYLOCK
(
m
Ë(!
	`os_unÁú_lock_åylock
(&(m)->
lock
))

	)

87 #ñi‡(
deföed
(
JEMALLOC_OSSPIN
))

88 
	#MALLOC_MUTEX_LOCK
(
m
Ë
	`OSSpöLockLock
(&(m)->
lock
)

	)

89 
	#MALLOC_MUTEX_UNLOCK
(
m
Ë
	`OSSpöLockU∆ock
(&(m)->
lock
)

	)

90 
	#MALLOC_MUTEX_TRYLOCK
(
m
Ë(!
	`OSSpöLockTry
(&(m)->
lock
))

	)

92 
	#MALLOC_MUTEX_LOCK
(
m
Ë
	`±hªad_muãx_lock
(&(m)->
lock
)

	)

93 
	#MALLOC_MUTEX_UNLOCK
(
m
Ë
	`±hªad_muãx_u∆ock
(&(m)->
lock
)

	)

94 
	#MALLOC_MUTEX_TRYLOCK
(
m
Ë(
	`±hªad_muãx_åylock
(&(m)->
lock
Ë!0)

	)

97 
	#LOCK_PROF_DATA_INITIALIZER
 \

98 {
NSTIME_ZERO_INITIALIZER
, NSTIME_ZERO_INITIALIZER, 0, 0, 0, \

99 
	`ATOMIC_INIT
(0), 0, 
NULL
, 0}

	)

101 #ifde‡
_WIN32


102 
	#MALLOC_MUTEX_INITIALIZER


	)

103 #ñi‡(
deföed
(
JEMALLOC_OS_UNFAIR_LOCK
))

104 
	#MALLOC_MUTEX_INITIALIZER
 \

105 {{{
LOCK_PROF_DATA_INITIALIZER
, 
OS_UNFAIR_LOCK_INIT
}}, \

106 
	`WITNESS_INITIALIZER
("muãx", 
WITNESS_RANK_OMIT
)}

	)

107 #ñi‡(
deföed
(
JEMALLOC_OSSPIN
))

108 
	#MALLOC_MUTEX_INITIALIZER
 \

109 {{{
LOCK_PROF_DATA_INITIALIZER
, 0}}, \

110 
	`WITNESS_INITIALIZER
("muãx", 
WITNESS_RANK_OMIT
)}

	)

111 #ñi‡(
deföed
(
JEMALLOC_MUTEX_INIT_CB
))

112 
	#MALLOC_MUTEX_INITIALIZER
 \

113 {{{
LOCK_PROF_DATA_INITIALIZER
, 
PTHREAD_MUTEX_INITIALIZER
, 
NULL
}}, \

114 
	`WITNESS_INITIALIZER
("muãx", 
WITNESS_RANK_OMIT
)}

	)

116 
	#MALLOC_MUTEX_TYPE
 
PTHREAD_MUTEX_DEFAULT


	)

117 
	#MALLOC_MUTEX_INITIALIZER
 \

118 {{{
LOCK_PROF_DATA_INITIALIZER
, 
PTHREAD_MUTEX_INITIALIZER
}}, \

119 
	`WITNESS_INITIALIZER
("muãx", 
WITNESS_RANK_OMIT
)}

	)

122 #ifde‡
JEMALLOC_LAZY_LOCK


123 
boﬁ
 
i°hªaded
;

125 #unde‡
i°hªaded


126 
	#i°hªaded
 
åue


	)

129 
boﬁ
 
mÆloc_muãx_öô
(
mÆloc_muãx_t
 *
muãx
, c⁄° *
«me
,

130 
wô√ss_ønk_t
 
ønk
, 
mÆloc_muãx_lock_‹dî_t
 
lock_‹dî
);

131 
mÆloc_muãx_¥ef‹k
(
tsdn_t
 *
tsdn
, 
mÆloc_muãx_t
 *
muãx
);

132 
mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
, 
mÆloc_muãx_t
 *
muãx
);

133 
mÆloc_muãx_po°f‹k_chûd
(
tsdn_t
 *
tsdn
, 
mÆloc_muãx_t
 *
muãx
);

134 
boﬁ
 
mÆloc_muãx_boŸ
();

135 
mÆloc_muãx_¥of_d©a_ª£t
(
tsdn_t
 *
tsdn
, 
mÆloc_muãx_t
 *
muãx
);

137 
mÆloc_muãx_lock_¶ow
(
mÆloc_muãx_t
 *
muãx
);

139 
ölöe
 

140 
	$mÆloc_muãx_lock_föÆ
(
mÆloc_muãx_t
 *
muãx
) {

141 
	`MALLOC_MUTEX_LOCK
(
muãx
);

142 
	}
}

144 
ölöe
 
boﬁ


145 
	$mÆloc_muãx_åylock_föÆ
(
mÆloc_muãx_t
 *
muãx
) {

146  
	`MALLOC_MUTEX_TRYLOCK
(
muãx
);

147 
	}
}

149 
ölöe
 

150 
	$muãx_ow√r_°©s_upd©e
(
tsdn_t
 *
tsdn
, 
mÆloc_muãx_t
 *
muãx
) {

151 i‡(
c⁄fig_°©s
) {

152 
muãx_¥of_d©a_t
 *
d©a
 = &
muãx
->
¥of_d©a
;

153 
d©a
->
n_lock_›s
++;

154 i‡(
d©a
->
¥ev_ow√r
 !
tsdn
) {

155 
d©a
->
¥ev_ow√r
 = 
tsdn
;

156 
d©a
->
n_ow√r_swôches
++;

159 
	}
}

162 
ölöe
 
boﬁ


163 
	$mÆloc_muãx_åylock
(
tsdn_t
 *
tsdn
, 
mÆloc_muãx_t
 *
muãx
) {

164 
	`wô√ss_as£π_nŸ_ow√r
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
), &
muãx
->
wô√ss
);

165 i‡(
i°hªaded
) {

166 i‡(
	`mÆloc_muãx_åylock_föÆ
(
muãx
)) {

167  
åue
;

169 
	`muãx_ow√r_°©s_upd©e
(
tsdn
, 
muãx
);

171 
	`wô√ss_lock
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
), &
muãx
->
wô√ss
);

173  
Ál£
;

174 
	}
}

177 
ölöe
 

178 
	$mÆloc_muãx_¥of_mîge
(
muãx_¥of_d©a_t
 *
sum
, muãx_¥of_d©a_à*
d©a
) {

179 
	`n°ime_add
(&
sum
->
tŸ_waô_time
, &
d©a
->tot_wait_time);

180 i‡(
	`n°ime_com∑ª
(&
sum
->
max_waô_time
, &
d©a
->max_wait_time) < 0) {

181 
	`n°ime_c›y
(&
sum
->
max_waô_time
, &
d©a
->max_wait_time);

184 
sum
->
n_waô_times
 +
d©a
->n_wait_times;

185 
sum
->
n_•ö_acquúed
 +
d©a
->n_spin_acquired;

187 i‡(
sum
->
max_n_thds
 < 
d©a
->max_n_thds) {

188 
sum
->
max_n_thds
 = 
d©a
->max_n_thds;

190 
uöt32_t
 
cur_n_waôög_thds
 = 
	`©omic_lﬂd_u32
(&
sum
->
n_waôög_thds
,

191 
ATOMIC_RELAXED
);

192 
uöt32_t
 
√w_n_waôög_thds
 = 
cur_n_waôög_thds
 + 
	`©omic_lﬂd_u32
(

193 &
d©a
->
n_waôög_thds
, 
ATOMIC_RELAXED
);

194 
	`©omic_°‹e_u32
(&
sum
->
n_waôög_thds
, 
√w_n_waôög_thds
,

195 
ATOMIC_RELAXED
);

196 
sum
->
n_ow√r_swôches
 +
d©a
->n_owner_switches;

197 
sum
->
n_lock_›s
 +
d©a
->n_lock_ops;

198 
	}
}

200 
ölöe
 

201 
	$mÆloc_muãx_lock
(
tsdn_t
 *
tsdn
, 
mÆloc_muãx_t
 *
muãx
) {

202 
	`wô√ss_as£π_nŸ_ow√r
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
), &
muãx
->
wô√ss
);

203 i‡(
i°hªaded
) {

204 i‡(
	`mÆloc_muãx_åylock_föÆ
(
muãx
)) {

205 
	`mÆloc_muãx_lock_¶ow
(
muãx
);

207 
	`muãx_ow√r_°©s_upd©e
(
tsdn
, 
muãx
);

209 
	`wô√ss_lock
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
), &
muãx
->
wô√ss
);

210 
	}
}

212 
ölöe
 

213 
	$mÆloc_muãx_u∆ock
(
tsdn_t
 *
tsdn
, 
mÆloc_muãx_t
 *
muãx
) {

214 
	`wô√ss_u∆ock
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
), &
muãx
->
wô√ss
);

215 i‡(
i°hªaded
) {

216 
	`MALLOC_MUTEX_UNLOCK
(
muãx
);

218 
	}
}

220 
ölöe
 

221 
	$mÆloc_muãx_as£π_ow√r
(
tsdn_t
 *
tsdn
, 
mÆloc_muãx_t
 *
muãx
) {

222 
	`wô√ss_as£π_ow√r
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
), &
muãx
->
wô√ss
);

223 
	}
}

225 
ölöe
 

226 
	$mÆloc_muãx_as£π_nŸ_ow√r
(
tsdn_t
 *
tsdn
, 
mÆloc_muãx_t
 *
muãx
) {

227 
	`wô√ss_as£π_nŸ_ow√r
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
), &
muãx
->
wô√ss
);

228 
	}
}

231 
ölöe
 

232 
	$mÆloc_muãx_¥of_ªad
(
tsdn_t
 *
tsdn
, 
muãx_¥of_d©a_t
 *
d©a
,

233 
mÆloc_muãx_t
 *
muãx
) {

234 
muãx_¥of_d©a_t
 *
sour˚
 = &
muãx
->
¥of_d©a
;

236 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, 
muãx
);

243 *
d©a
 = *
sour˚
;

245 
	`©omic_°‹e_u32
(&
d©a
->
n_waôög_thds
, 0, 
ATOMIC_RELAXED
);

246 
	}
}

	@include/jemalloc/internal/mutex_pool.h

1 #i‚de‡
JEMALLOC_INTERNAL_MUTEX_POOL_H


2 
	#JEMALLOC_INTERNAL_MUTEX_POOL_H


	)

4 
	~"jemÆloc/öã∫Æ/hash.h
"

5 
	~"jemÆloc/öã∫Æ/muãx.h
"

6 
	~"jemÆloc/öã∫Æ/wô√ss.h
"

9 
	#MUTEX_POOL_SIZE
 256

	)

11 
muãx_poﬁ_s
 
	tmuãx_poﬁ_t
;

12 
	smuãx_poﬁ_s
 {

13 
mÆloc_muãx_t
 
	mmuãxes
[
MUTEX_POOL_SIZE
];

16 
boﬁ
 
muãx_poﬁ_öô
(
muãx_poﬁ_t
 *
poﬁ
, c⁄° *
«me
, 
wô√ss_ønk_t
 
ønk
);

19 
ölöe
 
mÆloc_muãx_t
 *

20 
	$muãx_poﬁ_muãx
(
muãx_poﬁ_t
 *
poﬁ
, 
uöçå_t
 
key
) {

21 
size_t
 
hash_ªsu…
[2];

22 
	`hash
(&
key
, (key), 0xd50dcc1b, 
hash_ªsu…
);

23  &
poﬁ
->
muãxes
[
hash_ªsu…
[0] % 
MUTEX_POOL_SIZE
];

24 
	}
}

26 
ölöe
 

27 
	$muãx_poﬁ_as£π_nŸ_hñd
(
tsdn_t
 *
tsdn
, 
muãx_poﬁ_t
 *
poﬁ
) {

28 
i
 = 0; i < 
MUTEX_POOL_SIZE
; i++) {

29 
	`mÆloc_muãx_as£π_nŸ_ow√r
(
tsdn
, &
poﬁ
->
muãxes
[
i
]);

31 
	}
}

40 
ölöe
 

41 
	$muãx_poﬁ_lock
(
tsdn_t
 *
tsdn
, 
muãx_poﬁ_t
 *
poﬁ
, 
uöçå_t
 
key
) {

42 
	`muãx_poﬁ_as£π_nŸ_hñd
(
tsdn
, 
poﬁ
);

44 
mÆloc_muãx_t
 *
muãx
 = 
	`muãx_poﬁ_muãx
(
poﬁ
, 
key
);

45 
	`mÆloc_muãx_lock
(
tsdn
, 
muãx
);

46 
	}
}

48 
ölöe
 

49 
	$muãx_poﬁ_u∆ock
(
tsdn_t
 *
tsdn
, 
muãx_poﬁ_t
 *
poﬁ
, 
uöçå_t
 
key
) {

50 
mÆloc_muãx_t
 *
muãx
 = 
	`muãx_poﬁ_muãx
(
poﬁ
, 
key
);

51 
	`mÆloc_muãx_u∆ock
(
tsdn
, 
muãx
);

53 
	`muãx_poﬁ_as£π_nŸ_hñd
(
tsdn
, 
poﬁ
);

54 
	}
}

56 
ölöe
 

57 
	$muãx_poﬁ_lock2
(
tsdn_t
 *
tsdn
, 
muãx_poﬁ_t
 *
poﬁ
, 
uöçå_t
 
key1
,

58 
uöçå_t
 
key2
) {

59 
	`muãx_poﬁ_as£π_nŸ_hñd
(
tsdn
, 
poﬁ
);

61 
mÆloc_muãx_t
 *
muãx1
 = 
	`muãx_poﬁ_muãx
(
poﬁ
, 
key1
);

62 
mÆloc_muãx_t
 *
muãx2
 = 
	`muãx_poﬁ_muãx
(
poﬁ
, 
key2
);

63 i‡((
uöçå_t
)
muãx1
 < (uöçå_t)
muãx2
) {

64 
	`mÆloc_muãx_lock
(
tsdn
, 
muãx1
);

65 
	`mÆloc_muãx_lock
(
tsdn
, 
muãx2
);

66 } i‡((
uöçå_t
)
muãx1
 =(uöçå_t)
muãx2
) {

67 
	`mÆloc_muãx_lock
(
tsdn
, 
muãx1
);

69 
	`mÆloc_muãx_lock
(
tsdn
, 
muãx2
);

70 
	`mÆloc_muãx_lock
(
tsdn
, 
muãx1
);

72 
	}
}

74 
ölöe
 

75 
	$muãx_poﬁ_u∆ock2
(
tsdn_t
 *
tsdn
, 
muãx_poﬁ_t
 *
poﬁ
, 
uöçå_t
 
key1
,

76 
uöçå_t
 
key2
) {

77 
mÆloc_muãx_t
 *
muãx1
 = 
	`muãx_poﬁ_muãx
(
poﬁ
, 
key1
);

78 
mÆloc_muãx_t
 *
muãx2
 = 
	`muãx_poﬁ_muãx
(
poﬁ
, 
key2
);

79 i‡(
muãx1
 =
muãx2
) {

80 
	`mÆloc_muãx_u∆ock
(
tsdn
, 
muãx1
);

82 
	`mÆloc_muãx_u∆ock
(
tsdn
, 
muãx1
);

83 
	`mÆloc_muãx_u∆ock
(
tsdn
, 
muãx2
);

86 
	`muãx_poﬁ_as£π_nŸ_hñd
(
tsdn
, 
poﬁ
);

87 
	}
}

89 
ölöe
 

90 
	$muãx_poﬁ_as£π_ow√r
(
tsdn_t
 *
tsdn
, 
muãx_poﬁ_t
 *
poﬁ
, 
uöçå_t
 
key
) {

91 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, 
	`muãx_poﬁ_muãx
(
poﬁ
, 
key
));

92 
	}
}

	@include/jemalloc/internal/mutex_prof.h

1 #i‚de‡
JEMALLOC_INTERNAL_MUTEX_PROF_H


2 
	#JEMALLOC_INTERNAL_MUTEX_PROF_H


	)

4 
	~"jemÆloc/öã∫Æ/©omic.h
"

5 
	~"jemÆloc/öã∫Æ/n°ime.h
"

6 
	~"jemÆloc/öã∫Æ/tsd_ty≥s.h
"

8 
	#MUTEX_PROF_GLOBAL_MUTEXES
 \

9 
	`OP
(
background_thªad
) \

10 
	`OP
(
˘l
) \

11 
	`OP
(
¥of
)

	)

14 
	#OP
(
mtx
Ë
globÆ_¥of_muãx_
##mtx,

	)

15 
	mMUTEX_PROF_GLOBAL_MUTEXES


16 #unde‡
OP


17 
	mmuãx_¥of_num_globÆ_muãxes


18 } 
	tmuãx_¥of_globÆ_öd_t
;

20 
	#MUTEX_PROF_ARENA_MUTEXES
 \

21 
	`OP
(
œrge
) \

22 
	`OP
(
exã¡_avaû
) \

23 
	`OP
(
exã¡s_dúty
) \

24 
	`OP
(
exã¡s_muzzy
) \

25 
	`OP
(
exã¡s_ªèöed
) \

26 
	`OP
(
deˇy_dúty
) \

27 
	`OP
(
deˇy_muzzy
) \

28 
	`OP
(
ba£
) \

29 
	`OP
(
tˇche_li°
)

	)

32 
	#OP
(
mtx
Ë
¨ía_¥of_muãx_
##mtx,

	)

33 
	mMUTEX_PROF_ARENA_MUTEXES


34 #unde‡
OP


35 
	mmuãx_¥of_num_¨ía_muãxes


36 } 
	tmuãx_¥of_¨ía_öd_t
;

38 
	#MUTEX_PROF_UINT64_COUNTERS
 \

39 
	`OP
(
num_›s
, 
uöt64_t
) \

40 
	`OP
(
num_waô
, 
uöt64_t
) \

41 
	`OP
(
num_•ö_acq
, 
uöt64_t
) \

42 
	`OP
(
num_ow√r_swôch
, 
uöt64_t
) \

43 
	`OP
(
tŸÆ_waô_time
, 
uöt64_t
) \

44 
	`OP
(
max_waô_time
, 
uöt64_t
)

	)

46 
	#MUTEX_PROF_UINT32_COUNTERS
 \

47 
	`OP
(
max_num_thds
, 
uöt32_t
)

	)

49 
	#MUTEX_PROF_COUNTERS
 \

50 
MUTEX_PROF_UINT64_COUNTERS
 \

51 
MUTEX_PROF_UINT32_COUNTERS


	)

53 
	#OP
(
cou¡î
, 
ty≥
Ë
muãx_cou¡î_
##cou¡î,

	)

55 
	#COUNTER_ENUM
(
cou¡î_li°
, 
t
) \

57 
cou¡î_li°
 \

58 
muãx_¥of_num_
##
t
##
_cou¡îs
 \

59 } 
	tmuãx_¥of_
##
	tt
##
	t_cou¡î_öd_t
;

	)

61 
	$COUNTER_ENUM
(
MUTEX_PROF_UINT64_COUNTERS
, 
uöt64_t
)

62 
	$COUNTER_ENUM
(
MUTEX_PROF_UINT32_COUNTERS
, 
uöt32_t
)

64 #unde‡
COUNTER_ENUM


65 #unde‡
OP


73 
n°ime_t
 
tŸ_waô_time
;

75 
n°ime_t
 
max_waô_time
;

77 
uöt64_t
 
n_waô_times
;

79 
uöt64_t
 
n_•ö_acquúed
;

81 
uöt32_t
 
max_n_thds
;

83 
©omic_u32_t
 
n_waôög_thds
;

92 
uöt64_t
 
n_ow√r_swôches
;

94 
tsdn_t
 *
¥ev_ow√r
;

96 
uöt64_t
 
n_lock_›s
;

97 } 
	tmuãx_¥of_d©a_t
;

	@include/jemalloc/internal/nstime.h

1 #i‚de‡
JEMALLOC_INTERNAL_NSTIME_H


2 
	#JEMALLOC_INTERNAL_NSTIME_H


	)

5 
	#NSTIME_SEC_MAX
 
	`KQU
(18446744072)

	)

6 
	#NSTIME_ZERO_INITIALIZER
 {0}

	)

9 
uöt64_t
 
	mns
;

10 } 
	tn°ime_t
;

12 
n°ime_öô
(
n°ime_t
 *
time
, 
uöt64_t
 
ns
);

13 
n°ime_öô2
(
n°ime_t
 *
time
, 
uöt64_t
 
£c
, uöt64_à
n£c
);

14 
uöt64_t
 
n°ime_ns
(c⁄° 
n°ime_t
 *
time
);

15 
uöt64_t
 
n°ime_£c
(c⁄° 
n°ime_t
 *
time
);

16 
uöt64_t
 
n°ime_m£c
(c⁄° 
n°ime_t
 *
time
);

17 
uöt64_t
 
n°ime_n£c
(c⁄° 
n°ime_t
 *
time
);

18 
n°ime_c›y
(
n°ime_t
 *
time
, c⁄°Ç°ime_à*
sour˚
);

19 
n°ime_com∑ª
(c⁄° 
n°ime_t
 *
a
, c⁄°Ç°ime_à*
b
);

20 
n°ime_add
(
n°ime_t
 *
time
, c⁄°Ç°ime_à*
addíd
);

21 
n°ime_üdd
(
n°ime_t
 *
time
, 
uöt64_t
 
addíd
);

22 
n°ime_subåa˘
(
n°ime_t
 *
time
, c⁄°Ç°ime_à*
subåahíd
);

23 
n°ime_isubåa˘
(
n°ime_t
 *
time
, 
uöt64_t
 
subåahíd
);

24 
n°ime_imu…ùly
(
n°ime_t
 *
time
, 
uöt64_t
 
mu…ùlõr
);

25 
n°ime_idivide
(
n°ime_t
 *
time
, 
uöt64_t
 
divis‹
);

26 
uöt64_t
 
n°ime_divide
(c⁄° 
n°ime_t
 *
time
, c⁄°Ç°ime_à*
divis‹
);

28 
	$boﬁ
 (
	tn°ime_m⁄Ÿ⁄ic_t
)();

29 
n°ime_m⁄Ÿ⁄ic_t
 *
JET_MUTABLE
 
n°ime_m⁄Ÿ⁄ic
;

31 
	$boﬁ
 (
	tn°ime_upd©e_t
)(
	tn°ime_t
 *);

32 
n°ime_upd©e_t
 *
JET_MUTABLE
 
n°ime_upd©e
;

	@include/jemalloc/internal/pages.h

1 #i‚de‡
JEMALLOC_INTERNAL_PAGES_EXTERNS_H


2 
	#JEMALLOC_INTERNAL_PAGES_EXTERNS_H


	)

5 #ifde‡
PAGE_MASK


6 #unde‡
PAGE_MASK


8 
	#PAGE
 ((
size_t
)(1U << 
LG_PAGE
))

	)

9 
	#PAGE_MASK
 ((
size_t
)(
PAGE
 - 1))

	)

11 
	#PAGE_ADDR2BASE
(
a
) \

12 ((*)((
uöçå_t
)(
a
Ë& ~
PAGE_MASK
))

	)

14 
	#PAGE_CEILING
(
s
) \

15 (((
s
Ë+ 
PAGE_MASK
Ë& ~PAGE_MASK)

	)

18 
	#HUGEPAGE
 ((
size_t
)(1U << 
LG_HUGEPAGE
))

	)

19 
	#HUGEPAGE_MASK
 ((
size_t
)(
HUGEPAGE
 - 1))

	)

21 
	#HUGEPAGE_ADDR2BASE
(
a
) \

22 ((*)((
uöçå_t
)(
a
Ë& ~
HUGEPAGE_MASK
))

	)

24 
	#HUGEPAGE_CEILING
(
s
) \

25 (((
s
Ë+ 
HUGEPAGE_MASK
Ë& ~HUGEPAGE_MASK)

	)

28 #i‡
deföed
(
_WIN32
Ë|| deföed(
JEMALLOC_PURGE_MADVISE_FREE
)

29 
	#PAGES_CAN_PURGE_LAZY


	)

40 #i‡!
deföed
(
_WIN32
Ë&& ((deföed(
JEMALLOC_PURGE_MADVISE_DONTNEED
) && \

41 
deföed
(
JEMALLOC_PURGE_MADVISE_DONTNEED_ZEROS
)) || \

42 
	$deföed
(
JEMALLOC_MAPS_COALESCE
))

43 
	#PAGES_CAN_PURGE_FORCED


	)

46 c⁄° 
boﬁ
 
∑ges_ˇn_purge_œzy
 =

47 #ifde‡
PAGES_CAN_PURGE_LAZY


48 
åue


50 
Ál£


53 c⁄° 
boﬁ
 
∑ges_ˇn_purge_f‹˚d
 =

54 #ifde‡
PAGES_CAN_PURGE_FORCED


55 
åue


57 
Ál£


62 
boﬁ
 
thp_°©e_madvi£
;

64 *
	`∑ges_m≠
(*
addr
, 
size_t
 
size
, size_à
Æignmít
, 
boﬁ
 *
commô
);

65 
	`∑ges_unm≠
(*
addr
, 
size_t
 
size
);

66 
boﬁ
 
	`∑ges_commô
(*
addr
, 
size_t
 
size
);

67 
boﬁ
 
	`∑ges_decommô
(*
addr
, 
size_t
 
size
);

68 
boﬁ
 
	`∑ges_purge_œzy
(*
addr
, 
size_t
 
size
);

69 
boﬁ
 
	`∑ges_purge_f‹˚d
(*
addr
, 
size_t
 
size
);

70 
boﬁ
 
	`∑ges_huge
(*
addr
, 
size_t
 
size
);

71 
boﬁ
 
	`∑ges_nohuge
(*
addr
, 
size_t
 
size
);

72 
boﬁ
 
	`∑ges_d⁄tdump
(*
addr
, 
size_t
 
size
);

73 
boﬁ
 
	`∑ges_dodump
(*
addr
, 
size_t
 
size
);

74 
boﬁ
 
	`∑ges_boŸ
();

	@include/jemalloc/internal/ph.h

15 #i‚de‡
PH_H_


16 
	#PH_H_


	)

19 
	#phn
(
a_ty≥
) \

21 
a_ty≥
 *
phn_¥ev
; \

22 
a_ty≥
 *
phn_√xt
; \

23 
a_ty≥
 *
phn_lchûd
; \

24 }

	)

27 
	#ph
(
a_ty≥
) \

29 
a_ty≥
 *
ph_roŸ
; \

30 }

	)

33 
	#phn_lchûd_gë
(
a_ty≥
, 
a_fõld
, 
a_phn
) \

34 (
a_phn
->
a_fõld
.
phn_lchûd
)

	)

35 
	#phn_lchûd_£t
(
a_ty≥
, 
a_fõld
, 
a_phn
, 
a_lchûd
) do { \

36 
a_phn
->
a_fõld
.
phn_lchûd
 = 
a_lchûd
; \

37 } 0)

	)

39 
	#phn_√xt_gë
(
a_ty≥
, 
a_fõld
, 
a_phn
) \

40 (
a_phn
->
a_fõld
.
phn_√xt
)

	)

41 
	#phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
a_phn
, 
a_¥ev
) do { \

42 
a_phn
->
a_fõld
.
phn_¥ev
 = 
a_¥ev
; \

43 } 0)

	)

45 
	#phn_¥ev_gë
(
a_ty≥
, 
a_fõld
, 
a_phn
) \

46 (
a_phn
->
a_fõld
.
phn_¥ev
)

	)

47 
	#phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
a_phn
, 
a_√xt
) do { \

48 
a_phn
->
a_fõld
.
phn_√xt
 = 
a_√xt
; \

49 } 0)

	)

51 
	#phn_mîge_‹dîed
(
a_ty≥
, 
a_fõld
, 
a_phn0
, 
a_phn1
, 
a_cmp
) do { \

52 
a_ty≥
 *
phn0chûd
; \

54 
	`as£π
(
a_phn0
 !
NULL
); \

55 
	`as£π
(
a_phn1
 !
NULL
); \

56 
	`as£π
(
	`a_cmp
(
a_phn0
, 
a_phn1
) <= 0); \

58 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
a_phn1
, 
a_phn0
); \

59 
phn0chûd
 = 
	`phn_lchûd_gë
(
a_ty≥
, 
a_fõld
, 
a_phn0
); \

60 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
a_phn1
, 
phn0chûd
); \

61 i‡(
phn0chûd
 !
NULL
) { \

62 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
phn0chûd
, 
a_phn1
); \

64 
	`phn_lchûd_£t
(
a_ty≥
, 
a_fõld
, 
a_phn0
, 
a_phn1
); \

65 } 0)

	)

67 
	#phn_mîge
(
a_ty≥
, 
a_fõld
, 
a_phn0
, 
a_phn1
, 
a_cmp
, 
r_phn
) do { \

68 i‡(
a_phn0
 =
NULL
) { \

69 
r_phn
 = 
a_phn1
; \

70 } i‡(
a_phn1
 =
NULL
) { \

71 
r_phn
 = 
a_phn0
; \

72 } i‡(
	`a_cmp
(
a_phn0
, 
a_phn1
) < 0) { \

73 
	`phn_mîge_‹dîed
(
a_ty≥
, 
a_fõld
, 
a_phn0
, 
a_phn1
, \

74 
a_cmp
); \

75 
r_phn
 = 
a_phn0
; \

77 
	`phn_mîge_‹dîed
(
a_ty≥
, 
a_fõld
, 
a_phn1
, 
a_phn0
, \

78 
a_cmp
); \

79 
r_phn
 = 
a_phn1
; \

81 } 0)

	)

83 
	#ph_mîge_siblögs
(
a_ty≥
, 
a_fõld
, 
a_phn
, 
a_cmp
, 
r_phn
) do { \

84 
a_ty≥
 *
hód
 = 
NULL
; \

85 
a_ty≥
 *
èû
 = 
NULL
; \

86 
a_ty≥
 *
phn0
 = 
a_phn
; \

87 
a_ty≥
 *
phn1
 = 
	`phn_√xt_gë
◊_ty≥, 
a_fõld
, 
phn0
); \

97 i‡(
phn1
 !
NULL
) { \

98 
a_ty≥
 *
phƒe°
 = 
	`phn_√xt_gë
◊_ty≥, 
a_fõld
, 
phn1
); \

99 i‡(
phƒe°
 !
NULL
) { \

100 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
phƒe°
, 
NULL
); \

102 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
phn0
, 
NULL
); \

103 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
phn0
, 
NULL
); \

104 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
phn1
, 
NULL
); \

105 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
phn1
, 
NULL
); \

106 
	`phn_mîge
(
a_ty≥
, 
a_fõld
, 
phn0
, 
phn1
, 
a_cmp
,Öhn0); \

107 
hód
 = 
èû
 = 
phn0
; \

108 
phn0
 = 
phƒe°
; \

109 
phn0
 !
NULL
) { \

110 
phn1
 = 
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, 
phn0
); \

111 i‡(
phn1
 !
NULL
) { \

112 
phƒe°
 = 
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, \

113 
phn1
); \

114 i‡(
phƒe°
 !
NULL
) { \

115 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, \

116 
phƒe°
, 
NULL
); \

118 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
phn0
, \

119 
NULL
); \

120 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
phn0
, \

121 
NULL
); \

122 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
phn1
, \

123 
NULL
); \

124 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
phn1
, \

125 
NULL
); \

126 
	`phn_mîge
(
a_ty≥
, 
a_fõld
, 
phn0
, 
phn1
, \

127 
a_cmp
, 
phn0
); \

128 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
èû
, \

129 
phn0
); \

130 
èû
 = 
phn0
; \

131 
phn0
 = 
phƒe°
; \

133 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
èû
, \

134 
phn0
); \

135 
èû
 = 
phn0
; \

136 
phn0
 = 
NULL
; \

139 
phn0
 = 
hód
; \

140 
phn1
 = 
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, 
phn0
); \

141 i‡(
phn1
 !
NULL
) { \

142 
åue
) { \

143 
hód
 = 
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, \

144 
phn1
); \

145 
	`as£π
(
	`phn_¥ev_gë
(
a_ty≥
, 
a_fõld
, \

146 
phn0
Ë=
NULL
); \

147 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
phn0
, \

148 
NULL
); \

149 
	`as£π
(
	`phn_¥ev_gë
(
a_ty≥
, 
a_fõld
, \

150 
phn1
Ë=
NULL
); \

151 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
phn1
, \

152 
NULL
); \

153 
	`phn_mîge
(
a_ty≥
, 
a_fõld
, 
phn0
, 
phn1
, \

154 
a_cmp
, 
phn0
); \

155 i‡(
hód
 =
NULL
) { \

158 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
èû
, \

159 
phn0
); \

160 
èû
 = 
phn0
; \

161 
phn0
 = 
hód
; \

162 
phn1
 = 
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, \

163 
phn0
); \

167 
r_phn
 = 
phn0
; \

168 } 0)

	)

170 
	#ph_mîge_aux
(
a_ty≥
, 
a_fõld
, 
a_ph
, 
a_cmp
) do { \

171 
a_ty≥
 *
phn
 = 
	`phn_√xt_gë
◊_ty≥, 
a_fõld
, 
a_ph
->
ph_roŸ
); \

172 i‡(
phn
 !
NULL
) { \

173 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
a_ph
->
ph_roŸ
, 
NULL
); \

174 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
a_ph
->
ph_roŸ
, 
NULL
); \

175 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
phn
, 
NULL
); \

176 
	`ph_mîge_siblögs
(
a_ty≥
, 
a_fõld
, 
phn
, 
a_cmp
,Öhn); \

177 
	`as£π
(
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, 
phn
Ë=
NULL
); \

178 
	`phn_mîge
(
a_ty≥
, 
a_fõld
, 
a_ph
->
ph_roŸ
, 
phn
, 
a_cmp
, \

179 
a_ph
->
ph_roŸ
); \

181 } 0)

	)

183 
	#ph_mîge_chûdªn
(
a_ty≥
, 
a_fõld
, 
a_phn
, 
a_cmp
, 
r_phn
) do { \

184 
a_ty≥
 *
lchûd
 = 
	`phn_lchûd_gë
◊_ty≥, 
a_fõld
, 
a_phn
); \

185 i‡(
lchûd
 =
NULL
) { \

186 
r_phn
 = 
NULL
; \

188 
	`ph_mîge_siblögs
(
a_ty≥
, 
a_fõld
, 
lchûd
, 
a_cmp
, \

189 
r_phn
); \

191 } 0)

	)

197 
	#ph_¥Ÿo
(
a_©å
, 
a_¥efix
, 
a_ph_ty≥
, 
a_ty≥
) \

198 
a_©å
 
a_¥efix
##
	`√w
(
a_ph_ty≥
 *
ph
); \

199 
a_©å
 
boﬁ
 
a_¥efix
##
	`em±y
(
a_ph_ty≥
 *
ph
); \

200 
a_©å
 
a_ty≥
 *
a_¥efix
##
	`fú°
(
a_ph_ty≥
 *
ph
); \

201 
a_©å
 
a_ty≥
 *
a_¥efix
##
	`™y
(
a_ph_ty≥
 *
ph
); \

202 
a_©å
 
a_¥efix
##
	`ö£π
(
a_ph_ty≥
 *
ph
, 
a_ty≥
 *
phn
); \

203 
a_©å
 
a_ty≥
 *
a_¥efix
##
	`ªmove_fú°
(
a_ph_ty≥
 *
ph
); \

204 
a_©å
 
a_ty≥
 *
a_¥efix
##
	`ªmove_™y
(
a_ph_ty≥
 *
ph
); \

205 
a_©å
 
a_¥efix
##
	`ªmove
(
a_ph_ty≥
 *
ph
, 
a_ty≥
 *
phn
);

	)

211 
	#ph_gí
(
a_©å
, 
a_¥efix
, 
a_ph_ty≥
, 
a_ty≥
, 
a_fõld
, 
a_cmp
) \

212 
a_©å
 \

213 
a_¥efix
##
	`√w
(
a_ph_ty≥
 *
ph
) { \

214 
	`mem£t
(
ph
, 0, (
	`ph
(
a_ty≥
))); \

216 
a_©å
 
boﬁ
 \

217 
a_¥efix
##
	`em±y
(
a_ph_ty≥
 *
ph
) { \

218  (
ph
->
ph_roŸ
 =
NULL
); \

220 
a_©å
 
a_ty≥
 * \

221 
a_¥efix
##
	`fú°
(
a_ph_ty≥
 *
ph
) { \

222 i‡(
ph
->
ph_roŸ
 =
NULL
) { \

223  
NULL
; \

225 
	`ph_mîge_aux
(
a_ty≥
, 
a_fõld
, 
ph
, 
a_cmp
); \

226  
ph
->
ph_roŸ
; \

228 
a_©å
 
a_ty≥
 * \

229 
a_¥efix
##
	`™y
(
a_ph_ty≥
 *
ph
) { \

230 i‡(
ph
->
ph_roŸ
 =
NULL
) { \

231  
NULL
; \

233 
a_ty≥
 *
aux
 = 
	`phn_√xt_gë
◊_ty≥, 
a_fõld
, 
ph
->
ph_roŸ
); \

234 i‡(
aux
 !
NULL
) { \

235  
aux
; \

237  
ph
->
ph_roŸ
; \

239 
a_©å
 \

240 
a_¥efix
##
	`ö£π
(
a_ph_ty≥
 *
ph
, 
a_ty≥
 *
phn
) { \

241 
	`mem£t
(&
phn
->
a_fõld
, 0, (
	`phn
(
a_ty≥
))); \

251 i‡(
ph
->
ph_roŸ
 =
NULL
) { \

252 
ph
->
ph_roŸ
 = 
phn
; \

254 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
phn
, 
	`phn_√xt_gë
(a_type, \

255 
a_fõld
, 
ph
->
ph_roŸ
)); \

256 i‡(
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, 
ph
->
ph_roŸ
) != \

257 
NULL
) { \

258 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, \

259 
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, 
ph
->
ph_roŸ
), \

260 
phn
); \

262 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
phn
, 
ph
->
ph_roŸ
); \

263 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
ph
->
ph_roŸ
, 
phn
); \

266 
a_©å
 
a_ty≥
 * \

267 
a_¥efix
##
	`ªmove_fú°
(
a_ph_ty≥
 *
ph
) { \

268 
a_ty≥
 *
ªt
; \

270 i‡(
ph
->
ph_roŸ
 =
NULL
) { \

271  
NULL
; \

273 
	`ph_mîge_aux
(
a_ty≥
, 
a_fõld
, 
ph
, 
a_cmp
); \

275 
ªt
 = 
ph
->
ph_roŸ
; \

277 
	`ph_mîge_chûdªn
(
a_ty≥
, 
a_fõld
, 
ph
->
ph_roŸ
, 
a_cmp
, \

278 
ph
->
ph_roŸ
); \

280  
ªt
; \

282 
a_©å
 
a_ty≥
 * \

283 
a_¥efix
##
	`ªmove_™y
(
a_ph_ty≥
 *
ph
) { \

291 i‡(
ph
->
ph_roŸ
 =
NULL
) { \

292  
NULL
; \

294 
a_ty≥
 *
ªt
 = 
	`phn_√xt_gë
◊_ty≥, 
a_fõld
, 
ph
->
ph_roŸ
); \

295 i‡(
ªt
 !
NULL
) { \

296 
a_ty≥
 *
aux
 = 
	`phn_√xt_gë
◊_ty≥, 
a_fõld
, 
ªt
); \

297 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
ph
->
ph_roŸ
, 
aux
); \

298 i‡(
aux
 !
NULL
) { \

299 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
aux
, \

300 
ph
->
ph_roŸ
); \

302  
ªt
; \

304 
ªt
 = 
ph
->
ph_roŸ
; \

305 
	`ph_mîge_chûdªn
(
a_ty≥
, 
a_fõld
, 
ph
->
ph_roŸ
, 
a_cmp
, \

306 
ph
->
ph_roŸ
); \

307  
ªt
; \

309 
a_©å
 \

310 
a_¥efix
##
	`ªmove
(
a_ph_ty≥
 *
ph
, 
a_ty≥
 *
phn
) { \

311 
a_ty≥
 *
ª∂a˚
, *
∑ª¡
; \

313 i‡(
ph
->
ph_roŸ
 =
phn
) { \

319 i‡(
	`phn_lchûd_gë
(
a_ty≥
, 
a_fõld
, 
phn
Ë=
NULL
) { \

320 
ph
->
ph_roŸ
 = 
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, \

321 
phn
); \

322 i‡(
ph
->
ph_roŸ
 !
NULL
) { \

323 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, \

324 
ph
->
ph_roŸ
, 
NULL
); \

328 
	`ph_mîge_aux
(
a_ty≥
, 
a_fõld
, 
ph
, 
a_cmp
); \

329 i‡(
ph
->
ph_roŸ
 =
phn
) { \

330 
	`ph_mîge_chûdªn
(
a_ty≥
, 
a_fõld
, 
ph
->
ph_roŸ
, \

331 
a_cmp
, 
ph
->
ph_roŸ
); \

337 i‡((
∑ª¡
 = 
	`phn_¥ev_gë
(
a_ty≥
, 
a_fõld
, 
phn
)Ë!
NULL
) { \

338 i‡(
	`phn_lchûd_gë
(
a_ty≥
, 
a_fõld
, 
∑ª¡
Ë!
phn
) { \

339 
∑ª¡
 = 
NULL
; \

343 
	`ph_mîge_chûdªn
(
a_ty≥
, 
a_fõld
, 
phn
, 
a_cmp
, 
ª∂a˚
); \

345 i‡(
ª∂a˚
 !
NULL
) { \

346 i‡(
∑ª¡
 !
NULL
) { \

347 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
ª∂a˚
, 
∑ª¡
); \

348 
	`phn_lchûd_£t
(
a_ty≥
, 
a_fõld
, 
∑ª¡
, \

349 
ª∂a˚
); \

351 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
ª∂a˚
, \

352 
	`phn_¥ev_gë
(
a_ty≥
, 
a_fõld
, 
phn
)); \

353 i‡(
	`phn_¥ev_gë
(
a_ty≥
, 
a_fõld
, 
phn
) != \

354 
NULL
) { \

355 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, \

356 
	`phn_¥ev_gë
(
a_ty≥
, 
a_fõld
, 
phn
), \

357 
ª∂a˚
); \

360 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, 
ª∂a˚
, \

361 
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, 
phn
)); \

362 i‡(
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, 
phn
Ë!
NULL
) { \

363 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, \

364 
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, 
phn
), \

365 
ª∂a˚
); \

368 i‡(
∑ª¡
 !
NULL
) { \

369 
a_ty≥
 *
√xt
 = 
	`phn_√xt_gë
◊_ty≥, 
a_fõld
, \

370 
phn
); \

371 
	`phn_lchûd_£t
(
a_ty≥
, 
a_fõld
, 
∑ª¡
, 
√xt
); \

372 i‡(
√xt
 !
NULL
) { \

373 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, 
√xt
, \

374 
∑ª¡
); \

377 
	`as£π
(
	`phn_¥ev_gë
(
a_ty≥
, 
a_fõld
, 
phn
) != \

378 
NULL
); \

379 
	`phn_√xt_£t
(
a_ty≥
, 
a_fõld
, \

380 
	`phn_¥ev_gë
(
a_ty≥
, 
a_fõld
, 
phn
), \

381 
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, 
phn
)); \

383 i‡(
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, 
phn
Ë!
NULL
) { \

384 
	`phn_¥ev_£t
(
a_ty≥
, 
a_fõld
, \

385 
	`phn_√xt_gë
(
a_ty≥
, 
a_fõld
, 
phn
), \

386 
	`phn_¥ev_gë
(
a_ty≥
, 
a_fõld
, 
phn
)); \

389 }

	)

	@include/jemalloc/internal/private_namespace.gen.h

1 
	#a0dÆloc
 
	`JEMALLOC_N
(
a0dÆloc
)

	)

2 
	#a0mÆloc
 
	`JEMALLOC_N
(
a0mÆloc
)

	)

3 
	#¨ía_choo£_h¨d
 
	`JEMALLOC_N
(
¨ía_choo£_h¨d
)

	)

4 
	#¨ía_˛ónup
 
	`JEMALLOC_N
(
¨ía_˛ónup
)

	)

5 
	#¨ía_öô
 
	`JEMALLOC_N
(
¨ía_öô
)

	)

6 
	#¨ía_migøã
 
	`JEMALLOC_N
(
¨ía_migøã
)

	)

7 
	#¨ías
 
	`JEMALLOC_N
(
¨ías
)

	)

8 
	#¨ía_£t
 
	`JEMALLOC_N
(
¨ía_£t
)

	)

9 
	#¨ías_lock
 
	`JEMALLOC_N
(
¨ías_lock
)

	)

10 
	#¨ías_td©a_˛ónup
 
	`JEMALLOC_N
(
¨ías_td©a_˛ónup
)

	)

11 
	#¨ía_td©a_gë_h¨d
 
	`JEMALLOC_N
(
¨ía_td©a_gë_h¨d
)

	)

12 
	#boŸ°øp_ˇŒoc
 
	`JEMALLOC_N
(
boŸ°øp_ˇŒoc
)

	)

13 
	#boŸ°øp_‰ì
 
	`JEMALLOC_N
(
boŸ°øp_‰ì
)

	)

14 
	#boŸ°øp_mÆloc
 
	`JEMALLOC_N
(
boŸ°øp_mÆloc
)

	)

15 
	#üª«_˛ónup
 
	`JEMALLOC_N
(
üª«_˛ónup
)

	)

16 
	#jemÆloc_po°f‹k_chûd
 
	`JEMALLOC_N
(
jemÆloc_po°f‹k_chûd
)

	)

17 
	#jemÆloc_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
jemÆloc_po°f‹k_∑ª¡
)

	)

18 
	#jemÆloc_¥ef‹k
 
	`JEMALLOC_N
(
jemÆloc_¥ef‹k
)

	)

19 
	#mÆloc_öôülized
 
	`JEMALLOC_N
(
mÆloc_öôülized
)

	)

20 
	#mÆloc_¶ow
 
	`JEMALLOC_N
(
mÆloc_¶ow
)

	)

21 
	#«ª«s_auto
 
	`JEMALLOC_N
(
«ª«s_auto
)

	)

22 
	#«ª«s_tŸÆ_gë
 
	`JEMALLOC_N
(
«ª«s_tŸÆ_gë
)

	)

23 
	#n˝us
 
	`JEMALLOC_N
(
n˝us
)

	)

24 
	#›t_ab‹t
 
	`JEMALLOC_N
(
›t_ab‹t
)

	)

25 
	#›t_ab‹t_c⁄f
 
	`JEMALLOC_N
(
›t_ab‹t_c⁄f
)

	)

26 
	#›t_junk
 
	`JEMALLOC_N
(
›t_junk
)

	)

27 
	#›t_junk_Æloc
 
	`JEMALLOC_N
(
›t_junk_Æloc
)

	)

28 
	#›t_junk_‰ì
 
	`JEMALLOC_N
(
›t_junk_‰ì
)

	)

29 
	#›t_«ª«s
 
	`JEMALLOC_N
(
›t_«ª«s
)

	)

30 
	#›t_uåa˚
 
	`JEMALLOC_N
(
›t_uåa˚
)

	)

31 
	#›t_xmÆloc
 
	`JEMALLOC_N
(
›t_xmÆloc
)

	)

32 
	#›t_zîo
 
	`JEMALLOC_N
(
›t_zîo
)

	)

33 
	#¨ía_Æloc_junk_smÆl
 
	`JEMALLOC_N
(
¨ía_Æloc_junk_smÆl
)

	)

34 
	#¨ía_basic_°©s_mîge
 
	`JEMALLOC_N
(
¨ía_basic_°©s_mîge
)

	)

35 
	#¨ía_boŸ
 
	`JEMALLOC_N
(
¨ía_boŸ
)

	)

36 
	#¨ía_dÆloc_bö_junked_locked
 
	`JEMALLOC_N
(
¨ía_dÆloc_bö_junked_locked
)

	)

37 
	#¨ía_dÆloc_junk_smÆl
 
	`JEMALLOC_N
(
¨ía_dÆloc_junk_smÆl
)

	)

38 
	#¨ía_dÆloc_¥omŸed
 
	`JEMALLOC_N
(
¨ía_dÆloc_¥omŸed
)

	)

39 
	#¨ía_dÆloc_smÆl
 
	`JEMALLOC_N
(
¨ía_dÆloc_smÆl
)

	)

40 
	#¨ía_deˇy
 
	`JEMALLOC_N
(
¨ía_deˇy
)

	)

41 
	#¨ía_de°roy
 
	`JEMALLOC_N
(
¨ía_de°roy
)

	)

42 
	#¨ía_dúty_deˇy_ms_deÁu…_gë
 
	`JEMALLOC_N
(
¨ía_dúty_deˇy_ms_deÁu…_gë
)

	)

43 
	#¨ía_dúty_deˇy_ms_deÁu…_£t
 
	`JEMALLOC_N
(
¨ía_dúty_deˇy_ms_deÁu…_£t
)

	)

44 
	#¨ía_dúty_deˇy_ms_gë
 
	`JEMALLOC_N
(
¨ía_dúty_deˇy_ms_gë
)

	)

45 
	#¨ía_dúty_deˇy_ms_£t
 
	`JEMALLOC_N
(
¨ía_dúty_deˇy_ms_£t
)

	)

46 
	#¨ía_dss_¥ec_gë
 
	`JEMALLOC_N
(
¨ía_dss_¥ec_gë
)

	)

47 
	#¨ía_dss_¥ec_£t
 
	`JEMALLOC_N
(
¨ía_dss_¥ec_£t
)

	)

48 
	#¨ía_exã¡_Æloc_œrge
 
	`JEMALLOC_N
(
¨ía_exã¡_Æloc_œrge
)

	)

49 
	#¨ía_exã¡_dÆloc_œrge_¥ï
 
	`JEMALLOC_N
(
¨ía_exã¡_dÆloc_œrge_¥ï
)

	)

50 
	#¨ía_exã¡_øŒoc_œrge_ex∑nd
 
	`JEMALLOC_N
(
¨ía_exã¡_øŒoc_œrge_ex∑nd
)

	)

51 
	#¨ía_exã¡_øŒoc_œrge_shrök
 
	`JEMALLOC_N
(
¨ía_exã¡_øŒoc_œrge_shrök
)

	)

52 
	#¨ía_exã¡s_dúty_dÆloc
 
	`JEMALLOC_N
(
¨ía_exã¡s_dúty_dÆloc
)

	)

53 
	#¨ía_exã¡_¢_√xt
 
	`JEMALLOC_N
(
¨ía_exã¡_¢_√xt
)

	)

54 
	#¨ía_mÆloc_h¨d
 
	`JEMALLOC_N
(
¨ía_mÆloc_h¨d
)

	)

55 
	#¨ía_muzzy_deˇy_ms_deÁu…_gë
 
	`JEMALLOC_N
(
¨ía_muzzy_deˇy_ms_deÁu…_gë
)

	)

56 
	#¨ía_muzzy_deˇy_ms_deÁu…_£t
 
	`JEMALLOC_N
(
¨ía_muzzy_deˇy_ms_deÁu…_£t
)

	)

57 
	#¨ía_muzzy_deˇy_ms_gë
 
	`JEMALLOC_N
(
¨ía_muzzy_deˇy_ms_gë
)

	)

58 
	#¨ía_muzzy_deˇy_ms_£t
 
	`JEMALLOC_N
(
¨ía_muzzy_deˇy_ms_£t
)

	)

59 
	#¨ía_√w
 
	`JEMALLOC_N
(
¨ía_√w
)

	)

60 
	#¨ía_¡hªads_dec
 
	`JEMALLOC_N
(
¨ía_¡hªads_dec
)

	)

61 
	#¨ía_¡hªads_gë
 
	`JEMALLOC_N
(
¨ía_¡hªads_gë
)

	)

62 
	#¨ía_¡hªads_öc
 
	`JEMALLOC_N
(
¨ía_¡hªads_öc
)

	)

63 
	#¨ía_∑Œoc
 
	`JEMALLOC_N
(
¨ía_∑Œoc
)

	)

64 
	#¨ía_po°f‹k_chûd
 
	`JEMALLOC_N
(
¨ía_po°f‹k_chûd
)

	)

65 
	#¨ía_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
¨ía_po°f‹k_∑ª¡
)

	)

66 
	#¨ía_¥ef‹k0
 
	`JEMALLOC_N
(
¨ía_¥ef‹k0
)

	)

67 
	#¨ía_¥ef‹k1
 
	`JEMALLOC_N
(
¨ía_¥ef‹k1
)

	)

68 
	#¨ía_¥ef‹k2
 
	`JEMALLOC_N
(
¨ía_¥ef‹k2
)

	)

69 
	#¨ía_¥ef‹k3
 
	`JEMALLOC_N
(
¨ía_¥ef‹k3
)

	)

70 
	#¨ía_¥ef‹k4
 
	`JEMALLOC_N
(
¨ía_¥ef‹k4
)

	)

71 
	#¨ía_¥ef‹k5
 
	`JEMALLOC_N
(
¨ía_¥ef‹k5
)

	)

72 
	#¨ía_¥ef‹k6
 
	`JEMALLOC_N
(
¨ía_¥ef‹k6
)

	)

73 
	#¨ía_¥ef‹k7
 
	`JEMALLOC_N
(
¨ía_¥ef‹k7
)

	)

74 
	#¨ía_¥of_¥omŸe
 
	`JEMALLOC_N
(
¨ía_¥of_¥omŸe
)

	)

75 
	#¨ía_øŒoc
 
	`JEMALLOC_N
(
¨ía_øŒoc
)

	)

76 
	#¨ía_øŒoc_no_move
 
	`JEMALLOC_N
(
¨ía_øŒoc_no_move
)

	)

77 
	#¨ía_ª£t
 
	`JEMALLOC_N
(
¨ía_ª£t
)

	)

78 
	#¨ía_ªèö_grow_limô_gë_£t
 
	`JEMALLOC_N
(
¨ía_ªèö_grow_limô_gë_£t
)

	)

79 
	#¨ía_°©s_mîge
 
	`JEMALLOC_N
(
¨ía_°©s_mîge
)

	)

80 
	#¨ía_tˇche_fûl_smÆl
 
	`JEMALLOC_N
(
¨ía_tˇche_fûl_smÆl
)

	)

81 
	#h_°ïs
 
	`JEMALLOC_N
(
h_°ïs
)

	)

82 
	#›t_dúty_deˇy_ms
 
	`JEMALLOC_N
(
›t_dúty_deˇy_ms
)

	)

83 
	#›t_muzzy_deˇy_ms
 
	`JEMALLOC_N
(
›t_muzzy_deˇy_ms
)

	)

84 
	#›t_≥r˝u_¨ía
 
	`JEMALLOC_N
(
›t_≥r˝u_¨ía
)

	)

85 
	#≥r˝u_¨ía_mode_«mes
 
	`JEMALLOC_N
(
≥r˝u_¨ía_mode_«mes
)

	)

86 
	#background_thªad_boŸ0
 
	`JEMALLOC_N
(
background_thªad_boŸ0
)

	)

87 
	#background_thªad_boŸ1
 
	`JEMALLOC_N
(
background_thªad_boŸ1
)

	)

88 
	#background_thªad_¸óã
 
	`JEMALLOC_N
(
background_thªad_¸óã
)

	)

89 
	#background_thªad_˘l_öô
 
	`JEMALLOC_N
(
background_thªad_˘l_öô
)

	)

90 
	#background_thªad_íabÀd_°©e
 
	`JEMALLOC_N
(
background_thªad_íabÀd_°©e
)

	)

91 
	#background_thªad_öfo
 
	`JEMALLOC_N
(
background_thªad_öfo
)

	)

92 
	#background_thªad_öãrvÆ_check
 
	`JEMALLOC_N
(
background_thªad_öãrvÆ_check
)

	)

93 
	#background_thªad_lock
 
	`JEMALLOC_N
(
background_thªad_lock
)

	)

94 
	#background_thªad_po°f‹k_chûd
 
	`JEMALLOC_N
(
background_thªad_po°f‹k_chûd
)

	)

95 
	#background_thªad_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
background_thªad_po°f‹k_∑ª¡
)

	)

96 
	#background_thªad_¥ef‹k0
 
	`JEMALLOC_N
(
background_thªad_¥ef‹k0
)

	)

97 
	#background_thªad_¥ef‹k1
 
	`JEMALLOC_N
(
background_thªad_¥ef‹k1
)

	)

98 
	#background_thªads_dißbÀ
 
	`JEMALLOC_N
(
background_thªads_dißbÀ
)

	)

99 
	#background_thªads_íabÀ
 
	`JEMALLOC_N
(
background_thªads_íabÀ
)

	)

100 
	#background_thªad_°©s_ªad
 
	`JEMALLOC_N
(
background_thªad_°©s_ªad
)

	)

101 
	#ˇn_íabÀ_background_thªad
 
	`JEMALLOC_N
(
ˇn_íabÀ_background_thªad
)

	)

102 
	#n_background_thªads
 
	`JEMALLOC_N
(
n_background_thªads
)

	)

103 
	#›t_background_thªad
 
	`JEMALLOC_N
(
›t_background_thªad
)

	)

104 
	#±hªad_¸óã_wøµî
 
	`JEMALLOC_N
(
±hªad_¸óã_wøµî
)

	)

105 
	#b0gë
 
	`JEMALLOC_N
(
b0gë
)

	)

106 
	#ba£_Æloc
 
	`JEMALLOC_N
(
ba£_Æloc
)

	)

107 
	#ba£_Æloc_exã¡
 
	`JEMALLOC_N
(
ba£_Æloc_exã¡
)

	)

108 
	#ba£_boŸ
 
	`JEMALLOC_N
(
ba£_boŸ
)

	)

109 
	#ba£_dñëe
 
	`JEMALLOC_N
(
ba£_dñëe
)

	)

110 
	#ba£_exã¡_hooks_gë
 
	`JEMALLOC_N
(
ba£_exã¡_hooks_gë
)

	)

111 
	#ba£_exã¡_hooks_£t
 
	`JEMALLOC_N
(
ba£_exã¡_hooks_£t
)

	)

112 
	#ba£_√w
 
	`JEMALLOC_N
(
ba£_√w
)

	)

113 
	#ba£_po°f‹k_chûd
 
	`JEMALLOC_N
(
ba£_po°f‹k_chûd
)

	)

114 
	#ba£_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
ba£_po°f‹k_∑ª¡
)

	)

115 
	#ba£_¥ef‹k
 
	`JEMALLOC_N
(
ba£_¥ef‹k
)

	)

116 
	#ba£_°©s_gë
 
	`JEMALLOC_N
(
ba£_°©s_gë
)

	)

117 
	#mëad©a_thp_mode_«mes
 
	`JEMALLOC_N
(
mëad©a_thp_mode_«mes
)

	)

118 
	#›t_mëad©a_thp
 
	`JEMALLOC_N
(
›t_mëad©a_thp
)

	)

119 
	#bö_öfos
 
	`JEMALLOC_N
(
bö_öfos
)

	)

120 
	#bö_öô
 
	`JEMALLOC_N
(
bö_öô
)

	)

121 
	#bö_po°f‹k_chûd
 
	`JEMALLOC_N
(
bö_po°f‹k_chûd
)

	)

122 
	#bö_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
bö_po°f‹k_∑ª¡
)

	)

123 
	#bö_¥ef‹k
 
	`JEMALLOC_N
(
bö_¥ef‹k
)

	)

124 
	#bôm≠_öfo_öô
 
	`JEMALLOC_N
(
bôm≠_öfo_öô
)

	)

125 
	#bôm≠_öô
 
	`JEMALLOC_N
(
bôm≠_öô
)

	)

126 
	#bôm≠_size
 
	`JEMALLOC_N
(
bôm≠_size
)

	)

127 
	#ckh_cou¡
 
	`JEMALLOC_N
(
ckh_cou¡
)

	)

128 
	#ckh_dñëe
 
	`JEMALLOC_N
(
ckh_dñëe
)

	)

129 
	#ckh_ö£π
 
	`JEMALLOC_N
(
ckh_ö£π
)

	)

130 
	#ckh_ôî
 
	`JEMALLOC_N
(
ckh_ôî
)

	)

131 
	#ckh_√w
 
	`JEMALLOC_N
(
ckh_√w
)

	)

132 
	#ckh_poöãr_hash
 
	`JEMALLOC_N
(
ckh_poöãr_hash
)

	)

133 
	#ckh_poöãr_keycomp
 
	`JEMALLOC_N
(
ckh_poöãr_keycomp
)

	)

134 
	#ckh_ªmove
 
	`JEMALLOC_N
(
ckh_ªmove
)

	)

135 
	#ckh_£¨ch
 
	`JEMALLOC_N
(
ckh_£¨ch
)

	)

136 
	#ckh_°rög_hash
 
	`JEMALLOC_N
(
ckh_°rög_hash
)

	)

137 
	#ckh_°rög_keycomp
 
	`JEMALLOC_N
(
ckh_°rög_keycomp
)

	)

138 
	#˘l_boŸ
 
	`JEMALLOC_N
(
˘l_boŸ
)

	)

139 
	#˘l_bymib
 
	`JEMALLOC_N
(
˘l_bymib
)

	)

140 
	#˘l_by«me
 
	`JEMALLOC_N
(
˘l_by«me
)

	)

141 
	#˘l_«mëomib
 
	`JEMALLOC_N
(
˘l_«mëomib
)

	)

142 
	#˘l_po°f‹k_chûd
 
	`JEMALLOC_N
(
˘l_po°f‹k_chûd
)

	)

143 
	#˘l_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
˘l_po°f‹k_∑ª¡
)

	)

144 
	#˘l_¥ef‹k
 
	`JEMALLOC_N
(
˘l_¥ef‹k
)

	)

145 
	#div_öô
 
	`JEMALLOC_N
(
div_öô
)

	)

146 
	#exã¡_Æloc
 
	`JEMALLOC_N
(
exã¡_Æloc
)

	)

147 
	#exã¡_Æloc_wøµî
 
	`JEMALLOC_N
(
exã¡_Æloc_wøµî
)

	)

148 
	#exã¡_avaû_™y
 
	`JEMALLOC_N
(
exã¡_avaû_™y
)

	)

149 
	#exã¡_avaû_em±y
 
	`JEMALLOC_N
(
exã¡_avaû_em±y
)

	)

150 
	#exã¡_avaû_fú°
 
	`JEMALLOC_N
(
exã¡_avaû_fú°
)

	)

151 
	#exã¡_avaû_ö£π
 
	`JEMALLOC_N
(
exã¡_avaû_ö£π
)

	)

152 
	#exã¡_avaû_√w
 
	`JEMALLOC_N
(
exã¡_avaû_√w
)

	)

153 
	#exã¡_avaû_ªmove
 
	`JEMALLOC_N
(
exã¡_avaû_ªmove
)

	)

154 
	#exã¡_avaû_ªmove_™y
 
	`JEMALLOC_N
(
exã¡_avaû_ªmove_™y
)

	)

155 
	#exã¡_avaû_ªmove_fú°
 
	`JEMALLOC_N
(
exã¡_avaû_ªmove_fú°
)

	)

156 
	#exã¡_boŸ
 
	`JEMALLOC_N
(
exã¡_boŸ
)

	)

157 
	#exã¡_commô_wøµî
 
	`JEMALLOC_N
(
exã¡_commô_wøµî
)

	)

158 
	#exã¡_dÆloc
 
	`JEMALLOC_N
(
exã¡_dÆloc
)

	)

159 
	#exã¡_dÆloc_g≠
 
	`JEMALLOC_N
(
exã¡_dÆloc_g≠
)

	)

160 
	#exã¡_dÆloc_wøµî
 
	`JEMALLOC_N
(
exã¡_dÆloc_wøµî
)

	)

161 
	#exã¡_decommô_wøµî
 
	`JEMALLOC_N
(
exã¡_decommô_wøµî
)

	)

162 
	#exã¡_de°roy_wøµî
 
	`JEMALLOC_N
(
exã¡_de°roy_wøµî
)

	)

163 
	#exã¡_hóp_™y
 
	`JEMALLOC_N
(
exã¡_hóp_™y
)

	)

164 
	#exã¡_hóp_em±y
 
	`JEMALLOC_N
(
exã¡_hóp_em±y
)

	)

165 
	#exã¡_hóp_fú°
 
	`JEMALLOC_N
(
exã¡_hóp_fú°
)

	)

166 
	#exã¡_hóp_ö£π
 
	`JEMALLOC_N
(
exã¡_hóp_ö£π
)

	)

167 
	#exã¡_hóp_√w
 
	`JEMALLOC_N
(
exã¡_hóp_√w
)

	)

168 
	#exã¡_hóp_ªmove
 
	`JEMALLOC_N
(
exã¡_hóp_ªmove
)

	)

169 
	#exã¡_hóp_ªmove_™y
 
	`JEMALLOC_N
(
exã¡_hóp_ªmove_™y
)

	)

170 
	#exã¡_hóp_ªmove_fú°
 
	`JEMALLOC_N
(
exã¡_hóp_ªmove_fú°
)

	)

171 
	#exã¡_hooks_deÁu…
 
	`JEMALLOC_N
(
exã¡_hooks_deÁu…
)

	)

172 
	#exã¡_hooks_gë
 
	`JEMALLOC_N
(
exã¡_hooks_gë
)

	)

173 
	#exã¡_hooks_£t
 
	`JEMALLOC_N
(
exã¡_hooks_£t
)

	)

174 
	#exã¡_mîge_wøµî
 
	`JEMALLOC_N
(
exã¡_mîge_wøµî
)

	)

175 
	#exã¡_muãx_poﬁ
 
	`JEMALLOC_N
(
exã¡_muãx_poﬁ
)

	)

176 
	#exã¡_purge_f‹˚d_wøµî
 
	`JEMALLOC_N
(
exã¡_purge_f‹˚d_wøµî
)

	)

177 
	#exã¡_purge_œzy_wøµî
 
	`JEMALLOC_N
(
exã¡_purge_œzy_wøµî
)

	)

178 
	#exã¡s_Æloc
 
	`JEMALLOC_N
(
exã¡s_Æloc
)

	)

179 
	#exã¡s_dÆloc
 
	`JEMALLOC_N
(
exã¡s_dÆloc
)

	)

180 
	#exã¡s_evi˘
 
	`JEMALLOC_N
(
exã¡s_evi˘
)

	)

181 
	#exã¡s_öô
 
	`JEMALLOC_N
(
exã¡s_öô
)

	)

182 
	#exã¡s_≈ages_gë
 
	`JEMALLOC_N
(
exã¡s_≈ages_gë
)

	)

183 
	#exã¡_•lô_wøµî
 
	`JEMALLOC_N
(
exã¡_•lô_wøµî
)

	)

184 
	#exã¡s_po°f‹k_chûd
 
	`JEMALLOC_N
(
exã¡s_po°f‹k_chûd
)

	)

185 
	#exã¡s_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
exã¡s_po°f‹k_∑ª¡
)

	)

186 
	#exã¡s_¥ef‹k
 
	`JEMALLOC_N
(
exã¡s_¥ef‹k
)

	)

187 
	#exã¡s_πªe
 
	`JEMALLOC_N
(
exã¡s_πªe
)

	)

188 
	#exã¡s_°©e_gë
 
	`JEMALLOC_N
(
exã¡s_°©e_gë
)

	)

189 
	#›t_lg_exã¡_max_a˘ive_fô
 
	`JEMALLOC_N
(
›t_lg_exã¡_max_a˘ive_fô
)

	)

190 
	#dss_¥ec_«mes
 
	`JEMALLOC_N
(
dss_¥ec_«mes
)

	)

191 
	#exã¡_Æloc_dss
 
	`JEMALLOC_N
(
exã¡_Æloc_dss
)

	)

192 
	#exã¡_dss_boŸ
 
	`JEMALLOC_N
(
exã¡_dss_boŸ
)

	)

193 
	#exã¡_dss_mîgóbÀ
 
	`JEMALLOC_N
(
exã¡_dss_mîgóbÀ
)

	)

194 
	#exã¡_dss_¥ec_gë
 
	`JEMALLOC_N
(
exã¡_dss_¥ec_gë
)

	)

195 
	#exã¡_dss_¥ec_£t
 
	`JEMALLOC_N
(
exã¡_dss_¥ec_£t
)

	)

196 
	#exã¡_ö_dss
 
	`JEMALLOC_N
(
exã¡_ö_dss
)

	)

197 
	#›t_dss
 
	`JEMALLOC_N
(
›t_dss
)

	)

198 
	#exã¡_Æloc_mm≠
 
	`JEMALLOC_N
(
exã¡_Æloc_mm≠
)

	)

199 
	#exã¡_dÆloc_mm≠
 
	`JEMALLOC_N
(
exã¡_dÆloc_mm≠
)

	)

200 
	#›t_ªèö
 
	`JEMALLOC_N
(
›t_ªèö
)

	)

201 
	#hooks_¨ía_√w_hook
 
	`JEMALLOC_N
(
hooks_¨ía_√w_hook
)

	)

202 
	#hooks_libc_hook
 
	`JEMALLOC_N
(
hooks_libc_hook
)

	)

203 
	#œrge_dÆloc
 
	`JEMALLOC_N
(
œrge_dÆloc
)

	)

204 
	#œrge_dÆloc_föish
 
	`JEMALLOC_N
(
œrge_dÆloc_föish
)

	)

205 
	#œrge_dÆloc_junk
 
	`JEMALLOC_N
(
œrge_dÆloc_junk
)

	)

206 
	#œrge_dÆloc_maybe_junk
 
	`JEMALLOC_N
(
œrge_dÆloc_maybe_junk
)

	)

207 
	#œrge_dÆloc_¥ï_junked_locked
 
	`JEMALLOC_N
(
œrge_dÆloc_¥ï_junked_locked
)

	)

208 
	#œrge_mÆloc
 
	`JEMALLOC_N
(
œrge_mÆloc
)

	)

209 
	#œrge_∑Œoc
 
	`JEMALLOC_N
(
œrge_∑Œoc
)

	)

210 
	#œrge_¥of_t˘x_gë
 
	`JEMALLOC_N
(
œrge_¥of_t˘x_gë
)

	)

211 
	#œrge_¥of_t˘x_ª£t
 
	`JEMALLOC_N
(
œrge_¥of_t˘x_ª£t
)

	)

212 
	#œrge_¥of_t˘x_£t
 
	`JEMALLOC_N
(
œrge_¥of_t˘x_£t
)

	)

213 
	#œrge_øŒoc
 
	`JEMALLOC_N
(
œrge_øŒoc
)

	)

214 
	#œrge_øŒoc_no_move
 
	`JEMALLOC_N
(
œrge_øŒoc_no_move
)

	)

215 
	#œrge_ßŒoc
 
	`JEMALLOC_N
(
œrge_ßŒoc
)

	)

216 
	#log_öô_d⁄e
 
	`JEMALLOC_N
(
log_öô_d⁄e
)

	)

217 
	#log_v¨_«mes
 
	`JEMALLOC_N
(
log_v¨_«mes
)

	)

218 
	#log_v¨_upd©e_°©e
 
	`JEMALLOC_N
(
log_v¨_upd©e_°©e
)

	)

219 
	#bu„º‹
 
	`JEMALLOC_N
(
bu„º‹
)

	)

220 
	#mÆloc_˝rötf
 
	`JEMALLOC_N
(
mÆloc_˝rötf
)

	)

221 
	#mÆloc_¥ötf
 
	`JEMALLOC_N
(
mÆloc_¥ötf
)

	)

222 
	#mÆloc_¢¥ötf
 
	`JEMALLOC_N
(
mÆloc_¢¥ötf
)

	)

223 
	#mÆloc_°πoumax
 
	`JEMALLOC_N
(
mÆloc_°πoumax
)

	)

224 
	#mÆloc_v˝rötf
 
	`JEMALLOC_N
(
mÆloc_v˝rötf
)

	)

225 
	#mÆloc_v¢¥ötf
 
	`JEMALLOC_N
(
mÆloc_v¢¥ötf
)

	)

226 
	#mÆloc_wrôe
 
	`JEMALLOC_N
(
mÆloc_wrôe
)

	)

227 
	#mÆloc_muãx_boŸ
 
	`JEMALLOC_N
(
mÆloc_muãx_boŸ
)

	)

228 
	#mÆloc_muãx_öô
 
	`JEMALLOC_N
(
mÆloc_muãx_öô
)

	)

229 
	#mÆloc_muãx_lock_¶ow
 
	`JEMALLOC_N
(
mÆloc_muãx_lock_¶ow
)

	)

230 
	#mÆloc_muãx_po°f‹k_chûd
 
	`JEMALLOC_N
(
mÆloc_muãx_po°f‹k_chûd
)

	)

231 
	#mÆloc_muãx_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
mÆloc_muãx_po°f‹k_∑ª¡
)

	)

232 
	#mÆloc_muãx_¥ef‹k
 
	`JEMALLOC_N
(
mÆloc_muãx_¥ef‹k
)

	)

233 
	#mÆloc_muãx_¥of_d©a_ª£t
 
	`JEMALLOC_N
(
mÆloc_muãx_¥of_d©a_ª£t
)

	)

234 
	#muãx_poﬁ_öô
 
	`JEMALLOC_N
(
muãx_poﬁ_öô
)

	)

235 
	#n°ime_add
 
	`JEMALLOC_N
(
n°ime_add
)

	)

236 
	#n°ime_com∑ª
 
	`JEMALLOC_N
(
n°ime_com∑ª
)

	)

237 
	#n°ime_c›y
 
	`JEMALLOC_N
(
n°ime_c›y
)

	)

238 
	#n°ime_divide
 
	`JEMALLOC_N
(
n°ime_divide
)

	)

239 
	#n°ime_üdd
 
	`JEMALLOC_N
(
n°ime_üdd
)

	)

240 
	#n°ime_idivide
 
	`JEMALLOC_N
(
n°ime_idivide
)

	)

241 
	#n°ime_imu…ùly
 
	`JEMALLOC_N
(
n°ime_imu…ùly
)

	)

242 
	#n°ime_öô
 
	`JEMALLOC_N
(
n°ime_öô
)

	)

243 
	#n°ime_öô2
 
	`JEMALLOC_N
(
n°ime_öô2
)

	)

244 
	#n°ime_isubåa˘
 
	`JEMALLOC_N
(
n°ime_isubåa˘
)

	)

245 
	#n°ime_m⁄Ÿ⁄ic
 
	`JEMALLOC_N
(
n°ime_m⁄Ÿ⁄ic
)

	)

246 
	#n°ime_m£c
 
	`JEMALLOC_N
(
n°ime_m£c
)

	)

247 
	#n°ime_ns
 
	`JEMALLOC_N
(
n°ime_ns
)

	)

248 
	#n°ime_n£c
 
	`JEMALLOC_N
(
n°ime_n£c
)

	)

249 
	#n°ime_£c
 
	`JEMALLOC_N
(
n°ime_£c
)

	)

250 
	#n°ime_subåa˘
 
	`JEMALLOC_N
(
n°ime_subåa˘
)

	)

251 
	#n°ime_upd©e
 
	`JEMALLOC_N
(
n°ime_upd©e
)

	)

252 
	#∑ges_boŸ
 
	`JEMALLOC_N
(
∑ges_boŸ
)

	)

253 
	#∑ges_commô
 
	`JEMALLOC_N
(
∑ges_commô
)

	)

254 
	#∑ges_decommô
 
	`JEMALLOC_N
(
∑ges_decommô
)

	)

255 
	#∑ges_dodump
 
	`JEMALLOC_N
(
∑ges_dodump
)

	)

256 
	#∑ges_d⁄tdump
 
	`JEMALLOC_N
(
∑ges_d⁄tdump
)

	)

257 
	#∑ges_huge
 
	`JEMALLOC_N
(
∑ges_huge
)

	)

258 
	#∑ges_m≠
 
	`JEMALLOC_N
(
∑ges_m≠
)

	)

259 
	#∑ges_nohuge
 
	`JEMALLOC_N
(
∑ges_nohuge
)

	)

260 
	#∑ges_purge_f‹˚d
 
	`JEMALLOC_N
(
∑ges_purge_f‹˚d
)

	)

261 
	#∑ges_purge_œzy
 
	`JEMALLOC_N
(
∑ges_purge_œzy
)

	)

262 
	#∑ges_unm≠
 
	`JEMALLOC_N
(
∑ges_unm≠
)

	)

263 
	#thp_°©e_madvi£
 
	`JEMALLOC_N
(
thp_°©e_madvi£
)

	)

264 
	#bt2g˘x_mtx
 
	`JEMALLOC_N
(
bt2g˘x_mtx
)

	)

265 
	#bt_öô
 
	`JEMALLOC_N
(
bt_öô
)

	)

266 
	#lg_¥of_ßm∂e
 
	`JEMALLOC_N
(
lg_¥of_ßm∂e
)

	)

267 
	#›t_lg_¥of_öãrvÆ
 
	`JEMALLOC_N
(
›t_lg_¥of_öãrvÆ
)

	)

268 
	#›t_lg_¥of_ßm∂e
 
	`JEMALLOC_N
(
›t_lg_¥of_ßm∂e
)

	)

269 
	#›t_¥of
 
	`JEMALLOC_N
(
›t_¥of
)

	)

270 
	#›t_¥of_accum
 
	`JEMALLOC_N
(
›t_¥of_accum
)

	)

271 
	#›t_¥of_a˘ive
 
	`JEMALLOC_N
(
›t_¥of_a˘ive
)

	)

272 
	#›t_¥of_föÆ
 
	`JEMALLOC_N
(
›t_¥of_föÆ
)

	)

273 
	#›t_¥of_gdump
 
	`JEMALLOC_N
(
›t_¥of_gdump
)

	)

274 
	#›t_¥of_Àak
 
	`JEMALLOC_N
(
›t_¥of_Àak
)

	)

275 
	#›t_¥of_¥efix
 
	`JEMALLOC_N
(
›t_¥of_¥efix
)

	)

276 
	#›t_¥of_thªad_a˘ive_öô
 
	`JEMALLOC_N
(
›t_¥of_thªad_a˘ive_öô
)

	)

277 
	#¥of_accum_öô
 
	`JEMALLOC_N
(
¥of_accum_öô
)

	)

278 
	#¥of_a˘ive
 
	`JEMALLOC_N
(
¥of_a˘ive
)

	)

279 
	#¥of_a˘ive_gë
 
	`JEMALLOC_N
(
¥of_a˘ive_gë
)

	)

280 
	#¥of_a˘ive_£t
 
	`JEMALLOC_N
(
¥of_a˘ive_£t
)

	)

281 
	#¥of_Æloc_rﬁlback
 
	`JEMALLOC_N
(
¥of_Æloc_rﬁlback
)

	)

282 
	#¥of_backåa˚
 
	`JEMALLOC_N
(
¥of_backåa˚
)

	)

283 
	#¥of_boŸ0
 
	`JEMALLOC_N
(
¥of_boŸ0
)

	)

284 
	#¥of_boŸ1
 
	`JEMALLOC_N
(
¥of_boŸ1
)

	)

285 
	#¥of_boŸ2
 
	`JEMALLOC_N
(
¥of_boŸ2
)

	)

286 
	#¥of_dump_hódî
 
	`JEMALLOC_N
(
¥of_dump_hódî
)

	)

287 
	#¥of_dump_›í
 
	`JEMALLOC_N
(
¥of_dump_›í
)

	)

288 
	#¥of_‰ì_ßm∂ed_obje˘
 
	`JEMALLOC_N
(
¥of_‰ì_ßm∂ed_obje˘
)

	)

289 
	#¥of_gdump
 
	`JEMALLOC_N
(
¥of_gdump
)

	)

290 
	#¥of_gdump_gë
 
	`JEMALLOC_N
(
¥of_gdump_gë
)

	)

291 
	#¥of_gdump_£t
 
	`JEMALLOC_N
(
¥of_gdump_£t
)

	)

292 
	#¥of_gdump_vÆ
 
	`JEMALLOC_N
(
¥of_gdump_vÆ
)

	)

293 
	#¥of_idump
 
	`JEMALLOC_N
(
¥of_idump
)

	)

294 
	#¥of_öãrvÆ
 
	`JEMALLOC_N
(
¥of_öãrvÆ
)

	)

295 
	#¥of_lookup
 
	`JEMALLOC_N
(
¥of_lookup
)

	)

296 
	#¥of_mÆloc_ßm∂e_obje˘
 
	`JEMALLOC_N
(
¥of_mÆloc_ßm∂e_obje˘
)

	)

297 
	#¥of_mdump
 
	`JEMALLOC_N
(
¥of_mdump
)

	)

298 
	#¥of_po°f‹k_chûd
 
	`JEMALLOC_N
(
¥of_po°f‹k_chûd
)

	)

299 
	#¥of_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
¥of_po°f‹k_∑ª¡
)

	)

300 
	#¥of_¥ef‹k0
 
	`JEMALLOC_N
(
¥of_¥ef‹k0
)

	)

301 
	#¥of_¥ef‹k1
 
	`JEMALLOC_N
(
¥of_¥ef‹k1
)

	)

302 
	#¥of_ª£t
 
	`JEMALLOC_N
(
¥of_ª£t
)

	)

303 
	#¥of_ßm∂e_thªshﬁd_upd©e
 
	`JEMALLOC_N
(
¥of_ßm∂e_thªshﬁd_upd©e
)

	)

304 
	#¥of_td©a_˛ónup
 
	`JEMALLOC_N
(
¥of_td©a_˛ónup
)

	)

305 
	#¥of_td©a_öô
 
	`JEMALLOC_N
(
¥of_td©a_öô
)

	)

306 
	#¥of_td©a_ªöô
 
	`JEMALLOC_N
(
¥of_td©a_ªöô
)

	)

307 
	#¥of_thªad_a˘ive_gë
 
	`JEMALLOC_N
(
¥of_thªad_a˘ive_gë
)

	)

308 
	#¥of_thªad_a˘ive_öô_gë
 
	`JEMALLOC_N
(
¥of_thªad_a˘ive_öô_gë
)

	)

309 
	#¥of_thªad_a˘ive_öô_£t
 
	`JEMALLOC_N
(
¥of_thªad_a˘ive_öô_£t
)

	)

310 
	#¥of_thªad_a˘ive_£t
 
	`JEMALLOC_N
(
¥of_thªad_a˘ive_£t
)

	)

311 
	#¥of_thªad_«me_gë
 
	`JEMALLOC_N
(
¥of_thªad_«me_gë
)

	)

312 
	#¥of_thªad_«me_£t
 
	`JEMALLOC_N
(
¥of_thªad_«me_£t
)

	)

313 
	#πªe_˘x_d©a_öô
 
	`JEMALLOC_N
(
πªe_˘x_d©a_öô
)

	)

314 
	#πªe_Àaf_Æloc
 
	`JEMALLOC_N
(
πªe_Àaf_Æloc
)

	)

315 
	#πªe_Àaf_dÆloc
 
	`JEMALLOC_N
(
πªe_Àaf_dÆloc
)

	)

316 
	#πªe_Àaf_ñm_lookup_h¨d
 
	`JEMALLOC_N
(
πªe_Àaf_ñm_lookup_h¨d
)

	)

317 
	#πªe_√w
 
	`JEMALLOC_N
(
πªe_√w
)

	)

318 
	#πªe_node_Æloc
 
	`JEMALLOC_N
(
πªe_node_Æloc
)

	)

319 
	#πªe_node_dÆloc
 
	`JEMALLOC_N
(
πªe_node_dÆloc
)

	)

320 
	#¨ía_muãx_«mes
 
	`JEMALLOC_N
(
¨ía_muãx_«mes
)

	)

321 
	#globÆ_muãx_«mes
 
	`JEMALLOC_N
(
globÆ_muãx_«mes
)

	)

322 
	#›t_°©s_¥öt
 
	`JEMALLOC_N
(
›t_°©s_¥öt
)

	)

323 
	#›t_°©s_¥öt_›ts
 
	`JEMALLOC_N
(
›t_°©s_¥öt_›ts
)

	)

324 
	#°©s_¥öt
 
	`JEMALLOC_N
(
°©s_¥öt
)

	)

325 
	#sz_ödex2size_èb
 
	`JEMALLOC_N
(
sz_ödex2size_èb
)

	)

326 
	#sz_pöd2sz_èb
 
	`JEMALLOC_N
(
sz_pöd2sz_èb
)

	)

327 
	#sz_size2ödex_èb
 
	`JEMALLOC_N
(
sz_size2ödex_èb
)

	)

328 
	#nhbös
 
	`JEMALLOC_N
(
nhbös
)

	)

329 
	#›t_lg_tˇche_max
 
	`JEMALLOC_N
(
›t_lg_tˇche_max
)

	)

330 
	#›t_tˇche
 
	`JEMALLOC_N
(
›t_tˇche
)

	)

331 
	#tˇche_Æloc_smÆl_h¨d
 
	`JEMALLOC_N
(
tˇche_Æloc_smÆl_h¨d
)

	)

332 
	#tˇche_¨ía_assocüã
 
	`JEMALLOC_N
(
tˇche_¨ía_assocüã
)

	)

333 
	#tˇche_¨ía_ªassocüã
 
	`JEMALLOC_N
(
tˇche_¨ía_ªassocüã
)

	)

334 
	#tˇche_bö_Êush_œrge
 
	`JEMALLOC_N
(
tˇche_bö_Êush_œrge
)

	)

335 
	#tˇche_bö_Êush_smÆl
 
	`JEMALLOC_N
(
tˇche_bö_Êush_smÆl
)

	)

336 
	#tˇche_bö_öfo
 
	`JEMALLOC_N
(
tˇche_bö_öfo
)

	)

337 
	#tˇche_boŸ
 
	`JEMALLOC_N
(
tˇche_boŸ
)

	)

338 
	#tˇche_˛ónup
 
	`JEMALLOC_N
(
tˇche_˛ónup
)

	)

339 
	#tˇche_¸óã_ex∂icô
 
	`JEMALLOC_N
(
tˇche_¸óã_ex∂icô
)

	)

340 
	#tˇche_evít_h¨d
 
	`JEMALLOC_N
(
tˇche_evít_h¨d
)

	)

341 
	#tˇche_Êush
 
	`JEMALLOC_N
(
tˇche_Êush
)

	)

342 
	#tˇche_max˛ass
 
	`JEMALLOC_N
(
tˇche_max˛ass
)

	)

343 
	#tˇche_po°f‹k_chûd
 
	`JEMALLOC_N
(
tˇche_po°f‹k_chûd
)

	)

344 
	#tˇche_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
tˇche_po°f‹k_∑ª¡
)

	)

345 
	#tˇche_¥ef‹k
 
	`JEMALLOC_N
(
tˇche_¥ef‹k
)

	)

346 
	#tˇches
 
	`JEMALLOC_N
(
tˇches
)

	)

347 
	#tˇche_ßŒoc
 
	`JEMALLOC_N
(
tˇche_ßŒoc
)

	)

348 
	#tˇches_¸óã
 
	`JEMALLOC_N
(
tˇches_¸óã
)

	)

349 
	#tˇches_de°roy
 
	`JEMALLOC_N
(
tˇches_de°roy
)

	)

350 
	#tˇches_Êush
 
	`JEMALLOC_N
(
tˇches_Êush
)

	)

351 
	#tˇche_°©s_mîge
 
	`JEMALLOC_N
(
tˇche_°©s_mîge
)

	)

352 
	#tsd_tˇche_d©a_öô
 
	`JEMALLOC_N
(
tsd_tˇche_d©a_öô
)

	)

353 
	#tsd_tˇche_íabÀd_d©a_öô
 
	`JEMALLOC_N
(
tsd_tˇche_íabÀd_d©a_öô
)

	)

354 
	#mÆloc_tsd_boŸ0
 
	`JEMALLOC_N
(
mÆloc_tsd_boŸ0
)

	)

355 
	#mÆloc_tsd_boŸ1
 
	`JEMALLOC_N
(
mÆloc_tsd_boŸ1
)

	)

356 
	#mÆloc_tsd_˛ónup_ªgi°î
 
	`JEMALLOC_N
(
mÆloc_tsd_˛ónup_ªgi°î
)

	)

357 
	#mÆloc_tsd_dÆloc
 
	`JEMALLOC_N
(
mÆloc_tsd_dÆloc
)

	)

358 
	#mÆloc_tsd_mÆloc
 
	`JEMALLOC_N
(
mÆloc_tsd_mÆloc
)

	)

359 
	#tsd_boŸed
 
	`JEMALLOC_N
(
tsd_boŸed
)

	)

360 
	#tsd_˛ónup
 
	`JEMALLOC_N
(
tsd_˛ónup
)

	)

361 
	#tsd_„tch_¶ow
 
	`JEMALLOC_N
(
tsd_„tch_¶ow
)

	)

362 
	#tsd_¶ow_upd©e
 
	`JEMALLOC_N
(
tsd_¶ow_upd©e
)

	)

363 
	#tsd_és
 
	`JEMALLOC_N
(
tsd_és
)

	)

364 
	#tsd_tsd
 
	`JEMALLOC_N
(
tsd_tsd
)

	)

365 
	#wô√ss_dïth_îr‹
 
	`JEMALLOC_N
(
wô√ss_dïth_îr‹
)

	)

366 
	#wô√s£s_˛ónup
 
	`JEMALLOC_N
(
wô√s£s_˛ónup
)

	)

367 
	#wô√ss_öô
 
	`JEMALLOC_N
(
wô√ss_öô
)

	)

368 
	#wô√ss_lock_îr‹
 
	`JEMALLOC_N
(
wô√ss_lock_îr‹
)

	)

369 
	#wô√ss_nŸ_ow√r_îr‹
 
	`JEMALLOC_N
(
wô√ss_nŸ_ow√r_îr‹
)

	)

370 
	#wô√ss_ow√r_îr‹
 
	`JEMALLOC_N
(
wô√ss_ow√r_îr‹
)

	)

371 
	#wô√ss_po°f‹k_chûd
 
	`JEMALLOC_N
(
wô√ss_po°f‹k_chûd
)

	)

372 
	#wô√ss_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
wô√ss_po°f‹k_∑ª¡
)

	)

373 
	#wô√ss_¥ef‹k
 
	`JEMALLOC_N
(
wô√ss_¥ef‹k
)

	)

	@include/jemalloc/internal/private_namespace.h

1 
	#a0dÆloc
 
	`JEMALLOC_N
(
a0dÆloc
)

	)

2 
	#a0mÆloc
 
	`JEMALLOC_N
(
a0mÆloc
)

	)

3 
	#¨ía_choo£_h¨d
 
	`JEMALLOC_N
(
¨ía_choo£_h¨d
)

	)

4 
	#¨ía_˛ónup
 
	`JEMALLOC_N
(
¨ía_˛ónup
)

	)

5 
	#¨ía_öô
 
	`JEMALLOC_N
(
¨ía_öô
)

	)

6 
	#¨ía_migøã
 
	`JEMALLOC_N
(
¨ía_migøã
)

	)

7 
	#¨ías
 
	`JEMALLOC_N
(
¨ías
)

	)

8 
	#¨ía_£t
 
	`JEMALLOC_N
(
¨ía_£t
)

	)

9 
	#¨ías_lock
 
	`JEMALLOC_N
(
¨ías_lock
)

	)

10 
	#¨ías_td©a_˛ónup
 
	`JEMALLOC_N
(
¨ías_td©a_˛ónup
)

	)

11 
	#¨ía_td©a_gë_h¨d
 
	`JEMALLOC_N
(
¨ía_td©a_gë_h¨d
)

	)

12 
	#boŸ°øp_ˇŒoc
 
	`JEMALLOC_N
(
boŸ°øp_ˇŒoc
)

	)

13 
	#boŸ°øp_‰ì
 
	`JEMALLOC_N
(
boŸ°øp_‰ì
)

	)

14 
	#boŸ°øp_mÆloc
 
	`JEMALLOC_N
(
boŸ°øp_mÆloc
)

	)

15 
	#üª«_˛ónup
 
	`JEMALLOC_N
(
üª«_˛ónup
)

	)

16 
	#jemÆloc_po°f‹k_chûd
 
	`JEMALLOC_N
(
jemÆloc_po°f‹k_chûd
)

	)

17 
	#jemÆloc_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
jemÆloc_po°f‹k_∑ª¡
)

	)

18 
	#jemÆloc_¥ef‹k
 
	`JEMALLOC_N
(
jemÆloc_¥ef‹k
)

	)

19 
	#mÆloc_öôülized
 
	`JEMALLOC_N
(
mÆloc_öôülized
)

	)

20 
	#mÆloc_¶ow
 
	`JEMALLOC_N
(
mÆloc_¶ow
)

	)

21 
	#«ª«s_auto
 
	`JEMALLOC_N
(
«ª«s_auto
)

	)

22 
	#«ª«s_tŸÆ_gë
 
	`JEMALLOC_N
(
«ª«s_tŸÆ_gë
)

	)

23 
	#n˝us
 
	`JEMALLOC_N
(
n˝us
)

	)

24 
	#›t_ab‹t
 
	`JEMALLOC_N
(
›t_ab‹t
)

	)

25 
	#›t_ab‹t_c⁄f
 
	`JEMALLOC_N
(
›t_ab‹t_c⁄f
)

	)

26 
	#›t_junk
 
	`JEMALLOC_N
(
›t_junk
)

	)

27 
	#›t_junk_Æloc
 
	`JEMALLOC_N
(
›t_junk_Æloc
)

	)

28 
	#›t_junk_‰ì
 
	`JEMALLOC_N
(
›t_junk_‰ì
)

	)

29 
	#›t_«ª«s
 
	`JEMALLOC_N
(
›t_«ª«s
)

	)

30 
	#›t_uåa˚
 
	`JEMALLOC_N
(
›t_uåa˚
)

	)

31 
	#›t_xmÆloc
 
	`JEMALLOC_N
(
›t_xmÆloc
)

	)

32 
	#›t_zîo
 
	`JEMALLOC_N
(
›t_zîo
)

	)

33 
	#¨ía_Æloc_junk_smÆl
 
	`JEMALLOC_N
(
¨ía_Æloc_junk_smÆl
)

	)

34 
	#¨ía_basic_°©s_mîge
 
	`JEMALLOC_N
(
¨ía_basic_°©s_mîge
)

	)

35 
	#¨ía_boŸ
 
	`JEMALLOC_N
(
¨ía_boŸ
)

	)

36 
	#¨ía_dÆloc_bö_junked_locked
 
	`JEMALLOC_N
(
¨ía_dÆloc_bö_junked_locked
)

	)

37 
	#¨ía_dÆloc_junk_smÆl
 
	`JEMALLOC_N
(
¨ía_dÆloc_junk_smÆl
)

	)

38 
	#¨ía_dÆloc_¥omŸed
 
	`JEMALLOC_N
(
¨ía_dÆloc_¥omŸed
)

	)

39 
	#¨ía_dÆloc_smÆl
 
	`JEMALLOC_N
(
¨ía_dÆloc_smÆl
)

	)

40 
	#¨ía_deˇy
 
	`JEMALLOC_N
(
¨ía_deˇy
)

	)

41 
	#¨ía_de°roy
 
	`JEMALLOC_N
(
¨ía_de°roy
)

	)

42 
	#¨ía_dúty_deˇy_ms_deÁu…_gë
 
	`JEMALLOC_N
(
¨ía_dúty_deˇy_ms_deÁu…_gë
)

	)

43 
	#¨ía_dúty_deˇy_ms_deÁu…_£t
 
	`JEMALLOC_N
(
¨ía_dúty_deˇy_ms_deÁu…_£t
)

	)

44 
	#¨ía_dúty_deˇy_ms_gë
 
	`JEMALLOC_N
(
¨ía_dúty_deˇy_ms_gë
)

	)

45 
	#¨ía_dúty_deˇy_ms_£t
 
	`JEMALLOC_N
(
¨ía_dúty_deˇy_ms_£t
)

	)

46 
	#¨ía_dss_¥ec_gë
 
	`JEMALLOC_N
(
¨ía_dss_¥ec_gë
)

	)

47 
	#¨ía_dss_¥ec_£t
 
	`JEMALLOC_N
(
¨ía_dss_¥ec_£t
)

	)

48 
	#¨ía_exã¡_Æloc_œrge
 
	`JEMALLOC_N
(
¨ía_exã¡_Æloc_œrge
)

	)

49 
	#¨ía_exã¡_dÆloc_œrge_¥ï
 
	`JEMALLOC_N
(
¨ía_exã¡_dÆloc_œrge_¥ï
)

	)

50 
	#¨ía_exã¡_øŒoc_œrge_ex∑nd
 
	`JEMALLOC_N
(
¨ía_exã¡_øŒoc_œrge_ex∑nd
)

	)

51 
	#¨ía_exã¡_øŒoc_œrge_shrök
 
	`JEMALLOC_N
(
¨ía_exã¡_øŒoc_œrge_shrök
)

	)

52 
	#¨ía_exã¡s_dúty_dÆloc
 
	`JEMALLOC_N
(
¨ía_exã¡s_dúty_dÆloc
)

	)

53 
	#¨ía_exã¡_¢_√xt
 
	`JEMALLOC_N
(
¨ía_exã¡_¢_√xt
)

	)

54 
	#¨ía_mÆloc_h¨d
 
	`JEMALLOC_N
(
¨ía_mÆloc_h¨d
)

	)

55 
	#¨ía_muzzy_deˇy_ms_deÁu…_gë
 
	`JEMALLOC_N
(
¨ía_muzzy_deˇy_ms_deÁu…_gë
)

	)

56 
	#¨ía_muzzy_deˇy_ms_deÁu…_£t
 
	`JEMALLOC_N
(
¨ía_muzzy_deˇy_ms_deÁu…_£t
)

	)

57 
	#¨ía_muzzy_deˇy_ms_gë
 
	`JEMALLOC_N
(
¨ía_muzzy_deˇy_ms_gë
)

	)

58 
	#¨ía_muzzy_deˇy_ms_£t
 
	`JEMALLOC_N
(
¨ía_muzzy_deˇy_ms_£t
)

	)

59 
	#¨ía_√w
 
	`JEMALLOC_N
(
¨ía_√w
)

	)

60 
	#¨ía_¡hªads_dec
 
	`JEMALLOC_N
(
¨ía_¡hªads_dec
)

	)

61 
	#¨ía_¡hªads_gë
 
	`JEMALLOC_N
(
¨ía_¡hªads_gë
)

	)

62 
	#¨ía_¡hªads_öc
 
	`JEMALLOC_N
(
¨ía_¡hªads_öc
)

	)

63 
	#¨ía_∑Œoc
 
	`JEMALLOC_N
(
¨ía_∑Œoc
)

	)

64 
	#¨ía_po°f‹k_chûd
 
	`JEMALLOC_N
(
¨ía_po°f‹k_chûd
)

	)

65 
	#¨ía_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
¨ía_po°f‹k_∑ª¡
)

	)

66 
	#¨ía_¥ef‹k0
 
	`JEMALLOC_N
(
¨ía_¥ef‹k0
)

	)

67 
	#¨ía_¥ef‹k1
 
	`JEMALLOC_N
(
¨ía_¥ef‹k1
)

	)

68 
	#¨ía_¥ef‹k2
 
	`JEMALLOC_N
(
¨ía_¥ef‹k2
)

	)

69 
	#¨ía_¥ef‹k3
 
	`JEMALLOC_N
(
¨ía_¥ef‹k3
)

	)

70 
	#¨ía_¥ef‹k4
 
	`JEMALLOC_N
(
¨ía_¥ef‹k4
)

	)

71 
	#¨ía_¥ef‹k5
 
	`JEMALLOC_N
(
¨ía_¥ef‹k5
)

	)

72 
	#¨ía_¥ef‹k6
 
	`JEMALLOC_N
(
¨ía_¥ef‹k6
)

	)

73 
	#¨ía_¥ef‹k7
 
	`JEMALLOC_N
(
¨ía_¥ef‹k7
)

	)

74 
	#¨ía_¥of_¥omŸe
 
	`JEMALLOC_N
(
¨ía_¥of_¥omŸe
)

	)

75 
	#¨ía_øŒoc
 
	`JEMALLOC_N
(
¨ía_øŒoc
)

	)

76 
	#¨ía_øŒoc_no_move
 
	`JEMALLOC_N
(
¨ía_øŒoc_no_move
)

	)

77 
	#¨ía_ª£t
 
	`JEMALLOC_N
(
¨ía_ª£t
)

	)

78 
	#¨ía_ªèö_grow_limô_gë_£t
 
	`JEMALLOC_N
(
¨ía_ªèö_grow_limô_gë_£t
)

	)

79 
	#¨ía_°©s_mîge
 
	`JEMALLOC_N
(
¨ía_°©s_mîge
)

	)

80 
	#¨ía_tˇche_fûl_smÆl
 
	`JEMALLOC_N
(
¨ía_tˇche_fûl_smÆl
)

	)

81 
	#h_°ïs
 
	`JEMALLOC_N
(
h_°ïs
)

	)

82 
	#›t_dúty_deˇy_ms
 
	`JEMALLOC_N
(
›t_dúty_deˇy_ms
)

	)

83 
	#›t_muzzy_deˇy_ms
 
	`JEMALLOC_N
(
›t_muzzy_deˇy_ms
)

	)

84 
	#›t_≥r˝u_¨ía
 
	`JEMALLOC_N
(
›t_≥r˝u_¨ía
)

	)

85 
	#≥r˝u_¨ía_mode_«mes
 
	`JEMALLOC_N
(
≥r˝u_¨ía_mode_«mes
)

	)

86 
	#background_thªad_boŸ0
 
	`JEMALLOC_N
(
background_thªad_boŸ0
)

	)

87 
	#background_thªad_boŸ1
 
	`JEMALLOC_N
(
background_thªad_boŸ1
)

	)

88 
	#background_thªad_¸óã
 
	`JEMALLOC_N
(
background_thªad_¸óã
)

	)

89 
	#background_thªad_˘l_öô
 
	`JEMALLOC_N
(
background_thªad_˘l_öô
)

	)

90 
	#background_thªad_íabÀd_°©e
 
	`JEMALLOC_N
(
background_thªad_íabÀd_°©e
)

	)

91 
	#background_thªad_öfo
 
	`JEMALLOC_N
(
background_thªad_öfo
)

	)

92 
	#background_thªad_öãrvÆ_check
 
	`JEMALLOC_N
(
background_thªad_öãrvÆ_check
)

	)

93 
	#background_thªad_lock
 
	`JEMALLOC_N
(
background_thªad_lock
)

	)

94 
	#background_thªad_po°f‹k_chûd
 
	`JEMALLOC_N
(
background_thªad_po°f‹k_chûd
)

	)

95 
	#background_thªad_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
background_thªad_po°f‹k_∑ª¡
)

	)

96 
	#background_thªad_¥ef‹k0
 
	`JEMALLOC_N
(
background_thªad_¥ef‹k0
)

	)

97 
	#background_thªad_¥ef‹k1
 
	`JEMALLOC_N
(
background_thªad_¥ef‹k1
)

	)

98 
	#background_thªads_dißbÀ
 
	`JEMALLOC_N
(
background_thªads_dißbÀ
)

	)

99 
	#background_thªads_íabÀ
 
	`JEMALLOC_N
(
background_thªads_íabÀ
)

	)

100 
	#background_thªad_°©s_ªad
 
	`JEMALLOC_N
(
background_thªad_°©s_ªad
)

	)

101 
	#ˇn_íabÀ_background_thªad
 
	`JEMALLOC_N
(
ˇn_íabÀ_background_thªad
)

	)

102 
	#n_background_thªads
 
	`JEMALLOC_N
(
n_background_thªads
)

	)

103 
	#›t_background_thªad
 
	`JEMALLOC_N
(
›t_background_thªad
)

	)

104 
	#±hªad_¸óã_wøµî
 
	`JEMALLOC_N
(
±hªad_¸óã_wøµî
)

	)

105 
	#b0gë
 
	`JEMALLOC_N
(
b0gë
)

	)

106 
	#ba£_Æloc
 
	`JEMALLOC_N
(
ba£_Æloc
)

	)

107 
	#ba£_Æloc_exã¡
 
	`JEMALLOC_N
(
ba£_Æloc_exã¡
)

	)

108 
	#ba£_boŸ
 
	`JEMALLOC_N
(
ba£_boŸ
)

	)

109 
	#ba£_dñëe
 
	`JEMALLOC_N
(
ba£_dñëe
)

	)

110 
	#ba£_exã¡_hooks_gë
 
	`JEMALLOC_N
(
ba£_exã¡_hooks_gë
)

	)

111 
	#ba£_exã¡_hooks_£t
 
	`JEMALLOC_N
(
ba£_exã¡_hooks_£t
)

	)

112 
	#ba£_√w
 
	`JEMALLOC_N
(
ba£_√w
)

	)

113 
	#ba£_po°f‹k_chûd
 
	`JEMALLOC_N
(
ba£_po°f‹k_chûd
)

	)

114 
	#ba£_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
ba£_po°f‹k_∑ª¡
)

	)

115 
	#ba£_¥ef‹k
 
	`JEMALLOC_N
(
ba£_¥ef‹k
)

	)

116 
	#ba£_°©s_gë
 
	`JEMALLOC_N
(
ba£_°©s_gë
)

	)

117 
	#mëad©a_thp_mode_«mes
 
	`JEMALLOC_N
(
mëad©a_thp_mode_«mes
)

	)

118 
	#›t_mëad©a_thp
 
	`JEMALLOC_N
(
›t_mëad©a_thp
)

	)

119 
	#bö_öfos
 
	`JEMALLOC_N
(
bö_öfos
)

	)

120 
	#bö_öô
 
	`JEMALLOC_N
(
bö_öô
)

	)

121 
	#bö_po°f‹k_chûd
 
	`JEMALLOC_N
(
bö_po°f‹k_chûd
)

	)

122 
	#bö_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
bö_po°f‹k_∑ª¡
)

	)

123 
	#bö_¥ef‹k
 
	`JEMALLOC_N
(
bö_¥ef‹k
)

	)

124 
	#bôm≠_öfo_öô
 
	`JEMALLOC_N
(
bôm≠_öfo_öô
)

	)

125 
	#bôm≠_öô
 
	`JEMALLOC_N
(
bôm≠_öô
)

	)

126 
	#bôm≠_size
 
	`JEMALLOC_N
(
bôm≠_size
)

	)

127 
	#ckh_cou¡
 
	`JEMALLOC_N
(
ckh_cou¡
)

	)

128 
	#ckh_dñëe
 
	`JEMALLOC_N
(
ckh_dñëe
)

	)

129 
	#ckh_ö£π
 
	`JEMALLOC_N
(
ckh_ö£π
)

	)

130 
	#ckh_ôî
 
	`JEMALLOC_N
(
ckh_ôî
)

	)

131 
	#ckh_√w
 
	`JEMALLOC_N
(
ckh_√w
)

	)

132 
	#ckh_poöãr_hash
 
	`JEMALLOC_N
(
ckh_poöãr_hash
)

	)

133 
	#ckh_poöãr_keycomp
 
	`JEMALLOC_N
(
ckh_poöãr_keycomp
)

	)

134 
	#ckh_ªmove
 
	`JEMALLOC_N
(
ckh_ªmove
)

	)

135 
	#ckh_£¨ch
 
	`JEMALLOC_N
(
ckh_£¨ch
)

	)

136 
	#ckh_°rög_hash
 
	`JEMALLOC_N
(
ckh_°rög_hash
)

	)

137 
	#ckh_°rög_keycomp
 
	`JEMALLOC_N
(
ckh_°rög_keycomp
)

	)

138 
	#˘l_boŸ
 
	`JEMALLOC_N
(
˘l_boŸ
)

	)

139 
	#˘l_bymib
 
	`JEMALLOC_N
(
˘l_bymib
)

	)

140 
	#˘l_by«me
 
	`JEMALLOC_N
(
˘l_by«me
)

	)

141 
	#˘l_«mëomib
 
	`JEMALLOC_N
(
˘l_«mëomib
)

	)

142 
	#˘l_po°f‹k_chûd
 
	`JEMALLOC_N
(
˘l_po°f‹k_chûd
)

	)

143 
	#˘l_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
˘l_po°f‹k_∑ª¡
)

	)

144 
	#˘l_¥ef‹k
 
	`JEMALLOC_N
(
˘l_¥ef‹k
)

	)

145 
	#div_öô
 
	`JEMALLOC_N
(
div_öô
)

	)

146 
	#exã¡_Æloc
 
	`JEMALLOC_N
(
exã¡_Æloc
)

	)

147 
	#exã¡_Æloc_wøµî
 
	`JEMALLOC_N
(
exã¡_Æloc_wøµî
)

	)

148 
	#exã¡_avaû_™y
 
	`JEMALLOC_N
(
exã¡_avaû_™y
)

	)

149 
	#exã¡_avaû_em±y
 
	`JEMALLOC_N
(
exã¡_avaû_em±y
)

	)

150 
	#exã¡_avaû_fú°
 
	`JEMALLOC_N
(
exã¡_avaû_fú°
)

	)

151 
	#exã¡_avaû_ö£π
 
	`JEMALLOC_N
(
exã¡_avaû_ö£π
)

	)

152 
	#exã¡_avaû_√w
 
	`JEMALLOC_N
(
exã¡_avaû_√w
)

	)

153 
	#exã¡_avaû_ªmove
 
	`JEMALLOC_N
(
exã¡_avaû_ªmove
)

	)

154 
	#exã¡_avaû_ªmove_™y
 
	`JEMALLOC_N
(
exã¡_avaû_ªmove_™y
)

	)

155 
	#exã¡_avaû_ªmove_fú°
 
	`JEMALLOC_N
(
exã¡_avaû_ªmove_fú°
)

	)

156 
	#exã¡_boŸ
 
	`JEMALLOC_N
(
exã¡_boŸ
)

	)

157 
	#exã¡_commô_wøµî
 
	`JEMALLOC_N
(
exã¡_commô_wøµî
)

	)

158 
	#exã¡_dÆloc
 
	`JEMALLOC_N
(
exã¡_dÆloc
)

	)

159 
	#exã¡_dÆloc_g≠
 
	`JEMALLOC_N
(
exã¡_dÆloc_g≠
)

	)

160 
	#exã¡_dÆloc_wøµî
 
	`JEMALLOC_N
(
exã¡_dÆloc_wøµî
)

	)

161 
	#exã¡_decommô_wøµî
 
	`JEMALLOC_N
(
exã¡_decommô_wøµî
)

	)

162 
	#exã¡_de°roy_wøµî
 
	`JEMALLOC_N
(
exã¡_de°roy_wøµî
)

	)

163 
	#exã¡_hóp_™y
 
	`JEMALLOC_N
(
exã¡_hóp_™y
)

	)

164 
	#exã¡_hóp_em±y
 
	`JEMALLOC_N
(
exã¡_hóp_em±y
)

	)

165 
	#exã¡_hóp_fú°
 
	`JEMALLOC_N
(
exã¡_hóp_fú°
)

	)

166 
	#exã¡_hóp_ö£π
 
	`JEMALLOC_N
(
exã¡_hóp_ö£π
)

	)

167 
	#exã¡_hóp_√w
 
	`JEMALLOC_N
(
exã¡_hóp_√w
)

	)

168 
	#exã¡_hóp_ªmove
 
	`JEMALLOC_N
(
exã¡_hóp_ªmove
)

	)

169 
	#exã¡_hóp_ªmove_™y
 
	`JEMALLOC_N
(
exã¡_hóp_ªmove_™y
)

	)

170 
	#exã¡_hóp_ªmove_fú°
 
	`JEMALLOC_N
(
exã¡_hóp_ªmove_fú°
)

	)

171 
	#exã¡_hooks_deÁu…
 
	`JEMALLOC_N
(
exã¡_hooks_deÁu…
)

	)

172 
	#exã¡_hooks_gë
 
	`JEMALLOC_N
(
exã¡_hooks_gë
)

	)

173 
	#exã¡_hooks_£t
 
	`JEMALLOC_N
(
exã¡_hooks_£t
)

	)

174 
	#exã¡_mîge_wøµî
 
	`JEMALLOC_N
(
exã¡_mîge_wøµî
)

	)

175 
	#exã¡_muãx_poﬁ
 
	`JEMALLOC_N
(
exã¡_muãx_poﬁ
)

	)

176 
	#exã¡_purge_f‹˚d_wøµî
 
	`JEMALLOC_N
(
exã¡_purge_f‹˚d_wøµî
)

	)

177 
	#exã¡_purge_œzy_wøµî
 
	`JEMALLOC_N
(
exã¡_purge_œzy_wøµî
)

	)

178 
	#exã¡s_Æloc
 
	`JEMALLOC_N
(
exã¡s_Æloc
)

	)

179 
	#exã¡s_dÆloc
 
	`JEMALLOC_N
(
exã¡s_dÆloc
)

	)

180 
	#exã¡s_evi˘
 
	`JEMALLOC_N
(
exã¡s_evi˘
)

	)

181 
	#exã¡s_öô
 
	`JEMALLOC_N
(
exã¡s_öô
)

	)

182 
	#exã¡s_≈ages_gë
 
	`JEMALLOC_N
(
exã¡s_≈ages_gë
)

	)

183 
	#exã¡_•lô_wøµî
 
	`JEMALLOC_N
(
exã¡_•lô_wøµî
)

	)

184 
	#exã¡s_po°f‹k_chûd
 
	`JEMALLOC_N
(
exã¡s_po°f‹k_chûd
)

	)

185 
	#exã¡s_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
exã¡s_po°f‹k_∑ª¡
)

	)

186 
	#exã¡s_¥ef‹k
 
	`JEMALLOC_N
(
exã¡s_¥ef‹k
)

	)

187 
	#exã¡s_πªe
 
	`JEMALLOC_N
(
exã¡s_πªe
)

	)

188 
	#exã¡s_°©e_gë
 
	`JEMALLOC_N
(
exã¡s_°©e_gë
)

	)

189 
	#›t_lg_exã¡_max_a˘ive_fô
 
	`JEMALLOC_N
(
›t_lg_exã¡_max_a˘ive_fô
)

	)

190 
	#dss_¥ec_«mes
 
	`JEMALLOC_N
(
dss_¥ec_«mes
)

	)

191 
	#exã¡_Æloc_dss
 
	`JEMALLOC_N
(
exã¡_Æloc_dss
)

	)

192 
	#exã¡_dss_boŸ
 
	`JEMALLOC_N
(
exã¡_dss_boŸ
)

	)

193 
	#exã¡_dss_mîgóbÀ
 
	`JEMALLOC_N
(
exã¡_dss_mîgóbÀ
)

	)

194 
	#exã¡_dss_¥ec_gë
 
	`JEMALLOC_N
(
exã¡_dss_¥ec_gë
)

	)

195 
	#exã¡_dss_¥ec_£t
 
	`JEMALLOC_N
(
exã¡_dss_¥ec_£t
)

	)

196 
	#exã¡_ö_dss
 
	`JEMALLOC_N
(
exã¡_ö_dss
)

	)

197 
	#›t_dss
 
	`JEMALLOC_N
(
›t_dss
)

	)

198 
	#exã¡_Æloc_mm≠
 
	`JEMALLOC_N
(
exã¡_Æloc_mm≠
)

	)

199 
	#exã¡_dÆloc_mm≠
 
	`JEMALLOC_N
(
exã¡_dÆloc_mm≠
)

	)

200 
	#›t_ªèö
 
	`JEMALLOC_N
(
›t_ªèö
)

	)

201 
	#hooks_¨ía_√w_hook
 
	`JEMALLOC_N
(
hooks_¨ía_√w_hook
)

	)

202 
	#hooks_libc_hook
 
	`JEMALLOC_N
(
hooks_libc_hook
)

	)

203 
	#œrge_dÆloc
 
	`JEMALLOC_N
(
œrge_dÆloc
)

	)

204 
	#œrge_dÆloc_föish
 
	`JEMALLOC_N
(
œrge_dÆloc_föish
)

	)

205 
	#œrge_dÆloc_junk
 
	`JEMALLOC_N
(
œrge_dÆloc_junk
)

	)

206 
	#œrge_dÆloc_maybe_junk
 
	`JEMALLOC_N
(
œrge_dÆloc_maybe_junk
)

	)

207 
	#œrge_dÆloc_¥ï_junked_locked
 
	`JEMALLOC_N
(
œrge_dÆloc_¥ï_junked_locked
)

	)

208 
	#œrge_mÆloc
 
	`JEMALLOC_N
(
œrge_mÆloc
)

	)

209 
	#œrge_∑Œoc
 
	`JEMALLOC_N
(
œrge_∑Œoc
)

	)

210 
	#œrge_¥of_t˘x_gë
 
	`JEMALLOC_N
(
œrge_¥of_t˘x_gë
)

	)

211 
	#œrge_¥of_t˘x_ª£t
 
	`JEMALLOC_N
(
œrge_¥of_t˘x_ª£t
)

	)

212 
	#œrge_¥of_t˘x_£t
 
	`JEMALLOC_N
(
œrge_¥of_t˘x_£t
)

	)

213 
	#œrge_øŒoc
 
	`JEMALLOC_N
(
œrge_øŒoc
)

	)

214 
	#œrge_øŒoc_no_move
 
	`JEMALLOC_N
(
œrge_øŒoc_no_move
)

	)

215 
	#œrge_ßŒoc
 
	`JEMALLOC_N
(
œrge_ßŒoc
)

	)

216 
	#log_öô_d⁄e
 
	`JEMALLOC_N
(
log_öô_d⁄e
)

	)

217 
	#log_v¨_«mes
 
	`JEMALLOC_N
(
log_v¨_«mes
)

	)

218 
	#log_v¨_upd©e_°©e
 
	`JEMALLOC_N
(
log_v¨_upd©e_°©e
)

	)

219 
	#bu„º‹
 
	`JEMALLOC_N
(
bu„º‹
)

	)

220 
	#mÆloc_˝rötf
 
	`JEMALLOC_N
(
mÆloc_˝rötf
)

	)

221 
	#mÆloc_¥ötf
 
	`JEMALLOC_N
(
mÆloc_¥ötf
)

	)

222 
	#mÆloc_¢¥ötf
 
	`JEMALLOC_N
(
mÆloc_¢¥ötf
)

	)

223 
	#mÆloc_°πoumax
 
	`JEMALLOC_N
(
mÆloc_°πoumax
)

	)

224 
	#mÆloc_v˝rötf
 
	`JEMALLOC_N
(
mÆloc_v˝rötf
)

	)

225 
	#mÆloc_v¢¥ötf
 
	`JEMALLOC_N
(
mÆloc_v¢¥ötf
)

	)

226 
	#mÆloc_wrôe
 
	`JEMALLOC_N
(
mÆloc_wrôe
)

	)

227 
	#mÆloc_muãx_boŸ
 
	`JEMALLOC_N
(
mÆloc_muãx_boŸ
)

	)

228 
	#mÆloc_muãx_öô
 
	`JEMALLOC_N
(
mÆloc_muãx_öô
)

	)

229 
	#mÆloc_muãx_lock_¶ow
 
	`JEMALLOC_N
(
mÆloc_muãx_lock_¶ow
)

	)

230 
	#mÆloc_muãx_po°f‹k_chûd
 
	`JEMALLOC_N
(
mÆloc_muãx_po°f‹k_chûd
)

	)

231 
	#mÆloc_muãx_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
mÆloc_muãx_po°f‹k_∑ª¡
)

	)

232 
	#mÆloc_muãx_¥ef‹k
 
	`JEMALLOC_N
(
mÆloc_muãx_¥ef‹k
)

	)

233 
	#mÆloc_muãx_¥of_d©a_ª£t
 
	`JEMALLOC_N
(
mÆloc_muãx_¥of_d©a_ª£t
)

	)

234 
	#muãx_poﬁ_öô
 
	`JEMALLOC_N
(
muãx_poﬁ_öô
)

	)

235 
	#n°ime_add
 
	`JEMALLOC_N
(
n°ime_add
)

	)

236 
	#n°ime_com∑ª
 
	`JEMALLOC_N
(
n°ime_com∑ª
)

	)

237 
	#n°ime_c›y
 
	`JEMALLOC_N
(
n°ime_c›y
)

	)

238 
	#n°ime_divide
 
	`JEMALLOC_N
(
n°ime_divide
)

	)

239 
	#n°ime_üdd
 
	`JEMALLOC_N
(
n°ime_üdd
)

	)

240 
	#n°ime_idivide
 
	`JEMALLOC_N
(
n°ime_idivide
)

	)

241 
	#n°ime_imu…ùly
 
	`JEMALLOC_N
(
n°ime_imu…ùly
)

	)

242 
	#n°ime_öô
 
	`JEMALLOC_N
(
n°ime_öô
)

	)

243 
	#n°ime_öô2
 
	`JEMALLOC_N
(
n°ime_öô2
)

	)

244 
	#n°ime_isubåa˘
 
	`JEMALLOC_N
(
n°ime_isubåa˘
)

	)

245 
	#n°ime_m⁄Ÿ⁄ic
 
	`JEMALLOC_N
(
n°ime_m⁄Ÿ⁄ic
)

	)

246 
	#n°ime_m£c
 
	`JEMALLOC_N
(
n°ime_m£c
)

	)

247 
	#n°ime_ns
 
	`JEMALLOC_N
(
n°ime_ns
)

	)

248 
	#n°ime_n£c
 
	`JEMALLOC_N
(
n°ime_n£c
)

	)

249 
	#n°ime_£c
 
	`JEMALLOC_N
(
n°ime_£c
)

	)

250 
	#n°ime_subåa˘
 
	`JEMALLOC_N
(
n°ime_subåa˘
)

	)

251 
	#n°ime_upd©e
 
	`JEMALLOC_N
(
n°ime_upd©e
)

	)

252 
	#∑ges_boŸ
 
	`JEMALLOC_N
(
∑ges_boŸ
)

	)

253 
	#∑ges_commô
 
	`JEMALLOC_N
(
∑ges_commô
)

	)

254 
	#∑ges_decommô
 
	`JEMALLOC_N
(
∑ges_decommô
)

	)

255 
	#∑ges_dodump
 
	`JEMALLOC_N
(
∑ges_dodump
)

	)

256 
	#∑ges_d⁄tdump
 
	`JEMALLOC_N
(
∑ges_d⁄tdump
)

	)

257 
	#∑ges_huge
 
	`JEMALLOC_N
(
∑ges_huge
)

	)

258 
	#∑ges_m≠
 
	`JEMALLOC_N
(
∑ges_m≠
)

	)

259 
	#∑ges_nohuge
 
	`JEMALLOC_N
(
∑ges_nohuge
)

	)

260 
	#∑ges_purge_f‹˚d
 
	`JEMALLOC_N
(
∑ges_purge_f‹˚d
)

	)

261 
	#∑ges_purge_œzy
 
	`JEMALLOC_N
(
∑ges_purge_œzy
)

	)

262 
	#∑ges_unm≠
 
	`JEMALLOC_N
(
∑ges_unm≠
)

	)

263 
	#thp_°©e_madvi£
 
	`JEMALLOC_N
(
thp_°©e_madvi£
)

	)

264 
	#bt2g˘x_mtx
 
	`JEMALLOC_N
(
bt2g˘x_mtx
)

	)

265 
	#bt_öô
 
	`JEMALLOC_N
(
bt_öô
)

	)

266 
	#lg_¥of_ßm∂e
 
	`JEMALLOC_N
(
lg_¥of_ßm∂e
)

	)

267 
	#›t_lg_¥of_öãrvÆ
 
	`JEMALLOC_N
(
›t_lg_¥of_öãrvÆ
)

	)

268 
	#›t_lg_¥of_ßm∂e
 
	`JEMALLOC_N
(
›t_lg_¥of_ßm∂e
)

	)

269 
	#›t_¥of
 
	`JEMALLOC_N
(
›t_¥of
)

	)

270 
	#›t_¥of_accum
 
	`JEMALLOC_N
(
›t_¥of_accum
)

	)

271 
	#›t_¥of_a˘ive
 
	`JEMALLOC_N
(
›t_¥of_a˘ive
)

	)

272 
	#›t_¥of_föÆ
 
	`JEMALLOC_N
(
›t_¥of_föÆ
)

	)

273 
	#›t_¥of_gdump
 
	`JEMALLOC_N
(
›t_¥of_gdump
)

	)

274 
	#›t_¥of_Àak
 
	`JEMALLOC_N
(
›t_¥of_Àak
)

	)

275 
	#›t_¥of_¥efix
 
	`JEMALLOC_N
(
›t_¥of_¥efix
)

	)

276 
	#›t_¥of_thªad_a˘ive_öô
 
	`JEMALLOC_N
(
›t_¥of_thªad_a˘ive_öô
)

	)

277 
	#¥of_accum_öô
 
	`JEMALLOC_N
(
¥of_accum_öô
)

	)

278 
	#¥of_a˘ive
 
	`JEMALLOC_N
(
¥of_a˘ive
)

	)

279 
	#¥of_a˘ive_gë
 
	`JEMALLOC_N
(
¥of_a˘ive_gë
)

	)

280 
	#¥of_a˘ive_£t
 
	`JEMALLOC_N
(
¥of_a˘ive_£t
)

	)

281 
	#¥of_Æloc_rﬁlback
 
	`JEMALLOC_N
(
¥of_Æloc_rﬁlback
)

	)

282 
	#¥of_backåa˚
 
	`JEMALLOC_N
(
¥of_backåa˚
)

	)

283 
	#¥of_boŸ0
 
	`JEMALLOC_N
(
¥of_boŸ0
)

	)

284 
	#¥of_boŸ1
 
	`JEMALLOC_N
(
¥of_boŸ1
)

	)

285 
	#¥of_boŸ2
 
	`JEMALLOC_N
(
¥of_boŸ2
)

	)

286 
	#¥of_dump_hódî
 
	`JEMALLOC_N
(
¥of_dump_hódî
)

	)

287 
	#¥of_dump_›í
 
	`JEMALLOC_N
(
¥of_dump_›í
)

	)

288 
	#¥of_‰ì_ßm∂ed_obje˘
 
	`JEMALLOC_N
(
¥of_‰ì_ßm∂ed_obje˘
)

	)

289 
	#¥of_gdump
 
	`JEMALLOC_N
(
¥of_gdump
)

	)

290 
	#¥of_gdump_gë
 
	`JEMALLOC_N
(
¥of_gdump_gë
)

	)

291 
	#¥of_gdump_£t
 
	`JEMALLOC_N
(
¥of_gdump_£t
)

	)

292 
	#¥of_gdump_vÆ
 
	`JEMALLOC_N
(
¥of_gdump_vÆ
)

	)

293 
	#¥of_idump
 
	`JEMALLOC_N
(
¥of_idump
)

	)

294 
	#¥of_öãrvÆ
 
	`JEMALLOC_N
(
¥of_öãrvÆ
)

	)

295 
	#¥of_lookup
 
	`JEMALLOC_N
(
¥of_lookup
)

	)

296 
	#¥of_mÆloc_ßm∂e_obje˘
 
	`JEMALLOC_N
(
¥of_mÆloc_ßm∂e_obje˘
)

	)

297 
	#¥of_mdump
 
	`JEMALLOC_N
(
¥of_mdump
)

	)

298 
	#¥of_po°f‹k_chûd
 
	`JEMALLOC_N
(
¥of_po°f‹k_chûd
)

	)

299 
	#¥of_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
¥of_po°f‹k_∑ª¡
)

	)

300 
	#¥of_¥ef‹k0
 
	`JEMALLOC_N
(
¥of_¥ef‹k0
)

	)

301 
	#¥of_¥ef‹k1
 
	`JEMALLOC_N
(
¥of_¥ef‹k1
)

	)

302 
	#¥of_ª£t
 
	`JEMALLOC_N
(
¥of_ª£t
)

	)

303 
	#¥of_ßm∂e_thªshﬁd_upd©e
 
	`JEMALLOC_N
(
¥of_ßm∂e_thªshﬁd_upd©e
)

	)

304 
	#¥of_td©a_˛ónup
 
	`JEMALLOC_N
(
¥of_td©a_˛ónup
)

	)

305 
	#¥of_td©a_öô
 
	`JEMALLOC_N
(
¥of_td©a_öô
)

	)

306 
	#¥of_td©a_ªöô
 
	`JEMALLOC_N
(
¥of_td©a_ªöô
)

	)

307 
	#¥of_thªad_a˘ive_gë
 
	`JEMALLOC_N
(
¥of_thªad_a˘ive_gë
)

	)

308 
	#¥of_thªad_a˘ive_öô_gë
 
	`JEMALLOC_N
(
¥of_thªad_a˘ive_öô_gë
)

	)

309 
	#¥of_thªad_a˘ive_öô_£t
 
	`JEMALLOC_N
(
¥of_thªad_a˘ive_öô_£t
)

	)

310 
	#¥of_thªad_a˘ive_£t
 
	`JEMALLOC_N
(
¥of_thªad_a˘ive_£t
)

	)

311 
	#¥of_thªad_«me_gë
 
	`JEMALLOC_N
(
¥of_thªad_«me_gë
)

	)

312 
	#¥of_thªad_«me_£t
 
	`JEMALLOC_N
(
¥of_thªad_«me_£t
)

	)

313 
	#πªe_˘x_d©a_öô
 
	`JEMALLOC_N
(
πªe_˘x_d©a_öô
)

	)

314 
	#πªe_Àaf_Æloc
 
	`JEMALLOC_N
(
πªe_Àaf_Æloc
)

	)

315 
	#πªe_Àaf_dÆloc
 
	`JEMALLOC_N
(
πªe_Àaf_dÆloc
)

	)

316 
	#πªe_Àaf_ñm_lookup_h¨d
 
	`JEMALLOC_N
(
πªe_Àaf_ñm_lookup_h¨d
)

	)

317 
	#πªe_√w
 
	`JEMALLOC_N
(
πªe_√w
)

	)

318 
	#πªe_node_Æloc
 
	`JEMALLOC_N
(
πªe_node_Æloc
)

	)

319 
	#πªe_node_dÆloc
 
	`JEMALLOC_N
(
πªe_node_dÆloc
)

	)

320 
	#¨ía_muãx_«mes
 
	`JEMALLOC_N
(
¨ía_muãx_«mes
)

	)

321 
	#globÆ_muãx_«mes
 
	`JEMALLOC_N
(
globÆ_muãx_«mes
)

	)

322 
	#›t_°©s_¥öt
 
	`JEMALLOC_N
(
›t_°©s_¥öt
)

	)

323 
	#›t_°©s_¥öt_›ts
 
	`JEMALLOC_N
(
›t_°©s_¥öt_›ts
)

	)

324 
	#°©s_¥öt
 
	`JEMALLOC_N
(
°©s_¥öt
)

	)

325 
	#sz_ödex2size_èb
 
	`JEMALLOC_N
(
sz_ödex2size_èb
)

	)

326 
	#sz_pöd2sz_èb
 
	`JEMALLOC_N
(
sz_pöd2sz_èb
)

	)

327 
	#sz_size2ödex_èb
 
	`JEMALLOC_N
(
sz_size2ödex_èb
)

	)

328 
	#nhbös
 
	`JEMALLOC_N
(
nhbös
)

	)

329 
	#›t_lg_tˇche_max
 
	`JEMALLOC_N
(
›t_lg_tˇche_max
)

	)

330 
	#›t_tˇche
 
	`JEMALLOC_N
(
›t_tˇche
)

	)

331 
	#tˇche_Æloc_smÆl_h¨d
 
	`JEMALLOC_N
(
tˇche_Æloc_smÆl_h¨d
)

	)

332 
	#tˇche_¨ía_assocüã
 
	`JEMALLOC_N
(
tˇche_¨ía_assocüã
)

	)

333 
	#tˇche_¨ía_ªassocüã
 
	`JEMALLOC_N
(
tˇche_¨ía_ªassocüã
)

	)

334 
	#tˇche_bö_Êush_œrge
 
	`JEMALLOC_N
(
tˇche_bö_Êush_œrge
)

	)

335 
	#tˇche_bö_Êush_smÆl
 
	`JEMALLOC_N
(
tˇche_bö_Êush_smÆl
)

	)

336 
	#tˇche_bö_öfo
 
	`JEMALLOC_N
(
tˇche_bö_öfo
)

	)

337 
	#tˇche_boŸ
 
	`JEMALLOC_N
(
tˇche_boŸ
)

	)

338 
	#tˇche_˛ónup
 
	`JEMALLOC_N
(
tˇche_˛ónup
)

	)

339 
	#tˇche_¸óã_ex∂icô
 
	`JEMALLOC_N
(
tˇche_¸óã_ex∂icô
)

	)

340 
	#tˇche_evít_h¨d
 
	`JEMALLOC_N
(
tˇche_evít_h¨d
)

	)

341 
	#tˇche_Êush
 
	`JEMALLOC_N
(
tˇche_Êush
)

	)

342 
	#tˇche_max˛ass
 
	`JEMALLOC_N
(
tˇche_max˛ass
)

	)

343 
	#tˇche_po°f‹k_chûd
 
	`JEMALLOC_N
(
tˇche_po°f‹k_chûd
)

	)

344 
	#tˇche_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
tˇche_po°f‹k_∑ª¡
)

	)

345 
	#tˇche_¥ef‹k
 
	`JEMALLOC_N
(
tˇche_¥ef‹k
)

	)

346 
	#tˇches
 
	`JEMALLOC_N
(
tˇches
)

	)

347 
	#tˇche_ßŒoc
 
	`JEMALLOC_N
(
tˇche_ßŒoc
)

	)

348 
	#tˇches_¸óã
 
	`JEMALLOC_N
(
tˇches_¸óã
)

	)

349 
	#tˇches_de°roy
 
	`JEMALLOC_N
(
tˇches_de°roy
)

	)

350 
	#tˇches_Êush
 
	`JEMALLOC_N
(
tˇches_Êush
)

	)

351 
	#tˇche_°©s_mîge
 
	`JEMALLOC_N
(
tˇche_°©s_mîge
)

	)

352 
	#tsd_tˇche_d©a_öô
 
	`JEMALLOC_N
(
tsd_tˇche_d©a_öô
)

	)

353 
	#tsd_tˇche_íabÀd_d©a_öô
 
	`JEMALLOC_N
(
tsd_tˇche_íabÀd_d©a_öô
)

	)

354 
	#mÆloc_tsd_boŸ0
 
	`JEMALLOC_N
(
mÆloc_tsd_boŸ0
)

	)

355 
	#mÆloc_tsd_boŸ1
 
	`JEMALLOC_N
(
mÆloc_tsd_boŸ1
)

	)

356 
	#mÆloc_tsd_˛ónup_ªgi°î
 
	`JEMALLOC_N
(
mÆloc_tsd_˛ónup_ªgi°î
)

	)

357 
	#mÆloc_tsd_dÆloc
 
	`JEMALLOC_N
(
mÆloc_tsd_dÆloc
)

	)

358 
	#mÆloc_tsd_mÆloc
 
	`JEMALLOC_N
(
mÆloc_tsd_mÆloc
)

	)

359 
	#tsd_boŸed
 
	`JEMALLOC_N
(
tsd_boŸed
)

	)

360 
	#tsd_˛ónup
 
	`JEMALLOC_N
(
tsd_˛ónup
)

	)

361 
	#tsd_„tch_¶ow
 
	`JEMALLOC_N
(
tsd_„tch_¶ow
)

	)

362 
	#tsd_¶ow_upd©e
 
	`JEMALLOC_N
(
tsd_¶ow_upd©e
)

	)

363 
	#tsd_és
 
	`JEMALLOC_N
(
tsd_és
)

	)

364 
	#tsd_tsd
 
	`JEMALLOC_N
(
tsd_tsd
)

	)

365 
	#wô√ss_dïth_îr‹
 
	`JEMALLOC_N
(
wô√ss_dïth_îr‹
)

	)

366 
	#wô√s£s_˛ónup
 
	`JEMALLOC_N
(
wô√s£s_˛ónup
)

	)

367 
	#wô√ss_öô
 
	`JEMALLOC_N
(
wô√ss_öô
)

	)

368 
	#wô√ss_lock_îr‹
 
	`JEMALLOC_N
(
wô√ss_lock_îr‹
)

	)

369 
	#wô√ss_nŸ_ow√r_îr‹
 
	`JEMALLOC_N
(
wô√ss_nŸ_ow√r_îr‹
)

	)

370 
	#wô√ss_ow√r_îr‹
 
	`JEMALLOC_N
(
wô√ss_ow√r_îr‹
)

	)

371 
	#wô√ss_po°f‹k_chûd
 
	`JEMALLOC_N
(
wô√ss_po°f‹k_chûd
)

	)

372 
	#wô√ss_po°f‹k_∑ª¡
 
	`JEMALLOC_N
(
wô√ss_po°f‹k_∑ª¡
)

	)

373 
	#wô√ss_¥ef‹k
 
	`JEMALLOC_N
(
wô√ss_¥ef‹k
)

	)

	@include/jemalloc/internal/prng.h

1 #i‚de‡
JEMALLOC_INTERNAL_PRNG_H


2 
	#JEMALLOC_INTERNAL_PRNG_H


	)

4 
	~"jemÆloc/öã∫Æ/©omic.h
"

5 
	~"jemÆloc/öã∫Æ/bô_utû.h
"

29 
	#PRNG_A_32
 
	`UINT32_C
(1103515241)

	)

30 
	#PRNG_C_32
 
	`UINT32_C
(12347)

	)

32 
	#PRNG_A_64
 
	`UINT64_C
(6364136223846793005)

	)

33 
	#PRNG_C_64
 
	`UINT64_C
(1442695040888963407)

	)

35 
JEMALLOC_ALWAYS_INLINE
 
uöt32_t


36 
	$¥ng_°©e_√xt_u32
(
uöt32_t
 
°©e
) {

37  (
°©e
 * 
PRNG_A_32
Ë+ 
PRNG_C_32
;

38 
	}
}

40 
JEMALLOC_ALWAYS_INLINE
 
uöt64_t


41 
	$¥ng_°©e_√xt_u64
(
uöt64_t
 
°©e
) {

42  (
°©e
 * 
PRNG_A_64
Ë+ 
PRNG_C_64
;

43 
	}
}

45 
JEMALLOC_ALWAYS_INLINE
 
size_t


46 
	$¥ng_°©e_√xt_zu
(
size_t
 
°©e
) {

47 #i‡
LG_SIZEOF_PTR
 == 2

48  (
°©e
 * 
PRNG_A_32
Ë+ 
PRNG_C_32
;

49 #ñi‡
LG_SIZEOF_PTR
 == 3

50  (
°©e
 * 
PRNG_A_64
Ë+ 
PRNG_C_64
;

52 #îr‹ 
Unsuµ‹ãd
 
poöãr
 
size


54 
	}
}

66 
JEMALLOC_ALWAYS_INLINE
 
uöt32_t


67 
	$¥ng_lg_ønge_u32
(
©omic_u32_t
 *
°©e
, 
lg_ønge
, 
boﬁ
 
©omic
) {

68 
uöt32_t
 
ªt
, 
°©e0
, 
°©e1
;

70 
	`as£π
(
lg_ønge
 > 0);

71 
	`as£π
(
lg_ønge
 <= 32);

73 
°©e0
 = 
	`©omic_lﬂd_u32
(
°©e
, 
ATOMIC_RELAXED
);

75 i‡(
©omic
) {

77 
°©e1
 = 
	`¥ng_°©e_√xt_u32
(
°©e0
);

78 } !
	`©omic_com∑ª_exch™ge_wók_u32
(
°©e
, &
°©e0
,

79 
°©e1
, 
ATOMIC_RELAXED
, ATOMIC_RELAXED));

81 
°©e1
 = 
	`¥ng_°©e_√xt_u32
(
°©e0
);

82 
	`©omic_°‹e_u32
(
°©e
, 
°©e1
, 
ATOMIC_RELAXED
);

84 
ªt
 = 
°©e1
 >> (32 - 
lg_ønge
);

86  
ªt
;

87 
	}
}

89 
JEMALLOC_ALWAYS_INLINE
 
uöt64_t


90 
	$¥ng_lg_ønge_u64
(
uöt64_t
 *
°©e
, 
lg_ønge
) {

91 
uöt64_t
 
ªt
, 
°©e1
;

93 
	`as£π
(
lg_ønge
 > 0);

94 
	`as£π
(
lg_ønge
 <= 64);

96 
°©e1
 = 
	`¥ng_°©e_√xt_u64
(*
°©e
);

97 *
°©e
 = 
°©e1
;

98 
ªt
 = 
°©e1
 >> (64 - 
lg_ønge
);

100  
ªt
;

101 
	}
}

103 
JEMALLOC_ALWAYS_INLINE
 
size_t


104 
	$¥ng_lg_ønge_zu
(
©omic_zu_t
 *
°©e
, 
lg_ønge
, 
boﬁ
 
©omic
) {

105 
size_t
 
ªt
, 
°©e0
, 
°©e1
;

107 
	`as£π
(
lg_ønge
 > 0);

108 
	`as£π
(
lg_ønge
 <
	`ZU
(1Ë<< (3 + 
LG_SIZEOF_PTR
));

110 
°©e0
 = 
	`©omic_lﬂd_zu
(
°©e
, 
ATOMIC_RELAXED
);

112 i‡(
©omic
) {

114 
°©e1
 = 
	`¥ng_°©e_√xt_zu
(
°©e0
);

115 } 
	`©omic_com∑ª_exch™ge_wók_zu
(
°©e
, &
°©e0
,

116 
°©e1
, 
ATOMIC_RELAXED
, ATOMIC_RELAXED));

118 
°©e1
 = 
	`¥ng_°©e_√xt_zu
(
°©e0
);

119 
	`©omic_°‹e_zu
(
°©e
, 
°©e1
, 
ATOMIC_RELAXED
);

121 
ªt
 = 
°©e1
 >> ((
	`ZU
(1Ë<< (3 + 
LG_SIZEOF_PTR
)Ë- 
lg_ønge
);

123  
ªt
;

124 
	}
}

131 
JEMALLOC_ALWAYS_INLINE
 
uöt32_t


132 
	$¥ng_ønge_u32
(
©omic_u32_t
 *
°©e
, 
uöt32_t
 
ønge
, 
boﬁ
 
©omic
) {

133 
uöt32_t
 
ªt
;

134 
lg_ønge
;

136 
	`as£π
(
ønge
 > 1);

139 
lg_ønge
 = 
	`ffs_u32
(
	`pow2_˚û_u32
(
ønge
)) - 1;

143 
ªt
 = 
	`¥ng_lg_ønge_u32
(
°©e
, 
lg_ønge
, 
©omic
);

144 } 
ªt
 >
ønge
);

146  
ªt
;

147 
	}
}

149 
JEMALLOC_ALWAYS_INLINE
 
uöt64_t


150 
	$¥ng_ønge_u64
(
uöt64_t
 *
°©e
, uöt64_à
ønge
) {

151 
uöt64_t
 
ªt
;

152 
lg_ønge
;

154 
	`as£π
(
ønge
 > 1);

157 
lg_ønge
 = 
	`ffs_u64
(
	`pow2_˚û_u64
(
ønge
)) - 1;

161 
ªt
 = 
	`¥ng_lg_ønge_u64
(
°©e
, 
lg_ønge
);

162 } 
ªt
 >
ønge
);

164  
ªt
;

165 
	}
}

167 
JEMALLOC_ALWAYS_INLINE
 
size_t


168 
	$¥ng_ønge_zu
(
©omic_zu_t
 *
°©e
, 
size_t
 
ønge
, 
boﬁ
 
©omic
) {

169 
size_t
 
ªt
;

170 
lg_ønge
;

172 
	`as£π
(
ønge
 > 1);

175 
lg_ønge
 = 
	`ffs_u64
(
	`pow2_˚û_u64
(
ønge
)) - 1;

179 
ªt
 = 
	`¥ng_lg_ønge_zu
(
°©e
, 
lg_ønge
, 
©omic
);

180 } 
ªt
 >
ønge
);

182  
ªt
;

183 
	}
}

	@include/jemalloc/internal/prof_externs.h

1 #i‚de‡
JEMALLOC_INTERNAL_PROF_EXTERNS_H


2 
	#JEMALLOC_INTERNAL_PROF_EXTERNS_H


	)

4 
	~"jemÆloc/öã∫Æ/muãx.h
"

6 
mÆloc_muãx_t
 
bt2g˘x_mtx
;

8 
boﬁ
 
›t_¥of
;

9 
boﬁ
 
›t_¥of_a˘ive
;

10 
boﬁ
 
›t_¥of_thªad_a˘ive_öô
;

11 
size_t
 
›t_lg_¥of_ßm∂e
;

12 
ssize_t
 
›t_lg_¥of_öãrvÆ
;

13 
boﬁ
 
›t_¥of_gdump
;

14 
boﬁ
 
›t_¥of_föÆ
;

15 
boﬁ
 
›t_¥of_Àak
;

16 
boﬁ
 
›t_¥of_accum
;

17 
›t_¥of_¥efix
[

19 #ifde‡
JEMALLOC_PROF


20 
PATH_MAX
 +

25 
boﬁ
 
¥of_a˘ive
;

28 
boﬁ
 
¥of_gdump_vÆ
;

37 
uöt64_t
 
¥of_öãrvÆ
;

43 
size_t
 
lg_¥of_ßm∂e
;

45 
¥of_Æloc_rﬁlback
(
tsd_t
 *
tsd
, 
¥of_t˘x_t
 *
t˘x
, 
boﬁ
 
upd©ed
);

46 
¥of_mÆloc_ßm∂e_obje˘
(
tsdn_t
 *
tsdn
, c⁄° *
±r
, 
size_t
 
usize
,

47 
¥of_t˘x_t
 *
t˘x
);

48 
¥of_‰ì_ßm∂ed_obje˘
(
tsd_t
 *
tsd
, 
size_t
 
usize
, 
¥of_t˘x_t
 *
t˘x
);

49 
bt_öô
(
¥of_bt_t
 *
bt
, **
vec
);

50 
¥of_backåa˚
(
¥of_bt_t
 *
bt
);

51 
¥of_t˘x_t
 *
¥of_lookup
(
tsd_t
 *
tsd
, 
¥of_bt_t
 *
bt
);

52 #ifde‡
JEMALLOC_JET


53 
size_t
 
¥of_td©a_cou¡
();

54 
size_t
 
¥of_bt_cou¡
();

56 (
	t¥of_dump_›í_t
)(
	tboﬁ
, const *);

57 
¥of_dump_›í_t
 *
JET_MUTABLE
 
¥of_dump_›í
;

59 
	$boﬁ
 (
	t¥of_dump_hódî_t
)(
	ttsdn_t
 *, 
	tboﬁ
, c⁄° 
	t¥of_˙t_t
 *);

60 
¥of_dump_hódî_t
 *
JET_MUTABLE
 
¥of_dump_hódî
;

61 #ifde‡
JEMALLOC_JET


62 
	`¥of_˙t_Æl
(
uöt64_t
 *
curobjs
, uöt64_à*
curbyãs
, uöt64_à*
accumobjs
,

63 
uöt64_t
 *
accumbyãs
);

65 
boﬁ
 
	`¥of_accum_öô
(
tsdn_t
 *
tsdn
, 
¥of_accum_t
 *
¥of_accum
);

66 
	`¥of_idump
(
tsdn_t
 *
tsdn
);

67 
boﬁ
 
	`¥of_mdump
(
tsd_t
 *
tsd
, c⁄° *
fûíame
);

68 
	`¥of_gdump
(
tsdn_t
 *
tsdn
);

69 
¥of_td©a_t
 *
	`¥of_td©a_öô
(
tsd_t
 *
tsd
);

70 
¥of_td©a_t
 *
	`¥of_td©a_ªöô
(
tsd_t
 *
tsd
,Örof_td©a_à*
td©a
);

71 
	`¥of_ª£t
(
tsd_t
 *
tsd
, 
size_t
 
lg_ßm∂e
);

72 
	`¥of_td©a_˛ónup
(
tsd_t
 *
tsd
);

73 
boﬁ
 
	`¥of_a˘ive_gë
(
tsdn_t
 *
tsdn
);

74 
boﬁ
 
	`¥of_a˘ive_£t
(
tsdn_t
 *
tsdn
, boﬁ 
a˘ive
);

75 c⁄° *
	`¥of_thªad_«me_gë
(
tsd_t
 *
tsd
);

76 
	`¥of_thªad_«me_£t
(
tsd_t
 *
tsd
, c⁄° *
thªad_«me
);

77 
boﬁ
 
	`¥of_thªad_a˘ive_gë
(
tsd_t
 *
tsd
);

78 
boﬁ
 
	`¥of_thªad_a˘ive_£t
(
tsd_t
 *
tsd
, boﬁ 
a˘ive
);

79 
boﬁ
 
	`¥of_thªad_a˘ive_öô_gë
(
tsdn_t
 *
tsdn
);

80 
boﬁ
 
	`¥of_thªad_a˘ive_öô_£t
(
tsdn_t
 *
tsdn
, boﬁ 
a˘ive_öô
);

81 
boﬁ
 
	`¥of_gdump_gë
(
tsdn_t
 *
tsdn
);

82 
boﬁ
 
	`¥of_gdump_£t
(
tsdn_t
 *
tsdn
, boﬁ 
a˘ive
);

83 
	`¥of_boŸ0
();

84 
	`¥of_boŸ1
();

85 
boﬁ
 
	`¥of_boŸ2
(
tsd_t
 *
tsd
);

86 
	`¥of_¥ef‹k0
(
tsdn_t
 *
tsdn
);

87 
	`¥of_¥ef‹k1
(
tsdn_t
 *
tsdn
);

88 
	`¥of_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
);

89 
	`¥of_po°f‹k_chûd
(
tsdn_t
 *
tsdn
);

90 
	`¥of_ßm∂e_thªshﬁd_upd©e
(
¥of_td©a_t
 *
td©a
);

	@include/jemalloc/internal/prof_inlines_a.h

1 #i‚de‡
JEMALLOC_INTERNAL_PROF_INLINES_A_H


2 
	#JEMALLOC_INTERNAL_PROF_INLINES_A_H


	)

4 
	~"jemÆloc/öã∫Æ/muãx.h
"

6 
ölöe
 
boﬁ


7 
	$¥of_accum_add
(
tsdn_t
 *
tsdn
, 
¥of_accum_t
 *
¥of_accum
, 
uöt64_t
 
accumbyãs
) {

8 
	`ˇs£π
(
c⁄fig_¥of
);

10 
boﬁ
 
ovîÊow
;

11 
uöt64_t
 
a0
, 
a1
;

19 #ifde‡
JEMALLOC_ATOMIC_U64


20 
a0
 = 
	`©omic_lﬂd_u64
(&
¥of_accum
->
accumbyãs
, 
ATOMIC_RELAXED
);

22 
a1
 = 
a0
 + 
accumbyãs
;

23 
	`as£π
(
a1
 >
a0
);

24 
ovîÊow
 = (
a1
 >
¥of_öãrvÆ
);

25 i‡(
ovîÊow
) {

26 
a1
 %
¥of_öãrvÆ
;

28 } !
	`©omic_com∑ª_exch™ge_wók_u64
(&
¥of_accum
->
accumbyãs
, &
a0
,

29 
a1
, 
ATOMIC_RELAXED
, ATOMIC_RELAXED));

31 
	`mÆloc_muãx_lock
(
tsdn
, &
¥of_accum
->
mtx
);

32 
a0
 = 
¥of_accum
->
accumbyãs
;

33 
a1
 = 
a0
 + 
accumbyãs
;

34 
ovîÊow
 = (
a1
 >
¥of_öãrvÆ
);

35 i‡(
ovîÊow
) {

36 
a1
 %
¥of_öãrvÆ
;

38 
¥of_accum
->
accumbyãs
 = 
a1
;

39 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¥of_accum
->
mtx
);

41  
ovîÊow
;

42 
	}
}

44 
ölöe
 

45 
	$¥of_accum_ˇn˚l
(
tsdn_t
 *
tsdn
, 
¥of_accum_t
 *
¥of_accum
, 
size_t
 
usize
) {

46 
	`ˇs£π
(
c⁄fig_¥of
);

54 
uöt64_t
 
a0
, 
a1
;

55 #ifde‡
JEMALLOC_ATOMIC_U64


56 
a0
 = 
	`©omic_lﬂd_u64
(&
¥of_accum
->
accumbyãs
, 
ATOMIC_RELAXED
);

58 
a1
 = (
a0
 >
LARGE_MINCLASS
 - 
usize
) ?á0 - (LARGE_MINCLASS -

59 
usize
) : 0;

60 } !
	`©omic_com∑ª_exch™ge_wók_u64
(&
¥of_accum
->
accumbyãs
, &
a0
,

61 
a1
, 
ATOMIC_RELAXED
, ATOMIC_RELAXED));

63 
	`mÆloc_muãx_lock
(
tsdn
, &
¥of_accum
->
mtx
);

64 
a0
 = 
¥of_accum
->
accumbyãs
;

65 
a1
 = (
a0
 >
LARGE_MINCLASS
 - 
usize
) ?á0 - (LARGE_MINCLASS - usize) :

67 
¥of_accum
->
accumbyãs
 = 
a1
;

68 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¥of_accum
->
mtx
);

70 
	}
}

	@include/jemalloc/internal/prof_inlines_b.h

1 #i‚de‡
JEMALLOC_INTERNAL_PROF_INLINES_B_H


2 
	#JEMALLOC_INTERNAL_PROF_INLINES_B_H


	)

4 
	~"jemÆloc/öã∫Æ/sz.h
"

6 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


7 
	$¥of_a˘ive_gë_u∆ocked
() {

14  
¥of_a˘ive
;

15 
	}
}

17 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


18 
	$¥of_gdump_gë_u∆ocked
() {

24  
¥of_gdump_vÆ
;

25 
	}
}

27 
JEMALLOC_ALWAYS_INLINE
 
¥of_td©a_t
 *

28 
	$¥of_td©a_gë
(
tsd_t
 *
tsd
, 
boﬁ
 
¸óã
) {

29 
¥of_td©a_t
 *
td©a
;

31 
	`ˇs£π
(
c⁄fig_¥of
);

33 
td©a
 = 
	`tsd_¥of_td©a_gë
(
tsd
);

34 i‡(
¸óã
) {

35 i‡(
	`u∆ikñy
(
td©a
 =
NULL
)) {

36 i‡(
	`tsd_nomöÆ
(
tsd
)) {

37 
td©a
 = 
	`¥of_td©a_öô
(
tsd
);

38 
	`tsd_¥of_td©a_£t
(
tsd
, 
td©a
);

40 } i‡(
	`u∆ikñy
(
td©a
->
expúed
)) {

41 
td©a
 = 
	`¥of_td©a_ªöô
(
tsd
,Ådata);

42 
	`tsd_¥of_td©a_£t
(
tsd
, 
td©a
);

44 
	`as£π
(
td©a
 =
NULL
 ||Åd©a->
©èched
);

47  
td©a
;

48 
	}
}

50 
JEMALLOC_ALWAYS_INLINE
 
¥of_t˘x_t
 *

51 
	$¥of_t˘x_gë
(
tsdn_t
 *
tsdn
, c⁄° *
±r
, 
Æloc_˘x_t
 *
Æloc_˘x
) {

52 
	`ˇs£π
(
c⁄fig_¥of
);

53 
	`as£π
(
±r
 !
NULL
);

55  
	`¨ía_¥of_t˘x_gë
(
tsdn
, 
±r
, 
Æloc_˘x
);

56 
	}
}

58 
JEMALLOC_ALWAYS_INLINE
 

59 
	$¥of_t˘x_£t
(
tsdn_t
 *
tsdn
, c⁄° *
±r
, 
size_t
 
usize
,

60 
Æloc_˘x_t
 *
Æloc_˘x
, 
¥of_t˘x_t
 *
t˘x
) {

61 
	`ˇs£π
(
c⁄fig_¥of
);

62 
	`as£π
(
±r
 !
NULL
);

64 
	`¨ía_¥of_t˘x_£t
(
tsdn
, 
±r
, 
usize
, 
Æloc_˘x
, 
t˘x
);

65 
	}
}

67 
JEMALLOC_ALWAYS_INLINE
 

68 
	$¥of_t˘x_ª£t
(
tsdn_t
 *
tsdn
, c⁄° *
±r
, 
¥of_t˘x_t
 *
t˘x
) {

69 
	`ˇs£π
(
c⁄fig_¥of
);

70 
	`as£π
(
±r
 !
NULL
);

72 
	`¨ía_¥of_t˘x_ª£t
(
tsdn
, 
±r
, 
t˘x
);

73 
	}
}

75 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


76 
	$¥of_ßm∂e_accum_upd©e
(
tsd_t
 *
tsd
, 
size_t
 
usize
, 
boﬁ
 
upd©e
,

77 
¥of_td©a_t
 **
td©a_out
) {

78 
¥of_td©a_t
 *
td©a
;

80 
	`ˇs£π
(
c⁄fig_¥of
);

82 
td©a
 = 
	`¥of_td©a_gë
(
tsd
, 
åue
);

83 i‡(
	`u∆ikñy
((
uöçå_t
)
td©a
 <(uöçå_t)
PROF_TDATA_STATE_MAX
)) {

84 
td©a
 = 
NULL
;

87 i‡(
td©a_out
 !
NULL
) {

88 *
td©a_out
 = 
td©a
;

91 i‡(
	`u∆ikñy
(
td©a
 =
NULL
)) {

92  
åue
;

95 i‡(
	`likñy
(
td©a
->
byãs_u¡û_ßm∂e
 >
usize
)) {

96 i‡(
upd©e
) {

97 
td©a
->
byãs_u¡û_ßm∂e
 -
usize
;

99  
åue
;

101 i‡(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) > 0) {

102  
åue
;

105 i‡(
upd©e
) {

106 
	`¥of_ßm∂e_thªshﬁd_upd©e
(
td©a
);

108  !
td©a
->
a˘ive
;

110 
	}
}

112 
JEMALLOC_ALWAYS_INLINE
 
¥of_t˘x_t
 *

113 
	$¥of_Æloc_¥ï
(
tsd_t
 *
tsd
, 
size_t
 
usize
, 
boﬁ
 
¥of_a˘ive
, boﬁ 
upd©e
) {

114 
¥of_t˘x_t
 *
ªt
;

115 
¥of_td©a_t
 *
td©a
;

116 
¥of_bt_t
 
bt
;

118 
	`as£π
(
usize
 =
	`sz_s2u
(usize));

120 i‡(!
¥of_a˘ive
 || 
	`likñy
(
	`¥of_ßm∂e_accum_upd©e
(
tsd
, 
usize
, 
upd©e
,

121 &
td©a
))) {

122 
ªt
 = (
¥of_t˘x_t
 *)(
uöçå_t
)1U;

124 
	`bt_öô
(&
bt
, 
td©a
->
vec
);

125 
	`¥of_backåa˚
(&
bt
);

126 
ªt
 = 
	`¥of_lookup
(
tsd
, &
bt
);

129  
ªt
;

130 
	}
}

132 
JEMALLOC_ALWAYS_INLINE
 

133 
	$¥of_mÆloc
(
tsdn_t
 *
tsdn
, c⁄° *
±r
, 
size_t
 
usize
, 
Æloc_˘x_t
 *
Æloc_˘x
,

134 
¥of_t˘x_t
 *
t˘x
) {

135 
	`ˇs£π
(
c⁄fig_¥of
);

136 
	`as£π
(
±r
 !
NULL
);

137 
	`as£π
(
usize
 =
	`ißŒoc
(
tsdn
, 
±r
));

139 i‡(
	`u∆ikñy
((
uöçå_t
)
t˘x
 > (uintptr_t)1U)) {

140 
	`¥of_mÆloc_ßm∂e_obje˘
(
tsdn
, 
±r
, 
usize
, 
t˘x
);

142 
	`¥of_t˘x_£t
(
tsdn
, 
±r
, 
usize
, 
Æloc_˘x
,

143 (
¥of_t˘x_t
 *)(
uöçå_t
)1U);

145 
	}
}

147 
JEMALLOC_ALWAYS_INLINE
 

148 
	$¥of_ªÆloc
(
tsd_t
 *
tsd
, c⁄° *
±r
, 
size_t
 
usize
, 
¥of_t˘x_t
 *
t˘x
,

149 
boﬁ
 
¥of_a˘ive
, boﬁ 
upd©ed
, c⁄° *
ﬁd_±r
, 
size_t
 
ﬁd_usize
,

150 
¥of_t˘x_t
 *
ﬁd_t˘x
) {

151 
boﬁ
 
ßm∂ed
, 
ﬁd_ßm∂ed
, 
moved
;

153 
	`ˇs£π
(
c⁄fig_¥of
);

154 
	`as£π
(
±r
 !
NULL
 || (
uöçå_t
)
t˘x
 <= (uintptr_t)1U);

156 i‡(
¥of_a˘ive
 && !
upd©ed
 && 
±r
 !
NULL
) {

157 
	`as£π
(
usize
 =
	`ißŒoc
(
	`tsd_tsdn
(
tsd
), 
±r
));

158 i‡(
	`¥of_ßm∂e_accum_upd©e
(
tsd
, 
usize
, 
åue
, 
NULL
)) {

166 
	`¥of_Æloc_rﬁlback
(
tsd
, 
t˘x
, 
åue
);

167 
t˘x
 = (
¥of_t˘x_t
 *)(
uöçå_t
)1U;

171 
ßm∂ed
 = ((
uöçå_t
)
t˘x
 > (uintptr_t)1U);

172 
ﬁd_ßm∂ed
 = ((
uöçå_t
)
ﬁd_t˘x
 > (uintptr_t)1U);

173 
moved
 = (
±r
 !
ﬁd_±r
);

175 i‡(
	`u∆ikñy
(
ßm∂ed
)) {

176 
	`¥of_mÆloc_ßm∂e_obje˘
(
	`tsd_tsdn
(
tsd
), 
±r
, 
usize
, 
t˘x
);

177 } i‡(
moved
) {

178 
	`¥of_t˘x_£t
(
	`tsd_tsdn
(
tsd
), 
±r
, 
usize
, 
NULL
,

179 (
¥of_t˘x_t
 *)(
uöçå_t
)1U);

180 } i‡(
	`u∆ikñy
(
ﬁd_ßm∂ed
)) {

187 
	`¥of_t˘x_ª£t
(
	`tsd_tsdn
(
tsd
), 
±r
, 
t˘x
);

189 
	`as£π
((
uöçå_t
)
	`¥of_t˘x_gë
(
	`tsd_tsdn
(
tsd
), 
±r
, 
NULL
) ==

190 (
uöçå_t
)1U);

200 i‡(
	`u∆ikñy
(
ﬁd_ßm∂ed
)) {

201 
	`¥of_‰ì_ßm∂ed_obje˘
(
tsd
, 
ﬁd_usize
, 
ﬁd_t˘x
);

203 
	}
}

205 
JEMALLOC_ALWAYS_INLINE
 

206 
	$¥of_‰ì
(
tsd_t
 *
tsd
, c⁄° *
±r
, 
size_t
 
usize
, 
Æloc_˘x_t
 *
Æloc_˘x
) {

207 
¥of_t˘x_t
 *
t˘x
 = 
	`¥of_t˘x_gë
(
	`tsd_tsdn
(
tsd
), 
±r
, 
Æloc_˘x
);

209 
	`ˇs£π
(
c⁄fig_¥of
);

210 
	`as£π
(
usize
 =
	`ißŒoc
(
	`tsd_tsdn
(
tsd
), 
±r
));

212 i‡(
	`u∆ikñy
((
uöçå_t
)
t˘x
 > (uintptr_t)1U)) {

213 
	`¥of_‰ì_ßm∂ed_obje˘
(
tsd
, 
usize
, 
t˘x
);

215 
	}
}

	@include/jemalloc/internal/prof_structs.h

1 #i‚de‡
JEMALLOC_INTERNAL_PROF_STRUCTS_H


2 
	#JEMALLOC_INTERNAL_PROF_STRUCTS_H


	)

4 
	~"jemÆloc/öã∫Æ/ckh.h
"

5 
	~"jemÆloc/öã∫Æ/muãx.h
"

6 
	~"jemÆloc/öã∫Æ/¥ng.h
"

7 
	~"jemÆloc/öã∫Æ/rb.h
"

9 
	s¥of_bt_s
 {

11 **
	mvec
;

12 
	mÀn
;

15 #ifde‡
JEMALLOC_PROF_LIBGCC


18 
¥of_bt_t
 *
	mbt
;

19 
	mmax
;

20 } 
	t¥of_unwöd_d©a_t
;

23 
	s¥of_accum_s
 {

24 #i‚de‡
JEMALLOC_ATOMIC_U64


25 
mÆloc_muãx_t
 
	mmtx
;

26 
uöt64_t
 
	maccumbyãs
;

28 
©omic_u64_t
 
	maccumbyãs
;

32 
	s¥of_˙t_s
 {

34 
uöt64_t
 
	mcurobjs
;

35 
uöt64_t
 
	mcurbyãs
;

36 
uöt64_t
 
	maccumobjs
;

37 
uöt64_t
 
	maccumbyãs
;

41 
	m¥of_t˘x_°©e_öôülizög
,

42 
	m¥of_t˘x_°©e_nomöÆ
,

43 
	m¥of_t˘x_°©e_dumpög
,

44 
	m¥of_t˘x_°©e_purg©‹y


45 } 
	t¥of_t˘x_°©e_t
;

47 
	s¥of_t˘x_s
 {

49 
¥of_td©a_t
 *
	mtd©a
;

55 
uöt64_t
 
	mthr_uid
;

56 
uöt64_t
 
	mthr_dis¸im
;

59 
¥of_˙t_t
 
	m˙ts
;

62 
¥of_g˘x_t
 *
	mg˘x
;

77 
uöt64_t
 
	mt˘x_uid
;

80 
rb_node
(
¥of_t˘x_t
Ë
	mt˘x_lök
;

86 
boﬁ
 
	m¥ï¨ed
;

89 
¥of_t˘x_°©e_t
 
	m°©e
;

95 
¥of_˙t_t
 
	mdump_˙ts
;

97 
	$rb_åì
(
	t¥of_t˘x_t
Ë
	t¥of_t˘x_åì_t
;

99 
	s¥of_g˘x_s
 {

101 
mÆloc_muãx_t
 *
lock
;

113 
∆imbo
;

119 
¥of_t˘x_åì_t
 
t˘xs
;

122 
	`rb_node
(
¥of_g˘x_t
Ë
dump_lök
;

125 
¥of_˙t_t
 
˙t_summed
;

128 
¥of_bt_t
 
bt
;

131 *
vec
[1];

133 
	$rb_åì
(
	t¥of_g˘x_t
Ë
	t¥of_g˘x_åì_t
;

135 
	s¥of_td©a_s
 {

136 
mÆloc_muãx_t
 *
lock
;

139 
uöt64_t
 
thr_uid
;

145 
uöt64_t
 
thr_dis¸im
;

148 *
thªad_«me
;

150 
boﬁ
 
©èched
;

151 
boﬁ
 
expúed
;

153 
	`rb_node
(
¥of_td©a_t
Ë
td©a_lök
;

160 
uöt64_t
 
t˘x_uid_√xt
;

168 
ckh_t
 
bt2t˘x
;

171 
uöt64_t
 
¥ng_°©e
;

172 
uöt64_t
 
byãs_u¡û_ßm∂e
;

175 
boﬁ
 
íq
;

176 
boﬁ
 
íq_idump
;

177 
boﬁ
 
íq_gdump
;

185 
boﬁ
 
dumpög
;

191 
boﬁ
 
a˘ive
;

194 
¥of_˙t_t
 
˙t_summed
;

197 *
vec
[
PROF_BT_MAX
];

199 
	$rb_åì
(
	t¥of_td©a_t
Ë
	t¥of_td©a_åì_t
;

	@include/jemalloc/internal/prof_types.h

1 #i‚de‡
JEMALLOC_INTERNAL_PROF_TYPES_H


2 
	#JEMALLOC_INTERNAL_PROF_TYPES_H


	)

4 
¥of_bt_s
 
	t¥of_bt_t
;

5 
¥of_accum_s
 
	t¥of_accum_t
;

6 
¥of_˙t_s
 
	t¥of_˙t_t
;

7 
¥of_t˘x_s
 
	t¥of_t˘x_t
;

8 
¥of_g˘x_s
 
	t¥of_g˘x_t
;

9 
¥of_td©a_s
 
	t¥of_td©a_t
;

12 #ifde‡
JEMALLOC_PROF


13 
	#PROF_PREFIX_DEFAULT
 "jïrof"

	)

15 
	#PROF_PREFIX_DEFAULT
 ""

	)

17 
	#LG_PROF_SAMPLE_DEFAULT
 19

	)

18 
	#LG_PROF_INTERVAL_DEFAULT
 -1

	)

25 
	#PROF_BT_MAX
 128

	)

28 
	#PROF_CKH_MINITEMS
 64

	)

31 
	#PROF_DUMP_BUFSIZE
 65536

	)

34 
	#PROF_PRINTF_BUFSIZE
 128

	)

40 
	#PROF_NCTX_LOCKS
 1024

	)

46 
	#PROF_NTDATA_LOCKS
 256

	)

52 
	#PROF_TDATA_STATE_REINCARNATED
 ((
¥of_td©a_t
 *)(
uöçå_t
)1)

	)

53 
	#PROF_TDATA_STATE_PURGATORY
 ((
¥of_td©a_t
 *)(
uöçå_t
)2)

	)

54 
	#PROF_TDATA_STATE_MAX
 
PROF_TDATA_STATE_PURGATORY


	)

	@include/jemalloc/internal/public_namespace.h

1 
	#je_Æig√d_Æloc
 
	`JEMALLOC_N
(
Æig√d_Æloc
)

	)

2 
	#je_ˇŒoc
 
	`JEMALLOC_N
(
ˇŒoc
)

	)

3 
	#je_dÆlocx
 
	`JEMALLOC_N
(
dÆlocx
)

	)

4 
	#je_‰ì
 
	`JEMALLOC_N
(
‰ì
)

	)

5 
	#je_mÆl˘l
 
	`JEMALLOC_N
(
mÆl˘l
)

	)

6 
	#je_mÆl˘lbymib
 
	`JEMALLOC_N
(
mÆl˘lbymib
)

	)

7 
	#je_mÆl˘ amëomib
 
	`JEMALLOC_N
(
mÆl˘ amëomib
)

	)

8 
	#je_mÆloc
 
	`JEMALLOC_N
(
mÆloc
)

	)

9 
	#je_mÆloc_c⁄f
 
	`JEMALLOC_N
(
mÆloc_c⁄f
)

	)

10 
	#je_mÆloc_mesßge
 
	`JEMALLOC_N
(
mÆloc_mesßge
)

	)

11 
	#je_mÆloc_°©s_¥öt
 
	`JEMALLOC_N
(
mÆloc_°©s_¥öt
)

	)

12 
	#je_mÆloc_ußbÀ_size
 
	`JEMALLOC_N
(
mÆloc_ußbÀ_size
)

	)

13 
	#je_mÆlocx
 
	`JEMALLOC_N
(
mÆlocx
)

	)

14 
	#je_«Œocx
 
	`JEMALLOC_N
(
«Œocx
)

	)

15 
	#je_posix_memÆign
 
	`JEMALLOC_N
(
posix_memÆign
)

	)

16 
	#je_øŒocx
 
	`JEMALLOC_N
(
øŒocx
)

	)

17 
	#je_ªÆloc
 
	`JEMALLOC_N
(
ªÆloc
)

	)

18 
	#je_ßŒocx
 
	`JEMALLOC_N
(
ßŒocx
)

	)

19 
	#je_sdÆlocx
 
	`JEMALLOC_N
(
sdÆlocx
)

	)

20 
	#je_xÆlocx
 
	`JEMALLOC_N
(
xÆlocx
)

	)

21 
	#je_memÆign
 
	`JEMALLOC_N
(
memÆign
)

	)

22 
	#je_vÆloc
 
	`JEMALLOC_N
(
vÆloc
)

	)

	@include/jemalloc/internal/public_unnamespace.h

1 #unde‡
je_Æig√d_Æloc


2 #unde‡
je_ˇŒoc


3 #unde‡
je_dÆlocx


4 #unde‡
je_‰ì


5 #unde‡
je_mÆl˘l


6 #unde‡
je_mÆl˘lbymib


7 #unde‡
je_mÆl˘ amëomib


8 #unde‡
je_mÆloc


9 #unde‡
je_mÆloc_c⁄f


10 #unde‡
je_mÆloc_mesßge


11 #unde‡
je_mÆloc_°©s_¥öt


12 #unde‡
je_mÆloc_ußbÀ_size


13 #unde‡
je_mÆlocx


14 #unde‡
je_«Œocx


15 #unde‡
je_posix_memÆign


16 #unde‡
je_øŒocx


17 #unde‡
je_ªÆloc


18 #unde‡
je_ßŒocx


19 #unde‡
je_sdÆlocx


20 #unde‡
je_xÆlocx


21 #unde‡
je_memÆign


22 #unde‡
je_vÆloc


	@include/jemalloc/internal/ql.h

1 #i‚de‡
JEMALLOC_INTERNAL_QL_H


2 
	#JEMALLOC_INTERNAL_QL_H


	)

4 
	~"jemÆloc/öã∫Æ/qr.h
"

7 
	#ql_hód
(
a_ty≥
) \

9 
a_ty≥
 *
qlh_fú°
; \

10 }

	)

12 
	#ql_hód_öôülizî
(
a_hód
Ë{
NULL
}

	)

14 
	#ql_ñm
(
a_ty≥
Ë
	`qr
◊_ty≥)

	)

17 
	#ql_√w
(
a_hód
) do { \

18 (
a_hód
)->
qlh_fú°
 = 
NULL
; \

19 } 0)

	)

21 
	#ql_ñm_√w
(
a_ñm
, 
a_fõld
Ë
	`qr_√w
(◊_ñm),á_fõld)

	)

23 
	#ql_fú°
(
a_hód
Ë(◊_hód)->
qlh_fú°
)

	)

25 
	#ql_œ°
(
a_hód
, 
a_fõld
) \

26 ((
	`ql_fú°
(
a_hód
Ë!
NULL
) \

27 ? 
	`qr_¥ev
(
	`ql_fú°
(
a_hód
), 
a_fõld
Ë: 
NULL
)

	)

29 
	#ql_√xt
(
a_hód
, 
a_ñm
, 
a_fõld
) \

30 ((
	`ql_œ°
(
a_hód
, 
a_fõld
Ë!(
a_ñm
)) \

31 ? 
	`qr_√xt
((
a_ñm
), 
a_fõld
Ë: 
NULL
)

	)

33 
	#ql_¥ev
(
a_hód
, 
a_ñm
, 
a_fõld
) \

34 ((
	`ql_fú°
(
a_hód
Ë!(
a_ñm
)Ë? 
	`qr_¥ev
(◊_ñm), 
a_fõld
) \

35 : 
NULL
)

	)

37 
	#ql_bef‹e_ö£π
(
a_hód
, 
a_qÀlm
, 
a_ñm
, 
a_fõld
) do { \

38 
	`qr_bef‹e_ö£π
((
a_qÀlm
), (
a_ñm
), 
a_fõld
); \

39 i‡(
	`ql_fú°
(
a_hód
Ë=(
a_qÀlm
)) { \

40 
	`ql_fú°
(
a_hód
Ë(
a_ñm
); \

42 } 0)

	)

44 
	#ql_a·î_ö£π
(
a_qÀlm
, 
a_ñm
, 
a_fõld
) \

45 
	`qr_a·î_ö£π
((
a_qÀlm
), (
a_ñm
), 
a_fõld
)

	)

47 
	#ql_hód_ö£π
(
a_hód
, 
a_ñm
, 
a_fõld
) do { \

48 i‡(
	`ql_fú°
(
a_hód
Ë!
NULL
) { \

49 
	`qr_bef‹e_ö£π
(
	`ql_fú°
(
a_hód
), (
a_ñm
), 
a_fõld
); \

51 
	`ql_fú°
(
a_hód
Ë(
a_ñm
); \

52 } 0)

	)

54 
	#ql_èû_ö£π
(
a_hód
, 
a_ñm
, 
a_fõld
) do { \

55 i‡(
	`ql_fú°
(
a_hód
Ë!
NULL
) { \

56 
	`qr_bef‹e_ö£π
(
	`ql_fú°
(
a_hód
), (
a_ñm
), 
a_fõld
); \

58 
	`ql_fú°
(
a_hód
Ë
	`qr_√xt
((
a_ñm
), 
a_fõld
); \

59 } 0)

	)

61 
	#ql_ªmove
(
a_hód
, 
a_ñm
, 
a_fõld
) do { \

62 i‡(
	`ql_fú°
(
a_hód
Ë=(
a_ñm
)) { \

63 
	`ql_fú°
(
a_hód
Ë
	`qr_√xt
(ql_fú°◊_hód), 
a_fõld
); \

65 i‡(
	`ql_fú°
(
a_hód
Ë!(
a_ñm
)) { \

66 
	`qr_ªmove
((
a_ñm
), 
a_fõld
); \

68 
	`ql_fú°
(
a_hód
Ë
NULL
; \

70 } 0)

	)

72 
	#ql_hód_ªmove
(
a_hód
, 
a_ty≥
, 
a_fõld
) do { \

73 
a_ty≥
 *
t
 = 
	`ql_fú°
(
a_hód
); \

74 
	`ql_ªmove
((
a_hód
), 
t
, 
a_fõld
); \

75 } 0)

	)

77 
	#ql_èû_ªmove
(
a_hód
, 
a_ty≥
, 
a_fõld
) do { \

78 
a_ty≥
 *
t
 = 
	`ql_œ°
(
a_hód
, 
a_fõld
); \

79 
	`ql_ªmove
((
a_hód
), 
t
, 
a_fõld
); \

80 } 0)

	)

82 
	#ql_f‹óch
(
a_v¨
, 
a_hód
, 
a_fõld
) \

83 
	`qr_f‹óch
((
a_v¨
), 
	`ql_fú°
(
a_hód
), 
a_fõld
)

	)

85 
	#ql_ªvî£_f‹óch
(
a_v¨
, 
a_hód
, 
a_fõld
) \

86 
	`qr_ªvî£_f‹óch
((
a_v¨
), 
	`ql_fú°
(
a_hód
), 
a_fõld
)

	)

	@include/jemalloc/internal/qr.h

1 #i‚de‡
JEMALLOC_INTERNAL_QR_H


2 
	#JEMALLOC_INTERNAL_QR_H


	)

5 
	#qr
(
a_ty≥
) \

7 
a_ty≥
 *
qª_√xt
; \

8 
a_ty≥
 *
qª_¥ev
; \

9 }

	)

12 
	#qr_√w
(
a_qr
, 
a_fõld
) do { \

13 (
a_qr
)->
a_fõld
.
qª_√xt
 = (a_qr); \

14 (
a_qr
)->
a_fõld
.
qª_¥ev
 = (a_qr); \

15 } 0)

	)

17 
	#qr_√xt
(
a_qr
, 
a_fõld
Ë(◊_qr)->a_fõld.
qª_√xt
)

	)

19 
	#qr_¥ev
(
a_qr
, 
a_fõld
Ë(◊_qr)->a_fõld.
qª_¥ev
)

	)

21 
	#qr_bef‹e_ö£π
(
a_qªlm
, 
a_qr
, 
a_fõld
) do { \

22 (
a_qr
)->
a_fõld
.
qª_¥ev
 = (
a_qªlm
)->a_field.qre_prev; \

23 (
a_qr
)->
a_fõld
.
qª_√xt
 = (
a_qªlm
); \

24 (
a_qr
)->
a_fõld
.
qª_¥ev
->a_fõld.
qª_√xt
 = (a_qr); \

25 (
a_qªlm
)->
a_fõld
.
qª_¥ev
 = (
a_qr
); \

26 } 0)

	)

28 
	#qr_a·î_ö£π
(
a_qªlm
, 
a_qr
, 
a_fõld
) do { \

29 (
a_qr
)->
a_fõld
.
qª_√xt
 = (
a_qªlm
)->a_field.qre_next; \

30 (
a_qr
)->
a_fõld
.
qª_¥ev
 = (
a_qªlm
); \

31 (
a_qr
)->
a_fõld
.
qª_√xt
->a_fõld.
qª_¥ev
 = (a_qr); \

32 (
a_qªlm
)->
a_fõld
.
qª_√xt
 = (
a_qr
); \

33 } 0)

	)

35 
	#qr_mñd
(
a_qr_a
, 
a_qr_b
, 
a_ty≥
, 
a_fõld
) do { \

36 
a_ty≥
 *
t
; \

37 (
a_qr_a
)->
a_fõld
.
qª_¥ev
->a_fõld.
qª_√xt
 = (
a_qr_b
); \

38 (
a_qr_b
)->
a_fõld
.
qª_¥ev
->a_fõld.
qª_√xt
 = (
a_qr_a
); \

39 
t
 = (
a_qr_a
)->
a_fõld
.
qª_¥ev
; \

40 (
a_qr_a
)->
a_fõld
.
qª_¥ev
 = (
a_qr_b
)->a_field.qre_prev; \

41 (
a_qr_b
)->
a_fõld
.
qª_¥ev
 = 
t
; \

42 } 0)

	)

48 
	#qr_•lô
(
a_qr_a
, 
a_qr_b
, 
a_ty≥
, 
a_fõld
) \

49 
	`qr_mñd
((
a_qr_a
), (
a_qr_b
), 
a_ty≥
, 
a_fõld
)

	)

51 
	#qr_ªmove
(
a_qr
, 
a_fõld
) do { \

52 (
a_qr
)->
a_fõld
.
qª_¥ev
->a_fõld.
qª_√xt
 \

53 (
a_qr
)->
a_fõld
.
qª_√xt
; \

54 (
a_qr
)->
a_fõld
.
qª_√xt
->a_fõld.
qª_¥ev
 \

55 (
a_qr
)->
a_fõld
.
qª_¥ev
; \

56 (
a_qr
)->
a_fõld
.
qª_√xt
 = (a_qr); \

57 (
a_qr
)->
a_fõld
.
qª_¥ev
 = (a_qr); \

58 } 0)

	)

60 
	#qr_f‹óch
(
v¨
, 
a_qr
, 
a_fõld
) \

61 (
v¨
Ë(
a_qr
); \

62 (
v¨
Ë!
NULL
; \

63 (
v¨
Ë(((v¨)->
a_fõld
.
qª_√xt
 !(
a_qr
)) \

64 ? (
v¨
)->
a_fõld
.
qª_√xt
 : 
NULL
))

	)

66 
	#qr_ªvî£_f‹óch
(
v¨
, 
a_qr
, 
a_fõld
) \

67 (
v¨
Ë((
a_qr
Ë!
NULL
Ë? 
	`qr_¥ev
◊_qr, 
a_fõld
) : NULL; \

68 (
v¨
Ë!
NULL
; \

69 (
v¨
Ë(((v¨Ë!(
a_qr
)) \

70 ? (
v¨
)->
a_fõld
.
qª_¥ev
 : 
NULL
))

	)

	@include/jemalloc/internal/rb.h

22 #i‚de‡
RB_H_


23 
	#RB_H_


	)

25 #i‚de‡
__PGI


26 
	#RB_COMPACT


	)

29 #ifde‡
RB_COMPACT


31 
	#rb_node
(
a_ty≥
) \

33 
a_ty≥
 *
rbn_À·
; \

34 
a_ty≥
 *
rbn_right_ªd
; \

35 }

	)

37 
	#rb_node
(
a_ty≥
) \

39 
a_ty≥
 *
rbn_À·
; \

40 
a_ty≥
 *
rbn_right
; \

41 
boﬁ
 
rbn_ªd
; \

42 }

	)

46 
	#rb_åì
(
a_ty≥
) \

48 
a_ty≥
 *
rbt_roŸ
; \

49 }

	)

52 
	#rbä_À·_gë
(
a_ty≥
, 
a_fõld
, 
a_node
) \

53 ((
a_node
)->
a_fõld
.
rbn_À·
)

	)

54 
	#rbä_À·_£t
(
a_ty≥
, 
a_fõld
, 
a_node
, 
a_À·
) do { \

55 (
a_node
)->
a_fõld
.
rbn_À·
 = 
a_À·
; \

56 } 0)

	)

58 #ifde‡
RB_COMPACT


60 
	#rbä_right_gë
(
a_ty≥
, 
a_fõld
, 
a_node
) \

61 ((
a_ty≥
 *Ë(((
öçå_t
Ë(
a_node
)->
a_fõld
.
rbn_right_ªd
) \

62 & ((
ssize_t
)-2)))

	)

63 
	#rbä_right_£t
(
a_ty≥
, 
a_fõld
, 
a_node
, 
a_right
) do { \

64 (
a_node
)->
a_fõld
.
rbn_right_ªd
 = (
a_ty≥
 *Ë(((
uöçå_t
Ë
a_right
) \

65 | (((
uöçå_t
Ë(
a_node
)->
a_fõld
.
rbn_right_ªd
Ë& ((
size_t
)1))); \

66 } 0)

	)

69 
	#rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
a_node
) \

70 ((
boﬁ
Ë(((
uöçå_t
Ë(
a_node
)->
a_fõld
.
rbn_right_ªd
) \

71 & ((
size_t
)1)))

	)

72 
	#rbä_cﬁ‹_£t
(
a_ty≥
, 
a_fõld
, 
a_node
, 
a_ªd
) do { \

73 (
a_node
)->
a_fõld
.
rbn_right_ªd
 = (
a_ty≥
 *Ë((((
öçå_t
) \

74 (
a_node
)->
a_fõld
.
rbn_right_ªd
Ë& ((
ssize_t
)-2)) \

75 | ((
ssize_t
)
a_ªd
)); \

76 } 0)

	)

77 
	#rbä_ªd_£t
(
a_ty≥
, 
a_fõld
, 
a_node
) do { \

78 (
a_node
)->
a_fõld
.
rbn_right_ªd
 = (
a_ty≥
 *Ë(((
uöçå_t
) \

79 (
a_node
)->
a_fõld
.
rbn_right_ªd
Ë| ((
size_t
)1)); \

80 } 0)

	)

81 
	#rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
a_node
) do { \

82 (
a_node
)->
a_fõld
.
rbn_right_ªd
 = (
a_ty≥
 *Ë(((
öçå_t
) \

83 (
a_node
)->
a_fõld
.
rbn_right_ªd
Ë& ((
ssize_t
)-2)); \

84 } 0)

	)

87 
	#rbt_node_√w
(
a_ty≥
, 
a_fõld
, 
a_rbt
, 
a_node
) do { \

89 
	`as£π
(((
uöçå_t
)(
a_node
) & 0x1) == 0); \

90 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, (
a_node
), 
NULL
); \

91 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, (
a_node
), 
NULL
); \

92 
	`rbä_ªd_£t
(
a_ty≥
, 
a_fõld
, (
a_node
)); \

93 } 0)

	)

96 
	#rbä_right_gë
(
a_ty≥
, 
a_fõld
, 
a_node
) \

97 ((
a_node
)->
a_fõld
.
rbn_right
)

	)

98 
	#rbä_right_£t
(
a_ty≥
, 
a_fõld
, 
a_node
, 
a_right
) do { \

99 (
a_node
)->
a_fõld
.
rbn_right
 = 
a_right
; \

100 } 0)

	)

103 
	#rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
a_node
) \

104 ((
a_node
)->
a_fõld
.
rbn_ªd
)

	)

105 
	#rbä_cﬁ‹_£t
(
a_ty≥
, 
a_fõld
, 
a_node
, 
a_ªd
) do { \

106 (
a_node
)->
a_fõld
.
rbn_ªd
 = (
a_ªd
); \

107 } 0)

	)

108 
	#rbä_ªd_£t
(
a_ty≥
, 
a_fõld
, 
a_node
) do { \

109 (
a_node
)->
a_fõld
.
rbn_ªd
 = 
åue
; \

110 } 0)

	)

111 
	#rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
a_node
) do { \

112 (
a_node
)->
a_fõld
.
rbn_ªd
 = 
Ál£
; \

113 } 0)

	)

116 
	#rbt_node_√w
(
a_ty≥
, 
a_fõld
, 
a_rbt
, 
a_node
) do { \

117 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, (
a_node
), 
NULL
); \

118 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, (
a_node
), 
NULL
); \

119 
	`rbä_ªd_£t
(
a_ty≥
, 
a_fõld
, (
a_node
)); \

120 } 0)

	)

124 
	#rb_√w
(
a_ty≥
, 
a_fõld
, 
a_rbt
) do { \

125 (
a_rbt
)->
rbt_roŸ
 = 
NULL
; \

126 } 0)

	)

129 
	#rbä_fú°
(
a_ty≥
, 
a_fõld
, 
a_rbt
, 
a_roŸ
, 
r_node
) do { \

130 (
r_node
Ë(
a_roŸ
); \

131 i‡((
r_node
Ë!
NULL
) { \

133 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, (
r_node
)Ë!
NULL
; \

134 (
r_node
Ë
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, (r_node))) { \

137 } 0)

	)

139 
	#rbä_œ°
(
a_ty≥
, 
a_fõld
, 
a_rbt
, 
a_roŸ
, 
r_node
) do { \

140 (
r_node
Ë(
a_roŸ
); \

141 i‡((
r_node
Ë!
NULL
) { \

142 ; 
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
, (
r_node
)Ë!
NULL
; \

143 (
r_node
Ë
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
, (r_node))) { \

146 } 0)

	)

148 
	#rbä_rŸ©e_À·
(
a_ty≥
, 
a_fõld
, 
a_node
, 
r_node
) do { \

149 (
r_node
Ë
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
, (
a_node
)); \

150 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, (
a_node
), \

151 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, (
r_node
))); \

152 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, (
r_node
), (
a_node
)); \

153 } 0)

	)

155 
	#rbä_rŸ©e_right
(
a_ty≥
, 
a_fõld
, 
a_node
, 
r_node
) do { \

156 (
r_node
Ë
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, (
a_node
)); \

157 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, (
a_node
), \

158 
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
, (
r_node
))); \

159 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, (
r_node
), (
a_node
)); \

160 } 0)

	)

167 
	#rb_¥Ÿo
(
a_©å
, 
a_¥efix
, 
a_rbt_ty≥
, 
a_ty≥
) \

168 
a_©å
 \

169 
a_¥efix
##
	`√w
(
a_rbt_ty≥
 *
rbåì
); \

170 
a_©å
 
boﬁ
 \

171 
a_¥efix
##
	`em±y
(
a_rbt_ty≥
 *
rbåì
); \

172 
a_©å
 
a_ty≥
 * \

173 
a_¥efix
##
	`fú°
(
a_rbt_ty≥
 *
rbåì
); \

174 
a_©å
 
a_ty≥
 * \

175 
a_¥efix
##
	`œ°
(
a_rbt_ty≥
 *
rbåì
); \

176 
a_©å
 
a_ty≥
 * \

177 
a_¥efix
##
	`√xt
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
node
); \

178 
a_©å
 
a_ty≥
 * \

179 
a_¥efix
##
	`¥ev
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
node
); \

180 
a_©å
 
a_ty≥
 * \

181 
a_¥efix
##
	`£¨ch
(
a_rbt_ty≥
 *
rbåì
, c⁄° 
a_ty≥
 *
key
); \

182 
a_©å
 
a_ty≥
 * \

183 
a_¥efix
##
	`n£¨ch
(
a_rbt_ty≥
 *
rbåì
, c⁄° 
a_ty≥
 *
key
); \

184 
a_©å
 
a_ty≥
 * \

185 
a_¥efix
##
	`p£¨ch
(
a_rbt_ty≥
 *
rbåì
, c⁄° 
a_ty≥
 *
key
); \

186 
a_©å
 \

187 
a_¥efix
##
	`ö£π
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
node
); \

188 
a_©å
 \

189 
a_¥efix
##
	`ªmove
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
node
); \

190 
a_©å
 
a_ty≥
 * \

191 
a_¥efix
##
	`ôî
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
°¨t
,á_ty≥ *(*
cb
)( \

192 
a_rbt_ty≥
 *, 
a_ty≥
 *, *), *
¨g
); \

193 
a_©å
 
a_ty≥
 * \

194 
a_¥efix
##
	`ªvî£_ôî
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
°¨t
, \

195 
a_ty≥
 *(*
cb
)(
a_rbt_ty≥
 *,á_ty≥ *, *), *
¨g
); \

196 
a_©å
 \

197 
a_¥efix
##
	`de°roy
(
a_rbt_ty≥
 *
rbåì
, (*
cb
)(
a_ty≥
 *, *), \

198 *
¨g
);

	)

342 
	#rb_gí
(
a_©å
, 
a_¥efix
, 
a_rbt_ty≥
, 
a_ty≥
, 
a_fõld
, 
a_cmp
) \

343 
a_©å
 \

344 
a_¥efix
##
	`√w
(
a_rbt_ty≥
 *
rbåì
) { \

345 
	`rb_√w
(
a_ty≥
, 
a_fõld
, 
rbåì
); \

347 
a_©å
 
boﬁ
 \

348 
a_¥efix
##
	`em±y
(
a_rbt_ty≥
 *
rbåì
) { \

349  (
rbåì
->
rbt_roŸ
 =
NULL
); \

351 
a_©å
 
a_ty≥
 * \

352 
a_¥efix
##
	`fú°
(
a_rbt_ty≥
 *
rbåì
) { \

353 
a_ty≥
 *
ªt
; \

354 
	`rbä_fú°
(
a_ty≥
, 
a_fõld
, 
rbåì
,Ñbåì->
rbt_roŸ
, 
ªt
); \

355  
ªt
; \

357 
a_©å
 
a_ty≥
 * \

358 
a_¥efix
##
	`œ°
(
a_rbt_ty≥
 *
rbåì
) { \

359 
a_ty≥
 *
ªt
; \

360 
	`rbä_œ°
(
a_ty≥
, 
a_fõld
, 
rbåì
,Ñbåì->
rbt_roŸ
, 
ªt
); \

361  
ªt
; \

363 
a_©å
 
a_ty≥
 * \

364 
a_¥efix
##
	`√xt
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
node
) { \

365 
a_ty≥
 *
ªt
; \

366 i‡(
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
, 
node
Ë!
NULL
) { \

367 
	`rbä_fú°
(
a_ty≥
, 
a_fõld
, 
rbåì
, 
	`rbä_right_gë
(a_type, \

368 
a_fõld
, 
node
), 
ªt
); \

370 
a_ty≥
 *
äode
 = 
rbåì
->
rbt_roŸ
; \

371 
	`as£π
(
äode
 !
NULL
); \

372 
ªt
 = 
NULL
; \

373 
åue
) { \

374 
cmp
 = (
a_cmp
)(
node
, 
äode
); \

375 i‡(
cmp
 < 0) { \

376 
ªt
 = 
äode
; \

377 
äode
 = 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
,Ånode); \

378 } i‡(
cmp
 > 0) { \

379 
äode
 = 
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
,Ånode); \

383 
	`as£π
(
äode
 !
NULL
); \

386  
ªt
; \

388 
a_©å
 
a_ty≥
 * \

389 
a_¥efix
##
	`¥ev
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
node
) { \

390 
a_ty≥
 *
ªt
; \

391 i‡(
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, 
node
Ë!
NULL
) { \

392 
	`rbä_œ°
(
a_ty≥
, 
a_fõld
, 
rbåì
, 
	`rbä_À·_gë
(a_type, \

393 
a_fõld
, 
node
), 
ªt
); \

395 
a_ty≥
 *
äode
 = 
rbåì
->
rbt_roŸ
; \

396 
	`as£π
(
äode
 !
NULL
); \

397 
ªt
 = 
NULL
; \

398 
åue
) { \

399 
cmp
 = (
a_cmp
)(
node
, 
äode
); \

400 i‡(
cmp
 < 0) { \

401 
äode
 = 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
,Ånode); \

402 } i‡(
cmp
 > 0) { \

403 
ªt
 = 
äode
; \

404 
äode
 = 
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
,Ånode); \

408 
	`as£π
(
äode
 !
NULL
); \

411  
ªt
; \

413 
a_©å
 
a_ty≥
 * \

414 
a_¥efix
##
	`£¨ch
(
a_rbt_ty≥
 *
rbåì
, c⁄° 
a_ty≥
 *
key
) { \

415 
a_ty≥
 *
ªt
; \

416 
cmp
; \

417 
ªt
 = 
rbåì
->
rbt_roŸ
; \

418 
ªt
 !
NULL
 \

419 && (
cmp
 = (
a_cmp
)(
key
, 
ªt
)) != 0) { \

420 i‡(
cmp
 < 0) { \

421 
ªt
 = 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
,Ñet); \

423 
ªt
 = 
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
,Ñet); \

426  
ªt
; \

428 
a_©å
 
a_ty≥
 * \

429 
a_¥efix
##
	`n£¨ch
(
a_rbt_ty≥
 *
rbåì
, c⁄° 
a_ty≥
 *
key
) { \

430 
a_ty≥
 *
ªt
; \

431 
a_ty≥
 *
äode
 = 
rbåì
->
rbt_roŸ
; \

432 
ªt
 = 
NULL
; \

433 
äode
 !
NULL
) { \

434 
cmp
 = (
a_cmp
)(
key
, 
äode
); \

435 i‡(
cmp
 < 0) { \

436 
ªt
 = 
äode
; \

437 
äode
 = 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
,Ånode); \

438 } i‡(
cmp
 > 0) { \

439 
äode
 = 
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
,Ånode); \

441 
ªt
 = 
äode
; \

445  
ªt
; \

447 
a_©å
 
a_ty≥
 * \

448 
a_¥efix
##
	`p£¨ch
(
a_rbt_ty≥
 *
rbåì
, c⁄° 
a_ty≥
 *
key
) { \

449 
a_ty≥
 *
ªt
; \

450 
a_ty≥
 *
äode
 = 
rbåì
->
rbt_roŸ
; \

451 
ªt
 = 
NULL
; \

452 
äode
 !
NULL
) { \

453 
cmp
 = (
a_cmp
)(
key
, 
äode
); \

454 i‡(
cmp
 < 0) { \

455 
äode
 = 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
,Ånode); \

456 } i‡(
cmp
 > 0) { \

457 
ªt
 = 
äode
; \

458 
äode
 = 
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
,Ånode); \

460 
ªt
 = 
äode
; \

464  
ªt
; \

466 
a_©å
 \

467 
a_¥efix
##
	`ö£π
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
node
) { \

469 
a_ty≥
 *
node
; \

470 
cmp
; \

471 } 
∑th
[(*Ë<< 4], *
∑thp
; \

472 
	`rbt_node_√w
(
a_ty≥
, 
a_fõld
, 
rbåì
, 
node
); \

474 
∑th
->
node
 = 
rbåì
->
rbt_roŸ
; \

475 
∑thp
 = 
∑th
;Ö©hp->
node
 !
NULL
;Öathp++) { \

476 
cmp
 = 
∑thp
->cm∞
	`a_cmp
(
node
,Öathp->node); \

477 
	`as£π
(
cmp
 != 0); \

478 i‡(
cmp
 < 0) { \

479 
∑thp
[1].
node
 = 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, \

480 
∑thp
->
node
); \

482 
∑thp
[1].
node
 = 
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
, \

483 
∑thp
->
node
); \

486 
∑thp
->
node
 =Çode; \

488 
∑thp
--; (
uöçå_t
Ì©h∞>(uöçå_t)
∑th
;Öathp--) { \

489 
a_ty≥
 *
˙ode
 = 
∑thp
->
node
; \

490 i‡(
∑thp
->
cmp
 < 0) { \

491 
a_ty≥
 *
À·
 = 
∑thp
[1].
node
; \

492 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, 
˙ode
, 
À·
); \

493 i‡(
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
À·
)) { \

494 
a_ty≥
 *
À·À·
 = 
	`rbä_À·_gë
◊_ty≥, 
a_fõld
, 
À·
);\

495 i‡(
À·À·
 !
NULL
 && 
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, \

496 
À·À·
)) { \

498 
a_ty≥
 *
äode
; \

499 
	`rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
À·À·
); \

500 
	`rbä_rŸ©e_right
(
a_ty≥
, 
a_fõld
, 
˙ode
, 
äode
); \

501 
˙ode
 = 
äode
; \

507 
a_ty≥
 *
right
 = 
∑thp
[1].
node
; \

508 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, 
˙ode
, 
right
); \

509 i‡(
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
right
)) { \

510 
a_ty≥
 *
À·
 = 
	`rbä_À·_gë
◊_ty≥, 
a_fõld
, 
˙ode
); \

511 i‡(
À·
 !
NULL
 && 
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, \

512 
À·
)) { \

514 
	`rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
À·
); \

515 
	`rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
right
); \

516 
	`rbä_ªd_£t
(
a_ty≥
, 
a_fõld
, 
˙ode
); \

519 
a_ty≥
 *
äode
; \

520 
boﬁ
 
åed
 = 
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
˙ode
); \

521 
	`rbä_rŸ©e_À·
(
a_ty≥
, 
a_fõld
, 
˙ode
, 
äode
); \

522 
	`rbä_cﬁ‹_£t
(
a_ty≥
, 
a_fõld
, 
äode
, 
åed
); \

523 
	`rbä_ªd_£t
(
a_ty≥
, 
a_fõld
, 
˙ode
); \

524 
˙ode
 = 
äode
; \

530 
∑thp
->
node
 = 
˙ode
; \

533 
rbåì
->
rbt_roŸ
 = 
∑th
->
node
; \

534 
	`rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
rbåì
->
rbt_roŸ
); \

536 
a_©å
 \

537 
a_¥efix
##
	`ªmove
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
node
) { \

539 
a_ty≥
 *
node
; \

540 
cmp
; \

541 } *
∑thp
, *
nodï
, 
∑th
[(*) << 4]; \

543 
nodï
 = 
NULL
; \

544 
∑th
->
node
 = 
rbåì
->
rbt_roŸ
; \

545 
∑thp
 = 
∑th
;Ö©hp->
node
 !
NULL
;Öathp++) { \

546 
cmp
 = 
∑thp
->cm∞
	`a_cmp
(
node
,Öathp->node); \

547 i‡(
cmp
 < 0) { \

548 
∑thp
[1].
node
 = 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, \

549 
∑thp
->
node
); \

551 
∑thp
[1].
node
 = 
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
, \

552 
∑thp
->
node
); \

553 i‡(
cmp
 == 0) { \

555 
∑thp
->
cmp
 = 1; \

556 
nodï
 = 
∑thp
; \

557 
∑thp
++;Ö©hp->
node
 !
NULL
;Öathp++) { \

558 
∑thp
->
cmp
 = -1; \

559 
∑thp
[1].
node
 = 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, \

560 
∑thp
->
node
); \

566 
	`as£π
(
nodï
->
node
 ==Çode); \

567 
∑thp
--; \

568 i‡(
∑thp
->
node
 !=Çode) { \

570 
boﬁ
 
åed
 = 
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
); \

571 
	`rbä_cﬁ‹_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, \

572 
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
node
)); \

573 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, \

574 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, 
node
)); \

579 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, \

580 
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
, 
node
)); \

581 
	`rbä_cﬁ‹_£t
(
a_ty≥
, 
a_fõld
, 
node
, 
åed
); \

584 
nodï
->
node
 = 
∑thp
->node; \

585 
∑thp
->
node
 =Çode; \

586 i‡(
nodï
 =
∑th
) { \

587 
rbåì
->
rbt_roŸ
 = 
nodï
->
node
; \

589 i‡(
nodï
[-1].
cmp
 < 0) { \

590 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, 
nodï
[-1].
node
, \

591 
nodï
->
node
); \

593 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, 
nodï
[-1].
node
, \

594 
nodï
->
node
); \

598 
a_ty≥
 *
À·
 = 
	`rbä_À·_gë
◊_ty≥, 
a_fõld
, 
node
); \

599 i‡(
À·
 !
NULL
) { \

602 
	`as£π
(!
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
node
)); \

603 
	`as£π
(
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
À·
)); \

604 
	`rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
À·
); \

605 i‡(
∑thp
 =
∑th
) { \

606 
rbåì
->
rbt_roŸ
 = 
À·
; \

608 i‡(
∑thp
[-1].
cmp
 < 0) { \

609 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
[-1].
node
, \

610 
À·
); \

612 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
[-1].
node
, \

613 
À·
); \

617 } i‡(
∑thp
 =
∑th
) { \

619 
rbåì
->
rbt_roŸ
 = 
NULL
; \

623 i‡(
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
)) { \

625 
	`as£π
(
∑thp
[-1].
cmp
 < 0); \

626 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
[-1].
node
, 
NULL
); \

631 
∑thp
->
node
 = 
NULL
; \

632 
∑thp
--; (
uöçå_t
Ì©h∞>(uöçå_t)
∑th
;Öathp--) { \

633 
	`as£π
(
∑thp
->
cmp
 != 0); \

634 i‡(
∑thp
->
cmp
 < 0) { \

635 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, \

636 
∑thp
[1].
node
); \

637 i‡(
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
)) { \

638 
a_ty≥
 *
right
 = 
	`rbä_right_gë
◊_ty≥, 
a_fõld
, \

639 
∑thp
->
node
); \

640 
a_ty≥
 *
righée·
 = 
	`rbä_À·_gë
◊_ty≥, 
a_fõld
, \

641 
right
); \

642 
a_ty≥
 *
äode
; \

643 i‡(
righée·
 !
NULL
 && 
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, \

644 
righée·
)) { \

655 
	`rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
); \

656 
	`rbä_rŸ©e_right
(
a_ty≥
, 
a_fõld
, 
right
, 
äode
); \

657 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, 
äode
);\

658 
	`rbä_rŸ©e_À·
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, \

659 
äode
); \

668 
	`rbä_rŸ©e_À·
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, \

669 
äode
); \

673 
	`as£π
((
uöçå_t
)
∑thp
 > (uöçå_t)
∑th
); \

674 i‡(
∑thp
[-1].
cmp
 < 0) { \

675 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
[-1].
node
, \

676 
äode
); \

678 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
[-1].
node
, \

679 
äode
); \

683 
a_ty≥
 *
right
 = 
	`rbä_right_gë
◊_ty≥, 
a_fõld
, \

684 
∑thp
->
node
); \

685 
a_ty≥
 *
righée·
 = 
	`rbä_À·_gë
◊_ty≥, 
a_fõld
, \

686 
right
); \

687 i‡(
righée·
 !
NULL
 && 
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, \

688 
righée·
)) { \

695 
a_ty≥
 *
äode
; \

696 
	`rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
righée·
); \

697 
	`rbä_rŸ©e_right
(
a_ty≥
, 
a_fõld
, 
right
, 
äode
); \

698 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, 
äode
);\

699 
	`rbä_rŸ©e_À·
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, \

700 
äode
); \

704 i‡(
∑thp
 =
∑th
) { \

706 
rbåì
->
rbt_roŸ
 = 
äode
; \

708 i‡(
∑thp
[-1].
cmp
 < 0) { \

709 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, \

710 
∑thp
[-1].
node
, 
äode
); \

712 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, \

713 
∑thp
[-1].
node
, 
äode
); \

724 
a_ty≥
 *
äode
; \

725 
	`rbä_ªd_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
); \

726 
	`rbä_rŸ©e_À·
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, \

727 
äode
); \

728 
∑thp
->
node
 = 
äode
; \

732 
a_ty≥
 *
À·
; \

733 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, \

734 
∑thp
[1].
node
); \

735 
À·
 = 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
); \

736 i‡(
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
À·
)) { \

737 
a_ty≥
 *
äode
; \

738 
a_ty≥
 *
À·right
 = 
	`rbä_right_gë
◊_ty≥, 
a_fõld
, \

739 
À·
); \

740 
a_ty≥
 *
À·righée·
 = 
	`rbä_À·_gë
◊_ty≥, 
a_fõld
, \

741 
À·right
); \

742 i‡(
À·righée·
 !
NULL
 && 
	`rbä_ªd_gë
(
a_ty≥
, \

743 
a_fõld
, 
À·righée·
)) { \

752 
a_ty≥
 *
unode
; \

753 
	`rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
À·righée·
); \

754 
	`rbä_rŸ©e_right
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, \

755 
unode
); \

756 
	`rbä_rŸ©e_right
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, \

757 
äode
); \

758 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, 
unode
, 
äode
); \

759 
	`rbä_rŸ©e_À·
(
a_ty≥
, 
a_fõld
, 
unode
, 
äode
); \

769 
	`as£π
(
À·right
 !
NULL
); \

770 
	`rbä_ªd_£t
(
a_ty≥
, 
a_fõld
, 
À·right
); \

771 
	`rbä_rŸ©e_right
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, \

772 
äode
); \

773 
	`rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
äode
); \

777 i‡(
∑thp
 =
∑th
) { \

779 
rbåì
->
rbt_roŸ
 = 
äode
; \

781 i‡(
∑thp
[-1].
cmp
 < 0) { \

782 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
[-1].
node
, \

783 
äode
); \

785 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
[-1].
node
, \

786 
äode
); \

790 } i‡(
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
)) { \

791 
a_ty≥
 *
À·À·
 = 
	`rbä_À·_gë
◊_ty≥, 
a_fõld
, 
À·
);\

792 i‡(
À·À·
 !
NULL
 && 
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, \

793 
À·À·
)) { \

800 
a_ty≥
 *
äode
; \

801 
	`rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
); \

802 
	`rbä_ªd_£t
(
a_ty≥
, 
a_fõld
, 
À·
); \

803 
	`rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
À·À·
); \

804 
	`rbä_rŸ©e_right
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, \

805 
äode
); \

808 
	`as£π
((
uöçå_t
)
∑thp
 > (uöçå_t)
∑th
); \

809 i‡(
∑thp
[-1].
cmp
 < 0) { \

810 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
[-1].
node
, \

811 
äode
); \

813 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
[-1].
node
, \

814 
äode
); \

824 
	`rbä_ªd_£t
(
a_ty≥
, 
a_fõld
, 
À·
); \

825 
	`rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
); \

830 
a_ty≥
 *
À·À·
 = 
	`rbä_À·_gë
◊_ty≥, 
a_fõld
, 
À·
);\

831 i‡(
À·À·
 !
NULL
 && 
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, \

832 
À·À·
)) { \

839 
a_ty≥
 *
äode
; \

840 
	`rbä_bœck_£t
(
a_ty≥
, 
a_fõld
, 
À·À·
); \

841 
	`rbä_rŸ©e_right
(
a_ty≥
, 
a_fõld
, 
∑thp
->
node
, \

842 
äode
); \

846 i‡(
∑thp
 =
∑th
) { \

848 
rbåì
->
rbt_roŸ
 = 
äode
; \

850 i‡(
∑thp
[-1].
cmp
 < 0) { \

851 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, \

852 
∑thp
[-1].
node
, 
äode
); \

854 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, \

855 
∑thp
[-1].
node
, 
äode
); \

866 
	`rbä_ªd_£t
(
a_ty≥
, 
a_fõld
, 
À·
); \

872 
rbåì
->
rbt_roŸ
 = 
∑th
->
node
; \

873 
	`as£π
(!
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
rbåì
->
rbt_roŸ
)); \

875 
a_©å
 
a_ty≥
 * \

876 
a_¥efix
##
	`ôî_ªcur£
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
node
, \

877 
a_ty≥
 *(*
cb
)(
a_rbt_ty≥
 *,á_ty≥ *, *), *
¨g
) { \

878 i‡(
node
 =
NULL
) { \

879  
NULL
; \

881 
a_ty≥
 *
ªt
; \

882 i‡((
ªt
 = 
a_¥efix
##
	`ôî_ªcur£
(
rbåì
, 
	`rbä_À·_gë
(
a_ty≥
, \

883 
a_fõld
, 
node
), 
cb
, 
¨g
)Ë!
NULL
 || (
ªt
 = 
	`cb
(
rbåì
,Çode, \

884 
¨g
)Ë!
NULL
) { \

885  
ªt
; \

887  
a_¥efix
##
	`ôî_ªcur£
(
rbåì
, 
	`rbä_right_gë
(
a_ty≥
, \

888 
a_fõld
, 
node
), 
cb
, 
¨g
); \

891 
a_©å
 
a_ty≥
 * \

892 
a_¥efix
##
	`ôî_°¨t
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
°¨t
,á_ty≥ *
node
, \

893 
a_ty≥
 *(*
cb
)(
a_rbt_ty≥
 *,á_ty≥ *, *), *
¨g
) { \

894 
cmp
 = 
	`a_cmp
(
°¨t
, 
node
); \

895 i‡(
cmp
 < 0) { \

896 
a_ty≥
 *
ªt
; \

897 i‡((
ªt
 = 
a_¥efix
##
	`ôî_°¨t
(
rbåì
, 
°¨t
, \

898 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, 
node
), 
cb
, 
¨g
)Ë!
NULL
 || \

899 (
ªt
 = 
	`cb
(
rbåì
, 
node
, 
¨g
)Ë!
NULL
) { \

900  
ªt
; \

902  
a_¥efix
##
	`ôî_ªcur£
(
rbåì
, 
	`rbä_right_gë
(
a_ty≥
, \

903 
a_fõld
, 
node
), 
cb
, 
¨g
); \

904 } i‡(
cmp
 > 0) { \

905  
a_¥efix
##
	`ôî_°¨t
(
rbåì
, 
°¨t
, \

906 
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
, 
node
), 
cb
, 
¨g
); \

908 
a_ty≥
 *
ªt
; \

909 i‡((
ªt
 = 
	`cb
(
rbåì
, 
node
, 
¨g
)Ë!
NULL
) { \

910  
ªt
; \

912  
a_¥efix
##
	`ôî_ªcur£
(
rbåì
, 
	`rbä_right_gë
(
a_ty≥
, \

913 
a_fõld
, 
node
), 
cb
, 
¨g
); \

916 
a_©å
 
a_ty≥
 * \

917 
a_¥efix
##
	`ôî
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
°¨t
,á_ty≥ *(*
cb
)( \

918 
a_rbt_ty≥
 *, 
a_ty≥
 *, *), *
¨g
) { \

919 
a_ty≥
 *
ªt
; \

920 i‡(
°¨t
 !
NULL
) { \

921 
ªt
 = 
a_¥efix
##
	`ôî_°¨t
(
rbåì
, 
°¨t
,Ñbåì->
rbt_roŸ
, \

922 
cb
, 
¨g
); \

924 
ªt
 = 
a_¥efix
##
	`ôî_ªcur£
(
rbåì
,Ñbåì->
rbt_roŸ
, 
cb
, 
¨g
);\

926  
ªt
; \

928 
a_©å
 
a_ty≥
 * \

929 
a_¥efix
##
	`ªvî£_ôî_ªcur£
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
node
, \

930 
a_ty≥
 *(*
cb
)(
a_rbt_ty≥
 *,á_ty≥ *, *), *
¨g
) { \

931 i‡(
node
 =
NULL
) { \

932  
NULL
; \

934 
a_ty≥
 *
ªt
; \

935 i‡((
ªt
 = 
a_¥efix
##
	`ªvî£_ôî_ªcur£
(
rbåì
, \

936 
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
, 
node
), 
cb
, 
¨g
)Ë!
NULL
 || \

937 (
ªt
 = 
	`cb
(
rbåì
, 
node
, 
¨g
)Ë!
NULL
) { \

938  
ªt
; \

940  
a_¥efix
##
	`ªvî£_ôî_ªcur£
(
rbåì
, \

941 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, 
node
), 
cb
, 
¨g
); \

944 
a_©å
 
a_ty≥
 * \

945 
a_¥efix
##
	`ªvî£_ôî_°¨t
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
°¨t
, \

946 
a_ty≥
 *
node
,á_ty≥ *(*
cb
)(
a_rbt_ty≥
 *,á_type *, *), \

947 *
¨g
) { \

948 
cmp
 = 
	`a_cmp
(
°¨t
, 
node
); \

949 i‡(
cmp
 > 0) { \

950 
a_ty≥
 *
ªt
; \

951 i‡((
ªt
 = 
a_¥efix
##
	`ªvî£_ôî_°¨t
(
rbåì
, 
°¨t
, \

952 
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
, 
node
), 
cb
, 
¨g
)Ë!
NULL
 || \

953 (
ªt
 = 
	`cb
(
rbåì
, 
node
, 
¨g
)Ë!
NULL
) { \

954  
ªt
; \

956  
a_¥efix
##
	`ªvî£_ôî_ªcur£
(
rbåì
, \

957 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, 
node
), 
cb
, 
¨g
); \

958 } i‡(
cmp
 < 0) { \

959  
a_¥efix
##
	`ªvî£_ôî_°¨t
(
rbåì
, 
°¨t
, \

960 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, 
node
), 
cb
, 
¨g
); \

962 
a_ty≥
 *
ªt
; \

963 i‡((
ªt
 = 
	`cb
(
rbåì
, 
node
, 
¨g
)Ë!
NULL
) { \

964  
ªt
; \

966  
a_¥efix
##
	`ªvî£_ôî_ªcur£
(
rbåì
, \

967 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, 
node
), 
cb
, 
¨g
); \

970 
a_©å
 
a_ty≥
 * \

971 
a_¥efix
##
	`ªvî£_ôî
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
°¨t
, \

972 
a_ty≥
 *(*
cb
)(
a_rbt_ty≥
 *,á_ty≥ *, *), *
¨g
) { \

973 
a_ty≥
 *
ªt
; \

974 i‡(
°¨t
 !
NULL
) { \

975 
ªt
 = 
a_¥efix
##
	`ªvî£_ôî_°¨t
(
rbåì
, 
°¨t
, \

976 
rbåì
->
rbt_roŸ
, 
cb
, 
¨g
); \

978 
ªt
 = 
a_¥efix
##
	`ªvî£_ôî_ªcur£
(
rbåì
,Ñbåì->
rbt_roŸ
, \

979 
cb
, 
¨g
); \

981  
ªt
; \

983 
a_©å
 \

984 
a_¥efix
##
	`de°roy_ªcur£
(
a_rbt_ty≥
 *
rbåì
, 
a_ty≥
 *
node
, (*
cb
)( \

985 
a_ty≥
 *, *), *
¨g
) { \

986 i‡(
node
 =
NULL
) { \

989 
a_¥efix
##
	`de°roy_ªcur£
(
rbåì
, 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, \

990 
node
), 
cb
, 
¨g
); \

991 
	`rbä_À·_£t
(
a_ty≥
, 
a_fõld
, (
node
), 
NULL
); \

992 
a_¥efix
##
	`de°roy_ªcur£
(
rbåì
, 
	`rbä_right_gë
(
a_ty≥
, 
a_fõld
, \

993 
node
), 
cb
, 
¨g
); \

994 
	`rbä_right_£t
(
a_ty≥
, 
a_fõld
, (
node
), 
NULL
); \

995 i‡(
cb
) { \

996 
	`cb
(
node
, 
¨g
); \

999 
a_©å
 \

1000 
a_¥efix
##
	`de°roy
(
a_rbt_ty≥
 *
rbåì
, (*
cb
)(
a_ty≥
 *, *), \

1001 *
¨g
) { \

1002 
a_¥efix
##
	`de°roy_ªcur£
(
rbåì
,Ñbåì->
rbt_roŸ
, 
cb
, 
¨g
); \

1003 
rbåì
->
rbt_roŸ
 = 
NULL
; \

1004 }

	)

	@include/jemalloc/internal/rtree.h

1 #i‚de‡
JEMALLOC_INTERNAL_RTREE_H


2 
	#JEMALLOC_INTERNAL_RTREE_H


	)

4 
	~"jemÆloc/öã∫Æ/©omic.h
"

5 
	~"jemÆloc/öã∫Æ/muãx.h
"

6 
	~"jemÆloc/öã∫Æ/πªe_tsd.h
"

7 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

8 
	~"jemÆloc/öã∫Æ/tsd.h
"

18 
	#RTREE_NHIB
 ((1U << (
LG_SIZEOF_PTR
+3)Ë- 
LG_VADDR
)

	)

20 
	#RTREE_NLIB
 
LG_PAGE


	)

22 
	#RTREE_NSB
 (
LG_VADDR
 - 
RTREE_NLIB
)

	)

24 #i‡
RTREE_NSB
 <= 10

25 
	#RTREE_HEIGHT
 1

	)

26 #ñi‡
RTREE_NSB
 <= 36

27 
	#RTREE_HEIGHT
 2

	)

28 #ñi‡
RTREE_NSB
 <= 52

29 
	#RTREE_HEIGHT
 3

	)

31 #îr‹ 
Unsuµ‹ãd
 
numbî
 
of
 
signifiˇ¡
 
vútuÆ
 
addªss
 
bôs


34 #i‡
RTREE_NHIB
 >
LG_CEIL_NSIZES


35 
	#RTREE_LEAF_COMPACT


	)

39 
	#RTREE_LEAFKEY_INVALID
 ((
uöçå_t
)1)

	)

41 
πªe_node_ñm_s
 
	tπªe_node_ñm_t
;

42 
	sπªe_node_ñm_s
 {

43 
©omic_p_t
 
	mchûd
;

46 
	sπªe_Àaf_ñm_s
 {

47 #ifde‡
RTREE_LEAF_COMPACT


60 
©omic_p_t
 
	mÀ_bôs
;

62 
©omic_p_t
 
	mÀ_exã¡
;

63 
©omic_u_t
 
	mÀ_szöd
;

64 
©omic_b_t
 
	mÀ_¶ab
;

68 
πªe_Àvñ_s
 
	tπªe_Àvñ_t
;

69 
	sπªe_Àvñ_s
 {

71 
	mbôs
;

76 
	mcumbôs
;

79 
πªe_s
 
	tπªe_t
;

80 
	sπªe_s
 {

81 
mÆloc_muãx_t
 
	möô_lock
;

83 #i‡
RTREE_HEIGHT
 > 1

84 
πªe_node_ñm_t
 
	mroŸ
[1U << (
RTREE_NSB
/
RTREE_HEIGHT
)];

86 
πªe_Àaf_ñm_t
 
	mroŸ
[1U << (
RTREE_NSB
/
RTREE_HEIGHT
)];

96 c⁄° 
πªe_Àvñ_t
 
	gπªe_Àvñs
[] = {

97 #i‡
RTREE_HEIGHT
 == 1

98 {
RTREE_NSB
, 
RTREE_NHIB
 + RTREE_NSB}

99 #ñi‡
RTREE_HEIGHT
 == 2

100 {
RTREE_NSB
/2, 
RTREE_NHIB
 + RTREE_NSB/2},

101 {
RTREE_NSB
/2 + RTREE_NSB%2, 
RTREE_NHIB
 + RTREE_NSB}

102 #ñi‡
RTREE_HEIGHT
 == 3

103 {
RTREE_NSB
/3, 
RTREE_NHIB
 + RTREE_NSB/3},

104 {
RTREE_NSB
/3 + RTREE_NSB%3/2,

105 
RTREE_NHIB
 + 
RTREE_NSB
/3*2 + RTREE_NSB%3/2},

106 {
RTREE_NSB
/3 + RTREE_NSB%3 - RTREE_NSB%3/2, 
RTREE_NHIB
 + RTREE_NSB}

108 #îr‹ 
Unsuµ‹ãd
 
πªe
 
height


112 
boﬁ
 
πªe_√w
(
πªe_t
 *
πªe
, boﬁ 
zî€d
);

114 
	gπªe_node_ñm_t
 *(
	tπªe_node_Æloc_t
)(
	ttsdn_t
 *, 
	tπªe_t
 *, 
	tsize_t
);

115 
πªe_node_Æloc_t
 *
JET_MUTABLE
 
πªe_node_Æloc
;

117 
	gπªe_Àaf_ñm_t
 *(
	tπªe_Àaf_Æloc_t
)(
	ttsdn_t
 *, 
	tπªe_t
 *, 
	tsize_t
);

118 
πªe_Àaf_Æloc_t
 *
JET_MUTABLE
 
πªe_Àaf_Æloc
;

120 (
	tπªe_node_dÆloc_t
)(
	ttsdn_t
 *, 
	tπªe_t
 *, 
	tπªe_node_ñm_t
 *);

121 
πªe_node_dÆloc_t
 *
JET_MUTABLE
 
πªe_node_dÆloc
;

123 (
	tπªe_Àaf_dÆloc_t
)(
	ttsdn_t
 *, 
	tπªe_t
 *, 
	tπªe_Àaf_ñm_t
 *);

124 
πªe_Àaf_dÆloc_t
 *
JET_MUTABLE
 
πªe_Àaf_dÆloc
;

125 #ifde‡
JEMALLOC_JET


126 
	`πªe_dñëe
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
);

128 
πªe_Àaf_ñm_t
 *
	`πªe_Àaf_ñm_lookup_h¨d
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
,

129 
πªe_˘x_t
 *
πªe_˘x
, 
uöçå_t
 
key
, 
boﬁ
 
dïídít
, boﬁ 
öô_missög
);

131 
JEMALLOC_ALWAYS_INLINE
 
uöçå_t


132 
	$πªe_Àafkey
(
uöçå_t
 
key
) {

133 
±rbôs
 = 
	`ZU
(1Ë<< (
LG_SIZEOF_PTR
+3);

134 
cumbôs
 = (
πªe_Àvñs
[
RTREE_HEIGHT
-1].cumbits -

135 
πªe_Àvñs
[
RTREE_HEIGHT
-1].
bôs
);

136 
maskbôs
 = 
±rbôs
 - 
cumbôs
;

137 
uöçå_t
 
mask
 = ~((
	`ZU
(1Ë<< 
maskbôs
) - 1);

138  (
key
 & 
mask
);

139 
	}
}

141 
JEMALLOC_ALWAYS_INLINE
 
size_t


142 
	$πªe_ˇche_dúe˘_m≠
(
uöçå_t
 
key
) {

143 
±rbôs
 = 
	`ZU
(1Ë<< (
LG_SIZEOF_PTR
+3);

144 
cumbôs
 = (
πªe_Àvñs
[
RTREE_HEIGHT
-1].cumbits -

145 
πªe_Àvñs
[
RTREE_HEIGHT
-1].
bôs
);

146 
maskbôs
 = 
±rbôs
 - 
cumbôs
;

147  (
size_t
)((
key
 >> 
maskbôs
Ë& (
RTREE_CTX_NCACHE
 - 1));

148 
	}
}

150 
JEMALLOC_ALWAYS_INLINE
 
uöçå_t


151 
	$πªe_subkey
(
uöçå_t
 
key
, 
Àvñ
) {

152 
±rbôs
 = 
	`ZU
(1Ë<< (
LG_SIZEOF_PTR
+3);

153 
cumbôs
 = 
πªe_Àvñs
[
Àvñ
].cumbits;

154 
shi·bôs
 = 
±rbôs
 - 
cumbôs
;

155 
maskbôs
 = 
πªe_Àvñs
[
Àvñ
].
bôs
;

156 
uöçå_t
 
mask
 = (
	`ZU
(1Ë<< 
maskbôs
) - 1;

157  ((
key
 >> 
shi·bôs
Ë& 
mask
);

158 
	}
}

171 #ifde‡
RTREE_LEAF_COMPACT


172 
JEMALLOC_ALWAYS_INLINE
 
uöçå_t


173 
	$πªe_Àaf_ñm_bôs_ªad
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_Àaf_ñm_t
 *
ñm
,

174 
boﬁ
 
dïídít
) {

175  (
uöçå_t
)
	`©omic_lﬂd_p
(&
ñm
->
À_bôs
, 
dïídít


176 ? 
ATOMIC_RELAXED
 : 
ATOMIC_ACQUIRE
);

177 
	}
}

179 
JEMALLOC_ALWAYS_INLINE
 
exã¡_t
 *

180 
	$πªe_Àaf_ñm_bôs_exã¡_gë
(
uöçå_t
 
bôs
) {

181 #ifde‡
__Ørch64__


186 
uöçå_t
 
high_bô_mask
 = ((uöçå_t)1 << 
LG_VADDR
) - 1;

188 
uöçå_t
 
low_bô_mask
 = ~(uintptr_t)1;

189 
uöçå_t
 
mask
 = 
high_bô_mask
 & 
low_bô_mask
;

190  (
exã¡_t
 *)(
bôs
 & 
mask
);

193  (
exã¡_t
 *)((
uöçå_t
)((
öçå_t
)(
bôs
 << 
RTREE_NHIB
) >>

194 
RTREE_NHIB
Ë& ~((
uöçå_t
)0x1));

196 
	}
}

198 
JEMALLOC_ALWAYS_INLINE
 
szöd_t


199 
	$πªe_Àaf_ñm_bôs_szöd_gë
(
uöçå_t
 
bôs
) {

200  (
szöd_t
)(
bôs
 >> 
LG_VADDR
);

201 
	}
}

203 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


204 
	$πªe_Àaf_ñm_bôs_¶ab_gë
(
uöçå_t
 
bôs
) {

205  (
boﬁ
)(
bôs
 & (
uöçå_t
)0x1);

206 
	}
}

210 
JEMALLOC_ALWAYS_INLINE
 
exã¡_t
 *

211 
	$πªe_Àaf_ñm_exã¡_ªad
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_Àaf_ñm_t
 *
ñm
,

212 
boﬁ
 
dïídít
) {

213 #ifde‡
RTREE_LEAF_COMPACT


214 
uöçå_t
 
bôs
 = 
	`πªe_Àaf_ñm_bôs_ªad
(
tsdn
, 
πªe
, 
ñm
, 
dïídít
);

215  
	`πªe_Àaf_ñm_bôs_exã¡_gë
(
bôs
);

217 
exã¡_t
 *
exã¡
 = (exã¡_à*)
	`©omic_lﬂd_p
(&
ñm
->
À_exã¡
, 
dïídít


218 ? 
ATOMIC_RELAXED
 : 
ATOMIC_ACQUIRE
);

219  
exã¡
;

221 
	}
}

223 
JEMALLOC_ALWAYS_INLINE
 
szöd_t


224 
	$πªe_Àaf_ñm_szöd_ªad
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_Àaf_ñm_t
 *
ñm
,

225 
boﬁ
 
dïídít
) {

226 #ifde‡
RTREE_LEAF_COMPACT


227 
uöçå_t
 
bôs
 = 
	`πªe_Àaf_ñm_bôs_ªad
(
tsdn
, 
πªe
, 
ñm
, 
dïídít
);

228  
	`πªe_Àaf_ñm_bôs_szöd_gë
(
bôs
);

230  (
szöd_t
)
	`©omic_lﬂd_u
(&
ñm
->
À_szöd
, 
dïídít
 ? 
ATOMIC_RELAXED


231 : 
ATOMIC_ACQUIRE
);

233 
	}
}

235 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


236 
	$πªe_Àaf_ñm_¶ab_ªad
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_Àaf_ñm_t
 *
ñm
,

237 
boﬁ
 
dïídít
) {

238 #ifde‡
RTREE_LEAF_COMPACT


239 
uöçå_t
 
bôs
 = 
	`πªe_Àaf_ñm_bôs_ªad
(
tsdn
, 
πªe
, 
ñm
, 
dïídít
);

240  
	`πªe_Àaf_ñm_bôs_¶ab_gë
(
bôs
);

242  
	`©omic_lﬂd_b
(&
ñm
->
À_¶ab
, 
dïídít
 ? 
ATOMIC_RELAXED
 :

243 
ATOMIC_ACQUIRE
);

245 
	}
}

247 
ölöe
 

248 
	$πªe_Àaf_ñm_exã¡_wrôe
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_Àaf_ñm_t
 *
ñm
,

249 
exã¡_t
 *
exã¡
) {

250 #ifde‡
RTREE_LEAF_COMPACT


251 
uöçå_t
 
ﬁd_bôs
 = 
	`πªe_Àaf_ñm_bôs_ªad
(
tsdn
, 
πªe
, 
ñm
, 
åue
);

252 
uöçå_t
 
bôs
 = ((uöçå_t)
	`πªe_Àaf_ñm_bôs_szöd_gë
(
ﬁd_bôs
) <<

253 
LG_VADDR
Ë| ((
uöçå_t
)
exã¡
 & (((uintptr_t)0x1 << LG_VADDR) - 1))

254 | ((
uöçå_t
)
	`πªe_Àaf_ñm_bôs_¶ab_gë
(
ﬁd_bôs
));

255 
	`©omic_°‹e_p
(&
ñm
->
À_bôs
, (*)
bôs
, 
ATOMIC_RELEASE
);

257 
	`©omic_°‹e_p
(&
ñm
->
À_exã¡
, 
exã¡
, 
ATOMIC_RELEASE
);

259 
	}
}

261 
ölöe
 

262 
	$πªe_Àaf_ñm_szöd_wrôe
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_Àaf_ñm_t
 *
ñm
,

263 
szöd_t
 
szöd
) {

264 
	`as£π
(
szöd
 <
NSIZES
);

266 #ifde‡
RTREE_LEAF_COMPACT


267 
uöçå_t
 
ﬁd_bôs
 = 
	`πªe_Àaf_ñm_bôs_ªad
(
tsdn
, 
πªe
, 
ñm
,

268 
åue
);

269 
uöçå_t
 
bôs
 = ((uöçå_t)
szöd
 << 
LG_VADDR
) |

270 ((
uöçå_t
)
	`πªe_Àaf_ñm_bôs_exã¡_gë
(
ﬁd_bôs
) &

271 (((
uöçå_t
)0x1 << 
LG_VADDR
) - 1)) |

272 ((
uöçå_t
)
	`πªe_Àaf_ñm_bôs_¶ab_gë
(
ﬁd_bôs
));

273 
	`©omic_°‹e_p
(&
ñm
->
À_bôs
, (*)
bôs
, 
ATOMIC_RELEASE
);

275 
	`©omic_°‹e_u
(&
ñm
->
À_szöd
, 
szöd
, 
ATOMIC_RELEASE
);

277 
	}
}

279 
ölöe
 

280 
	$πªe_Àaf_ñm_¶ab_wrôe
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_Àaf_ñm_t
 *
ñm
,

281 
boﬁ
 
¶ab
) {

282 #ifde‡
RTREE_LEAF_COMPACT


283 
uöçå_t
 
ﬁd_bôs
 = 
	`πªe_Àaf_ñm_bôs_ªad
(
tsdn
, 
πªe
, 
ñm
,

284 
åue
);

285 
uöçå_t
 
bôs
 = ((uöçå_t)
	`πªe_Àaf_ñm_bôs_szöd_gë
(
ﬁd_bôs
) <<

286 
LG_VADDR
Ë| ((
uöçå_t
)
	`πªe_Àaf_ñm_bôs_exã¡_gë
(
ﬁd_bôs
) &

287 (((
uöçå_t
)0x1 << 
LG_VADDR
Ë- 1)Ë| ((uöçå_t)
¶ab
);

288 
	`©omic_°‹e_p
(&
ñm
->
À_bôs
, (*)
bôs
, 
ATOMIC_RELEASE
);

290 
	`©omic_°‹e_b
(&
ñm
->
À_¶ab
, 
¶ab
, 
ATOMIC_RELEASE
);

292 
	}
}

294 
ölöe
 

295 
	$πªe_Àaf_ñm_wrôe
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_Àaf_ñm_t
 *
ñm
,

296 
exã¡_t
 *
exã¡
, 
szöd_t
 
szöd
, 
boﬁ
 
¶ab
) {

297 #ifde‡
RTREE_LEAF_COMPACT


298 
uöçå_t
 
bôs
 = ((uöçå_t)
szöd
 << 
LG_VADDR
) |

299 ((
uöçå_t
)
exã¡
 & (((uöçå_t)0x1 << 
LG_VADDR
) - 1)) |

300 ((
uöçå_t
)
¶ab
);

301 
	`©omic_°‹e_p
(&
ñm
->
À_bôs
, (*)
bôs
, 
ATOMIC_RELEASE
);

303 
	`πªe_Àaf_ñm_¶ab_wrôe
(
tsdn
, 
πªe
, 
ñm
, 
¶ab
);

304 
	`πªe_Àaf_ñm_szöd_wrôe
(
tsdn
, 
πªe
, 
ñm
, 
szöd
);

309 
	`πªe_Àaf_ñm_exã¡_wrôe
(
tsdn
, 
πªe
, 
ñm
, 
exã¡
);

311 
	}
}

313 
ölöe
 

314 
	$πªe_Àaf_ñm_szöd_¶ab_upd©e
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
,

315 
πªe_Àaf_ñm_t
 *
ñm
, 
szöd_t
 
szöd
, 
boﬁ
 
¶ab
) {

316 
	`as£π
(!
¶ab
 || 
szöd
 < 
NBINS
);

322 
	`πªe_Àaf_ñm_¶ab_wrôe
(
tsdn
, 
πªe
, 
ñm
, 
¶ab
);

323 
	`πªe_Àaf_ñm_szöd_wrôe
(
tsdn
, 
πªe
, 
ñm
, 
szöd
);

324 
	}
}

326 
JEMALLOC_ALWAYS_INLINE
 
πªe_Àaf_ñm_t
 *

327 
	$πªe_Àaf_ñm_lookup
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_˘x_t
 *
πªe_˘x
,

328 
uöçå_t
 
key
, 
boﬁ
 
dïídít
, boﬁ 
öô_missög
) {

329 
	`as£π
(
key
 != 0);

330 
	`as£π
(!
dïídít
 || !
öô_missög
);

332 
size_t
 
¶Ÿ
 = 
	`πªe_ˇche_dúe˘_m≠
(
key
);

333 
uöçå_t
 
Àafkey
 = 
	`πªe_Àafkey
(
key
);

334 
	`as£π
(
Àafkey
 !
RTREE_LEAFKEY_INVALID
);

337 i‡(
	`likñy
(
πªe_˘x
->
ˇche
[
¶Ÿ
].
Àafkey
 ==Üeafkey)) {

338 
πªe_Àaf_ñm_t
 *
Àaf
 = 
πªe_˘x
->
ˇche
[
¶Ÿ
].leaf;

339 
	`as£π
(
Àaf
 !
NULL
);

340 
uöçå_t
 
subkey
 = 
	`πªe_subkey
(
key
, 
RTREE_HEIGHT
-1);

341  &
Àaf
[
subkey
];

347 
	#RTREE_CACHE_CHECK_L2
(
i
) do { \

348 i‡(
	`likñy
(
πªe_˘x
->
l2_ˇche
[
i
].
Àafkey
 ==Üeafkey)) { \

349 
πªe_Àaf_ñm_t
 *
Àaf
 = 
πªe_˘x
->
l2_ˇche
[
i
].leaf; \

350 
	`as£π
(
Àaf
 !
NULL
); \

351 i‡(
i
 > 0) { \

353 
πªe_˘x
->
l2_ˇche
[
i
].
Àafkey
 = \

354 
πªe_˘x
->
l2_ˇche
[
i
 - 1].
Àafkey
; \

355 
πªe_˘x
->
l2_ˇche
[
i
].
Àaf
 = \

356 
πªe_˘x
->
l2_ˇche
[
i
 - 1].
Àaf
; \

357 
πªe_˘x
->
l2_ˇche
[
i
 - 1].
Àafkey
 = \

358 
πªe_˘x
->
ˇche
[
¶Ÿ
].
Àafkey
; \

359 
πªe_˘x
->
l2_ˇche
[
i
 - 1].
Àaf
 = \

360 
πªe_˘x
->
ˇche
[
¶Ÿ
].
Àaf
; \

362 
πªe_˘x
->
l2_ˇche
[0].
Àafkey
 = \

363 
πªe_˘x
->
ˇche
[
¶Ÿ
].
Àafkey
; \

364 
πªe_˘x
->
l2_ˇche
[0].
Àaf
 = \

365 
πªe_˘x
->
ˇche
[
¶Ÿ
].
Àaf
; \

367 
πªe_˘x
->
ˇche
[
¶Ÿ
].
Àafkey
 =Üeafkey; \

368 
πªe_˘x
->
ˇche
[
¶Ÿ
].
Àaf
 =Üeaf; \

369 
uöçå_t
 
subkey
 = 
	`πªe_subkey
(
key
, 
RTREE_HEIGHT
-1); \

370  &
Àaf
[
subkey
]; \

372 } 0)

	)

374 
	`RTREE_CACHE_CHECK_L2
(0);

376 
i
 = 1; i < 
RTREE_CTX_NCACHE_L2
; i++) {

377 
	`RTREE_CACHE_CHECK_L2
(
i
);

379 #unde‡
RTREE_CACHE_CHECK_L2


381  
	`πªe_Àaf_ñm_lookup_h¨d
(
tsdn
, 
πªe
, 
πªe_˘x
, 
key
,

382 
dïídít
, 
öô_missög
);

383 
	}
}

385 
ölöe
 
boﬁ


386 
	$πªe_wrôe
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_˘x_t
 *
πªe_˘x
, 
uöçå_t
 
key
,

387 
exã¡_t
 *
exã¡
, 
szöd_t
 
szöd
, 
boﬁ
 
¶ab
) {

389 
	`as£π
(
exã¡
 !
NULL
);

391 
πªe_Àaf_ñm_t
 *
ñm
 = 
	`πªe_Àaf_ñm_lookup
(
tsdn
, 
πªe
, 
πªe_˘x
,

392 
key
, 
Ál£
, 
åue
);

393 i‡(
ñm
 =
NULL
) {

394  
åue
;

397 
	`as£π
(
	`πªe_Àaf_ñm_exã¡_ªad
(
tsdn
, 
πªe
, 
ñm
, 
Ál£
Ë=
NULL
);

398 
	`πªe_Àaf_ñm_wrôe
(
tsdn
, 
πªe
, 
ñm
, 
exã¡
, 
szöd
, 
¶ab
);

400  
Ál£
;

401 
	}
}

403 
JEMALLOC_ALWAYS_INLINE
 
πªe_Àaf_ñm_t
 *

404 
	$πªe_ªad
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_˘x_t
 *
πªe_˘x
, 
uöçå_t
 
key
,

405 
boﬁ
 
dïídít
) {

406 
πªe_Àaf_ñm_t
 *
ñm
 = 
	`πªe_Àaf_ñm_lookup
(
tsdn
, 
πªe
, 
πªe_˘x
,

407 
key
, 
dïídít
, 
Ál£
);

408 i‡(!
dïídít
 && 
ñm
 =
NULL
) {

409  
NULL
;

411 
	`as£π
(
ñm
 !
NULL
);

412  
ñm
;

413 
	}
}

415 
JEMALLOC_ALWAYS_INLINE
 
exã¡_t
 *

416 
	$πªe_exã¡_ªad
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_˘x_t
 *
πªe_˘x
,

417 
uöçå_t
 
key
, 
boﬁ
 
dïídít
) {

418 
πªe_Àaf_ñm_t
 *
ñm
 = 
	`πªe_ªad
(
tsdn
, 
πªe
, 
πªe_˘x
, 
key
,

419 
dïídít
);

420 i‡(!
dïídít
 && 
ñm
 =
NULL
) {

421  
NULL
;

423  
	`πªe_Àaf_ñm_exã¡_ªad
(
tsdn
, 
πªe
, 
ñm
, 
dïídít
);

424 
	}
}

426 
JEMALLOC_ALWAYS_INLINE
 
szöd_t


427 
	$πªe_szöd_ªad
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_˘x_t
 *
πªe_˘x
,

428 
uöçå_t
 
key
, 
boﬁ
 
dïídít
) {

429 
πªe_Àaf_ñm_t
 *
ñm
 = 
	`πªe_ªad
(
tsdn
, 
πªe
, 
πªe_˘x
, 
key
,

430 
dïídít
);

431 i‡(!
dïídít
 && 
ñm
 =
NULL
) {

432  
NSIZES
;

434  
	`πªe_Àaf_ñm_szöd_ªad
(
tsdn
, 
πªe
, 
ñm
, 
dïídít
);

435 
	}
}

442 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


443 
	$πªe_exã¡_szöd_ªad
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_˘x_t
 *
πªe_˘x
,

444 
uöçå_t
 
key
, 
boﬁ
 
dïídít
, 
exã¡_t
 **
r_exã¡
, 
szöd_t
 *
r_szöd
) {

445 
πªe_Àaf_ñm_t
 *
ñm
 = 
	`πªe_ªad
(
tsdn
, 
πªe
, 
πªe_˘x
, 
key
,

446 
dïídít
);

447 i‡(!
dïídít
 && 
ñm
 =
NULL
) {

448  
åue
;

450 *
r_exã¡
 = 
	`πªe_Àaf_ñm_exã¡_ªad
(
tsdn
, 
πªe
, 
ñm
, 
dïídít
);

451 *
r_szöd
 = 
	`πªe_Àaf_ñm_szöd_ªad
(
tsdn
, 
πªe
, 
ñm
, 
dïídít
);

452  
Ál£
;

453 
	}
}

455 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


456 
	$πªe_szöd_¶ab_ªad
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_˘x_t
 *
πªe_˘x
,

457 
uöçå_t
 
key
, 
boﬁ
 
dïídít
, 
szöd_t
 *
r_szöd
, boﬁ *
r_¶ab
) {

458 
πªe_Àaf_ñm_t
 *
ñm
 = 
	`πªe_ªad
(
tsdn
, 
πªe
, 
πªe_˘x
, 
key
,

459 
dïídít
);

460 i‡(!
dïídít
 && 
ñm
 =
NULL
) {

461  
åue
;

463 *
r_szöd
 = 
	`πªe_Àaf_ñm_szöd_ªad
(
tsdn
, 
πªe
, 
ñm
, 
dïídít
);

464 *
r_¶ab
 = 
	`πªe_Àaf_ñm_¶ab_ªad
(
tsdn
, 
πªe
, 
ñm
, 
dïídít
);

465  
Ál£
;

466 
	}
}

468 
ölöe
 

469 
	$πªe_szöd_¶ab_upd©e
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_˘x_t
 *
πªe_˘x
,

470 
uöçå_t
 
key
, 
szöd_t
 
szöd
, 
boﬁ
 
¶ab
) {

471 
	`as£π
(!
¶ab
 || 
szöd
 < 
NBINS
);

473 
πªe_Àaf_ñm_t
 *
ñm
 = 
	`πªe_ªad
(
tsdn
, 
πªe
, 
πªe_˘x
, 
key
, 
åue
);

474 
	`πªe_Àaf_ñm_szöd_¶ab_upd©e
(
tsdn
, 
πªe
, 
ñm
, 
szöd
, 
¶ab
);

475 
	}
}

477 
ölöe
 

478 
	$πªe_˛ór
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_˘x_t
 *
πªe_˘x
,

479 
uöçå_t
 
key
) {

480 
πªe_Àaf_ñm_t
 *
ñm
 = 
	`πªe_ªad
(
tsdn
, 
πªe
, 
πªe_˘x
, 
key
, 
åue
);

481 
	`as£π
(
	`πªe_Àaf_ñm_exã¡_ªad
(
tsdn
, 
πªe
, 
ñm
, 
Ál£
) !=

482 
NULL
);

483 
	`πªe_Àaf_ñm_wrôe
(
tsdn
, 
πªe
, 
ñm
, 
NULL
, 
NSIZES
, 
Ál£
);

484 
	}
}

	@include/jemalloc/internal/rtree_tsd.h

1 #i‚de‡
JEMALLOC_INTERNAL_RTREE_CTX_H


2 
	#JEMALLOC_INTERNAL_RTREE_CTX_H


	)

21 
	#RTREE_CTX_LG_NCACHE
 4

	)

22 
	#RTREE_CTX_NCACHE
 (1 << 
RTREE_CTX_LG_NCACHE
)

	)

23 
	#RTREE_CTX_NCACHE_L2
 8

	)

29 
	#RTREE_CTX_ZERO_INITIALIZER
 {{{0}}, {{0}}}

	)

32 
πªe_Àaf_ñm_s
 
	tπªe_Àaf_ñm_t
;

34 
πªe_˘x_ˇche_ñm_s
 
	tπªe_˘x_ˇche_ñm_t
;

35 
	sπªe_˘x_ˇche_ñm_s
 {

36 
uöçå_t
 
	mÀafkey
;

37 
πªe_Àaf_ñm_t
 *
	mÀaf
;

40 
πªe_˘x_s
 
	tπªe_˘x_t
;

41 
	sπªe_˘x_s
 {

43 
πªe_˘x_ˇche_ñm_t
 
	mˇche
[
RTREE_CTX_NCACHE
];

45 
πªe_˘x_ˇche_ñm_t
 
	ml2_ˇche
[
RTREE_CTX_NCACHE_L2
];

48 
πªe_˘x_d©a_öô
(
πªe_˘x_t
 *
˘x
);

	@include/jemalloc/internal/size_classes.h

1 #i‚de‡
JEMALLOC_INTERNAL_SIZE_CLASSES_H


2 
	#JEMALLOC_INTERNAL_SIZE_CLASSES_H


	)

6 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ty≥s.h
"

37 
	#LG_SIZE_CLASS_GROUP
 2

	)

38 
	#LG_TINY_MIN
 3

	)

40 #i‡(
LG_SIZEOF_PTR
 =2 && 
LG_TINY_MIN
 =3 && 
LG_QUANTUM
 =3 && 
LG_PAGE
 == 12)

41 
	#SIZE_CLASSES
 \

43 
	`SC
–0, 3, 3, 0, 
no
, 
yes
, 1, 3) \

44 
	`SC
–1, 3, 3, 1, 
no
, 
yes
, 1, 3) \

45 
	`SC
–2, 3, 3, 2, 
no
, 
yes
, 3, 3) \

46 
	`SC
–3, 3, 3, 3, 
no
, 
yes
, 1, 3) \

48 
	`SC
–4, 5, 3, 1, 
no
, 
yes
, 5, 3) \

49 
	`SC
–5, 5, 3, 2, 
no
, 
yes
, 3, 3) \

50 
	`SC
–6, 5, 3, 3, 
no
, 
yes
, 7, 3) \

51 
	`SC
–7, 5, 3, 4, 
no
, 
yes
, 1, 3) \

53 
	`SC
–8, 6, 4, 1, 
no
, 
yes
, 5, 4) \

54 
	`SC
–9, 6, 4, 2, 
no
, 
yes
, 3, 4) \

55 
	`SC
–10, 6, 4, 3, 
no
, 
yes
, 7, 4) \

56 
	`SC
–11, 6, 4, 4, 
no
, 
yes
, 1, 4) \

58 
	`SC
–12, 7, 5, 1, 
no
, 
yes
, 5, 5) \

59 
	`SC
–13, 7, 5, 2, 
no
, 
yes
, 3, 5) \

60 
	`SC
–14, 7, 5, 3, 
no
, 
yes
, 7, 5) \

61 
	`SC
–15, 7, 5, 4, 
no
, 
yes
, 1, 5) \

63 
	`SC
–16, 8, 6, 1, 
no
, 
yes
, 5, 6) \

64 
	`SC
–17, 8, 6, 2, 
no
, 
yes
, 3, 6) \

65 
	`SC
–18, 8, 6, 3, 
no
, 
yes
, 7, 6) \

66 
	`SC
–19, 8, 6, 4, 
no
, 
yes
, 1, 6) \

68 
	`SC
–20, 9, 7, 1, 
no
, 
yes
, 5, 7) \

69 
	`SC
–21, 9, 7, 2, 
no
, 
yes
, 3, 7) \

70 
	`SC
–22, 9, 7, 3, 
no
, 
yes
, 7, 7) \

71 
	`SC
–23, 9, 7, 4, 
no
, 
yes
, 1, 7) \

73 
	`SC
–24, 10, 8, 1, 
no
, 
yes
, 5, 8) \

74 
	`SC
–25, 10, 8, 2, 
no
, 
yes
, 3, 8) \

75 
	`SC
–26, 10, 8, 3, 
no
, 
yes
, 7, 8) \

76 
	`SC
–27, 10, 8, 4, 
no
, 
yes
, 1, 8) \

78 
	`SC
–28, 11, 9, 1, 
no
, 
yes
, 5, 9) \

79 
	`SC
–29, 11, 9, 2, 
no
, 
yes
, 3, 9) \

80 
	`SC
–30, 11, 9, 3, 
no
, 
yes
, 7, 9) \

81 
	`SC
–31, 11, 9, 4, 
yes
, yes, 1, 9) \

83 
	`SC
–32, 12, 10, 1, 
no
, 
yes
, 5,Ço) \

84 
	`SC
–33, 12, 10, 2, 
no
, 
yes
, 3,Ço) \

85 
	`SC
–34, 12, 10, 3, 
no
, 
yes
, 7,Ço) \

86 
	`SC
–35, 12, 10, 4, 
yes
, yes, 2, 
no
) \

88 
	`SC
–36, 13, 11, 1, 
no
, 
yes
, 5,Ço) \

89 
	`SC
–37, 13, 11, 2, 
yes
, yes, 3, 
no
) \

90 
	`SC
–38, 13, 11, 3, 
no
, 
yes
, 7,Ço) \

91 
	`SC
–39, 13, 11, 4, 
yes
, 
no
, 0,Ço) \

93 
	`SC
–40, 14, 12, 1, 
yes
, 
no
, 0,Ço) \

94 
	`SC
–41, 14, 12, 2, 
yes
, 
no
, 0,Ço) \

95 
	`SC
–42, 14, 12, 3, 
yes
, 
no
, 0,Ço) \

96 
	`SC
–43, 14, 12, 4, 
yes
, 
no
, 0,Ço) \

98 
	`SC
–44, 15, 13, 1, 
yes
, 
no
, 0,Ço) \

99 
	`SC
–45, 15, 13, 2, 
yes
, 
no
, 0,Ço) \

100 
	`SC
–46, 15, 13, 3, 
yes
, 
no
, 0,Ço) \

101 
	`SC
–47, 15, 13, 4, 
yes
, 
no
, 0,Ço) \

103 
	`SC
–48, 16, 14, 1, 
yes
, 
no
, 0,Ço) \

104 
	`SC
–49, 16, 14, 2, 
yes
, 
no
, 0,Ço) \

105 
	`SC
–50, 16, 14, 3, 
yes
, 
no
, 0,Ço) \

106 
	`SC
–51, 16, 14, 4, 
yes
, 
no
, 0,Ço) \

108 
	`SC
–52, 17, 15, 1, 
yes
, 
no
, 0,Ço) \

109 
	`SC
–53, 17, 15, 2, 
yes
, 
no
, 0,Ço) \

110 
	`SC
–54, 17, 15, 3, 
yes
, 
no
, 0,Ço) \

111 
	`SC
–55, 17, 15, 4, 
yes
, 
no
, 0,Ço) \

113 
	`SC
–56, 18, 16, 1, 
yes
, 
no
, 0,Ço) \

114 
	`SC
–57, 18, 16, 2, 
yes
, 
no
, 0,Ço) \

115 
	`SC
–58, 18, 16, 3, 
yes
, 
no
, 0,Ço) \

116 
	`SC
–59, 18, 16, 4, 
yes
, 
no
, 0,Ço) \

118 
	`SC
–60, 19, 17, 1, 
yes
, 
no
, 0,Ço) \

119 
	`SC
–61, 19, 17, 2, 
yes
, 
no
, 0,Ço) \

120 
	`SC
–62, 19, 17, 3, 
yes
, 
no
, 0,Ço) \

121 
	`SC
–63, 19, 17, 4, 
yes
, 
no
, 0,Ço) \

123 
	`SC
–64, 20, 18, 1, 
yes
, 
no
, 0,Ço) \

124 
	`SC
–65, 20, 18, 2, 
yes
, 
no
, 0,Ço) \

125 
	`SC
–66, 20, 18, 3, 
yes
, 
no
, 0,Ço) \

126 
	`SC
–67, 20, 18, 4, 
yes
, 
no
, 0,Ço) \

128 
	`SC
–68, 21, 19, 1, 
yes
, 
no
, 0,Ço) \

129 
	`SC
–69, 21, 19, 2, 
yes
, 
no
, 0,Ço) \

130 
	`SC
–70, 21, 19, 3, 
yes
, 
no
, 0,Ço) \

131 
	`SC
–71, 21, 19, 4, 
yes
, 
no
, 0,Ço) \

133 
	`SC
–72, 22, 20, 1, 
yes
, 
no
, 0,Ço) \

134 
	`SC
–73, 22, 20, 2, 
yes
, 
no
, 0,Ço) \

135 
	`SC
–74, 22, 20, 3, 
yes
, 
no
, 0,Ço) \

136 
	`SC
–75, 22, 20, 4, 
yes
, 
no
, 0,Ço) \

138 
	`SC
–76, 23, 21, 1, 
yes
, 
no
, 0,Ço) \

139 
	`SC
–77, 23, 21, 2, 
yes
, 
no
, 0,Ço) \

140 
	`SC
–78, 23, 21, 3, 
yes
, 
no
, 0,Ço) \

141 
	`SC
–79, 23, 21, 4, 
yes
, 
no
, 0,Ço) \

143 
	`SC
–80, 24, 22, 1, 
yes
, 
no
, 0,Ço) \

144 
	`SC
–81, 24, 22, 2, 
yes
, 
no
, 0,Ço) \

145 
	`SC
–82, 24, 22, 3, 
yes
, 
no
, 0,Ço) \

146 
	`SC
–83, 24, 22, 4, 
yes
, 
no
, 0,Ço) \

148 
	`SC
–84, 25, 23, 1, 
yes
, 
no
, 0,Ço) \

149 
	`SC
–85, 25, 23, 2, 
yes
, 
no
, 0,Ço) \

150 
	`SC
–86, 25, 23, 3, 
yes
, 
no
, 0,Ço) \

151 
	`SC
–87, 25, 23, 4, 
yes
, 
no
, 0,Ço) \

153 
	`SC
–88, 26, 24, 1, 
yes
, 
no
, 0,Ço) \

154 
	`SC
–89, 26, 24, 2, 
yes
, 
no
, 0,Ço) \

155 
	`SC
–90, 26, 24, 3, 
yes
, 
no
, 0,Ço) \

156 
	`SC
–91, 26, 24, 4, 
yes
, 
no
, 0,Ço) \

158 
	`SC
–92, 27, 25, 1, 
yes
, 
no
, 0,Ço) \

159 
	`SC
–93, 27, 25, 2, 
yes
, 
no
, 0,Ço) \

160 
	`SC
–94, 27, 25, 3, 
yes
, 
no
, 0,Ço) \

161 
	`SC
–95, 27, 25, 4, 
yes
, 
no
, 0,Ço) \

163 
	`SC
–96, 28, 26, 1, 
yes
, 
no
, 0,Ço) \

164 
	`SC
–97, 28, 26, 2, 
yes
, 
no
, 0,Ço) \

165 
	`SC
–98, 28, 26, 3, 
yes
, 
no
, 0,Ço) \

166 
	`SC
–99, 28, 26, 4, 
yes
, 
no
, 0,Ço) \

168 
	`SC
(100, 29, 27, 1, 
yes
, 
no
, 0,Ço) \

169 
	`SC
(101, 29, 27, 2, 
yes
, 
no
, 0,Ço) \

170 
	`SC
(102, 29, 27, 3, 
yes
, 
no
, 0,Ço) \

171 
	`SC
(103, 29, 27, 4, 
yes
, 
no
, 0,Ço) \

173 
	`SC
(104, 30, 28, 1, 
yes
, 
no
, 0,Ço) \

174 
	`SC
(105, 30, 28, 2, 
yes
, 
no
, 0,Ço) \

175 
	`SC
(106, 30, 28, 3, 
yes
, 
no
, 0,Ço) \

176 

	)

177 
	#SIZE_CLASSES_DEFINED


	)

178 
	#NTBINS
 0

	)

179 
	#NLBINS
 32

	)

180 
	#NBINS
 39

	)

181 
	#NSIZES
 107

	)

182 
	#LG_CEIL_NSIZES
 7

	)

183 
	#NPSIZES
 71

	)

184 
	#LG_TINY_MAXCLASS
 "NA"

	)

185 
	#LOOKUP_MAXCLASS
 ((((
size_t
)1Ë<< 11Ë+ (((size_t)4Ë<< 9))

	)

186 
	#SMALL_MAXCLASS
 ((((
size_t
)1Ë<< 13Ë+ (((size_t)3Ë<< 11))

	)

187 
	#LG_LARGE_MINCLASS
 14

	)

188 
	#LARGE_MINCLASS
 (
	`ZU
(1Ë<< 
LG_LARGE_MINCLASS
)

	)

189 
	#LARGE_MAXCLASS
 ((((
size_t
)1Ë<< 30Ë+ (((size_t)3Ë<< 28))

	)

192 #i‡(
LG_SIZEOF_PTR
 =2 && 
LG_TINY_MIN
 =3 && 
LG_QUANTUM
 =4 && 
LG_PAGE
 == 12)

193 
	#SIZE_CLASSES
 \

195 
	`SC
–0, 3, 3, 0, 
no
, 
yes
, 1, 3) \

197 
	`SC
–1, 3, 3, 1, 
no
, 
yes
, 1, 3) \

198 
	`SC
–2, 4, 4, 1, 
no
, 
yes
, 1, 4) \

199 
	`SC
–3, 4, 4, 2, 
no
, 
yes
, 3, 4) \

200 
	`SC
–4, 4, 4, 3, 
no
, 
yes
, 1, 4) \

202 
	`SC
–5, 6, 4, 1, 
no
, 
yes
, 5, 4) \

203 
	`SC
–6, 6, 4, 2, 
no
, 
yes
, 3, 4) \

204 
	`SC
–7, 6, 4, 3, 
no
, 
yes
, 7, 4) \

205 
	`SC
–8, 6, 4, 4, 
no
, 
yes
, 1, 4) \

207 
	`SC
–9, 7, 5, 1, 
no
, 
yes
, 5, 5) \

208 
	`SC
–10, 7, 5, 2, 
no
, 
yes
, 3, 5) \

209 
	`SC
–11, 7, 5, 3, 
no
, 
yes
, 7, 5) \

210 
	`SC
–12, 7, 5, 4, 
no
, 
yes
, 1, 5) \

212 
	`SC
–13, 8, 6, 1, 
no
, 
yes
, 5, 6) \

213 
	`SC
–14, 8, 6, 2, 
no
, 
yes
, 3, 6) \

214 
	`SC
–15, 8, 6, 3, 
no
, 
yes
, 7, 6) \

215 
	`SC
–16, 8, 6, 4, 
no
, 
yes
, 1, 6) \

217 
	`SC
–17, 9, 7, 1, 
no
, 
yes
, 5, 7) \

218 
	`SC
–18, 9, 7, 2, 
no
, 
yes
, 3, 7) \

219 
	`SC
–19, 9, 7, 3, 
no
, 
yes
, 7, 7) \

220 
	`SC
–20, 9, 7, 4, 
no
, 
yes
, 1, 7) \

222 
	`SC
–21, 10, 8, 1, 
no
, 
yes
, 5, 8) \

223 
	`SC
–22, 10, 8, 2, 
no
, 
yes
, 3, 8) \

224 
	`SC
–23, 10, 8, 3, 
no
, 
yes
, 7, 8) \

225 
	`SC
–24, 10, 8, 4, 
no
, 
yes
, 1, 8) \

227 
	`SC
–25, 11, 9, 1, 
no
, 
yes
, 5, 9) \

228 
	`SC
–26, 11, 9, 2, 
no
, 
yes
, 3, 9) \

229 
	`SC
–27, 11, 9, 3, 
no
, 
yes
, 7, 9) \

230 
	`SC
–28, 11, 9, 4, 
yes
, yes, 1, 9) \

232 
	`SC
–29, 12, 10, 1, 
no
, 
yes
, 5,Ço) \

233 
	`SC
–30, 12, 10, 2, 
no
, 
yes
, 3,Ço) \

234 
	`SC
–31, 12, 10, 3, 
no
, 
yes
, 7,Ço) \

235 
	`SC
–32, 12, 10, 4, 
yes
, yes, 2, 
no
) \

237 
	`SC
–33, 13, 11, 1, 
no
, 
yes
, 5,Ço) \

238 
	`SC
–34, 13, 11, 2, 
yes
, yes, 3, 
no
) \

239 
	`SC
–35, 13, 11, 3, 
no
, 
yes
, 7,Ço) \

240 
	`SC
–36, 13, 11, 4, 
yes
, 
no
, 0,Ço) \

242 
	`SC
–37, 14, 12, 1, 
yes
, 
no
, 0,Ço) \

243 
	`SC
–38, 14, 12, 2, 
yes
, 
no
, 0,Ço) \

244 
	`SC
–39, 14, 12, 3, 
yes
, 
no
, 0,Ço) \

245 
	`SC
–40, 14, 12, 4, 
yes
, 
no
, 0,Ço) \

247 
	`SC
–41, 15, 13, 1, 
yes
, 
no
, 0,Ço) \

248 
	`SC
–42, 15, 13, 2, 
yes
, 
no
, 0,Ço) \

249 
	`SC
–43, 15, 13, 3, 
yes
, 
no
, 0,Ço) \

250 
	`SC
–44, 15, 13, 4, 
yes
, 
no
, 0,Ço) \

252 
	`SC
–45, 16, 14, 1, 
yes
, 
no
, 0,Ço) \

253 
	`SC
–46, 16, 14, 2, 
yes
, 
no
, 0,Ço) \

254 
	`SC
–47, 16, 14, 3, 
yes
, 
no
, 0,Ço) \

255 
	`SC
–48, 16, 14, 4, 
yes
, 
no
, 0,Ço) \

257 
	`SC
–49, 17, 15, 1, 
yes
, 
no
, 0,Ço) \

258 
	`SC
–50, 17, 15, 2, 
yes
, 
no
, 0,Ço) \

259 
	`SC
–51, 17, 15, 3, 
yes
, 
no
, 0,Ço) \

260 
	`SC
–52, 17, 15, 4, 
yes
, 
no
, 0,Ço) \

262 
	`SC
–53, 18, 16, 1, 
yes
, 
no
, 0,Ço) \

263 
	`SC
–54, 18, 16, 2, 
yes
, 
no
, 0,Ço) \

264 
	`SC
–55, 18, 16, 3, 
yes
, 
no
, 0,Ço) \

265 
	`SC
–56, 18, 16, 4, 
yes
, 
no
, 0,Ço) \

267 
	`SC
–57, 19, 17, 1, 
yes
, 
no
, 0,Ço) \

268 
	`SC
–58, 19, 17, 2, 
yes
, 
no
, 0,Ço) \

269 
	`SC
–59, 19, 17, 3, 
yes
, 
no
, 0,Ço) \

270 
	`SC
–60, 19, 17, 4, 
yes
, 
no
, 0,Ço) \

272 
	`SC
–61, 20, 18, 1, 
yes
, 
no
, 0,Ço) \

273 
	`SC
–62, 20, 18, 2, 
yes
, 
no
, 0,Ço) \

274 
	`SC
–63, 20, 18, 3, 
yes
, 
no
, 0,Ço) \

275 
	`SC
–64, 20, 18, 4, 
yes
, 
no
, 0,Ço) \

277 
	`SC
–65, 21, 19, 1, 
yes
, 
no
, 0,Ço) \

278 
	`SC
–66, 21, 19, 2, 
yes
, 
no
, 0,Ço) \

279 
	`SC
–67, 21, 19, 3, 
yes
, 
no
, 0,Ço) \

280 
	`SC
–68, 21, 19, 4, 
yes
, 
no
, 0,Ço) \

282 
	`SC
–69, 22, 20, 1, 
yes
, 
no
, 0,Ço) \

283 
	`SC
–70, 22, 20, 2, 
yes
, 
no
, 0,Ço) \

284 
	`SC
–71, 22, 20, 3, 
yes
, 
no
, 0,Ço) \

285 
	`SC
–72, 22, 20, 4, 
yes
, 
no
, 0,Ço) \

287 
	`SC
–73, 23, 21, 1, 
yes
, 
no
, 0,Ço) \

288 
	`SC
–74, 23, 21, 2, 
yes
, 
no
, 0,Ço) \

289 
	`SC
–75, 23, 21, 3, 
yes
, 
no
, 0,Ço) \

290 
	`SC
–76, 23, 21, 4, 
yes
, 
no
, 0,Ço) \

292 
	`SC
–77, 24, 22, 1, 
yes
, 
no
, 0,Ço) \

293 
	`SC
–78, 24, 22, 2, 
yes
, 
no
, 0,Ço) \

294 
	`SC
–79, 24, 22, 3, 
yes
, 
no
, 0,Ço) \

295 
	`SC
–80, 24, 22, 4, 
yes
, 
no
, 0,Ço) \

297 
	`SC
–81, 25, 23, 1, 
yes
, 
no
, 0,Ço) \

298 
	`SC
–82, 25, 23, 2, 
yes
, 
no
, 0,Ço) \

299 
	`SC
–83, 25, 23, 3, 
yes
, 
no
, 0,Ço) \

300 
	`SC
–84, 25, 23, 4, 
yes
, 
no
, 0,Ço) \

302 
	`SC
–85, 26, 24, 1, 
yes
, 
no
, 0,Ço) \

303 
	`SC
–86, 26, 24, 2, 
yes
, 
no
, 0,Ço) \

304 
	`SC
–87, 26, 24, 3, 
yes
, 
no
, 0,Ço) \

305 
	`SC
–88, 26, 24, 4, 
yes
, 
no
, 0,Ço) \

307 
	`SC
–89, 27, 25, 1, 
yes
, 
no
, 0,Ço) \

308 
	`SC
–90, 27, 25, 2, 
yes
, 
no
, 0,Ço) \

309 
	`SC
–91, 27, 25, 3, 
yes
, 
no
, 0,Ço) \

310 
	`SC
–92, 27, 25, 4, 
yes
, 
no
, 0,Ço) \

312 
	`SC
–93, 28, 26, 1, 
yes
, 
no
, 0,Ço) \

313 
	`SC
–94, 28, 26, 2, 
yes
, 
no
, 0,Ço) \

314 
	`SC
–95, 28, 26, 3, 
yes
, 
no
, 0,Ço) \

315 
	`SC
–96, 28, 26, 4, 
yes
, 
no
, 0,Ço) \

317 
	`SC
–97, 29, 27, 1, 
yes
, 
no
, 0,Ço) \

318 
	`SC
–98, 29, 27, 2, 
yes
, 
no
, 0,Ço) \

319 
	`SC
–99, 29, 27, 3, 
yes
, 
no
, 0,Ço) \

320 
	`SC
(100, 29, 27, 4, 
yes
, 
no
, 0,Ço) \

322 
	`SC
(101, 30, 28, 1, 
yes
, 
no
, 0,Ço) \

323 
	`SC
(102, 30, 28, 2, 
yes
, 
no
, 0,Ço) \

324 
	`SC
(103, 30, 28, 3, 
yes
, 
no
, 0,Ço) \

325 

	)

326 
	#SIZE_CLASSES_DEFINED


	)

327 
	#NTBINS
 1

	)

328 
	#NLBINS
 29

	)

329 
	#NBINS
 36

	)

330 
	#NSIZES
 104

	)

331 
	#LG_CEIL_NSIZES
 7

	)

332 
	#NPSIZES
 71

	)

333 
	#LG_TINY_MAXCLASS
 3

	)

334 
	#LOOKUP_MAXCLASS
 ((((
size_t
)1Ë<< 11Ë+ (((size_t)4Ë<< 9))

	)

335 
	#SMALL_MAXCLASS
 ((((
size_t
)1Ë<< 13Ë+ (((size_t)3Ë<< 11))

	)

336 
	#LG_LARGE_MINCLASS
 14

	)

337 
	#LARGE_MINCLASS
 (
	`ZU
(1Ë<< 
LG_LARGE_MINCLASS
)

	)

338 
	#LARGE_MAXCLASS
 ((((
size_t
)1Ë<< 30Ë+ (((size_t)3Ë<< 28))

	)

341 #i‡(
LG_SIZEOF_PTR
 =2 && 
LG_TINY_MIN
 =4 && 
LG_QUANTUM
 =4 && 
LG_PAGE
 == 12)

342 
	#SIZE_CLASSES
 \

344 
	`SC
–0, 4, 4, 0, 
no
, 
yes
, 1, 4) \

345 
	`SC
–1, 4, 4, 1, 
no
, 
yes
, 1, 4) \

346 
	`SC
–2, 4, 4, 2, 
no
, 
yes
, 3, 4) \

347 
	`SC
–3, 4, 4, 3, 
no
, 
yes
, 1, 4) \

349 
	`SC
–4, 6, 4, 1, 
no
, 
yes
, 5, 4) \

350 
	`SC
–5, 6, 4, 2, 
no
, 
yes
, 3, 4) \

351 
	`SC
–6, 6, 4, 3, 
no
, 
yes
, 7, 4) \

352 
	`SC
–7, 6, 4, 4, 
no
, 
yes
, 1, 4) \

354 
	`SC
–8, 7, 5, 1, 
no
, 
yes
, 5, 5) \

355 
	`SC
–9, 7, 5, 2, 
no
, 
yes
, 3, 5) \

356 
	`SC
–10, 7, 5, 3, 
no
, 
yes
, 7, 5) \

357 
	`SC
–11, 7, 5, 4, 
no
, 
yes
, 1, 5) \

359 
	`SC
–12, 8, 6, 1, 
no
, 
yes
, 5, 6) \

360 
	`SC
–13, 8, 6, 2, 
no
, 
yes
, 3, 6) \

361 
	`SC
–14, 8, 6, 3, 
no
, 
yes
, 7, 6) \

362 
	`SC
–15, 8, 6, 4, 
no
, 
yes
, 1, 6) \

364 
	`SC
–16, 9, 7, 1, 
no
, 
yes
, 5, 7) \

365 
	`SC
–17, 9, 7, 2, 
no
, 
yes
, 3, 7) \

366 
	`SC
–18, 9, 7, 3, 
no
, 
yes
, 7, 7) \

367 
	`SC
–19, 9, 7, 4, 
no
, 
yes
, 1, 7) \

369 
	`SC
–20, 10, 8, 1, 
no
, 
yes
, 5, 8) \

370 
	`SC
–21, 10, 8, 2, 
no
, 
yes
, 3, 8) \

371 
	`SC
–22, 10, 8, 3, 
no
, 
yes
, 7, 8) \

372 
	`SC
–23, 10, 8, 4, 
no
, 
yes
, 1, 8) \

374 
	`SC
–24, 11, 9, 1, 
no
, 
yes
, 5, 9) \

375 
	`SC
–25, 11, 9, 2, 
no
, 
yes
, 3, 9) \

376 
	`SC
–26, 11, 9, 3, 
no
, 
yes
, 7, 9) \

377 
	`SC
–27, 11, 9, 4, 
yes
, yes, 1, 9) \

379 
	`SC
–28, 12, 10, 1, 
no
, 
yes
, 5,Ço) \

380 
	`SC
–29, 12, 10, 2, 
no
, 
yes
, 3,Ço) \

381 
	`SC
–30, 12, 10, 3, 
no
, 
yes
, 7,Ço) \

382 
	`SC
–31, 12, 10, 4, 
yes
, yes, 2, 
no
) \

384 
	`SC
–32, 13, 11, 1, 
no
, 
yes
, 5,Ço) \

385 
	`SC
–33, 13, 11, 2, 
yes
, yes, 3, 
no
) \

386 
	`SC
–34, 13, 11, 3, 
no
, 
yes
, 7,Ço) \

387 
	`SC
–35, 13, 11, 4, 
yes
, 
no
, 0,Ço) \

389 
	`SC
–36, 14, 12, 1, 
yes
, 
no
, 0,Ço) \

390 
	`SC
–37, 14, 12, 2, 
yes
, 
no
, 0,Ço) \

391 
	`SC
–38, 14, 12, 3, 
yes
, 
no
, 0,Ço) \

392 
	`SC
–39, 14, 12, 4, 
yes
, 
no
, 0,Ço) \

394 
	`SC
–40, 15, 13, 1, 
yes
, 
no
, 0,Ço) \

395 
	`SC
–41, 15, 13, 2, 
yes
, 
no
, 0,Ço) \

396 
	`SC
–42, 15, 13, 3, 
yes
, 
no
, 0,Ço) \

397 
	`SC
–43, 15, 13, 4, 
yes
, 
no
, 0,Ço) \

399 
	`SC
–44, 16, 14, 1, 
yes
, 
no
, 0,Ço) \

400 
	`SC
–45, 16, 14, 2, 
yes
, 
no
, 0,Ço) \

401 
	`SC
–46, 16, 14, 3, 
yes
, 
no
, 0,Ço) \

402 
	`SC
–47, 16, 14, 4, 
yes
, 
no
, 0,Ço) \

404 
	`SC
–48, 17, 15, 1, 
yes
, 
no
, 0,Ço) \

405 
	`SC
–49, 17, 15, 2, 
yes
, 
no
, 0,Ço) \

406 
	`SC
–50, 17, 15, 3, 
yes
, 
no
, 0,Ço) \

407 
	`SC
–51, 17, 15, 4, 
yes
, 
no
, 0,Ço) \

409 
	`SC
–52, 18, 16, 1, 
yes
, 
no
, 0,Ço) \

410 
	`SC
–53, 18, 16, 2, 
yes
, 
no
, 0,Ço) \

411 
	`SC
–54, 18, 16, 3, 
yes
, 
no
, 0,Ço) \

412 
	`SC
–55, 18, 16, 4, 
yes
, 
no
, 0,Ço) \

414 
	`SC
–56, 19, 17, 1, 
yes
, 
no
, 0,Ço) \

415 
	`SC
–57, 19, 17, 2, 
yes
, 
no
, 0,Ço) \

416 
	`SC
–58, 19, 17, 3, 
yes
, 
no
, 0,Ço) \

417 
	`SC
–59, 19, 17, 4, 
yes
, 
no
, 0,Ço) \

419 
	`SC
–60, 20, 18, 1, 
yes
, 
no
, 0,Ço) \

420 
	`SC
–61, 20, 18, 2, 
yes
, 
no
, 0,Ço) \

421 
	`SC
–62, 20, 18, 3, 
yes
, 
no
, 0,Ço) \

422 
	`SC
–63, 20, 18, 4, 
yes
, 
no
, 0,Ço) \

424 
	`SC
–64, 21, 19, 1, 
yes
, 
no
, 0,Ço) \

425 
	`SC
–65, 21, 19, 2, 
yes
, 
no
, 0,Ço) \

426 
	`SC
–66, 21, 19, 3, 
yes
, 
no
, 0,Ço) \

427 
	`SC
–67, 21, 19, 4, 
yes
, 
no
, 0,Ço) \

429 
	`SC
–68, 22, 20, 1, 
yes
, 
no
, 0,Ço) \

430 
	`SC
–69, 22, 20, 2, 
yes
, 
no
, 0,Ço) \

431 
	`SC
–70, 22, 20, 3, 
yes
, 
no
, 0,Ço) \

432 
	`SC
–71, 22, 20, 4, 
yes
, 
no
, 0,Ço) \

434 
	`SC
–72, 23, 21, 1, 
yes
, 
no
, 0,Ço) \

435 
	`SC
–73, 23, 21, 2, 
yes
, 
no
, 0,Ço) \

436 
	`SC
–74, 23, 21, 3, 
yes
, 
no
, 0,Ço) \

437 
	`SC
–75, 23, 21, 4, 
yes
, 
no
, 0,Ço) \

439 
	`SC
–76, 24, 22, 1, 
yes
, 
no
, 0,Ço) \

440 
	`SC
–77, 24, 22, 2, 
yes
, 
no
, 0,Ço) \

441 
	`SC
–78, 24, 22, 3, 
yes
, 
no
, 0,Ço) \

442 
	`SC
–79, 24, 22, 4, 
yes
, 
no
, 0,Ço) \

444 
	`SC
–80, 25, 23, 1, 
yes
, 
no
, 0,Ço) \

445 
	`SC
–81, 25, 23, 2, 
yes
, 
no
, 0,Ço) \

446 
	`SC
–82, 25, 23, 3, 
yes
, 
no
, 0,Ço) \

447 
	`SC
–83, 25, 23, 4, 
yes
, 
no
, 0,Ço) \

449 
	`SC
–84, 26, 24, 1, 
yes
, 
no
, 0,Ço) \

450 
	`SC
–85, 26, 24, 2, 
yes
, 
no
, 0,Ço) \

451 
	`SC
–86, 26, 24, 3, 
yes
, 
no
, 0,Ço) \

452 
	`SC
–87, 26, 24, 4, 
yes
, 
no
, 0,Ço) \

454 
	`SC
–88, 27, 25, 1, 
yes
, 
no
, 0,Ço) \

455 
	`SC
–89, 27, 25, 2, 
yes
, 
no
, 0,Ço) \

456 
	`SC
–90, 27, 25, 3, 
yes
, 
no
, 0,Ço) \

457 
	`SC
–91, 27, 25, 4, 
yes
, 
no
, 0,Ço) \

459 
	`SC
–92, 28, 26, 1, 
yes
, 
no
, 0,Ço) \

460 
	`SC
–93, 28, 26, 2, 
yes
, 
no
, 0,Ço) \

461 
	`SC
–94, 28, 26, 3, 
yes
, 
no
, 0,Ço) \

462 
	`SC
–95, 28, 26, 4, 
yes
, 
no
, 0,Ço) \

464 
	`SC
–96, 29, 27, 1, 
yes
, 
no
, 0,Ço) \

465 
	`SC
–97, 29, 27, 2, 
yes
, 
no
, 0,Ço) \

466 
	`SC
–98, 29, 27, 3, 
yes
, 
no
, 0,Ço) \

467 
	`SC
–99, 29, 27, 4, 
yes
, 
no
, 0,Ço) \

469 
	`SC
(100, 30, 28, 1, 
yes
, 
no
, 0,Ço) \

470 
	`SC
(101, 30, 28, 2, 
yes
, 
no
, 0,Ço) \

471 
	`SC
(102, 30, 28, 3, 
yes
, 
no
, 0,Ço) \

472 

	)

473 
	#SIZE_CLASSES_DEFINED


	)

474 
	#NTBINS
 0

	)

475 
	#NLBINS
 28

	)

476 
	#NBINS
 35

	)

477 
	#NSIZES
 103

	)

478 
	#LG_CEIL_NSIZES
 7

	)

479 
	#NPSIZES
 71

	)

480 
	#LG_TINY_MAXCLASS
 "NA"

	)

481 
	#LOOKUP_MAXCLASS
 ((((
size_t
)1Ë<< 11Ë+ (((size_t)4Ë<< 9))

	)

482 
	#SMALL_MAXCLASS
 ((((
size_t
)1Ë<< 13Ë+ (((size_t)3Ë<< 11))

	)

483 
	#LG_LARGE_MINCLASS
 14

	)

484 
	#LARGE_MINCLASS
 (
	`ZU
(1Ë<< 
LG_LARGE_MINCLASS
)

	)

485 
	#LARGE_MAXCLASS
 ((((
size_t
)1Ë<< 30Ë+ (((size_t)3Ë<< 28))

	)

488 #i‡(
LG_SIZEOF_PTR
 =3 && 
LG_TINY_MIN
 =3 && 
LG_QUANTUM
 =3 && 
LG_PAGE
 == 12)

489 
	#SIZE_CLASSES
 \

491 
	`SC
–0, 3, 3, 0, 
no
, 
yes
, 1, 3) \

492 
	`SC
–1, 3, 3, 1, 
no
, 
yes
, 1, 3) \

493 
	`SC
–2, 3, 3, 2, 
no
, 
yes
, 3, 3) \

494 
	`SC
–3, 3, 3, 3, 
no
, 
yes
, 1, 3) \

496 
	`SC
–4, 5, 3, 1, 
no
, 
yes
, 5, 3) \

497 
	`SC
–5, 5, 3, 2, 
no
, 
yes
, 3, 3) \

498 
	`SC
–6, 5, 3, 3, 
no
, 
yes
, 7, 3) \

499 
	`SC
–7, 5, 3, 4, 
no
, 
yes
, 1, 3) \

501 
	`SC
–8, 6, 4, 1, 
no
, 
yes
, 5, 4) \

502 
	`SC
–9, 6, 4, 2, 
no
, 
yes
, 3, 4) \

503 
	`SC
–10, 6, 4, 3, 
no
, 
yes
, 7, 4) \

504 
	`SC
–11, 6, 4, 4, 
no
, 
yes
, 1, 4) \

506 
	`SC
–12, 7, 5, 1, 
no
, 
yes
, 5, 5) \

507 
	`SC
–13, 7, 5, 2, 
no
, 
yes
, 3, 5) \

508 
	`SC
–14, 7, 5, 3, 
no
, 
yes
, 7, 5) \

509 
	`SC
–15, 7, 5, 4, 
no
, 
yes
, 1, 5) \

511 
	`SC
–16, 8, 6, 1, 
no
, 
yes
, 5, 6) \

512 
	`SC
–17, 8, 6, 2, 
no
, 
yes
, 3, 6) \

513 
	`SC
–18, 8, 6, 3, 
no
, 
yes
, 7, 6) \

514 
	`SC
–19, 8, 6, 4, 
no
, 
yes
, 1, 6) \

516 
	`SC
–20, 9, 7, 1, 
no
, 
yes
, 5, 7) \

517 
	`SC
–21, 9, 7, 2, 
no
, 
yes
, 3, 7) \

518 
	`SC
–22, 9, 7, 3, 
no
, 
yes
, 7, 7) \

519 
	`SC
–23, 9, 7, 4, 
no
, 
yes
, 1, 7) \

521 
	`SC
–24, 10, 8, 1, 
no
, 
yes
, 5, 8) \

522 
	`SC
–25, 10, 8, 2, 
no
, 
yes
, 3, 8) \

523 
	`SC
–26, 10, 8, 3, 
no
, 
yes
, 7, 8) \

524 
	`SC
–27, 10, 8, 4, 
no
, 
yes
, 1, 8) \

526 
	`SC
–28, 11, 9, 1, 
no
, 
yes
, 5, 9) \

527 
	`SC
–29, 11, 9, 2, 
no
, 
yes
, 3, 9) \

528 
	`SC
–30, 11, 9, 3, 
no
, 
yes
, 7, 9) \

529 
	`SC
–31, 11, 9, 4, 
yes
, yes, 1, 9) \

531 
	`SC
–32, 12, 10, 1, 
no
, 
yes
, 5,Ço) \

532 
	`SC
–33, 12, 10, 2, 
no
, 
yes
, 3,Ço) \

533 
	`SC
–34, 12, 10, 3, 
no
, 
yes
, 7,Ço) \

534 
	`SC
–35, 12, 10, 4, 
yes
, yes, 2, 
no
) \

536 
	`SC
–36, 13, 11, 1, 
no
, 
yes
, 5,Ço) \

537 
	`SC
–37, 13, 11, 2, 
yes
, yes, 3, 
no
) \

538 
	`SC
–38, 13, 11, 3, 
no
, 
yes
, 7,Ço) \

539 
	`SC
–39, 13, 11, 4, 
yes
, 
no
, 0,Ço) \

541 
	`SC
–40, 14, 12, 1, 
yes
, 
no
, 0,Ço) \

542 
	`SC
–41, 14, 12, 2, 
yes
, 
no
, 0,Ço) \

543 
	`SC
–42, 14, 12, 3, 
yes
, 
no
, 0,Ço) \

544 
	`SC
–43, 14, 12, 4, 
yes
, 
no
, 0,Ço) \

546 
	`SC
–44, 15, 13, 1, 
yes
, 
no
, 0,Ço) \

547 
	`SC
–45, 15, 13, 2, 
yes
, 
no
, 0,Ço) \

548 
	`SC
–46, 15, 13, 3, 
yes
, 
no
, 0,Ço) \

549 
	`SC
–47, 15, 13, 4, 
yes
, 
no
, 0,Ço) \

551 
	`SC
–48, 16, 14, 1, 
yes
, 
no
, 0,Ço) \

552 
	`SC
–49, 16, 14, 2, 
yes
, 
no
, 0,Ço) \

553 
	`SC
–50, 16, 14, 3, 
yes
, 
no
, 0,Ço) \

554 
	`SC
–51, 16, 14, 4, 
yes
, 
no
, 0,Ço) \

556 
	`SC
–52, 17, 15, 1, 
yes
, 
no
, 0,Ço) \

557 
	`SC
–53, 17, 15, 2, 
yes
, 
no
, 0,Ço) \

558 
	`SC
–54, 17, 15, 3, 
yes
, 
no
, 0,Ço) \

559 
	`SC
–55, 17, 15, 4, 
yes
, 
no
, 0,Ço) \

561 
	`SC
–56, 18, 16, 1, 
yes
, 
no
, 0,Ço) \

562 
	`SC
–57, 18, 16, 2, 
yes
, 
no
, 0,Ço) \

563 
	`SC
–58, 18, 16, 3, 
yes
, 
no
, 0,Ço) \

564 
	`SC
–59, 18, 16, 4, 
yes
, 
no
, 0,Ço) \

566 
	`SC
–60, 19, 17, 1, 
yes
, 
no
, 0,Ço) \

567 
	`SC
–61, 19, 17, 2, 
yes
, 
no
, 0,Ço) \

568 
	`SC
–62, 19, 17, 3, 
yes
, 
no
, 0,Ço) \

569 
	`SC
–63, 19, 17, 4, 
yes
, 
no
, 0,Ço) \

571 
	`SC
–64, 20, 18, 1, 
yes
, 
no
, 0,Ço) \

572 
	`SC
–65, 20, 18, 2, 
yes
, 
no
, 0,Ço) \

573 
	`SC
–66, 20, 18, 3, 
yes
, 
no
, 0,Ço) \

574 
	`SC
–67, 20, 18, 4, 
yes
, 
no
, 0,Ço) \

576 
	`SC
–68, 21, 19, 1, 
yes
, 
no
, 0,Ço) \

577 
	`SC
–69, 21, 19, 2, 
yes
, 
no
, 0,Ço) \

578 
	`SC
–70, 21, 19, 3, 
yes
, 
no
, 0,Ço) \

579 
	`SC
–71, 21, 19, 4, 
yes
, 
no
, 0,Ço) \

581 
	`SC
–72, 22, 20, 1, 
yes
, 
no
, 0,Ço) \

582 
	`SC
–73, 22, 20, 2, 
yes
, 
no
, 0,Ço) \

583 
	`SC
–74, 22, 20, 3, 
yes
, 
no
, 0,Ço) \

584 
	`SC
–75, 22, 20, 4, 
yes
, 
no
, 0,Ço) \

586 
	`SC
–76, 23, 21, 1, 
yes
, 
no
, 0,Ço) \

587 
	`SC
–77, 23, 21, 2, 
yes
, 
no
, 0,Ço) \

588 
	`SC
–78, 23, 21, 3, 
yes
, 
no
, 0,Ço) \

589 
	`SC
–79, 23, 21, 4, 
yes
, 
no
, 0,Ço) \

591 
	`SC
–80, 24, 22, 1, 
yes
, 
no
, 0,Ço) \

592 
	`SC
–81, 24, 22, 2, 
yes
, 
no
, 0,Ço) \

593 
	`SC
–82, 24, 22, 3, 
yes
, 
no
, 0,Ço) \

594 
	`SC
–83, 24, 22, 4, 
yes
, 
no
, 0,Ço) \

596 
	`SC
–84, 25, 23, 1, 
yes
, 
no
, 0,Ço) \

597 
	`SC
–85, 25, 23, 2, 
yes
, 
no
, 0,Ço) \

598 
	`SC
–86, 25, 23, 3, 
yes
, 
no
, 0,Ço) \

599 
	`SC
–87, 25, 23, 4, 
yes
, 
no
, 0,Ço) \

601 
	`SC
–88, 26, 24, 1, 
yes
, 
no
, 0,Ço) \

602 
	`SC
–89, 26, 24, 2, 
yes
, 
no
, 0,Ço) \

603 
	`SC
–90, 26, 24, 3, 
yes
, 
no
, 0,Ço) \

604 
	`SC
–91, 26, 24, 4, 
yes
, 
no
, 0,Ço) \

606 
	`SC
–92, 27, 25, 1, 
yes
, 
no
, 0,Ço) \

607 
	`SC
–93, 27, 25, 2, 
yes
, 
no
, 0,Ço) \

608 
	`SC
–94, 27, 25, 3, 
yes
, 
no
, 0,Ço) \

609 
	`SC
–95, 27, 25, 4, 
yes
, 
no
, 0,Ço) \

611 
	`SC
–96, 28, 26, 1, 
yes
, 
no
, 0,Ço) \

612 
	`SC
–97, 28, 26, 2, 
yes
, 
no
, 0,Ço) \

613 
	`SC
–98, 28, 26, 3, 
yes
, 
no
, 0,Ço) \

614 
	`SC
–99, 28, 26, 4, 
yes
, 
no
, 0,Ço) \

616 
	`SC
(100, 29, 27, 1, 
yes
, 
no
, 0,Ço) \

617 
	`SC
(101, 29, 27, 2, 
yes
, 
no
, 0,Ço) \

618 
	`SC
(102, 29, 27, 3, 
yes
, 
no
, 0,Ço) \

619 
	`SC
(103, 29, 27, 4, 
yes
, 
no
, 0,Ço) \

621 
	`SC
(104, 30, 28, 1, 
yes
, 
no
, 0,Ço) \

622 
	`SC
(105, 30, 28, 2, 
yes
, 
no
, 0,Ço) \

623 
	`SC
(106, 30, 28, 3, 
yes
, 
no
, 0,Ço) \

624 
	`SC
(107, 30, 28, 4, 
yes
, 
no
, 0,Ço) \

626 
	`SC
(108, 31, 29, 1, 
yes
, 
no
, 0,Ço) \

627 
	`SC
(109, 31, 29, 2, 
yes
, 
no
, 0,Ço) \

628 
	`SC
(110, 31, 29, 3, 
yes
, 
no
, 0,Ço) \

629 
	`SC
(111, 31, 29, 4, 
yes
, 
no
, 0,Ço) \

631 
	`SC
(112, 32, 30, 1, 
yes
, 
no
, 0,Ço) \

632 
	`SC
(113, 32, 30, 2, 
yes
, 
no
, 0,Ço) \

633 
	`SC
(114, 32, 30, 3, 
yes
, 
no
, 0,Ço) \

634 
	`SC
(115, 32, 30, 4, 
yes
, 
no
, 0,Ço) \

636 
	`SC
(116, 33, 31, 1, 
yes
, 
no
, 0,Ço) \

637 
	`SC
(117, 33, 31, 2, 
yes
, 
no
, 0,Ço) \

638 
	`SC
(118, 33, 31, 3, 
yes
, 
no
, 0,Ço) \

639 
	`SC
(119, 33, 31, 4, 
yes
, 
no
, 0,Ço) \

641 
	`SC
(120, 34, 32, 1, 
yes
, 
no
, 0,Ço) \

642 
	`SC
(121, 34, 32, 2, 
yes
, 
no
, 0,Ço) \

643 
	`SC
(122, 34, 32, 3, 
yes
, 
no
, 0,Ço) \

644 
	`SC
(123, 34, 32, 4, 
yes
, 
no
, 0,Ço) \

646 
	`SC
(124, 35, 33, 1, 
yes
, 
no
, 0,Ço) \

647 
	`SC
(125, 35, 33, 2, 
yes
, 
no
, 0,Ço) \

648 
	`SC
(126, 35, 33, 3, 
yes
, 
no
, 0,Ço) \

649 
	`SC
(127, 35, 33, 4, 
yes
, 
no
, 0,Ço) \

651 
	`SC
(128, 36, 34, 1, 
yes
, 
no
, 0,Ço) \

652 
	`SC
(129, 36, 34, 2, 
yes
, 
no
, 0,Ço) \

653 
	`SC
(130, 36, 34, 3, 
yes
, 
no
, 0,Ço) \

654 
	`SC
(131, 36, 34, 4, 
yes
, 
no
, 0,Ço) \

656 
	`SC
(132, 37, 35, 1, 
yes
, 
no
, 0,Ço) \

657 
	`SC
(133, 37, 35, 2, 
yes
, 
no
, 0,Ço) \

658 
	`SC
(134, 37, 35, 3, 
yes
, 
no
, 0,Ço) \

659 
	`SC
(135, 37, 35, 4, 
yes
, 
no
, 0,Ço) \

661 
	`SC
(136, 38, 36, 1, 
yes
, 
no
, 0,Ço) \

662 
	`SC
(137, 38, 36, 2, 
yes
, 
no
, 0,Ço) \

663 
	`SC
(138, 38, 36, 3, 
yes
, 
no
, 0,Ço) \

664 
	`SC
(139, 38, 36, 4, 
yes
, 
no
, 0,Ço) \

666 
	`SC
(140, 39, 37, 1, 
yes
, 
no
, 0,Ço) \

667 
	`SC
(141, 39, 37, 2, 
yes
, 
no
, 0,Ço) \

668 
	`SC
(142, 39, 37, 3, 
yes
, 
no
, 0,Ço) \

669 
	`SC
(143, 39, 37, 4, 
yes
, 
no
, 0,Ço) \

671 
	`SC
(144, 40, 38, 1, 
yes
, 
no
, 0,Ço) \

672 
	`SC
(145, 40, 38, 2, 
yes
, 
no
, 0,Ço) \

673 
	`SC
(146, 40, 38, 3, 
yes
, 
no
, 0,Ço) \

674 
	`SC
(147, 40, 38, 4, 
yes
, 
no
, 0,Ço) \

676 
	`SC
(148, 41, 39, 1, 
yes
, 
no
, 0,Ço) \

677 
	`SC
(149, 41, 39, 2, 
yes
, 
no
, 0,Ço) \

678 
	`SC
(150, 41, 39, 3, 
yes
, 
no
, 0,Ço) \

679 
	`SC
(151, 41, 39, 4, 
yes
, 
no
, 0,Ço) \

681 
	`SC
(152, 42, 40, 1, 
yes
, 
no
, 0,Ço) \

682 
	`SC
(153, 42, 40, 2, 
yes
, 
no
, 0,Ço) \

683 
	`SC
(154, 42, 40, 3, 
yes
, 
no
, 0,Ço) \

684 
	`SC
(155, 42, 40, 4, 
yes
, 
no
, 0,Ço) \

686 
	`SC
(156, 43, 41, 1, 
yes
, 
no
, 0,Ço) \

687 
	`SC
(157, 43, 41, 2, 
yes
, 
no
, 0,Ço) \

688 
	`SC
(158, 43, 41, 3, 
yes
, 
no
, 0,Ço) \

689 
	`SC
(159, 43, 41, 4, 
yes
, 
no
, 0,Ço) \

691 
	`SC
(160, 44, 42, 1, 
yes
, 
no
, 0,Ço) \

692 
	`SC
(161, 44, 42, 2, 
yes
, 
no
, 0,Ço) \

693 
	`SC
(162, 44, 42, 3, 
yes
, 
no
, 0,Ço) \

694 
	`SC
(163, 44, 42, 4, 
yes
, 
no
, 0,Ço) \

696 
	`SC
(164, 45, 43, 1, 
yes
, 
no
, 0,Ço) \

697 
	`SC
(165, 45, 43, 2, 
yes
, 
no
, 0,Ço) \

698 
	`SC
(166, 45, 43, 3, 
yes
, 
no
, 0,Ço) \

699 
	`SC
(167, 45, 43, 4, 
yes
, 
no
, 0,Ço) \

701 
	`SC
(168, 46, 44, 1, 
yes
, 
no
, 0,Ço) \

702 
	`SC
(169, 46, 44, 2, 
yes
, 
no
, 0,Ço) \

703 
	`SC
(170, 46, 44, 3, 
yes
, 
no
, 0,Ço) \

704 
	`SC
(171, 46, 44, 4, 
yes
, 
no
, 0,Ço) \

706 
	`SC
(172, 47, 45, 1, 
yes
, 
no
, 0,Ço) \

707 
	`SC
(173, 47, 45, 2, 
yes
, 
no
, 0,Ço) \

708 
	`SC
(174, 47, 45, 3, 
yes
, 
no
, 0,Ço) \

709 
	`SC
(175, 47, 45, 4, 
yes
, 
no
, 0,Ço) \

711 
	`SC
(176, 48, 46, 1, 
yes
, 
no
, 0,Ço) \

712 
	`SC
(177, 48, 46, 2, 
yes
, 
no
, 0,Ço) \

713 
	`SC
(178, 48, 46, 3, 
yes
, 
no
, 0,Ço) \

714 
	`SC
(179, 48, 46, 4, 
yes
, 
no
, 0,Ço) \

716 
	`SC
(180, 49, 47, 1, 
yes
, 
no
, 0,Ço) \

717 
	`SC
(181, 49, 47, 2, 
yes
, 
no
, 0,Ço) \

718 
	`SC
(182, 49, 47, 3, 
yes
, 
no
, 0,Ço) \

719 
	`SC
(183, 49, 47, 4, 
yes
, 
no
, 0,Ço) \

721 
	`SC
(184, 50, 48, 1, 
yes
, 
no
, 0,Ço) \

722 
	`SC
(185, 50, 48, 2, 
yes
, 
no
, 0,Ço) \

723 
	`SC
(186, 50, 48, 3, 
yes
, 
no
, 0,Ço) \

724 
	`SC
(187, 50, 48, 4, 
yes
, 
no
, 0,Ço) \

726 
	`SC
(188, 51, 49, 1, 
yes
, 
no
, 0,Ço) \

727 
	`SC
(189, 51, 49, 2, 
yes
, 
no
, 0,Ço) \

728 
	`SC
(190, 51, 49, 3, 
yes
, 
no
, 0,Ço) \

729 
	`SC
(191, 51, 49, 4, 
yes
, 
no
, 0,Ço) \

731 
	`SC
(192, 52, 50, 1, 
yes
, 
no
, 0,Ço) \

732 
	`SC
(193, 52, 50, 2, 
yes
, 
no
, 0,Ço) \

733 
	`SC
(194, 52, 50, 3, 
yes
, 
no
, 0,Ço) \

734 
	`SC
(195, 52, 50, 4, 
yes
, 
no
, 0,Ço) \

736 
	`SC
(196, 53, 51, 1, 
yes
, 
no
, 0,Ço) \

737 
	`SC
(197, 53, 51, 2, 
yes
, 
no
, 0,Ço) \

738 
	`SC
(198, 53, 51, 3, 
yes
, 
no
, 0,Ço) \

739 
	`SC
(199, 53, 51, 4, 
yes
, 
no
, 0,Ço) \

741 
	`SC
(200, 54, 52, 1, 
yes
, 
no
, 0,Ço) \

742 
	`SC
(201, 54, 52, 2, 
yes
, 
no
, 0,Ço) \

743 
	`SC
(202, 54, 52, 3, 
yes
, 
no
, 0,Ço) \

744 
	`SC
(203, 54, 52, 4, 
yes
, 
no
, 0,Ço) \

746 
	`SC
(204, 55, 53, 1, 
yes
, 
no
, 0,Ço) \

747 
	`SC
(205, 55, 53, 2, 
yes
, 
no
, 0,Ço) \

748 
	`SC
(206, 55, 53, 3, 
yes
, 
no
, 0,Ço) \

749 
	`SC
(207, 55, 53, 4, 
yes
, 
no
, 0,Ço) \

751 
	`SC
(208, 56, 54, 1, 
yes
, 
no
, 0,Ço) \

752 
	`SC
(209, 56, 54, 2, 
yes
, 
no
, 0,Ço) \

753 
	`SC
(210, 56, 54, 3, 
yes
, 
no
, 0,Ço) \

754 
	`SC
(211, 56, 54, 4, 
yes
, 
no
, 0,Ço) \

756 
	`SC
(212, 57, 55, 1, 
yes
, 
no
, 0,Ço) \

757 
	`SC
(213, 57, 55, 2, 
yes
, 
no
, 0,Ço) \

758 
	`SC
(214, 57, 55, 3, 
yes
, 
no
, 0,Ço) \

759 
	`SC
(215, 57, 55, 4, 
yes
, 
no
, 0,Ço) \

761 
	`SC
(216, 58, 56, 1, 
yes
, 
no
, 0,Ço) \

762 
	`SC
(217, 58, 56, 2, 
yes
, 
no
, 0,Ço) \

763 
	`SC
(218, 58, 56, 3, 
yes
, 
no
, 0,Ço) \

764 
	`SC
(219, 58, 56, 4, 
yes
, 
no
, 0,Ço) \

766 
	`SC
(220, 59, 57, 1, 
yes
, 
no
, 0,Ço) \

767 
	`SC
(221, 59, 57, 2, 
yes
, 
no
, 0,Ço) \

768 
	`SC
(222, 59, 57, 3, 
yes
, 
no
, 0,Ço) \

769 
	`SC
(223, 59, 57, 4, 
yes
, 
no
, 0,Ço) \

771 
	`SC
(224, 60, 58, 1, 
yes
, 
no
, 0,Ço) \

772 
	`SC
(225, 60, 58, 2, 
yes
, 
no
, 0,Ço) \

773 
	`SC
(226, 60, 58, 3, 
yes
, 
no
, 0,Ço) \

774 
	`SC
(227, 60, 58, 4, 
yes
, 
no
, 0,Ço) \

776 
	`SC
(228, 61, 59, 1, 
yes
, 
no
, 0,Ço) \

777 
	`SC
(229, 61, 59, 2, 
yes
, 
no
, 0,Ço) \

778 
	`SC
(230, 61, 59, 3, 
yes
, 
no
, 0,Ço) \

779 
	`SC
(231, 61, 59, 4, 
yes
, 
no
, 0,Ço) \

781 
	`SC
(232, 62, 60, 1, 
yes
, 
no
, 0,Ço) \

782 
	`SC
(233, 62, 60, 2, 
yes
, 
no
, 0,Ço) \

783 
	`SC
(234, 62, 60, 3, 
yes
, 
no
, 0,Ço) \

784 

	)

785 
	#SIZE_CLASSES_DEFINED


	)

786 
	#NTBINS
 0

	)

787 
	#NLBINS
 32

	)

788 
	#NBINS
 39

	)

789 
	#NSIZES
 235

	)

790 
	#LG_CEIL_NSIZES
 8

	)

791 
	#NPSIZES
 199

	)

792 
	#LG_TINY_MAXCLASS
 "NA"

	)

793 
	#LOOKUP_MAXCLASS
 ((((
size_t
)1Ë<< 11Ë+ (((size_t)4Ë<< 9))

	)

794 
	#SMALL_MAXCLASS
 ((((
size_t
)1Ë<< 13Ë+ (((size_t)3Ë<< 11))

	)

795 
	#LG_LARGE_MINCLASS
 14

	)

796 
	#LARGE_MINCLASS
 (
	`ZU
(1Ë<< 
LG_LARGE_MINCLASS
)

	)

797 
	#LARGE_MAXCLASS
 ((((
size_t
)1Ë<< 62Ë+ (((size_t)3Ë<< 60))

	)

800 #i‡(
LG_SIZEOF_PTR
 =3 && 
LG_TINY_MIN
 =3 && 
LG_QUANTUM
 =4 && 
LG_PAGE
 == 12)

801 
	#SIZE_CLASSES
 \

803 
	`SC
–0, 3, 3, 0, 
no
, 
yes
, 1, 3) \

805 
	`SC
–1, 3, 3, 1, 
no
, 
yes
, 1, 3) \

806 
	`SC
–2, 4, 4, 1, 
no
, 
yes
, 1, 4) \

807 
	`SC
–3, 4, 4, 2, 
no
, 
yes
, 3, 4) \

808 
	`SC
–4, 4, 4, 3, 
no
, 
yes
, 1, 4) \

810 
	`SC
–5, 6, 4, 1, 
no
, 
yes
, 5, 4) \

811 
	`SC
–6, 6, 4, 2, 
no
, 
yes
, 3, 4) \

812 
	`SC
–7, 6, 4, 3, 
no
, 
yes
, 7, 4) \

813 
	`SC
–8, 6, 4, 4, 
no
, 
yes
, 1, 4) \

815 
	`SC
–9, 7, 5, 1, 
no
, 
yes
, 5, 5) \

816 
	`SC
–10, 7, 5, 2, 
no
, 
yes
, 3, 5) \

817 
	`SC
–11, 7, 5, 3, 
no
, 
yes
, 7, 5) \

818 
	`SC
–12, 7, 5, 4, 
no
, 
yes
, 1, 5) \

820 
	`SC
–13, 8, 6, 1, 
no
, 
yes
, 5, 6) \

821 
	`SC
–14, 8, 6, 2, 
no
, 
yes
, 3, 6) \

822 
	`SC
–15, 8, 6, 3, 
no
, 
yes
, 7, 6) \

823 
	`SC
–16, 8, 6, 4, 
no
, 
yes
, 1, 6) \

825 
	`SC
–17, 9, 7, 1, 
no
, 
yes
, 5, 7) \

826 
	`SC
–18, 9, 7, 2, 
no
, 
yes
, 3, 7) \

827 
	`SC
–19, 9, 7, 3, 
no
, 
yes
, 7, 7) \

828 
	`SC
–20, 9, 7, 4, 
no
, 
yes
, 1, 7) \

830 
	`SC
–21, 10, 8, 1, 
no
, 
yes
, 5, 8) \

831 
	`SC
–22, 10, 8, 2, 
no
, 
yes
, 3, 8) \

832 
	`SC
–23, 10, 8, 3, 
no
, 
yes
, 7, 8) \

833 
	`SC
–24, 10, 8, 4, 
no
, 
yes
, 1, 8) \

835 
	`SC
–25, 11, 9, 1, 
no
, 
yes
, 5, 9) \

836 
	`SC
–26, 11, 9, 2, 
no
, 
yes
, 3, 9) \

837 
	`SC
–27, 11, 9, 3, 
no
, 
yes
, 7, 9) \

838 
	`SC
–28, 11, 9, 4, 
yes
, yes, 1, 9) \

840 
	`SC
–29, 12, 10, 1, 
no
, 
yes
, 5,Ço) \

841 
	`SC
–30, 12, 10, 2, 
no
, 
yes
, 3,Ço) \

842 
	`SC
–31, 12, 10, 3, 
no
, 
yes
, 7,Ço) \

843 
	`SC
–32, 12, 10, 4, 
yes
, yes, 2, 
no
) \

845 
	`SC
–33, 13, 11, 1, 
no
, 
yes
, 5,Ço) \

846 
	`SC
–34, 13, 11, 2, 
yes
, yes, 3, 
no
) \

847 
	`SC
–35, 13, 11, 3, 
no
, 
yes
, 7,Ço) \

848 
	`SC
–36, 13, 11, 4, 
yes
, 
no
, 0,Ço) \

850 
	`SC
–37, 14, 12, 1, 
yes
, 
no
, 0,Ço) \

851 
	`SC
–38, 14, 12, 2, 
yes
, 
no
, 0,Ço) \

852 
	`SC
–39, 14, 12, 3, 
yes
, 
no
, 0,Ço) \

853 
	`SC
–40, 14, 12, 4, 
yes
, 
no
, 0,Ço) \

855 
	`SC
–41, 15, 13, 1, 
yes
, 
no
, 0,Ço) \

856 
	`SC
–42, 15, 13, 2, 
yes
, 
no
, 0,Ço) \

857 
	`SC
–43, 15, 13, 3, 
yes
, 
no
, 0,Ço) \

858 
	`SC
–44, 15, 13, 4, 
yes
, 
no
, 0,Ço) \

860 
	`SC
–45, 16, 14, 1, 
yes
, 
no
, 0,Ço) \

861 
	`SC
–46, 16, 14, 2, 
yes
, 
no
, 0,Ço) \

862 
	`SC
–47, 16, 14, 3, 
yes
, 
no
, 0,Ço) \

863 
	`SC
–48, 16, 14, 4, 
yes
, 
no
, 0,Ço) \

865 
	`SC
–49, 17, 15, 1, 
yes
, 
no
, 0,Ço) \

866 
	`SC
–50, 17, 15, 2, 
yes
, 
no
, 0,Ço) \

867 
	`SC
–51, 17, 15, 3, 
yes
, 
no
, 0,Ço) \

868 
	`SC
–52, 17, 15, 4, 
yes
, 
no
, 0,Ço) \

870 
	`SC
–53, 18, 16, 1, 
yes
, 
no
, 0,Ço) \

871 
	`SC
–54, 18, 16, 2, 
yes
, 
no
, 0,Ço) \

872 
	`SC
–55, 18, 16, 3, 
yes
, 
no
, 0,Ço) \

873 
	`SC
–56, 18, 16, 4, 
yes
, 
no
, 0,Ço) \

875 
	`SC
–57, 19, 17, 1, 
yes
, 
no
, 0,Ço) \

876 
	`SC
–58, 19, 17, 2, 
yes
, 
no
, 0,Ço) \

877 
	`SC
–59, 19, 17, 3, 
yes
, 
no
, 0,Ço) \

878 
	`SC
–60, 19, 17, 4, 
yes
, 
no
, 0,Ço) \

880 
	`SC
–61, 20, 18, 1, 
yes
, 
no
, 0,Ço) \

881 
	`SC
–62, 20, 18, 2, 
yes
, 
no
, 0,Ço) \

882 
	`SC
–63, 20, 18, 3, 
yes
, 
no
, 0,Ço) \

883 
	`SC
–64, 20, 18, 4, 
yes
, 
no
, 0,Ço) \

885 
	`SC
–65, 21, 19, 1, 
yes
, 
no
, 0,Ço) \

886 
	`SC
–66, 21, 19, 2, 
yes
, 
no
, 0,Ço) \

887 
	`SC
–67, 21, 19, 3, 
yes
, 
no
, 0,Ço) \

888 
	`SC
–68, 21, 19, 4, 
yes
, 
no
, 0,Ço) \

890 
	`SC
–69, 22, 20, 1, 
yes
, 
no
, 0,Ço) \

891 
	`SC
–70, 22, 20, 2, 
yes
, 
no
, 0,Ço) \

892 
	`SC
–71, 22, 20, 3, 
yes
, 
no
, 0,Ço) \

893 
	`SC
–72, 22, 20, 4, 
yes
, 
no
, 0,Ço) \

895 
	`SC
–73, 23, 21, 1, 
yes
, 
no
, 0,Ço) \

896 
	`SC
–74, 23, 21, 2, 
yes
, 
no
, 0,Ço) \

897 
	`SC
–75, 23, 21, 3, 
yes
, 
no
, 0,Ço) \

898 
	`SC
–76, 23, 21, 4, 
yes
, 
no
, 0,Ço) \

900 
	`SC
–77, 24, 22, 1, 
yes
, 
no
, 0,Ço) \

901 
	`SC
–78, 24, 22, 2, 
yes
, 
no
, 0,Ço) \

902 
	`SC
–79, 24, 22, 3, 
yes
, 
no
, 0,Ço) \

903 
	`SC
–80, 24, 22, 4, 
yes
, 
no
, 0,Ço) \

905 
	`SC
–81, 25, 23, 1, 
yes
, 
no
, 0,Ço) \

906 
	`SC
–82, 25, 23, 2, 
yes
, 
no
, 0,Ço) \

907 
	`SC
–83, 25, 23, 3, 
yes
, 
no
, 0,Ço) \

908 
	`SC
–84, 25, 23, 4, 
yes
, 
no
, 0,Ço) \

910 
	`SC
–85, 26, 24, 1, 
yes
, 
no
, 0,Ço) \

911 
	`SC
–86, 26, 24, 2, 
yes
, 
no
, 0,Ço) \

912 
	`SC
–87, 26, 24, 3, 
yes
, 
no
, 0,Ço) \

913 
	`SC
–88, 26, 24, 4, 
yes
, 
no
, 0,Ço) \

915 
	`SC
–89, 27, 25, 1, 
yes
, 
no
, 0,Ço) \

916 
	`SC
–90, 27, 25, 2, 
yes
, 
no
, 0,Ço) \

917 
	`SC
–91, 27, 25, 3, 
yes
, 
no
, 0,Ço) \

918 
	`SC
–92, 27, 25, 4, 
yes
, 
no
, 0,Ço) \

920 
	`SC
–93, 28, 26, 1, 
yes
, 
no
, 0,Ço) \

921 
	`SC
–94, 28, 26, 2, 
yes
, 
no
, 0,Ço) \

922 
	`SC
–95, 28, 26, 3, 
yes
, 
no
, 0,Ço) \

923 
	`SC
–96, 28, 26, 4, 
yes
, 
no
, 0,Ço) \

925 
	`SC
–97, 29, 27, 1, 
yes
, 
no
, 0,Ço) \

926 
	`SC
–98, 29, 27, 2, 
yes
, 
no
, 0,Ço) \

927 
	`SC
–99, 29, 27, 3, 
yes
, 
no
, 0,Ço) \

928 
	`SC
(100, 29, 27, 4, 
yes
, 
no
, 0,Ço) \

930 
	`SC
(101, 30, 28, 1, 
yes
, 
no
, 0,Ço) \

931 
	`SC
(102, 30, 28, 2, 
yes
, 
no
, 0,Ço) \

932 
	`SC
(103, 30, 28, 3, 
yes
, 
no
, 0,Ço) \

933 
	`SC
(104, 30, 28, 4, 
yes
, 
no
, 0,Ço) \

935 
	`SC
(105, 31, 29, 1, 
yes
, 
no
, 0,Ço) \

936 
	`SC
(106, 31, 29, 2, 
yes
, 
no
, 0,Ço) \

937 
	`SC
(107, 31, 29, 3, 
yes
, 
no
, 0,Ço) \

938 
	`SC
(108, 31, 29, 4, 
yes
, 
no
, 0,Ço) \

940 
	`SC
(109, 32, 30, 1, 
yes
, 
no
, 0,Ço) \

941 
	`SC
(110, 32, 30, 2, 
yes
, 
no
, 0,Ço) \

942 
	`SC
(111, 32, 30, 3, 
yes
, 
no
, 0,Ço) \

943 
	`SC
(112, 32, 30, 4, 
yes
, 
no
, 0,Ço) \

945 
	`SC
(113, 33, 31, 1, 
yes
, 
no
, 0,Ço) \

946 
	`SC
(114, 33, 31, 2, 
yes
, 
no
, 0,Ço) \

947 
	`SC
(115, 33, 31, 3, 
yes
, 
no
, 0,Ço) \

948 
	`SC
(116, 33, 31, 4, 
yes
, 
no
, 0,Ço) \

950 
	`SC
(117, 34, 32, 1, 
yes
, 
no
, 0,Ço) \

951 
	`SC
(118, 34, 32, 2, 
yes
, 
no
, 0,Ço) \

952 
	`SC
(119, 34, 32, 3, 
yes
, 
no
, 0,Ço) \

953 
	`SC
(120, 34, 32, 4, 
yes
, 
no
, 0,Ço) \

955 
	`SC
(121, 35, 33, 1, 
yes
, 
no
, 0,Ço) \

956 
	`SC
(122, 35, 33, 2, 
yes
, 
no
, 0,Ço) \

957 
	`SC
(123, 35, 33, 3, 
yes
, 
no
, 0,Ço) \

958 
	`SC
(124, 35, 33, 4, 
yes
, 
no
, 0,Ço) \

960 
	`SC
(125, 36, 34, 1, 
yes
, 
no
, 0,Ço) \

961 
	`SC
(126, 36, 34, 2, 
yes
, 
no
, 0,Ço) \

962 
	`SC
(127, 36, 34, 3, 
yes
, 
no
, 0,Ço) \

963 
	`SC
(128, 36, 34, 4, 
yes
, 
no
, 0,Ço) \

965 
	`SC
(129, 37, 35, 1, 
yes
, 
no
, 0,Ço) \

966 
	`SC
(130, 37, 35, 2, 
yes
, 
no
, 0,Ço) \

967 
	`SC
(131, 37, 35, 3, 
yes
, 
no
, 0,Ço) \

968 
	`SC
(132, 37, 35, 4, 
yes
, 
no
, 0,Ço) \

970 
	`SC
(133, 38, 36, 1, 
yes
, 
no
, 0,Ço) \

971 
	`SC
(134, 38, 36, 2, 
yes
, 
no
, 0,Ço) \

972 
	`SC
(135, 38, 36, 3, 
yes
, 
no
, 0,Ço) \

973 
	`SC
(136, 38, 36, 4, 
yes
, 
no
, 0,Ço) \

975 
	`SC
(137, 39, 37, 1, 
yes
, 
no
, 0,Ço) \

976 
	`SC
(138, 39, 37, 2, 
yes
, 
no
, 0,Ço) \

977 
	`SC
(139, 39, 37, 3, 
yes
, 
no
, 0,Ço) \

978 
	`SC
(140, 39, 37, 4, 
yes
, 
no
, 0,Ço) \

980 
	`SC
(141, 40, 38, 1, 
yes
, 
no
, 0,Ço) \

981 
	`SC
(142, 40, 38, 2, 
yes
, 
no
, 0,Ço) \

982 
	`SC
(143, 40, 38, 3, 
yes
, 
no
, 0,Ço) \

983 
	`SC
(144, 40, 38, 4, 
yes
, 
no
, 0,Ço) \

985 
	`SC
(145, 41, 39, 1, 
yes
, 
no
, 0,Ço) \

986 
	`SC
(146, 41, 39, 2, 
yes
, 
no
, 0,Ço) \

987 
	`SC
(147, 41, 39, 3, 
yes
, 
no
, 0,Ço) \

988 
	`SC
(148, 41, 39, 4, 
yes
, 
no
, 0,Ço) \

990 
	`SC
(149, 42, 40, 1, 
yes
, 
no
, 0,Ço) \

991 
	`SC
(150, 42, 40, 2, 
yes
, 
no
, 0,Ço) \

992 
	`SC
(151, 42, 40, 3, 
yes
, 
no
, 0,Ço) \

993 
	`SC
(152, 42, 40, 4, 
yes
, 
no
, 0,Ço) \

995 
	`SC
(153, 43, 41, 1, 
yes
, 
no
, 0,Ço) \

996 
	`SC
(154, 43, 41, 2, 
yes
, 
no
, 0,Ço) \

997 
	`SC
(155, 43, 41, 3, 
yes
, 
no
, 0,Ço) \

998 
	`SC
(156, 43, 41, 4, 
yes
, 
no
, 0,Ço) \

1000 
	`SC
(157, 44, 42, 1, 
yes
, 
no
, 0,Ço) \

1001 
	`SC
(158, 44, 42, 2, 
yes
, 
no
, 0,Ço) \

1002 
	`SC
(159, 44, 42, 3, 
yes
, 
no
, 0,Ço) \

1003 
	`SC
(160, 44, 42, 4, 
yes
, 
no
, 0,Ço) \

1005 
	`SC
(161, 45, 43, 1, 
yes
, 
no
, 0,Ço) \

1006 
	`SC
(162, 45, 43, 2, 
yes
, 
no
, 0,Ço) \

1007 
	`SC
(163, 45, 43, 3, 
yes
, 
no
, 0,Ço) \

1008 
	`SC
(164, 45, 43, 4, 
yes
, 
no
, 0,Ço) \

1010 
	`SC
(165, 46, 44, 1, 
yes
, 
no
, 0,Ço) \

1011 
	`SC
(166, 46, 44, 2, 
yes
, 
no
, 0,Ço) \

1012 
	`SC
(167, 46, 44, 3, 
yes
, 
no
, 0,Ço) \

1013 
	`SC
(168, 46, 44, 4, 
yes
, 
no
, 0,Ço) \

1015 
	`SC
(169, 47, 45, 1, 
yes
, 
no
, 0,Ço) \

1016 
	`SC
(170, 47, 45, 2, 
yes
, 
no
, 0,Ço) \

1017 
	`SC
(171, 47, 45, 3, 
yes
, 
no
, 0,Ço) \

1018 
	`SC
(172, 47, 45, 4, 
yes
, 
no
, 0,Ço) \

1020 
	`SC
(173, 48, 46, 1, 
yes
, 
no
, 0,Ço) \

1021 
	`SC
(174, 48, 46, 2, 
yes
, 
no
, 0,Ço) \

1022 
	`SC
(175, 48, 46, 3, 
yes
, 
no
, 0,Ço) \

1023 
	`SC
(176, 48, 46, 4, 
yes
, 
no
, 0,Ço) \

1025 
	`SC
(177, 49, 47, 1, 
yes
, 
no
, 0,Ço) \

1026 
	`SC
(178, 49, 47, 2, 
yes
, 
no
, 0,Ço) \

1027 
	`SC
(179, 49, 47, 3, 
yes
, 
no
, 0,Ço) \

1028 
	`SC
(180, 49, 47, 4, 
yes
, 
no
, 0,Ço) \

1030 
	`SC
(181, 50, 48, 1, 
yes
, 
no
, 0,Ço) \

1031 
	`SC
(182, 50, 48, 2, 
yes
, 
no
, 0,Ço) \

1032 
	`SC
(183, 50, 48, 3, 
yes
, 
no
, 0,Ço) \

1033 
	`SC
(184, 50, 48, 4, 
yes
, 
no
, 0,Ço) \

1035 
	`SC
(185, 51, 49, 1, 
yes
, 
no
, 0,Ço) \

1036 
	`SC
(186, 51, 49, 2, 
yes
, 
no
, 0,Ço) \

1037 
	`SC
(187, 51, 49, 3, 
yes
, 
no
, 0,Ço) \

1038 
	`SC
(188, 51, 49, 4, 
yes
, 
no
, 0,Ço) \

1040 
	`SC
(189, 52, 50, 1, 
yes
, 
no
, 0,Ço) \

1041 
	`SC
(190, 52, 50, 2, 
yes
, 
no
, 0,Ço) \

1042 
	`SC
(191, 52, 50, 3, 
yes
, 
no
, 0,Ço) \

1043 
	`SC
(192, 52, 50, 4, 
yes
, 
no
, 0,Ço) \

1045 
	`SC
(193, 53, 51, 1, 
yes
, 
no
, 0,Ço) \

1046 
	`SC
(194, 53, 51, 2, 
yes
, 
no
, 0,Ço) \

1047 
	`SC
(195, 53, 51, 3, 
yes
, 
no
, 0,Ço) \

1048 
	`SC
(196, 53, 51, 4, 
yes
, 
no
, 0,Ço) \

1050 
	`SC
(197, 54, 52, 1, 
yes
, 
no
, 0,Ço) \

1051 
	`SC
(198, 54, 52, 2, 
yes
, 
no
, 0,Ço) \

1052 
	`SC
(199, 54, 52, 3, 
yes
, 
no
, 0,Ço) \

1053 
	`SC
(200, 54, 52, 4, 
yes
, 
no
, 0,Ço) \

1055 
	`SC
(201, 55, 53, 1, 
yes
, 
no
, 0,Ço) \

1056 
	`SC
(202, 55, 53, 2, 
yes
, 
no
, 0,Ço) \

1057 
	`SC
(203, 55, 53, 3, 
yes
, 
no
, 0,Ço) \

1058 
	`SC
(204, 55, 53, 4, 
yes
, 
no
, 0,Ço) \

1060 
	`SC
(205, 56, 54, 1, 
yes
, 
no
, 0,Ço) \

1061 
	`SC
(206, 56, 54, 2, 
yes
, 
no
, 0,Ço) \

1062 
	`SC
(207, 56, 54, 3, 
yes
, 
no
, 0,Ço) \

1063 
	`SC
(208, 56, 54, 4, 
yes
, 
no
, 0,Ço) \

1065 
	`SC
(209, 57, 55, 1, 
yes
, 
no
, 0,Ço) \

1066 
	`SC
(210, 57, 55, 2, 
yes
, 
no
, 0,Ço) \

1067 
	`SC
(211, 57, 55, 3, 
yes
, 
no
, 0,Ço) \

1068 
	`SC
(212, 57, 55, 4, 
yes
, 
no
, 0,Ço) \

1070 
	`SC
(213, 58, 56, 1, 
yes
, 
no
, 0,Ço) \

1071 
	`SC
(214, 58, 56, 2, 
yes
, 
no
, 0,Ço) \

1072 
	`SC
(215, 58, 56, 3, 
yes
, 
no
, 0,Ço) \

1073 
	`SC
(216, 58, 56, 4, 
yes
, 
no
, 0,Ço) \

1075 
	`SC
(217, 59, 57, 1, 
yes
, 
no
, 0,Ço) \

1076 
	`SC
(218, 59, 57, 2, 
yes
, 
no
, 0,Ço) \

1077 
	`SC
(219, 59, 57, 3, 
yes
, 
no
, 0,Ço) \

1078 
	`SC
(220, 59, 57, 4, 
yes
, 
no
, 0,Ço) \

1080 
	`SC
(221, 60, 58, 1, 
yes
, 
no
, 0,Ço) \

1081 
	`SC
(222, 60, 58, 2, 
yes
, 
no
, 0,Ço) \

1082 
	`SC
(223, 60, 58, 3, 
yes
, 
no
, 0,Ço) \

1083 
	`SC
(224, 60, 58, 4, 
yes
, 
no
, 0,Ço) \

1085 
	`SC
(225, 61, 59, 1, 
yes
, 
no
, 0,Ço) \

1086 
	`SC
(226, 61, 59, 2, 
yes
, 
no
, 0,Ço) \

1087 
	`SC
(227, 61, 59, 3, 
yes
, 
no
, 0,Ço) \

1088 
	`SC
(228, 61, 59, 4, 
yes
, 
no
, 0,Ço) \

1090 
	`SC
(229, 62, 60, 1, 
yes
, 
no
, 0,Ço) \

1091 
	`SC
(230, 62, 60, 2, 
yes
, 
no
, 0,Ço) \

1092 
	`SC
(231, 62, 60, 3, 
yes
, 
no
, 0,Ço) \

1093 

	)

1094 
	#SIZE_CLASSES_DEFINED


	)

1095 
	#NTBINS
 1

	)

1096 
	#NLBINS
 29

	)

1097 
	#NBINS
 36

	)

1098 
	#NSIZES
 232

	)

1099 
	#LG_CEIL_NSIZES
 8

	)

1100 
	#NPSIZES
 199

	)

1101 
	#LG_TINY_MAXCLASS
 3

	)

1102 
	#LOOKUP_MAXCLASS
 ((((
size_t
)1Ë<< 11Ë+ (((size_t)4Ë<< 9))

	)

1103 
	#SMALL_MAXCLASS
 ((((
size_t
)1Ë<< 13Ë+ (((size_t)3Ë<< 11))

	)

1104 
	#LG_LARGE_MINCLASS
 14

	)

1105 
	#LARGE_MINCLASS
 (
	`ZU
(1Ë<< 
LG_LARGE_MINCLASS
)

	)

1106 
	#LARGE_MAXCLASS
 ((((
size_t
)1Ë<< 62Ë+ (((size_t)3Ë<< 60))

	)

1109 #i‡(
LG_SIZEOF_PTR
 =3 && 
LG_TINY_MIN
 =4 && 
LG_QUANTUM
 =4 && 
LG_PAGE
 == 12)

1110 
	#SIZE_CLASSES
 \

1112 
	`SC
–0, 4, 4, 0, 
no
, 
yes
, 1, 4) \

1113 
	`SC
–1, 4, 4, 1, 
no
, 
yes
, 1, 4) \

1114 
	`SC
–2, 4, 4, 2, 
no
, 
yes
, 3, 4) \

1115 
	`SC
–3, 4, 4, 3, 
no
, 
yes
, 1, 4) \

1117 
	`SC
–4, 6, 4, 1, 
no
, 
yes
, 5, 4) \

1118 
	`SC
–5, 6, 4, 2, 
no
, 
yes
, 3, 4) \

1119 
	`SC
–6, 6, 4, 3, 
no
, 
yes
, 7, 4) \

1120 
	`SC
–7, 6, 4, 4, 
no
, 
yes
, 1, 4) \

1122 
	`SC
–8, 7, 5, 1, 
no
, 
yes
, 5, 5) \

1123 
	`SC
–9, 7, 5, 2, 
no
, 
yes
, 3, 5) \

1124 
	`SC
–10, 7, 5, 3, 
no
, 
yes
, 7, 5) \

1125 
	`SC
–11, 7, 5, 4, 
no
, 
yes
, 1, 5) \

1127 
	`SC
–12, 8, 6, 1, 
no
, 
yes
, 5, 6) \

1128 
	`SC
–13, 8, 6, 2, 
no
, 
yes
, 3, 6) \

1129 
	`SC
–14, 8, 6, 3, 
no
, 
yes
, 7, 6) \

1130 
	`SC
–15, 8, 6, 4, 
no
, 
yes
, 1, 6) \

1132 
	`SC
–16, 9, 7, 1, 
no
, 
yes
, 5, 7) \

1133 
	`SC
–17, 9, 7, 2, 
no
, 
yes
, 3, 7) \

1134 
	`SC
–18, 9, 7, 3, 
no
, 
yes
, 7, 7) \

1135 
	`SC
–19, 9, 7, 4, 
no
, 
yes
, 1, 7) \

1137 
	`SC
–20, 10, 8, 1, 
no
, 
yes
, 5, 8) \

1138 
	`SC
–21, 10, 8, 2, 
no
, 
yes
, 3, 8) \

1139 
	`SC
–22, 10, 8, 3, 
no
, 
yes
, 7, 8) \

1140 
	`SC
–23, 10, 8, 4, 
no
, 
yes
, 1, 8) \

1142 
	`SC
–24, 11, 9, 1, 
no
, 
yes
, 5, 9) \

1143 
	`SC
–25, 11, 9, 2, 
no
, 
yes
, 3, 9) \

1144 
	`SC
–26, 11, 9, 3, 
no
, 
yes
, 7, 9) \

1145 
	`SC
–27, 11, 9, 4, 
yes
, yes, 1, 9) \

1147 
	`SC
–28, 12, 10, 1, 
no
, 
yes
, 5,Ço) \

1148 
	`SC
–29, 12, 10, 2, 
no
, 
yes
, 3,Ço) \

1149 
	`SC
–30, 12, 10, 3, 
no
, 
yes
, 7,Ço) \

1150 
	`SC
–31, 12, 10, 4, 
yes
, yes, 2, 
no
) \

1152 
	`SC
–32, 13, 11, 1, 
no
, 
yes
, 5,Ço) \

1153 
	`SC
–33, 13, 11, 2, 
yes
, yes, 3, 
no
) \

1154 
	`SC
–34, 13, 11, 3, 
no
, 
yes
, 7,Ço) \

1155 
	`SC
–35, 13, 11, 4, 
yes
, 
no
, 0,Ço) \

1157 
	`SC
–36, 14, 12, 1, 
yes
, 
no
, 0,Ço) \

1158 
	`SC
–37, 14, 12, 2, 
yes
, 
no
, 0,Ço) \

1159 
	`SC
–38, 14, 12, 3, 
yes
, 
no
, 0,Ço) \

1160 
	`SC
–39, 14, 12, 4, 
yes
, 
no
, 0,Ço) \

1162 
	`SC
–40, 15, 13, 1, 
yes
, 
no
, 0,Ço) \

1163 
	`SC
–41, 15, 13, 2, 
yes
, 
no
, 0,Ço) \

1164 
	`SC
–42, 15, 13, 3, 
yes
, 
no
, 0,Ço) \

1165 
	`SC
–43, 15, 13, 4, 
yes
, 
no
, 0,Ço) \

1167 
	`SC
–44, 16, 14, 1, 
yes
, 
no
, 0,Ço) \

1168 
	`SC
–45, 16, 14, 2, 
yes
, 
no
, 0,Ço) \

1169 
	`SC
–46, 16, 14, 3, 
yes
, 
no
, 0,Ço) \

1170 
	`SC
–47, 16, 14, 4, 
yes
, 
no
, 0,Ço) \

1172 
	`SC
–48, 17, 15, 1, 
yes
, 
no
, 0,Ço) \

1173 
	`SC
–49, 17, 15, 2, 
yes
, 
no
, 0,Ço) \

1174 
	`SC
–50, 17, 15, 3, 
yes
, 
no
, 0,Ço) \

1175 
	`SC
–51, 17, 15, 4, 
yes
, 
no
, 0,Ço) \

1177 
	`SC
–52, 18, 16, 1, 
yes
, 
no
, 0,Ço) \

1178 
	`SC
–53, 18, 16, 2, 
yes
, 
no
, 0,Ço) \

1179 
	`SC
–54, 18, 16, 3, 
yes
, 
no
, 0,Ço) \

1180 
	`SC
–55, 18, 16, 4, 
yes
, 
no
, 0,Ço) \

1182 
	`SC
–56, 19, 17, 1, 
yes
, 
no
, 0,Ço) \

1183 
	`SC
–57, 19, 17, 2, 
yes
, 
no
, 0,Ço) \

1184 
	`SC
–58, 19, 17, 3, 
yes
, 
no
, 0,Ço) \

1185 
	`SC
–59, 19, 17, 4, 
yes
, 
no
, 0,Ço) \

1187 
	`SC
–60, 20, 18, 1, 
yes
, 
no
, 0,Ço) \

1188 
	`SC
–61, 20, 18, 2, 
yes
, 
no
, 0,Ço) \

1189 
	`SC
–62, 20, 18, 3, 
yes
, 
no
, 0,Ço) \

1190 
	`SC
–63, 20, 18, 4, 
yes
, 
no
, 0,Ço) \

1192 
	`SC
–64, 21, 19, 1, 
yes
, 
no
, 0,Ço) \

1193 
	`SC
–65, 21, 19, 2, 
yes
, 
no
, 0,Ço) \

1194 
	`SC
–66, 21, 19, 3, 
yes
, 
no
, 0,Ço) \

1195 
	`SC
–67, 21, 19, 4, 
yes
, 
no
, 0,Ço) \

1197 
	`SC
–68, 22, 20, 1, 
yes
, 
no
, 0,Ço) \

1198 
	`SC
–69, 22, 20, 2, 
yes
, 
no
, 0,Ço) \

1199 
	`SC
–70, 22, 20, 3, 
yes
, 
no
, 0,Ço) \

1200 
	`SC
–71, 22, 20, 4, 
yes
, 
no
, 0,Ço) \

1202 
	`SC
–72, 23, 21, 1, 
yes
, 
no
, 0,Ço) \

1203 
	`SC
–73, 23, 21, 2, 
yes
, 
no
, 0,Ço) \

1204 
	`SC
–74, 23, 21, 3, 
yes
, 
no
, 0,Ço) \

1205 
	`SC
–75, 23, 21, 4, 
yes
, 
no
, 0,Ço) \

1207 
	`SC
–76, 24, 22, 1, 
yes
, 
no
, 0,Ço) \

1208 
	`SC
–77, 24, 22, 2, 
yes
, 
no
, 0,Ço) \

1209 
	`SC
–78, 24, 22, 3, 
yes
, 
no
, 0,Ço) \

1210 
	`SC
–79, 24, 22, 4, 
yes
, 
no
, 0,Ço) \

1212 
	`SC
–80, 25, 23, 1, 
yes
, 
no
, 0,Ço) \

1213 
	`SC
–81, 25, 23, 2, 
yes
, 
no
, 0,Ço) \

1214 
	`SC
–82, 25, 23, 3, 
yes
, 
no
, 0,Ço) \

1215 
	`SC
–83, 25, 23, 4, 
yes
, 
no
, 0,Ço) \

1217 
	`SC
–84, 26, 24, 1, 
yes
, 
no
, 0,Ço) \

1218 
	`SC
–85, 26, 24, 2, 
yes
, 
no
, 0,Ço) \

1219 
	`SC
–86, 26, 24, 3, 
yes
, 
no
, 0,Ço) \

1220 
	`SC
–87, 26, 24, 4, 
yes
, 
no
, 0,Ço) \

1222 
	`SC
–88, 27, 25, 1, 
yes
, 
no
, 0,Ço) \

1223 
	`SC
–89, 27, 25, 2, 
yes
, 
no
, 0,Ço) \

1224 
	`SC
–90, 27, 25, 3, 
yes
, 
no
, 0,Ço) \

1225 
	`SC
–91, 27, 25, 4, 
yes
, 
no
, 0,Ço) \

1227 
	`SC
–92, 28, 26, 1, 
yes
, 
no
, 0,Ço) \

1228 
	`SC
–93, 28, 26, 2, 
yes
, 
no
, 0,Ço) \

1229 
	`SC
–94, 28, 26, 3, 
yes
, 
no
, 0,Ço) \

1230 
	`SC
–95, 28, 26, 4, 
yes
, 
no
, 0,Ço) \

1232 
	`SC
–96, 29, 27, 1, 
yes
, 
no
, 0,Ço) \

1233 
	`SC
–97, 29, 27, 2, 
yes
, 
no
, 0,Ço) \

1234 
	`SC
–98, 29, 27, 3, 
yes
, 
no
, 0,Ço) \

1235 
	`SC
–99, 29, 27, 4, 
yes
, 
no
, 0,Ço) \

1237 
	`SC
(100, 30, 28, 1, 
yes
, 
no
, 0,Ço) \

1238 
	`SC
(101, 30, 28, 2, 
yes
, 
no
, 0,Ço) \

1239 
	`SC
(102, 30, 28, 3, 
yes
, 
no
, 0,Ço) \

1240 
	`SC
(103, 30, 28, 4, 
yes
, 
no
, 0,Ço) \

1242 
	`SC
(104, 31, 29, 1, 
yes
, 
no
, 0,Ço) \

1243 
	`SC
(105, 31, 29, 2, 
yes
, 
no
, 0,Ço) \

1244 
	`SC
(106, 31, 29, 3, 
yes
, 
no
, 0,Ço) \

1245 
	`SC
(107, 31, 29, 4, 
yes
, 
no
, 0,Ço) \

1247 
	`SC
(108, 32, 30, 1, 
yes
, 
no
, 0,Ço) \

1248 
	`SC
(109, 32, 30, 2, 
yes
, 
no
, 0,Ço) \

1249 
	`SC
(110, 32, 30, 3, 
yes
, 
no
, 0,Ço) \

1250 
	`SC
(111, 32, 30, 4, 
yes
, 
no
, 0,Ço) \

1252 
	`SC
(112, 33, 31, 1, 
yes
, 
no
, 0,Ço) \

1253 
	`SC
(113, 33, 31, 2, 
yes
, 
no
, 0,Ço) \

1254 
	`SC
(114, 33, 31, 3, 
yes
, 
no
, 0,Ço) \

1255 
	`SC
(115, 33, 31, 4, 
yes
, 
no
, 0,Ço) \

1257 
	`SC
(116, 34, 32, 1, 
yes
, 
no
, 0,Ço) \

1258 
	`SC
(117, 34, 32, 2, 
yes
, 
no
, 0,Ço) \

1259 
	`SC
(118, 34, 32, 3, 
yes
, 
no
, 0,Ço) \

1260 
	`SC
(119, 34, 32, 4, 
yes
, 
no
, 0,Ço) \

1262 
	`SC
(120, 35, 33, 1, 
yes
, 
no
, 0,Ço) \

1263 
	`SC
(121, 35, 33, 2, 
yes
, 
no
, 0,Ço) \

1264 
	`SC
(122, 35, 33, 3, 
yes
, 
no
, 0,Ço) \

1265 
	`SC
(123, 35, 33, 4, 
yes
, 
no
, 0,Ço) \

1267 
	`SC
(124, 36, 34, 1, 
yes
, 
no
, 0,Ço) \

1268 
	`SC
(125, 36, 34, 2, 
yes
, 
no
, 0,Ço) \

1269 
	`SC
(126, 36, 34, 3, 
yes
, 
no
, 0,Ço) \

1270 
	`SC
(127, 36, 34, 4, 
yes
, 
no
, 0,Ço) \

1272 
	`SC
(128, 37, 35, 1, 
yes
, 
no
, 0,Ço) \

1273 
	`SC
(129, 37, 35, 2, 
yes
, 
no
, 0,Ço) \

1274 
	`SC
(130, 37, 35, 3, 
yes
, 
no
, 0,Ço) \

1275 
	`SC
(131, 37, 35, 4, 
yes
, 
no
, 0,Ço) \

1277 
	`SC
(132, 38, 36, 1, 
yes
, 
no
, 0,Ço) \

1278 
	`SC
(133, 38, 36, 2, 
yes
, 
no
, 0,Ço) \

1279 
	`SC
(134, 38, 36, 3, 
yes
, 
no
, 0,Ço) \

1280 
	`SC
(135, 38, 36, 4, 
yes
, 
no
, 0,Ço) \

1282 
	`SC
(136, 39, 37, 1, 
yes
, 
no
, 0,Ço) \

1283 
	`SC
(137, 39, 37, 2, 
yes
, 
no
, 0,Ço) \

1284 
	`SC
(138, 39, 37, 3, 
yes
, 
no
, 0,Ço) \

1285 
	`SC
(139, 39, 37, 4, 
yes
, 
no
, 0,Ço) \

1287 
	`SC
(140, 40, 38, 1, 
yes
, 
no
, 0,Ço) \

1288 
	`SC
(141, 40, 38, 2, 
yes
, 
no
, 0,Ço) \

1289 
	`SC
(142, 40, 38, 3, 
yes
, 
no
, 0,Ço) \

1290 
	`SC
(143, 40, 38, 4, 
yes
, 
no
, 0,Ço) \

1292 
	`SC
(144, 41, 39, 1, 
yes
, 
no
, 0,Ço) \

1293 
	`SC
(145, 41, 39, 2, 
yes
, 
no
, 0,Ço) \

1294 
	`SC
(146, 41, 39, 3, 
yes
, 
no
, 0,Ço) \

1295 
	`SC
(147, 41, 39, 4, 
yes
, 
no
, 0,Ço) \

1297 
	`SC
(148, 42, 40, 1, 
yes
, 
no
, 0,Ço) \

1298 
	`SC
(149, 42, 40, 2, 
yes
, 
no
, 0,Ço) \

1299 
	`SC
(150, 42, 40, 3, 
yes
, 
no
, 0,Ço) \

1300 
	`SC
(151, 42, 40, 4, 
yes
, 
no
, 0,Ço) \

1302 
	`SC
(152, 43, 41, 1, 
yes
, 
no
, 0,Ço) \

1303 
	`SC
(153, 43, 41, 2, 
yes
, 
no
, 0,Ço) \

1304 
	`SC
(154, 43, 41, 3, 
yes
, 
no
, 0,Ço) \

1305 
	`SC
(155, 43, 41, 4, 
yes
, 
no
, 0,Ço) \

1307 
	`SC
(156, 44, 42, 1, 
yes
, 
no
, 0,Ço) \

1308 
	`SC
(157, 44, 42, 2, 
yes
, 
no
, 0,Ço) \

1309 
	`SC
(158, 44, 42, 3, 
yes
, 
no
, 0,Ço) \

1310 
	`SC
(159, 44, 42, 4, 
yes
, 
no
, 0,Ço) \

1312 
	`SC
(160, 45, 43, 1, 
yes
, 
no
, 0,Ço) \

1313 
	`SC
(161, 45, 43, 2, 
yes
, 
no
, 0,Ço) \

1314 
	`SC
(162, 45, 43, 3, 
yes
, 
no
, 0,Ço) \

1315 
	`SC
(163, 45, 43, 4, 
yes
, 
no
, 0,Ço) \

1317 
	`SC
(164, 46, 44, 1, 
yes
, 
no
, 0,Ço) \

1318 
	`SC
(165, 46, 44, 2, 
yes
, 
no
, 0,Ço) \

1319 
	`SC
(166, 46, 44, 3, 
yes
, 
no
, 0,Ço) \

1320 
	`SC
(167, 46, 44, 4, 
yes
, 
no
, 0,Ço) \

1322 
	`SC
(168, 47, 45, 1, 
yes
, 
no
, 0,Ço) \

1323 
	`SC
(169, 47, 45, 2, 
yes
, 
no
, 0,Ço) \

1324 
	`SC
(170, 47, 45, 3, 
yes
, 
no
, 0,Ço) \

1325 
	`SC
(171, 47, 45, 4, 
yes
, 
no
, 0,Ço) \

1327 
	`SC
(172, 48, 46, 1, 
yes
, 
no
, 0,Ço) \

1328 
	`SC
(173, 48, 46, 2, 
yes
, 
no
, 0,Ço) \

1329 
	`SC
(174, 48, 46, 3, 
yes
, 
no
, 0,Ço) \

1330 
	`SC
(175, 48, 46, 4, 
yes
, 
no
, 0,Ço) \

1332 
	`SC
(176, 49, 47, 1, 
yes
, 
no
, 0,Ço) \

1333 
	`SC
(177, 49, 47, 2, 
yes
, 
no
, 0,Ço) \

1334 
	`SC
(178, 49, 47, 3, 
yes
, 
no
, 0,Ço) \

1335 
	`SC
(179, 49, 47, 4, 
yes
, 
no
, 0,Ço) \

1337 
	`SC
(180, 50, 48, 1, 
yes
, 
no
, 0,Ço) \

1338 
	`SC
(181, 50, 48, 2, 
yes
, 
no
, 0,Ço) \

1339 
	`SC
(182, 50, 48, 3, 
yes
, 
no
, 0,Ço) \

1340 
	`SC
(183, 50, 48, 4, 
yes
, 
no
, 0,Ço) \

1342 
	`SC
(184, 51, 49, 1, 
yes
, 
no
, 0,Ço) \

1343 
	`SC
(185, 51, 49, 2, 
yes
, 
no
, 0,Ço) \

1344 
	`SC
(186, 51, 49, 3, 
yes
, 
no
, 0,Ço) \

1345 
	`SC
(187, 51, 49, 4, 
yes
, 
no
, 0,Ço) \

1347 
	`SC
(188, 52, 50, 1, 
yes
, 
no
, 0,Ço) \

1348 
	`SC
(189, 52, 50, 2, 
yes
, 
no
, 0,Ço) \

1349 
	`SC
(190, 52, 50, 3, 
yes
, 
no
, 0,Ço) \

1350 
	`SC
(191, 52, 50, 4, 
yes
, 
no
, 0,Ço) \

1352 
	`SC
(192, 53, 51, 1, 
yes
, 
no
, 0,Ço) \

1353 
	`SC
(193, 53, 51, 2, 
yes
, 
no
, 0,Ço) \

1354 
	`SC
(194, 53, 51, 3, 
yes
, 
no
, 0,Ço) \

1355 
	`SC
(195, 53, 51, 4, 
yes
, 
no
, 0,Ço) \

1357 
	`SC
(196, 54, 52, 1, 
yes
, 
no
, 0,Ço) \

1358 
	`SC
(197, 54, 52, 2, 
yes
, 
no
, 0,Ço) \

1359 
	`SC
(198, 54, 52, 3, 
yes
, 
no
, 0,Ço) \

1360 
	`SC
(199, 54, 52, 4, 
yes
, 
no
, 0,Ço) \

1362 
	`SC
(200, 55, 53, 1, 
yes
, 
no
, 0,Ço) \

1363 
	`SC
(201, 55, 53, 2, 
yes
, 
no
, 0,Ço) \

1364 
	`SC
(202, 55, 53, 3, 
yes
, 
no
, 0,Ço) \

1365 
	`SC
(203, 55, 53, 4, 
yes
, 
no
, 0,Ço) \

1367 
	`SC
(204, 56, 54, 1, 
yes
, 
no
, 0,Ço) \

1368 
	`SC
(205, 56, 54, 2, 
yes
, 
no
, 0,Ço) \

1369 
	`SC
(206, 56, 54, 3, 
yes
, 
no
, 0,Ço) \

1370 
	`SC
(207, 56, 54, 4, 
yes
, 
no
, 0,Ço) \

1372 
	`SC
(208, 57, 55, 1, 
yes
, 
no
, 0,Ço) \

1373 
	`SC
(209, 57, 55, 2, 
yes
, 
no
, 0,Ço) \

1374 
	`SC
(210, 57, 55, 3, 
yes
, 
no
, 0,Ço) \

1375 
	`SC
(211, 57, 55, 4, 
yes
, 
no
, 0,Ço) \

1377 
	`SC
(212, 58, 56, 1, 
yes
, 
no
, 0,Ço) \

1378 
	`SC
(213, 58, 56, 2, 
yes
, 
no
, 0,Ço) \

1379 
	`SC
(214, 58, 56, 3, 
yes
, 
no
, 0,Ço) \

1380 
	`SC
(215, 58, 56, 4, 
yes
, 
no
, 0,Ço) \

1382 
	`SC
(216, 59, 57, 1, 
yes
, 
no
, 0,Ço) \

1383 
	`SC
(217, 59, 57, 2, 
yes
, 
no
, 0,Ço) \

1384 
	`SC
(218, 59, 57, 3, 
yes
, 
no
, 0,Ço) \

1385 
	`SC
(219, 59, 57, 4, 
yes
, 
no
, 0,Ço) \

1387 
	`SC
(220, 60, 58, 1, 
yes
, 
no
, 0,Ço) \

1388 
	`SC
(221, 60, 58, 2, 
yes
, 
no
, 0,Ço) \

1389 
	`SC
(222, 60, 58, 3, 
yes
, 
no
, 0,Ço) \

1390 
	`SC
(223, 60, 58, 4, 
yes
, 
no
, 0,Ço) \

1392 
	`SC
(224, 61, 59, 1, 
yes
, 
no
, 0,Ço) \

1393 
	`SC
(225, 61, 59, 2, 
yes
, 
no
, 0,Ço) \

1394 
	`SC
(226, 61, 59, 3, 
yes
, 
no
, 0,Ço) \

1395 
	`SC
(227, 61, 59, 4, 
yes
, 
no
, 0,Ço) \

1397 
	`SC
(228, 62, 60, 1, 
yes
, 
no
, 0,Ço) \

1398 
	`SC
(229, 62, 60, 2, 
yes
, 
no
, 0,Ço) \

1399 
	`SC
(230, 62, 60, 3, 
yes
, 
no
, 0,Ço) \

1400 

	)

1401 
	#SIZE_CLASSES_DEFINED


	)

1402 
	#NTBINS
 0

	)

1403 
	#NLBINS
 28

	)

1404 
	#NBINS
 35

	)

1405 
	#NSIZES
 231

	)

1406 
	#LG_CEIL_NSIZES
 8

	)

1407 
	#NPSIZES
 199

	)

1408 
	#LG_TINY_MAXCLASS
 "NA"

	)

1409 
	#LOOKUP_MAXCLASS
 ((((
size_t
)1Ë<< 11Ë+ (((size_t)4Ë<< 9))

	)

1410 
	#SMALL_MAXCLASS
 ((((
size_t
)1Ë<< 13Ë+ (((size_t)3Ë<< 11))

	)

1411 
	#LG_LARGE_MINCLASS
 14

	)

1412 
	#LARGE_MINCLASS
 (
	`ZU
(1Ë<< 
LG_LARGE_MINCLASS
)

	)

1413 
	#LARGE_MAXCLASS
 ((((
size_t
)1Ë<< 62Ë+ (((size_t)3Ë<< 60))

	)

1416 #i‚de‡
SIZE_CLASSES_DEFINED


1419 #unde‡
SIZE_CLASSES_DEFINED


1424 #i‡(
NBINS
 > 256)

	@include/jemalloc/internal/smoothstep.h

1 #i‚de‡
JEMALLOC_INTERNAL_SMOOTHSTEP_H


2 
	#JEMALLOC_INTERNAL_SMOOTHSTEP_H


	)

26 
	#SMOOTHSTEP_VARIANT
 "smoŸhî"

	)

27 
	#SMOOTHSTEP_NSTEPS
 200

	)

28 
	#SMOOTHSTEP_BFP
 24

	)

29 
	#SMOOTHSTEP
 \

31 
	`STEP
–1, 
	`UINT64_C
(0x0000000000000014), 0.005, 0.000001240643750) \

32 
	`STEP
–2, 
	`UINT64_C
(0x00000000000000a5), 0.010, 0.000009850600000) \

33 
	`STEP
–3, 
	`UINT64_C
(0x0000000000000229), 0.015, 0.000032995181250) \

34 
	`STEP
–4, 
	`UINT64_C
(0x0000000000000516), 0.020, 0.000077619200000) \

35 
	`STEP
–5, 
	`UINT64_C
(0x00000000000009dc), 0.025, 0.000150449218750) \

36 
	`STEP
–6, 
	`UINT64_C
(0x00000000000010e8), 0.030, 0.000257995800000) \

37 
	`STEP
–7, 
	`UINT64_C
(0x0000000000001aa4), 0.035, 0.000406555756250) \

38 
	`STEP
–8, 
	`UINT64_C
(0x0000000000002777), 0.040, 0.000602214400000) \

39 
	`STEP
–9, 
	`UINT64_C
(0x00000000000037c2), 0.045, 0.000850847793750) \

40 
	`STEP
–10, 
	`UINT64_C
(0x0000000000004be6), 0.050, 0.001158125000000) \

41 
	`STEP
–11, 
	`UINT64_C
(0x000000000000643c), 0.055, 0.001529510331250) \

42 
	`STEP
–12, 
	`UINT64_C
(0x000000000000811f), 0.060, 0.001970265600000) \

43 
	`STEP
–13, 
	`UINT64_C
(0x000000000000a2e2), 0.065, 0.002485452368750) \

44 
	`STEP
–14, 
	`UINT64_C
(0x000000000000c9d8), 0.070, 0.003079934200000) \

45 
	`STEP
–15, 
	`UINT64_C
(0x000000000000f64f), 0.075, 0.003758378906250) \

46 
	`STEP
–16, 
	`UINT64_C
(0x0000000000012891), 0.080, 0.004525260800000) \

47 
	`STEP
–17, 
	`UINT64_C
(0x00000000000160e7), 0.085, 0.005384862943750) \

48 
	`STEP
–18, 
	`UINT64_C
(0x0000000000019f95), 0.090, 0.006341279400000) \

49 
	`STEP
–19, 
	`UINT64_C
(0x000000000001e4dc), 0.095, 0.007398417481250) \

50 
	`STEP
–20, 
	`UINT64_C
(0x00000000000230fc), 0.100, 0.008560000000000) \

51 
	`STEP
–21, 
	`UINT64_C
(0x0000000000028430), 0.105, 0.009829567518750) \

52 
	`STEP
–22, 
	`UINT64_C
(0x000000000002deb0), 0.110, 0.011210480600000) \

53 
	`STEP
–23, 
	`UINT64_C
(0x00000000000340b1), 0.115, 0.012705922056250) \

54 
	`STEP
–24, 
	`UINT64_C
(0x000000000003aa67), 0.120, 0.014318899200000) \

55 
	`STEP
–25, 
	`UINT64_C
(0x0000000000041c00), 0.125, 0.016052246093750) \

56 
	`STEP
–26, 
	`UINT64_C
(0x00000000000495a8), 0.130, 0.017908625800000) \

57 
	`STEP
–27, 
	`UINT64_C
(0x000000000005178b), 0.135, 0.019890532631250) \

58 
	`STEP
–28, 
	`UINT64_C
(0x000000000005a1cf), 0.140, 0.022000294400000) \

59 
	`STEP
–29, 
	`UINT64_C
(0x0000000000063498), 0.145, 0.024240074668750) \

60 
	`STEP
–30, 
	`UINT64_C
(0x000000000006d009), 0.150, 0.026611875000000) \

61 
	`STEP
–31, 
	`UINT64_C
(0x000000000007743f), 0.155, 0.029117537206250) \

62 
	`STEP
–32, 
	`UINT64_C
(0x0000000000082157), 0.160, 0.031758745600000) \

63 
	`STEP
–33, 
	`UINT64_C
(0x000000000008d76b), 0.165, 0.034537029243750) \

64 
	`STEP
–34, 
	`UINT64_C
(0x0000000000099691), 0.170, 0.037453764200000) \

65 
	`STEP
–35, 
	`UINT64_C
(0x00000000000a5edf), 0.175, 0.040510175781250) \

66 
	`STEP
–36, 
	`UINT64_C
(0x00000000000b3067), 0.180, 0.043707340800000) \

67 
	`STEP
–37, 
	`UINT64_C
(0x00000000000c0b38), 0.185, 0.047046189818750) \

68 
	`STEP
–38, 
	`UINT64_C
(0x00000000000cef5e), 0.190, 0.050527509400000) \

69 
	`STEP
–39, 
	`UINT64_C
(0x00000000000ddce6), 0.195, 0.054151944356250) \

70 
	`STEP
–40, 
	`UINT64_C
(0x00000000000ed3d8), 0.200, 0.057920000000000) \

71 
	`STEP
–41, 
	`UINT64_C
(0x00000000000fd439), 0.205, 0.061832044393750) \

72 
	`STEP
–42, 
	`UINT64_C
(0x000000000010de0e), 0.210, 0.065888310600000) \

73 
	`STEP
–43, 
	`UINT64_C
(0x000000000011f158), 0.215, 0.070088898931250) \

74 
	`STEP
–44, 
	`UINT64_C
(0x0000000000130e17), 0.220, 0.074433779200000) \

75 
	`STEP
–45, 
	`UINT64_C
(0x0000000000143448), 0.225, 0.078922792968750) \

76 
	`STEP
–46, 
	`UINT64_C
(0x00000000001563e7), 0.230, 0.083555655800000) \

77 
	`STEP
–47, 
	`UINT64_C
(0x0000000000169cec), 0.235, 0.088331959506250) \

78 
	`STEP
–48, 
	`UINT64_C
(0x000000000017df4f), 0.240, 0.093251174400000) \

79 
	`STEP
–49, 
	`UINT64_C
(0x0000000000192b04), 0.245, 0.098312651543750) \

80 
	`STEP
–50, 
	`UINT64_C
(0x00000000001a8000), 0.250, 0.103515625000000) \

81 
	`STEP
–51, 
	`UINT64_C
(0x00000000001bde32), 0.255, 0.108859214081250) \

82 
	`STEP
–52, 
	`UINT64_C
(0x00000000001d458b), 0.260, 0.114342425600000) \

83 
	`STEP
–53, 
	`UINT64_C
(0x00000000001eb5f8), 0.265, 0.119964156118750) \

84 
	`STEP
–54, 
	`UINT64_C
(0x0000000000202f65), 0.270, 0.125723194200000) \

85 
	`STEP
–55, 
	`UINT64_C
(0x000000000021b1bb), 0.275, 0.131618222656250) \

86 
	`STEP
–56, 
	`UINT64_C
(0x0000000000233ce3), 0.280, 0.137647820800000) \

87 
	`STEP
–57, 
	`UINT64_C
(0x000000000024d0c3), 0.285, 0.143810466693750) \

88 
	`STEP
–58, 
	`UINT64_C
(0x0000000000266d40), 0.290, 0.150104539400000) \

89 
	`STEP
–59, 
	`UINT64_C
(0x000000000028123d), 0.295, 0.156528321231250) \

90 
	`STEP
–60, 
	`UINT64_C
(0x000000000029bf9c), 0.300, 0.163080000000000) \

91 
	`STEP
–61, 
	`UINT64_C
(0x00000000002b753d), 0.305, 0.169757671268750) \

92 
	`STEP
–62, 
	`UINT64_C
(0x00000000002d32fe), 0.310, 0.176559340600000) \

93 
	`STEP
–63, 
	`UINT64_C
(0x00000000002ef8bc), 0.315, 0.183482925806250) \

94 
	`STEP
–64, 
	`UINT64_C
(0x000000000030c654), 0.320, 0.190526259200000) \

95 
	`STEP
–65, 
	`UINT64_C
(0x0000000000329b9f), 0.325, 0.197687089843750) \

96 
	`STEP
–66, 
	`UINT64_C
(0x0000000000347875), 0.330, 0.204963085800000) \

97 
	`STEP
–67, 
	`UINT64_C
(0x0000000000365cb0), 0.335, 0.212351836381250) \

98 
	`STEP
–68, 
	`UINT64_C
(0x0000000000384825), 0.340, 0.219850854400000) \

99 
	`STEP
–69, 
	`UINT64_C
(0x00000000003a3aa8), 0.345, 0.227457578418750) \

100 
	`STEP
–70, 
	`UINT64_C
(0x00000000003c340f), 0.350, 0.235169375000000) \

101 
	`STEP
–71, 
	`UINT64_C
(0x00000000003e342b), 0.355, 0.242983540956250) \

102 
	`STEP
–72, 
	`UINT64_C
(0x0000000000403ace), 0.360, 0.250897305600000) \

103 
	`STEP
–73, 
	`UINT64_C
(0x00000000004247c8), 0.365, 0.258907832993750) \

104 
	`STEP
–74, 
	`UINT64_C
(0x0000000000445ae9), 0.370, 0.267012224200000) \

105 
	`STEP
–75, 
	`UINT64_C
(0x0000000000467400), 0.375, 0.275207519531250) \

106 
	`STEP
–76, 
	`UINT64_C
(0x00000000004892d8), 0.380, 0.283490700800000) \

107 
	`STEP
–77, 
	`UINT64_C
(0x00000000004ab740), 0.385, 0.291858693568750) \

108 
	`STEP
–78, 
	`UINT64_C
(0x00000000004ce102), 0.390, 0.300308369400000) \

109 
	`STEP
–79, 
	`UINT64_C
(0x00000000004f0fe9), 0.395, 0.308836548106250) \

110 
	`STEP
–80, 
	`UINT64_C
(0x00000000005143bf), 0.400, 0.317440000000000) \

111 
	`STEP
–81, 
	`UINT64_C
(0x0000000000537c4d), 0.405, 0.326115448143750) \

112 
	`STEP
–82, 
	`UINT64_C
(0x000000000055b95b), 0.410, 0.334859570600000) \

113 
	`STEP
–83, 
	`UINT64_C
(0x000000000057fab1), 0.415, 0.343669002681250) \

114 
	`STEP
–84, 
	`UINT64_C
(0x00000000005a4015), 0.420, 0.352540339200000) \

115 
	`STEP
–85, 
	`UINT64_C
(0x00000000005c894e), 0.425, 0.361470136718750) \

116 
	`STEP
–86, 
	`UINT64_C
(0x00000000005ed622), 0.430, 0.370454915800000) \

117 
	`STEP
–87, 
	`UINT64_C
(0x0000000000612655), 0.435, 0.379491163256250) \

118 
	`STEP
–88, 
	`UINT64_C
(0x00000000006379ac), 0.440, 0.388575334400000) \

119 
	`STEP
–89, 
	`UINT64_C
(0x000000000065cfeb), 0.445, 0.397703855293750) \

120 
	`STEP
–90, 
	`UINT64_C
(0x00000000006828d6), 0.450, 0.406873125000000) \

121 
	`STEP
–91, 
	`UINT64_C
(0x00000000006a842f), 0.455, 0.416079517831250) \

122 
	`STEP
–92, 
	`UINT64_C
(0x00000000006ce1bb), 0.460, 0.425319385600000) \

123 
	`STEP
–93, 
	`UINT64_C
(0x00000000006f413a), 0.465, 0.434589059868750) \

124 
	`STEP
–94, 
	`UINT64_C
(0x000000000071a270), 0.470, 0.443884854200000) \

125 
	`STEP
–95, 
	`UINT64_C
(0x000000000074051d), 0.475, 0.453203066406250) \

126 
	`STEP
–96, 
	`UINT64_C
(0x0000000000766905), 0.480, 0.462539980800000) \

127 
	`STEP
–97, 
	`UINT64_C
(0x000000000078cde7), 0.485, 0.471891870443750) \

128 
	`STEP
–98, 
	`UINT64_C
(0x00000000007b3387), 0.490, 0.481254999400000) \

129 
	`STEP
–99, 
	`UINT64_C
(0x00000000007d99a4), 0.495, 0.490625624981250) \

130 
	`STEP
–100, 
	`UINT64_C
(0x0000000000800000), 0.500, 0.500000000000000) \

131 
	`STEP
–101, 
	`UINT64_C
(0x000000000082665b), 0.505, 0.509374375018750) \

132 
	`STEP
–102, 
	`UINT64_C
(0x000000000084cc78), 0.510, 0.518745000600000) \

133 
	`STEP
–103, 
	`UINT64_C
(0x0000000000873218), 0.515, 0.528108129556250) \

134 
	`STEP
–104, 
	`UINT64_C
(0x00000000008996fa), 0.520, 0.537460019200000) \

135 
	`STEP
–105, 
	`UINT64_C
(0x00000000008bfae2), 0.525, 0.546796933593750) \

136 
	`STEP
–106, 
	`UINT64_C
(0x00000000008e5d8f), 0.530, 0.556115145800000) \

137 
	`STEP
–107, 
	`UINT64_C
(0x000000000090bec5), 0.535, 0.565410940131250) \

138 
	`STEP
–108, 
	`UINT64_C
(0x0000000000931e44), 0.540, 0.574680614400000) \

139 
	`STEP
–109, 
	`UINT64_C
(0x0000000000957bd0), 0.545, 0.583920482168750) \

140 
	`STEP
–110, 
	`UINT64_C
(0x000000000097d729), 0.550, 0.593126875000000) \

141 
	`STEP
–111, 
	`UINT64_C
(0x00000000009a3014), 0.555, 0.602296144706250) \

142 
	`STEP
–112, 
	`UINT64_C
(0x00000000009c8653), 0.560, 0.611424665600000) \

143 
	`STEP
–113, 
	`UINT64_C
(0x00000000009ed9aa), 0.565, 0.620508836743750) \

144 
	`STEP
–114, 
	`UINT64_C
(0x0000000000a129dd), 0.570, 0.629545084200000) \

145 
	`STEP
–115, 
	`UINT64_C
(0x0000000000a376b1), 0.575, 0.638529863281250) \

146 
	`STEP
–116, 
	`UINT64_C
(0x0000000000a5bfea), 0.580, 0.647459660800000) \

147 
	`STEP
–117, 
	`UINT64_C
(0x0000000000a8054e), 0.585, 0.656330997318750) \

148 
	`STEP
–118, 
	`UINT64_C
(0x0000000000aa46a4), 0.590, 0.665140429400000) \

149 
	`STEP
–119, 
	`UINT64_C
(0x0000000000ac83b2), 0.595, 0.673884551856250) \

150 
	`STEP
–120, 
	`UINT64_C
(0x0000000000aebc40), 0.600, 0.682560000000000) \

151 
	`STEP
–121, 
	`UINT64_C
(0x0000000000b0f016), 0.605, 0.691163451893750) \

152 
	`STEP
–122, 
	`UINT64_C
(0x0000000000b31efd), 0.610, 0.699691630600000) \

153 
	`STEP
–123, 
	`UINT64_C
(0x0000000000b548bf), 0.615, 0.708141306431250) \

154 
	`STEP
–124, 
	`UINT64_C
(0x0000000000b76d27), 0.620, 0.716509299200000) \

155 
	`STEP
–125, 
	`UINT64_C
(0x0000000000b98c00), 0.625, 0.724792480468750) \

156 
	`STEP
–126, 
	`UINT64_C
(0x0000000000bba516), 0.630, 0.732987775800000) \

157 
	`STEP
–127, 
	`UINT64_C
(0x0000000000bdb837), 0.635, 0.741092167006250) \

158 
	`STEP
–128, 
	`UINT64_C
(0x0000000000bfc531), 0.640, 0.749102694400000) \

159 
	`STEP
–129, 
	`UINT64_C
(0x0000000000c1cbd4), 0.645, 0.757016459043750) \

160 
	`STEP
–130, 
	`UINT64_C
(0x0000000000c3cbf0), 0.650, 0.764830625000000) \

161 
	`STEP
–131, 
	`UINT64_C
(0x0000000000c5c557), 0.655, 0.772542421581250) \

162 
	`STEP
–132, 
	`UINT64_C
(0x0000000000c7b7da), 0.660, 0.780149145600000) \

163 
	`STEP
–133, 
	`UINT64_C
(0x0000000000c9a34f), 0.665, 0.787648163618750) \

164 
	`STEP
–134, 
	`UINT64_C
(0x0000000000cb878a), 0.670, 0.795036914200000) \

165 
	`STEP
–135, 
	`UINT64_C
(0x0000000000cd6460), 0.675, 0.802312910156250) \

166 
	`STEP
–136, 
	`UINT64_C
(0x0000000000cf39ab), 0.680, 0.809473740800000) \

167 
	`STEP
–137, 
	`UINT64_C
(0x0000000000d10743), 0.685, 0.816517074193750) \

168 
	`STEP
–138, 
	`UINT64_C
(0x0000000000d2cd01), 0.690, 0.823440659400000) \

169 
	`STEP
–139, 
	`UINT64_C
(0x0000000000d48ac2), 0.695, 0.830242328731250) \

170 
	`STEP
–140, 
	`UINT64_C
(0x0000000000d64063), 0.700, 0.836920000000000) \

171 
	`STEP
–141, 
	`UINT64_C
(0x0000000000d7edc2), 0.705, 0.843471678768750) \

172 
	`STEP
–142, 
	`UINT64_C
(0x0000000000d992bf), 0.710, 0.849895460600000) \

173 
	`STEP
–143, 
	`UINT64_C
(0x0000000000db2f3c), 0.715, 0.856189533306250) \

174 
	`STEP
–144, 
	`UINT64_C
(0x0000000000dcc31c), 0.720, 0.862352179200000) \

175 
	`STEP
–145, 
	`UINT64_C
(0x0000000000de4e44), 0.725, 0.868381777343750) \

176 
	`STEP
–146, 
	`UINT64_C
(0x0000000000dfd09a), 0.730, 0.874276805800000) \

177 
	`STEP
–147, 
	`UINT64_C
(0x0000000000e14a07), 0.735, 0.880035843881250) \

178 
	`STEP
–148, 
	`UINT64_C
(0x0000000000e2ba74), 0.740, 0.885657574400000) \

179 
	`STEP
–149, 
	`UINT64_C
(0x0000000000e421cd), 0.745, 0.891140785918750) \

180 
	`STEP
–150, 
	`UINT64_C
(0x0000000000e58000), 0.750, 0.896484375000000) \

181 
	`STEP
–151, 
	`UINT64_C
(0x0000000000e6d4fb), 0.755, 0.901687348456250) \

182 
	`STEP
–152, 
	`UINT64_C
(0x0000000000e820b0), 0.760, 0.906748825600000) \

183 
	`STEP
–153, 
	`UINT64_C
(0x0000000000e96313), 0.765, 0.911668040493750) \

184 
	`STEP
–154, 
	`UINT64_C
(0x0000000000ea9c18), 0.770, 0.916444344200000) \

185 
	`STEP
–155, 
	`UINT64_C
(0x0000000000ebcbb7), 0.775, 0.921077207031250) \

186 
	`STEP
–156, 
	`UINT64_C
(0x0000000000ecf1e8), 0.780, 0.925566220800000) \

187 
	`STEP
–157, 
	`UINT64_C
(0x0000000000ee0ea7), 0.785, 0.929911101068750) \

188 
	`STEP
–158, 
	`UINT64_C
(0x0000000000ef21f1), 0.790, 0.934111689400000) \

189 
	`STEP
–159, 
	`UINT64_C
(0x0000000000f02bc6), 0.795, 0.938167955606250) \

190 
	`STEP
–160, 
	`UINT64_C
(0x0000000000f12c27), 0.800, 0.942080000000000) \

191 
	`STEP
–161, 
	`UINT64_C
(0x0000000000f22319), 0.805, 0.945848055643750) \

192 
	`STEP
–162, 
	`UINT64_C
(0x0000000000f310a1), 0.810, 0.949472490600000) \

193 
	`STEP
–163, 
	`UINT64_C
(0x0000000000f3f4c7), 0.815, 0.952953810181250) \

194 
	`STEP
–164, 
	`UINT64_C
(0x0000000000f4cf98), 0.820, 0.956292659200000) \

195 
	`STEP
–165, 
	`UINT64_C
(0x0000000000f5a120), 0.825, 0.959489824218750) \

196 
	`STEP
–166, 
	`UINT64_C
(0x0000000000f6696e), 0.830, 0.962546235800000) \

197 
	`STEP
–167, 
	`UINT64_C
(0x0000000000f72894), 0.835, 0.965462970756250) \

198 
	`STEP
–168, 
	`UINT64_C
(0x0000000000f7dea8), 0.840, 0.968241254400000) \

199 
	`STEP
–169, 
	`UINT64_C
(0x0000000000f88bc0), 0.845, 0.970882462793750) \

200 
	`STEP
–170, 
	`UINT64_C
(0x0000000000f92ff6), 0.850, 0.973388125000000) \

201 
	`STEP
–171, 
	`UINT64_C
(0x0000000000f9cb67), 0.855, 0.975759925331250) \

202 
	`STEP
–172, 
	`UINT64_C
(0x0000000000fa5e30), 0.860, 0.977999705600000) \

203 
	`STEP
–173, 
	`UINT64_C
(0x0000000000fae874), 0.865, 0.980109467368750) \

204 
	`STEP
–174, 
	`UINT64_C
(0x0000000000fb6a57), 0.870, 0.982091374200000) \

205 
	`STEP
–175, 
	`UINT64_C
(0x0000000000fbe400), 0.875, 0.983947753906250) \

206 
	`STEP
–176, 
	`UINT64_C
(0x0000000000fc5598), 0.880, 0.985681100800000) \

207 
	`STEP
–177, 
	`UINT64_C
(0x0000000000fcbf4e), 0.885, 0.987294077943750) \

208 
	`STEP
–178, 
	`UINT64_C
(0x0000000000fd214f), 0.890, 0.988789519400000) \

209 
	`STEP
–179, 
	`UINT64_C
(0x0000000000fd7bcf), 0.895, 0.990170432481250) \

210 
	`STEP
–180, 
	`UINT64_C
(0x0000000000fdcf03), 0.900, 0.991440000000000) \

211 
	`STEP
–181, 
	`UINT64_C
(0x0000000000fe1b23), 0.905, 0.992601582518750) \

212 
	`STEP
–182, 
	`UINT64_C
(0x0000000000fe606a), 0.910, 0.993658720600000) \

213 
	`STEP
–183, 
	`UINT64_C
(0x0000000000fe9f18), 0.915, 0.994615137056250) \

214 
	`STEP
–184, 
	`UINT64_C
(0x0000000000fed76e), 0.920, 0.995474739200000) \

215 
	`STEP
–185, 
	`UINT64_C
(0x0000000000ff09b0), 0.925, 0.996241621093750) \

216 
	`STEP
–186, 
	`UINT64_C
(0x0000000000ff3627), 0.930, 0.996920065800000) \

217 
	`STEP
–187, 
	`UINT64_C
(0x0000000000ff5d1d), 0.935, 0.997514547631250) \

218 
	`STEP
–188, 
	`UINT64_C
(0x0000000000ff7ee0), 0.940, 0.998029734400000) \

219 
	`STEP
–189, 
	`UINT64_C
(0x0000000000ff9bc3), 0.945, 0.998470489668750) \

220 
	`STEP
–190, 
	`UINT64_C
(0x0000000000ffb419), 0.950, 0.998841875000000) \

221 
	`STEP
–191, 
	`UINT64_C
(0x0000000000ffc83d), 0.955, 0.999149152206250) \

222 
	`STEP
–192, 
	`UINT64_C
(0x0000000000ffd888), 0.960, 0.999397785600000) \

223 
	`STEP
–193, 
	`UINT64_C
(0x0000000000ffe55b), 0.965, 0.999593444243750) \

224 
	`STEP
–194, 
	`UINT64_C
(0x0000000000ffef17), 0.970, 0.999742004200000) \

225 
	`STEP
–195, 
	`UINT64_C
(0x0000000000fff623), 0.975, 0.999849550781250) \

226 
	`STEP
–196, 
	`UINT64_C
(0x0000000000fffae9), 0.980, 0.999922380800000) \

227 
	`STEP
–197, 
	`UINT64_C
(0x0000000000fffdd6), 0.985, 0.999967004818750) \

228 
	`STEP
–198, 
	`UINT64_C
(0x0000000000ffff5a), 0.990, 0.999990149400000) \

229 
	`STEP
–199, 
	`UINT64_C
(0x0000000000ffffeb), 0.995, 0.999998759356250) \

230 
	`STEP
–200, 
	`UINT64_C
(0x0000000001000000), 1.000, 1.000000000000000) \

231 

	)

	@include/jemalloc/internal/spin.h

1 #i‚de‡
JEMALLOC_INTERNAL_SPIN_H


2 
	#JEMALLOC_INTERNAL_SPIN_H


	)

4 
	#SPIN_INITIALIZER
 {0U}

	)

7 
	môî©i⁄
;

8 } 
	t•ö_t
;

10 
ölöe
 

11 
	$•ö_˝u_•öwaô
() {

12 #i‡
HAVE_CPU_SPINWAIT


13 
CPU_SPINWAIT
;

15 vﬁ©ûê
x
 = 0;

16 
x
 = x;

18 
	}
}

20 
ölöe
 

21 
	$•ö_ad≠tive
(
•ö_t
 *
•ö
) {

22 vﬁ©ûê
uöt32_t
 
i
;

24 i‡(
•ö
->
ôî©i⁄
 < 5) {

25 
i
 = 0; i < (1U << 
•ö
->
ôî©i⁄
); i++) {

26 
	`•ö_˝u_•öwaô
();

28 
•ö
->
ôî©i⁄
++;

30 #ifde‡
_WIN32


31 
	`SwôchToThªad
();

33 
	`sched_yõld
();

36 
	}
}

38 #unde‡
SPIN_INLINE


	@include/jemalloc/internal/stats.h

1 #i‚de‡
JEMALLOC_INTERNAL_STATS_H


2 
	#JEMALLOC_INTERNAL_STATS_H


	)

5 
	#STATS_PRINT_OPTIONS
 \

6 
	`OPTION
('J', 
js⁄
, 
Ál£
, 
åue
) \

7 
	`OPTION
('g', 
gíîÆ
, 
åue
, 
Ál£
) \

8 
	`OPTION
('m', 
mîged
, 
c⁄fig_°©s
, 
Ál£
) \

9 
	`OPTION
('d', 
de°royed
, 
c⁄fig_°©s
, 
Ál£
) \

10 
	`OPTION
('a', 
unmîged
, 
c⁄fig_°©s
, 
Ál£
) \

11 
	`OPTION
('b', 
bös
, 
åue
, 
Ál£
) \

12 
	`OPTION
('l', 
œrge
, 
åue
, 
Ál£
) \

13 
	`OPTION
('x', 
muãx
, 
åue
, 
Ál£
)

	)

16 
	#OPTION
(
o
, 
v
, 
d
, 
s
Ë
°©s_¥öt_›ti⁄_num_
##v,

	)

17 
	mSTATS_PRINT_OPTIONS


18 #unde‡
OPTION


19 
	m°©s_¥öt_tŸ_num_›ti⁄s


23 
boﬁ
 
›t_°©s_¥öt
;

24 
›t_°©s_¥öt_›ts
[
°©s_¥öt_tŸ_num_›ti⁄s
+1];

27 
°©s_¥öt
((*
wrôe_cb
)(*, c⁄° *), *
cb›aque
,

28 c⁄° *
›ts
);

	@include/jemalloc/internal/sz.h

1 #i‚de‡
JEMALLOC_INTERNAL_SIZE_H


2 
	#JEMALLOC_INTERNAL_SIZE_H


	)

4 
	~"jemÆloc/öã∫Æ/bô_utû.h
"

5 
	~"jemÆloc/öã∫Æ/∑ges.h
"

6 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

7 
	~"jemÆloc/öã∫Æ/utû.h
"

29 
size_t
 c⁄° 
sz_pöd2sz_èb
[
NPSIZES
+1];

34 
size_t
 c⁄° 
sz_ödex2size_èb
[
NSIZES
];

40 
uöt8_t
 c⁄° 
sz_size2ödex_èb
[];

42 c⁄° 
size_t
 
	gsz_œrge_∑d
 =

43 #ifde‡
JEMALLOC_CACHE_OBLIVIOUS


44 
PAGE


50 
JEMALLOC_ALWAYS_INLINE
 
pszöd_t


51 
	$sz_psz2öd
(
size_t
 
psz
) {

52 i‡(
	`u∆ikñy
(
psz
 > 
LARGE_MAXCLASS
)) {

53  
NPSIZES
;

56 
pszöd_t
 
x
 = 
	`lg_Êo‹
((
psz
<<1)-1);

57 
pszöd_t
 
shi·
 = (
x
 < 
LG_SIZE_CLASS_GROUP
 + 
LG_PAGE
) ? 0 : x -

58 (
LG_SIZE_CLASS_GROUP
 + 
LG_PAGE
);

59 
pszöd_t
 
gΩ
 = 
shi·
 << 
LG_SIZE_CLASS_GROUP
;

61 
pszöd_t
 
lg_dñè
 = (
x
 < 
LG_SIZE_CLASS_GROUP
 + 
LG_PAGE
 + 1) ?

62 
LG_PAGE
 : 
x
 - 
LG_SIZE_CLASS_GROUP
 - 1;

64 
size_t
 
dñè_övî£_mask
 = 
	`ZU
(-1Ë<< 
lg_dñè
;

65 
pszöd_t
 
mod
 = ((((
psz
-1Ë& 
dñè_övî£_mask
Ë>> 
lg_dñè
)) &

66 ((
	`ZU
(1Ë<< 
LG_SIZE_CLASS_GROUP
) - 1);

68 
pszöd_t
 
öd
 = 
gΩ
 + 
mod
;

69  
öd
;

71 
	}
}

73 
ölöe
 
size_t


74 
	$sz_pöd2sz_compuã
(
pszöd_t
 
pöd
) {

75 i‡(
	`u∆ikñy
(
pöd
 =
NPSIZES
)) {

76  
LARGE_MAXCLASS
 + 
PAGE
;

79 
size_t
 
gΩ
 = 
pöd
 >> 
LG_SIZE_CLASS_GROUP
;

80 
size_t
 
mod
 = 
pöd
 & ((
	`ZU
(1Ë<< 
LG_SIZE_CLASS_GROUP
) - 1);

82 
size_t
 
gΩ_size_mask
 = ~((!!
gΩ
)-1);

83 
size_t
 
gΩ_size
 = ((
	`ZU
(1Ë<< (
LG_PAGE
 +

84 (
LG_SIZE_CLASS_GROUP
-1))Ë<< 
gΩ
Ë& 
gΩ_size_mask
;

86 
size_t
 
shi·
 = (
gΩ
 == 0) ? 1 : grp;

87 
size_t
 
lg_dñè
 = 
shi·
 + (
LG_PAGE
-1);

88 
size_t
 
mod_size
 = (
mod
+1Ë<< 
lg_dñè
;

90 
size_t
 
sz
 = 
gΩ_size
 + 
mod_size
;

91  
sz
;

93 
	}
}

95 
ölöe
 
size_t


96 
	$sz_pöd2sz_lookup
(
pszöd_t
 
pöd
) {

97 
size_t
 
ªt
 = (size_t)
sz_pöd2sz_èb
[
pöd
];

98 
	`as£π
(
ªt
 =
	`sz_pöd2sz_compuã
(
pöd
));

99  
ªt
;

100 
	}
}

102 
ölöe
 
size_t


103 
	$sz_pöd2sz
(
pszöd_t
 
pöd
) {

104 
	`as£π
(
pöd
 < 
NPSIZES
+1);

105  
	`sz_pöd2sz_lookup
(
pöd
);

106 
	}
}

108 
ölöe
 
size_t


109 
	$sz_psz2u
(
size_t
 
psz
) {

110 i‡(
	`u∆ikñy
(
psz
 > 
LARGE_MAXCLASS
)) {

111  
LARGE_MAXCLASS
 + 
PAGE
;

114 
size_t
 
x
 = 
	`lg_Êo‹
((
psz
<<1)-1);

115 
size_t
 
lg_dñè
 = (
x
 < 
LG_SIZE_CLASS_GROUP
 + 
LG_PAGE
 + 1) ?

116 
LG_PAGE
 : 
x
 - 
LG_SIZE_CLASS_GROUP
 - 1;

117 
size_t
 
dñè
 = 
	`ZU
(1Ë<< 
lg_dñè
;

118 
size_t
 
dñè_mask
 = 
dñè
 - 1;

119 
size_t
 
usize
 = (
psz
 + 
dñè_mask
) & ~delta_mask;

120  
usize
;

122 
	}
}

124 
ölöe
 
szöd_t


125 
	$sz_size2ödex_compuã
(
size_t
 
size
) {

126 i‡(
	`u∆ikñy
(
size
 > 
LARGE_MAXCLASS
)) {

127  
NSIZES
;

129 #i‡(
NTBINS
 != 0)

130 i‡(
size
 <(
	`ZU
(1Ë<< 
LG_TINY_MAXCLASS
)) {

131 
szöd_t
 
lg_tmö
 = 
LG_TINY_MAXCLASS
 - 
NTBINS
 + 1;

132 
szöd_t
 
lg_˚û
 = 
	`lg_Êo‹
(
	`pow2_˚û_zu
(
size
));

133  (
lg_˚û
 < 
lg_tmö
 ? 0 :Üg_ceil -Üg_tmin);

137 
szöd_t
 
x
 = 
	`lg_Êo‹
((
size
<<1)-1);

138 
szöd_t
 
shi·
 = (
x
 < 
LG_SIZE_CLASS_GROUP
 + 
LG_QUANTUM
) ? 0 :

139 
x
 - (
LG_SIZE_CLASS_GROUP
 + 
LG_QUANTUM
);

140 
szöd_t
 
gΩ
 = 
shi·
 << 
LG_SIZE_CLASS_GROUP
;

142 
szöd_t
 
lg_dñè
 = (
x
 < 
LG_SIZE_CLASS_GROUP
 + 
LG_QUANTUM
 + 1)

143 ? 
LG_QUANTUM
 : 
x
 - 
LG_SIZE_CLASS_GROUP
 - 1;

145 
size_t
 
dñè_övî£_mask
 = 
	`ZU
(-1Ë<< 
lg_dñè
;

146 
szöd_t
 
mod
 = ((((
size
-1Ë& 
dñè_övî£_mask
Ë>> 
lg_dñè
)) &

147 ((
	`ZU
(1Ë<< 
LG_SIZE_CLASS_GROUP
) - 1);

149 
szöd_t
 
ödex
 = 
NTBINS
 + 
gΩ
 + 
mod
;

150  
ödex
;

152 
	}
}

154 
JEMALLOC_ALWAYS_INLINE
 
szöd_t


155 
	$sz_size2ödex_lookup
(
size_t
 
size
) {

156 
	`as£π
(
size
 <
LOOKUP_MAXCLASS
);

158 
szöd_t
 
ªt
 = (
sz_size2ödex_èb
[(
size
-1Ë>> 
LG_TINY_MIN
]);

159 
	`as£π
(
ªt
 =
	`sz_size2ödex_compuã
(
size
));

160  
ªt
;

162 
	}
}

164 
JEMALLOC_ALWAYS_INLINE
 
szöd_t


165 
	$sz_size2ödex
(
size_t
 
size
) {

166 
	`as£π
(
size
 > 0);

167 i‡(
	`likñy
(
size
 <
LOOKUP_MAXCLASS
)) {

168  
	`sz_size2ödex_lookup
(
size
);

170  
	`sz_size2ödex_compuã
(
size
);

171 
	}
}

173 
ölöe
 
size_t


174 
	$sz_ödex2size_compuã
(
szöd_t
 
ödex
) {

175 #i‡(
NTBINS
 > 0)

176 i‡(
ödex
 < 
NTBINS
) {

177  (
	`ZU
(1Ë<< (
LG_TINY_MAXCLASS
 - 
NTBINS
 + 1 + 
ödex
));

181 
size_t
 
ªdu˚d_ödex
 = 
ödex
 - 
NTBINS
;

182 
size_t
 
gΩ
 = 
ªdu˚d_ödex
 >> 
LG_SIZE_CLASS_GROUP
;

183 
size_t
 
mod
 = 
ªdu˚d_ödex
 & ((
	`ZU
(1Ë<< 
LG_SIZE_CLASS_GROUP
) -

186 
size_t
 
gΩ_size_mask
 = ~((!!
gΩ
)-1);

187 
size_t
 
gΩ_size
 = ((
	`ZU
(1Ë<< (
LG_QUANTUM
 +

188 (
LG_SIZE_CLASS_GROUP
-1))Ë<< 
gΩ
Ë& 
gΩ_size_mask
;

190 
size_t
 
shi·
 = (
gΩ
 == 0) ? 1 : grp;

191 
size_t
 
lg_dñè
 = 
shi·
 + (
LG_QUANTUM
-1);

192 
size_t
 
mod_size
 = (
mod
+1Ë<< 
lg_dñè
;

194 
size_t
 
usize
 = 
gΩ_size
 + 
mod_size
;

195  
usize
;

197 
	}
}

199 
JEMALLOC_ALWAYS_INLINE
 
size_t


200 
	$sz_ödex2size_lookup
(
szöd_t
 
ödex
) {

201 
size_t
 
ªt
 = (size_t)
sz_ödex2size_èb
[
ödex
];

202 
	`as£π
(
ªt
 =
	`sz_ödex2size_compuã
(
ödex
));

203  
ªt
;

204 
	}
}

206 
JEMALLOC_ALWAYS_INLINE
 
size_t


207 
	$sz_ödex2size
(
szöd_t
 
ödex
) {

208 
	`as£π
(
ödex
 < 
NSIZES
);

209  
	`sz_ödex2size_lookup
(
ödex
);

210 
	}
}

212 
JEMALLOC_ALWAYS_INLINE
 
size_t


213 
	$sz_s2u_compuã
(
size_t
 
size
) {

214 i‡(
	`u∆ikñy
(
size
 > 
LARGE_MAXCLASS
)) {

217 #i‡(
NTBINS
 > 0)

218 i‡(
size
 <(
	`ZU
(1Ë<< 
LG_TINY_MAXCLASS
)) {

219 
size_t
 
lg_tmö
 = 
LG_TINY_MAXCLASS
 - 
NTBINS
 + 1;

220 
size_t
 
lg_˚û
 = 
	`lg_Êo‹
(
	`pow2_˚û_zu
(
size
));

221  (
lg_˚û
 < 
lg_tmö
 ? (
	`ZU
(1) <<Üg_tmin) :

222 (
	`ZU
(1Ë<< 
lg_˚û
));

226 
size_t
 
x
 = 
	`lg_Êo‹
((
size
<<1)-1);

227 
size_t
 
lg_dñè
 = (
x
 < 
LG_SIZE_CLASS_GROUP
 + 
LG_QUANTUM
 + 1)

228 ? 
LG_QUANTUM
 : 
x
 - 
LG_SIZE_CLASS_GROUP
 - 1;

229 
size_t
 
dñè
 = 
	`ZU
(1Ë<< 
lg_dñè
;

230 
size_t
 
dñè_mask
 = 
dñè
 - 1;

231 
size_t
 
usize
 = (
size
 + 
dñè_mask
) & ~delta_mask;

232  
usize
;

234 
	}
}

236 
JEMALLOC_ALWAYS_INLINE
 
size_t


237 
	$sz_s2u_lookup
(
size_t
 
size
) {

238 
size_t
 
ªt
 = 
	`sz_ödex2size_lookup
(
	`sz_size2ödex_lookup
(
size
));

240 
	`as£π
(
ªt
 =
	`sz_s2u_compuã
(
size
));

241  
ªt
;

242 
	}
}

248 
JEMALLOC_ALWAYS_INLINE
 
size_t


249 
	$sz_s2u
(
size_t
 
size
) {

250 
	`as£π
(
size
 > 0);

251 i‡(
	`likñy
(
size
 <
LOOKUP_MAXCLASS
)) {

252  
	`sz_s2u_lookup
(
size
);

254  
	`sz_s2u_compuã
(
size
);

255 
	}
}

261 
JEMALLOC_ALWAYS_INLINE
 
size_t


262 
	$sz_ß2u
(
size_t
 
size
, size_à
Æignmít
) {

263 
size_t
 
usize
;

265 
	`as£π
(
Æignmít
 != 0 && ((alignment - 1) &álignment) == 0);

268 i‡(
size
 <
SMALL_MAXCLASS
 && 
Æignmít
 < 
PAGE
) {

283 
usize
 = 
	`sz_s2u
(
	`ALIGNMENT_CEILING
(
size
, 
Æignmít
));

284 i‡(
usize
 < 
LARGE_MINCLASS
) {

285  
usize
;

291 i‡(
	`u∆ikñy
(
Æignmít
 > 
LARGE_MAXCLASS
)) {

296 i‡(
size
 <
LARGE_MINCLASS
) {

297 
usize
 = 
LARGE_MINCLASS
;

299 
usize
 = 
	`sz_s2u
(
size
);

300 i‡(
usize
 < 
size
) {

310 i‡(
usize
 + 
sz_œrge_∑d
 + 
	`PAGE_CEILING
(
Æignmít
Ë- 
PAGE
 < usize) {

314  
usize
;

315 
	}
}

	@include/jemalloc/internal/tcache_externs.h

1 #i‚de‡
JEMALLOC_INTERNAL_TCACHE_EXTERNS_H


2 
	#JEMALLOC_INTERNAL_TCACHE_EXTERNS_H


	)

4 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

6 
boﬁ
 
›t_tˇche
;

7 
ssize_t
 
›t_lg_tˇche_max
;

9 
ˇche_bö_öfo_t
 *
tˇche_bö_öfo
;

15 
nhbös
;

18 
size_t
 
tˇche_max˛ass
;

28 
tˇches_t
 *
tˇches
;

30 
size_t
 
tˇche_ßŒoc
(
tsdn_t
 *
tsdn
, c⁄° *
±r
);

31 
tˇche_evít_h¨d
(
tsd_t
 *
tsd
, 
tˇche_t
 *
tˇche
);

32 *
tˇche_Æloc_smÆl_h¨d
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
tˇche_t
 *
tˇche
,

33 
ˇche_bö_t
 *
tbö
, 
szöd_t
 
bööd
, 
boﬁ
 *
tˇche_suc˚ss
);

34 
tˇche_bö_Êush_smÆl
(
tsd_t
 *
tsd
, 
tˇche_t
 *
tˇche
, 
ˇche_bö_t
 *
tbö
,

35 
szöd_t
 
bööd
, 
ªm
);

36 
tˇche_bö_Êush_œrge
(
tsd_t
 *
tsd
, 
ˇche_bö_t
 *
tbö
, 
szöd_t
 
bööd
,

37 
ªm
, 
tˇche_t
 *
tˇche
);

38 
tˇche_¨ía_ªassocüã
(
tsdn_t
 *
tsdn
, 
tˇche_t
 *
tˇche
,

39 
¨ía_t
 *
¨ía
);

40 
tˇche_t
 *
tˇche_¸óã_ex∂icô
(
tsd_t
 *
tsd
);

41 
tˇche_˛ónup
(
tsd_t
 *
tsd
);

42 
tˇche_°©s_mîge
(
tsdn_t
 *
tsdn
, 
tˇche_t
 *
tˇche
, 
¨ía_t
 *
¨ía
);

43 
boﬁ
 
tˇches_¸óã
(
tsd_t
 *
tsd
, *
r_öd
);

44 
tˇches_Êush
(
tsd_t
 *
tsd
, 
öd
);

45 
tˇches_de°roy
(
tsd_t
 *
tsd
, 
öd
);

46 
boﬁ
 
tˇche_boŸ
(
tsdn_t
 *
tsdn
);

47 
tˇche_¨ía_assocüã
(
tsdn_t
 *
tsdn
, 
tˇche_t
 *
tˇche
, 
¨ía_t
 *
¨ía
);

48 
tˇche_¥ef‹k
(
tsdn_t
 *
tsdn
);

49 
tˇche_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
);

50 
tˇche_po°f‹k_chûd
(
tsdn_t
 *
tsdn
);

51 
tˇche_Êush
(
tsd_t
 *
tsd
);

52 
boﬁ
 
tsd_tˇche_d©a_öô
(
tsd_t
 *
tsd
);

53 
boﬁ
 
tsd_tˇche_íabÀd_d©a_öô
(
tsd_t
 *
tsd
);

	@include/jemalloc/internal/tcache_inlines.h

1 #i‚de‡
JEMALLOC_INTERNAL_TCACHE_INLINES_H


2 
	#JEMALLOC_INTERNAL_TCACHE_INLINES_H


	)

4 
	~"jemÆloc/öã∫Æ/bö.h
"

5 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ty≥s.h
"

6 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

7 
	~"jemÆloc/öã∫Æ/sz.h
"

8 
	~"jemÆloc/öã∫Æ/tickî.h
"

9 
	~"jemÆloc/öã∫Æ/utû.h
"

11 
ölöe
 
boﬁ


12 
	$tˇche_íabÀd_gë
(
tsd_t
 *
tsd
) {

13  
	`tsd_tˇche_íabÀd_gë
(
tsd
);

14 
	}
}

16 
ölöe
 

17 
	$tˇche_íabÀd_£t
(
tsd_t
 *
tsd
, 
boﬁ
 
íabÀd
) {

18 
boﬁ
 
was_íabÀd
 = 
	`tsd_tˇche_íabÀd_gë
(
tsd
);

20 i‡(!
was_íabÀd
 && 
íabÀd
) {

21 
	`tsd_tˇche_d©a_öô
(
tsd
);

22 } i‡(
was_íabÀd
 && !
íabÀd
) {

23 
	`tˇche_˛ónup
(
tsd
);

26 
	`tsd_tˇche_íabÀd_£t
(
tsd
, 
íabÀd
);

27 
	`tsd_¶ow_upd©e
(
tsd
);

28 
	}
}

30 
JEMALLOC_ALWAYS_INLINE
 

31 
	$tˇche_evít
(
tsd_t
 *
tsd
, 
tˇche_t
 *
tˇche
) {

32 i‡(
TCACHE_GC_INCR
 == 0) {

36 i‡(
	`u∆ikñy
(
	`tickî_tick
(&
tˇche
->
gc_tickî
))) {

37 
	`tˇche_evít_h¨d
(
tsd
, 
tˇche
);

39 
	}
}

41 
JEMALLOC_ALWAYS_INLINE
 *

42 
	$tˇche_Æloc_smÆl
(
tsd_t
 *
tsd
, 
¨ía_t
 *
¨ía
, 
tˇche_t
 *
tˇche
, 
size_t
 
size
,

43 
szöd_t
 
bööd
, 
boﬁ
 
zîo
, boﬁ 
¶ow_∑th
) {

44 *
ªt
;

45 
ˇche_bö_t
 *
bö
;

46 
boﬁ
 
tˇche_suc˚ss
;

47 
size_t
 
usize
 
	`JEMALLOC_CC_SILENCE_INIT
(0);

49 
	`as£π
(
bööd
 < 
NBINS
);

50 
bö
 = 
	`tˇche_smÆl_bö_gë
(
tˇche
, 
bööd
);

51 
ªt
 = 
	`ˇche_bö_Æloc_ósy
(
bö
, &
tˇche_suc˚ss
);

52 
	`as£π
(
tˇche_suc˚ss
 =(
ªt
 !
NULL
));

53 i‡(
	`u∆ikñy
(!
tˇche_suc˚ss
)) {

54 
boﬁ
 
tˇche_h¨d_suc˚ss
;

55 
¨ía
 = 
	`¨ía_choo£
(
tsd
,árena);

56 i‡(
	`u∆ikñy
(
¨ía
 =
NULL
)) {

57  
NULL
;

60 
ªt
 = 
	`tˇche_Æloc_smÆl_h¨d
(
	`tsd_tsdn
(
tsd
), 
¨ía
, 
tˇche
,

61 
bö
, 
bööd
, &
tˇche_h¨d_suc˚ss
);

62 i‡(
tˇche_h¨d_suc˚ss
 =
Ál£
) {

63  
NULL
;

67 
	`as£π
(
ªt
);

72 i‡(
c⁄fig_¥of
 || (
¶ow_∑th
 && 
c⁄fig_fûl
Ë|| 
	`u∆ikñy
(
zîo
)) {

73 
usize
 = 
	`sz_ödex2size
(
bööd
);

74 
	`as£π
(
	`tˇche_ßŒoc
(
	`tsd_tsdn
(
tsd
), 
ªt
Ë=
usize
);

77 i‡(
	`likñy
(!
zîo
)) {

78 i‡(
¶ow_∑th
 && 
c⁄fig_fûl
) {

79 i‡(
	`u∆ikñy
(
›t_junk_Æloc
)) {

80 
	`¨ía_Æloc_junk_smÆl
(
ªt
, &
bö_öfos
[
bööd
],

81 
Ál£
);

82 } i‡(
	`u∆ikñy
(
›t_zîo
)) {

83 
	`mem£t
(
ªt
, 0, 
usize
);

87 i‡(
¶ow_∑th
 && 
c⁄fig_fûl
 && 
	`u∆ikñy
(
›t_junk_Æloc
)) {

88 
	`¨ía_Æloc_junk_smÆl
(
ªt
, &
bö_öfos
[
bööd
], 
åue
);

90 
	`mem£t
(
ªt
, 0, 
usize
);

93 i‡(
c⁄fig_°©s
) {

94 
bö
->
t°©s
.
ƒeque°s
++;

96 i‡(
c⁄fig_¥of
) {

97 
tˇche
->
¥of_accumbyãs
 +
usize
;

99 
	`tˇche_evít
(
tsd
, 
tˇche
);

100  
ªt
;

101 
	}
}

103 
JEMALLOC_ALWAYS_INLINE
 *

104 
	$tˇche_Æloc_œrge
(
tsd_t
 *
tsd
, 
¨ía_t
 *
¨ía
, 
tˇche_t
 *
tˇche
, 
size_t
 
size
,

105 
szöd_t
 
bööd
, 
boﬁ
 
zîo
, boﬁ 
¶ow_∑th
) {

106 *
ªt
;

107 
ˇche_bö_t
 *
bö
;

108 
boﬁ
 
tˇche_suc˚ss
;

110 
	`as£π
(
bööd
 >
NBINS
 &&bööd < 
nhbös
);

111 
bö
 = 
	`tˇche_œrge_bö_gë
(
tˇche
, 
bööd
);

112 
ªt
 = 
	`ˇche_bö_Æloc_ósy
(
bö
, &
tˇche_suc˚ss
);

113 
	`as£π
(
tˇche_suc˚ss
 =(
ªt
 !
NULL
));

114 i‡(
	`u∆ikñy
(!
tˇche_suc˚ss
)) {

119 
¨ía
 = 
	`¨ía_choo£
(
tsd
,árena);

120 i‡(
	`u∆ikñy
(
¨ía
 =
NULL
)) {

121  
NULL
;

124 
ªt
 = 
	`œrge_mÆloc
(
	`tsd_tsdn
(
tsd
), 
¨ía
, 
	`sz_s2u
(
size
), 
zîo
);

125 i‡(
ªt
 =
NULL
) {

126  
NULL
;

129 
size_t
 
usize
 
	`JEMALLOC_CC_SILENCE_INIT
(0);

132 i‡(
c⁄fig_¥of
 || (
¶ow_∑th
 && 
c⁄fig_fûl
) ||

133 
	`u∆ikñy
(
zîo
)) {

134 
usize
 = 
	`sz_ödex2size
(
bööd
);

135 
	`as£π
(
usize
 <
tˇche_max˛ass
);

138 i‡(
	`likñy
(!
zîo
)) {

139 i‡(
¶ow_∑th
 && 
c⁄fig_fûl
) {

140 i‡(
	`u∆ikñy
(
›t_junk_Æloc
)) {

141 
	`mem£t
(
ªt
, 
JEMALLOC_ALLOC_JUNK
,

142 
usize
);

143 } i‡(
	`u∆ikñy
(
›t_zîo
)) {

144 
	`mem£t
(
ªt
, 0, 
usize
);

148 
	`mem£t
(
ªt
, 0, 
usize
);

151 i‡(
c⁄fig_°©s
) {

152 
bö
->
t°©s
.
ƒeque°s
++;

154 i‡(
c⁄fig_¥of
) {

155 
tˇche
->
¥of_accumbyãs
 +
usize
;

159 
	`tˇche_evít
(
tsd
, 
tˇche
);

160  
ªt
;

161 
	}
}

163 
JEMALLOC_ALWAYS_INLINE
 

164 
	$tˇche_dÆloc_smÆl
(
tsd_t
 *
tsd
, 
tˇche_t
 *
tˇche
, *
±r
, 
szöd_t
 
bööd
,

165 
boﬁ
 
¶ow_∑th
) {

166 
ˇche_bö_t
 *
bö
;

167 
ˇche_bö_öfo_t
 *
bö_öfo
;

169 
	`as£π
(
	`tˇche_ßŒoc
(
	`tsd_tsdn
(
tsd
), 
±r
Ë<
SMALL_MAXCLASS
);

171 i‡(
¶ow_∑th
 && 
c⁄fig_fûl
 && 
	`u∆ikñy
(
›t_junk_‰ì
)) {

172 
	`¨ía_dÆloc_junk_smÆl
(
±r
, &
bö_öfos
[
bööd
]);

175 
bö
 = 
	`tˇche_smÆl_bö_gë
(
tˇche
, 
bööd
);

176 
bö_öfo
 = &
tˇche_bö_öfo
[
bööd
];

177 i‡(
	`u∆ikñy
(
bö
->
nˇched
 =
bö_öfo
->
nˇched_max
)) {

178 
	`tˇche_bö_Êush_smÆl
(
tsd
, 
tˇche
, 
bö
, 
bööd
,

179 (
bö_öfo
->
nˇched_max
 >> 1));

181 
	`as£π
(
bö
->
nˇched
 < 
bö_öfo
->
nˇched_max
);

182 
bö
->
nˇched
++;

183 *(
bö
->
avaû
 - bö->
nˇched
Ë
±r
;

185 
	`tˇche_evít
(
tsd
, 
tˇche
);

186 
	}
}

188 
JEMALLOC_ALWAYS_INLINE
 

189 
	$tˇche_dÆloc_œrge
(
tsd_t
 *
tsd
, 
tˇche_t
 *
tˇche
, *
±r
, 
szöd_t
 
bööd
,

190 
boﬁ
 
¶ow_∑th
) {

191 
ˇche_bö_t
 *
bö
;

192 
ˇche_bö_öfo_t
 *
bö_öfo
;

194 
	`as£π
(
	`tˇche_ßŒoc
(
	`tsd_tsdn
(
tsd
), 
±r
Ë> 
SMALL_MAXCLASS
);

195 
	`as£π
(
	`tˇche_ßŒoc
(
	`tsd_tsdn
(
tsd
), 
±r
Ë<
tˇche_max˛ass
);

197 i‡(
¶ow_∑th
 && 
c⁄fig_fûl
 && 
	`u∆ikñy
(
›t_junk_‰ì
)) {

198 
	`œrge_dÆloc_junk
(
±r
, 
	`sz_ödex2size
(
bööd
));

201 
bö
 = 
	`tˇche_œrge_bö_gë
(
tˇche
, 
bööd
);

202 
bö_öfo
 = &
tˇche_bö_öfo
[
bööd
];

203 i‡(
	`u∆ikñy
(
bö
->
nˇched
 =
bö_öfo
->
nˇched_max
)) {

204 
	`tˇche_bö_Êush_œrge
(
tsd
, 
bö
, 
bööd
,

205 (
bö_öfo
->
nˇched_max
 >> 1), 
tˇche
);

207 
	`as£π
(
bö
->
nˇched
 < 
bö_öfo
->
nˇched_max
);

208 
bö
->
nˇched
++;

209 *(
bö
->
avaû
 - bö->
nˇched
Ë
±r
;

211 
	`tˇche_evít
(
tsd
, 
tˇche
);

212 
	}
}

214 
JEMALLOC_ALWAYS_INLINE
 
tˇche_t
 *

215 
	$tˇches_gë
(
tsd_t
 *
tsd
, 
öd
) {

216 
tˇches_t
 *
ñm
 = &
tˇches
[
öd
];

217 i‡(
	`u∆ikñy
(
ñm
->
tˇche
 =
NULL
)) {

218 
ñm
->
tˇche
 = 
	`tˇche_¸óã_ex∂icô
(
tsd
);

220  
ñm
->
tˇche
;

221 
	}
}

	@include/jemalloc/internal/tcache_structs.h

1 #i‚de‡
JEMALLOC_INTERNAL_TCACHE_STRUCTS_H


2 
	#JEMALLOC_INTERNAL_TCACHE_STRUCTS_H


	)

4 
	~"jemÆloc/öã∫Æ/ql.h
"

5 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

6 
	~"jemÆloc/öã∫Æ/ˇche_bö.h
"

7 
	~"jemÆloc/öã∫Æ/tickî.h
"

9 
	stˇche_s
 {

16 
uöt64_t
 
	m¥of_accumbyãs
;

18 
tickî_t
 
	mgc_tickî
;

24 
ˇche_bö_t
 
	mbös_smÆl
[
NBINS
];

31 
ql_ñm
(
tˇche_t
Ë
	mlök
;

37 
ˇche_bö_¨øy_des¸ùt‹_t
 
	mˇche_bö_¨øy_des¸ùt‹
;

40 
¨ía_t
 *
	m¨ía
;

42 
szöd_t
 
	m√xt_gc_bö
;

44 
uöt8_t
 
	mlg_fûl_div
[
NBINS
];

50 
ˇche_bö_t
 
	mbös_œrge
[
NSIZES
-
NBINS
];

54 
	stˇches_s
 {

56 
tˇche_t
 *
	mtˇche
;

57 
tˇches_t
 *
	m√xt
;

	@include/jemalloc/internal/tcache_types.h

1 #i‚de‡
JEMALLOC_INTERNAL_TCACHE_TYPES_H


2 
	#JEMALLOC_INTERNAL_TCACHE_TYPES_H


	)

4 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

6 
tˇche_s
 
	ttˇche_t
;

7 
tˇches_s
 
	ttˇches_t
;

14 
	#TCACHE_STATE_DISABLED
 ((
tˇche_t
 *)(
uöçå_t
)1)

	)

15 
	#TCACHE_STATE_REINCARNATED
 ((
tˇche_t
 *)(
uöçå_t
)2)

	)

16 
	#TCACHE_STATE_PURGATORY
 ((
tˇche_t
 *)(
uöçå_t
)3)

	)

17 
	#TCACHE_STATE_MAX
 
TCACHE_STATE_PURGATORY


	)

22 
	#TCACHE_NSLOTS_SMALL_MIN
 20

	)

31 
	#TCACHE_NSLOTS_SMALL_MAX
 200

	)

34 
	#TCACHE_NSLOTS_LARGE
 20

	)

37 
	#LG_TCACHE_MAXCLASS_DEFAULT
 15

	)

44 
	#TCACHE_GC_SWEEP
 8192

	)

47 
	#TCACHE_GC_INCR
 \

48 ((
TCACHE_GC_SWEEP
 / 
NBINS
Ë+ ((TCACHE_GC_SWEEP / NBINS =0Ë? 0 : 1))

	)

51 
	#TCACHE_ZERO_INITIALIZER
 {0}

	)

54 
	#TCACHE_ENABLED_ZERO_INITIALIZER
 
Ál£


	)

	@include/jemalloc/internal/ticker.h

1 #i‚de‡
JEMALLOC_INTERNAL_TICKER_H


2 
	#JEMALLOC_INTERNAL_TICKER_H


	)

4 
	~"jemÆloc/öã∫Æ/utû.h
"

15 
öt32_t
 
	mtick
;

16 
öt32_t
 
	m¡icks
;

17 } 
	ttickî_t
;

19 
ölöe
 

20 
	$tickî_öô
(
tickî_t
 *
tickî
, 
öt32_t
 
¡icks
) {

21 
tickî
->
tick
 = 
¡icks
;

22 
tickî
->
¡icks
 =Çticks;

23 
	}
}

25 
ölöe
 

26 
	$tickî_c›y
(
tickî_t
 *
tickî
, c⁄°Åickî_à*
Ÿhî
) {

27 *
tickî
 = *
Ÿhî
;

28 
	}
}

30 
ölöe
 
öt32_t


31 
	$tickî_ªad
(c⁄° 
tickî_t
 *
tickî
) {

32  
tickî
->
tick
;

33 
	}
}

54 #i‡
deföed
(
__GNUC__
Ë&& !deföed(
__˛™g__
) \

55 && (
deföed
(
__x86_64__
Ë|| 
	$deföed
(
__i386__
))

56 
JEMALLOC_NOINLINE


58 
boﬁ


59 
	$tickî_fixup
(
tickî_t
 *
tickî
) {

60 
tickî
->
tick
 =Åickî->
¡icks
;

61  
åue
;

62 
	}
}

64 
ölöe
 
boﬁ


65 
	$tickî_ticks
(
tickî_t
 *
tickî
, 
öt32_t
 
¡icks
) {

66 
tickî
->
tick
 -
¡icks
;

67 i‡(
	`u∆ikñy
(
tickî
->
tick
 < 0)) {

68  
	`tickî_fixup
(
tickî
);

70  
Ál£
;

71 
	}
}

73 
ölöe
 
boﬁ


74 
	$tickî_tick
(
tickî_t
 *
tickî
) {

75  
	`tickî_ticks
(
tickî
, 1);

76 
	}
}

	@include/jemalloc/internal/tsd.h

1 #i‚de‡
JEMALLOC_INTERNAL_TSD_H


2 
	#JEMALLOC_INTERNAL_TSD_H


	)

4 
	~"jemÆloc/öã∫Æ/¨ía_ty≥s.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_exã∫s.h
"

7 
	~"jemÆloc/öã∫Æ/¥of_ty≥s.h
"

8 
	~"jemÆloc/öã∫Æ/ql.h
"

9 
	~"jemÆloc/öã∫Æ/πªe_tsd.h
"

10 
	~"jemÆloc/öã∫Æ/tˇche_ty≥s.h
"

11 
	~"jemÆloc/öã∫Æ/tˇche_°ru˘s.h
"

12 
	~"jemÆloc/öã∫Æ/utû.h
"

13 
	~"jemÆloc/öã∫Æ/wô√ss.h
"

50 #ifde‡
JEMALLOC_JET


51 (*
	tã°_ˇŒback_t
)(*);

52 
	#MALLOC_TSD_TEST_DATA_INIT
 0x72b65c10

	)

53 
	#MALLOC_TEST_TSD
 \

54 
	`O
(
ã°_d©a
, , ) \

55 
	`O
(
ã°_ˇŒback
, 
ã°_ˇŒback_t
, )

	)

56 
	#MALLOC_TEST_TSD_INITIALIZER
 , 
MALLOC_TSD_TEST_DATA_INIT
, 
NULL


	)

58 
	#MALLOC_TEST_TSD


	)

59 
	#MALLOC_TEST_TSD_INITIALIZER


	)

63 
	#MALLOC_TSD
 \

64 
	`O
(
tˇche_íabÀd
, 
boﬁ
, bool) \

65 
	`O
(
¨ías_td©a_by∑ss
, 
boﬁ
, bool) \

66 
	`O
(
ªíå™cy_Àvñ
, 
öt8_t
, int8_t) \

67 
	`O
(
«ª«s_td©a
, 
uöt32_t
, uint32_t) \

68 
	`O
(
off£t_°©e
, 
uöt64_t
, uint64_t) \

69 
	`O
(
thªad_Æloˇãd
, 
uöt64_t
, uint64_t) \

70 
	`O
(
thªad_dóŒoˇãd
, 
uöt64_t
, uint64_t) \

71 
	`O
(
¥of_td©a
, 
¥of_td©a_t
 *,Örof_tdata_t *) \

72 
	`O
(
πªe_˘x
, 
πªe_˘x_t
,Ñtree_ctx_t) \

73 
	`O
(
üª«
, 
¨ía_t
 *,árena_t *) \

74 
	`O
(
¨ía
, 
¨ía_t
 *,árena_t *) \

75 
	`O
(
¨ías_td©a
, 
¨ía_td©a_t
 *,árena_tdata_t *)\

76 
	`O
(
tˇche
, 
tˇche_t
,Åcache_t) \

77 
	`O
(
wô√ss_tsd
, 
wô√ss_tsd_t
, 
wô√ss_tsdn_t
) \

78 
MALLOC_TEST_TSD


	)

80 
	#TSD_INITIALIZER
 { \

81 
tsd_°©e_unöôülized
, \

82 
TCACHE_ENABLED_ZERO_INITIALIZER
, \

83 
Ál£
, \

89 
NULL
, \

90 
RTREE_CTX_ZERO_INITIALIZER
, \

91 
NULL
, \

92 
NULL
, \

93 
NULL
, \

94 
TCACHE_ZERO_INITIALIZER
, \

95 
WITNESS_TSD_INITIALIZER
 \

96 
MALLOC_TEST_TSD_INITIALIZER
 \

97 
	}

	)
}

100 
	mtsd_°©e_nomöÆ
 = 0,

101 
	mtsd_°©e_nomöÆ_¶ow
 = 1,

103 
	mtsd_°©e_nomöÆ_max
 = 1,

104 
	mtsd_°©e_möimÆ_öôülized
 = 2,

105 
	mtsd_°©e_purg©‹y
 = 3,

106 
	mtsd_°©e_ªöˇ∫©ed
 = 4,

107 
	mtsd_°©e_unöôülized
 = 5

111 
uöt8_t
 
	ttsd_°©e_t
;

114 
	stsd_s
 {

120 
tsd_°©e_t
 
	m°©e
;

121 
	#O
(
n
, 
t
, 
¡
) \

122 
t
 
u£_a_gëãr_‹_£âî_ö°ód_
##
n
;

	)

123 
	mMALLOC_TSD


124 #unde‡
O


132 
	stsdn_s
 {

133 
tsd_t
 
	mtsd
;

135 
	#TSDN_NULL
 ((
tsdn_t
 *)0)

	)

136 
JEMALLOC_ALWAYS_INLINE
 
tsdn_t
 *

137 
	$tsd_tsdn
(
tsd_t
 *
tsd
) {

138  (
tsdn_t
 *)
tsd
;

139 
	}
}

141 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


142 
	$tsdn_nuŒ
(c⁄° 
tsdn_t
 *
tsdn
) {

143  
tsdn
 =
NULL
;

144 
	}
}

146 
JEMALLOC_ALWAYS_INLINE
 
tsd_t
 *

147 
	$tsdn_tsd
(
tsdn_t
 *
tsdn
) {

148 
	`as£π
(!
	`tsdn_nuŒ
(
tsdn
));

150  &
tsdn
->
tsd
;

151 
	}
}

153 *
mÆloc_tsd_mÆloc
(
size_t
 
size
);

154 
mÆloc_tsd_dÆloc
(*
wøµî
);

155 
mÆloc_tsd_˛ónup_ªgi°î
(
	$boﬁ
 (*
f
)());

156 
tsd_t
 *
	`mÆloc_tsd_boŸ0
();

157 
	`mÆloc_tsd_boŸ1
();

158 
	`tsd_˛ónup
(*
¨g
);

159 
tsd_t
 *
	`tsd_„tch_¶ow
—sd_à*
tsd
, 
boﬁ
 
öã∫Æ
);

160 
	`tsd_¶ow_upd©e
(
tsd_t
 *
tsd
);

167 #ifde‡
JEMALLOC_MALLOC_THREAD_CLEANUP


168 
	~"jemÆloc/öã∫Æ/tsd_mÆloc_thªad_˛ónup.h
"

169 #ñi‡(
	`deföed
(
JEMALLOC_TLS
))

170 
	~"jemÆloc/öã∫Æ/tsd_és.h
"

171 #ñi‡(
	`deföed
(
_WIN32
))

172 
	~"jemÆloc/öã∫Æ/tsd_wö.h
"

174 
	~"jemÆloc/öã∫Æ/tsd_gíîic.h
"

182 
	#O
(
n
, 
t
, 
¡
) \

183 
JEMALLOC_ALWAYS_INLINE
 
t
 * \

184 
tsd_
##
n
##
	`p_gë_unß„
(
tsd_t
 *
tsd
) { \

185  &
tsd
->
u£_a_gëãr_‹_£âî_ö°ód_
##
n
; \

186 
	}

	)
}

187 
	gMALLOC_TSD


188 #unde‡
O


191 
	#O
(
n
, 
t
, 
¡
) \

192 
JEMALLOC_ALWAYS_INLINE
 
t
 * \

193 
tsd_
##
n
##
	`p_gë
(
tsd_t
 *
tsd
) { \

194 
	`as£π
(
tsd
->
°©e
 =
tsd_°©e_nomöÆ
 || \

195 
tsd
->
°©e
 =
tsd_°©e_nomöÆ_¶ow
 || \

196 
tsd
->
°©e
 =
tsd_°©e_ªöˇ∫©ed
 || \

197 
tsd
->
°©e
 =
tsd_°©e_möimÆ_öôülized
); \

198  
tsd_
##
n
##
	`p_gë_unß„
(
tsd
); \

199 }

	)

200 
	gMALLOC_TSD


201 #unde‡
O


207 
	#O
(
n
, 
t
, 
¡
) \

208 
JEMALLOC_ALWAYS_INLINE
 
¡
 * \

209 
tsdn_
##
n
##
	`p_gë
(
tsdn_t
 *
tsdn
) { \

210 i‡(
	`tsdn_nuŒ
(
tsdn
)) { \

211  
NULL
; \

213 
tsd_t
 *
tsd
 = 
	`tsdn_tsd
(
tsdn
); \

214  (
¡
 *)
tsd_
##
n
##
	`p_gë
(
tsd
); \

215 }

	)

216 
	gMALLOC_TSD


217 #unde‡
O


220 
	#O
(
n
, 
t
, 
¡
) \

221 
JEMALLOC_ALWAYS_INLINE
 
t
 \

222 
tsd_
##
n
##
	`_gë
(
tsd_t
 *
tsd
) { \

223  *
tsd_
##
n
##
	`p_gë
(
tsd
); \

224 }

	)

225 
	gMALLOC_TSD


226 #unde‡
O


229 
	#O
(
n
, 
t
, 
¡
) \

230 
JEMALLOC_ALWAYS_INLINE
 \

231 
tsd_
##
n
##
	`_£t
(
tsd_t
 *
tsd
, 
t
 
vÆ
) { \

232 
	`as£π
(
tsd
->
°©e
 !
tsd_°©e_ªöˇ∫©ed
 && \

233 
tsd
->
°©e
 !
tsd_°©e_möimÆ_öôülized
); \

234 *
tsd_
##
n
##
	`p_gë
(
tsd
Ë
vÆ
; \

235 }

	)

236 
	gMALLOC_TSD


237 #unde‡
O


239 
JEMALLOC_ALWAYS_INLINE
 

240 
	$tsd_as£π_Á°
(
tsd_t
 *
tsd
) {

241 
	`as£π
(!
mÆloc_¶ow
 && 
	`tsd_tˇche_íabÀd_gë
(
tsd
) &&

242 
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) == 0);

243 
	}
}

245 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


246 
	$tsd_Á°
(
tsd_t
 *
tsd
) {

247 
boﬁ
 
Á°
 = (
tsd
->
°©e
 =
tsd_°©e_nomöÆ
);

248 i‡(
Á°
) {

249 
	`tsd_as£π_Á°
(
tsd
);

252  
Á°
;

253 
	}
}

255 
JEMALLOC_ALWAYS_INLINE
 
tsd_t
 *

256 
	$tsd_„tch_im∂
(
boﬁ
 
öô
, boﬁ 
möimÆ
) {

257 
tsd_t
 *
tsd
 = 
	`tsd_gë
(
öô
);

259 i‡(!
öô
 && 
	`tsd_gë_Æloˇãs
(Ë&& 
tsd
 =
NULL
) {

260  
NULL
;

262 
	`as£π
(
tsd
 !
NULL
);

264 i‡(
	`u∆ikñy
(
tsd
->
°©e
 !
tsd_°©e_nomöÆ
)) {

265  
	`tsd_„tch_¶ow
(
tsd
, 
möimÆ
);

267 
	`as£π
(
	`tsd_Á°
(
tsd
));

268 
	`tsd_as£π_Á°
(
tsd
);

270  
tsd
;

271 
	}
}

274 
JEMALLOC_ALWAYS_INLINE
 
tsd_t
 *

275 
	$tsd_„tch_mö
() {

276  
	`tsd_„tch_im∂
(
åue
,Årue);

277 
	}
}

280 
JEMALLOC_ALWAYS_INLINE
 
tsd_t
 *

281 
	$tsd_öã∫Æ_„tch
() {

282 
tsd_t
 *
tsd
 = 
	`tsd_„tch_mö
();

284 
tsd
->
°©e
 = 
tsd_°©e_ªöˇ∫©ed
;

286  
tsd
;

287 
	}
}

289 
JEMALLOC_ALWAYS_INLINE
 
tsd_t
 *

290 
	$tsd_„tch
() {

291  
	`tsd_„tch_im∂
(
åue
, 
Ál£
);

292 
	}
}

294 
ölöe
 
boﬁ


295 
	$tsd_nomöÆ
(
tsd_t
 *
tsd
) {

296  (
tsd
->
°©e
 <
tsd_°©e_nomöÆ_max
);

297 
	}
}

299 
JEMALLOC_ALWAYS_INLINE
 
tsdn_t
 *

300 
	$tsdn_„tch
() {

301 i‡(!
	`tsd_boŸed_gë
()) {

302  
NULL
;

305  
	`tsd_tsdn
(
	`tsd_„tch_im∂
(
Ál£
, false));

306 
	}
}

308 
JEMALLOC_ALWAYS_INLINE
 
πªe_˘x_t
 *

309 
	$tsd_πªe_˘x
(
tsd_t
 *
tsd
) {

310  
	`tsd_πªe_˘xp_gë
(
tsd
);

311 
	}
}

313 
JEMALLOC_ALWAYS_INLINE
 
πªe_˘x_t
 *

314 
	$tsdn_πªe_˘x
(
tsdn_t
 *
tsdn
, 
πªe_˘x_t
 *
ÁŒback
) {

319 i‡(
	`u∆ikñy
(
	`tsdn_nuŒ
(
tsdn
))) {

320 
	`πªe_˘x_d©a_öô
(
ÁŒback
);

321  
ÁŒback
;

323  
	`tsd_πªe_˘x
(
	`tsdn_tsd
(
tsdn
));

324 
	}
}

	@include/jemalloc/internal/tsd_generic.h

1 #ifde‡
JEMALLOC_INTERNAL_TSD_GENERIC_H


2 #îr‹ 
This
 
fûe
 
should
 
be
 
ö˛uded
 
⁄ly
 
⁄˚
, 
by
 
tsd
.
h
.

4 
	#JEMALLOC_INTERNAL_TSD_GENERIC_H


	)

6 
tsd_öô_block_s
 
	ttsd_öô_block_t
;

7 
	stsd_öô_block_s
 {

8 
ql_ñm
(
tsd_öô_block_t
Ë
	mlök
;

9 
±hªad_t
 
	mthªad
;

10 *
	md©a
;

14 
tsd_öô_hód_s
 
	ttsd_öô_hód_t
;

17 
boﬁ
 
	möôülized
;

18 
tsd_t
 
	mvÆ
;

19 } 
	ttsd_wøµî_t
;

21 *
tsd_öô_check_ªcursi⁄
(
tsd_öô_hód_t
 *
hód
,

22 
tsd_öô_block_t
 *
block
);

23 
tsd_öô_föish
(
tsd_öô_hód_t
 *
hód
, 
tsd_öô_block_t
 *
block
);

25 
±hªad_key_t
 
tsd_tsd
;

26 
tsd_öô_hód_t
 
tsd_öô_hód
;

27 
tsd_wøµî_t
 
tsd_boŸ_wøµî
;

28 
boﬁ
 
tsd_boŸed
;

31 
JEMALLOC_ALWAYS_INLINE
 

32 
	$tsd_˛ónup_wøµî
(*
¨g
) {

33 
tsd_wøµî_t
 *
wøµî
 = (tsd_wøµî_à*)
¨g
;

35 i‡(
wøµî
->
öôülized
) {

36 
wøµî
->
öôülized
 = 
Ál£
;

37 
	`tsd_˛ónup
(&
wøµî
->
vÆ
);

38 i‡(
wøµî
->
öôülized
) {

40 i‡(
	`±hªad_£t•ecific
(
tsd_tsd
, (*)
wøµî
) != 0)

42 
	`mÆloc_wrôe
("<jemalloc>: Error setting TSD\n");

43 i‡(
›t_ab‹t
) {

44 
	`ab‹t
();

50 
	`mÆloc_tsd_dÆloc
(
wøµî
);

51 
	}
}

53 
JEMALLOC_ALWAYS_INLINE
 

54 
	$tsd_wøµî_£t
(
tsd_wøµî_t
 *
wøµî
) {

55 i‡(
	`±hªad_£t•ecific
(
tsd_tsd
, (*)
wøµî
) != 0) {

56 
	`mÆloc_wrôe
("<jemalloc>: Error setting TSD\n");

57 
	`ab‹t
();

59 
	}
}

61 
JEMALLOC_ALWAYS_INLINE
 
tsd_wøµî_t
 *

62 
	$tsd_wøµî_gë
(
boﬁ
 
öô
) {

63 
tsd_wøµî_t
 *
wøµî
 = (tsd_wøµî_à*)
	`±hªad_gë•ecific
(
tsd_tsd
);

65 i‡(
öô
 && 
	`u∆ikñy
(
wøµî
 =
NULL
)) {

66 
tsd_öô_block_t
 
block
;

67 
wøµî
 = (
tsd_wøµî_t
 *)

68 
	`tsd_öô_check_ªcursi⁄
(&
tsd_öô_hód
, &
block
);

69 i‡(
wøµî
) {

70  
wøµî
;

72 
wøµî
 = (
tsd_wøµî_t
 *)

73 
	`mÆloc_tsd_mÆloc
((
tsd_wøµî_t
));

74 
block
.
d©a
 = (*)
wøµî
;

75 i‡(
wøµî
 =
NULL
) {

76 
	`mÆloc_wrôe
("<jemalloc>: Errorállocating TSD\n");

77 
	`ab‹t
();

79 
wøµî
->
öôülized
 = 
Ál£
;

80 
tsd_t
 
öôülizî
 = 
TSD_INITIALIZER
;

81 
wøµî
->
vÆ
 = 
öôülizî
;

83 
	`tsd_wøµî_£t
(
wøµî
);

84 
	`tsd_öô_föish
(&
tsd_öô_hód
, &
block
);

86  
wøµî
;

87 
	}
}

89 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


90 
	$tsd_boŸ0
() {

91 i‡(
	`±hªad_key_¸óã
(&
tsd_tsd
, 
tsd_˛ónup_wøµî
) != 0) {

92  
åue
;

94 
	`tsd_wøµî_£t
(&
tsd_boŸ_wøµî
);

95 
tsd_boŸed
 = 
åue
;

96  
Ál£
;

97 
	}
}

99 
JEMALLOC_ALWAYS_INLINE
 

100 
	$tsd_boŸ1
() {

101 
tsd_wøµî_t
 *
wøµî
;

102 
wøµî
 = (
tsd_wøµî_t
 *)
	`mÆloc_tsd_mÆloc
((tsd_wrapper_t));

103 i‡(
wøµî
 =
NULL
) {

104 
	`mÆloc_wrôe
("<jemalloc>: Errorállocating TSD\n");

105 
	`ab‹t
();

107 
tsd_boŸ_wøµî
.
öôülized
 = 
Ál£
;

108 
	`tsd_˛ónup
(&
tsd_boŸ_wøµî
.
vÆ
);

109 
wøµî
->
öôülized
 = 
Ál£
;

110 
tsd_t
 
öôülizî
 = 
TSD_INITIALIZER
;

111 
wøµî
->
vÆ
 = 
öôülizî
;

112 
	`tsd_wøµî_£t
(
wøµî
);

113 
	}
}

115 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


116 
	$tsd_boŸ
() {

117 i‡(
	`tsd_boŸ0
()) {

118  
åue
;

120 
	`tsd_boŸ1
();

121  
Ál£
;

122 
	}
}

124 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


125 
	$tsd_boŸed_gë
() {

126  
tsd_boŸed
;

127 
	}
}

129 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


130 
	$tsd_gë_Æloˇãs
() {

131  
åue
;

132 
	}
}

135 
JEMALLOC_ALWAYS_INLINE
 
tsd_t
 *

136 
	$tsd_gë
(
boﬁ
 
öô
) {

137 
tsd_wøµî_t
 *
wøµî
;

139 
	`as£π
(
tsd_boŸed
);

140 
wøµî
 = 
	`tsd_wøµî_gë
(
öô
);

141 i‡(
	`tsd_gë_Æloˇãs
(Ë&& !
öô
 && 
wøµî
 =
NULL
) {

142  
NULL
;

144  &
wøµî
->
vÆ
;

145 
	}
}

147 
JEMALLOC_ALWAYS_INLINE
 

148 
	$tsd_£t
(
tsd_t
 *
vÆ
) {

149 
tsd_wøµî_t
 *
wøµî
;

151 
	`as£π
(
tsd_boŸed
);

152 
wøµî
 = 
	`tsd_wøµî_gë
(
åue
);

153 i‡(
	`likñy
(&
wøµî
->
vÆ
 != val)) {

154 
wøµî
->
vÆ
 = *(val);

156 
wøµî
->
öôülized
 = 
åue
;

157 
	}
}

	@include/jemalloc/internal/tsd_malloc_thread_cleanup.h

1 #ifde‡
JEMALLOC_INTERNAL_TSD_MALLOC_THREAD_CLEANUP_H


2 #îr‹ 
This
 
fûe
 
should
 
be
 
ö˛uded
 
⁄ly
 
⁄˚
, 
by
 
tsd
.
h
.

4 
	#JEMALLOC_INTERNAL_TSD_MALLOC_THREAD_CLEANUP_H


	)

6 
__thªad
 
tsd_t
 
tsd_és
;

7 
__thªad
 
boﬁ
 
tsd_öôülized
;

8 
boﬁ
 
tsd_boŸed
;

11 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


12 
	$tsd_˛ónup_wøµî
() {

13 i‡(
tsd_öôülized
) {

14 
tsd_öôülized
 = 
Ál£
;

15 
	`tsd_˛ónup
(&
tsd_és
);

17  
tsd_öôülized
;

18 
	}
}

20 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


21 
	$tsd_boŸ0
() {

22 
	`mÆloc_tsd_˛ónup_ªgi°î
(&
tsd_˛ónup_wøµî
);

23 
tsd_boŸed
 = 
åue
;

24  
Ál£
;

25 
	}
}

27 
JEMALLOC_ALWAYS_INLINE
 

28 
	$tsd_boŸ1
() {

30 
	}
}

32 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


33 
	$tsd_boŸ
() {

34  
	`tsd_boŸ0
();

35 
	}
}

37 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


38 
	$tsd_boŸed_gë
() {

39  
tsd_boŸed
;

40 
	}
}

42 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


43 
	$tsd_gë_Æloˇãs
() {

44  
Ál£
;

45 
	}
}

48 
JEMALLOC_ALWAYS_INLINE
 
tsd_t
 *

49 
	$tsd_gë
(
boﬁ
 
öô
) {

50 
	`as£π
(
tsd_boŸed
);

51  &
tsd_és
;

52 
	}
}

53 
JEMALLOC_ALWAYS_INLINE
 

54 
	$tsd_£t
(
tsd_t
 *
vÆ
) {

55 
	`as£π
(
tsd_boŸed
);

56 i‡(
	`likñy
(&
tsd_és
 !
vÆ
)) {

57 
tsd_és
 = (*
vÆ
);

59 
tsd_öôülized
 = 
åue
;

60 
	}
}

	@include/jemalloc/internal/tsd_tls.h

1 #ifde‡
JEMALLOC_INTERNAL_TSD_TLS_H


2 #îr‹ 
This
 
fûe
 
should
 
be
 
ö˛uded
 
⁄ly
 
⁄˚
, 
by
 
tsd
.
h
.

4 
	#JEMALLOC_INTERNAL_TSD_TLS_H


	)

6 
__thªad
 
tsd_t
 
tsd_és
;

7 
±hªad_key_t
 
tsd_tsd
;

8 
boﬁ
 
tsd_boŸed
;

11 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


12 
	$tsd_boŸ0
() {

13 i‡(
	`±hªad_key_¸óã
(&
tsd_tsd
, &
tsd_˛ónup
) != 0) {

14  
åue
;

16 
tsd_boŸed
 = 
åue
;

17  
Ál£
;

18 
	}
}

20 
JEMALLOC_ALWAYS_INLINE
 

21 
	$tsd_boŸ1
() {

23 
	}
}

25 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


26 
	$tsd_boŸ
() {

27  
	`tsd_boŸ0
();

28 
	}
}

30 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


31 
	$tsd_boŸed_gë
() {

32  
tsd_boŸed
;

33 
	}
}

35 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


36 
	$tsd_gë_Æloˇãs
() {

37  
Ál£
;

38 
	}
}

41 
JEMALLOC_ALWAYS_INLINE
 
tsd_t
 *

42 
	$tsd_gë
(
boﬁ
 
öô
) {

43 
	`as£π
(
tsd_boŸed
);

44  &
tsd_és
;

45 
	}
}

47 
JEMALLOC_ALWAYS_INLINE
 

48 
	$tsd_£t
(
tsd_t
 *
vÆ
) {

49 
	`as£π
(
tsd_boŸed
);

50 i‡(
	`likñy
(&
tsd_és
 !
vÆ
)) {

51 
tsd_és
 = (*
vÆ
);

53 i‡(
	`±hªad_£t•ecific
(
tsd_tsd
, (*)(&
tsd_és
)) != 0) {

54 
	`mÆloc_wrôe
("<jemalloc>: Error settingÅsd.\n");

55 i‡(
›t_ab‹t
) {

56 
	`ab‹t
();

59 
	}
}

	@include/jemalloc/internal/tsd_types.h

1 #i‚de‡
JEMALLOC_INTERNAL_TSD_TYPES_H


2 
	#JEMALLOC_INTERNAL_TSD_TYPES_H


	)

4 
	#MALLOC_TSD_CLEANUPS_MAX
 2

	)

6 
tsd_s
 
	ttsd_t
;

7 
tsdn_s
 
	ttsdn_t
;

8 
	$boﬁ
 (*
	tmÆloc_tsd_˛ónup_t
)();

	@include/jemalloc/internal/tsd_win.h

1 #ifde‡
JEMALLOC_INTERNAL_TSD_WIN_H


2 #îr‹ 
This
 
fûe
 
should
 
be
 
ö˛uded
 
⁄ly
 
⁄˚
, 
by
 
tsd
.
h
.

4 
	#JEMALLOC_INTERNAL_TSD_WIN_H


	)

7 
boﬁ
 
	möôülized
;

8 
tsd_t
 
	mvÆ
;

9 } 
	ttsd_wøµî_t
;

11 
DWORD
 
tsd_tsd
;

12 
tsd_wøµî_t
 
tsd_boŸ_wøµî
;

13 
boﬁ
 
tsd_boŸed
;

16 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


17 
	$tsd_˛ónup_wøµî
() {

18 
DWORD
 
îr‹
 = 
	`GëLa°Eº‹
();

19 
tsd_wøµî_t
 *
wøµî
 = (tsd_wøµî_à*)
	`TlsGëVÆue
(
tsd_tsd
);

20 
	`SëLa°Eº‹
(
îr‹
);

22 i‡(
wøµî
 =
NULL
) {

23  
Ál£
;

26 i‡(
wøµî
->
öôülized
) {

27 
wøµî
->
öôülized
 = 
Ál£
;

28 
	`tsd_˛ónup
(&
wøµî
->
vÆ
);

29 i‡(
wøµî
->
öôülized
) {

31  
åue
;

34 
	`mÆloc_tsd_dÆloc
(
wøµî
);

35  
Ál£
;

36 
	}
}

38 
JEMALLOC_ALWAYS_INLINE
 

39 
	$tsd_wøµî_£t
(
tsd_wøµî_t
 *
wøµî
) {

40 i‡(!
	`TlsSëVÆue
(
tsd_tsd
, (*)
wøµî
)) {

41 
	`mÆloc_wrôe
("<jemalloc>: Error setting TSD\n");

42 
	`ab‹t
();

44 
	}
}

46 
JEMALLOC_ALWAYS_INLINE
 
tsd_wøµî_t
 *

47 
	$tsd_wøµî_gë
(
boﬁ
 
öô
) {

48 
DWORD
 
îr‹
 = 
	`GëLa°Eº‹
();

49 
tsd_wøµî_t
 *
wøµî
 = (tsd_wøµî_à*Ë
	`TlsGëVÆue
(
tsd_tsd
);

50 
	`SëLa°Eº‹
(
îr‹
);

52 i‡(
öô
 && 
	`u∆ikñy
(
wøµî
 =
NULL
)) {

53 
wøµî
 = (
tsd_wøµî_t
 *)

54 
	`mÆloc_tsd_mÆloc
((
tsd_wøµî_t
));

55 i‡(
wøµî
 =
NULL
) {

56 
	`mÆloc_wrôe
("<jemalloc>: Errorállocating TSD\n");

57 
	`ab‹t
();

59 
wøµî
->
öôülized
 = 
Ál£
;

61 
tsd_t
 
tsd_öôülizî
 = 
TSD_INITIALIZER
;

62 
wøµî
->
vÆ
 = 
tsd_öôülizî
;

64 
	`tsd_wøµî_£t
(
wøµî
);

66  
wøµî
;

67 
	}
}

69 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


70 
	$tsd_boŸ0
() {

71 
tsd_tsd
 = 
	`TlsAŒoc
();

72 i‡(
tsd_tsd
 =
TLS_OUT_OF_INDEXES
) {

73  
åue
;

75 
	`mÆloc_tsd_˛ónup_ªgi°î
(&
tsd_˛ónup_wøµî
);

76 
	`tsd_wøµî_£t
(&
tsd_boŸ_wøµî
);

77 
tsd_boŸed
 = 
åue
;

78  
Ál£
;

79 
	}
}

81 
JEMALLOC_ALWAYS_INLINE
 

82 
	$tsd_boŸ1
() {

83 
tsd_wøµî_t
 *
wøµî
;

84 
wøµî
 = (
tsd_wøµî_t
 *)

85 
	`mÆloc_tsd_mÆloc
((
tsd_wøµî_t
));

86 i‡(
wøµî
 =
NULL
) {

87 
	`mÆloc_wrôe
("<jemalloc>: Errorállocating TSD\n");

88 
	`ab‹t
();

90 
tsd_boŸ_wøµî
.
öôülized
 = 
Ál£
;

91 
	`tsd_˛ónup
(&
tsd_boŸ_wøµî
.
vÆ
);

92 
wøµî
->
öôülized
 = 
Ál£
;

93 
tsd_t
 
öôülizî
 = 
TSD_INITIALIZER
;

94 
wøµî
->
vÆ
 = 
öôülizî
;

95 
	`tsd_wøµî_£t
(
wøµî
);

96 
	}
}

97 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


98 
	$tsd_boŸ
() {

99 i‡(
	`tsd_boŸ0
()) {

100  
åue
;

102 
	`tsd_boŸ1
();

103  
Ál£
;

104 
	}
}

106 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


107 
	$tsd_boŸed_gë
() {

108  
tsd_boŸed
;

109 
	}
}

111 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


112 
	$tsd_gë_Æloˇãs
() {

113  
åue
;

114 
	}
}

117 
JEMALLOC_ALWAYS_INLINE
 
tsd_t
 *

118 
	$tsd_gë
(
boﬁ
 
öô
) {

119 
tsd_wøµî_t
 *
wøµî
;

121 
	`as£π
(
tsd_boŸed
);

122 
wøµî
 = 
	`tsd_wøµî_gë
(
öô
);

123 i‡(
	`tsd_gë_Æloˇãs
(Ë&& !
öô
 && 
wøµî
 =
NULL
) {

124  
NULL
;

126  &
wøµî
->
vÆ
;

127 
	}
}

129 
JEMALLOC_ALWAYS_INLINE
 

130 
	$tsd_£t
(
tsd_t
 *
vÆ
) {

131 
tsd_wøµî_t
 *
wøµî
;

133 
	`as£π
(
tsd_boŸed
);

134 
wøµî
 = 
	`tsd_wøµî_gë
(
åue
);

135 i‡(
	`likñy
(&
wøµî
->
vÆ
 != val)) {

136 
wøµî
->
vÆ
 = *(val);

138 
wøµî
->
öôülized
 = 
åue
;

139 
	}
}

	@include/jemalloc/internal/util.h

1 #i‚de‡
JEMALLOC_INTERNAL_UTIL_H


2 
	#JEMALLOC_INTERNAL_UTIL_H


	)

4 
	#UTIL_INLINE
 
ölöe


	)

7 #i‚de‡
JEMALLOC_ALLOC_JUNK


8 
	#JEMALLOC_ALLOC_JUNK
 ((
uöt8_t
)0xa5)

	)

10 #i‚de‡
JEMALLOC_FREE_JUNK


11 
	#JEMALLOC_FREE_JUNK
 ((
uöt8_t
)0x5a)

	)

18 
	#JEMALLOC_ARG_CONCAT
(...Ë
__VA_ARGS__


	)

21 
	#STRINGIFY_HELPER
(
x
Ë#x

	)

22 
	#STRINGIFY
(
x
Ë
	`STRINGIFY_HELPER
(x)

	)

29 
	#JEMALLOC_CC_SILENCE_INIT
(
v
Ë
	)
v

31 #ifde‡
__GNUC__


32 
	#likñy
(
x
Ë
	`__buûtö_ex≥˘
(!!(x), 1)

	)

33 
	#u∆ikñy
(
x
Ë
	`__buûtö_ex≥˘
(!!(x), 0)

	)

35 
	#likñy
(
x
Ë!!(x)

	)

36 
	#u∆ikñy
(
x
Ë!!(x)

	)

39 #i‡!
deföed
(
JEMALLOC_INTERNAL_UNREACHABLE
)

40 #îr‹ 
JEMALLOC_INTERNAL_UNREACHABLE
 
should
 
have
 
bìn
 
deföed
 
by
 
c⁄figuª


43 
	#uƒóchabÀ
(Ë
	`JEMALLOC_INTERNAL_UNREACHABLE
()

	)

46 
UTIL_INLINE
 

47 
	$£t_î∫o
(
î∫um
) {

48 #ifde‡
_WIN32


49 
	`SëLa°Eº‹
(
î∫um
);

51 
î∫o
 = 
î∫um
;

53 
	}
}

56 
UTIL_INLINE
 

57 
	$gë_î∫o
() {

58 #ifde‡
_WIN32


59  
	`GëLa°Eº‹
();

61  
î∫o
;

63 
	}
}

65 #unde‡
UTIL_INLINE


	@include/jemalloc/internal/witness.h

1 #i‚de‡
JEMALLOC_INTERNAL_WITNESS_H


2 
	#JEMALLOC_INTERNAL_WITNESS_H


	)

4 
	~"jemÆloc/öã∫Æ/ql.h
"

15 
	#WITNESS_RANK_OMIT
 0U

	)

17 
	#WITNESS_RANK_MIN
 1U

	)

19 
	#WITNESS_RANK_INIT
 1U

	)

20 
	#WITNESS_RANK_CTL
 1U

	)

21 
	#WITNESS_RANK_TCACHES
 2U

	)

22 
	#WITNESS_RANK_ARENAS
 3U

	)

24 
	#WITNESS_RANK_BACKGROUND_THREAD_GLOBAL
 4U

	)

26 
	#WITNESS_RANK_PROF_DUMP
 5U

	)

27 
	#WITNESS_RANK_PROF_BT2GCTX
 6U

	)

28 
	#WITNESS_RANK_PROF_TDATAS
 7U

	)

29 
	#WITNESS_RANK_PROF_TDATA
 8U

	)

30 
	#WITNESS_RANK_PROF_GCTX
 9U

	)

32 
	#WITNESS_RANK_BACKGROUND_THREAD
 10U

	)

40 
	#WITNESS_RANK_CORE
 11U

	)

42 
	#WITNESS_RANK_DECAY
 11U

	)

43 
	#WITNESS_RANK_TCACHE_QL
 12U

	)

44 
	#WITNESS_RANK_EXTENT_GROW
 13U

	)

45 
	#WITNESS_RANK_EXTENTS
 14U

	)

46 
	#WITNESS_RANK_EXTENT_AVAIL
 15U

	)

48 
	#WITNESS_RANK_EXTENT_POOL
 16U

	)

49 
	#WITNESS_RANK_RTREE
 17U

	)

50 
	#WITNESS_RANK_BASE
 18U

	)

51 
	#WITNESS_RANK_ARENA_LARGE
 19U

	)

53 
	#WITNESS_RANK_LEAF
 0xffffffffU

	)

54 
	#WITNESS_RANK_BIN
 
WITNESS_RANK_LEAF


	)

55 
	#WITNESS_RANK_ARENA_STATS
 
WITNESS_RANK_LEAF


	)

56 
	#WITNESS_RANK_DSS
 
WITNESS_RANK_LEAF


	)

57 
	#WITNESS_RANK_PROF_ACTIVE
 
WITNESS_RANK_LEAF


	)

58 
	#WITNESS_RANK_PROF_ACCUM
 
WITNESS_RANK_LEAF


	)

59 
	#WITNESS_RANK_PROF_DUMP_SEQ
 
WITNESS_RANK_LEAF


	)

60 
	#WITNESS_RANK_PROF_GDUMP
 
WITNESS_RANK_LEAF


	)

61 
	#WITNESS_RANK_PROF_NEXT_THR_UID
 
WITNESS_RANK_LEAF


	)

62 
	#WITNESS_RANK_PROF_THREAD_ACTIVE_INIT
 
WITNESS_RANK_LEAF


	)

67 #i‡
deföed
(
JEMALLOC_DEBUG
)

68 
	#WITNESS_INITIALIZER
(
«me
, 
ønk
Ë{«me,Ñ™k, 
NULL
, NULL, {NULL, NULL}}

	)

70 
	#WITNESS_INITIALIZER
(
«me
, 
ønk
)

	)

73 
wô√ss_s
 
	twô√ss_t
;

74 
	twô√ss_ønk_t
;

75 
	$ql_hód
(
	twô√ss_t
Ë
	twô√ss_li°_t
;

76 
	twô√ss_comp_t
 (c⁄° 
	twô√ss_t
 *, *, const witness_t *,

79 
	swô√ss_s
 {

81 c⁄° *
«me
;

87 
wô√ss_ønk_t
 
ønk
;

94 
wô√ss_comp_t
 *
comp
;

97 *
›aque
;

100 
	`ql_ñm
(
wô√ss_t
Ë
lök
;

106 
wô√ss_tsd_s
 
	twô√ss_tsd_t
;

107 
	swô√ss_tsd_s
 {

108 
wô√ss_li°_t
 
wô√s£s
;

109 
boﬁ
 
f‹kög
;

112 
	#WITNESS_TSD_INITIALIZER
 { 
	`ql_hód_öôülizî
(
wô√s£s
), 
Ál£
 
	}

	)
}

113 
	#WITNESS_TSDN_NULL
 ((
wô√ss_tsdn_t
 *)0)

	)

118 
wô√ss_tsdn_s
 
	twô√ss_tsdn_t
;

119 
	swô√ss_tsdn_s
 {

120 
wô√ss_tsd_t
 
	mwô√ss_tsd
;

123 
JEMALLOC_ALWAYS_INLINE
 
wô√ss_tsdn_t
 *

124 
	$wô√ss_tsd_tsdn
(
wô√ss_tsd_t
 *
wô√ss_tsd
) {

125  (
wô√ss_tsdn_t
 *)
wô√ss_tsd
;

126 
	}
}

128 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


129 
	$wô√ss_tsdn_nuŒ
(
wô√ss_tsdn_t
 *
wô√ss_tsdn
) {

130  
wô√ss_tsdn
 =
NULL
;

131 
	}
}

133 
JEMALLOC_ALWAYS_INLINE
 
wô√ss_tsd_t
 *

134 
	$wô√ss_tsdn_tsd
(
wô√ss_tsdn_t
 *
wô√ss_tsdn
) {

135 
	`as£π
(!
	`wô√ss_tsdn_nuŒ
(
wô√ss_tsdn
));

136  &
wô√ss_tsdn
->
wô√ss_tsd
;

137 
	}
}

142 
wô√ss_öô
(
wô√ss_t
 *
wô√ss
, c⁄° *
«me
, 
wô√ss_ønk_t
 
ønk
,

143 
wô√ss_comp_t
 *
comp
, *
›aque
);

145 (
	twô√ss_lock_îr‹_t
)(c⁄° 
	twô√ss_li°_t
 *, c⁄° 
	twô√ss_t
 *);

146 
wô√ss_lock_îr‹_t
 *
JET_MUTABLE
 
wô√ss_lock_îr‹
;

148 (
	twô√ss_ow√r_îr‹_t
)(c⁄° 
	twô√ss_t
 *);

149 
wô√ss_ow√r_îr‹_t
 *
JET_MUTABLE
 
wô√ss_ow√r_îr‹
;

151 (
	twô√ss_nŸ_ow√r_îr‹_t
)(c⁄° 
	twô√ss_t
 *);

152 
wô√ss_nŸ_ow√r_îr‹_t
 *
JET_MUTABLE
 
wô√ss_nŸ_ow√r_îr‹
;

154 (
	twô√ss_dïth_îr‹_t
)(c⁄° 
	twô√ss_li°_t
 *,

155 
	twô√ss_ønk_t
 
	tønk_ö˛usive
, 
	tdïth
);

156 
wô√ss_dïth_îr‹_t
 *
JET_MUTABLE
 
wô√ss_dïth_îr‹
;

158 
	`wô√s£s_˛ónup
(
wô√ss_tsd_t
 *
wô√ss_tsd
);

159 
	`wô√ss_¥ef‹k
(
wô√ss_tsd_t
 *
wô√ss_tsd
);

160 
	`wô√ss_po°f‹k_∑ª¡
(
wô√ss_tsd_t
 *
wô√ss_tsd
);

161 
	`wô√ss_po°f‹k_chûd
(
wô√ss_tsd_t
 *
wô√ss_tsd
);

164 
ölöe
 
boﬁ


165 
	$wô√ss_ow√r
(
wô√ss_tsd_t
 *
wô√ss_tsd
, c⁄° 
wô√ss_t
 *
wô√ss
) {

166 
wô√ss_li°_t
 *
wô√s£s
;

167 
wô√ss_t
 *
w
;

169 
	`ˇs£π
(
c⁄fig_debug
);

171 
wô√s£s
 = &
wô√ss_tsd
->witnesses;

172 
	`ql_f‹óch
(
w
, 
wô√s£s
, 
lök
) {

173 i‡(
w
 =
wô√ss
) {

174  
åue
;

178  
Ál£
;

179 
	}
}

181 
ölöe
 

182 
	$wô√ss_as£π_ow√r
(
wô√ss_tsdn_t
 *
wô√ss_tsdn
, c⁄° 
wô√ss_t
 *
wô√ss
) {

183 
wô√ss_tsd_t
 *
wô√ss_tsd
;

185 i‡(!
c⁄fig_debug
) {

189 i‡(
	`wô√ss_tsdn_nuŒ
(
wô√ss_tsdn
)) {

192 
wô√ss_tsd
 = 
	`wô√ss_tsdn_tsd
(
wô√ss_tsdn
);

193 i‡(
wô√ss
->
ønk
 =
WITNESS_RANK_OMIT
) {

197 i‡(
	`wô√ss_ow√r
(
wô√ss_tsd
, 
wô√ss
)) {

200 
	`wô√ss_ow√r_îr‹
(
wô√ss
);

201 
	}
}

203 
ölöe
 

204 
	$wô√ss_as£π_nŸ_ow√r
(
wô√ss_tsdn_t
 *
wô√ss_tsdn
,

205 c⁄° 
wô√ss_t
 *
wô√ss
) {

206 
wô√ss_tsd_t
 *
wô√ss_tsd
;

207 
wô√ss_li°_t
 *
wô√s£s
;

208 
wô√ss_t
 *
w
;

210 i‡(!
c⁄fig_debug
) {

214 i‡(
	`wô√ss_tsdn_nuŒ
(
wô√ss_tsdn
)) {

217 
wô√ss_tsd
 = 
	`wô√ss_tsdn_tsd
(
wô√ss_tsdn
);

218 i‡(
wô√ss
->
ønk
 =
WITNESS_RANK_OMIT
) {

222 
wô√s£s
 = &
wô√ss_tsd
->witnesses;

223 
	`ql_f‹óch
(
w
, 
wô√s£s
, 
lök
) {

224 i‡(
w
 =
wô√ss
) {

225 
	`wô√ss_nŸ_ow√r_îr‹
(
wô√ss
);

228 
	}
}

230 
ölöe
 

231 
	$wô√ss_as£π_dïth_to_ønk
(
wô√ss_tsdn_t
 *
wô√ss_tsdn
,

232 
wô√ss_ønk_t
 
ønk_ö˛usive
, 
dïth
) {

233 
wô√ss_tsd_t
 *
wô√ss_tsd
;

234 
d
;

235 
wô√ss_li°_t
 *
wô√s£s
;

236 
wô√ss_t
 *
w
;

238 i‡(!
c⁄fig_debug
) {

242 i‡(
	`wô√ss_tsdn_nuŒ
(
wô√ss_tsdn
)) {

245 
wô√ss_tsd
 = 
	`wô√ss_tsdn_tsd
(
wô√ss_tsdn
);

247 
d
 = 0;

248 
wô√s£s
 = &
wô√ss_tsd
->witnesses;

249 
w
 = 
	`ql_œ°
(
wô√s£s
, 
lök
);

250 i‡(
w
 !
NULL
) {

251 
	`ql_ªvî£_f‹óch
(
w
, 
wô√s£s
, 
lök
) {

252 i‡(
w
->
ønk
 < 
ønk_ö˛usive
) {

255 
d
++;

258 i‡(
d
 !
dïth
) {

259 
	`wô√ss_dïth_îr‹
(
wô√s£s
, 
ønk_ö˛usive
, 
dïth
);

261 
	}
}

263 
ölöe
 

264 
	$wô√ss_as£π_dïth
(
wô√ss_tsdn_t
 *
wô√ss_tsdn
, 
dïth
) {

265 
	`wô√ss_as£π_dïth_to_ønk
(
wô√ss_tsdn
, 
WITNESS_RANK_MIN
, 
dïth
);

266 
	}
}

268 
ölöe
 

269 
	$wô√ss_as£π_lockÀss
(
wô√ss_tsdn_t
 *
wô√ss_tsdn
) {

270 
	`wô√ss_as£π_dïth
(
wô√ss_tsdn
, 0);

271 
	}
}

273 
ölöe
 

274 
	$wô√ss_lock
(
wô√ss_tsdn_t
 *
wô√ss_tsdn
, 
wô√ss_t
 *
wô√ss
) {

275 
wô√ss_tsd_t
 *
wô√ss_tsd
;

276 
wô√ss_li°_t
 *
wô√s£s
;

277 
wô√ss_t
 *
w
;

279 i‡(!
c⁄fig_debug
) {

283 i‡(
	`wô√ss_tsdn_nuŒ
(
wô√ss_tsdn
)) {

286 
wô√ss_tsd
 = 
	`wô√ss_tsdn_tsd
(
wô√ss_tsdn
);

287 i‡(
wô√ss
->
ønk
 =
WITNESS_RANK_OMIT
) {

291 
	`wô√ss_as£π_nŸ_ow√r
(
wô√ss_tsdn
, 
wô√ss
);

293 
wô√s£s
 = &
wô√ss_tsd
->witnesses;

294 
w
 = 
	`ql_œ°
(
wô√s£s
, 
lök
);

295 i‡(
w
 =
NULL
) {

297 } i‡(
wô√ss_tsd
->
f‹kög
 && 
w
->
ønk
 <
wô√ss
->rank) {

299 } i‡(
w
->
ønk
 > 
wô√ss
->rank) {

301 
	`wô√ss_lock_îr‹
(
wô√s£s
, 
wô√ss
);

302 } i‡(
w
->
ønk
 =
wô√ss
->ønk && (w->
comp
 =
NULL
 || w->comp !=

303 
wô√ss
->
comp
 || 
w
->
	`comp
(w, w->
›aque
, witness, witness->opaque) >

309 
	`wô√ss_lock_îr‹
(
wô√s£s
, 
wô√ss
);

312 
	`ql_ñm_√w
(
wô√ss
, 
lök
);

313 
	`ql_èû_ö£π
(
wô√s£s
, 
wô√ss
, 
lök
);

314 
	}
}

316 
ölöe
 

317 
	$wô√ss_u∆ock
(
wô√ss_tsdn_t
 *
wô√ss_tsdn
, 
wô√ss_t
 *
wô√ss
) {

318 
wô√ss_tsd_t
 *
wô√ss_tsd
;

319 
wô√ss_li°_t
 *
wô√s£s
;

321 i‡(!
c⁄fig_debug
) {

325 i‡(
	`wô√ss_tsdn_nuŒ
(
wô√ss_tsdn
)) {

328 
wô√ss_tsd
 = 
	`wô√ss_tsdn_tsd
(
wô√ss_tsdn
);

329 i‡(
wô√ss
->
ønk
 =
WITNESS_RANK_OMIT
) {

338 i‡(
	`wô√ss_ow√r
(
wô√ss_tsd
, 
wô√ss
)) {

339 
wô√s£s
 = &
wô√ss_tsd
->witnesses;

340 
	`ql_ªmove
(
wô√s£s
, 
wô√ss
, 
lök
);

342 
	`wô√ss_as£π_ow√r
(
wô√ss_tsdn
, 
wô√ss
);

344 
	}
}

	@include/jemalloc/jemalloc.h

1 #i‚de‡
JEMALLOC_H_


2 
	#JEMALLOC_H_


	)

3 #ifde‡
__˝lu•lus


8 
	#JEMALLOC_HAVE_ATTR


	)

11 
	#JEMALLOC_HAVE_ATTR_ALLOC_SIZE


	)

14 
	#JEMALLOC_HAVE_ATTR_FORMAT_GNU_PRINTF


	)

17 
	#JEMALLOC_HAVE_ATTR_FORMAT_PRINTF


	)

23 
	#JEMALLOC_OVERRIDE_MEMALIGN


	)

24 
	#JEMALLOC_OVERRIDE_VALLOC


	)

33 
	#JEMALLOC_USABLE_SIZE_CONST


	)

40 
	#JEMALLOC_USE_CXX_THROW


	)

42 #ifde‡
_MSC_VER


43 #ifde‡
_WIN64


44 
	#LG_SIZEOF_PTR_WIN
 3

	)

46 
	#LG_SIZEOF_PTR_WIN
 2

	)

51 
	#LG_SIZEOF_PTR
 3

	)

58 #i‚de‡
JEMALLOC_NO_RENAME


59 
	#je_Æig√d_Æloc
 
Æig√d_Æloc


	)

60 
	#je_ˇŒoc
 
ˇŒoc


	)

61 
	#je_dÆlocx
 
dÆlocx


	)

62 
	#je_‰ì
 
‰ì


	)

63 
	#je_mÆl˘l
 
mÆl˘l


	)

64 
	#je_mÆl˘lbymib
 
mÆl˘lbymib


	)

65 
	#je_mÆl˘ amëomib
 
mÆl˘ amëomib


	)

66 
	#je_mÆloc
 
mÆloc


	)

67 
	#je_mÆloc_c⁄f
 
mÆloc_c⁄f


	)

68 
	#je_mÆloc_mesßge
 
mÆloc_mesßge


	)

69 
	#je_mÆloc_°©s_¥öt
 
mÆloc_°©s_¥öt


	)

70 
	#je_mÆloc_ußbÀ_size
 
mÆloc_ußbÀ_size


	)

71 
	#je_mÆlocx
 
mÆlocx


	)

72 
	#je_«Œocx
 
«Œocx


	)

73 
	#je_posix_memÆign
 
posix_memÆign


	)

74 
	#je_øŒocx
 
øŒocx


	)

75 
	#je_ªÆloc
 
ªÆloc


	)

76 
	#je_ßŒocx
 
ßŒocx


	)

77 
	#je_sdÆlocx
 
sdÆlocx


	)

78 
	#je_xÆlocx
 
xÆlocx


	)

79 
	#je_memÆign
 
memÆign


	)

80 
	#je_vÆloc
 
vÆloc


	)

83 
	~<°dlib.h
>

84 
	~<°dboﬁ.h
>

85 
	~<°döt.h
>

86 
	~<limôs.h
>

87 
	~<°rögs.h
>

89 
	#JEMALLOC_VERSION
 "5.0.1-101-g26b1c1398264dec25bf998f6bec21799ad4513da"

	)

90 
	#JEMALLOC_VERSION_MAJOR
 5

	)

91 
	#JEMALLOC_VERSION_MINOR
 0

	)

92 
	#JEMALLOC_VERSION_BUGFIX
 1

	)

93 
	#JEMALLOC_VERSION_NREV
 101

	)

94 
	#JEMALLOC_VERSION_GID
 "26b1c1398264dec25bf998f6bec21799ad4513da"

	)

96 
	#MALLOCX_LG_ALIGN
(
œ
Ë(()÷a))

	)

97 #i‡
LG_SIZEOF_PTR
 == 2

98 
	#MALLOCX_ALIGN
(
a
Ë(()(
	`ffs
(()◊))-1))

	)

100 
	#MALLOCX_ALIGN
(
a
) \

101 (()(((
size_t
)(
a
Ë< (size_t)
INT_MAX
Ë? 
	`ffs
(()(a))-1 : \

102 
	`ffs
(()(((
size_t
)(
a
))>>32))+31))

	)

104 
	#MALLOCX_ZERO
 (()0x40)

	)

109 
	#MALLOCX_TCACHE
(
tc
Ë(()((—c)+2Ë<< 8))

	)

110 
	#MALLOCX_TCACHE_NONE
 
	`MALLOCX_TCACHE
(-1)

	)

114 
	#MALLOCX_ARENA
(
a
Ë(((()◊))+1Ë<< 20)

	)

128 
	#MALLCTL_ARENAS_ALL
 4096

	)

133 
	#MALLCTL_ARENAS_DESTROYED
 4097

	)

135 #i‡
deföed
(
__˝lu•lus
Ë&& deföed(
JEMALLOC_USE_CXX_THROW
)

136 
	#JEMALLOC_CXX_THROW
 
	`throw
()

	)

138 
	#JEMALLOC_CXX_THROW


	)

141 #i‡
deföed
(
_MSC_VER
)

142 
	#JEMALLOC_ATTR
(
s
)

	)

143 
	#JEMALLOC_ALIGNED
(
s
Ë
	`__de˛•ec
(
	`Æign
(s))

	)

144 
	#JEMALLOC_ALLOC_SIZE
(
s
)

	)

145 
	#JEMALLOC_ALLOC_SIZE2
(
s1
, 
s2
)

	)

146 #i‚de‡
JEMALLOC_EXPORT


147 #ifde‡
DLLEXPORT


148 
	#JEMALLOC_EXPORT
 
	`__de˛•ec
(
dŒexp‹t
)

	)

150 
	#JEMALLOC_EXPORT
 
	`__de˛•ec
(
dŒimp‹t
)

	)

153 
	#JEMALLOC_FORMAT_PRINTF
(
s
, 
i
)

	)

154 
	#JEMALLOC_NOINLINE
 
	`__de˛•ec
(
noölöe
)

	)

155 #ifde‡
__˝lu•lus


156 
	#JEMALLOC_NOTHROW
 
	`__de˛•ec
(
nŸhrow
)

	)

158 
	#JEMALLOC_NOTHROW


	)

160 
	#JEMALLOC_SECTION
(
s
Ë
	`__de˛•ec
(
	`Æloˇã
(s))

	)

161 
	#JEMALLOC_RESTRICT_RETURN
 
	`__de˛•ec
(
ª°ri˘
)

	)

162 #i‡
_MSC_VER
 >1900 && !
deföed
(
__EDG__
)

163 
	#JEMALLOC_ALLOCATOR
 
	`__de˛•ec
(
Æloˇt‹
)

	)

165 
	#JEMALLOC_ALLOCATOR


	)

167 #ñi‡
deföed
(
JEMALLOC_HAVE_ATTR
)

168 
	#JEMALLOC_ATTR
(
s
Ë
	`__©åibuã__
((s))

	)

169 
	#JEMALLOC_ALIGNED
(
s
Ë
	`JEMALLOC_ATTR
(
	`Æig√d
(s))

	)

170 #ifde‡
JEMALLOC_HAVE_ATTR_ALLOC_SIZE


171 
	#JEMALLOC_ALLOC_SIZE
(
s
Ë
	`JEMALLOC_ATTR
(
	`Æloc_size
(s))

	)

172 
	#JEMALLOC_ALLOC_SIZE2
(
s1
, 
s2
Ë
	`JEMALLOC_ATTR
(
	`Æloc_size
(s1, s2))

	)

174 
	#JEMALLOC_ALLOC_SIZE
(
s
)

	)

175 
	#JEMALLOC_ALLOC_SIZE2
(
s1
, 
s2
)

	)

177 #i‚de‡
JEMALLOC_EXPORT


178 
	#JEMALLOC_EXPORT
 
	`JEMALLOC_ATTR
(
	`visibûôy
("deÁu…"))

	)

180 #ifde‡
JEMALLOC_HAVE_ATTR_FORMAT_GNU_PRINTF


181 
	#JEMALLOC_FORMAT_PRINTF
(
s
, 
i
Ë
	`JEMALLOC_ATTR
(
	`f‹m©
(
gnu_¥ötf
, s, i))

	)

182 #ñi‡
deföed
(
JEMALLOC_HAVE_ATTR_FORMAT_PRINTF
)

183 
	#JEMALLOC_FORMAT_PRINTF
(
s
, 
i
Ë
	`JEMALLOC_ATTR
(
	`f‹m©
(
¥ötf
, s, i))

	)

185 
	#JEMALLOC_FORMAT_PRINTF
(
s
, 
i
)

	)

187 
	#JEMALLOC_NOINLINE
 
	`JEMALLOC_ATTR
(
noölöe
)

	)

188 
	#JEMALLOC_NOTHROW
 
	`JEMALLOC_ATTR
(
nŸhrow
)

	)

189 
	#JEMALLOC_SECTION
(
s
Ë
	`JEMALLOC_ATTR
(
	`£˘i⁄
(s))

	)

190 
	#JEMALLOC_RESTRICT_RETURN


	)

191 
	#JEMALLOC_ALLOCATOR


	)

193 
	#JEMALLOC_ATTR
(
s
)

	)

194 
	#JEMALLOC_ALIGNED
(
s
)

	)

195 
	#JEMALLOC_ALLOC_SIZE
(
s
)

	)

196 
	#JEMALLOC_ALLOC_SIZE2
(
s1
, 
s2
)

	)

197 
	#JEMALLOC_EXPORT


	)

198 
	#JEMALLOC_FORMAT_PRINTF
(
s
, 
i
)

	)

199 
	#JEMALLOC_NOINLINE


	)

200 
	#JEMALLOC_NOTHROW


	)

201 
	#JEMALLOC_SECTION
(
s
)

	)

202 
	#JEMALLOC_RESTRICT_RETURN


	)

203 
	#JEMALLOC_ALLOCATOR


	)

211 
JEMALLOC_EXPORT
 c⁄° *
je_mÆloc_c⁄f
;

212 
JEMALLOC_EXPORT
 (*
je_mÆloc_mesßge
)(*
cb›aque
,

213 c⁄° *
s
);

215 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


216 
JEMALLOC_NOTHROW
 *
je_mÆloc
(
size_t
 
size
)

217 
JEMALLOC_CXX_THROW
 
JEMALLOC_ATTR
(
mÆloc
Ë
JEMALLOC_ALLOC_SIZE
(1);

218 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


219 
JEMALLOC_NOTHROW
 *
je_ˇŒoc
(
size_t
 
num
, size_à
size
)

220 
JEMALLOC_CXX_THROW
 
JEMALLOC_ATTR
(
mÆloc
Ë
JEMALLOC_ALLOC_SIZE2
(1, 2);

221 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
je_posix_memÆign
(**
mem±r
,

222 
size_t
 
Æignmít
, size_à
size
Ë
JEMALLOC_CXX_THROW
 
JEMALLOC_ATTR
(
n⁄nuŒ
(1));

223 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


224 
JEMALLOC_NOTHROW
 *
je_Æig√d_Æloc
(
size_t
 
Æignmít
,

225 
size_t
 
size
Ë
JEMALLOC_CXX_THROW
 
JEMALLOC_ATTR
(
mÆloc
)

226 
JEMALLOC_ALLOC_SIZE
(2);

227 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


228 
JEMALLOC_NOTHROW
 *
je_ªÆloc
(*
±r
, 
size_t
 
size
)

229 
JEMALLOC_CXX_THROW
 
JEMALLOC_ALLOC_SIZE
(2);

230 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
je_‰ì
(*
±r
)

231 
	gJEMALLOC_CXX_THROW
;

233 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


234 
JEMALLOC_NOTHROW
 *
je_mÆlocx
(
size_t
 
size
, 
Êags
)

235 
JEMALLOC_ATTR
(
mÆloc
Ë
JEMALLOC_ALLOC_SIZE
(1);

236 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


237 
JEMALLOC_NOTHROW
 *
je_øŒocx
(*
±r
, 
size_t
 
size
,

238 
Êags
Ë
JEMALLOC_ALLOC_SIZE
(2);

239 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW
 
je_xÆlocx
(*
±r
, size_à
size
,

240 
size_t
 
exåa
, 
Êags
);

241 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW
 
je_ßŒocx
(c⁄° *
±r
,

242 
Êags
Ë
JEMALLOC_ATTR
(
puª
);

243 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
je_dÆlocx
(*
±r
, 
Êags
);

244 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
je_sdÆlocx
(*
±r
, 
size_t
 
size
,

245 
Êags
);

246 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW
 
je_«Œocx
(size_à
size
, 
Êags
)

247 
JEMALLOC_ATTR
(
puª
);

249 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
je_mÆl˘l
(c⁄° *
«me
,

250 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
);

251 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
je_mÆl˘ amëomib
(c⁄° *
«me
,

252 
size_t
 *
mibp
, size_à*
mibÀ≈
);

253 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
je_mÆl˘lbymib
(c⁄° 
size_t
 *
mib
,

254 
size_t
 
mibÀn
, *
ﬁdp
, size_à*
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
);

255 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
je_mÆloc_°©s_¥öt
(

256 (*
wrôe_cb
)(*, c⁄° *), *
je_cb›aque
,

257 c⁄° *
›ts
);

258 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW
 
je_mÆloc_ußbÀ_size
(

259 
JEMALLOC_USABLE_SIZE_CONST
 *
±r
Ë
	gJEMALLOC_CXX_THROW
;

261 #ifde‡
JEMALLOC_OVERRIDE_MEMALIGN


262 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


263 
JEMALLOC_NOTHROW
 *
je_memÆign
(
size_t
 
Æignmít
, size_à
size
)

264 
JEMALLOC_CXX_THROW
 
JEMALLOC_ATTR
(
mÆloc
);

267 #ifde‡
JEMALLOC_OVERRIDE_VALLOC


268 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


269 
JEMALLOC_NOTHROW
 *
je_vÆloc
(
size_t
 
size
Ë
JEMALLOC_CXX_THROW


270 
JEMALLOC_ATTR
(
mÆloc
);

273 
exã¡_hooks_s
 
	texã¡_hooks_t
;

280 *(
	texã¡_Æloc_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, size_t, 
	tboﬁ
 *,

281 
	tboﬁ
 *, );

288 
boﬁ
 (
	texã¡_dÆloc_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, 
	tboﬁ
,

296 (
	gexã¡_de°roy_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, 
	tboﬁ
,

304 
boﬁ
 (
	texã¡_commô_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, size_t, size_t,

312 
boﬁ
 (
	texã¡_decommô_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, size_t,

313 
	tsize_t
, );

320 
boﬁ
 (
	texã¡_purge_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, size_t, size_t,

328 
boﬁ
 (
	texã¡_•lô_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, size_t, size_t,

329 
	tboﬁ
, );

336 
boﬁ
 (
	texã¡_mîge_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, *, size_t,

337 
	tboﬁ
, );

339 
	sexã¡_hooks_s
 {

340 
exã¡_Æloc_t
 *
	gÆloc
;

341 
exã¡_dÆloc_t
 *
	gdÆloc
;

342 
exã¡_de°roy_t
 *
	gde°roy
;

343 
exã¡_commô_t
 *
	gcommô
;

344 
exã¡_decommô_t
 *
	gdecommô
;

345 
exã¡_purge_t
 *
	gpurge_œzy
;

346 
exã¡_purge_t
 *
	gpurge_f‹˚d
;

347 
exã¡_•lô_t
 *
	g•lô
;

348 
exã¡_mîge_t
 *
	gmîge
;

358 #ifde‡
JEMALLOC_MANGLE


359 #i‚de‡
JEMALLOC_NO_DEMANGLE


360 
	#JEMALLOC_NO_DEMANGLE


	)

362 
	#Æig√d_Æloc
 
je_Æig√d_Æloc


	)

363 
	#ˇŒoc
 
je_ˇŒoc


	)

364 
	#dÆlocx
 
je_dÆlocx


	)

365 
	#‰ì
 
je_‰ì


	)

366 
	#mÆl˘l
 
je_mÆl˘l


	)

367 
	#mÆl˘lbymib
 
je_mÆl˘lbymib


	)

368 
	#mÆl˘ amëomib
 
je_mÆl˘ amëomib


	)

369 
	#mÆloc
 
je_mÆloc


	)

370 
	#mÆloc_c⁄f
 
je_mÆloc_c⁄f


	)

371 
	#mÆloc_mesßge
 
je_mÆloc_mesßge


	)

372 
	#mÆloc_°©s_¥öt
 
je_mÆloc_°©s_¥öt


	)

373 
	#mÆloc_ußbÀ_size
 
je_mÆloc_ußbÀ_size


	)

374 
	#mÆlocx
 
je_mÆlocx


	)

375 
	#«Œocx
 
je_«Œocx


	)

376 
	#posix_memÆign
 
je_posix_memÆign


	)

377 
	#øŒocx
 
je_øŒocx


	)

378 
	#ªÆloc
 
je_ªÆloc


	)

379 
	#ßŒocx
 
je_ßŒocx


	)

380 
	#sdÆlocx
 
je_sdÆlocx


	)

381 
	#xÆlocx
 
je_xÆlocx


	)

382 
	#memÆign
 
je_memÆign


	)

383 
	#vÆloc
 
je_vÆloc


	)

393 #i‚de‡
JEMALLOC_NO_DEMANGLE


394 #unde‡
je_Æig√d_Æloc


395 #unde‡
je_ˇŒoc


396 #unde‡
je_dÆlocx


397 #unde‡
je_‰ì


398 #unde‡
je_mÆl˘l


399 #unde‡
je_mÆl˘lbymib


400 #unde‡
je_mÆl˘ amëomib


401 #unde‡
je_mÆloc


402 #unde‡
je_mÆloc_c⁄f


403 #unde‡
je_mÆloc_mesßge


404 #unde‡
je_mÆloc_°©s_¥öt


405 #unde‡
je_mÆloc_ußbÀ_size


406 #unde‡
je_mÆlocx


407 #unde‡
je_«Œocx


408 #unde‡
je_posix_memÆign


409 #unde‡
je_øŒocx


410 #unde‡
je_ªÆloc


411 #unde‡
je_ßŒocx


412 #unde‡
je_sdÆlocx


413 #unde‡
je_xÆlocx


414 #unde‡
je_memÆign


415 #unde‡
je_vÆloc


418 #ifde‡
__˝lu•lus


	@include/jemalloc/jemalloc_defs.h

3 
	#JEMALLOC_HAVE_ATTR


	)

6 
	#JEMALLOC_HAVE_ATTR_ALLOC_SIZE


	)

9 
	#JEMALLOC_HAVE_ATTR_FORMAT_GNU_PRINTF


	)

12 
	#JEMALLOC_HAVE_ATTR_FORMAT_PRINTF


	)

18 
	#JEMALLOC_OVERRIDE_MEMALIGN


	)

19 
	#JEMALLOC_OVERRIDE_VALLOC


	)

28 
	#JEMALLOC_USABLE_SIZE_CONST


	)

35 
	#JEMALLOC_USE_CXX_THROW


	)

37 #ifde‡
_MSC_VER


38 #ifde‡
_WIN64


39 
	#LG_SIZEOF_PTR_WIN
 3

	)

41 
	#LG_SIZEOF_PTR_WIN
 2

	)

46 
	#LG_SIZEOF_PTR
 3

	)

	@include/jemalloc/jemalloc_macros.h

1 
	~<°dlib.h
>

2 
	~<°dboﬁ.h
>

3 
	~<°döt.h
>

4 
	~<limôs.h
>

5 
	~<°rögs.h
>

7 
	#JEMALLOC_VERSION
 "5.0.1-101-g26b1c1398264dec25bf998f6bec21799ad4513da"

	)

8 
	#JEMALLOC_VERSION_MAJOR
 5

	)

9 
	#JEMALLOC_VERSION_MINOR
 0

	)

10 
	#JEMALLOC_VERSION_BUGFIX
 1

	)

11 
	#JEMALLOC_VERSION_NREV
 101

	)

12 
	#JEMALLOC_VERSION_GID
 "26b1c1398264dec25bf998f6bec21799ad4513da"

	)

14 
	#MALLOCX_LG_ALIGN
(
œ
Ë(()÷a))

	)

15 #i‡
LG_SIZEOF_PTR
 == 2

16 
	#MALLOCX_ALIGN
(
a
Ë(()(
	`ffs
(()◊))-1))

	)

18 
	#MALLOCX_ALIGN
(
a
) \

19 (()(((
size_t
)(
a
Ë< (size_t)
INT_MAX
Ë? 
	`ffs
(()(a))-1 : \

20 
	`ffs
(()(((
size_t
)(
a
))>>32))+31))

	)

22 
	#MALLOCX_ZERO
 (()0x40)

	)

27 
	#MALLOCX_TCACHE
(
tc
Ë(()((—c)+2Ë<< 8))

	)

28 
	#MALLOCX_TCACHE_NONE
 
	`MALLOCX_TCACHE
(-1)

	)

32 
	#MALLOCX_ARENA
(
a
Ë(((()◊))+1Ë<< 20)

	)

46 
	#MALLCTL_ARENAS_ALL
 4096

	)

51 
	#MALLCTL_ARENAS_DESTROYED
 4097

	)

53 #i‡
deföed
(
__˝lu•lus
Ë&& deföed(
JEMALLOC_USE_CXX_THROW
)

54 
	#JEMALLOC_CXX_THROW
 
	`throw
()

	)

56 
	#JEMALLOC_CXX_THROW


	)

59 #i‡
deföed
(
_MSC_VER
)

60 
	#JEMALLOC_ATTR
(
s
)

	)

61 
	#JEMALLOC_ALIGNED
(
s
Ë
	`__de˛•ec
(
	`Æign
(s))

	)

62 
	#JEMALLOC_ALLOC_SIZE
(
s
)

	)

63 
	#JEMALLOC_ALLOC_SIZE2
(
s1
, 
s2
)

	)

64 #i‚de‡
JEMALLOC_EXPORT


65 #ifde‡
DLLEXPORT


66 
	#JEMALLOC_EXPORT
 
	`__de˛•ec
(
dŒexp‹t
)

	)

68 
	#JEMALLOC_EXPORT
 
	`__de˛•ec
(
dŒimp‹t
)

	)

71 
	#JEMALLOC_FORMAT_PRINTF
(
s
, 
i
)

	)

72 
	#JEMALLOC_NOINLINE
 
	`__de˛•ec
(
noölöe
)

	)

73 #ifde‡
__˝lu•lus


74 
	#JEMALLOC_NOTHROW
 
	`__de˛•ec
(
nŸhrow
)

	)

76 
	#JEMALLOC_NOTHROW


	)

78 
	#JEMALLOC_SECTION
(
s
Ë
	`__de˛•ec
(
	`Æloˇã
(s))

	)

79 
	#JEMALLOC_RESTRICT_RETURN
 
	`__de˛•ec
(
ª°ri˘
)

	)

80 #i‡
_MSC_VER
 >1900 && !
deföed
(
__EDG__
)

81 
	#JEMALLOC_ALLOCATOR
 
	`__de˛•ec
(
Æloˇt‹
)

	)

83 
	#JEMALLOC_ALLOCATOR


	)

85 #ñi‡
deföed
(
JEMALLOC_HAVE_ATTR
)

86 
	#JEMALLOC_ATTR
(
s
Ë
	`__©åibuã__
((s))

	)

87 
	#JEMALLOC_ALIGNED
(
s
Ë
	`JEMALLOC_ATTR
(
	`Æig√d
(s))

	)

88 #ifde‡
JEMALLOC_HAVE_ATTR_ALLOC_SIZE


89 
	#JEMALLOC_ALLOC_SIZE
(
s
Ë
	`JEMALLOC_ATTR
(
	`Æloc_size
(s))

	)

90 
	#JEMALLOC_ALLOC_SIZE2
(
s1
, 
s2
Ë
	`JEMALLOC_ATTR
(
	`Æloc_size
(s1, s2))

	)

92 
	#JEMALLOC_ALLOC_SIZE
(
s
)

	)

93 
	#JEMALLOC_ALLOC_SIZE2
(
s1
, 
s2
)

	)

95 #i‚de‡
JEMALLOC_EXPORT


96 
	#JEMALLOC_EXPORT
 
	`JEMALLOC_ATTR
(
	`visibûôy
("deÁu…"))

	)

98 #ifde‡
JEMALLOC_HAVE_ATTR_FORMAT_GNU_PRINTF


99 
	#JEMALLOC_FORMAT_PRINTF
(
s
, 
i
Ë
	`JEMALLOC_ATTR
(
	`f‹m©
(
gnu_¥ötf
, s, i))

	)

100 #ñi‡
deföed
(
JEMALLOC_HAVE_ATTR_FORMAT_PRINTF
)

101 
	#JEMALLOC_FORMAT_PRINTF
(
s
, 
i
Ë
	`JEMALLOC_ATTR
(
	`f‹m©
(
¥ötf
, s, i))

	)

103 
	#JEMALLOC_FORMAT_PRINTF
(
s
, 
i
)

	)

105 
	#JEMALLOC_NOINLINE
 
	`JEMALLOC_ATTR
(
noölöe
)

	)

106 
	#JEMALLOC_NOTHROW
 
	`JEMALLOC_ATTR
(
nŸhrow
)

	)

107 
	#JEMALLOC_SECTION
(
s
Ë
	`JEMALLOC_ATTR
(
	`£˘i⁄
(s))

	)

108 
	#JEMALLOC_RESTRICT_RETURN


	)

109 
	#JEMALLOC_ALLOCATOR


	)

111 
	#JEMALLOC_ATTR
(
s
)

	)

112 
	#JEMALLOC_ALIGNED
(
s
)

	)

113 
	#JEMALLOC_ALLOC_SIZE
(
s
)

	)

114 
	#JEMALLOC_ALLOC_SIZE2
(
s1
, 
s2
)

	)

115 
	#JEMALLOC_EXPORT


	)

116 
	#JEMALLOC_FORMAT_PRINTF
(
s
, 
i
)

	)

117 
	#JEMALLOC_NOINLINE


	)

118 
	#JEMALLOC_NOTHROW


	)

119 
	#JEMALLOC_SECTION
(
s
)

	)

120 
	#JEMALLOC_RESTRICT_RETURN


	)

121 
	#JEMALLOC_ALLOCATOR


	)

	@include/jemalloc/jemalloc_mangle.h

8 #ifde‡
JEMALLOC_MANGLE


9 #i‚de‡
JEMALLOC_NO_DEMANGLE


10 
	#JEMALLOC_NO_DEMANGLE


	)

12 
	#Æig√d_Æloc
 
je_Æig√d_Æloc


	)

13 
	#ˇŒoc
 
je_ˇŒoc


	)

14 
	#dÆlocx
 
je_dÆlocx


	)

15 
	#‰ì
 
je_‰ì


	)

16 
	#mÆl˘l
 
je_mÆl˘l


	)

17 
	#mÆl˘lbymib
 
je_mÆl˘lbymib


	)

18 
	#mÆl˘ amëomib
 
je_mÆl˘ amëomib


	)

19 
	#mÆloc
 
je_mÆloc


	)

20 
	#mÆloc_c⁄f
 
je_mÆloc_c⁄f


	)

21 
	#mÆloc_mesßge
 
je_mÆloc_mesßge


	)

22 
	#mÆloc_°©s_¥öt
 
je_mÆloc_°©s_¥öt


	)

23 
	#mÆloc_ußbÀ_size
 
je_mÆloc_ußbÀ_size


	)

24 
	#mÆlocx
 
je_mÆlocx


	)

25 
	#«Œocx
 
je_«Œocx


	)

26 
	#posix_memÆign
 
je_posix_memÆign


	)

27 
	#øŒocx
 
je_øŒocx


	)

28 
	#ªÆloc
 
je_ªÆloc


	)

29 
	#ßŒocx
 
je_ßŒocx


	)

30 
	#sdÆlocx
 
je_sdÆlocx


	)

31 
	#xÆlocx
 
je_xÆlocx


	)

32 
	#memÆign
 
je_memÆign


	)

33 
	#vÆloc
 
je_vÆloc


	)

43 #i‚de‡
JEMALLOC_NO_DEMANGLE


44 #unde‡
je_Æig√d_Æloc


45 #unde‡
je_ˇŒoc


46 #unde‡
je_dÆlocx


47 #unde‡
je_‰ì


48 #unde‡
je_mÆl˘l


49 #unde‡
je_mÆl˘lbymib


50 #unde‡
je_mÆl˘ amëomib


51 #unde‡
je_mÆloc


52 #unde‡
je_mÆloc_c⁄f


53 #unde‡
je_mÆloc_mesßge


54 #unde‡
je_mÆloc_°©s_¥öt


55 #unde‡
je_mÆloc_ußbÀ_size


56 #unde‡
je_mÆlocx


57 #unde‡
je_«Œocx


58 #unde‡
je_posix_memÆign


59 #unde‡
je_øŒocx


60 #unde‡
je_ªÆloc


61 #unde‡
je_ßŒocx


62 #unde‡
je_sdÆlocx


63 #unde‡
je_xÆlocx


64 #unde‡
je_memÆign


65 #unde‡
je_vÆloc


	@include/jemalloc/jemalloc_mangle_jet.h

8 #ifde‡
JEMALLOC_MANGLE


9 #i‚de‡
JEMALLOC_NO_DEMANGLE


10 
	#JEMALLOC_NO_DEMANGLE


	)

12 
	#Æig√d_Æloc
 
jë_Æig√d_Æloc


	)

13 
	#ˇŒoc
 
jë_ˇŒoc


	)

14 
	#dÆlocx
 
jë_dÆlocx


	)

15 
	#‰ì
 
jë_‰ì


	)

16 
	#mÆl˘l
 
jë_mÆl˘l


	)

17 
	#mÆl˘lbymib
 
jë_mÆl˘lbymib


	)

18 
	#mÆl˘ amëomib
 
jë_mÆl˘ amëomib


	)

19 
	#mÆloc
 
jë_mÆloc


	)

20 
	#mÆloc_c⁄f
 
jë_mÆloc_c⁄f


	)

21 
	#mÆloc_mesßge
 
jë_mÆloc_mesßge


	)

22 
	#mÆloc_°©s_¥öt
 
jë_mÆloc_°©s_¥öt


	)

23 
	#mÆloc_ußbÀ_size
 
jë_mÆloc_ußbÀ_size


	)

24 
	#mÆlocx
 
jë_mÆlocx


	)

25 
	#«Œocx
 
jë_«Œocx


	)

26 
	#posix_memÆign
 
jë_posix_memÆign


	)

27 
	#øŒocx
 
jë_øŒocx


	)

28 
	#ªÆloc
 
jë_ªÆloc


	)

29 
	#ßŒocx
 
jë_ßŒocx


	)

30 
	#sdÆlocx
 
jë_sdÆlocx


	)

31 
	#xÆlocx
 
jë_xÆlocx


	)

32 
	#memÆign
 
jë_memÆign


	)

33 
	#vÆloc
 
jë_vÆloc


	)

43 #i‚de‡
JEMALLOC_NO_DEMANGLE


44 #unde‡
jë_Æig√d_Æloc


45 #unde‡
jë_ˇŒoc


46 #unde‡
jë_dÆlocx


47 #unde‡
jë_‰ì


48 #unde‡
jë_mÆl˘l


49 #unde‡
jë_mÆl˘lbymib


50 #unde‡
jë_mÆl˘ amëomib


51 #unde‡
jë_mÆloc


52 #unde‡
jë_mÆloc_c⁄f


53 #unde‡
jë_mÆloc_mesßge


54 #unde‡
jë_mÆloc_°©s_¥öt


55 #unde‡
jë_mÆloc_ußbÀ_size


56 #unde‡
jë_mÆlocx


57 #unde‡
jë_«Œocx


58 #unde‡
jë_posix_memÆign


59 #unde‡
jë_øŒocx


60 #unde‡
jë_ªÆloc


61 #unde‡
jë_ßŒocx


62 #unde‡
jë_sdÆlocx


63 #unde‡
jë_xÆlocx


64 #unde‡
jë_memÆign


65 #unde‡
jë_vÆloc


	@include/jemalloc/jemalloc_protos.h

6 
JEMALLOC_EXPORT
 c⁄° *
je_mÆloc_c⁄f
;

7 
JEMALLOC_EXPORT
 (*
je_mÆloc_mesßge
)(*
cb›aque
,

8 c⁄° *
s
);

10 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


11 
JEMALLOC_NOTHROW
 *
	$je_mÆloc
(
size_t
 
size
)

12 
JEMALLOC_CXX_THROW
 
	$JEMALLOC_ATTR
(
mÆloc
Ë
	`JEMALLOC_ALLOC_SIZE
(1);

13 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


14 
JEMALLOC_NOTHROW
 *
	$je_ˇŒoc
(
size_t
 
num
, size_à
size
)

15 
JEMALLOC_CXX_THROW
 
	$JEMALLOC_ATTR
(
mÆloc
Ë
	`JEMALLOC_ALLOC_SIZE2
(1, 2);

16 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	$je_posix_memÆign
(**
mem±r
,

17 
size_t
 
Æignmít
, size_à
size
Ë
JEMALLOC_CXX_THROW
 
	`JEMALLOC_ATTR
(
	`n⁄nuŒ
(1));

18 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


19 
JEMALLOC_NOTHROW
 *
	$je_Æig√d_Æloc
(
size_t
 
Æignmít
,

20 
size_t
 
size
Ë
JEMALLOC_CXX_THROW
 
	$JEMALLOC_ATTR
(
mÆloc
)

21 
	`JEMALLOC_ALLOC_SIZE
(2);

22 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


23 
JEMALLOC_NOTHROW
 *
	$je_ªÆloc
(*
±r
, 
size_t
 
size
)

24 
JEMALLOC_CXX_THROW
 
	`JEMALLOC_ALLOC_SIZE
(2);

25 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	$je_‰ì
(*
±r
)

26 
JEMALLOC_CXX_THROW
;

28 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


29 
JEMALLOC_NOTHROW
 *
	$je_mÆlocx
(
size_t
 
size
, 
Êags
)

30 
	$JEMALLOC_ATTR
(
mÆloc
Ë
	`JEMALLOC_ALLOC_SIZE
(1);

31 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


32 
JEMALLOC_NOTHROW
 *
	$je_øŒocx
(*
±r
, 
size_t
 
size
,

33 
Êags
Ë
	`JEMALLOC_ALLOC_SIZE
(2);

34 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW
 
	`je_xÆlocx
(*
±r
, size_à
size
,

35 
size_t
 
exåa
, 
Êags
);

36 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW
 
	$je_ßŒocx
(c⁄° *
±r
,

37 
Êags
Ë
	`JEMALLOC_ATTR
(
puª
);

38 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	`je_dÆlocx
(*
±r
, 
Êags
);

39 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	`je_sdÆlocx
(*
±r
, 
size_t
 
size
,

40 
Êags
);

41 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW
 
	$je_«Œocx
(
size_t
 
size
, 
Êags
)

42 
	`JEMALLOC_ATTR
(
puª
);

44 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	`je_mÆl˘l
(c⁄° *
«me
,

45 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
);

46 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	`je_mÆl˘ amëomib
(c⁄° *
«me
,

47 
size_t
 *
mibp
, size_à*
mibÀ≈
);

48 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	`je_mÆl˘lbymib
(c⁄° 
size_t
 *
mib
,

49 
size_t
 
mibÀn
, *
ﬁdp
, size_à*
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
);

50 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	`je_mÆloc_°©s_¥öt
(

51 (*
wrôe_cb
)(*, c⁄° *), *
je_cb›aque
,

52 c⁄° *
›ts
);

53 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW
 
	$je_mÆloc_ußbÀ_size
(

54 
JEMALLOC_USABLE_SIZE_CONST
 *
±r
Ë
JEMALLOC_CXX_THROW
;

56 #ifde‡
JEMALLOC_OVERRIDE_MEMALIGN


57 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


58 
JEMALLOC_NOTHROW
 *
	$je_memÆign
(
size_t
 
Æignmít
, size_à
size
)

59 
JEMALLOC_CXX_THROW
 
	`JEMALLOC_ATTR
(
mÆloc
);

62 #ifde‡
JEMALLOC_OVERRIDE_VALLOC


63 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


64 
JEMALLOC_NOTHROW
 *
	$je_vÆloc
(
size_t
 
size
Ë
JEMALLOC_CXX_THROW


65 
	`JEMALLOC_ATTR
(
mÆloc
);

	@include/jemalloc/jemalloc_protos_jet.h

6 
JEMALLOC_EXPORT
 c⁄° *
jë_mÆloc_c⁄f
;

7 
JEMALLOC_EXPORT
 (*
jë_mÆloc_mesßge
)(*
cb›aque
,

8 c⁄° *
s
);

10 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


11 
JEMALLOC_NOTHROW
 *
	$jë_mÆloc
(
size_t
 
size
)

12 
JEMALLOC_CXX_THROW
 
	$JEMALLOC_ATTR
(
mÆloc
Ë
	`JEMALLOC_ALLOC_SIZE
(1);

13 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


14 
JEMALLOC_NOTHROW
 *
	$jë_ˇŒoc
(
size_t
 
num
, size_à
size
)

15 
JEMALLOC_CXX_THROW
 
	$JEMALLOC_ATTR
(
mÆloc
Ë
	`JEMALLOC_ALLOC_SIZE2
(1, 2);

16 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	$jë_posix_memÆign
(**
mem±r
,

17 
size_t
 
Æignmít
, size_à
size
Ë
JEMALLOC_CXX_THROW
 
	`JEMALLOC_ATTR
(
	`n⁄nuŒ
(1));

18 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


19 
JEMALLOC_NOTHROW
 *
	$jë_Æig√d_Æloc
(
size_t
 
Æignmít
,

20 
size_t
 
size
Ë
JEMALLOC_CXX_THROW
 
	$JEMALLOC_ATTR
(
mÆloc
)

21 
	`JEMALLOC_ALLOC_SIZE
(2);

22 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


23 
JEMALLOC_NOTHROW
 *
	$jë_ªÆloc
(*
±r
, 
size_t
 
size
)

24 
JEMALLOC_CXX_THROW
 
	`JEMALLOC_ALLOC_SIZE
(2);

25 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	$jë_‰ì
(*
±r
)

26 
JEMALLOC_CXX_THROW
;

28 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


29 
JEMALLOC_NOTHROW
 *
	$jë_mÆlocx
(
size_t
 
size
, 
Êags
)

30 
	$JEMALLOC_ATTR
(
mÆloc
Ë
	`JEMALLOC_ALLOC_SIZE
(1);

31 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


32 
JEMALLOC_NOTHROW
 *
	$jë_øŒocx
(*
±r
, 
size_t
 
size
,

33 
Êags
Ë
	`JEMALLOC_ALLOC_SIZE
(2);

34 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW
 
	`jë_xÆlocx
(*
±r
, size_à
size
,

35 
size_t
 
exåa
, 
Êags
);

36 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW
 
	$jë_ßŒocx
(c⁄° *
±r
,

37 
Êags
Ë
	`JEMALLOC_ATTR
(
puª
);

38 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	`jë_dÆlocx
(*
±r
, 
Êags
);

39 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	`jë_sdÆlocx
(*
±r
, 
size_t
 
size
,

40 
Êags
);

41 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW
 
	$jë_«Œocx
(
size_t
 
size
, 
Êags
)

42 
	`JEMALLOC_ATTR
(
puª
);

44 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	`jë_mÆl˘l
(c⁄° *
«me
,

45 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
);

46 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	`jë_mÆl˘ amëomib
(c⁄° *
«me
,

47 
size_t
 *
mibp
, size_à*
mibÀ≈
);

48 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	`jë_mÆl˘lbymib
(c⁄° 
size_t
 *
mib
,

49 
size_t
 
mibÀn
, *
ﬁdp
, size_à*
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
);

50 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW
 
	`jë_mÆloc_°©s_¥öt
(

51 (*
wrôe_cb
)(*, c⁄° *), *
jë_cb›aque
,

52 c⁄° *
›ts
);

53 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW
 
	$jë_mÆloc_ußbÀ_size
(

54 
JEMALLOC_USABLE_SIZE_CONST
 *
±r
Ë
JEMALLOC_CXX_THROW
;

56 #ifde‡
JEMALLOC_OVERRIDE_MEMALIGN


57 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


58 
JEMALLOC_NOTHROW
 *
	$jë_memÆign
(
size_t
 
Æignmít
, size_à
size
)

59 
JEMALLOC_CXX_THROW
 
	`JEMALLOC_ATTR
(
mÆloc
);

62 #ifde‡
JEMALLOC_OVERRIDE_VALLOC


63 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


64 
JEMALLOC_NOTHROW
 *
	$jë_vÆloc
(
size_t
 
size
Ë
JEMALLOC_CXX_THROW


65 
	`JEMALLOC_ATTR
(
mÆloc
);

	@include/jemalloc/jemalloc_rename.h

6 #i‚de‡
JEMALLOC_NO_RENAME


7 
	#je_Æig√d_Æloc
 
Æig√d_Æloc


	)

8 
	#je_ˇŒoc
 
ˇŒoc


	)

9 
	#je_dÆlocx
 
dÆlocx


	)

10 
	#je_‰ì
 
‰ì


	)

11 
	#je_mÆl˘l
 
mÆl˘l


	)

12 
	#je_mÆl˘lbymib
 
mÆl˘lbymib


	)

13 
	#je_mÆl˘ amëomib
 
mÆl˘ amëomib


	)

14 
	#je_mÆloc
 
mÆloc


	)

15 
	#je_mÆloc_c⁄f
 
mÆloc_c⁄f


	)

16 
	#je_mÆloc_mesßge
 
mÆloc_mesßge


	)

17 
	#je_mÆloc_°©s_¥öt
 
mÆloc_°©s_¥öt


	)

18 
	#je_mÆloc_ußbÀ_size
 
mÆloc_ußbÀ_size


	)

19 
	#je_mÆlocx
 
mÆlocx


	)

20 
	#je_«Œocx
 
«Œocx


	)

21 
	#je_posix_memÆign
 
posix_memÆign


	)

22 
	#je_øŒocx
 
øŒocx


	)

23 
	#je_ªÆloc
 
ªÆloc


	)

24 
	#je_ßŒocx
 
ßŒocx


	)

25 
	#je_sdÆlocx
 
sdÆlocx


	)

26 
	#je_xÆlocx
 
xÆlocx


	)

27 
	#je_memÆign
 
memÆign


	)

28 
	#je_vÆloc
 
vÆloc


	)

	@include/jemalloc/jemalloc_typedefs.h

1 
exã¡_hooks_s
 
	texã¡_hooks_t
;

8 *(
	texã¡_Æloc_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, size_t, 
	tboﬁ
 *,

9 
	tboﬁ
 *, );

16 
	$boﬁ
 (
	texã¡_dÆloc_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, 
	tboﬁ
,

24 (
	texã¡_de°roy_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, 
	tboﬁ
,

32 
	$boﬁ
 (
	texã¡_commô_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, size_t, size_t,

40 
	$boﬁ
 (
	texã¡_decommô_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, size_t,

41 
	tsize_t
, );

48 
	$boﬁ
 (
	texã¡_purge_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, size_t, size_t,

56 
	$boﬁ
 (
	texã¡_•lô_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, size_t, size_t,

57 
	tboﬁ
, );

64 
	$boﬁ
 (
	texã¡_mîge_t
)(
	texã¡_hooks_t
 *, *, 
	tsize_t
, *, size_t,

65 
	tboﬁ
, );

67 
	sexã¡_hooks_s
 {

68 
exã¡_Æloc_t
 *
Æloc
;

69 
exã¡_dÆloc_t
 *
dÆloc
;

70 
exã¡_de°roy_t
 *
de°roy
;

71 
exã¡_commô_t
 *
commô
;

72 
exã¡_decommô_t
 *
decommô
;

73 
exã¡_purge_t
 *
purge_œzy
;

74 
exã¡_purge_t
 *
purge_f‹˚d
;

75 
exã¡_•lô_t
 *
•lô
;

76 
exã¡_mîge_t
 *
mîge
;

	@include/msvc_compat/C99/stdbool.h

1 #i‚de‡
°dboﬁ_h


2 
	#°dboﬁ_h


	)

4 
	~<wty≥s.h
>

10 #i‚de‡
__˛™g__


11 
BOOL
 
	t_Boﬁ
;

14 
	#boﬁ
 
_Boﬁ


	)

15 
	#åue
 1

	)

16 
	#Ál£
 0

	)

18 
	#__boﬁ_åue_Ál£_¨e_deföed
 1

	)

	@include/msvc_compat/C99/stdint.h

32 #i‚de‡
_MSC_VER


36 #i‚de‡
_MSC_STDINT_H_


37 
	#_MSC_STDINT_H_


	)

39 #i‡
_MSC_VER
 > 1000

40 #¥agm®
⁄˚


43 
	~<limôs.h
>

49 #ifde‡
__˝lu•lus


52 
	~<wch¨.h
>

53 #ifde‡
__˝lu•lus


58 #i‚de‡
_W64


59 #i‡!
deföed
(
__midl
Ë&& (deföed(
_X86_
Ë|| deföed(
_M_IX86
)Ë&& 
_MSC_VER
 >= 1300

60 
	#_W64
 
__w64


	)

62 
	#_W64


	)

74 #i‡(
_MSC_VER
 < 1300)

75 sig√d 
	töt8_t
;

76 sig√d 
	töt16_t
;

77 sig√d 
	töt32_t
;

78 
	tuöt8_t
;

79 
	tuöt16_t
;

80 
	tuöt32_t
;

82 sig√d 
	t__öt8
 
	töt8_t
;

83 sig√d 
	t__öt16
 
	töt16_t
;

84 sig√d 
	t__öt32
 
	töt32_t
;

85 
	t__öt8
 
	tuöt8_t
;

86 
	t__öt16
 
	tuöt16_t
;

87 
	t__öt32
 
	tuöt32_t
;

89 sig√d 
	t__öt64
 
	töt64_t
;

90 
	t__öt64
 
	tuöt64_t
;

94 
öt8_t
 
	töt_Àa°8_t
;

95 
öt16_t
 
	töt_Àa°16_t
;

96 
öt32_t
 
	töt_Àa°32_t
;

97 
öt64_t
 
	töt_Àa°64_t
;

98 
uöt8_t
 
	tuöt_Àa°8_t
;

99 
uöt16_t
 
	tuöt_Àa°16_t
;

100 
uöt32_t
 
	tuöt_Àa°32_t
;

101 
uöt64_t
 
	tuöt_Àa°64_t
;

104 
öt8_t
 
	töt_Á°8_t
;

105 
öt16_t
 
	töt_Á°16_t
;

106 
öt32_t
 
	töt_Á°32_t
;

107 
öt64_t
 
	töt_Á°64_t
;

108 
uöt8_t
 
	tuöt_Á°8_t
;

109 
uöt16_t
 
	tuöt_Á°16_t
;

110 
uöt32_t
 
	tuöt_Á°32_t
;

111 
uöt64_t
 
	tuöt_Á°64_t
;

114 #ifde‡
_WIN64


115 sig√d 
	t__öt64
 
	töçå_t
;

116 
	t__öt64
 
	tuöçå_t
;

118 
_W64
 sig√d 
	töçå_t
;

119 
_W64
 
	tuöçå_t
;

123 
öt64_t
 
	tötmax_t
;

124 
uöt64_t
 
	tuötmax_t
;

129 #i‡!
deföed
(
__˝lu•lus
Ë|| deföed(
__STDC_LIMIT_MACROS
)

132 
	#INT8_MIN
 ((
öt8_t
)
_I8_MIN
)

	)

133 
	#INT8_MAX
 
_I8_MAX


	)

134 
	#INT16_MIN
 ((
öt16_t
)
_I16_MIN
)

	)

135 
	#INT16_MAX
 
_I16_MAX


	)

136 
	#INT32_MIN
 ((
öt32_t
)
_I32_MIN
)

	)

137 
	#INT32_MAX
 
_I32_MAX


	)

138 
	#INT64_MIN
 ((
öt64_t
)
_I64_MIN
)

	)

139 
	#INT64_MAX
 
_I64_MAX


	)

140 
	#UINT8_MAX
 
_UI8_MAX


	)

141 
	#UINT16_MAX
 
_UI16_MAX


	)

142 
	#UINT32_MAX
 
_UI32_MAX


	)

143 
	#UINT64_MAX
 
_UI64_MAX


	)

146 
	#INT_LEAST8_MIN
 
INT8_MIN


	)

147 
	#INT_LEAST8_MAX
 
INT8_MAX


	)

148 
	#INT_LEAST16_MIN
 
INT16_MIN


	)

149 
	#INT_LEAST16_MAX
 
INT16_MAX


	)

150 
	#INT_LEAST32_MIN
 
INT32_MIN


	)

151 
	#INT_LEAST32_MAX
 
INT32_MAX


	)

152 
	#INT_LEAST64_MIN
 
INT64_MIN


	)

153 
	#INT_LEAST64_MAX
 
INT64_MAX


	)

154 
	#UINT_LEAST8_MAX
 
UINT8_MAX


	)

155 
	#UINT_LEAST16_MAX
 
UINT16_MAX


	)

156 
	#UINT_LEAST32_MAX
 
UINT32_MAX


	)

157 
	#UINT_LEAST64_MAX
 
UINT64_MAX


	)

160 
	#INT_FAST8_MIN
 
INT8_MIN


	)

161 
	#INT_FAST8_MAX
 
INT8_MAX


	)

162 
	#INT_FAST16_MIN
 
INT16_MIN


	)

163 
	#INT_FAST16_MAX
 
INT16_MAX


	)

164 
	#INT_FAST32_MIN
 
INT32_MIN


	)

165 
	#INT_FAST32_MAX
 
INT32_MAX


	)

166 
	#INT_FAST64_MIN
 
INT64_MIN


	)

167 
	#INT_FAST64_MAX
 
INT64_MAX


	)

168 
	#UINT_FAST8_MAX
 
UINT8_MAX


	)

169 
	#UINT_FAST16_MAX
 
UINT16_MAX


	)

170 
	#UINT_FAST32_MAX
 
UINT32_MAX


	)

171 
	#UINT_FAST64_MAX
 
UINT64_MAX


	)

174 #ifde‡
_WIN64


175 
	#INTPTR_MIN
 
INT64_MIN


	)

176 
	#INTPTR_MAX
 
INT64_MAX


	)

177 
	#UINTPTR_MAX
 
UINT64_MAX


	)

179 
	#INTPTR_MIN
 
INT32_MIN


	)

180 
	#INTPTR_MAX
 
INT32_MAX


	)

181 
	#UINTPTR_MAX
 
UINT32_MAX


	)

185 
	#INTMAX_MIN
 
INT64_MIN


	)

186 
	#INTMAX_MAX
 
INT64_MAX


	)

187 
	#UINTMAX_MAX
 
UINT64_MAX


	)

191 #ifde‡
_WIN64


192 
	#PTRDIFF_MIN
 
_I64_MIN


	)

193 
	#PTRDIFF_MAX
 
_I64_MAX


	)

195 
	#PTRDIFF_MIN
 
_I32_MIN


	)

196 
	#PTRDIFF_MAX
 
_I32_MAX


	)

199 
	#SIG_ATOMIC_MIN
 
INT_MIN


	)

200 
	#SIG_ATOMIC_MAX
 
INT_MAX


	)

202 #i‚de‡
SIZE_MAX


203 #ifde‡
_WIN64


204 
	#SIZE_MAX
 
_UI64_MAX


	)

206 
	#SIZE_MAX
 
_UI32_MAX


	)

211 #i‚de‡
WCHAR_MIN


212 
	#WCHAR_MIN
 0

	)

214 #i‚de‡
WCHAR_MAX


215 
	#WCHAR_MAX
 
_UI16_MAX


	)

218 
	#WINT_MIN
 0

	)

219 
	#WINT_MAX
 
_UI16_MAX


	)

226 #i‡!
deföed
(
__˝lu•lus
Ë|| deföed(
__STDC_CONSTANT_MACROS
)

230 
	#INT8_C
(
vÆ
ËvÆ##
i8


	)

231 
	#INT16_C
(
vÆ
ËvÆ##
i16


	)

232 
	#INT32_C
(
vÆ
ËvÆ##
i32


	)

233 
	#INT64_C
(
vÆ
ËvÆ##
i64


	)

235 
	#UINT8_C
(
vÆ
ËvÆ##
ui8


	)

236 
	#UINT16_C
(
vÆ
ËvÆ##
ui16


	)

237 
	#UINT32_C
(
vÆ
ËvÆ##
ui32


	)

238 
	#UINT64_C
(
vÆ
ËvÆ##
ui64


	)

241 
	#INTMAX_C
 
INT64_C


	)

242 
	#UINTMAX_C
 
UINT64_C


	)

	@include/msvc_compat/strings.h

1 #i‚de‡
°rögs_h


2 
	#°rögs_h


	)

6 #ifde‡
_MSC_VER


7 
	~<öåö.h
>

8 #¥agm®
öåösic
(
_BôSˇnF‹w¨d
)

9 
__f‹˚ölöe
 
	$ff¶
(
x
) {

10 
i
;

12 i‡(
	`_BôSˇnF‹w¨d
(&
i
, 
x
)) {

13  
i
 + 1;

16 
	}
}

18 
__f‹˚ölöe
 
	$ffs
(
x
) {

19  
	`ff¶
(
x
);

20 
	}
}

22 #ifde‡ 
_M_X64


23 #¥agm®
öåösic
(
_BôSˇnF‹w¨d64
)

26 
__f‹˚ölöe
 
	$ff¶l
(
__öt64
 
x
) {

27 
i
;

28 #ifde‡ 
_M_X64


29 i‡(
	`_BôSˇnF‹w¨d64
(&
i
, 
x
)) {

30  
i
 + 1;

37 
__öt64
 
Œ
;

38 
l
[2];

39 } 
s
;

41 
s
.
Œ
 = 
x
;

43 i‡(
	`_BôSˇnF‹w¨d
(&
i
, 
s
.
l
[0])) {

44  
i
 + 1;

45 } if(
	`_BôSˇnF‹w¨d
(&
i
, 
s
.
l
[1])) {

46  
i
 + 33;

50 
	}
}

53 
	#ff¶l
(
x
Ë
	`__buûtö_ff¶l
(x)

	)

54 
	#ff¶
(
x
Ë
	`__buûtö_ff¶
(x)

	)

55 
	#ffs
(
x
Ë
	`__buûtö_ffs
(x)

	)

	@include/msvc_compat/windows_extra.h

1 #i‚de‡
MSVC_COMPAT_WINDOWS_EXTRA_H


2 
	#MSVC_COMPAT_WINDOWS_EXTRA_H


	)

4 
	~<î∫o.h
>

	@msvc/test_threads/test_threads.cpp

5 
	~<©omic
>

6 
	~<fun˘i⁄Æ
>

7 
	~<futuª
>

8 
	~<øndom
>

9 
	~<thªad
>

10 
	~<ve˘‹
>

11 
	~<°dio.h
>

12 
	~<jemÆloc/jemÆloc.h
>

14 
usög
 
	g°d
::
ve˘‹
;

15 
usög
 
	g°d
::
thªad
;

16 
usög
 
	g°d
::
unif‹m_öt_di°ributi⁄
;

17 
usög
 
	g°d
::
mö°d_ønd
;

19 
	$ã°_thªads
() {

20 
je_mÆloc_c⁄f
 = "narenas:3";

21 
«ª«s
 = 0;

22 
size_t
 
sz
 = (
«ª«s
);

23 
	`je_mÆl˘l
("›t.«ª«s", (*)&
«ª«s
, &
sz
, 
NULL
, 0);

24 i‡(
«ª«s
 != 3) {

25 
	`¥ötf
("Eº‹: u√x≥˘edÇumbî o‡¨ías: %d\n", 
«ª«s
);

28 c⁄° 
sizes
[] = { 7, 16, 32, 60, 91, 100, 120, 144, 169, 199, 255, 400, 670, 900, 917, 1025, 3333, 5190, 13131, 49192, 99999, 123123, 255265, 2333111 };

29 c⁄° 
numSizes
 = ()((
sizes
) / (sizes[0]));

30 
ve˘‹
<
thªad
> 
w‹kîs
;

31 c⁄° 
numThªads
 = 
«ª«s
 + 1, 
numAŒocsMax
 = 25, 
numIãr1
 = 50, 
numIãr2
 = 50;

32 
	`je_mÆloc_°©s_¥öt
(
NULL
, NULL, NULL);

33 
size_t
 
Æloˇãd1
;

34 
size_t
 
sz1
 = (
Æloˇãd1
);

35 
	`je_mÆl˘l
("°©s.a˘ive", (*)&
Æloˇãd1
, &
sz1
, 
NULL
, 0);

36 
	`¥ötf
("\nPress EnterÅo startÅhreads...\n");

37 
	`gëch¨
();

38 
	`¥ötf
("Sèπög %dÅhªad†x %d x %d iãøti⁄s...\n", 
numThªads
, 
numIãr1
, 
numIãr2
);

39 
i
 = 0; i < 
numThªads
; i++) {

40 
w‹kîs
.
	`em∂a˚_back
([
tid
=
i
]() {

41 
unif‹m_öt_di°ributi⁄
<> 
	`sizeDi°
(0, 
numSizes
 - 1);

42 
mö°d_ønd
 
	`∫d
(
tid
 * 17);

43 
uöt8_t
* 
±rs
[
numAŒocsMax
];

44 
±rsz
[
numAŒocsMax
];

45 
i
 = 0; i < 
numIãr1
; ++i) {

46 
thªad
 
	`t
([&]() {

47 
i
 = 0; i < 
numIãr2
; ++i) {

48 c⁄° 
numAŒocs
 = 
numAŒocsMax
 - 
	`sizeDi°
(
∫d
);

49 
j
 = 0; j < 
numAŒocs
; j += 64) {

50 c⁄° 
x
 = 
	`sizeDi°
(
∫d
);

51 c⁄° 
sz
 = 
sizes
[
x
];

52 
±rsz
[
j
] = 
sz
;

53 
±rs
[
j
] = (
uöt8_t
*)
	`je_mÆloc
(
sz
);

54 i‡(!
±rs
[
j
]) {

55 
	`¥ötf
("U«bÀÅÿÆloˇã %d byã†öÅhªad %d, iã∏%d,áŒo¯%d. %d\n", 
sz
, 
tid
, 
i
, 
j
, 
x
);

56 
	`exô
(1);

58 
k
 = 0; k < 
sz
; k++)

59 
±rs
[
j
][
k
] = 
tid
 + k;

61 
j
 = 0; j < 
numAŒocs
; j += 64) {

62 
k
 = 0, 
sz
 = 
±rsz
[
j
]; k < sz; k++)

63 i‡(
±rs
[
j
][
k
] !(
uöt8_t
)(
tid
 + k)) {

64 
	`¥ötf
("Mem‹yÉº‹ i¿thªad %d, iã∏%d,áŒo¯%d @ %d : %02X!=%02X\n", 
tid
, 
i
, 
j
, 
k
, 
±rs
[j][k], (
uöt8_t
)(tid + k));

65 
	`exô
(1);

67 
	`je_‰ì
(
±rs
[
j
]);

71 
t
.
	`joö
();

75 
thªad
& 
t
 : 
w‹kîs
) {

76 
t
.
	`joö
();

78 
	`je_mÆloc_°©s_¥öt
(
NULL
, NULL, NULL);

79 
size_t
 
Æloˇãd2
;

80 
	`je_mÆl˘l
("°©s.a˘ive", (*)&
Æloˇãd2
, &
sz1
, 
NULL
, 0);

81 
size_t
 
Àaked
 = 
Æloˇãd2
 - 
Æloˇãd1
;

82 
	`¥ötf
("\nD⁄e. Lóked: %zd byãs\n", 
Àaked
);

83 
boﬁ
 
Áûed
 = 
Àaked
 > 65536;

84 
	`¥ötf
("\nTe° %s!\n", (
Áûed
 ? "FAILED" : "successful"));

85 
	`¥ötf
("\nPress EnterÅo continue...\n");

86 
	`gëch¨
();

87  
Áûed
 ? 1 : 0;

88 
	}
}

	@msvc/test_threads/test_threads.h

1 #¥agm®
⁄˚


3 
ã°_thªads
();

	@msvc/test_threads/test_threads_main.cpp

1 
	~"ã°_thªads.h
"

2 
	~<futuª
>

3 
	~<fun˘i⁄Æ
>

4 
	~<chr⁄o
>

6 
usög
 
«me•a˚
 
	g°d
::
chr⁄o_lôîÆs
;

8 
	$maö
(
¨gc
, ** 
¨gv
) {

9 
rc
 = 
	`ã°_thªads
();

10  
rc
;

11 
	}
}

	@src/arena.c

1 
	#JEMALLOC_ARENA_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/div.h
"

7 
	~"jemÆloc/öã∫Æ/exã¡_dss.h
"

8 
	~"jemÆloc/öã∫Æ/exã¡_mm≠.h
"

9 
	~"jemÆloc/öã∫Æ/muãx.h
"

10 
	~"jemÆloc/öã∫Æ/πªe.h
"

11 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

12 
	~"jemÆloc/öã∫Æ/utû.h
"

21 c⁄° *
	g≥r˝u_¨ía_mode_«mes
[] = {

28 
≥r˝u_¨ía_mode_t
 
	g›t_≥r˝u_¨ía
 = 
PERCPU_ARENA_DEFAULT
;

30 
ssize_t
 
	g›t_dúty_deˇy_ms
 = 
DIRTY_DECAY_MS_DEFAULT
;

31 
ssize_t
 
	g›t_muzzy_deˇy_ms
 = 
MUZZY_DECAY_MS_DEFAULT
;

33 
©omic_zd_t
 
	gdúty_deˇy_ms_deÁu…
;

34 
©omic_zd_t
 
	gmuzzy_deˇy_ms_deÁu…
;

36 c⁄° 
uöt64_t
 
	gh_°ïs
[
SMOOTHSTEP_NSTEPS
] = {

37 
	#STEP
(
°ï
, 
h
, 
x
, 
y
) \

38 
h
,

	)

39 
SMOOTHSTEP


40 #unde‡
STEP


43 
div_öfo_t
 
	g¨ía_bööd_div_öfo
[
NBINS
];

51 
¨ía_deˇy_to_limô
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

52 
¨ía_deˇy_t
 *
deˇy
, 
exã¡s_t
 *
exã¡s
, 
boﬁ
 
Æl
, 
size_t
 
≈ages_limô
,

53 
size_t
 
≈ages_deˇy_max
, 
boﬁ
 
is_background_thªad
);

54 
boﬁ
 
¨ía_deˇy_dúty
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

55 
boﬁ
 
is_background_thªad
, boﬁ 
Æl
);

56 
¨ía_dÆloc_bö_¶ab
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
¶ab
,

57 
bö_t
 *
bö
);

58 
¨ía_bö_lowî_¶ab
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
¶ab
,

59 
bö_t
 *
bö
);

64 
	$¨ía_basic_°©s_mîge
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, *
¡hªads
,

65 c⁄° **
dss
, 
ssize_t
 *
dúty_deˇy_ms
, ssize_à*
muzzy_deˇy_ms
,

66 
size_t
 *
«˘ive
, size_à*
ndúty
, size_à*
nmuzzy
) {

67 *
¡hªads
 +
	`¨ía_¡hªads_gë
(
¨ía
, 
Ál£
);

68 *
dss
 = 
dss_¥ec_«mes
[
	`¨ía_dss_¥ec_gë
(
¨ía
)];

69 *
dúty_deˇy_ms
 = 
	`¨ía_dúty_deˇy_ms_gë
(
¨ía
);

70 *
muzzy_deˇy_ms
 = 
	`¨ía_muzzy_deˇy_ms_gë
(
¨ía
);

71 *
«˘ive
 +
	`©omic_lﬂd_zu
(&
¨ía
->«˘ive, 
ATOMIC_RELAXED
);

72 *
ndúty
 +
	`exã¡s_≈ages_gë
(&
¨ía
->
exã¡s_dúty
);

73 *
nmuzzy
 +
	`exã¡s_≈ages_gë
(&
¨ía
->
exã¡s_muzzy
);

74 
	}
}

77 
	$¨ía_°©s_mîge
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, *
¡hªads
,

78 c⁄° **
dss
, 
ssize_t
 *
dúty_deˇy_ms
, ssize_à*
muzzy_deˇy_ms
,

79 
size_t
 *
«˘ive
, size_à*
ndúty
, size_à*
nmuzzy
, 
¨ía_°©s_t
 *
a°©s
,

80 
bö_°©s_t
 *
b°©s
, 
¨ía_°©s_œrge_t
 *
l°©s
) {

81 
	`ˇs£π
(
c⁄fig_°©s
);

83 
	`¨ía_basic_°©s_mîge
(
tsdn
, 
¨ía
, 
¡hªads
, 
dss
, 
dúty_deˇy_ms
,

84 
muzzy_deˇy_ms
, 
«˘ive
, 
ndúty
, 
nmuzzy
);

86 
size_t
 
ba£_Æloˇãd
, 
ba£_ªsidít
, 
ba£_m≠≥d
, 
mëad©a_thp
;

87 
	`ba£_°©s_gë
(
tsdn
, 
¨ía
->
ba£
, &
ba£_Æloˇãd
, &
ba£_ªsidít
,

88 &
ba£_m≠≥d
, &
mëad©a_thp
);

90 
	`¨ía_°©s_lock
(
tsdn
, &
¨ía
->
°©s
);

92 
	`¨ía_°©s_accum_zu
(&
a°©s
->
m≠≥d
, 
ba£_m≠≥d


93 + 
	`¨ía_°©s_ªad_zu
(
tsdn
, &
¨ía
->
°©s
, &¨ía->°©s.
m≠≥d
));

94 
	`¨ía_°©s_accum_zu
(&
a°©s
->
ªèöed
,

95 
	`exã¡s_≈ages_gë
(&
¨ía
->
exã¡s_ªèöed
Ë<< 
LG_PAGE
);

97 
	`¨ía_°©s_accum_u64
(&
a°©s
->
deˇy_dúty
.
≈urge
,

98 
	`¨ía_°©s_ªad_u64
(
tsdn
, &
¨ía
->
°©s
,

99 &
¨ía
->
°©s
.
deˇy_dúty
.
≈urge
));

100 
	`¨ía_°©s_accum_u64
(&
a°©s
->
deˇy_dúty
.
nmadvi£
,

101 
	`¨ía_°©s_ªad_u64
(
tsdn
, &
¨ía
->
°©s
,

102 &
¨ía
->
°©s
.
deˇy_dúty
.
nmadvi£
));

103 
	`¨ía_°©s_accum_u64
(&
a°©s
->
deˇy_dúty
.
purged
,

104 
	`¨ía_°©s_ªad_u64
(
tsdn
, &
¨ía
->
°©s
,

105 &
¨ía
->
°©s
.
deˇy_dúty
.
purged
));

107 
	`¨ía_°©s_accum_u64
(&
a°©s
->
deˇy_muzzy
.
≈urge
,

108 
	`¨ía_°©s_ªad_u64
(
tsdn
, &
¨ía
->
°©s
,

109 &
¨ía
->
°©s
.
deˇy_muzzy
.
≈urge
));

110 
	`¨ía_°©s_accum_u64
(&
a°©s
->
deˇy_muzzy
.
nmadvi£
,

111 
	`¨ía_°©s_ªad_u64
(
tsdn
, &
¨ía
->
°©s
,

112 &
¨ía
->
°©s
.
deˇy_muzzy
.
nmadvi£
));

113 
	`¨ía_°©s_accum_u64
(&
a°©s
->
deˇy_muzzy
.
purged
,

114 
	`¨ía_°©s_ªad_u64
(
tsdn
, &
¨ía
->
°©s
,

115 &
¨ía
->
°©s
.
deˇy_muzzy
.
purged
));

117 
	`¨ía_°©s_accum_zu
(&
a°©s
->
ba£
, 
ba£_Æloˇãd
);

118 
	`¨ía_°©s_accum_zu
(&
a°©s
->
öã∫Æ
, 
	`¨ía_öã∫Æ_gë
(
¨ía
));

119 
	`¨ía_°©s_accum_zu
(&
a°©s
->
mëad©a_thp
, metadata_thp);

120 
	`¨ía_°©s_accum_zu
(&
a°©s
->
ªsidít
, 
ba£_ªsidít
 +

121 (((
	`©omic_lﬂd_zu
(&
¨ía
->
«˘ive
, 
ATOMIC_RELAXED
) +

122 
	`exã¡s_≈ages_gë
(&
¨ía
->
exã¡s_dúty
) +

123 
	`exã¡s_≈ages_gë
(&
¨ía
->
exã¡s_muzzy
)Ë<< 
LG_PAGE
)));

125 
szöd_t
 
i
 = 0; i < 
NSIZES
 - 
NBINS
; i++) {

126 
uöt64_t
 
nmÆloc
 = 
	`¨ía_°©s_ªad_u64
(
tsdn
, &
¨ía
->
°©s
,

127 &
¨ía
->
°©s
.
l°©s
[
i
].
nmÆloc
);

128 
	`¨ía_°©s_accum_u64
(&
l°©s
[
i
].
nmÆloc
,Çmalloc);

129 
	`¨ía_°©s_accum_u64
(&
a°©s
->
nmÆloc_œrge
, 
nmÆloc
);

131 
uöt64_t
 
ndÆloc
 = 
	`¨ía_°©s_ªad_u64
(
tsdn
, &
¨ía
->
°©s
,

132 &
¨ía
->
°©s
.
l°©s
[
i
].
ndÆloc
);

133 
	`¨ía_°©s_accum_u64
(&
l°©s
[
i
].
ndÆloc
,Çdalloc);

134 
	`¨ía_°©s_accum_u64
(&
a°©s
->
ndÆloc_œrge
, 
ndÆloc
);

136 
uöt64_t
 
ƒeque°s
 = 
	`¨ía_°©s_ªad_u64
(
tsdn
, &
¨ía
->
°©s
,

137 &
¨ía
->
°©s
.
l°©s
[
i
].
ƒeque°s
);

138 
	`¨ía_°©s_accum_u64
(&
l°©s
[
i
].
ƒeque°s
,

139 
nmÆloc
 + 
ƒeque°s
);

140 
	`¨ía_°©s_accum_u64
(&
a°©s
->
ƒeque°s_œrge
,

141 
nmÆloc
 + 
ƒeque°s
);

143 
	`as£π
(
nmÆloc
 >
ndÆloc
);

144 
	`as£π
(
nmÆloc
 - 
ndÆloc
 <
SIZE_T_MAX
);

145 
size_t
 
cuæexã¡s
 = (size_t)(
nmÆloc
 - 
ndÆloc
);

146 
l°©s
[
i
].
cuæexã¡s
 += curlextents;

147 
	`¨ía_°©s_accum_zu
(&
a°©s
->
Æloˇãd_œrge
,

148 
cuæexã¡s
 * 
	`sz_ödex2size
(
NBINS
 + 
i
));

151 
	`¨ía_°©s_u∆ock
(
tsdn
, &
¨ía
->
°©s
);

154 
	`©omic_°‹e_zu
(&
a°©s
->
tˇche_byãs
, 0, 
ATOMIC_RELAXED
);

155 
	`mÆloc_muãx_lock
(
tsdn
, &
¨ía
->
tˇche_ql_mtx
);

156 
ˇche_bö_¨øy_des¸ùt‹_t
 *
des¸ùt‹
;

157 
	`ql_f‹óch
(
des¸ùt‹
, &
¨ía
->
ˇche_bö_¨øy_des¸ùt‹_ql
, 
lök
) {

158 
szöd_t
 
i
 = 0;

159 ; 
i
 < 
NBINS
; i++) {

160 
ˇche_bö_t
 *
tbö
 = &
des¸ùt‹
->
bös_smÆl
[
i
];

161 
	`¨ía_°©s_accum_zu
(&
a°©s
->
tˇche_byãs
,

162 
tbö
->
nˇched
 * 
	`sz_ödex2size
(
i
));

164 ; 
i
 < 
nhbös
; i++) {

165 
ˇche_bö_t
 *
tbö
 = &
des¸ùt‹
->
bös_œrge
[
i
];

166 
	`¨ía_°©s_accum_zu
(&
a°©s
->
tˇche_byãs
,

167 
tbö
->
nˇched
 * 
	`sz_ödex2size
(
i
));

170 
	`mÆloc_muãx_¥of_ªad
(
tsdn
,

171 &
a°©s
->
muãx_¥of_d©a
[
¨ía_¥of_muãx_tˇche_li°
],

172 &
¨ía
->
tˇche_ql_mtx
);

173 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ía
->
tˇche_ql_mtx
);

175 
	#READ_ARENA_MUTEX_PROF_DATA
(
mtx
, 
öd
) \

176 
	`mÆloc_muãx_lock
(
tsdn
, &
¨ía
->
mtx
); \

177 
	`mÆloc_muãx_¥of_ªad
(
tsdn
, &
a°©s
->
muãx_¥of_d©a
[
öd
], \

178 &
¨ía
->
mtx
); \

179 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ía
->
mtx
);

	)

182 
	`READ_ARENA_MUTEX_PROF_DATA
(
œrge_mtx
, 
¨ía_¥of_muãx_œrge
);

183 
	`READ_ARENA_MUTEX_PROF_DATA
(
exã¡_avaû_mtx
,

184 
¨ía_¥of_muãx_exã¡_avaû
)

185 
	`READ_ARENA_MUTEX_PROF_DATA
(
exã¡s_dúty
.
mtx
,

186 
¨ía_¥of_muãx_exã¡s_dúty
)

187 
	`READ_ARENA_MUTEX_PROF_DATA
(
exã¡s_muzzy
.
mtx
,

188 
¨ía_¥of_muãx_exã¡s_muzzy
)

189 
	`READ_ARENA_MUTEX_PROF_DATA
(
exã¡s_ªèöed
.
mtx
,

190 
¨ía_¥of_muãx_exã¡s_ªèöed
)

191 
	`READ_ARENA_MUTEX_PROF_DATA
(
deˇy_dúty
.
mtx
,

192 
¨ía_¥of_muãx_deˇy_dúty
)

193 
	`READ_ARENA_MUTEX_PROF_DATA
(
deˇy_muzzy
.
mtx
,

194 
¨ía_¥of_muãx_deˇy_muzzy
)

195 
	`READ_ARENA_MUTEX_PROF_DATA
(
ba£
->
mtx
,

196 
¨ía_¥of_muãx_ba£
)

197 #unde‡
READ_ARENA_MUTEX_PROF_DATA


199 
	`n°ime_c›y
(&
a°©s
->
u±ime
, &
¨ía
->
¸óã_time
);

200 
	`n°ime_upd©e
(&
a°©s
->
u±ime
);

201 
	`n°ime_subåa˘
(&
a°©s
->
u±ime
, &
¨ía
->
¸óã_time
);

203 
szöd_t
 
i
 = 0; i < 
NBINS
; i++) {

204 
	`bö_°©s_mîge
(
tsdn
, &
b°©s
[
i
], &
¨ía
->
bös
[i]);

206 
	}
}

209 
	$¨ía_exã¡s_dúty_dÆloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

210 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
) {

211 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

212 
WITNESS_RANK_CORE
, 0);

214 
	`exã¡s_dÆloc
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, &¨ía->
exã¡s_dúty
,

215 
exã¡
);

216 i‡(
	`¨ía_dúty_deˇy_ms_gë
(
¨ía
) == 0) {

217 
	`¨ía_deˇy_dúty
(
tsdn
, 
¨ía
, 
Ál£
, 
åue
);

219 
	`¨ía_background_thªad_öa˘ivôy_check
(
tsdn
, 
¨ía
, 
Ál£
);

221 
	}
}

224 
	$¨ía_¶ab_ªg_Æloc
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
¶ab
, c⁄° 
bö_öfo_t
 *
bö_öfo
) {

225 *
ªt
;

226 
¨ía_¶ab_d©a_t
 *
¶ab_d©a
 = 
	`exã¡_¶ab_d©a_gë
(
¶ab
);

227 
size_t
 
ªgöd
;

229 
	`as£π
(
	`exã¡_n‰ì_gë
(
¶ab
) > 0);

230 
	`as£π
(!
	`bôm≠_fuŒ
(
¶ab_d©a
->
bôm≠
, &
bö_öfo
->
bôm≠_öfo
));

232 
ªgöd
 = 
	`bôm≠_sfu
(
¶ab_d©a
->
bôm≠
, &
bö_öfo
->
bôm≠_öfo
);

233 
ªt
 = (*)((
uöçå_t
)
	`exã¡_addr_gë
(
¶ab
) +

234 (
uöçå_t
)(
bö_öfo
->
ªg_size
 * 
ªgöd
));

235 
	`exã¡_n‰ì_dec
(
¶ab
);

236  
ªt
;

237 
	}
}

239 #i‚de‡
JEMALLOC_JET


242 
size_t


243 
	$¨ía_¶ab_ªgöd
(
exã¡_t
 *
¶ab
, 
szöd_t
 
bööd
, c⁄° *
±r
) {

244 
size_t
 
diff
, 
ªgöd
;

247 
	`as£π
((
uöçå_t
)
±r
 >(uöçå_t)
	`exã¡_addr_gë
(
¶ab
));

248 
	`as£π
((
uöçå_t
)
±r
 < (uöçå_t)
	`exã¡_∑°_gë
(
¶ab
));

250 
	`as£π
(((
uöçå_t
)
±r
 - (uöçå_t)
	`exã¡_addr_gë
(
¶ab
)) %

251 (
uöçå_t
)
bö_öfos
[
bööd
].
ªg_size
 == 0);

253 
diff
 = (
size_t
)((
uöçå_t
)
±r
 - (uöçå_t)
	`exã¡_addr_gë
(
¶ab
));

256 
ªgöd
 = 
	`div_compuã
(&
¨ía_bööd_div_öfo
[
bööd
], 
diff
);

258 
	`as£π
(
ªgöd
 < 
bö_öfos
[
bööd
].
ƒegs
);

260  
ªgöd
;

261 
	}
}

264 
	$¨ía_¶ab_ªg_dÆloc
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
¶ab
,

265 
¨ía_¶ab_d©a_t
 *
¶ab_d©a
, *
±r
) {

266 
szöd_t
 
bööd
 = 
	`exã¡_szöd_gë
(
¶ab
);

267 c⁄° 
bö_öfo_t
 *
bö_öfo
 = &
bö_öfos
[
bööd
];

268 
size_t
 
ªgöd
 = 
	`¨ía_¶ab_ªgöd
(
¶ab
, 
bööd
, 
±r
);

270 
	`as£π
(
	`exã¡_n‰ì_gë
(
¶ab
Ë< 
bö_öfo
->
ƒegs
);

272 
	`as£π
(
	`bôm≠_gë
(
¶ab_d©a
->
bôm≠
, &
bö_öfo
->
bôm≠_öfo
, 
ªgöd
));

274 
	`bôm≠_un£t
(
¶ab_d©a
->
bôm≠
, &
bö_öfo
->
bôm≠_öfo
, 
ªgöd
);

275 
	`exã¡_n‰ì_öc
(
¶ab
);

276 
	}
}

279 
	$¨ía_«˘ive_add
(
¨ía_t
 *
¨ía
, 
size_t
 
add_∑ges
) {

280 
	`©omic_„tch_add_zu
(&
¨ía
->
«˘ive
, 
add_∑ges
, 
ATOMIC_RELAXED
);

281 
	}
}

284 
	$¨ía_«˘ive_sub
(
¨ía_t
 *
¨ía
, 
size_t
 
sub_∑ges
) {

285 
	`as£π
(
	`©omic_lﬂd_zu
(&
¨ía
->
«˘ive
, 
ATOMIC_RELAXED
Ë>
sub_∑ges
);

286 
	`©omic_„tch_sub_zu
(&
¨ía
->
«˘ive
, 
sub_∑ges
, 
ATOMIC_RELAXED
);

287 
	}
}

290 
	$¨ía_œrge_mÆloc_°©s_upd©e
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
usize
) {

291 
szöd_t
 
ödex
, 
hödex
;

293 
	`ˇs£π
(
c⁄fig_°©s
);

295 i‡(
usize
 < 
LARGE_MINCLASS
) {

296 
usize
 = 
LARGE_MINCLASS
;

298 
ödex
 = 
	`sz_size2ödex
(
usize
);

299 
hödex
 = (
ödex
 >
NBINS
) ? index - NBINS : 0;

301 
	`¨ía_°©s_add_u64
(
tsdn
, &
¨ía
->
°©s
,

302 &
¨ía
->
°©s
.
l°©s
[
hödex
].
nmÆloc
, 1);

303 
	}
}

306 
	$¨ía_œrge_dÆloc_°©s_upd©e
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
usize
) {

307 
szöd_t
 
ödex
, 
hödex
;

309 
	`ˇs£π
(
c⁄fig_°©s
);

311 i‡(
usize
 < 
LARGE_MINCLASS
) {

312 
usize
 = 
LARGE_MINCLASS
;

314 
ödex
 = 
	`sz_size2ödex
(
usize
);

315 
hödex
 = (
ödex
 >
NBINS
) ? index - NBINS : 0;

317 
	`¨ía_°©s_add_u64
(
tsdn
, &
¨ía
->
°©s
,

318 &
¨ía
->
°©s
.
l°©s
[
hödex
].
ndÆloc
, 1);

319 
	}
}

322 
	$¨ía_œrge_øŒoc_°©s_upd©e
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
ﬁdusize
,

323 
size_t
 
usize
) {

324 
	`¨ía_œrge_dÆloc_°©s_upd©e
(
tsdn
, 
¨ía
, 
ﬁdusize
);

325 
	`¨ía_œrge_mÆloc_°©s_upd©e
(
tsdn
, 
¨ía
, 
usize
);

326 
	}
}

328 
exã¡_t
 *

329 
	$¨ía_exã¡_Æloc_œrge
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
usize
,

330 
size_t
 
Æignmít
, 
boﬁ
 *
zîo
) {

331 
exã¡_hooks_t
 *
exã¡_hooks
 = 
EXTENT_HOOKS_INITIALIZER
;

333 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

334 
WITNESS_RANK_CORE
, 0);

336 
szöd_t
 
szöd
 = 
	`sz_size2ödex
(
usize
);

337 
size_t
 
m≠≥d_add
;

338 
boﬁ
 
commô
 = 
åue
;

339 
exã¡_t
 *
exã¡
 = 
	`exã¡s_Æloc
(
tsdn
, 
¨ía
, &
exã¡_hooks
,

340 &
¨ía
->
exã¡s_dúty
, 
NULL
, 
usize
, 
sz_œrge_∑d
, 
Æignmít
, 
Ál£
,

341 
szöd
, 
zîo
, &
commô
);

342 i‡(
exã¡
 =
NULL
) {

343 
exã¡
 = 
	`exã¡s_Æloc
(
tsdn
, 
¨ía
, &
exã¡_hooks
,

344 &
¨ía
->
exã¡s_muzzy
, 
NULL
, 
usize
, 
sz_œrge_∑d
, 
Æignmít
,

345 
Ál£
, 
szöd
, 
zîo
, &
commô
);

347 
size_t
 
size
 = 
usize
 + 
sz_œrge_∑d
;

348 i‡(
exã¡
 =
NULL
) {

349 
exã¡
 = 
	`exã¡_Æloc_wøµî
(
tsdn
, 
¨ía
, &
exã¡_hooks
, 
NULL
,

350 
usize
, 
sz_œrge_∑d
, 
Æignmít
, 
Ál£
, 
szöd
, 
zîo
,

351 &
commô
);

352 i‡(
c⁄fig_°©s
) {

358 
m≠≥d_add
 = 
size
;

360 } i‡(
c⁄fig_°©s
) {

361 
m≠≥d_add
 = 0;

364 i‡(
exã¡
 !
NULL
) {

365 i‡(
c⁄fig_°©s
) {

366 
	`¨ía_°©s_lock
(
tsdn
, &
¨ía
->
°©s
);

367 
	`¨ía_œrge_mÆloc_°©s_upd©e
(
tsdn
, 
¨ía
, 
usize
);

368 i‡(
m≠≥d_add
 != 0) {

369 
	`¨ía_°©s_add_zu
(
tsdn
, &
¨ía
->
°©s
,

370 &
¨ía
->
°©s
.
m≠≥d
, 
m≠≥d_add
);

372 
	`¨ía_°©s_u∆ock
(
tsdn
, &
¨ía
->
°©s
);

374 
	`¨ía_«˘ive_add
(
¨ía
, 
size
 >> 
LG_PAGE
);

377  
exã¡
;

378 
	}
}

381 
	$¨ía_exã¡_dÆloc_œrge_¥ï
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
exã¡
) {

382 i‡(
c⁄fig_°©s
) {

383 
	`¨ía_°©s_lock
(
tsdn
, &
¨ía
->
°©s
);

384 
	`¨ía_œrge_dÆloc_°©s_upd©e
(
tsdn
, 
¨ía
,

385 
	`exã¡_usize_gë
(
exã¡
));

386 
	`¨ía_°©s_u∆ock
(
tsdn
, &
¨ía
->
°©s
);

388 
	`¨ía_«˘ive_sub
(
¨ía
, 
	`exã¡_size_gë
(
exã¡
Ë>> 
LG_PAGE
);

389 
	}
}

392 
	$¨ía_exã¡_øŒoc_œrge_shrök
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
exã¡
,

393 
size_t
 
ﬁdusize
) {

394 
size_t
 
usize
 = 
	`exã¡_usize_gë
(
exã¡
);

395 
size_t
 
udiff
 = 
ﬁdusize
 - 
usize
;

397 i‡(
c⁄fig_°©s
) {

398 
	`¨ía_°©s_lock
(
tsdn
, &
¨ía
->
°©s
);

399 
	`¨ía_œrge_øŒoc_°©s_upd©e
(
tsdn
, 
¨ía
, 
ﬁdusize
, 
usize
);

400 
	`¨ía_°©s_u∆ock
(
tsdn
, &
¨ía
->
°©s
);

402 
	`¨ía_«˘ive_sub
(
¨ía
, 
udiff
 >> 
LG_PAGE
);

403 
	}
}

406 
	$¨ía_exã¡_øŒoc_œrge_ex∑nd
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
exã¡
,

407 
size_t
 
ﬁdusize
) {

408 
size_t
 
usize
 = 
	`exã¡_usize_gë
(
exã¡
);

409 
size_t
 
udiff
 = 
usize
 - 
ﬁdusize
;

411 i‡(
c⁄fig_°©s
) {

412 
	`¨ía_°©s_lock
(
tsdn
, &
¨ía
->
°©s
);

413 
	`¨ía_œrge_øŒoc_°©s_upd©e
(
tsdn
, 
¨ía
, 
ﬁdusize
, 
usize
);

414 
	`¨ía_°©s_u∆ock
(
tsdn
, &
¨ía
->
°©s
);

416 
	`¨ía_«˘ive_add
(
¨ía
, 
udiff
 >> 
LG_PAGE
);

417 
	}
}

419 
ssize_t


420 
	$¨ía_deˇy_ms_ªad
(
¨ía_deˇy_t
 *
deˇy
) {

421  
	`©omic_lﬂd_zd
(&
deˇy
->
time_ms
, 
ATOMIC_RELAXED
);

422 
	}
}

425 
	$¨ía_deˇy_ms_wrôe
(
¨ía_deˇy_t
 *
deˇy
, 
ssize_t
 
deˇy_ms
) {

426 
	`©omic_°‹e_zd
(&
deˇy
->
time_ms
, 
deˇy_ms
, 
ATOMIC_RELAXED
);

427 
	}
}

430 
	$¨ía_deˇy_dódlöe_öô
(
¨ía_deˇy_t
 *
deˇy
) {

435 
	`n°ime_c›y
(&
deˇy
->
dódlöe
, &deˇy->
ïoch
);

436 
	`n°ime_add
(&
deˇy
->
dódlöe
, &deˇy->
öãrvÆ
);

437 i‡(
	`¨ía_deˇy_ms_ªad
(
deˇy
) > 0) {

438 
n°ime_t
 
jôãr
;

440 
	`n°ime_öô
(&
jôãr
, 
	`¥ng_ønge_u64
(&
deˇy
->
jôãr_°©e
,

441 
	`n°ime_ns
(&
deˇy
->
öãrvÆ
)));

442 
	`n°ime_add
(&
deˇy
->
dódlöe
, &
jôãr
);

444 
	}
}

446 
boﬁ


447 
	$¨ía_deˇy_dódlöe_ªached
(c⁄° 
¨ía_deˇy_t
 *
deˇy
, c⁄° 
n°ime_t
 *
time
) {

448  (
	`n°ime_com∑ª
(&
deˇy
->
dódlöe
, 
time
) <= 0);

449 
	}
}

451 
size_t


452 
	$¨ía_deˇy_backlog_≈ages_limô
(c⁄° 
¨ía_deˇy_t
 *
deˇy
) {

453 
uöt64_t
 
sum
;

454 
size_t
 
≈ages_limô_backlog
;

455 
i
;

462 
sum
 = 0;

463 
i
 = 0; i < 
SMOOTHSTEP_NSTEPS
; i++) {

464 
sum
 +
deˇy
->
backlog
[
i
] * 
h_°ïs
[i];

466 
≈ages_limô_backlog
 = (
size_t
)(
sum
 >> 
SMOOTHSTEP_BFP
);

468  
≈ages_limô_backlog
;

469 
	}
}

472 
	$¨ía_deˇy_backlog_upd©e_œ°
(
¨ía_deˇy_t
 *
deˇy
, 
size_t
 
cuºít_≈ages
) {

473 
size_t
 
≈ages_dñè
 = (
cuºít_≈ages
 > 
deˇy
->
nu≈urged
) ?

474 
cuºít_≈ages
 - 
deˇy
->
nu≈urged
 : 0;

475 
deˇy
->
backlog
[
SMOOTHSTEP_NSTEPS
-1] = 
≈ages_dñè
;

477 i‡(
c⁄fig_debug
) {

478 i‡(
cuºít_≈ages
 > 
deˇy
->
˚û_≈ages
) {

479 
deˇy
->
˚û_≈ages
 = 
cuºít_≈ages
;

481 
size_t
 
≈ages_limô
 = 
	`¨ía_deˇy_backlog_≈ages_limô
(
deˇy
);

482 
	`as£π
(
deˇy
->
˚û_≈ages
 >
≈ages_limô
);

483 i‡(
deˇy
->
˚û_≈ages
 > 
≈ages_limô
) {

484 
deˇy
->
˚û_≈ages
 = 
≈ages_limô
;

487 
	}
}

490 
	$¨ía_deˇy_backlog_upd©e
(
¨ía_deˇy_t
 *
deˇy
, 
uöt64_t
 
«dv™˚_u64
,

491 
size_t
 
cuºít_≈ages
) {

492 i‡(
«dv™˚_u64
 >
SMOOTHSTEP_NSTEPS
) {

493 
	`mem£t
(
deˇy
->
backlog
, 0, (
SMOOTHSTEP_NSTEPS
-1) *

494 (
size_t
));

496 
size_t
 
«dv™˚_z
 = (size_t)
«dv™˚_u64
;

498 
	`as£π
((
uöt64_t
)
«dv™˚_z
 =
«dv™˚_u64
);

500 
	`memmove
(
deˇy
->
backlog
, &deˇy->backlog[
«dv™˚_z
],

501 (
SMOOTHSTEP_NSTEPS
 - 
«dv™˚_z
Ë* (
size_t
));

502 i‡(
«dv™˚_z
 > 1) {

503 
	`mem£t
(&
deˇy
->
backlog
[
SMOOTHSTEP_NSTEPS
 -

504 
«dv™˚_z
], 0, («dv™˚_z-1Ë* (
size_t
));

508 
	`¨ía_deˇy_backlog_upd©e_œ°
(
deˇy
, 
cuºít_≈ages
);

509 
	}
}

512 
	$¨ía_deˇy_åy_purge
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
¨ía_deˇy_t
 *
deˇy
,

513 
exã¡s_t
 *
exã¡s
, 
size_t
 
cuºít_≈ages
, size_à
≈ages_limô
,

514 
boﬁ
 
is_background_thªad
) {

515 i‡(
cuºít_≈ages
 > 
≈ages_limô
) {

516 
	`¨ía_deˇy_to_limô
(
tsdn
, 
¨ía
, 
deˇy
, 
exã¡s
, 
Ál£
,

517 
≈ages_limô
, 
cuºít_≈ages
 -Çpages_limit,

518 
is_background_thªad
);

520 
	}
}

523 
	$¨ía_deˇy_ïoch_adv™˚_hñ≥r
(
¨ía_deˇy_t
 *
deˇy
, c⁄° 
n°ime_t
 *
time
,

524 
size_t
 
cuºít_≈ages
) {

525 
	`as£π
(
	`¨ía_deˇy_dódlöe_ªached
(
deˇy
, 
time
));

527 
n°ime_t
 
dñè
;

528 
	`n°ime_c›y
(&
dñè
, 
time
);

529 
	`n°ime_subåa˘
(&
dñè
, &
deˇy
->
ïoch
);

531 
uöt64_t
 
«dv™˚_u64
 = 
	`n°ime_divide
(&
dñè
, &
deˇy
->
öãrvÆ
);

532 
	`as£π
(
«dv™˚_u64
 > 0);

535 
	`n°ime_c›y
(&
dñè
, &
deˇy
->
öãrvÆ
);

536 
	`n°ime_imu…ùly
(&
dñè
, 
«dv™˚_u64
);

537 
	`n°ime_add
(&
deˇy
->
ïoch
, &
dñè
);

540 
	`¨ía_deˇy_dódlöe_öô
(
deˇy
);

543 
	`¨ía_deˇy_backlog_upd©e
(
deˇy
, 
«dv™˚_u64
, 
cuºít_≈ages
);

544 
	}
}

547 
	$¨ía_deˇy_ïoch_adv™˚
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
¨ía_deˇy_t
 *
deˇy
,

548 
exã¡s_t
 *
exã¡s
, c⁄° 
n°ime_t
 *
time
, 
boﬁ
 
is_background_thªad
) {

549 
size_t
 
cuºít_≈ages
 = 
	`exã¡s_≈ages_gë
(
exã¡s
);

550 
	`¨ía_deˇy_ïoch_adv™˚_hñ≥r
(
deˇy
, 
time
, 
cuºít_≈ages
);

552 
size_t
 
≈ages_limô
 = 
	`¨ía_deˇy_backlog_≈ages_limô
(
deˇy
);

554 
deˇy
->
nu≈urged
 = (
≈ages_limô
 > 
cuºít_≈ages
) ?Çpages_limit :

555 
cuºít_≈ages
;

557 i‡(!
	`background_thªad_íabÀd
(Ë|| 
is_background_thªad
) {

558 
	`¨ía_deˇy_åy_purge
(
tsdn
, 
¨ía
, 
deˇy
, 
exã¡s
,

559 
cuºít_≈ages
, 
≈ages_limô
, 
is_background_thªad
);

561 
	}
}

564 
	$¨ía_deˇy_ªöô
(
¨ía_deˇy_t
 *
deˇy
, 
exã¡s_t
 *
exã¡s
, 
ssize_t
 
deˇy_ms
) {

565 
	`¨ía_deˇy_ms_wrôe
(
deˇy
, 
deˇy_ms
);

566 i‡(
deˇy_ms
 > 0) {

567 
	`n°ime_öô
(&
deˇy
->
öãrvÆ
, (
uöt64_t
)
deˇy_ms
 *

568 
	`KQU
(1000000));

569 
	`n°ime_idivide
(&
deˇy
->
öãrvÆ
, 
SMOOTHSTEP_NSTEPS
);

572 
	`n°ime_öô
(&
deˇy
->
ïoch
, 0);

573 
	`n°ime_upd©e
(&
deˇy
->
ïoch
);

574 
deˇy
->
jôãr_°©e
 = (
uöt64_t
)(
uöçå_t
)decay;

575 
	`¨ía_deˇy_dódlöe_öô
(
deˇy
);

576 
deˇy
->
nu≈urged
 = 0;

577 
	`mem£t
(
deˇy
->
backlog
, 0, 
SMOOTHSTEP_NSTEPS
 * (
size_t
));

578 
	}
}

580 
boﬁ


581 
	$¨ía_deˇy_öô
(
¨ía_deˇy_t
 *
deˇy
, 
exã¡s_t
 *
exã¡s
, 
ssize_t
 
deˇy_ms
,

582 
¨ía_°©s_deˇy_t
 *
°©s
) {

583 i‡(
c⁄fig_debug
) {

584 
size_t
 
i
 = 0; i < (
¨ía_deˇy_t
); i++) {

585 
	`as£π
(((*)
deˇy
)[
i
] == 0);

587 
deˇy
->
˚û_≈ages
 = 0;

589 i‡(
	`mÆloc_muãx_öô
(&
deˇy
->
mtx
, "deˇy", 
WITNESS_RANK_DECAY
,

590 
mÆloc_muãx_ønk_ex˛usive
)) {

591  
åue
;

593 
deˇy
->
purgög
 = 
Ál£
;

594 
	`¨ía_deˇy_ªöô
(
deˇy
, 
exã¡s
, 
deˇy_ms
);

596 i‡(
c⁄fig_°©s
) {

597 
deˇy
->
°©s
 = stats;

599  
Ál£
;

600 
	}
}

602 
boﬁ


603 
	$¨ía_deˇy_ms_vÆid
(
ssize_t
 
deˇy_ms
) {

604 i‡(
deˇy_ms
 < -1) {

605  
Ál£
;

607 i‡(
deˇy_ms
 =-1 || (
uöt64_t
)deˇy_m†<
NSTIME_SEC_MAX
 *

608 
	`KQU
(1000)) {

609  
åue
;

611  
Ál£
;

612 
	}
}

614 
boﬁ


615 
	$¨ía_maybe_deˇy
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
¨ía_deˇy_t
 *
deˇy
,

616 
exã¡s_t
 *
exã¡s
, 
boﬁ
 
is_background_thªad
) {

617 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
deˇy
->
mtx
);

620 
ssize_t
 
deˇy_ms
 = 
	`¨ía_deˇy_ms_ªad
(
deˇy
);

621 i‡(
deˇy_ms
 <= 0) {

622 i‡(
deˇy_ms
 == 0) {

623 
	`¨ía_deˇy_to_limô
(
tsdn
, 
¨ía
, 
deˇy
, 
exã¡s
, 
Ál£
,

624 0, 
	`exã¡s_≈ages_gë
(
exã¡s
),

625 
is_background_thªad
);

627  
Ál£
;

630 
n°ime_t
 
time
;

631 
	`n°ime_öô
(&
time
, 0);

632 
	`n°ime_upd©e
(&
time
);

633 i‡(
	`u∆ikñy
(!
	`n°ime_m⁄Ÿ⁄ic
(Ë&& 
	`n°ime_com∑ª
(&
deˇy
->
ïoch
, &
time
)

644 
	`n°ime_c›y
(&
deˇy
->
ïoch
, &
time
);

645 
	`¨ía_deˇy_dódlöe_öô
(
deˇy
);

648 
	`as£π
(
	`n°ime_com∑ª
(&
deˇy
->
ïoch
, &
time
) <= 0);

658 
boﬁ
 
adv™˚_ïoch
 = 
	`¨ía_deˇy_dódlöe_ªached
(
deˇy
, &
time
);

659 i‡(
adv™˚_ïoch
) {

660 
	`¨ía_deˇy_ïoch_adv™˚
(
tsdn
, 
¨ía
, 
deˇy
, 
exã¡s
, &
time
,

661 
is_background_thªad
);

662 } i‡(
is_background_thªad
) {

663 
	`¨ía_deˇy_åy_purge
(
tsdn
, 
¨ía
, 
deˇy
, 
exã¡s
,

664 
	`exã¡s_≈ages_gë
(
exã¡s
),

665 
	`¨ía_deˇy_backlog_≈ages_limô
(
deˇy
),

666 
is_background_thªad
);

669  
adv™˚_ïoch
;

670 
	}
}

672 
ssize_t


673 
	$¨ía_deˇy_ms_gë
(
¨ía_deˇy_t
 *
deˇy
) {

674  
	`¨ía_deˇy_ms_ªad
(
deˇy
);

675 
	}
}

677 
ssize_t


678 
	$¨ía_dúty_deˇy_ms_gë
(
¨ía_t
 *
¨ía
) {

679  
	`¨ía_deˇy_ms_gë
(&
¨ía
->
deˇy_dúty
);

680 
	}
}

682 
ssize_t


683 
	$¨ía_muzzy_deˇy_ms_gë
(
¨ía_t
 *
¨ía
) {

684  
	`¨ía_deˇy_ms_gë
(&
¨ía
->
deˇy_muzzy
);

685 
	}
}

687 
boﬁ


688 
	$¨ía_deˇy_ms_£t
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
¨ía_deˇy_t
 *
deˇy
,

689 
exã¡s_t
 *
exã¡s
, 
ssize_t
 
deˇy_ms
) {

690 i‡(!
	`¨ía_deˇy_ms_vÆid
(
deˇy_ms
)) {

691  
åue
;

694 
	`mÆloc_muãx_lock
(
tsdn
, &
deˇy
->
mtx
);

703 
	`¨ía_deˇy_ªöô
(
deˇy
, 
exã¡s
, 
deˇy_ms
);

704 
	`¨ía_maybe_deˇy
(
tsdn
, 
¨ía
, 
deˇy
, 
exã¡s
, 
Ál£
);

705 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
deˇy
->
mtx
);

707  
Ál£
;

708 
	}
}

710 
boﬁ


711 
	$¨ía_dúty_deˇy_ms_£t
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

712 
ssize_t
 
deˇy_ms
) {

713  
	`¨ía_deˇy_ms_£t
(
tsdn
, 
¨ía
, &¨ía->
deˇy_dúty
,

714 &
¨ía
->
exã¡s_dúty
, 
deˇy_ms
);

715 
	}
}

717 
boﬁ


718 
	$¨ía_muzzy_deˇy_ms_£t
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

719 
ssize_t
 
deˇy_ms
) {

720  
	`¨ía_deˇy_ms_£t
(
tsdn
, 
¨ía
, &¨ía->
deˇy_muzzy
,

721 &
¨ía
->
exã¡s_muzzy
, 
deˇy_ms
);

722 
	}
}

724 
size_t


725 
	$¨ía_°ash_deˇyed
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

726 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡s_t
 *
exã¡s
, 
size_t
 
≈ages_limô
,

727 
size_t
 
≈ages_deˇy_max
, 
exã¡_li°_t
 *
deˇy_exã¡s
) {

728 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

729 
WITNESS_RANK_CORE
, 0);

732 
size_t
 
n°ashed
 = 0;

733 
exã¡_t
 *
exã¡
;

734 
n°ashed
 < 
≈ages_deˇy_max
 &&

735 (
exã¡
 = 
	`exã¡s_evi˘
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
exã¡s
,

736 
≈ages_limô
)Ë!
NULL
) {

737 
	`exã¡_li°_≠≥nd
(
deˇy_exã¡s
, 
exã¡
);

738 
n°ashed
 +
	`exã¡_size_gë
(
exã¡
Ë>> 
LG_PAGE
;

740  
n°ashed
;

741 
	}
}

743 
size_t


744 
	$¨ía_deˇy_°ashed
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

745 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
¨ía_deˇy_t
 *
deˇy
, 
exã¡s_t
 *
exã¡s
,

746 
boﬁ
 
Æl
, 
exã¡_li°_t
 *
deˇy_exã¡s
, boﬁ 
is_background_thªad
) {

747 
UNUSED
 
size_t
 
nmadvi£
, 
nunm≠≥d
;

748 
size_t
 
≈urged
;

750 i‡(
c⁄fig_°©s
) {

751 
nmadvi£
 = 0;

752 
nunm≠≥d
 = 0;

754 
≈urged
 = 0;

756 
ssize_t
 
muzzy_deˇy_ms
 = 
	`¨ía_muzzy_deˇy_ms_gë
(
¨ía
);

757 
exã¡_t
 *
exã¡
 = 
	`exã¡_li°_fú°
(
deˇy_exã¡s
);Éxtent !=

758 
NULL
; 
exã¡
 = 
	`exã¡_li°_fú°
(
deˇy_exã¡s
)) {

759 i‡(
c⁄fig_°©s
) {

760 
nmadvi£
++;

762 
size_t
 
≈ages
 = 
	`exã¡_size_gë
(
exã¡
Ë>> 
LG_PAGE
;

763 
≈urged
 +
≈ages
;

764 
	`exã¡_li°_ªmove
(
deˇy_exã¡s
, 
exã¡
);

765 
	`exã¡s_°©e_gë
(
exã¡s
)) {

766 
exã¡_°©e_a˘ive
:

767 
	`nŸ_ªached
();

768 
exã¡_°©e_dúty
:

769 i‡(!
Æl
 && 
muzzy_deˇy_ms
 != 0 &&

770 !
	`exã¡_purge_œzy_wøµî
(
tsdn
, 
¨ía
,

771 
r_exã¡_hooks
, 
exã¡
, 0,

772 
	`exã¡_size_gë
(
exã¡
))) {

773 
	`exã¡s_dÆloc
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

774 &
¨ía
->
exã¡s_muzzy
, 
exã¡
);

775 
	`¨ía_background_thªad_öa˘ivôy_check
(
tsdn
,

776 
¨ía
, 
is_background_thªad
);

780 
exã¡_°©e_muzzy
:

781 
	`exã¡_dÆloc_wøµî
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

782 
exã¡
);

783 i‡(
c⁄fig_°©s
) {

784 
nunm≠≥d
 +
≈ages
;

787 
exã¡_°©e_ªèöed
:

789 
	`nŸ_ªached
();

793 i‡(
c⁄fig_°©s
) {

794 
	`¨ía_°©s_lock
(
tsdn
, &
¨ía
->
°©s
);

795 
	`¨ía_°©s_add_u64
(
tsdn
, &
¨ía
->
°©s
, &
deˇy
->°©s->
≈urge
,

797 
	`¨ía_°©s_add_u64
(
tsdn
, &
¨ía
->
°©s
,

798 &
deˇy
->
°©s
->
nmadvi£
,Çmadvise);

799 
	`¨ía_°©s_add_u64
(
tsdn
, &
¨ía
->
°©s
, &
deˇy
->°©s->
purged
,

800 
≈urged
);

801 
	`¨ía_°©s_sub_zu
(
tsdn
, &
¨ía
->
°©s
, &¨ía->°©s.
m≠≥d
,

802 
nunm≠≥d
 << 
LG_PAGE
);

803 
	`¨ía_°©s_u∆ock
(
tsdn
, &
¨ía
->
°©s
);

806  
≈urged
;

807 
	}
}

817 
	$¨ía_deˇy_to_limô
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
¨ía_deˇy_t
 *
deˇy
,

818 
exã¡s_t
 *
exã¡s
, 
boﬁ
 
Æl
, 
size_t
 
≈ages_limô
, size_à
≈ages_deˇy_max
,

819 
boﬁ
 
is_background_thªad
) {

820 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

821 
WITNESS_RANK_CORE
, 1);

822 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
deˇy
->
mtx
);

824 i‡(
deˇy
->
purgög
) {

827 
deˇy
->
purgög
 = 
åue
;

828 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
deˇy
->
mtx
);

830 
exã¡_hooks_t
 *
exã¡_hooks
 = 
	`exã¡_hooks_gë
(
¨ía
);

832 
exã¡_li°_t
 
deˇy_exã¡s
;

833 
	`exã¡_li°_öô
(&
deˇy_exã¡s
);

835 
size_t
 
≈urge
 = 
	`¨ía_°ash_deˇyed
(
tsdn
, 
¨ía
, &
exã¡_hooks
, 
exã¡s
,

836 
≈ages_limô
, 
≈ages_deˇy_max
, &
deˇy_exã¡s
);

837 i‡(
≈urge
 != 0) {

838 
UNUSED
 
size_t
 
≈urged
 = 
	`¨ía_deˇy_°ashed
(
tsdn
, 
¨ía
,

839 &
exã¡_hooks
, 
deˇy
, 
exã¡s
, 
Æl
, &
deˇy_exã¡s
,

840 
is_background_thªad
);

841 
	`as£π
(
≈urged
 =
≈urge
);

844 
	`mÆloc_muãx_lock
(
tsdn
, &
deˇy
->
mtx
);

845 
deˇy
->
purgög
 = 
Ál£
;

846 
	}
}

848 
boﬁ


849 
	$¨ía_deˇy_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
¨ía_deˇy_t
 *
deˇy
,

850 
exã¡s_t
 *
exã¡s
, 
boﬁ
 
is_background_thªad
, boﬁ 
Æl
) {

851 i‡(
Æl
) {

852 
	`mÆloc_muãx_lock
(
tsdn
, &
deˇy
->
mtx
);

853 
	`¨ía_deˇy_to_limô
(
tsdn
, 
¨ía
, 
deˇy
, 
exã¡s
, 
Æl
, 0,

854 
	`exã¡s_≈ages_gë
(
exã¡s
), 
is_background_thªad
);

855 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
deˇy
->
mtx
);

857  
Ál£
;

860 i‡(
	`mÆloc_muãx_åylock
(
tsdn
, &
deˇy
->
mtx
)) {

862  
åue
;

865 
boﬁ
 
ïoch_adv™˚d
 = 
	`¨ía_maybe_deˇy
(
tsdn
, 
¨ía
, 
deˇy
, 
exã¡s
,

866 
is_background_thªad
);

867 
size_t
 
≈ages_√w
;

868 i‡(
ïoch_adv™˚d
) {

870 
≈ages_√w
 = 
deˇy
->
backlog
[
SMOOTHSTEP_NSTEPS
-1];

872 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
deˇy
->
mtx
);

874 i‡(
have_background_thªad
 && 
	`background_thªad_íabÀd
() &&

875 
ïoch_adv™˚d
 && !
is_background_thªad
) {

876 
	`background_thªad_öãrvÆ_check
(
tsdn
, 
¨ía
, 
deˇy
, 
≈ages_√w
);

879  
Ál£
;

880 
	}
}

882 
boﬁ


883 
	$¨ía_deˇy_dúty
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
boﬁ
 
is_background_thªad
,

884 
boﬁ
 
Æl
) {

885  
	`¨ía_deˇy_im∂
(
tsdn
, 
¨ía
, &¨ía->
deˇy_dúty
,

886 &
¨ía
->
exã¡s_dúty
, 
is_background_thªad
, 
Æl
);

887 
	}
}

889 
boﬁ


890 
	$¨ía_deˇy_muzzy
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
boﬁ
 
is_background_thªad
,

891 
boﬁ
 
Æl
) {

892  
	`¨ía_deˇy_im∂
(
tsdn
, 
¨ía
, &¨ía->
deˇy_muzzy
,

893 &
¨ía
->
exã¡s_muzzy
, 
is_background_thªad
, 
Æl
);

894 
	}
}

897 
	$¨ía_deˇy
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
boﬁ
 
is_background_thªad
, boﬁ 
Æl
) {

898 i‡(
	`¨ía_deˇy_dúty
(
tsdn
, 
¨ía
, 
is_background_thªad
, 
Æl
)) {

901 
	`¨ía_deˇy_muzzy
(
tsdn
, 
¨ía
, 
is_background_thªad
, 
Æl
);

902 
	}
}

905 
	$¨ía_¶ab_dÆloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
¶ab
) {

906 
	`¨ía_«˘ive_sub
(
¨ía
, 
	`exã¡_size_gë
(
¶ab
Ë>> 
LG_PAGE
);

908 
exã¡_hooks_t
 *
exã¡_hooks
 = 
EXTENT_HOOKS_INITIALIZER
;

909 
	`¨ía_exã¡s_dúty_dÆloc
(
tsdn
, 
¨ía
, &
exã¡_hooks
, 
¶ab
);

910 
	}
}

913 
	$¨ía_bö_¶abs_n⁄fuŒ_ö£π
(
bö_t
 *
bö
, 
exã¡_t
 *
¶ab
) {

914 
	`as£π
(
	`exã¡_n‰ì_gë
(
¶ab
) > 0);

915 
	`exã¡_hóp_ö£π
(&
bö
->
¶abs_n⁄fuŒ
, 
¶ab
);

916 
	}
}

919 
	$¨ía_bö_¶abs_n⁄fuŒ_ªmove
(
bö_t
 *
bö
, 
exã¡_t
 *
¶ab
) {

920 
	`exã¡_hóp_ªmove
(&
bö
->
¶abs_n⁄fuŒ
, 
¶ab
);

921 
	}
}

923 
exã¡_t
 *

924 
	$¨ía_bö_¶abs_n⁄fuŒ_åygë
(
bö_t
 *
bö
) {

925 
exã¡_t
 *
¶ab
 = 
	`exã¡_hóp_ªmove_fú°
(&
bö
->
¶abs_n⁄fuŒ
);

926 i‡(
¶ab
 =
NULL
) {

927  
NULL
;

929 i‡(
c⁄fig_°©s
) {

930 
bö
->
°©s
.
ª¶abs
++;

932  
¶ab
;

933 
	}
}

936 
	$¨ía_bö_¶abs_fuŒ_ö£π
(
¨ía_t
 *
¨ía
, 
bö_t
 *
bö
, 
exã¡_t
 *
¶ab
) {

937 
	`as£π
(
	`exã¡_n‰ì_gë
(
¶ab
) == 0);

943 i‡(
	`¨ía_is_auto
(
¨ía
)) {

946 
	`exã¡_li°_≠≥nd
(&
bö
->
¶abs_fuŒ
, 
¶ab
);

947 
	}
}

950 
	$¨ía_bö_¶abs_fuŒ_ªmove
(
¨ía_t
 *
¨ía
, 
bö_t
 *
bö
, 
exã¡_t
 *
¶ab
) {

951 i‡(
	`¨ía_is_auto
(
¨ía
)) {

954 
	`exã¡_li°_ªmove
(&
bö
->
¶abs_fuŒ
, 
¶ab
);

955 
	}
}

958 
	$¨ía_ª£t
(
tsd_t
 *
tsd
, 
¨ía_t
 *
¨ía
) {

974 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
¨ía
->
œrge_mtx
);

976 
exã¡_t
 *
exã¡
 = 
	`exã¡_li°_fú°
(&
¨ía
->
œrge
);Éxtent !=

977 
NULL
; 
exã¡
 = 
	`exã¡_li°_fú°
(&
¨ía
->
œrge
)) {

978 *
±r
 = 
	`exã¡_ba£_gë
(
exã¡
);

979 
size_t
 
usize
;

981 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
¨ía
->
œrge_mtx
);

982 
Æloc_˘x_t
 
Æloc_˘x
;

983 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsd_πªe_˘x
(
tsd
);

984 
	`πªe_szöd_¶ab_ªad
(
	`tsd_tsdn
(
tsd
), &
exã¡s_πªe
, 
πªe_˘x
,

985 (
uöçå_t
)
±r
, 
åue
, &
Æloc_˘x
.
szöd
, &Æloc_˘x.
¶ab
);

986 
	`as£π
(
Æloc_˘x
.
szöd
 !
NSIZES
);

988 i‡(
c⁄fig_°©s
 || (
c⁄fig_¥of
 && 
›t_¥of
)) {

989 
usize
 = 
	`sz_ödex2size
(
Æloc_˘x
.
szöd
);

990 
	`as£π
(
usize
 =
	`ißŒoc
(
	`tsd_tsdn
(
tsd
), 
±r
));

993 i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

994 
	`¥of_‰ì
(
tsd
, 
±r
, 
usize
, &
Æloc_˘x
);

996 
	`œrge_dÆloc
(
	`tsd_tsdn
(
tsd
), 
exã¡
);

997 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
¨ía
->
œrge_mtx
);

999 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
¨ía
->
œrge_mtx
);

1002 
i
 = 0; i < 
NBINS
; i++) {

1003 
exã¡_t
 *
¶ab
;

1004 
bö_t
 *
bö
 = &
¨ía
->
bös
[
i
];

1005 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
bö
->
lock
);

1006 i‡(
bö
->
¶abcur
 !
NULL
) {

1007 
¶ab
 = 
bö
->
¶abcur
;

1008 
bö
->
¶abcur
 = 
NULL
;

1009 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
bö
->
lock
);

1010 
	`¨ía_¶ab_dÆloc
(
	`tsd_tsdn
(
tsd
), 
¨ía
, 
¶ab
);

1011 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
bö
->
lock
);

1013 (
¶ab
 = 
	`exã¡_hóp_ªmove_fú°
(&
bö
->
¶abs_n⁄fuŒ
)) !=

1014 
NULL
) {

1015 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
bö
->
lock
);

1016 
	`¨ía_¶ab_dÆloc
(
	`tsd_tsdn
(
tsd
), 
¨ía
, 
¶ab
);

1017 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
bö
->
lock
);

1019 
¶ab
 = 
	`exã¡_li°_fú°
(&
bö
->
¶abs_fuŒ
); sœb !
NULL
;

1020 
¶ab
 = 
	`exã¡_li°_fú°
(&
bö
->
¶abs_fuŒ
)) {

1021 
	`¨ía_bö_¶abs_fuŒ_ªmove
(
¨ía
, 
bö
, 
¶ab
);

1022 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
bö
->
lock
);

1023 
	`¨ía_¶ab_dÆloc
(
	`tsd_tsdn
(
tsd
), 
¨ía
, 
¶ab
);

1024 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
bö
->
lock
);

1026 i‡(
c⁄fig_°©s
) {

1027 
bö
->
°©s
.
cuºegs
 = 0;

1028 
bö
->
°©s
.
cur¶abs
 = 0;

1030 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
bö
->
lock
);

1033 
	`©omic_°‹e_zu
(&
¨ía
->
«˘ive
, 0, 
ATOMIC_RELAXED
);

1034 
	}
}

1037 
	$¨ía_de°roy_ªèöed
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

1047 
exã¡_hooks_t
 *
exã¡_hooks
 = 
	`exã¡_hooks_gë
(
¨ía
);

1048 
exã¡_t
 *
exã¡
;

1049 (
exã¡
 = 
	`exã¡s_evi˘
(
tsdn
, 
¨ía
, &
exã¡_hooks
,

1050 &
¨ía
->
exã¡s_ªèöed
, 0)Ë!
NULL
) {

1051 
	`exã¡_de°roy_wøµî
(
tsdn
, 
¨ía
, &
exã¡_hooks
, 
exã¡
);

1053 
	}
}

1056 
	$¨ía_de°roy
(
tsd_t
 *
tsd
, 
¨ía_t
 *
¨ía
) {

1057 
	`as£π
(
	`ba£_öd_gë
(
¨ía
->
ba£
Ë>
«ª«s_auto
);

1058 
	`as£π
(
	`¨ía_¡hªads_gë
(
¨ía
, 
Ál£
) == 0);

1059 
	`as£π
(
	`¨ía_¡hªads_gë
(
¨ía
, 
åue
) == 0);

1066 
	`as£π
(
	`exã¡s_≈ages_gë
(&
¨ía
->
exã¡s_dúty
) == 0);

1067 
	`as£π
(
	`exã¡s_≈ages_gë
(&
¨ía
->
exã¡s_muzzy
) == 0);

1070 
	`¨ía_de°roy_ªèöed
(
	`tsd_tsdn
(
tsd
), 
¨ía
);

1082 
	`¨ía_£t
(
	`ba£_öd_gë
(
¨ía
->
ba£
), 
NULL
);

1088 
	`ba£_dñëe
(
	`tsd_tsdn
(
tsd
), 
¨ía
->
ba£
);

1089 
	}
}

1091 
exã¡_t
 *

1092 
	$¨ía_¶ab_Æloc_h¨d
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1093 
exã¡_hooks_t
 **
r_exã¡_hooks
, c⁄° 
bö_öfo_t
 *
bö_öfo
,

1094 
szöd_t
 
szöd
) {

1095 
exã¡_t
 *
¶ab
;

1096 
boﬁ
 
zîo
, 
commô
;

1098 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

1099 
WITNESS_RANK_CORE
, 0);

1101 
zîo
 = 
Ál£
;

1102 
commô
 = 
åue
;

1103 
¶ab
 = 
	`exã¡_Æloc_wøµî
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
NULL
,

1104 
bö_öfo
->
¶ab_size
, 0, 
PAGE
, 
åue
, 
szöd
, &
zîo
, &
commô
);

1106 i‡(
c⁄fig_°©s
 && 
¶ab
 !
NULL
) {

1107 
	`¨ía_°©s_m≠≥d_add
(
tsdn
, &
¨ía
->
°©s
,

1108 
bö_öfo
->
¶ab_size
);

1111  
¶ab
;

1112 
	}
}

1114 
exã¡_t
 *

1115 
	$¨ía_¶ab_Æloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
szöd_t
 
bööd
,

1116 c⁄° 
bö_öfo_t
 *
bö_öfo
) {

1117 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

1118 
WITNESS_RANK_CORE
, 0);

1120 
exã¡_hooks_t
 *
exã¡_hooks
 = 
EXTENT_HOOKS_INITIALIZER
;

1121 
szöd_t
 
szöd
 = 
	`sz_size2ödex
(
bö_öfo
->
ªg_size
);

1122 
boﬁ
 
zîo
 = 
Ál£
;

1123 
boﬁ
 
commô
 = 
åue
;

1124 
exã¡_t
 *
¶ab
 = 
	`exã¡s_Æloc
(
tsdn
, 
¨ía
, &
exã¡_hooks
,

1125 &
¨ía
->
exã¡s_dúty
, 
NULL
, 
bö_öfo
->
¶ab_size
, 0, 
PAGE
, 
åue
,

1126 
bööd
, &
zîo
, &
commô
);

1127 i‡(
¶ab
 =
NULL
) {

1128 
¶ab
 = 
	`exã¡s_Æloc
(
tsdn
, 
¨ía
, &
exã¡_hooks
,

1129 &
¨ía
->
exã¡s_muzzy
, 
NULL
, 
bö_öfo
->
¶ab_size
, 0, 
PAGE
,

1130 
åue
, 
bööd
, &
zîo
, &
commô
);

1132 i‡(
¶ab
 =
NULL
) {

1133 
¶ab
 = 
	`¨ía_¶ab_Æloc_h¨d
(
tsdn
, 
¨ía
, &
exã¡_hooks
,

1134 
bö_öfo
, 
szöd
);

1135 i‡(
¶ab
 =
NULL
) {

1136  
NULL
;

1139 
	`as£π
(
	`exã¡_¶ab_gë
(
¶ab
));

1142 
¨ía_¶ab_d©a_t
 *
¶ab_d©a
 = 
	`exã¡_¶ab_d©a_gë
(
¶ab
);

1143 
	`exã¡_n‰ì_£t
(
¶ab
, 
bö_öfo
->
ƒegs
);

1144 
	`bôm≠_öô
(
¶ab_d©a
->
bôm≠
, &
bö_öfo
->
bôm≠_öfo
, 
Ál£
);

1146 
	`¨ía_«˘ive_add
(
¨ía
, 
	`exã¡_size_gë
(
¶ab
Ë>> 
LG_PAGE
);

1148  
¶ab
;

1149 
	}
}

1151 
exã¡_t
 *

1152 
	$¨ía_bö_n⁄fuŒ_¶ab_gë
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
bö_t
 *
bö
,

1153 
szöd_t
 
bööd
) {

1154 
exã¡_t
 *
¶ab
;

1155 c⁄° 
bö_öfo_t
 *
bö_öfo
;

1158 
¶ab
 = 
	`¨ía_bö_¶abs_n⁄fuŒ_åygë
(
bö
);

1159 i‡(
¶ab
 !
NULL
) {

1160  
¶ab
;

1164 
bö_öfo
 = &
bö_öfos
[
bööd
];

1167 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
bö
->
lock
);

1169 
¶ab
 = 
	`¨ía_¶ab_Æloc
(
tsdn
, 
¨ía
, 
bööd
, 
bö_öfo
);

1171 
	`mÆloc_muãx_lock
(
tsdn
, &
bö
->
lock
);

1172 i‡(
¶ab
 !
NULL
) {

1173 i‡(
c⁄fig_°©s
) {

1174 
bö
->
°©s
.
n¶abs
++;

1175 
bö
->
°©s
.
cur¶abs
++;

1177  
¶ab
;

1185 
¶ab
 = 
	`¨ía_bö_¶abs_n⁄fuŒ_åygë
(
bö
);

1186 i‡(
¶ab
 !
NULL
) {

1187  
¶ab
;

1190  
NULL
;

1191 
	}
}

1195 
	$¨ía_bö_mÆloc_h¨d
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
bö_t
 *
bö
,

1196 
szöd_t
 
bööd
) {

1197 c⁄° 
bö_öfo_t
 *
bö_öfo
;

1198 
exã¡_t
 *
¶ab
;

1200 
bö_öfo
 = &
bö_öfos
[
bööd
];

1201 i‡(!
	`¨ía_is_auto
(
¨ía
Ë&& 
bö
->
¶abcur
 !
NULL
) {

1202 
	`¨ía_bö_¶abs_fuŒ_ö£π
(
¨ía
, 
bö
, bö->
¶abcur
);

1203 
bö
->
¶abcur
 = 
NULL
;

1205 
¶ab
 = 
	`¨ía_bö_n⁄fuŒ_¶ab_gë
(
tsdn
, 
¨ía
, 
bö
, 
bööd
);

1206 i‡(
bö
->
¶abcur
 !
NULL
) {

1211 i‡(
	`exã¡_n‰ì_gë
(
bö
->
¶abcur
) > 0) {

1212 *
ªt
 = 
	`¨ía_¶ab_ªg_Æloc
(
tsdn
, 
bö
->
¶abcur
,

1213 
bö_öfo
);

1214 i‡(
¶ab
 !
NULL
) {

1224 i‡(
	`exã¡_n‰ì_gë
(
¶ab
Ë=
bö_öfo
->
ƒegs
) {

1225 
	`¨ía_dÆloc_bö_¶ab
(
tsdn
, 
¨ía
, 
¶ab
,

1226 
bö
);

1228 
	`¨ía_bö_lowî_¶ab
(
tsdn
, 
¨ía
, 
¶ab
,

1229 
bö
);

1232  
ªt
;

1235 
	`¨ía_bö_¶abs_fuŒ_ö£π
(
¨ía
, 
bö
, bö->
¶abcur
);

1236 
bö
->
¶abcur
 = 
NULL
;

1239 i‡(
¶ab
 =
NULL
) {

1240  
NULL
;

1242 
bö
->
¶abcur
 = 
¶ab
;

1244 
	`as£π
(
	`exã¡_n‰ì_gë
(
bö
->
¶abcur
) > 0);

1246  
	`¨ía_¶ab_ªg_Æloc
(
tsdn
, 
¶ab
, 
bö_öfo
);

1247 
	}
}

1250 
	$¨ía_tˇche_fûl_smÆl
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
tˇche_t
 *
tˇche
,

1251 
ˇche_bö_t
 *
tbö
, 
szöd_t
 
bööd
, 
uöt64_t
 
¥of_accumbyãs
) {

1252 
i
, 
nfûl
;

1253 
bö_t
 *
bö
;

1255 
	`as£π
(
tbö
->
nˇched
 == 0);

1257 i‡(
c⁄fig_¥of
 && 
	`¨ía_¥of_accum
(
tsdn
, 
¨ía
, 
¥of_accumbyãs
)) {

1258 
	`¥of_idump
(
tsdn
);

1260 
bö
 = &
¨ía
->
bös
[
bööd
];

1261 
	`mÆloc_muãx_lock
(
tsdn
, &
bö
->
lock
);

1262 
i
 = 0, 
nfûl
 = (
tˇche_bö_öfo
[
bööd
].
nˇched_max
 >>

1263 
tˇche
->
lg_fûl_div
[
bööd
]); 
i
 < 
nfûl
; i++) {

1264 
exã¡_t
 *
¶ab
;

1265 *
±r
;

1266 i‡((
¶ab
 = 
bö
->
¶abcur
Ë!
NULL
 && 
	`exã¡_n‰ì_gë
(slab) >

1268 
±r
 = 
	`¨ía_¶ab_ªg_Æloc
(
tsdn
, 
¶ab
,

1269 &
bö_öfos
[
bööd
]);

1271 
±r
 = 
	`¨ía_bö_mÆloc_h¨d
(
tsdn
, 
¨ía
, 
bö
, 
bööd
);

1273 i‡(
±r
 =
NULL
) {

1279 i‡(
i
 > 0) {

1280 
	`memmove
(
tbö
->
avaû
 - 
i
,Åbö->avaû - 
nfûl
,

1281 
i
 * (*));

1285 i‡(
c⁄fig_fûl
 && 
	`u∆ikñy
(
›t_junk_Æloc
)) {

1286 
	`¨ía_Æloc_junk_smÆl
(
±r
, &
bö_öfos
[
bööd
], 
åue
);

1289 *(
tbö
->
avaû
 - 
nfûl
 + 
i
Ë
±r
;

1291 i‡(
c⁄fig_°©s
) {

1292 
bö
->
°©s
.
nmÆloc
 +
i
;

1293 
bö
->
°©s
.
ƒeque°s
 +
tbö
->
t°©s
.nrequests;

1294 
bö
->
°©s
.
cuºegs
 +
i
;

1295 
bö
->
°©s
.
nfûls
++;

1296 
tbö
->
t°©s
.
ƒeque°s
 = 0;

1298 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
bö
->
lock
);

1299 
tbö
->
nˇched
 = 
i
;

1300 
	`¨ía_deˇy_tick
(
tsdn
, 
¨ía
);

1301 
	}
}

1304 
	$¨ía_Æloc_junk_smÆl
(*
±r
, c⁄° 
bö_öfo_t
 *
bö_öfo
, 
boﬁ
 
zîo
) {

1305 i‡(!
zîo
) {

1306 
	`mem£t
(
±r
, 
JEMALLOC_ALLOC_JUNK
, 
bö_öfo
->
ªg_size
);

1308 
	}
}

1311 
	$¨ía_dÆloc_junk_smÆl_im∂
(*
±r
, c⁄° 
bö_öfo_t
 *
bö_öfo
) {

1312 
	`mem£t
(
±r
, 
JEMALLOC_FREE_JUNK
, 
bö_öfo
->
ªg_size
);

1313 
	}
}

1314 
¨ía_dÆloc_junk_smÆl_t
 *
JET_MUTABLE
 
	g¨ía_dÆloc_junk_smÆl
 =

1315 
¨ía_dÆloc_junk_smÆl_im∂
;

1318 
	$¨ía_mÆloc_smÆl
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
szöd_t
 
bööd
, 
boﬁ
 
zîo
) {

1319 *
ªt
;

1320 
bö_t
 *
bö
;

1321 
size_t
 
usize
;

1322 
exã¡_t
 *
¶ab
;

1324 
	`as£π
(
bööd
 < 
NBINS
);

1325 
bö
 = &
¨ía
->
bös
[
bööd
];

1326 
usize
 = 
	`sz_ödex2size
(
bööd
);

1328 
	`mÆloc_muãx_lock
(
tsdn
, &
bö
->
lock
);

1329 i‡((
¶ab
 = 
bö
->
¶abcur
Ë!
NULL
 && 
	`exã¡_n‰ì_gë
(slab) > 0) {

1330 
ªt
 = 
	`¨ía_¶ab_ªg_Æloc
(
tsdn
, 
¶ab
, &
bö_öfos
[
bööd
]);

1332 
ªt
 = 
	`¨ía_bö_mÆloc_h¨d
(
tsdn
, 
¨ía
, 
bö
, 
bööd
);

1335 i‡(
ªt
 =
NULL
) {

1336 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
bö
->
lock
);

1337  
NULL
;

1340 i‡(
c⁄fig_°©s
) {

1341 
bö
->
°©s
.
nmÆloc
++;

1342 
bö
->
°©s
.
ƒeque°s
++;

1343 
bö
->
°©s
.
cuºegs
++;

1345 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
bö
->
lock
);

1346 i‡(
c⁄fig_¥of
 && 
	`¨ía_¥of_accum
(
tsdn
, 
¨ía
, 
usize
)) {

1347 
	`¥of_idump
(
tsdn
);

1350 i‡(!
zîo
) {

1351 i‡(
c⁄fig_fûl
) {

1352 i‡(
	`u∆ikñy
(
›t_junk_Æloc
)) {

1353 
	`¨ía_Æloc_junk_smÆl
(
ªt
,

1354 &
bö_öfos
[
bööd
], 
Ál£
);

1355 } i‡(
	`u∆ikñy
(
›t_zîo
)) {

1356 
	`mem£t
(
ªt
, 0, 
usize
);

1360 i‡(
c⁄fig_fûl
 && 
	`u∆ikñy
(
›t_junk_Æloc
)) {

1361 
	`¨ía_Æloc_junk_smÆl
(
ªt
, &
bö_öfos
[
bööd
],

1362 
åue
);

1364 
	`mem£t
(
ªt
, 0, 
usize
);

1367 
	`¨ía_deˇy_tick
(
tsdn
, 
¨ía
);

1368  
ªt
;

1369 
	}
}

1372 
	$¨ía_mÆloc_h¨d
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
size
, 
szöd_t
 
öd
,

1373 
boﬁ
 
zîo
) {

1374 
	`as£π
(!
	`tsdn_nuŒ
(
tsdn
Ë|| 
¨ía
 !
NULL
);

1376 i‡(
	`likñy
(!
	`tsdn_nuŒ
(
tsdn
))) {

1377 
¨ía
 = 
	`¨ía_choo£
(
	`tsdn_tsd
(
tsdn
),árena);

1379 i‡(
	`u∆ikñy
(
¨ía
 =
NULL
)) {

1380  
NULL
;

1383 i‡(
	`likñy
(
size
 <
SMALL_MAXCLASS
)) {

1384  
	`¨ía_mÆloc_smÆl
(
tsdn
, 
¨ía
, 
öd
, 
zîo
);

1386  
	`œrge_mÆloc
(
tsdn
, 
¨ía
, 
	`sz_ödex2size
(
öd
), 
zîo
);

1387 
	}
}

1390 
	$¨ía_∑Œoc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
usize
, size_à
Æignmít
,

1391 
boﬁ
 
zîo
, 
tˇche_t
 *
tˇche
) {

1392 *
ªt
;

1394 i‡(
usize
 <
SMALL_MAXCLASS
 && (
Æignmít
 < 
PAGE
 || (alignment == PAGE

1395 && (
usize
 & 
PAGE_MASK
) == 0))) {

1397 
ªt
 = 
	`¨ía_mÆloc
(
tsdn
, 
¨ía
, 
usize
, 
	`sz_size2ödex
(usize),

1398 
zîo
, 
tˇche
, 
åue
);

1400 i‡(
	`likñy
(
Æignmít
 <
CACHELINE
)) {

1401 
ªt
 = 
	`œrge_mÆloc
(
tsdn
, 
¨ía
, 
usize
, 
zîo
);

1403 
ªt
 = 
	`œrge_∑Œoc
(
tsdn
, 
¨ía
, 
usize
, 
Æignmít
, 
zîo
);

1406  
ªt
;

1407 
	}
}

1410 
	$¨ía_¥of_¥omŸe
(
tsdn_t
 *
tsdn
, c⁄° *
±r
, 
size_t
 
usize
) {

1411 
	`ˇs£π
(
c⁄fig_¥of
);

1412 
	`as£π
(
±r
 !
NULL
);

1413 
	`as£π
(
	`ißŒoc
(
tsdn
, 
±r
Ë=
LARGE_MINCLASS
);

1414 
	`as£π
(
usize
 <
SMALL_MAXCLASS
);

1416 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

1417 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

1419 
exã¡_t
 *
exã¡
 = 
	`πªe_exã¡_ªad
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

1420 (
uöçå_t
)
±r
, 
åue
);

1421 
¨ía_t
 *
¨ía
 = 
	`exã¡_¨ía_gë
(
exã¡
);

1423 
szöd_t
 
szöd
 = 
	`sz_size2ödex
(
usize
);

1424 
	`exã¡_szöd_£t
(
exã¡
, 
szöd
);

1425 
	`πªe_szöd_¶ab_upd©e
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
, (
uöçå_t
)
±r
,

1426 
szöd
, 
Ál£
);

1428 
	`¥of_accum_ˇn˚l
(
tsdn
, &
¨ía
->
¥of_accum
, 
usize
);

1430 
	`as£π
(
	`ißŒoc
(
tsdn
, 
±r
Ë=
usize
);

1431 
	}
}

1433 
size_t


1434 
	$¨ía_¥of_demŸe
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
, c⁄° *
±r
) {

1435 
	`ˇs£π
(
c⁄fig_¥of
);

1436 
	`as£π
(
±r
 !
NULL
);

1438 
	`exã¡_szöd_£t
(
exã¡
, 
NBINS
);

1439 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

1440 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

1441 
	`πªe_szöd_¶ab_upd©e
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
, (
uöçå_t
)
±r
,

1442 
NBINS
, 
Ál£
);

1444 
	`as£π
(
	`ißŒoc
(
tsdn
, 
±r
Ë=
LARGE_MINCLASS
);

1446  
LARGE_MINCLASS
;

1447 
	}
}

1450 
	$¨ía_dÆloc_¥omŸed
(
tsdn_t
 *
tsdn
, *
±r
, 
tˇche_t
 *
tˇche
,

1451 
boﬁ
 
¶ow_∑th
) {

1452 
	`ˇs£π
(
c⁄fig_¥of
);

1453 
	`as£π
(
›t_¥of
);

1455 
exã¡_t
 *
exã¡
 = 
	`õÆloc
(
tsdn
, 
±r
);

1456 
size_t
 
usize
 = 
	`¨ía_¥of_demŸe
(
tsdn
, 
exã¡
, 
±r
);

1457 i‡(
usize
 <
tˇche_max˛ass
) {

1458 
	`tˇche_dÆloc_œrge
(
	`tsdn_tsd
(
tsdn
), 
tˇche
, 
±r
,

1459 
	`sz_size2ödex
(
usize
), 
¶ow_∑th
);

1461 
	`œrge_dÆloc
(
tsdn
, 
exã¡
);

1463 
	}
}

1466 
	$¨ía_dissocüã_bö_¶ab
(
¨ía_t
 *
¨ía
, 
exã¡_t
 *
¶ab
, 
bö_t
 *
bö
) {

1468 i‡(
¶ab
 =
bö
->
¶abcur
) {

1469 
bö
->
¶abcur
 = 
NULL
;

1471 
szöd_t
 
bööd
 = 
	`exã¡_szöd_gë
(
¶ab
);

1472 c⁄° 
bö_öfo_t
 *
bö_öfo
 = &
bö_öfos
[
bööd
];

1479 i‡(
bö_öfo
->
ƒegs
 == 1) {

1480 
	`¨ía_bö_¶abs_fuŒ_ªmove
(
¨ía
, 
bö
, 
¶ab
);

1482 
	`¨ía_bö_¶abs_n⁄fuŒ_ªmove
(
bö
, 
¶ab
);

1485 
	}
}

1488 
	$¨ía_dÆloc_bö_¶ab
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
¶ab
,

1489 
bö_t
 *
bö
) {

1490 
	`as£π
(
¶ab
 !
bö
->
¶abcur
);

1492 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
bö
->
lock
);

1494 
	`¨ía_¶ab_dÆloc
(
tsdn
, 
¨ía
, 
¶ab
);

1496 
	`mÆloc_muãx_lock
(
tsdn
, &
bö
->
lock
);

1497 i‡(
c⁄fig_°©s
) {

1498 
bö
->
°©s
.
cur¶abs
--;

1500 
	}
}

1503 
	$¨ía_bö_lowî_¶ab
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
¶ab
, 
bö_t
 *
bö
) {

1504 
	`as£π
(
	`exã¡_n‰ì_gë
(
¶ab
) > 0);

1512 i‡(
bö
->
¶abcur
 !
NULL
 && 
	`exã¡_¢ad_comp
(bö->¶abcur, 
¶ab
) > 0) {

1514 i‡(
	`exã¡_n‰ì_gë
(
bö
->
¶abcur
) > 0) {

1515 
	`¨ía_bö_¶abs_n⁄fuŒ_ö£π
(
bö
, bö->
¶abcur
);

1517 
	`¨ía_bö_¶abs_fuŒ_ö£π
(
¨ía
, 
bö
, bö->
¶abcur
);

1519 
bö
->
¶abcur
 = 
¶ab
;

1520 i‡(
c⁄fig_°©s
) {

1521 
bö
->
°©s
.
ª¶abs
++;

1524 
	`¨ía_bö_¶abs_n⁄fuŒ_ö£π
(
bö
, 
¶ab
);

1526 
	}
}

1529 
	$¨ía_dÆloc_bö_locked_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
¶ab
,

1530 *
±r
, 
boﬁ
 
junked
) {

1531 
¨ía_¶ab_d©a_t
 *
¶ab_d©a
 = 
	`exã¡_¶ab_d©a_gë
(
¶ab
);

1532 
szöd_t
 
bööd
 = 
	`exã¡_szöd_gë
(
¶ab
);

1533 
bö_t
 *
bö
 = &
¨ía
->
bös
[
bööd
];

1534 c⁄° 
bö_öfo_t
 *
bö_öfo
 = &
bö_öfos
[
bööd
];

1536 i‡(!
junked
 && 
c⁄fig_fûl
 && 
	`u∆ikñy
(
›t_junk_‰ì
)) {

1537 
	`¨ía_dÆloc_junk_smÆl
(
±r
, 
bö_öfo
);

1540 
	`¨ía_¶ab_ªg_dÆloc
(
tsdn
, 
¶ab
, 
¶ab_d©a
, 
±r
);

1541 
n‰ì
 = 
	`exã¡_n‰ì_gë
(
¶ab
);

1542 i‡(
n‰ì
 =
bö_öfo
->
ƒegs
) {

1543 
	`¨ía_dissocüã_bö_¶ab
(
¨ía
, 
¶ab
, 
bö
);

1544 
	`¨ía_dÆloc_bö_¶ab
(
tsdn
, 
¨ía
, 
¶ab
, 
bö
);

1545 } i‡(
n‰ì
 =1 && 
¶ab
 !
bö
->
¶abcur
) {

1546 
	`¨ía_bö_¶abs_fuŒ_ªmove
(
¨ía
, 
bö
, 
¶ab
);

1547 
	`¨ía_bö_lowî_¶ab
(
tsdn
, 
¨ía
, 
¶ab
, 
bö
);

1550 i‡(
c⁄fig_°©s
) {

1551 
bö
->
°©s
.
ndÆloc
++;

1552 
bö
->
°©s
.
cuºegs
--;

1554 
	}
}

1557 
	$¨ía_dÆloc_bö_junked_locked
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
exã¡
,

1558 *
±r
) {

1559 
	`¨ía_dÆloc_bö_locked_im∂
(
tsdn
, 
¨ía
, 
exã¡
, 
±r
, 
åue
);

1560 
	}
}

1563 
	$¨ía_dÆloc_bö
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
exã¡
, *
±r
) {

1564 
szöd_t
 
bööd
 = 
	`exã¡_szöd_gë
(
exã¡
);

1565 
bö_t
 *
bö
 = &
¨ía
->
bös
[
bööd
];

1567 
	`mÆloc_muãx_lock
(
tsdn
, &
bö
->
lock
);

1568 
	`¨ía_dÆloc_bö_locked_im∂
(
tsdn
, 
¨ía
, 
exã¡
, 
±r
, 
Ál£
);

1569 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
bö
->
lock
);

1570 
	}
}

1573 
	$¨ía_dÆloc_smÆl
(
tsdn_t
 *
tsdn
, *
±r
) {

1574 
exã¡_t
 *
exã¡
 = 
	`õÆloc
(
tsdn
, 
±r
);

1575 
¨ía_t
 *
¨ía
 = 
	`exã¡_¨ía_gë
(
exã¡
);

1577 
	`¨ía_dÆloc_bö
(
tsdn
, 
¨ía
, 
exã¡
, 
±r
);

1578 
	`¨ía_deˇy_tick
(
tsdn
, 
¨ía
);

1579 
	}
}

1581 
boﬁ


1582 
	$¨ía_øŒoc_no_move
(
tsdn_t
 *
tsdn
, *
±r
, 
size_t
 
ﬁdsize
, size_à
size
,

1583 
size_t
 
exåa
, 
boﬁ
 
zîo
) {

1585 
	`as£π
(
exåa
 =0 || 
size
 +Éxå®<
LARGE_MAXCLASS
);

1587 i‡(
	`u∆ikñy
(
size
 > 
LARGE_MAXCLASS
)) {

1588  
åue
;

1591 
exã¡_t
 *
exã¡
 = 
	`õÆloc
(
tsdn
, 
±r
);

1592 
size_t
 
usize_mö
 = 
	`sz_s2u
(
size
);

1593 
size_t
 
usize_max
 = 
	`sz_s2u
(
size
 + 
exåa
);

1594 i‡(
	`likñy
(
ﬁdsize
 <
SMALL_MAXCLASS
 && 
usize_mö
 <= SMALL_MAXCLASS)) {

1599 
	`as£π
(
bö_öfos
[
	`sz_size2ödex
(
ﬁdsize
)].
ªg_size
 ==

1600 
ﬁdsize
);

1601 i‡((
usize_max
 > 
SMALL_MAXCLASS
 || 
	`sz_size2ödex
(usize_max) !=

1602 
	`sz_size2ödex
(
ﬁdsize
)Ë&& (
size
 > oldsizê|| 
usize_max
 <

1603 
ﬁdsize
)) {

1604  
åue
;

1607 
	`¨ía_deˇy_tick
(
tsdn
, 
	`exã¡_¨ía_gë
(
exã¡
));

1608  
Ál£
;

1609 } i‡(
ﬁdsize
 >
LARGE_MINCLASS
 && 
usize_max
 >= LARGE_MINCLASS) {

1610  
	`œrge_øŒoc_no_move
(
tsdn
, 
exã¡
, 
usize_mö
, 
usize_max
,

1611 
zîo
);

1614  
åue
;

1615 
	}
}

1618 
	$¨ía_øŒoc_move_hñ≥r
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
usize
,

1619 
size_t
 
Æignmít
, 
boﬁ
 
zîo
, 
tˇche_t
 *
tˇche
) {

1620 i‡(
Æignmít
 == 0) {

1621  
	`¨ía_mÆloc
(
tsdn
, 
¨ía
, 
usize
, 
	`sz_size2ödex
(usize),

1622 
zîo
, 
tˇche
, 
åue
);

1624 
usize
 = 
	`sz_ß2u
(usize, 
Æignmít
);

1625 i‡(
	`u∆ikñy
(
usize
 =0 || usizê> 
LARGE_MAXCLASS
)) {

1626  
NULL
;

1628  
	`ùÆlo˘
(
tsdn
, 
usize
, 
Æignmít
, 
zîo
, 
tˇche
, 
¨ía
);

1629 
	}
}

1632 
	$¨ía_øŒoc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, *
±r
, 
size_t
 
ﬁdsize
,

1633 
size_t
 
size
, size_à
Æignmít
, 
boﬁ
 
zîo
, 
tˇche_t
 *
tˇche
) {

1634 
size_t
 
usize
 = 
	`sz_s2u
(
size
);

1635 i‡(
	`u∆ikñy
(
usize
 =0 || 
size
 > 
LARGE_MAXCLASS
)) {

1636  
NULL
;

1639 i‡(
	`likñy
(
usize
 <
SMALL_MAXCLASS
)) {

1641 i‡(!
	`¨ía_øŒoc_no_move
(
tsdn
, 
±r
, 
ﬁdsize
, 
usize
, 0, 
zîo
)) {

1642  
±r
;

1646 i‡(
ﬁdsize
 >
LARGE_MINCLASS
 && 
usize
 >= LARGE_MINCLASS) {

1647  
	`œrge_øŒoc
(
tsdn
, 
¨ía
, 
	`õÆloc
—sdn, 
±r
), 
usize
,

1648 
Æignmít
, 
zîo
, 
tˇche
);

1655 *
ªt
 = 
	`¨ía_øŒoc_move_hñ≥r
(
tsdn
, 
¨ía
, 
usize
, 
Æignmít
,

1656 
zîo
, 
tˇche
);

1657 i‡(
ªt
 =
NULL
) {

1658  
NULL
;

1666 
size_t
 
c›ysize
 = (
usize
 < 
ﬁdsize
) ? usize : oldsize;

1667 
	`mem˝y
(
ªt
, 
±r
, 
c›ysize
);

1668 
	`isdÆlo˘
(
tsdn
, 
±r
, 
ﬁdsize
, 
tˇche
, 
NULL
, 
åue
);

1669  
ªt
;

1670 
	}
}

1672 
dss_¥ec_t


1673 
	$¨ía_dss_¥ec_gë
(
¨ía_t
 *
¨ía
) {

1674  (
dss_¥ec_t
)
	`©omic_lﬂd_u
(&
¨ía
->
dss_¥ec
, 
ATOMIC_ACQUIRE
);

1675 
	}
}

1677 
boﬁ


1678 
	$¨ía_dss_¥ec_£t
(
¨ía_t
 *
¨ía
, 
dss_¥ec_t
 
dss_¥ec
) {

1679 i‡(!
have_dss
) {

1680  (
dss_¥ec
 !
dss_¥ec_dißbÀd
);

1682 
	`©omic_°‹e_u
(&
¨ía
->
dss_¥ec
, ()dss_¥ec, 
ATOMIC_RELEASE
);

1683  
Ál£
;

1684 
	}
}

1686 
ssize_t


1687 
	$¨ía_dúty_deˇy_ms_deÁu…_gë
() {

1688  
	`©omic_lﬂd_zd
(&
dúty_deˇy_ms_deÁu…
, 
ATOMIC_RELAXED
);

1689 
	}
}

1691 
boﬁ


1692 
	$¨ía_dúty_deˇy_ms_deÁu…_£t
(
ssize_t
 
deˇy_ms
) {

1693 i‡(!
	`¨ía_deˇy_ms_vÆid
(
deˇy_ms
)) {

1694  
åue
;

1696 
	`©omic_°‹e_zd
(&
dúty_deˇy_ms_deÁu…
, 
deˇy_ms
, 
ATOMIC_RELAXED
);

1697  
Ál£
;

1698 
	}
}

1700 
ssize_t


1701 
	$¨ía_muzzy_deˇy_ms_deÁu…_gë
() {

1702  
	`©omic_lﬂd_zd
(&
muzzy_deˇy_ms_deÁu…
, 
ATOMIC_RELAXED
);

1703 
	}
}

1705 
boﬁ


1706 
	$¨ía_muzzy_deˇy_ms_deÁu…_£t
(
ssize_t
 
deˇy_ms
) {

1707 i‡(!
	`¨ía_deˇy_ms_vÆid
(
deˇy_ms
)) {

1708  
åue
;

1710 
	`©omic_°‹e_zd
(&
muzzy_deˇy_ms_deÁu…
, 
deˇy_ms
, 
ATOMIC_RELAXED
);

1711  
Ál£
;

1712 
	}
}

1714 
boﬁ


1715 
	$¨ía_ªèö_grow_limô_gë_£t
(
tsd_t
 *
tsd
, 
¨ía_t
 *
¨ía
, 
size_t
 *
ﬁd_limô
,

1716 
size_t
 *
√w_limô
) {

1717 
	`as£π
(
›t_ªèö
);

1719 
pszöd_t
 
√w_öd
 
	`JEMALLOC_CC_SILENCE_INIT
(0);

1720 i‡(
√w_limô
 !
NULL
) {

1721 
size_t
 
limô
 = *
√w_limô
;

1723 i‡((
√w_öd
 = 
	`sz_psz2öd
(
limô
 + 1) - 1) >

1724 
EXTENT_GROW_MAX_PIND
) {

1725  
åue
;

1729 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
¨ía
->
exã¡_grow_mtx
);

1730 i‡(
ﬁd_limô
 !
NULL
) {

1731 *
ﬁd_limô
 = 
	`sz_pöd2sz
(
¨ía
->
ªèö_grow_limô
);

1733 i‡(
√w_limô
 !
NULL
) {

1734 
¨ía
->
ªèö_grow_limô
 = 
√w_öd
;

1736 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
¨ía
->
exã¡_grow_mtx
);

1738  
Ál£
;

1739 
	}
}

1742 
	$¨ía_¡hªads_gë
(
¨ía_t
 *
¨ía
, 
boﬁ
 
öã∫Æ
) {

1743  
	`©omic_lﬂd_u
(&
¨ía
->
¡hªads
[
öã∫Æ
], 
ATOMIC_RELAXED
);

1744 
	}
}

1747 
	$¨ía_¡hªads_öc
(
¨ía_t
 *
¨ía
, 
boﬁ
 
öã∫Æ
) {

1748 
	`©omic_„tch_add_u
(&
¨ía
->
¡hªads
[
öã∫Æ
], 1, 
ATOMIC_RELAXED
);

1749 
	}
}

1752 
	$¨ía_¡hªads_dec
(
¨ía_t
 *
¨ía
, 
boﬁ
 
öã∫Æ
) {

1753 
	`©omic_„tch_sub_u
(&
¨ía
->
¡hªads
[
öã∫Æ
], 1, 
ATOMIC_RELAXED
);

1754 
	}
}

1756 
size_t


1757 
	$¨ía_exã¡_¢_√xt
(
¨ía_t
 *
¨ía
) {

1758  
	`©omic_„tch_add_zu
(&
¨ía
->
exã¡_¢_√xt
, 1, 
ATOMIC_RELAXED
);

1759 
	}
}

1761 
¨ía_t
 *

1762 
	$¨ía_√w
(
tsdn_t
 *
tsdn
, 
öd
, 
exã¡_hooks_t
 *
exã¡_hooks
) {

1763 
¨ía_t
 *
¨ía
;

1764 
ba£_t
 *
ba£
;

1765 
i
;

1767 i‡(
öd
 == 0) {

1768 
ba£
 = 
	`b0gë
();

1770 
ba£
 = 
	`ba£_√w
(
tsdn
, 
öd
, 
exã¡_hooks
);

1771 i‡(
ba£
 =
NULL
) {

1772  
NULL
;

1776 
¨ía
 = (
¨ía_t
 *)
	`ba£_Æloc
(
tsdn
, 
ba£
, ◊ª«_t), 
CACHELINE
);

1777 i‡(
¨ía
 =
NULL
) {

1778 
œbñ_îr‹
;

1781 
	`©omic_°‹e_u
(&
¨ía
->
¡hªads
[0], 0, 
ATOMIC_RELAXED
);

1782 
	`©omic_°‹e_u
(&
¨ía
->
¡hªads
[1], 0, 
ATOMIC_RELAXED
);

1783 
¨ía
->
œ°_thd
 = 
NULL
;

1785 i‡(
c⁄fig_°©s
) {

1786 i‡(
	`¨ía_°©s_öô
(
tsdn
, &
¨ía
->
°©s
)) {

1787 
œbñ_îr‹
;

1790 
	`ql_√w
(&
¨ía
->
tˇche_ql
);

1791 
	`ql_√w
(&
¨ía
->
ˇche_bö_¨øy_des¸ùt‹_ql
);

1792 i‡(
	`mÆloc_muãx_öô
(&
¨ía
->
tˇche_ql_mtx
, "tcache_ql",

1793 
WITNESS_RANK_TCACHE_QL
, 
mÆloc_muãx_ønk_ex˛usive
)) {

1794 
œbñ_îr‹
;

1798 i‡(
c⁄fig_¥of
) {

1799 i‡(
	`¥of_accum_öô
(
tsdn
, &
¨ía
->
¥of_accum
)) {

1800 
œbñ_îr‹
;

1804 i‡(
c⁄fig_ˇche_oblivious
) {

1812 
	`©omic_°‹e_zu
(&
¨ía
->
off£t_°©e
, 
c⁄fig_debug
 ? 
öd
 :

1813 (
size_t
)(
uöçå_t
)
¨ía
, 
ATOMIC_RELAXED
);

1816 
	`©omic_°‹e_zu
(&
¨ía
->
exã¡_¢_√xt
, 0, 
ATOMIC_RELAXED
);

1818 
	`©omic_°‹e_u
(&
¨ía
->
dss_¥ec
, ()
	`exã¡_dss_¥ec_gë
(),

1819 
ATOMIC_RELAXED
);

1821 
	`©omic_°‹e_zu
(&
¨ía
->
«˘ive
, 0, 
ATOMIC_RELAXED
);

1823 
	`exã¡_li°_öô
(&
¨ía
->
œrge
);

1824 i‡(
	`mÆloc_muãx_öô
(&
¨ía
->
œrge_mtx
, "arena_large",

1825 
WITNESS_RANK_ARENA_LARGE
, 
mÆloc_muãx_ønk_ex˛usive
)) {

1826 
œbñ_îr‹
;

1835 i‡(
	`exã¡s_öô
(
tsdn
, &
¨ía
->
exã¡s_dúty
, 
exã¡_°©e_dúty
,

1836 
åue
)) {

1837 
œbñ_îr‹
;

1843 i‡(
	`exã¡s_öô
(
tsdn
, &
¨ía
->
exã¡s_muzzy
, 
exã¡_°©e_muzzy
,

1844 
Ál£
)) {

1845 
œbñ_îr‹
;

1853 i‡(
	`exã¡s_öô
(
tsdn
, &
¨ía
->
exã¡s_ªèöed
, 
exã¡_°©e_ªèöed
,

1854 
Ál£
)) {

1855 
œbñ_îr‹
;

1858 i‡(
	`¨ía_deˇy_öô
(&
¨ía
->
deˇy_dúty
, &¨ía->
exã¡s_dúty
,

1859 
	`¨ía_dúty_deˇy_ms_deÁu…_gë
(), &
¨ía
->
°©s
.
deˇy_dúty
)) {

1860 
œbñ_îr‹
;

1862 i‡(
	`¨ía_deˇy_öô
(&
¨ía
->
deˇy_muzzy
, &¨ía->
exã¡s_muzzy
,

1863 
	`¨ía_muzzy_deˇy_ms_deÁu…_gë
(), &
¨ía
->
°©s
.
deˇy_muzzy
)) {

1864 
œbñ_îr‹
;

1867 
¨ía
->
exã¡_grow_√xt
 = 
	`sz_psz2öd
(
HUGEPAGE
);

1868 
¨ía
->
ªèö_grow_limô
 = 
EXTENT_GROW_MAX_PIND
;

1869 i‡(
	`mÆloc_muãx_öô
(&
¨ía
->
exã¡_grow_mtx
, "extent_grow",

1870 
WITNESS_RANK_EXTENT_GROW
, 
mÆloc_muãx_ønk_ex˛usive
)) {

1871 
œbñ_îr‹
;

1874 
	`exã¡_avaû_√w
(&
¨ía
->
exã¡_avaû
);

1875 i‡(
	`mÆloc_muãx_öô
(&
¨ía
->
exã¡_avaû_mtx
, "extent_avail",

1876 
WITNESS_RANK_EXTENT_AVAIL
, 
mÆloc_muãx_ønk_ex˛usive
)) {

1877 
œbñ_îr‹
;

1881 
i
 = 0; i < 
NBINS
; i++) {

1882 
boﬁ
 
îr
 = 
	`bö_öô
(&
¨ía
->
bös
[
i
]);

1883 i‡(
îr
) {

1884 
œbñ_îr‹
;

1888 
¨ía
->
ba£
 = base;

1890 
	`¨ía_£t
(
öd
, 
¨ía
);

1892 
	`n°ime_öô
(&
¨ía
->
¸óã_time
, 0);

1893 
	`n°ime_upd©e
(&
¨ía
->
¸óã_time
);

1896 i‡(
öd
 != 0) {

1901 
	`as£π
(!
	`tsdn_nuŒ
(
tsdn
));

1902 
	`¥e_ªíå™cy
(
	`tsdn_tsd
(
tsdn
), 
¨ía
);

1903 i‡(
hooks_¨ía_√w_hook
) {

1904 
	`hooks_¨ía_√w_hook
();

1906 
	`po°_ªíå™cy
(
	`tsdn_tsd
(
tsdn
));

1909  
¨ía
;

1910 
œbñ_îr‹
:

1911 i‡(
öd
 != 0) {

1912 
	`ba£_dñëe
(
tsdn
, 
ba£
);

1914  
NULL
;

1915 
	}
}

1918 
	$¨ía_boŸ
() {

1919 
	`¨ía_dúty_deˇy_ms_deÁu…_£t
(
›t_dúty_deˇy_ms
);

1920 
	`¨ía_muzzy_deˇy_ms_deÁu…_£t
(
›t_muzzy_deˇy_ms
);

1921 
	#REGIND_bö_yes
(
ödex
, 
ªg_size
) \

1922 
	`div_öô
(&
¨ía_bööd_div_öfo
[(
ödex
)], (
ªg_size
));

	)

1923 
	#REGIND_bö_no
(
ödex
, 
ªg_size
)

	)

1924 
	#SC
(
ödex
, 
lg_gΩ
, 
lg_dñè
, 
ndñè
, 
psz
, 
bö
, 
pgs
, \

1925 
lg_dñè_lookup
) \

1926 
REGIND_bö_
##
	`bö
(
ödex
, (1U<<
lg_gΩ
Ë+ (
ndñè
 << 
lg_dñè
))

	)

1927 
SIZE_CLASSES


1928 #unde‡
REGIND_bö_yes


1929 #unde‡
REGIND_bö_no


1930 #unde‡
SC


1931 
	}
}

1934 
	$¨ía_¥ef‹k0
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

1935 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
¨ía
->
deˇy_dúty
.
mtx
);

1936 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
¨ía
->
deˇy_muzzy
.
mtx
);

1937 
	}
}

1940 
	$¨ía_¥ef‹k1
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

1941 i‡(
c⁄fig_°©s
) {

1942 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
¨ía
->
tˇche_ql_mtx
);

1944 
	}
}

1947 
	$¨ía_¥ef‹k2
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

1948 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
¨ía
->
exã¡_grow_mtx
);

1949 
	}
}

1952 
	$¨ía_¥ef‹k3
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

1953 
	`exã¡s_¥ef‹k
(
tsdn
, &
¨ía
->
exã¡s_dúty
);

1954 
	`exã¡s_¥ef‹k
(
tsdn
, &
¨ía
->
exã¡s_muzzy
);

1955 
	`exã¡s_¥ef‹k
(
tsdn
, &
¨ía
->
exã¡s_ªèöed
);

1956 
	}
}

1959 
	$¨ía_¥ef‹k4
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

1960 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
¨ía
->
exã¡_avaû_mtx
);

1961 
	}
}

1964 
	$¨ía_¥ef‹k5
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

1965 
	`ba£_¥ef‹k
(
tsdn
, 
¨ía
->
ba£
);

1966 
	}
}

1969 
	$¨ía_¥ef‹k6
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

1970 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
¨ía
->
œrge_mtx
);

1971 
	}
}

1974 
	$¨ía_¥ef‹k7
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

1975 
i
 = 0; i < 
NBINS
; i++) {

1976 
	`bö_¥ef‹k
(
tsdn
, &
¨ía
->
bös
[
i
]);

1978 
	}
}

1981 
	$¨ía_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

1982 
i
;

1984 
i
 = 0; i < 
NBINS
; i++) {

1985 
	`bö_po°f‹k_∑ª¡
(
tsdn
, &
¨ía
->
bös
[
i
]);

1987 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
¨ía
->
œrge_mtx
);

1988 
	`ba£_po°f‹k_∑ª¡
(
tsdn
, 
¨ía
->
ba£
);

1989 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
¨ía
->
exã¡_avaû_mtx
);

1990 
	`exã¡s_po°f‹k_∑ª¡
(
tsdn
, &
¨ía
->
exã¡s_dúty
);

1991 
	`exã¡s_po°f‹k_∑ª¡
(
tsdn
, &
¨ía
->
exã¡s_muzzy
);

1992 
	`exã¡s_po°f‹k_∑ª¡
(
tsdn
, &
¨ía
->
exã¡s_ªèöed
);

1993 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
¨ía
->
exã¡_grow_mtx
);

1994 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
¨ía
->
deˇy_dúty
.
mtx
);

1995 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
¨ía
->
deˇy_muzzy
.
mtx
);

1996 i‡(
c⁄fig_°©s
) {

1997 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
¨ía
->
tˇche_ql_mtx
);

1999 
	}
}

2002 
	$¨ía_po°f‹k_chûd
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

2003 
i
;

2005 
	`©omic_°‹e_u
(&
¨ía
->
¡hªads
[0], 0, 
ATOMIC_RELAXED
);

2006 
	`©omic_°‹e_u
(&
¨ía
->
¡hªads
[1], 0, 
ATOMIC_RELAXED
);

2007 i‡(
	`tsd_¨ía_gë
(
	`tsdn_tsd
(
tsdn
)Ë=
¨ía
) {

2008 
	`¨ía_¡hªads_öc
(
¨ía
, 
Ál£
);

2010 i‡(
	`tsd_üª«_gë
(
	`tsdn_tsd
(
tsdn
)Ë=
¨ía
) {

2011 
	`¨ía_¡hªads_öc
(
¨ía
, 
åue
);

2013 i‡(
c⁄fig_°©s
) {

2014 
	`ql_√w
(&
¨ía
->
tˇche_ql
);

2015 
	`ql_√w
(&
¨ía
->
ˇche_bö_¨øy_des¸ùt‹_ql
);

2016 
tˇche_t
 *
tˇche
 = 
	`tˇche_gë
(
	`tsdn_tsd
(
tsdn
));

2017 i‡(
tˇche
 !
NULL
 &&Åˇche->
¨ía
 ==árena) {

2018 
	`ql_ñm_√w
(
tˇche
, 
lök
);

2019 
	`ql_èû_ö£π
(&
¨ía
->
tˇche_ql
, 
tˇche
, 
lök
);

2020 
	`ˇche_bö_¨øy_des¸ùt‹_öô
(

2021 &
tˇche
->
ˇche_bö_¨øy_des¸ùt‹
,

2022 
tˇche
->
bös_smÆl
,Åˇche->
bös_œrge
);

2023 
	`ql_èû_ö£π
(&
¨ía
->
ˇche_bö_¨øy_des¸ùt‹_ql
,

2024 &
tˇche
->
ˇche_bö_¨øy_des¸ùt‹
, 
lök
);

2028 
i
 = 0; i < 
NBINS
; i++) {

2029 
	`bö_po°f‹k_chûd
(
tsdn
, &
¨ía
->
bös
[
i
]);

2031 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
¨ía
->
œrge_mtx
);

2032 
	`ba£_po°f‹k_chûd
(
tsdn
, 
¨ía
->
ba£
);

2033 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
¨ía
->
exã¡_avaû_mtx
);

2034 
	`exã¡s_po°f‹k_chûd
(
tsdn
, &
¨ía
->
exã¡s_dúty
);

2035 
	`exã¡s_po°f‹k_chûd
(
tsdn
, &
¨ía
->
exã¡s_muzzy
);

2036 
	`exã¡s_po°f‹k_chûd
(
tsdn
, &
¨ía
->
exã¡s_ªèöed
);

2037 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
¨ía
->
exã¡_grow_mtx
);

2038 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
¨ía
->
deˇy_dúty
.
mtx
);

2039 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
¨ía
->
deˇy_muzzy
.
mtx
);

2040 i‡(
c⁄fig_°©s
) {

2041 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
¨ía
->
tˇche_ql_mtx
);

2043 
	}
}

	@src/background_thread.c

1 
	#JEMALLOC_BACKGROUND_THREAD_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

11 
	#BACKGROUND_THREAD_DEFAULT
 
Ál£


	)

13 
boﬁ
 
	g›t_background_thªad
 = 
BACKGROUND_THREAD_DEFAULT
;

16 
mÆloc_muãx_t
 
	gbackground_thªad_lock
;

18 
©omic_b_t
 
	gbackground_thªad_íabÀd_°©e
;

19 
size_t
 
	gn_background_thªads
;

21 
background_thªad_öfo_t
 *
	gbackground_thªad_öfo
;

24 
boﬁ
 
	gˇn_íabÀ_background_thªad
;

28 #ifde‡
JEMALLOC_PTHREAD_CREATE_WRAPPER


29 
	~<dlf˙.h
>

31 (*
±hªad_¸óã_Âå
)(
±hªad_t
 *
__ª°ri˘
, c⁄° 
±hªad_©å_t
 *,

32 *(*)(*), *
__ª°ri˘
);

35 
	$±hªad_¸óã_wøµî_öô
() {

36 #ifde‡
JEMALLOC_LAZY_LOCK


37 i‡(!
i°hªaded
) {

38 
i°hªaded
 = 
åue
;

41 
	}
}

44 
	$±hªad_¸óã_wøµî
(
±hªad_t
 *
__ª°ri˘
 
thªad
, c⁄° 
±hªad_©å_t
 *
©å
,

45 *(*
°¨t_routöe
)(*), *
__ª°ri˘
 
¨g
) {

46 
	`±hªad_¸óã_wøµî_öô
();

48  
	`±hªad_¸óã_Âå
(
thªad
, 
©å
, 
°¨t_routöe
, 
¨g
);

49 
	}
}

52 #i‚de‡
JEMALLOC_BACKGROUND_THREAD


53 
	#NOT_REACHED
 { 
	`nŸ_ªached
(); }

	)

54 
boﬁ
 
	$background_thªad_¸óã
(
tsd_t
 *
tsd
, 
¨ía_öd
Ë
NOT_REACHED


55 
boﬁ
 
	$background_thªads_íabÀ
(
tsd_t
 *
tsd
Ë
NOT_REACHED


56 
boﬁ
 
	$background_thªads_dißbÀ
(
tsd_t
 *
tsd
Ë
NOT_REACHED


57 
	$background_thªad_öãrvÆ_check
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

58 
¨ía_deˇy_t
 *
deˇy
, 
size_t
 
≈ages_√w
Ë
NOT_REACHED


59 
	$background_thªad_¥ef‹k0
(
tsdn_t
 *
tsdn
Ë
NOT_REACHED


60 
	$background_thªad_¥ef‹k1
(
tsdn_t
 *
tsdn
Ë
NOT_REACHED


61 
	$background_thªad_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
Ë
NOT_REACHED


62 
	$background_thªad_po°f‹k_chûd
(
tsdn_t
 *
tsdn
Ë
NOT_REACHED


63 
boﬁ
 
	$background_thªad_°©s_ªad
(
tsdn_t
 *
tsdn
,

64 
background_thªad_°©s_t
 *
°©s
Ë
NOT_REACHED


65 
	$background_thªad_˘l_öô
(
tsdn_t
 *
tsdn
Ë
NOT_REACHED


66 #unde‡
NOT_REACHED


69 
boﬁ
 
background_thªad_íabÀd_©_f‹k
;

72 
	$background_thªad_öfo_öô
(
tsdn_t
 *
tsdn
, 
background_thªad_öfo_t
 *
öfo
) {

73 
	`background_thªad_wakeup_time_£t
(
tsdn
, 
öfo
, 0);

74 
öfo
->
≈ages_to_purge_√w
 = 0;

75 i‡(
c⁄fig_°©s
) {

76 
öfo
->
tŸ_n_runs
 = 0;

77 
	`n°ime_öô
(&
öfo
->
tŸ_¶ìp_time
, 0);

79 
	}
}

81 
ölöe
 
boﬁ


82 
	$£t_cuºít_thªad_afföôy
(
UNUSED
 
˝u
) {

83 #i‡
	`deföed
(
JEMALLOC_HAVE_SCHED_SETAFFINITY
)

84 
˝u_£t_t
 
˝u£t
;

85 
	`CPU_ZERO
(&
˝u£t
);

86 
	`CPU_SET
(
˝u
, &
˝u£t
);

87 
ªt
 = 
	`sched_£èfföôy
(0, (
˝u_£t_t
), &
˝u£t
);

89  (
ªt
 != 0);

91  
Ál£
;

93 
	}
}

96 
	#BACKGROUND_THREAD_NPAGES_THRESHOLD
 
	`UINT64_C
(1024)

	)

97 
	#BILLION
 
	`UINT64_C
(1000000000)

	)

99 
	#BACKGROUND_THREAD_MIN_INTERVAL_NS
 (
BILLION
 / 10)

	)

101 
ölöe
 
size_t


102 
	$deˇy_≈urge_a·î_öãrvÆ
(
¨ía_deˇy_t
 *
deˇy
, 
size_t
 
öãrvÆ
) {

103 
size_t
 
i
;

104 
uöt64_t
 
sum
 = 0;

105 
i
 = 0; i < 
öãrvÆ
; i++) {

106 
sum
 +
deˇy
->
backlog
[
i
] * 
h_°ïs
[i];

108 ; 
i
 < 
SMOOTHSTEP_NSTEPS
; i++) {

109 
sum
 +
deˇy
->
backlog
[
i
] * (
h_°ïs
[i] - h_°ïs[ò- 
öãrvÆ
]);

112  (
size_t
)(
sum
 >> 
SMOOTHSTEP_BFP
);

113 
	}
}

115 
uöt64_t


116 
	$¨ía_deˇy_compuã_purge_öãrvÆ_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_deˇy_t
 *
deˇy
,

117 
exã¡s_t
 *
exã¡s
) {

118 i‡(
	`mÆloc_muãx_åylock
(
tsdn
, &
deˇy
->
mtx
)) {

120  
BACKGROUND_THREAD_MIN_INTERVAL_NS
;

123 
uöt64_t
 
öãrvÆ
;

124 
ssize_t
 
deˇy_time
 = 
	`©omic_lﬂd_zd
(&
deˇy
->
time_ms
, 
ATOMIC_RELAXED
);

125 i‡(
deˇy_time
 <= 0) {

127 
öãrvÆ
 = 
BACKGROUND_THREAD_INDEFINITE_SLEEP
;

128 
œbñ_d⁄e
;

131 
uöt64_t
 
deˇy_öãrvÆ_ns
 = 
	`n°ime_ns
(&
deˇy
->
öãrvÆ
);

132 
	`as£π
(
deˇy_öãrvÆ_ns
 > 0);

133 
size_t
 
≈ages
 = 
	`exã¡s_≈ages_gë
(
exã¡s
);

134 i‡(
≈ages
 == 0) {

135 
i
;

136 
i
 = 0; i < 
SMOOTHSTEP_NSTEPS
; i++) {

137 i‡(
deˇy
->
backlog
[
i
] > 0) {

141 i‡(
i
 =
SMOOTHSTEP_NSTEPS
) {

143 
öãrvÆ
 = 
BACKGROUND_THREAD_INDEFINITE_SLEEP
;

144 
œbñ_d⁄e
;

147 i‡(
≈ages
 <
BACKGROUND_THREAD_NPAGES_THRESHOLD
) {

149 
öãrvÆ
 = 
deˇy_öãrvÆ_ns
 * 
SMOOTHSTEP_NSTEPS
;

150 
œbñ_d⁄e
;

153 
size_t
 
lb
 = 
BACKGROUND_THREAD_MIN_INTERVAL_NS
 / 
deˇy_öãrvÆ_ns
;

154 
size_t
 
ub
 = 
SMOOTHSTEP_NSTEPS
;

156 
lb
 = (lb < 2) ? 2 :Üb;

157 i‡((
deˇy_öãrvÆ_ns
 * 
ub
 <
BACKGROUND_THREAD_MIN_INTERVAL_NS
) ||

158 (
lb
 + 2 > 
ub
)) {

159 
öãrvÆ
 = 
BACKGROUND_THREAD_MIN_INTERVAL_NS
;

160 
œbñ_d⁄e
;

163 
	`as£π
(
lb
 + 2 <
ub
);

164 
size_t
 
≈urge_lb
, 
≈urge_ub
;

165 
≈urge_lb
 = 
	`deˇy_≈urge_a·î_öãrvÆ
(
deˇy
, 
lb
);

166 i‡(
≈urge_lb
 > 
BACKGROUND_THREAD_NPAGES_THRESHOLD
) {

167 
öãrvÆ
 = 
deˇy_öãrvÆ_ns
 * 
lb
;

168 
œbñ_d⁄e
;

170 
≈urge_ub
 = 
	`deˇy_≈urge_a·î_öãrvÆ
(
deˇy
, 
ub
);

171 i‡(
≈urge_ub
 < 
BACKGROUND_THREAD_NPAGES_THRESHOLD
) {

172 
öãrvÆ
 = 
deˇy_öãrvÆ_ns
 * 
ub
;

173 
œbñ_d⁄e
;

176 
n_£¨ch
 = 0;

177 
size_t
 
èrgë
, 
≈urge
;

178 (
≈urge_lb
 + 
BACKGROUND_THREAD_NPAGES_THRESHOLD
 < 
≈urge_ub
)

179 && (
lb
 + 2 < 
ub
)) {

180 
èrgë
 = (
lb
 + 
ub
) / 2;

181 
≈urge
 = 
	`deˇy_≈urge_a·î_öãrvÆ
(
deˇy
, 
èrgë
);

182 i‡(
≈urge
 > 
BACKGROUND_THREAD_NPAGES_THRESHOLD
) {

183 
ub
 = 
èrgë
;

184 
≈urge_ub
 = 
≈urge
;

186 
lb
 = 
èrgë
;

187 
≈urge_lb
 = 
≈urge
;

189 
	`as£π
(
n_£¨ch
++ < 
	`lg_Êo‹
(
SMOOTHSTEP_NSTEPS
) + 1);

191 
öãrvÆ
 = 
deˇy_öãrvÆ_ns
 * (
ub
 + 
lb
) / 2;

192 
œbñ_d⁄e
:

193 
öãrvÆ
 = (öãrvÆ < 
BACKGROUND_THREAD_MIN_INTERVAL_NS
) ?

194 
BACKGROUND_THREAD_MIN_INTERVAL_NS
 : 
öãrvÆ
;

195 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
deˇy
->
mtx
);

197  
öãrvÆ
;

198 
	}
}

201 
uöt64_t


202 
	$¨ía_deˇy_compuã_purge_öãrvÆ
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

203 
uöt64_t
 
i1
, 
i2
;

204 
i1
 = 
	`¨ía_deˇy_compuã_purge_öãrvÆ_im∂
(
tsdn
, &
¨ía
->
deˇy_dúty
,

205 &
¨ía
->
exã¡s_dúty
);

206 i‡(
i1
 =
BACKGROUND_THREAD_MIN_INTERVAL_NS
) {

207  
i1
;

209 
i2
 = 
	`¨ía_deˇy_compuã_purge_öãrvÆ_im∂
(
tsdn
, &
¨ía
->
deˇy_muzzy
,

210 &
¨ía
->
exã¡s_muzzy
);

212  
i1
 < 
i2
 ? i1 : i2;

213 
	}
}

216 
	$background_thªad_¶ìp
(
tsdn_t
 *
tsdn
, 
background_thªad_öfo_t
 *
öfo
,

217 
uöt64_t
 
öãrvÆ
) {

218 i‡(
c⁄fig_°©s
) {

219 
öfo
->
tŸ_n_runs
++;

221 
öfo
->
≈ages_to_purge_√w
 = 0;

223 
timevÆ
 
tv
;

225 
	`gëtimeofday
(&
tv
, 
NULL
);

226 
n°ime_t
 
bef‹e_¶ìp
;

227 
	`n°ime_öô2
(&
bef‹e_¶ìp
, 
tv
.
tv_£c
,Åv.
tv_u£c
 * 1000);

229 
ªt
;

230 i‡(
öãrvÆ
 =
BACKGROUND_THREAD_INDEFINITE_SLEEP
) {

231 
	`as£π
(
	`background_thªad_ödeföôe_¶ìp
(
öfo
));

232 
ªt
 = 
	`±hªad_c⁄d_waô
(&
öfo
->
c⁄d
, &öfo->
mtx
.
lock
);

233 
	`as£π
(
ªt
 == 0);

235 
	`as£π
(
öãrvÆ
 >
BACKGROUND_THREAD_MIN_INTERVAL_NS
 &&

236 
öãrvÆ
 <
BACKGROUND_THREAD_INDEFINITE_SLEEP
);

238 
n°ime_t
 
√xt_wakeup
;

239 
	`n°ime_öô
(&
√xt_wakeup
, 0);

240 
	`n°ime_upd©e
(&
√xt_wakeup
);

241 
	`n°ime_üdd
(&
√xt_wakeup
, 
öãrvÆ
);

242 
	`as£π
(
	`n°ime_ns
(&
√xt_wakeup
) <

243 
BACKGROUND_THREAD_INDEFINITE_SLEEP
);

244 
	`background_thªad_wakeup_time_£t
(
tsdn
, 
öfo
,

245 
	`n°ime_ns
(&
√xt_wakeup
));

247 
n°ime_t
 
ts_wakeup
;

248 
	`n°ime_c›y
(&
ts_wakeup
, &
bef‹e_¶ìp
);

249 
	`n°ime_üdd
(&
ts_wakeup
, 
öãrvÆ
);

250 
time•ec
 
ts
;

251 
ts
.
tv_£c
 = (
size_t
)
	`n°ime_£c
(&
ts_wakeup
);

252 
ts
.
tv_n£c
 = (
size_t
)
	`n°ime_n£c
(&
ts_wakeup
);

254 
	`as£π
(!
	`background_thªad_ödeföôe_¶ìp
(
öfo
));

255 
ªt
 = 
	`±hªad_c⁄d_timedwaô
(&
öfo
->
c⁄d
, &öfo->
mtx
.
lock
, &
ts
);

256 
	`as£π
(
ªt
 =
ETIMEDOUT
 ||Ñet == 0);

257 
	`background_thªad_wakeup_time_£t
(
tsdn
, 
öfo
,

258 
BACKGROUND_THREAD_INDEFINITE_SLEEP
);

260 i‡(
c⁄fig_°©s
) {

261 
	`gëtimeofday
(&
tv
, 
NULL
);

262 
n°ime_t
 
a·î_¶ìp
;

263 
	`n°ime_öô2
(&
a·î_¶ìp
, 
tv
.
tv_£c
,Åv.
tv_u£c
 * 1000);

264 i‡(
	`n°ime_com∑ª
(&
a·î_¶ìp
, &
bef‹e_¶ìp
) > 0) {

265 
	`n°ime_subåa˘
(&
a·î_¶ìp
, &
bef‹e_¶ìp
);

266 
	`n°ime_add
(&
öfo
->
tŸ_¶ìp_time
, &
a·î_¶ìp
);

269 
	}
}

271 
boﬁ


272 
	$background_thªad_∑u£_check
(
tsdn_t
 *
tsdn
, 
background_thªad_öfo_t
 *
öfo
) {

273 i‡(
	`u∆ikñy
(
öfo
->
°©e
 =
background_thªad_∑u£d
)) {

274 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
öfo
->
mtx
);

276 
	`mÆloc_muãx_lock
(
tsdn
, &
background_thªad_lock
);

277 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
background_thªad_lock
);

278 
	`mÆloc_muãx_lock
(
tsdn
, &
öfo
->
mtx
);

279  
åue
;

282  
Ál£
;

283 
	}
}

285 
ölöe
 

286 
	$background_w‹k_¶ìp_⁄˚
(
tsdn_t
 *
tsdn
, 
background_thªad_öfo_t
 *
öfo
, 
öd
) {

287 
uöt64_t
 
mö_öãrvÆ
 = 
BACKGROUND_THREAD_INDEFINITE_SLEEP
;

288 
«ª«s
 = 
	`«ª«s_tŸÆ_gë
();

290 
i
 = 
öd
; i < 
«ª«s
; i +
n˝us
) {

291 
¨ía_t
 *
¨ía
 = 
	`¨ía_gë
(
tsdn
, 
i
, 
Ál£
);

292 i‡(!
¨ía
) {

295 
	`¨ía_deˇy
(
tsdn
, 
¨ía
, 
åue
, 
Ál£
);

296 i‡(
mö_öãrvÆ
 =
BACKGROUND_THREAD_MIN_INTERVAL_NS
) {

300 
uöt64_t
 
öãrvÆ
 = 
	`¨ía_deˇy_compuã_purge_öãrvÆ
(
tsdn
,

301 
¨ía
);

302 
	`as£π
(
öãrvÆ
 >
BACKGROUND_THREAD_MIN_INTERVAL_NS
);

303 i‡(
mö_öãrvÆ
 > 
öãrvÆ
) {

304 
mö_öãrvÆ
 = 
öãrvÆ
;

307 
	`background_thªad_¶ìp
(
tsdn
, 
öfo
, 
mö_öãrvÆ
);

308 
	}
}

310 
boﬁ


311 
	$background_thªads_dißbÀ_sögÀ
(
tsd_t
 *
tsd
, 
background_thªad_öfo_t
 *
öfo
) {

312 i‡(
öfo
 =&
background_thªad_öfo
[0]) {

313 
	`mÆloc_muãx_as£π_ow√r
(
	`tsd_tsdn
(
tsd
),

314 &
background_thªad_lock
);

316 
	`mÆloc_muãx_as£π_nŸ_ow√r
(
	`tsd_tsdn
(
tsd
),

317 &
background_thªad_lock
);

320 
	`¥e_ªíå™cy
(
tsd
, 
NULL
);

321 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

322 
boﬁ
 
has_thªad
;

323 
	`as£π
(
öfo
->
°©e
 !
background_thªad_∑u£d
);

324 i‡(
öfo
->
°©e
 =
background_thªad_°¨ãd
) {

325 
has_thªad
 = 
åue
;

326 
öfo
->
°©e
 = 
background_thªad_°›≥d
;

327 
	`±hªad_c⁄d_sig«l
(&
öfo
->
c⁄d
);

329 
has_thªad
 = 
Ál£
;

331 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

333 i‡(!
has_thªad
) {

334 
	`po°_ªíå™cy
(
tsd
);

335  
Ál£
;

337 *
ªt
;

338 i‡(
	`±hªad_joö
(
öfo
->
thªad
, &
ªt
)) {

339 
	`po°_ªíå™cy
(
tsd
);

340  
åue
;

342 
	`as£π
(
ªt
 =
NULL
);

343 
n_background_thªads
--;

344 
	`po°_ªíå™cy
(
tsd
);

346  
Ál£
;

347 
	}
}

349 *
background_thªad_íåy
(*
öd_¨g
);

352 
	$background_thªad_¸óã_sig«ls_masked
(
±hªad_t
 *
thªad
,

353 c⁄° 
±hªad_©å_t
 *
©å
, *(*
°¨t_routöe
)(*), *
¨g
) {

358 
sig£t_t
 
£t
;

359 
	`sigfûl£t
(&
£t
);

360 
sig£t_t
 
ﬁd£t
;

361 
mask_îr
 = 
	`±hªad_sigmask
(
SIG_SETMASK
, &
£t
, &
ﬁd£t
);

362 i‡(
mask_îr
 != 0) {

363  
mask_îr
;

365 
¸óã_îr
 = 
	`±hªad_¸óã_wøµî
(
thªad
, 
©å
, 
°¨t_routöe
,

366 
¨g
);

371 
ª°‹e_îr
 = 
	`±hªad_sigmask
(
SIG_SETMASK
, &
ﬁd£t
, 
NULL
);

372 i‡(
ª°‹e_îr
 != 0) {

373 
	`mÆloc_¥ötf
("<jemalloc>: backgroundÅhread creation "

375 "(%d)\n", 
¸óã_îr
, 
ª°‹e_îr
);

376 i‡(
›t_ab‹t
) {

377 
	`ab‹t
();

380  
¸óã_îr
;

381 
	}
}

384 
	$check_background_thªad_¸óti⁄
(
tsd_t
 *
tsd
, *
n_¸óãd
,

385 
boﬁ
 *
¸óãd_thªads
) {

386 i‡(
	`likñy
(*
n_¸óãd
 =
n_background_thªads
)) {

390 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
background_thªad_öfo
[0].
mtx
);

391 
œbñ_ª°¨t
:

392 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
background_thªad_lock
);

393 
i
 = 1; i < 
n˝us
; i++) {

394 i‡(
¸óãd_thªads
[
i
]) {

397 
background_thªad_öfo_t
 *
öfo
 = &
background_thªad_öfo
[
i
];

398 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

399 
	`as£π
(
öfo
->
°©e
 !
background_thªad_∑u£d
);

400 
boﬁ
 
¸óã
 = (
öfo
->
°©e
 =
background_thªad_°¨ãd
);

401 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

402 i‡(!
¸óã
) {

410 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
background_thªad_lock
);

412 
	`¥e_ªíå™cy
(
tsd
, 
NULL
);

413 
îr
 = 
	`background_thªad_¸óã_sig«ls_masked
(&
öfo
->
thªad
,

414 
NULL
, 
background_thªad_íåy
, (*)(
uöçå_t
)
i
);

415 
	`po°_ªíå™cy
(
tsd
);

417 i‡(
îr
 == 0) {

418 (*
n_¸óãd
)++;

419 
¸óãd_thªads
[
i
] = 
åue
;

421 
	`mÆloc_¥ötf
("<jemalloc>: backgroundÅhread "

422 "¸óti⁄ faûed (%d)\n", 
îr
);

423 i‡(
›t_ab‹t
) {

424 
	`ab‹t
();

428 
œbñ_ª°¨t
;

430 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
background_thªad_öfo
[0].
mtx
);

431 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
background_thªad_lock
);

432 
	}
}

435 
	$background_thªad0_w‹k
(
tsd_t
 *
tsd
) {

437 
	`VARIABLE_ARRAY
(
boﬁ
, 
¸óãd_thªads
, 
n˝us
);

438 
i
;

439 
i
 = 1; i < 
n˝us
; i++) {

440 
¸óãd_thªads
[
i
] = 
Ál£
;

443 
n_¸óãd
 = 1;

444 
background_thªad_öfo
[0].
°©e
 !
background_thªad_°›≥d
) {

445 i‡(
	`background_thªad_∑u£_check
(
	`tsd_tsdn
(
tsd
),

446 &
background_thªad_öfo
[0])) {

449 
	`check_background_thªad_¸óti⁄
(
tsd
, &
n_¸óãd
,

450 (
boﬁ
 *)&
¸óãd_thªads
);

451 
	`background_w‹k_¶ìp_⁄˚
(
	`tsd_tsdn
(
tsd
),

452 &
background_thªad_öfo
[0], 0);

459 
	`as£π
(!
	`background_thªad_íabÀd
());

460 
i
 = 1; i < 
n˝us
; i++) {

461 
background_thªad_öfo_t
 *
öfo
 = &
background_thªad_öfo
[
i
];

462 
	`as£π
(
öfo
->
°©e
 !
background_thªad_∑u£d
);

463 i‡(
¸óãd_thªads
[
i
]) {

464 
	`background_thªads_dißbÀ_sögÀ
(
tsd
, 
öfo
);

466 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

468 
öfo
->
°©e
 = 
background_thªad_°›≥d
;

469 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

472 
background_thªad_öfo
[0].
°©e
 = 
background_thªad_°›≥d
;

473 
	`as£π
(
n_background_thªads
 == 1);

474 
	}
}

477 
	$background_w‹k
(
tsd_t
 *
tsd
, 
öd
) {

478 
background_thªad_öfo_t
 *
öfo
 = &
background_thªad_öfo
[
öd
];

480 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

481 
	`background_thªad_wakeup_time_£t
(
	`tsd_tsdn
(
tsd
), 
öfo
,

482 
BACKGROUND_THREAD_INDEFINITE_SLEEP
);

483 i‡(
öd
 == 0) {

484 
	`background_thªad0_w‹k
(
tsd
);

486 
öfo
->
°©e
 !
background_thªad_°›≥d
) {

487 i‡(
	`background_thªad_∑u£_check
(
	`tsd_tsdn
(
tsd
),

488 
öfo
)) {

491 
	`background_w‹k_¶ìp_⁄˚
(
	`tsd_tsdn
(
tsd
), 
öfo
, 
öd
);

494 
	`as£π
(
öfo
->
°©e
 =
background_thªad_°›≥d
);

495 
	`background_thªad_wakeup_time_£t
(
	`tsd_tsdn
(
tsd
), 
öfo
, 0);

496 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

497 
	}
}

500 
	$background_thªad_íåy
(*
öd_¨g
) {

501 
thªad_öd
 = ()(
uöçå_t
)
öd_¨g
;

502 
	`as£π
(
thªad_öd
 < 
n˝us
);

503 #ifde‡
JEMALLOC_HAVE_PTHREAD_SETNAME_NP


504 
	`±hªad_£äame_≈
(
	`±hªad_£lf
(), "jemalloc_bg_thd");

506 i‡(
›t_≥r˝u_¨ía
 !
≥r˝u_¨ía_dißbÀd
) {

507 
	`£t_cuºít_thªad_afföôy
(()
thªad_öd
);

514 
	`background_w‹k
(
	`tsd_öã∫Æ_„tch
(), 
thªad_öd
);

515 
	`as£π
(
	`±hªad_equÆ
(
	`±hªad_£lf
(),

516 
background_thªad_öfo
[
thªad_öd
].
thªad
));

518  
NULL
;

519 
	}
}

522 
	$background_thªad_öô
(
tsd_t
 *
tsd
, 
background_thªad_öfo_t
 *
öfo
) {

523 
	`mÆloc_muãx_as£π_ow√r
(
	`tsd_tsdn
(
tsd
), &
background_thªad_lock
);

524 
öfo
->
°©e
 = 
background_thªad_°¨ãd
;

525 
	`background_thªad_öfo_öô
(
	`tsd_tsdn
(
tsd
), 
öfo
);

526 
n_background_thªads
++;

527 
	}
}

530 
boﬁ


531 
	$background_thªad_¸óã
(
tsd_t
 *
tsd
, 
¨ía_öd
) {

532 
	`as£π
(
have_background_thªad
);

533 
	`mÆloc_muãx_as£π_ow√r
(
	`tsd_tsdn
(
tsd
), &
background_thªad_lock
);

536 
size_t
 
thªad_öd
 = 
¨ía_öd
 % 
n˝us
;

537 
background_thªad_öfo_t
 *
öfo
 = &
background_thªad_öfo
[
thªad_öd
];

539 
boﬁ
 
√ed_√w_thªad
;

540 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

541 
√ed_√w_thªad
 = 
	`background_thªad_íabÀd
() &&

542 (
öfo
->
°©e
 =
background_thªad_°›≥d
);

543 i‡(
√ed_√w_thªad
) {

544 
	`background_thªad_öô
(
tsd
, 
öfo
);

546 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

547 i‡(!
√ed_√w_thªad
) {

548  
Ál£
;

550 i‡(
¨ía_öd
 != 0) {

552 
background_thªad_öfo_t
 *
t0
 = &
background_thªad_öfo
[0];

553 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
t0
->
mtx
);

554 
	`as£π
(
t0
->
°©e
 =
background_thªad_°¨ãd
);

555 
	`±hªad_c⁄d_sig«l
(&
t0
->
c⁄d
);

556 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
t0
->
mtx
);

558  
Ál£
;

561 
	`¥e_ªíå™cy
(
tsd
, 
NULL
);

566 
îr
 = 
	`background_thªad_¸óã_sig«ls_masked
(&
öfo
->
thªad
, 
NULL
,

567 
background_thªad_íåy
, (*)
thªad_öd
);

568 
	`po°_ªíå™cy
(
tsd
);

570 i‡(
îr
 != 0) {

571 
	`mÆloc_¥ötf
("<jemalloc>:árena 0 backgroundÅhread creation "

572 "Áûed (%d)\n", 
îr
);

573 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

574 
öfo
->
°©e
 = 
background_thªad_°›≥d
;

575 
n_background_thªads
--;

576 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

578  
åue
;

581  
Ál£
;

582 
	}
}

584 
boﬁ


585 
	$background_thªads_íabÀ
(
tsd_t
 *
tsd
) {

586 
	`as£π
(
n_background_thªads
 == 0);

587 
	`as£π
(
	`background_thªad_íabÀd
());

588 
	`mÆloc_muãx_as£π_ow√r
(
	`tsd_tsdn
(
tsd
), &
background_thªad_lock
);

590 
	`VARIABLE_ARRAY
(
boﬁ
, 
m¨ked
, 
n˝us
);

591 
i
, 
nm¨ked
;

592 
i
 = 0; i < 
n˝us
; i++) {

593 
m¨ked
[
i
] = 
Ál£
;

595 
nm¨ked
 = 0;

597 
n
 = 
	`«ª«s_tŸÆ_gë
();

598 
i
 = 1; i < 
n
; i++) {

599 i‡(
m¨ked
[
i
 % 
n˝us
] ||

600 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
i
, 
Ál£
Ë=
NULL
) {

603 
background_thªad_öfo_t
 *
öfo
 = &
background_thªad_öfo
[

604 
i
 % 
n˝us
];

605 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

606 
	`as£π
(
öfo
->
°©e
 =
background_thªad_°›≥d
);

607 
	`background_thªad_öô
(
tsd
, 
öfo
);

608 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

609 
m¨ked
[
i
 % 
n˝us
] = 
åue
;

610 i‡(++
nm¨ked
 =
n˝us
) {

615  
	`background_thªad_¸óã
(
tsd
, 0);

616 
	}
}

618 
boﬁ


619 
	$background_thªads_dißbÀ
(
tsd_t
 *
tsd
) {

620 
	`as£π
(!
	`background_thªad_íabÀd
());

621 
	`mÆloc_muãx_as£π_ow√r
(
	`tsd_tsdn
(
tsd
), &
background_thªad_lock
);

624 i‡(
	`background_thªads_dißbÀ_sögÀ
(
tsd
,

625 &
background_thªad_öfo
[0])) {

626  
åue
;

628 
	`as£π
(
n_background_thªads
 == 0);

630  
Ál£
;

631 
	}
}

635 
	$background_thªad_öãrvÆ_check
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

636 
¨ía_deˇy_t
 *
deˇy
, 
size_t
 
≈ages_√w
) {

637 
background_thªad_öfo_t
 *
öfo
 = 
	`¨ía_background_thªad_öfo_gë
(

638 
¨ía
);

639 i‡(
	`mÆloc_muãx_åylock
(
tsdn
, &
öfo
->
mtx
)) {

649 i‡(
öfo
->
°©e
 !
background_thªad_°¨ãd
) {

650 
œbñ_d⁄e
;

652 i‡(
	`mÆloc_muãx_åylock
(
tsdn
, &
deˇy
->
mtx
)) {

653 
œbñ_d⁄e
;

656 
ssize_t
 
deˇy_time
 = 
	`©omic_lﬂd_zd
(&
deˇy
->
time_ms
, 
ATOMIC_RELAXED
);

657 i‡(
deˇy_time
 <= 0) {

659 
œbñ_d⁄e_u∆ock2
;

661 
uöt64_t
 
deˇy_öãrvÆ_ns
 = 
	`n°ime_ns
(&
deˇy
->
öãrvÆ
);

662 
	`as£π
(
deˇy_öãrvÆ_ns
 > 0);

664 
n°ime_t
 
diff
;

665 
	`n°ime_öô
(&
diff
, 
	`background_thªad_wakeup_time_gë
(
öfo
));

666 i‡(
	`n°ime_com∑ª
(&
diff
, &
deˇy
->
ïoch
) <= 0) {

667 
œbñ_d⁄e_u∆ock2
;

669 
	`n°ime_subåa˘
(&
diff
, &
deˇy
->
ïoch
);

670 i‡(
	`n°ime_ns
(&
diff
Ë< 
BACKGROUND_THREAD_MIN_INTERVAL_NS
) {

671 
œbñ_d⁄e_u∆ock2
;

674 i‡(
≈ages_√w
 > 0) {

675 
size_t
 
n_ïoch
 = (size_t)(
	`n°ime_ns
(&
diff
Ë/ 
deˇy_öãrvÆ_ns
);

681 
uöt64_t
 
≈urge_√w
;

682 i‡(
n_ïoch
 >
SMOOTHSTEP_NSTEPS
) {

683 
≈urge_√w
 = 
≈ages_√w
;

685 
uöt64_t
 
h_°ïs_max
 = 
h_°ïs
[
SMOOTHSTEP_NSTEPS
 - 1];

686 
	`as£π
(
h_°ïs_max
 >=

687 
h_°ïs
[
SMOOTHSTEP_NSTEPS
 - 1 - 
n_ïoch
]);

688 
≈urge_√w
 = 
≈ages_√w
 * (
h_°ïs_max
 -

689 
h_°ïs
[
SMOOTHSTEP_NSTEPS
 - 1 - 
n_ïoch
]);

690 
≈urge_√w
 >>
SMOOTHSTEP_BFP
;

692 
öfo
->
≈ages_to_purge_√w
 +
≈urge_√w
;

695 
boﬁ
 
should_sig«l
;

696 i‡(
öfo
->
≈ages_to_purge_√w
 > 
BACKGROUND_THREAD_NPAGES_THRESHOLD
) {

697 
should_sig«l
 = 
åue
;

698 } i‡(
	`u∆ikñy
(
	`background_thªad_ödeföôe_¶ìp
(
öfo
)) &&

699 (
	`exã¡s_≈ages_gë
(&
¨ía
->
exã¡s_dúty
) > 0 ||

700 
	`exã¡s_≈ages_gë
(&
¨ía
->
exã¡s_muzzy
) > 0 ||

701 
öfo
->
≈ages_to_purge_√w
 > 0)) {

702 
should_sig«l
 = 
åue
;

704 
should_sig«l
 = 
Ál£
;

707 i‡(
should_sig«l
) {

708 
öfo
->
≈ages_to_purge_√w
 = 0;

709 
	`±hªad_c⁄d_sig«l
(&
öfo
->
c⁄d
);

711 
œbñ_d⁄e_u∆ock2
:

712 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
deˇy
->
mtx
);

713 
œbñ_d⁄e
:

714 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
öfo
->
mtx
);

715 
	}
}

718 
	$background_thªad_¥ef‹k0
(
tsdn_t
 *
tsdn
) {

719 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
background_thªad_lock
);

720 
background_thªad_íabÀd_©_f‹k
 = 
	`background_thªad_íabÀd
();

721 
	}
}

724 
	$background_thªad_¥ef‹k1
(
tsdn_t
 *
tsdn
) {

725 
i
 = 0; i < 
n˝us
; i++) {

726 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
background_thªad_öfo
[
i
].
mtx
);

728 
	}
}

731 
	$background_thªad_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
) {

732 
i
 = 0; i < 
n˝us
; i++) {

733 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
,

734 &
background_thªad_öfo
[
i
].
mtx
);

736 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
background_thªad_lock
);

737 
	}
}

740 
	$background_thªad_po°f‹k_chûd
(
tsdn_t
 *
tsdn
) {

741 
i
 = 0; i < 
n˝us
; i++) {

742 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
,

743 &
background_thªad_öfo
[
i
].
mtx
);

745 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
background_thªad_lock
);

746 i‡(!
background_thªad_íabÀd_©_f‹k
) {

751 
	`mÆloc_muãx_lock
(
tsdn
, &
background_thªad_lock
);

752 
n_background_thªads
 = 0;

753 
	`background_thªad_íabÀd_£t
(
tsdn
, 
Ál£
);

754 
i
 = 0; i < 
n˝us
; i++) {

755 
background_thªad_öfo_t
 *
öfo
 = &
background_thªad_öfo
[
i
];

756 
	`mÆloc_muãx_lock
(
tsdn
, &
öfo
->
mtx
);

757 
öfo
->
°©e
 = 
background_thªad_°›≥d
;

758 
ªt
 = 
	`±hªad_c⁄d_öô
(&
öfo
->
c⁄d
, 
NULL
);

759 
	`as£π
(
ªt
 == 0);

760 
	`background_thªad_öfo_öô
(
tsdn
, 
öfo
);

761 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
öfo
->
mtx
);

763 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
background_thªad_lock
);

764 
	}
}

766 
boﬁ


767 
	$background_thªad_°©s_ªad
(
tsdn_t
 *
tsdn
, 
background_thªad_°©s_t
 *
°©s
) {

768 
	`as£π
(
c⁄fig_°©s
);

769 
	`mÆloc_muãx_lock
(
tsdn
, &
background_thªad_lock
);

770 i‡(!
	`background_thªad_íabÀd
()) {

771 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
background_thªad_lock
);

772  
åue
;

775 
°©s
->
num_thªads
 = 
n_background_thªads
;

776 
uöt64_t
 
num_runs
 = 0;

777 
	`n°ime_öô
(&
°©s
->
run_öãrvÆ
, 0);

778 
i
 = 0; i < 
n˝us
; i++) {

779 
background_thªad_öfo_t
 *
öfo
 = &
background_thªad_öfo
[
i
];

780 
	`mÆloc_muãx_lock
(
tsdn
, &
öfo
->
mtx
);

781 i‡(
öfo
->
°©e
 !
background_thªad_°›≥d
) {

782 
num_runs
 +
öfo
->
tŸ_n_runs
;

783 
	`n°ime_add
(&
°©s
->
run_öãrvÆ
, &
öfo
->
tŸ_¶ìp_time
);

785 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
öfo
->
mtx
);

787 
°©s
->
num_runs
 =Çum_runs;

788 i‡(
num_runs
 > 0) {

789 
	`n°ime_idivide
(&
°©s
->
run_öãrvÆ
, 
num_runs
);

791 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
background_thªad_lock
);

793  
Ál£
;

794 
	}
}

796 #unde‡
BACKGROUND_THREAD_NPAGES_THRESHOLD


797 #unde‡
BILLION


798 #unde‡
BACKGROUND_THREAD_MIN_INTERVAL_NS


807 
	$background_thªad_˘l_öô
(
tsdn_t
 *
tsdn
) {

808 
	`mÆloc_muãx_as£π_nŸ_ow√r
(
tsdn
, &
background_thªad_lock
);

809 #ifde‡
JEMALLOC_PTHREAD_CREATE_WRAPPER


810 
	`±hªad_¸óã_wøµî_öô
();

812 
	}
}

816 
boﬁ


817 
	$background_thªad_boŸ0
() {

818 i‡(!
have_background_thªad
 && 
›t_background_thªad
) {

819 
	`mÆloc_¥ötf
("<jemalloc>: option background_thread currently "

821  
åue
;

824 #ifde‡
JEMALLOC_PTHREAD_CREATE_WRAPPER


825 
±hªad_¸óã_Âå
 = 
	`dlsym
(
RTLD_NEXT
, "pthread_create");

826 i‡(
±hªad_¸óã_Âå
 =
NULL
) {

827 
ˇn_íabÀ_background_thªad
 = 
Ál£
;

828 i‡(
c⁄fig_œzy_lock
 || 
›t_background_thªad
) {

829 
	`mÆloc_wrôe
("<jemalloc>: Error in dlsym(RTLD_NEXT, "

831 
	`ab‹t
();

834 
ˇn_íabÀ_background_thªad
 = 
åue
;

837  
Ál£
;

838 
	}
}

840 
boﬁ


841 
	$background_thªad_boŸ1
(
tsdn_t
 *
tsdn
) {

842 #ifde‡
JEMALLOC_BACKGROUND_THREAD


843 
	`as£π
(
have_background_thªad
);

844 
	`as£π
(
	`«ª«s_tŸÆ_gë
() > 0);

846 
	`background_thªad_íabÀd_£t
(
tsdn
, 
›t_background_thªad
);

847 i‡(
	`mÆloc_muãx_öô
(&
background_thªad_lock
,

849 
WITNESS_RANK_BACKGROUND_THREAD_GLOBAL
,

850 
mÆloc_muãx_ønk_ex˛usive
)) {

851  
åue
;

854 
background_thªad_öfo
 = (
background_thªad_öfo_t
 *)
	`ba£_Æloc
(
tsdn
,

855 
	`b0gë
(), 
n˝us
 * (
background_thªad_öfo_t
), 
CACHELINE
);

856 i‡(
background_thªad_öfo
 =
NULL
) {

857  
åue
;

860 
i
 = 0; i < 
n˝us
; i++) {

861 
background_thªad_öfo_t
 *
öfo
 = &
background_thªad_öfo
[
i
];

863 i‡(
	`mÆloc_muãx_öô
(&
öfo
->
mtx
, "background_thread",

864 
WITNESS_RANK_BACKGROUND_THREAD
,

865 
mÆloc_muãx_addªss_‹dîed
)) {

866  
åue
;

868 i‡(
	`±hªad_c⁄d_öô
(&
öfo
->
c⁄d
, 
NULL
)) {

869  
åue
;

871 
	`mÆloc_muãx_lock
(
tsdn
, &
öfo
->
mtx
);

872 
öfo
->
°©e
 = 
background_thªad_°›≥d
;

873 
	`background_thªad_öfo_öô
(
tsdn
, 
öfo
);

874 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
öfo
->
mtx
);

878  
Ál£
;

879 
	}
}

	@src/base.c

1 
	#JEMALLOC_BASE_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/exã¡_mm≠.h
"

7 
	~"jemÆloc/öã∫Æ/muãx.h
"

8 
	~"jemÆloc/öã∫Æ/sz.h
"

13 
ba£_t
 *
	gb0
;

15 
mëad©a_thp_mode_t
 
	g›t_mëad©a_thp
 = 
METADATA_THP_DEFAULT
;

17 c⁄° *
	gmëad©a_thp_mode_«mes
[] = {

25 
ölöe
 
boﬁ


26 
	$mëad©a_thp_madvi£
() {

27  (
	`mëad©a_thp_íabÀd
(Ë&& 
thp_°©e_madvi£
);

28 
	}
}

31 
	$ba£_m≠
(
tsdn_t
 *
tsdn
, 
exã¡_hooks_t
 *
exã¡_hooks
, 
öd
, 
size_t
 
size
) {

32 *
addr
;

33 
boﬁ
 
zîo
 = 
åue
;

34 
boﬁ
 
commô
 = 
åue
;

37 
	`as£π
(
size
 =
	`HUGEPAGE_CEILING
(size));

38 
size_t
 
Æignmít
 = 
HUGEPAGE
;

39 i‡(
exã¡_hooks
 =&
exã¡_hooks_deÁu…
) {

40 
addr
 = 
	`exã¡_Æloc_mm≠
(
NULL
, 
size
, 
Æignmít
, &
zîo
, &
commô
);

43 
tsd_t
 *
tsd
 = 
	`tsdn_nuŒ
(
tsdn
Ë? 
	`tsd_„tch
(Ë: 
	`tsdn_tsd
(tsdn);

44 
	`¥e_ªíå™cy
(
tsd
, 
NULL
);

45 
addr
 = 
exã¡_hooks
->
	`Æloc
”xã¡_hooks, 
NULL
, 
size
, 
Æignmít
,

46 &
zîo
, &
commô
, 
öd
);

47 
	`po°_ªíå™cy
(
tsd
);

50  
addr
;

51 
	}
}

54 
	$ba£_unm≠
(
tsdn_t
 *
tsdn
, 
exã¡_hooks_t
 *
exã¡_hooks
, 
öd
, *
addr
,

55 
size_t
 
size
) {

66 i‡(
exã¡_hooks
 =&
exã¡_hooks_deÁu…
) {

67 i‡(!
	`exã¡_dÆloc_mm≠
(
addr
, 
size
)) {

68 
œbñ_d⁄e
;

70 i‡(!
	`∑ges_decommô
(
addr
, 
size
)) {

71 
œbñ_d⁄e
;

73 i‡(!
	`∑ges_purge_f‹˚d
(
addr
, 
size
)) {

74 
œbñ_d⁄e
;

76 i‡(!
	`∑ges_purge_œzy
(
addr
, 
size
)) {

77 
œbñ_d⁄e
;

80 
	`nŸ_ªached
();

82 
tsd_t
 *
tsd
 = 
	`tsdn_nuŒ
(
tsdn
Ë? 
	`tsd_„tch
(Ë: 
	`tsdn_tsd
(tsdn);

83 
	`¥e_ªíå™cy
(
tsd
, 
NULL
);

84 i‡(
exã¡_hooks
->
dÆloc
 !
NULL
 &&

85 !
exã¡_hooks
->
	`dÆloc
”xã¡_hooks, 
addr
, 
size
, 
åue
,

86 
öd
)) {

87 
œbñ_po°_ªíå™cy
;

89 i‡(
exã¡_hooks
->
decommô
 !
NULL
 &&

90 !
exã¡_hooks
->
	`decommô
”xã¡_hooks, 
addr
, 
size
, 0, size,

91 
öd
)) {

92 
œbñ_po°_ªíå™cy
;

94 i‡(
exã¡_hooks
->
purge_f‹˚d
 !
NULL
 &&

95 !
exã¡_hooks
->
	`purge_f‹˚d
”xã¡_hooks, 
addr
, 
size
, 0,

96 
size
, 
öd
)) {

97 
œbñ_po°_ªíå™cy
;

99 i‡(
exã¡_hooks
->
purge_œzy
 !
NULL
 &&

100 !
exã¡_hooks
->
	`purge_œzy
”xã¡_hooks, 
addr
, 
size
, 0, size,

101 
öd
)) {

102 
œbñ_po°_ªíå™cy
;

105 
œbñ_po°_ªíå™cy
:

106 
	`po°_ªíå™cy
(
tsd
);

108 
œbñ_d⁄e
:

109 i‡(
	`mëad©a_thp_madvi£
()) {

111 
	`as£π
(((
uöçå_t
)
addr
 & 
HUGEPAGE_MASK
) == 0 &&

112 (
size
 & 
HUGEPAGE_MASK
) == 0);

113 
	`∑ges_nohuge
(
addr
, 
size
);

115 
	}
}

118 
	$ba£_exã¡_öô
(
size_t
 *
exã¡_¢_√xt
, 
exã¡_t
 *
exã¡
, *
addr
,

119 
size_t
 
size
) {

120 
size_t
 
¢
;

122 
¢
 = *
exã¡_¢_√xt
;

123 (*
exã¡_¢_√xt
)++;

125 
	`exã¡_böô
(
exã¡
, 
addr
, 
size
, 
¢
);

126 
	}
}

128 
size_t


129 
	$ba£_gë_num_blocks
(
ba£_t
 *
ba£
, 
boﬁ
 
wôh_√w_block
) {

130 
ba£_block_t
 *
b
 = 
ba£
->
blocks
;

131 
	`as£π
(
b
 !
NULL
);

133 
size_t
 
n_blocks
 = 
wôh_√w_block
 ? 2 : 1;

134 
b
->
√xt
 !
NULL
) {

135 
n_blocks
++;

136 
b
 = b->
√xt
;

139  
n_blocks
;

140 
	}
}

143 
	$ba£_auto_thp_swôch
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
) {

144 
	`as£π
(
›t_mëad©a_thp
 =
mëad©a_thp_auto
);

145 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
ba£
->
mtx
);

146 i‡(
ba£
->
auto_thp_swôched
) {

150 
boﬁ
 
should_swôch
;

151 i‡(
	`ba£_öd_gë
(
ba£
) != 0) {

152 
should_swôch
 = (
	`ba£_gë_num_blocks
(
ba£
, 
åue
) ==

153 
BASE_AUTO_THP_THRESHOLD
);

155 
should_swôch
 = (
	`ba£_gë_num_blocks
(
ba£
, 
åue
) ==

156 
BASE_AUTO_THP_THRESHOLD_A0
);

158 i‡(!
should_swôch
) {

162 
ba£
->
auto_thp_swôched
 = 
åue
;

163 
	`as£π
(!
c⁄fig_°©s
 || 
ba£
->
n_thp
 == 0);

165 
ba£_block_t
 *
block
 = 
ba£
->
blocks
;

166 
block
 !
NULL
) {

167 
	`as£π
((
block
->
size
 & 
HUGEPAGE_MASK
) == 0);

168 
	`∑ges_huge
(
block
, block->
size
);

169 i‡(
c⁄fig_°©s
) {

170 
ba£
->
n_thp
 +
	`HUGEPAGE_CEILING
(
block
->
size
 -

171 
	`exã¡_bsize_gë
(&
block
->
exã¡
)Ë>> 
LG_HUGEPAGE
;

173 
block
 = block->
√xt
;

174 
	`as£π
(
block
 =
NULL
 || (
	`ba£_öd_gë
(
ba£
) == 0));

176 
	}
}

179 
	$ba£_exã¡_bump_Æloc_hñ≥r
(
exã¡_t
 *
exã¡
, 
size_t
 *
g≠_size
, size_à
size
,

180 
size_t
 
Æignmít
) {

181 *
ªt
;

183 
	`as£π
(
Æignmít
 =
	`ALIGNMENT_CEILING
◊lignmít, 
QUANTUM
));

184 
	`as£π
(
size
 =
	`ALIGNMENT_CEILING
(size, 
Æignmít
));

186 *
g≠_size
 = 
	`ALIGNMENT_CEILING
((
uöçå_t
)
	`exã¡_addr_gë
(
exã¡
),

187 
Æignmít
Ë- (
uöçå_t
)
	`exã¡_addr_gë
(
exã¡
);

188 
ªt
 = (*)((
uöçå_t
)
	`exã¡_addr_gë
(
exã¡
Ë+ *
g≠_size
);

189 
	`as£π
(
	`exã¡_bsize_gë
(
exã¡
Ë>*
g≠_size
 + 
size
);

190 
	`exã¡_böô
(
exã¡
, (*)((
uöçå_t
)
	`exã¡_addr_gë
(extent) +

191 *
g≠_size
 + 
size
), 
	`exã¡_bsize_gë
(
exã¡
) - *gap_size - size,

192 
	`exã¡_¢_gë
(
exã¡
));

193  
ªt
;

194 
	}
}

197 
	$ba£_exã¡_bump_Æloc_po°
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
, 
exã¡_t
 *
exã¡
,

198 
size_t
 
g≠_size
, *
addr
, size_à
size
) {

199 i‡(
	`exã¡_bsize_gë
(
exã¡
) > 0) {

204 
szöd_t
 
ödex_Êo‹
 =

205 
	`sz_size2ödex
(
	`exã¡_bsize_gë
(
exã¡
) + 1) - 1;

206 
	`exã¡_hóp_ö£π
(&
ba£
->
avaû
[
ödex_Êo‹
], 
exã¡
);

209 i‡(
c⁄fig_°©s
) {

210 
ba£
->
Æloˇãd
 +
size
;

216 
ba£
->
ªsidít
 +
	`PAGE_CEILING
((
uöçå_t
)
addr
 + 
size
) -

217 
	`PAGE_CEILING
((
uöçå_t
)
addr
 - 
g≠_size
);

218 
	`as£π
(
ba£
->
Æloˇãd
 <ba£->
ªsidít
);

219 
	`as£π
(
ba£
->
ªsidít
 <ba£->
m≠≥d
);

220 i‡(
	`mëad©a_thp_madvi£
(Ë&& (
›t_mëad©a_thp
 ==

221 
mëad©a_thp_Æways
 || 
ba£
->
auto_thp_swôched
)) {

222 
ba£
->
n_thp
 +(
	`HUGEPAGE_CEILING
((
uöçå_t
)
addr
 + 
size
)

223 - 
	`HUGEPAGE_CEILING
((
uöçå_t
)
addr
 - 
g≠_size
)) >>

224 
LG_HUGEPAGE
;

225 
	`as£π
(
ba£
->
m≠≥d
 >ba£->
n_thp
 << 
LG_HUGEPAGE
);

228 
	}
}

231 
	$ba£_exã¡_bump_Æloc
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
, 
exã¡_t
 *
exã¡
,

232 
size_t
 
size
, size_à
Æignmít
) {

233 *
ªt
;

234 
size_t
 
g≠_size
;

236 
ªt
 = 
	`ba£_exã¡_bump_Æloc_hñ≥r
(
exã¡
, &
g≠_size
, 
size
, 
Æignmít
);

237 
	`ba£_exã¡_bump_Æloc_po°
(
tsdn
, 
ba£
, 
exã¡
, 
g≠_size
, 
ªt
, 
size
);

238  
ªt
;

239 
	}
}

246 
ba£_block_t
 *

247 
	$ba£_block_Æloc
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
, 
exã¡_hooks_t
 *
exã¡_hooks
,

248 
öd
, 
pszöd_t
 *
pöd_œ°
, 
size_t
 *
exã¡_¢_√xt
, size_à
size
,

249 
size_t
 
Æignmít
) {

250 
Æignmít
 = 
	`ALIGNMENT_CEILING
◊lignmít, 
QUANTUM
);

251 
size_t
 
usize
 = 
	`ALIGNMENT_CEILING
(
size
, 
Æignmít
);

252 
size_t
 
hódî_size
 = (
ba£_block_t
);

253 
size_t
 
g≠_size
 = 
	`ALIGNMENT_CEILING
(
hódî_size
, 
Æignmít
) -

254 
hódî_size
;

262 
size_t
 
mö_block_size
 = 
	`HUGEPAGE_CEILING
(
	`sz_psz2u
(
hódî_size
 + 
g≠_size


263 + 
usize
));

264 
pszöd_t
 
pöd_√xt
 = (*
pöd_œ°
 + 1 < 
NPSIZES
) ? *pind_last + 1 :

265 *
pöd_œ°
;

266 
size_t
 
√xt_block_size
 = 
	`HUGEPAGE_CEILING
(
	`sz_pöd2sz
(
pöd_√xt
));

267 
size_t
 
block_size
 = (
mö_block_size
 > 
√xt_block_size
) ? min_block_size

268 : 
√xt_block_size
;

269 
ba£_block_t
 *
block
 = (ba£_block_à*)
	`ba£_m≠
(
tsdn
, 
exã¡_hooks
, 
öd
,

270 
block_size
);

271 i‡(
block
 =
NULL
) {

272  
NULL
;

275 i‡(
	`mëad©a_thp_madvi£
()) {

276 *
addr
 = (*)
block
;

277 
	`as£π
(((
uöçå_t
)
addr
 & 
HUGEPAGE_MASK
) == 0 &&

278 (
block_size
 & 
HUGEPAGE_MASK
) == 0);

279 i‡(
›t_mëad©a_thp
 =
mëad©a_thp_Æways
) {

280 
	`∑ges_huge
(
addr
, 
block_size
);

281 } i‡(
›t_mëad©a_thp
 =
mëad©a_thp_auto
 &&

282 
ba£
 !
NULL
) {

284 
	`mÆloc_muãx_lock
(
tsdn
, &
ba£
->
mtx
);

285 
	`ba£_auto_thp_swôch
(
tsdn
, 
ba£
);

286 i‡(
ba£
->
auto_thp_swôched
) {

287 
	`∑ges_huge
(
addr
, 
block_size
);

289 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
ba£
->
mtx
);

293 *
pöd_œ°
 = 
	`sz_psz2öd
(
block_size
);

294 
block
->
size
 = 
block_size
;

295 
block
->
√xt
 = 
NULL
;

296 
	`as£π
(
block_size
 >
hódî_size
);

297 
	`ba£_exã¡_öô
(
exã¡_¢_√xt
, &
block
->
exã¡
,

298 (*)((
uöçå_t
)
block
 + 
hódî_size
), 
block_size
 - header_size);

299  
block
;

300 
	}
}

306 
exã¡_t
 *

307 
	$ba£_exã¡_Æloc
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
, 
size_t
 
size
, size_à
Æignmít
) {

308 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
ba£
->
mtx
);

310 
exã¡_hooks_t
 *
exã¡_hooks
 = 
	`ba£_exã¡_hooks_gë
(
ba£
);

315 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
ba£
->
mtx
);

316 
ba£_block_t
 *
block
 = 
	`ba£_block_Æloc
(
tsdn
, 
ba£
, 
exã¡_hooks
,

317 
	`ba£_öd_gë
(
ba£
), &ba£->
pöd_œ°
, &ba£->
exã¡_¢_√xt
, 
size
,

318 
Æignmít
);

319 
	`mÆloc_muãx_lock
(
tsdn
, &
ba£
->
mtx
);

320 i‡(
block
 =
NULL
) {

321  
NULL
;

323 
block
->
√xt
 = 
ba£
->
blocks
;

324 
ba£
->
blocks
 = 
block
;

325 i‡(
c⁄fig_°©s
) {

326 
ba£
->
Æloˇãd
 +(
ba£_block_t
);

327 
ba£
->
ªsidít
 +
	`PAGE_CEILING
((
ba£_block_t
));

328 
ba£
->
m≠≥d
 +
block
->
size
;

329 i‡(
	`mëad©a_thp_madvi£
() &&

330 !(
›t_mëad©a_thp
 =
mëad©a_thp_auto


331 && !
ba£
->
auto_thp_swôched
)) {

332 
	`as£π
(
ba£
->
n_thp
 > 0);

333 
ba£
->
n_thp
 +
	`HUGEPAGE_CEILING
((
ba£_block_t
)) >>

334 
LG_HUGEPAGE
;

336 
	`as£π
(
ba£
->
Æloˇãd
 <ba£->
ªsidít
);

337 
	`as£π
(
ba£
->
ªsidít
 <ba£->
m≠≥d
);

338 
	`as£π
(
ba£
->
n_thp
 << 
LG_HUGEPAGE
 <ba£->
m≠≥d
);

340  &
block
->
exã¡
;

341 
	}
}

343 
ba£_t
 *

344 
	$b0gë
() {

345  
b0
;

346 
	}
}

348 
ba£_t
 *

349 
	$ba£_√w
(
tsdn_t
 *
tsdn
, 
öd
, 
exã¡_hooks_t
 *
exã¡_hooks
) {

350 
pszöd_t
 
pöd_œ°
 = 0;

351 
size_t
 
exã¡_¢_√xt
 = 0;

352 
ba£_block_t
 *
block
 = 
	`ba£_block_Æloc
(
tsdn
, 
NULL
, 
exã¡_hooks
, 
öd
,

353 &
pöd_œ°
, &
exã¡_¢_√xt
, (
ba£_t
), 
QUANTUM
);

354 i‡(
block
 =
NULL
) {

355  
NULL
;

358 
size_t
 
g≠_size
;

359 
size_t
 
ba£_Æignmít
 = 
CACHELINE
;

360 
size_t
 
ba£_size
 = 
	`ALIGNMENT_CEILING
((
ba£_t
), 
ba£_Æignmít
);

361 
ba£_t
 *
ba£
 = (ba£_à*)
	`ba£_exã¡_bump_Æloc_hñ≥r
(&
block
->
exã¡
,

362 &
g≠_size
, 
ba£_size
, 
ba£_Æignmít
);

363 
ba£
->
öd
 = ind;

364 
	`©omic_°‹e_p
(&
ba£
->
exã¡_hooks
,Éxã¡_hooks, 
ATOMIC_RELAXED
);

365 i‡(
	`mÆloc_muãx_öô
(&
ba£
->
mtx
, "ba£", 
WITNESS_RANK_BASE
,

366 
mÆloc_muãx_ønk_ex˛usive
)) {

367 
	`ba£_unm≠
(
tsdn
, 
exã¡_hooks
, 
öd
, 
block
, block->
size
);

368  
NULL
;

370 
ba£
->
pöd_œ°
 =Öind_last;

371 
ba£
->
exã¡_¢_√xt
 =Éxtent_sn_next;

372 
ba£
->
blocks
 = 
block
;

373 
ba£
->
auto_thp_swôched
 = 
Ál£
;

374 
szöd_t
 
i
 = 0; i < 
NSIZES
; i++) {

375 
	`exã¡_hóp_√w
(&
ba£
->
avaû
[
i
]);

377 i‡(
c⁄fig_°©s
) {

378 
ba£
->
Æloˇãd
 = (
ba£_block_t
);

379 
ba£
->
ªsidít
 = 
	`PAGE_CEILING
((
ba£_block_t
));

380 
ba£
->
m≠≥d
 = 
block
->
size
;

381 
ba£
->
n_thp
 = (
›t_mëad©a_thp
 =
mëad©a_thp_Æways
) &&

382 
	`mëad©a_thp_madvi£
(Ë? 
	`HUGEPAGE_CEILING
((
ba£_block_t
))

383 >> 
LG_HUGEPAGE
 : 0;

384 
	`as£π
(
ba£
->
Æloˇãd
 <ba£->
ªsidít
);

385 
	`as£π
(
ba£
->
ªsidít
 <ba£->
m≠≥d
);

386 
	`as£π
(
ba£
->
n_thp
 << 
LG_HUGEPAGE
 <ba£->
m≠≥d
);

388 
	`ba£_exã¡_bump_Æloc_po°
(
tsdn
, 
ba£
, &
block
->
exã¡
, 
g≠_size
, base,

389 
ba£_size
);

391  
ba£
;

392 
	}
}

395 
	$ba£_dñëe
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
) {

396 
exã¡_hooks_t
 *
exã¡_hooks
 = 
	`ba£_exã¡_hooks_gë
(
ba£
);

397 
ba£_block_t
 *
√xt
 = 
ba£
->
blocks
;

399 
ba£_block_t
 *
block
 = 
√xt
;

400 
√xt
 = 
block
->next;

401 
	`ba£_unm≠
(
tsdn
, 
exã¡_hooks
, 
	`ba£_öd_gë
(
ba£
), 
block
,

402 
block
->
size
);

403 } 
√xt
 !
NULL
);

404 
	}
}

406 
exã¡_hooks_t
 *

407 
	$ba£_exã¡_hooks_gë
(
ba£_t
 *
ba£
) {

408  (
exã¡_hooks_t
 *)
	`©omic_lﬂd_p
(&
ba£
->
exã¡_hooks
,

409 
ATOMIC_ACQUIRE
);

410 
	}
}

412 
exã¡_hooks_t
 *

413 
	$ba£_exã¡_hooks_£t
(
ba£_t
 *
ba£
, 
exã¡_hooks_t
 *
exã¡_hooks
) {

414 
exã¡_hooks_t
 *
ﬁd_exã¡_hooks
 = 
	`ba£_exã¡_hooks_gë
(
ba£
);

415 
	`©omic_°‹e_p
(&
ba£
->
exã¡_hooks
,Éxã¡_hooks, 
ATOMIC_RELEASE
);

416  
ﬁd_exã¡_hooks
;

417 
	}
}

420 
	$ba£_Æloc_im∂
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
, 
size_t
 
size
, size_à
Æignmít
,

421 
size_t
 *
e¢
) {

422 
Æignmít
 = 
	`QUANTUM_CEILING
(alignment);

423 
size_t
 
usize
 = 
	`ALIGNMENT_CEILING
(
size
, 
Æignmít
);

424 
size_t
 
asize
 = 
usize
 + 
Æignmít
 - 
QUANTUM
;

426 
exã¡_t
 *
exã¡
 = 
NULL
;

427 
	`mÆloc_muãx_lock
(
tsdn
, &
ba£
->
mtx
);

428 
szöd_t
 
i
 = 
	`sz_size2ödex
(
asize
); i < 
NSIZES
; i++) {

429 
exã¡
 = 
	`exã¡_hóp_ªmove_fú°
(&
ba£
->
avaû
[
i
]);

430 i‡(
exã¡
 !
NULL
) {

435 i‡(
exã¡
 =
NULL
) {

437 
exã¡
 = 
	`ba£_exã¡_Æloc
(
tsdn
, 
ba£
, 
usize
, 
Æignmít
);

439 *
ªt
;

440 i‡(
exã¡
 =
NULL
) {

441 
ªt
 = 
NULL
;

442 
œbñ_ªtu∫
;

445 
ªt
 = 
	`ba£_exã¡_bump_Æloc
(
tsdn
, 
ba£
, 
exã¡
, 
usize
, 
Æignmít
);

446 i‡(
e¢
 !
NULL
) {

447 *
e¢
 = 
	`exã¡_¢_gë
(
exã¡
);

449 
œbñ_ªtu∫
:

450 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
ba£
->
mtx
);

451  
ªt
;

452 
	}
}

463 
	$ba£_Æloc
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
, 
size_t
 
size
, size_à
Æignmít
) {

464  
	`ba£_Æloc_im∂
(
tsdn
, 
ba£
, 
size
, 
Æignmít
, 
NULL
);

465 
	}
}

467 
exã¡_t
 *

468 
	$ba£_Æloc_exã¡
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
) {

469 
size_t
 
e¢
;

470 
exã¡_t
 *
exã¡
 = 
	`ba£_Æloc_im∂
(
tsdn
, 
ba£
, (extent_t),

471 
CACHELINE
, &
e¢
);

472 i‡(
exã¡
 =
NULL
) {

473  
NULL
;

475 
	`exã¡_e¢_£t
(
exã¡
, 
e¢
);

476  
exã¡
;

477 
	}
}

480 
	$ba£_°©s_gë
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
, 
size_t
 *
Æloˇãd
, size_à*
ªsidít
,

481 
size_t
 *
m≠≥d
, size_à*
n_thp
) {

482 
	`ˇs£π
(
c⁄fig_°©s
);

484 
	`mÆloc_muãx_lock
(
tsdn
, &
ba£
->
mtx
);

485 
	`as£π
(
ba£
->
Æloˇãd
 <ba£->
ªsidít
);

486 
	`as£π
(
ba£
->
ªsidít
 <ba£->
m≠≥d
);

487 *
Æloˇãd
 = 
ba£
->allocated;

488 *
ªsidít
 = 
ba£
->resident;

489 *
m≠≥d
 = 
ba£
->mapped;

490 *
n_thp
 = 
ba£
->n_thp;

491 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
ba£
->
mtx
);

492 
	}
}

495 
	$ba£_¥ef‹k
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
) {

496 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
ba£
->
mtx
);

497 
	}
}

500 
	$ba£_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
) {

501 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
ba£
->
mtx
);

502 
	}
}

505 
	$ba£_po°f‹k_chûd
(
tsdn_t
 *
tsdn
, 
ba£_t
 *
ba£
) {

506 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
ba£
->
mtx
);

507 
	}
}

509 
boﬁ


510 
	$ba£_boŸ
(
tsdn_t
 *
tsdn
) {

511 
b0
 = 
	`ba£_√w
(
tsdn
, 0, (
exã¡_hooks_t
 *)&
exã¡_hooks_deÁu…
);

512  (
b0
 =
NULL
);

513 
	}
}

	@src/bin.c

1 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

2 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

4 
	~"jemÆloc/öã∫Æ/bö.h
"

5 
	~"jemÆloc/öã∫Æ/wô√ss.h
"

7 c⁄° 
bö_öfo_t
 
	gbö_öfos
[
NBINS
] = {

8 
	#BIN_INFO_bö_yes
(
ªg_size
, 
¶ab_size
, 
ƒegs
) \

9 {
ªg_size
, 
¶ab_size
, 
ƒegs
, 
	`BITMAP_INFO_INITIALIZER
“ªgs)},

	)

10 
	#BIN_INFO_bö_no
(
ªg_size
, 
¶ab_size
, 
ƒegs
)

	)

11 
	#SC
(
ödex
, 
lg_gΩ
, 
lg_dñè
, 
ndñè
, 
psz
, 
bö
, 
pgs
, \

12 
lg_dñè_lookup
) \

13 
BIN_INFO_bö_
##
	`bö
((1U<<
lg_gΩ
Ë+ (
ndñè
<<
lg_dñè
), \

14 (
pgs
 << 
LG_PAGE
), (pg†<< LG_PAGEË/ ((1U<<
lg_gΩ
) + \

15 (
ndñè
<<
lg_dñè
)))

	)

16 
SIZE_CLASSES


17 #unde‡
BIN_INFO_bö_yes


18 #unde‡
BIN_INFO_bö_no


19 #unde‡
SC


22 
boﬁ


23 
	$bö_öô
(
bö_t
 *
bö
) {

24 i‡(
	`mÆloc_muãx_öô
(&
bö
->
lock
, "bö", 
WITNESS_RANK_BIN
,

25 
mÆloc_muãx_ønk_ex˛usive
)) {

26  
åue
;

28 
bö
->
¶abcur
 = 
NULL
;

29 
	`exã¡_hóp_√w
(&
bö
->
¶abs_n⁄fuŒ
);

30 
	`exã¡_li°_öô
(&
bö
->
¶abs_fuŒ
);

31 i‡(
c⁄fig_°©s
) {

32 
	`mem£t
(&
bö
->
°©s
, 0, (
bö_°©s_t
));

34  
Ál£
;

35 
	}
}

38 
	$bö_¥ef‹k
(
tsdn_t
 *
tsdn
, 
bö_t
 *
bö
) {

39 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
bö
->
lock
);

40 
	}
}

43 
	$bö_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
, 
bö_t
 *
bö
) {

44 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
bö
->
lock
);

45 
	}
}

48 
	$bö_po°f‹k_chûd
(
tsdn_t
 *
tsdn
, 
bö_t
 *
bö
) {

49 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
bö
->
lock
);

50 
	}
}

	@src/bitmap.c

1 
	#JEMALLOC_BITMAP_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

9 #ifde‡
BITMAP_USE_TREE


12 
	$bôm≠_öfo_öô
(
bôm≠_öfo_t
 *
böfo
, 
size_t
 
nbôs
) {

13 
i
;

14 
size_t
 
group_cou¡
;

16 
	`as£π
(
nbôs
 > 0);

17 
	`as£π
(
nbôs
 <(
	`ZU
(1Ë<< 
LG_BITMAP_MAXBITS
));

24 
böfo
->
Àvñs
[0].
group_off£t
 = 0;

25 
group_cou¡
 = 
	`BITMAP_BITS2GROUPS
(
nbôs
);

26 
i
 = 1; 
group_cou¡
 > 1; i++) {

27 
	`as£π
(
i
 < 
BITMAP_MAX_LEVELS
);

28 
böfo
->
Àvñs
[
i
].
group_off£t
 = binfo->levels[i-1].group_offset

29 + 
group_cou¡
;

30 
group_cou¡
 = 
	`BITMAP_BITS2GROUPS
(group_count);

32 
böfo
->
Àvñs
[
i
].
group_off£t
 = binfo->levels[i-1].group_offset

33 + 
group_cou¡
;

34 
	`as£π
(
böfo
->
Àvñs
[
i
].
group_off£t
 <
BITMAP_GROUPS_MAX
);

35 
böfo
->
∆evñs
 = 
i
;

36 
böfo
->
nbôs
 =Çbits;

37 
	}
}

39 
size_t


40 
	$bôm≠_öfo_ngroups
(c⁄° 
bôm≠_öfo_t
 *
böfo
) {

41  
böfo
->
Àvñs
[böfo->
∆evñs
].
group_off£t
;

42 
	}
}

45 
	$bôm≠_öô
(
bôm≠_t
 *
bôm≠
, c⁄° 
bôm≠_öfo_t
 *
böfo
, 
boﬁ
 
fûl
) {

46 
size_t
 
exåa
;

47 
i
;

54 i‡(
fûl
) {

56 
	`mem£t
(
bôm≠
, 0, 
	`bôm≠_size
(
böfo
));

66 
	`mem£t
(
bôm≠
, 0xffU, 
	`bôm≠_size
(
böfo
));

67 
exåa
 = (
BITMAP_GROUP_NBITS
 - (
böfo
->
nbôs
 & 
BITMAP_GROUP_NBITS_MASK
))

68 & 
BITMAP_GROUP_NBITS_MASK
;

69 i‡(
exåa
 != 0) {

70 
bôm≠
[
böfo
->
Àvñs
[1].
group_off£t
 - 1] >>
exåa
;

72 
i
 = 1; i < 
böfo
->
∆evñs
; i++) {

73 
size_t
 
group_cou¡
 = 
böfo
->
Àvñs
[
i
].
group_off£t
 -

74 
böfo
->
Àvñs
[
i
-1].
group_off£t
;

75 
exåa
 = (
BITMAP_GROUP_NBITS
 - (
group_cou¡
 &

76 
BITMAP_GROUP_NBITS_MASK
)) & BITMAP_GROUP_NBITS_MASK;

77 i‡(
exåa
 != 0) {

78 
bôm≠
[
böfo
->
Àvñs
[
i
+1].
group_off£t
 - 1] >>
exåa
;

81 
	}
}

86 
	$bôm≠_öfo_öô
(
bôm≠_öfo_t
 *
böfo
, 
size_t
 
nbôs
) {

87 
	`as£π
(
nbôs
 > 0);

88 
	`as£π
(
nbôs
 <(
	`ZU
(1Ë<< 
LG_BITMAP_MAXBITS
));

90 
böfo
->
ngroups
 = 
	`BITMAP_BITS2GROUPS
(
nbôs
);

91 
böfo
->
nbôs
 =Çbits;

92 
	}
}

94 
size_t


95 
	$bôm≠_öfo_ngroups
(c⁄° 
bôm≠_öfo_t
 *
böfo
) {

96  
böfo
->
ngroups
;

97 
	}
}

100 
	$bôm≠_öô
(
bôm≠_t
 *
bôm≠
, c⁄° 
bôm≠_öfo_t
 *
böfo
, 
boﬁ
 
fûl
) {

101 
size_t
 
exåa
;

103 i‡(
fûl
) {

104 
	`mem£t
(
bôm≠
, 0, 
	`bôm≠_size
(
böfo
));

108 
	`mem£t
(
bôm≠
, 0xffU, 
	`bôm≠_size
(
böfo
));

109 
exåa
 = (
BITMAP_GROUP_NBITS
 - (
böfo
->
nbôs
 & 
BITMAP_GROUP_NBITS_MASK
))

110 & 
BITMAP_GROUP_NBITS_MASK
;

111 i‡(
exåa
 != 0) {

112 
bôm≠
[
böfo
->
ngroups
 - 1] >>
exåa
;

114 
	}
}

118 
size_t


119 
	$bôm≠_size
(c⁄° 
bôm≠_öfo_t
 *
böfo
) {

120  (
	`bôm≠_öfo_ngroups
(
böfo
Ë<< 
LG_SIZEOF_BITMAP
);

121 
	}
}

	@src/ckh.c

37 
	#JEMALLOC_CKH_C_


	)

38 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

40 
	~"jemÆloc/öã∫Æ/ckh.h
"

42 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

44 
	~"jemÆloc/öã∫Æ/as£π.h
"

45 
	~"jemÆloc/öã∫Æ/hash.h
"

46 
	~"jemÆloc/öã∫Æ/mÆloc_io.h
"

47 
	~"jemÆloc/öã∫Æ/¥ng.h
"

48 
	~"jemÆloc/öã∫Æ/utû.h
"

53 
boﬁ
 
ckh_grow
(
tsd_t
 *
tsd
, 
ckh_t
 *
ckh
);

54 
ckh_shrök
(
tsd_t
 *
tsd
, 
ckh_t
 *
ckh
);

62 
size_t


63 
	$ckh_buckë_£¨ch
(
ckh_t
 *
ckh
, 
size_t
 
buckë
, c⁄° *
key
) {

64 
ckhc_t
 *
˚Œ
;

65 
i
;

67 
i
 = 0; i < (
	`ZU
(1Ë<< 
LG_CKH_BUCKET_CELLS
); i++) {

68 
˚Œ
 = &
ckh
->
èb
[(
buckë
 << 
LG_CKH_BUCKET_CELLS
Ë+ 
i
];

69 i‡(
˚Œ
->
key
 !
NULL
 && 
ckh
->
	`keycomp
(key, cell->key)) {

70  (
buckë
 << 
LG_CKH_BUCKET_CELLS
Ë+ 
i
;

74  
SIZE_T_MAX
;

75 
	}
}

80 
size_t


81 
	$ckh_i£¨ch
(
ckh_t
 *
ckh
, c⁄° *
key
) {

82 
size_t
 
hashes
[2], 
buckë
, 
˚Œ
;

84 
	`as£π
(
ckh
 !
NULL
);

86 
ckh
->
	`hash
(
key
, 
hashes
);

89 
buckë
 = 
hashes
[0] & ((
	`ZU
(1Ë<< 
ckh
->
lg_curbuckës
) - 1);

90 
˚Œ
 = 
	`ckh_buckë_£¨ch
(
ckh
, 
buckë
, 
key
);

91 i‡(
˚Œ
 !
SIZE_T_MAX
) {

92  
˚Œ
;

96 
buckë
 = 
hashes
[1] & ((
	`ZU
(1Ë<< 
ckh
->
lg_curbuckës
) - 1);

97 
˚Œ
 = 
	`ckh_buckë_£¨ch
(
ckh
, 
buckë
, 
key
);

98  
˚Œ
;

99 
	}
}

101 
boﬁ


102 
	$ckh_åy_buckë_ö£π
(
ckh_t
 *
ckh
, 
size_t
 
buckë
, c⁄° *
key
,

103 c⁄° *
d©a
) {

104 
ckhc_t
 *
˚Œ
;

105 
off£t
, 
i
;

111 
off£t
 = ()
	`¥ng_lg_ønge_u64
(&
ckh
->
¥ng_°©e
,

112 
LG_CKH_BUCKET_CELLS
);

113 
i
 = 0; i < (
	`ZU
(1Ë<< 
LG_CKH_BUCKET_CELLS
); i++) {

114 
˚Œ
 = &
ckh
->
èb
[(
buckë
 << 
LG_CKH_BUCKET_CELLS
) +

115 ((
i
 + 
off£t
Ë& ((
	`ZU
(1Ë<< 
LG_CKH_BUCKET_CELLS
) - 1))];

116 i‡(
˚Œ
->
key
 =
NULL
) {

117 
˚Œ
->
key
 = key;

118 
˚Œ
->
d©a
 = data;

119 
ckh
->
cou¡
++;

120  
Ál£
;

124  
åue
;

125 
	}
}

133 
boﬁ


134 
	$ckh_evi˘_ªloc_ö£π
(
ckh_t
 *
ckh
, 
size_t
 
¨gbuckë
, c⁄° **
¨gkey
,

135 c⁄° **
¨gd©a
) {

136 c⁄° *
key
, *
d©a
, *
tkey
, *
td©a
;

137 
ckhc_t
 *
˚Œ
;

138 
size_t
 
hashes
[2], 
buckë
, 
tbuckë
;

139 
i
;

141 
buckë
 = 
¨gbuckë
;

142 
key
 = *
¨gkey
;

143 
d©a
 = *
¨gd©a
;

144 
åue
) {

153 
i
 = ()
	`¥ng_lg_ønge_u64
(&
ckh
->
¥ng_°©e
,

154 
LG_CKH_BUCKET_CELLS
);

155 
˚Œ
 = &
ckh
->
èb
[(
buckë
 << 
LG_CKH_BUCKET_CELLS
Ë+ 
i
];

156 
	`as£π
(
˚Œ
->
key
 !
NULL
);

159 
tkey
 = 
˚Œ
->
key
; 
td©a
 = cñl->
d©a
;

160 
˚Œ
->
key
 = key; cñl->
d©a
 = data;

161 
key
 = 
tkey
; 
d©a
 = 
td©a
;

163 #ifde‡
CKH_COUNT


164 
ckh
->
ƒñocs
++;

168 
ckh
->
	`hash
(
key
, 
hashes
);

169 
tbuckë
 = 
hashes
[1] & ((
	`ZU
(1Ë<< 
ckh
->
lg_curbuckës
) - 1);

170 i‡(
tbuckë
 =
buckë
) {

171 
tbuckë
 = 
hashes
[0] & ((
	`ZU
(1Ë<< 
ckh
->
lg_curbuckës
)

191 i‡(
tbuckë
 =
¨gbuckë
) {

192 *
¨gkey
 = 
key
;

193 *
¨gd©a
 = 
d©a
;

194  
åue
;

197 
buckë
 = 
tbuckë
;

198 i‡(!
	`ckh_åy_buckë_ö£π
(
ckh
, 
buckë
, 
key
, 
d©a
)) {

199  
Ál£
;

202 
	}
}

204 
boﬁ


205 
	$ckh_åy_ö£π
(
ckh_t
 *
ckh
, c⁄°**
¨gkey
, c⁄°**
¨gd©a
) {

206 
size_t
 
hashes
[2], 
buckë
;

207 c⁄° *
key
 = *
¨gkey
;

208 c⁄° *
d©a
 = *
¨gd©a
;

210 
ckh
->
	`hash
(
key
, 
hashes
);

213 
buckë
 = 
hashes
[0] & ((
	`ZU
(1Ë<< 
ckh
->
lg_curbuckës
) - 1);

214 i‡(!
	`ckh_åy_buckë_ö£π
(
ckh
, 
buckë
, 
key
, 
d©a
)) {

215  
Ál£
;

219 
buckë
 = 
hashes
[1] & ((
	`ZU
(1Ë<< 
ckh
->
lg_curbuckës
) - 1);

220 i‡(!
	`ckh_åy_buckë_ö£π
(
ckh
, 
buckë
, 
key
, 
d©a
)) {

221  
Ál£
;

227  
	`ckh_evi˘_ªloc_ö£π
(
ckh
, 
buckë
, 
¨gkey
, 
¨gd©a
);

228 
	}
}

234 
boﬁ


235 
	$ckh_ªbuûd
(
ckh_t
 *
ckh
, 
ckhc_t
 *
aTab
) {

236 
size_t
 
cou¡
, 
i
, 
nös
;

237 c⁄° *
key
, *
d©a
;

239 
cou¡
 = 
ckh
->count;

240 
ckh
->
cou¡
 = 0;

241 
i
 = 
nös
 = 0;Çö†< 
cou¡
; i++) {

242 i‡(
aTab
[
i
].
key
 !
NULL
) {

243 
key
 = 
aTab
[
i
].key;

244 
d©a
 = 
aTab
[
i
].data;

245 i‡(
	`ckh_åy_ö£π
(
ckh
, &
key
, &
d©a
)) {

246 
ckh
->
cou¡
 = count;

247  
åue
;

249 
nös
++;

253  
Ál£
;

254 
	}
}

256 
boﬁ


257 
	$ckh_grow
(
tsd_t
 *
tsd
, 
ckh_t
 *
ckh
) {

258 
boﬁ
 
ªt
;

259 
ckhc_t
 *
èb
, *
âab
;

260 
lg_¥evbuckës
, 
lg_cur˚Œs
;

262 #ifde‡
CKH_COUNT


263 
ckh
->
ngrows
++;

271 
lg_¥evbuckës
 = 
ckh
->
lg_curbuckës
;

272 
lg_cur˚Œs
 = 
ckh
->
lg_curbuckës
 + 
LG_CKH_BUCKET_CELLS
;

273 
åue
) {

274 
size_t
 
usize
;

276 
lg_cur˚Œs
++;

277 
usize
 = 
	`sz_ß2u
((
ckhc_t
Ë<< 
lg_cur˚Œs
, 
CACHELINE
);

278 i‡(
	`u∆ikñy
(
usize
 =0 || usizê> 
LARGE_MAXCLASS
)) {

279 
ªt
 = 
åue
;

280 
œbñ_ªtu∫
;

282 
èb
 = (
ckhc_t
 *)
	`ùÆlocztm
(
	`tsd_tsdn
(
tsd
), 
usize
, 
CACHELINE
,

283 
åue
, 
NULL
,Årue, 
	`¨ía_ichoo£
(
tsd
, NULL));

284 i‡(
èb
 =
NULL
) {

285 
ªt
 = 
åue
;

286 
œbñ_ªtu∫
;

289 
âab
 = 
ckh
->
èb
;

290 
ckh
->
èb
 =Åab;

291 
èb
 = 
âab
;

292 
ckh
->
lg_curbuckës
 = 
lg_cur˚Œs
 - 
LG_CKH_BUCKET_CELLS
;

294 i‡(!
	`ckh_ªbuûd
(
ckh
, 
èb
)) {

295 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
èb
, 
NULL
, NULL, 
åue
,Årue);

300 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
ckh
->
èb
, 
NULL
, NULL, 
åue
,Årue);

301 
ckh
->
èb
 =Åab;

302 
ckh
->
lg_curbuckës
 = 
lg_¥evbuckës
;

305 
ªt
 = 
Ál£
;

306 
œbñ_ªtu∫
:

307  
ªt
;

308 
	}
}

311 
	$ckh_shrök
(
tsd_t
 *
tsd
, 
ckh_t
 *
ckh
) {

312 
ckhc_t
 *
èb
, *
âab
;

313 
size_t
 
usize
;

314 
lg_¥evbuckës
, 
lg_cur˚Œs
;

320 
lg_¥evbuckës
 = 
ckh
->
lg_curbuckës
;

321 
lg_cur˚Œs
 = 
ckh
->
lg_curbuckës
 + 
LG_CKH_BUCKET_CELLS
 - 1;

322 
usize
 = 
	`sz_ß2u
((
ckhc_t
Ë<< 
lg_cur˚Œs
, 
CACHELINE
);

323 i‡(
	`u∆ikñy
(
usize
 =0 || usizê> 
LARGE_MAXCLASS
)) {

326 
èb
 = (
ckhc_t
 *)
	`ùÆlocztm
(
	`tsd_tsdn
(
tsd
), 
usize
, 
CACHELINE
, 
åue
, 
NULL
,

327 
åue
, 
	`¨ía_ichoo£
(
tsd
, 
NULL
));

328 i‡(
èb
 =
NULL
) {

336 
âab
 = 
ckh
->
èb
;

337 
ckh
->
èb
 =Åab;

338 
èb
 = 
âab
;

339 
ckh
->
lg_curbuckës
 = 
lg_cur˚Œs
 - 
LG_CKH_BUCKET_CELLS
;

341 i‡(!
	`ckh_ªbuûd
(
ckh
, 
èb
)) {

342 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
èb
, 
NULL
, NULL, 
åue
,Årue);

343 #ifde‡
CKH_COUNT


344 
ckh
->
nshröks
++;

350 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
ckh
->
èb
, 
NULL
, NULL, 
åue
,Årue);

351 
ckh
->
èb
 =Åab;

352 
ckh
->
lg_curbuckës
 = 
lg_¥evbuckës
;

353 #ifde‡
CKH_COUNT


354 
ckh
->
nshrökÁûs
++;

356 
	}
}

358 
boﬁ


359 
	$ckh_√w
(
tsd_t
 *
tsd
, 
ckh_t
 *
ckh
, 
size_t
 
möôems
, 
ckh_hash_t
 *
hash
,

360 
ckh_keycomp_t
 *
keycomp
) {

361 
boﬁ
 
ªt
;

362 
size_t
 
mö˚Œs
, 
usize
;

363 
lg_mö˚Œs
;

365 
	`as£π
(
möôems
 > 0);

366 
	`as£π
(
hash
 !
NULL
);

367 
	`as£π
(
keycomp
 !
NULL
);

369 #ifde‡
CKH_COUNT


370 
ckh
->
ngrows
 = 0;

371 
ckh
->
nshröks
 = 0;

372 
ckh
->
nshrökÁûs
 = 0;

373 
ckh
->
nö£πs
 = 0;

374 
ckh
->
ƒñocs
 = 0;

376 
ckh
->
¥ng_°©e
 = 42;

377 
ckh
->
cou¡
 = 0;

386 
	`as£π
(
LG_CKH_BUCKET_CELLS
 > 0);

387 
mö˚Œs
 = ((
möôems
 + (3 - (minitems % 3))) / 3) << 2;

388 
lg_mö˚Œs
 = 
LG_CKH_BUCKET_CELLS
;

389 (
	`ZU
(1Ë<< 
lg_mö˚Œs
Ë< 
mö˚Œs
;

390 
lg_mö˚Œs
++) {

393 
ckh
->
lg_möbuckës
 = 
lg_mö˚Œs
 - 
LG_CKH_BUCKET_CELLS
;

394 
ckh
->
lg_curbuckës
 = 
lg_mö˚Œs
 - 
LG_CKH_BUCKET_CELLS
;

395 
ckh
->
hash
 = hash;

396 
ckh
->
keycomp
 = keycomp;

398 
usize
 = 
	`sz_ß2u
((
ckhc_t
Ë<< 
lg_mö˚Œs
, 
CACHELINE
);

399 i‡(
	`u∆ikñy
(
usize
 =0 || usizê> 
LARGE_MAXCLASS
)) {

400 
ªt
 = 
åue
;

401 
œbñ_ªtu∫
;

403 
ckh
->
èb
 = (
ckhc_t
 *)
	`ùÆlocztm
(
	`tsd_tsdn
(
tsd
), 
usize
, 
CACHELINE
, 
åue
,

404 
NULL
, 
åue
, 
	`¨ía_ichoo£
(
tsd
, NULL));

405 i‡(
ckh
->
èb
 =
NULL
) {

406 
ªt
 = 
åue
;

407 
œbñ_ªtu∫
;

410 
ªt
 = 
Ál£
;

411 
œbñ_ªtu∫
:

412  
ªt
;

413 
	}
}

416 
	$ckh_dñëe
(
tsd_t
 *
tsd
, 
ckh_t
 *
ckh
) {

417 
	`as£π
(
ckh
 !
NULL
);

419 #ifde‡
CKH_VERBOSE


420 
	`mÆloc_¥ötf
(

421 "%s(%p):Çgrows: %"
FMTu64
",Çshrinks: %"FMTu64","

422 "ÇshrökÁûs: %"
FMTu64
",Çinserts: %"FMTu64","

423 "Çªlocs: %"
FMTu64
"\n", 
__func__
, 
ckh
,

424 ()
ckh
->
ngrows
,

425 ()
ckh
->
nshröks
,

426 ()
ckh
->
nshrökÁûs
,

427 ()
ckh
->
nö£πs
,

428 ()
ckh
->
ƒñocs
);

431 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
ckh
->
èb
, 
NULL
, NULL, 
åue
,Årue);

432 i‡(
c⁄fig_debug
) {

433 
	`mem£t
(
ckh
, 
JEMALLOC_FREE_JUNK
, (
ckh_t
));

435 
	}
}

437 
size_t


438 
	$ckh_cou¡
(
ckh_t
 *
ckh
) {

439 
	`as£π
(
ckh
 !
NULL
);

441  
ckh
->
cou¡
;

442 
	}
}

444 
boﬁ


445 
	$ckh_ôî
(
ckh_t
 *
ckh
, 
size_t
 *
èböd
, **
key
, **
d©a
) {

446 
size_t
 
i
, 
n˚Œs
;

448 
i
 = *
èböd
, 
n˚Œs
 = (
	`ZU
(1Ë<< (
ckh
->
lg_curbuckës
 +

449 
LG_CKH_BUCKET_CELLS
)); 
i
 < 
n˚Œs
; i++) {

450 i‡(
ckh
->
èb
[
i
].
key
 !
NULL
) {

451 i‡(
key
 !
NULL
) {

452 *
key
 = (*)
ckh
->
èb
[
i
].key;

454 i‡(
d©a
 !
NULL
) {

455 *
d©a
 = (*)
ckh
->
èb
[
i
].data;

457 *
èböd
 = 
i
 + 1;

458  
Ál£
;

462  
åue
;

463 
	}
}

465 
boﬁ


466 
	$ckh_ö£π
(
tsd_t
 *
tsd
, 
ckh_t
 *
ckh
, c⁄° *
key
, c⁄° *
d©a
) {

467 
boﬁ
 
ªt
;

469 
	`as£π
(
ckh
 !
NULL
);

470 
	`as£π
(
	`ckh_£¨ch
(
ckh
, 
key
, 
NULL
, NULL));

472 #ifde‡
CKH_COUNT


473 
ckh
->
nö£πs
++;

476 
	`ckh_åy_ö£π
(
ckh
, &
key
, &
d©a
)) {

477 i‡(
	`ckh_grow
(
tsd
, 
ckh
)) {

478 
ªt
 = 
åue
;

479 
œbñ_ªtu∫
;

483 
ªt
 = 
Ál£
;

484 
œbñ_ªtu∫
:

485  
ªt
;

486 
	}
}

488 
boﬁ


489 
	$ckh_ªmove
(
tsd_t
 *
tsd
, 
ckh_t
 *
ckh
, c⁄° *
£¨chkey
, **
key
,

490 **
d©a
) {

491 
size_t
 
˚Œ
;

493 
	`as£π
(
ckh
 !
NULL
);

495 
˚Œ
 = 
	`ckh_i£¨ch
(
ckh
, 
£¨chkey
);

496 i‡(
˚Œ
 !
SIZE_T_MAX
) {

497 i‡(
key
 !
NULL
) {

498 *
key
 = (*)
ckh
->
èb
[
˚Œ
].key;

500 i‡(
d©a
 !
NULL
) {

501 *
d©a
 = (*)
ckh
->
èb
[
˚Œ
].data;

503 
ckh
->
èb
[
˚Œ
].
key
 = 
NULL
;

504 
ckh
->
èb
[
˚Œ
].
d©a
 = 
NULL
;

506 
ckh
->
cou¡
--;

508 i‡(
ckh
->
cou¡
 < (
	`ZU
(1Ë<< (ckh->
lg_curbuckës


509 + 
LG_CKH_BUCKET_CELLS
 - 2)Ë&& 
ckh
->
lg_curbuckës


510 > 
ckh
->
lg_möbuckës
) {

512 
	`ckh_shrök
(
tsd
, 
ckh
);

515  
Ál£
;

518  
åue
;

519 
	}
}

521 
boﬁ


522 
	$ckh_£¨ch
(
ckh_t
 *
ckh
, c⁄° *
£¨chkey
, **
key
, **
d©a
) {

523 
size_t
 
˚Œ
;

525 
	`as£π
(
ckh
 !
NULL
);

527 
˚Œ
 = 
	`ckh_i£¨ch
(
ckh
, 
£¨chkey
);

528 i‡(
˚Œ
 !
SIZE_T_MAX
) {

529 i‡(
key
 !
NULL
) {

530 *
key
 = (*)
ckh
->
èb
[
˚Œ
].key;

532 i‡(
d©a
 !
NULL
) {

533 *
d©a
 = (*)
ckh
->
èb
[
˚Œ
].data;

535  
Ál£
;

538  
åue
;

539 
	}
}

542 
	$ckh_°rög_hash
(c⁄° *
key
, 
size_t
 
r_hash
[2]) {

543 
	`hash
(
key
, 
	`°æí
((c⁄° *)key), 0x94122f33U, 
r_hash
);

544 
	}
}

546 
boﬁ


547 
	$ckh_°rög_keycomp
(c⁄° *
k1
, c⁄° *
k2
) {

548 
	`as£π
(
k1
 !
NULL
);

549 
	`as£π
(
k2
 !
NULL
);

551  !
	`°rcmp
((*)
k1
, (*)
k2
);

552 
	}
}

555 
	$ckh_poöãr_hash
(c⁄° *
key
, 
size_t
 
r_hash
[2]) {

557 c⁄° *
v
;

558 
size_t
 
i
;

559 } 
u
;

561 
	`as£π
((
u
.
v
Ë=(u.
i
));

562 
u
.
v
 = 
key
;

563 
	`hash
(&
u
.
i
, (u.i), 0xd983396eU, 
r_hash
);

564 
	}
}

566 
boﬁ


567 
	$ckh_poöãr_keycomp
(c⁄° *
k1
, c⁄° *
k2
) {

568  (
k1
 =
k2
);

569 
	}
}

	@src/ctl.c

1 
	#JEMALLOC_CTL_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/˘l.h
"

7 
	~"jemÆloc/öã∫Æ/exã¡_dss.h
"

8 
	~"jemÆloc/öã∫Æ/exã¡_mm≠.h
"

9 
	~"jemÆloc/öã∫Æ/muãx.h
"

10 
	~"jemÆloc/öã∫Æ/n°ime.h
"

11 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

12 
	~"jemÆloc/öã∫Æ/utû.h
"

21 
mÆloc_muãx_t
 
	g˘l_mtx
;

22 
boﬁ
 
	g˘l_öôülized
;

23 
˘l_°©s_t
 *
	g˘l_°©s
;

24 
˘l_¨ías_t
 *
	g˘l_¨ías
;

29 c⁄° 
˘l_«med_node_t
 *

30 
	$˘l_«med_node
(c⁄° 
˘l_node_t
 *
node
) {

31  ((
node
->
«med
Ë? (c⁄° 
˘l_«med_node_t
 *Íodê: 
NULL
);

32 
	}
}

34 c⁄° 
˘l_«med_node_t
 *

35 
	$˘l_«med_chûdªn
(c⁄° 
˘l_«med_node_t
 *
node
, 
size_t
 
ödex
) {

36 c⁄° 
˘l_«med_node_t
 *
chûdªn
 = 
	`˘l_«med_node
(
node
->children);

38  (
chûdªn
 ? &chûdªn[
ödex
] : 
NULL
);

39 
	}
}

41 c⁄° 
˘l_ödexed_node_t
 *

42 
	$˘l_ödexed_node
(c⁄° 
˘l_node_t
 *
node
) {

43  (!
node
->
«med
 ? (c⁄° 
˘l_ödexed_node_t
 *Íodê: 
NULL
);

44 
	}
}

49 
	#CTL_PROTO
(
n
) \

50 
n
##
	`_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, \

51 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
);

	)

53 
	#INDEX_PROTO
(
n
) \

54 c⁄° 
˘l_«med_node_t
 *
n
##
	`_ödex
(
tsdn_t
 *
tsdn
, \

55 c⁄° 
size_t
 *
mib
, size_à
mibÀn
, size_à
i
);

	)

57 
	$CTL_PROTO
(
vîsi⁄
)

58 
	$CTL_PROTO
(
ïoch
)

59 
	$CTL_PROTO
(
background_thªad
)

60 
	$CTL_PROTO
(
thªad_tˇche_íabÀd
)

61 
	$CTL_PROTO
(
thªad_tˇche_Êush
)

62 
	$CTL_PROTO
(
thªad_¥of_«me
)

63 
	$CTL_PROTO
(
thªad_¥of_a˘ive
)

64 
	$CTL_PROTO
(
thªad_¨ía
)

65 
	$CTL_PROTO
(
thªad_Æloˇãd
)

66 
	$CTL_PROTO
(
thªad_Æloˇãdp
)

67 
	$CTL_PROTO
(
thªad_dóŒoˇãd
)

68 
	$CTL_PROTO
(
thªad_dóŒoˇãdp
)

69 
	$CTL_PROTO
(
c⁄fig_ˇche_oblivious
)

70 
	$CTL_PROTO
(
c⁄fig_debug
)

71 
	$CTL_PROTO
(
c⁄fig_fûl
)

72 
	$CTL_PROTO
(
c⁄fig_œzy_lock
)

73 
	$CTL_PROTO
(
c⁄fig_mÆloc_c⁄f
)

74 
	$CTL_PROTO
(
c⁄fig_¥of
)

75 
	$CTL_PROTO
(
c⁄fig_¥of_libgcc
)

76 
	$CTL_PROTO
(
c⁄fig_¥of_libunwöd
)

77 
	$CTL_PROTO
(
c⁄fig_°©s
)

78 
	$CTL_PROTO
(
c⁄fig_thp
)

79 
	$CTL_PROTO
(
c⁄fig_uåa˚
)

80 
	$CTL_PROTO
(
c⁄fig_xmÆloc
)

81 
	$CTL_PROTO
(
›t_ab‹t
)

82 
	$CTL_PROTO
(
›t_ab‹t_c⁄f
)

83 
	$CTL_PROTO
(
›t_mëad©a_thp
)

84 
	$CTL_PROTO
(
›t_ªèö
)

85 
	$CTL_PROTO
(
›t_dss
)

86 
	$CTL_PROTO
(
›t_«ª«s
)

87 
	$CTL_PROTO
(
›t_≥r˝u_¨ía
)

88 
	$CTL_PROTO
(
›t_background_thªad
)

89 
	$CTL_PROTO
(
›t_dúty_deˇy_ms
)

90 
	$CTL_PROTO
(
›t_muzzy_deˇy_ms
)

91 
	$CTL_PROTO
(
›t_°©s_¥öt
)

92 
	$CTL_PROTO
(
›t_°©s_¥öt_›ts
)

93 
	$CTL_PROTO
(
›t_junk
)

94 
	$CTL_PROTO
(
›t_zîo
)

95 
	$CTL_PROTO
(
›t_uåa˚
)

96 
	$CTL_PROTO
(
›t_xmÆloc
)

97 
	$CTL_PROTO
(
›t_tˇche
)

98 
	$CTL_PROTO
(
›t_lg_exã¡_max_a˘ive_fô
)

99 
	$CTL_PROTO
(
›t_lg_tˇche_max
)

100 
	$CTL_PROTO
(
›t_¥of
)

101 
	$CTL_PROTO
(
›t_¥of_¥efix
)

102 
	$CTL_PROTO
(
›t_¥of_a˘ive
)

103 
	$CTL_PROTO
(
›t_¥of_thªad_a˘ive_öô
)

104 
	$CTL_PROTO
(
›t_lg_¥of_ßm∂e
)

105 
	$CTL_PROTO
(
›t_lg_¥of_öãrvÆ
)

106 
	$CTL_PROTO
(
›t_¥of_gdump
)

107 
	$CTL_PROTO
(
›t_¥of_föÆ
)

108 
	$CTL_PROTO
(
›t_¥of_Àak
)

109 
	$CTL_PROTO
(
›t_¥of_accum
)

110 
	$CTL_PROTO
(
tˇche_¸óã
)

111 
	$CTL_PROTO
(
tˇche_Êush
)

112 
	$CTL_PROTO
(
tˇche_de°roy
)

113 
	$CTL_PROTO
(
¨ía_i_öôülized
)

114 
	$CTL_PROTO
(
¨ía_i_deˇy
)

115 
	$CTL_PROTO
(
¨ía_i_purge
)

116 
	$CTL_PROTO
(
¨ía_i_ª£t
)

117 
	$CTL_PROTO
(
¨ía_i_de°roy
)

118 
	$CTL_PROTO
(
¨ía_i_dss
)

119 
	$CTL_PROTO
(
¨ía_i_dúty_deˇy_ms
)

120 
	$CTL_PROTO
(
¨ía_i_muzzy_deˇy_ms
)

121 
	$CTL_PROTO
(
¨ía_i_exã¡_hooks
)

122 
	$CTL_PROTO
(
¨ía_i_ªèö_grow_limô
)

123 
	$INDEX_PROTO
(
¨ía_i
)

124 
	$CTL_PROTO
(
¨ías_bö_i_size
)

125 
	$CTL_PROTO
(
¨ías_bö_i_ƒegs
)

126 
	$CTL_PROTO
(
¨ías_bö_i_¶ab_size
)

127 
	$INDEX_PROTO
(
¨ías_bö_i
)

128 
	$CTL_PROTO
(
¨ías_Àxã¡_i_size
)

129 
	$INDEX_PROTO
(
¨ías_Àxã¡_i
)

130 
	$CTL_PROTO
(
¨ías_«ª«s
)

131 
	$CTL_PROTO
(
¨ías_dúty_deˇy_ms
)

132 
	$CTL_PROTO
(
¨ías_muzzy_deˇy_ms
)

133 
	$CTL_PROTO
(
¨ías_qu™tum
)

134 
	$CTL_PROTO
(
¨ías_∑ge
)

135 
	$CTL_PROTO
(
¨ías_tˇche_max
)

136 
	$CTL_PROTO
(
¨ías_nbös
)

137 
	$CTL_PROTO
(
¨ías_nhbös
)

138 
	$CTL_PROTO
(
¨ías_∆exã¡s
)

139 
	$CTL_PROTO
(
¨ías_¸óã
)

140 
	$CTL_PROTO
(
¥of_thªad_a˘ive_öô
)

141 
	$CTL_PROTO
(
¥of_a˘ive
)

142 
	$CTL_PROTO
(
¥of_dump
)

143 
	$CTL_PROTO
(
¥of_gdump
)

144 
	$CTL_PROTO
(
¥of_ª£t
)

145 
	$CTL_PROTO
(
¥of_öãrvÆ
)

146 
	$CTL_PROTO
(
lg_¥of_ßm∂e
)

147 
	$CTL_PROTO
(
°©s_¨ías_i_smÆl_Æloˇãd
)

148 
	$CTL_PROTO
(
°©s_¨ías_i_smÆl_nmÆloc
)

149 
	$CTL_PROTO
(
°©s_¨ías_i_smÆl_ndÆloc
)

150 
	$CTL_PROTO
(
°©s_¨ías_i_smÆl_ƒeque°s
)

151 
	$CTL_PROTO
(
°©s_¨ías_i_œrge_Æloˇãd
)

152 
	$CTL_PROTO
(
°©s_¨ías_i_œrge_nmÆloc
)

153 
	$CTL_PROTO
(
°©s_¨ías_i_œrge_ndÆloc
)

154 
	$CTL_PROTO
(
°©s_¨ías_i_œrge_ƒeque°s
)

155 
	$CTL_PROTO
(
°©s_¨ías_i_bös_j_nmÆloc
)

156 
	$CTL_PROTO
(
°©s_¨ías_i_bös_j_ndÆloc
)

157 
	$CTL_PROTO
(
°©s_¨ías_i_bös_j_ƒeque°s
)

158 
	$CTL_PROTO
(
°©s_¨ías_i_bös_j_cuºegs
)

159 
	$CTL_PROTO
(
°©s_¨ías_i_bös_j_nfûls
)

160 
	$CTL_PROTO
(
°©s_¨ías_i_bös_j_nÊushes
)

161 
	$CTL_PROTO
(
°©s_¨ías_i_bös_j_n¶abs
)

162 
	$CTL_PROTO
(
°©s_¨ías_i_bös_j_ƒe¶abs
)

163 
	$CTL_PROTO
(
°©s_¨ías_i_bös_j_cur¶abs
)

164 
	$INDEX_PROTO
(
°©s_¨ías_i_bös_j
)

165 
	$CTL_PROTO
(
°©s_¨ías_i_Àxã¡s_j_nmÆloc
)

166 
	$CTL_PROTO
(
°©s_¨ías_i_Àxã¡s_j_ndÆloc
)

167 
	$CTL_PROTO
(
°©s_¨ías_i_Àxã¡s_j_ƒeque°s
)

168 
	$CTL_PROTO
(
°©s_¨ías_i_Àxã¡s_j_cuæexã¡s
)

169 
	$INDEX_PROTO
(
°©s_¨ías_i_Àxã¡s_j
)

170 
	$CTL_PROTO
(
°©s_¨ías_i_¡hªads
)

171 
	$CTL_PROTO
(
°©s_¨ías_i_u±ime
)

172 
	$CTL_PROTO
(
°©s_¨ías_i_dss
)

173 
	$CTL_PROTO
(
°©s_¨ías_i_dúty_deˇy_ms
)

174 
	$CTL_PROTO
(
°©s_¨ías_i_muzzy_deˇy_ms
)

175 
	$CTL_PROTO
(
°©s_¨ías_i_∑˘ive
)

176 
	$CTL_PROTO
(
°©s_¨ías_i_pdúty
)

177 
	$CTL_PROTO
(
°©s_¨ías_i_pmuzzy
)

178 
	$CTL_PROTO
(
°©s_¨ías_i_m≠≥d
)

179 
	$CTL_PROTO
(
°©s_¨ías_i_ªèöed
)

180 
	$CTL_PROTO
(
°©s_¨ías_i_dúty_≈urge
)

181 
	$CTL_PROTO
(
°©s_¨ías_i_dúty_nmadvi£
)

182 
	$CTL_PROTO
(
°©s_¨ías_i_dúty_purged
)

183 
	$CTL_PROTO
(
°©s_¨ías_i_muzzy_≈urge
)

184 
	$CTL_PROTO
(
°©s_¨ías_i_muzzy_nmadvi£
)

185 
	$CTL_PROTO
(
°©s_¨ías_i_muzzy_purged
)

186 
	$CTL_PROTO
(
°©s_¨ías_i_ba£
)

187 
	$CTL_PROTO
(
°©s_¨ías_i_öã∫Æ
)

188 
	$CTL_PROTO
(
°©s_¨ías_i_mëad©a_thp
)

189 
	$CTL_PROTO
(
°©s_¨ías_i_tˇche_byãs
)

190 
	$CTL_PROTO
(
°©s_¨ías_i_ªsidít
)

191 
	$INDEX_PROTO
(
°©s_¨ías_i
)

192 
	$CTL_PROTO
(
°©s_Æloˇãd
)

193 
	$CTL_PROTO
(
°©s_a˘ive
)

194 
	$CTL_PROTO
(
°©s_background_thªad_num_thªads
)

195 
	$CTL_PROTO
(
°©s_background_thªad_num_runs
)

196 
	$CTL_PROTO
(
°©s_background_thªad_run_öãrvÆ
)

197 
	$CTL_PROTO
(
°©s_mëad©a
)

198 
	$CTL_PROTO
(
°©s_mëad©a_thp
)

199 
	$CTL_PROTO
(
°©s_ªsidít
)

200 
	$CTL_PROTO
(
°©s_m≠≥d
)

201 
	$CTL_PROTO
(
°©s_ªèöed
)

203 
	#MUTEX_STATS_CTL_PROTO_GEN
(
n
) \

204 
	`CTL_PROTO
(
°©s_
##
n
##
_num_›s
) \

205 
	`CTL_PROTO
(
°©s_
##
n
##
_num_waô
) \

206 
	`CTL_PROTO
(
°©s_
##
n
##
_num_•ö_acq
) \

207 
	`CTL_PROTO
(
°©s_
##
n
##
_num_ow√r_swôch
) \

208 
	`CTL_PROTO
(
°©s_
##
n
##
_tŸÆ_waô_time
) \

209 
	`CTL_PROTO
(
°©s_
##
n
##
_max_waô_time
) \

210 
	`CTL_PROTO
(
°©s_
##
n
##
_max_num_thds
)

	)

213 
	#OP
(
mtx
Ë
	`MUTEX_STATS_CTL_PROTO_GEN
(
muãxes_
##mtx)

	)

214 
MUTEX_PROF_GLOBAL_MUTEXES


215 #unde‡
OP


218 
	#OP
(
mtx
Ë
	`MUTEX_STATS_CTL_PROTO_GEN
(
¨ías_i_muãxes_
##mtx)

	)

219 
MUTEX_PROF_ARENA_MUTEXES


220 #unde‡
OP


223 
	$MUTEX_STATS_CTL_PROTO_GEN
(
¨ías_i_bös_j_muãx
)

224 #unde‡
MUTEX_STATS_CTL_PROTO_GEN


226 
	$CTL_PROTO
(
°©s_muãxes_ª£t
)

231 
	#NAME
(
n
Ë{
åue
},Ç

232 
	#CHILD
(
t
, 
c
) \

233 (
c
##
_node
Ë/ (
˘l_
##
t
##
_node_t
), \

234 (
˘l_node_t
 *)
c
##
_node
, \

235 
NULL


	)

236 
	#CTL
(
c
Ë0, 
NULL
, c##
_˘l


	)

242 
	#INDEX
(
i
Ë{
Ál£
}, i##
_ödex


	)

244 c⁄° 
˘l_«med_node_t
 
	gthªad_tˇche_node
[] = {

245 {
NAME
("íabÀd"), 
CTL
(
thªad_tˇche_íabÀd
)},

246 {
NAME
("Êush"), 
CTL
(
thªad_tˇche_Êush
)}

249 c⁄° 
˘l_«med_node_t
 
	gthªad_¥of_node
[] = {

250 {
NAME
("«me"), 
CTL
(
thªad_¥of_«me
)},

251 {
NAME
("a˘ive"), 
CTL
(
thªad_¥of_a˘ive
)}

254 c⁄° 
˘l_«med_node_t
 
	gthªad_node
[] = {

255 {
NAME
("¨ía"), 
CTL
(
thªad_¨ía
)},

256 {
NAME
("Æloˇãd"), 
CTL
(
thªad_Æloˇãd
)},

257 {
NAME
("Æloˇãdp"), 
CTL
(
thªad_Æloˇãdp
)},

258 {
NAME
("dóŒoˇãd"), 
CTL
(
thªad_dóŒoˇãd
)},

259 {
NAME
("dóŒoˇãdp"), 
CTL
(
thªad_dóŒoˇãdp
)},

260 {
NAME
("tˇche"), 
CHILD
(
«med
, 
thªad_tˇche
)},

261 {
NAME
("¥of"), 
CHILD
(
«med
, 
thªad_¥of
)}

264 c⁄° 
˘l_«med_node_t
 
	gc⁄fig_node
[] = {

265 {
NAME
("ˇche_oblivious"), 
CTL
(
c⁄fig_ˇche_oblivious
)},

266 {
NAME
("debug"), 
CTL
(
c⁄fig_debug
)},

267 {
NAME
("fûl"), 
CTL
(
c⁄fig_fûl
)},

268 {
NAME
("œzy_lock"), 
CTL
(
c⁄fig_œzy_lock
)},

269 {
NAME
("mÆloc_c⁄f"), 
CTL
(
c⁄fig_mÆloc_c⁄f
)},

270 {
NAME
("¥of"), 
CTL
(
c⁄fig_¥of
)},

271 {
NAME
("¥of_libgcc"), 
CTL
(
c⁄fig_¥of_libgcc
)},

272 {
NAME
("¥of_libunwöd"), 
CTL
(
c⁄fig_¥of_libunwöd
)},

273 {
NAME
("°©s"), 
CTL
(
c⁄fig_°©s
)},

274 {
NAME
("thp"), 
CTL
(
c⁄fig_thp
)},

275 {
NAME
("uåa˚"), 
CTL
(
c⁄fig_uåa˚
)},

276 {
NAME
("xmÆloc"), 
CTL
(
c⁄fig_xmÆloc
)}

279 c⁄° 
˘l_«med_node_t
 
	g›t_node
[] = {

280 {
NAME
("ab‹t"), 
CTL
(
›t_ab‹t
)},

281 {
NAME
("ab‹t_c⁄f"), 
CTL
(
›t_ab‹t_c⁄f
)},

282 {
NAME
("mëad©a_thp"), 
CTL
(
›t_mëad©a_thp
)},

283 {
NAME
("ªèö"), 
CTL
(
›t_ªèö
)},

284 {
NAME
("dss"), 
CTL
(
›t_dss
)},

285 {
NAME
("«ª«s"), 
CTL
(
›t_«ª«s
)},

286 {
NAME
("≥r˝u_¨ía"), 
CTL
(
›t_≥r˝u_¨ía
)},

287 {
NAME
("background_thªad"), 
CTL
(
›t_background_thªad
)},

288 {
NAME
("dúty_deˇy_ms"), 
CTL
(
›t_dúty_deˇy_ms
)},

289 {
NAME
("muzzy_deˇy_ms"), 
CTL
(
›t_muzzy_deˇy_ms
)},

290 {
NAME
("°©s_¥öt"), 
CTL
(
›t_°©s_¥öt
)},

291 {
NAME
("°©s_¥öt_›ts"), 
CTL
(
›t_°©s_¥öt_›ts
)},

292 {
NAME
("junk"), 
CTL
(
›t_junk
)},

293 {
NAME
("zîo"), 
CTL
(
›t_zîo
)},

294 {
NAME
("uåa˚"), 
CTL
(
›t_uåa˚
)},

295 {
NAME
("xmÆloc"), 
CTL
(
›t_xmÆloc
)},

296 {
NAME
("tˇche"), 
CTL
(
›t_tˇche
)},

297 {
NAME
("lg_exã¡_max_a˘ive_fô"), 
CTL
(
›t_lg_exã¡_max_a˘ive_fô
)},

298 {
NAME
("lg_tˇche_max"), 
CTL
(
›t_lg_tˇche_max
)},

299 {
NAME
("¥of"), 
CTL
(
›t_¥of
)},

300 {
NAME
("¥of_¥efix"), 
CTL
(
›t_¥of_¥efix
)},

301 {
NAME
("¥of_a˘ive"), 
CTL
(
›t_¥of_a˘ive
)},

302 {
NAME
("¥of_thªad_a˘ive_öô"), 
CTL
(
›t_¥of_thªad_a˘ive_öô
)},

303 {
NAME
("lg_¥of_ßm∂e"), 
CTL
(
›t_lg_¥of_ßm∂e
)},

304 {
NAME
("lg_¥of_öãrvÆ"), 
CTL
(
›t_lg_¥of_öãrvÆ
)},

305 {
NAME
("¥of_gdump"), 
CTL
(
›t_¥of_gdump
)},

306 {
NAME
("¥of_föÆ"), 
CTL
(
›t_¥of_föÆ
)},

307 {
NAME
("¥of_Àak"), 
CTL
(
›t_¥of_Àak
)},

308 {
NAME
("¥of_accum"), 
CTL
(
›t_¥of_accum
)}

311 c⁄° 
˘l_«med_node_t
 
	gtˇche_node
[] = {

312 {
NAME
("¸óã"), 
CTL
(
tˇche_¸óã
)},

313 {
NAME
("Êush"), 
CTL
(
tˇche_Êush
)},

314 {
NAME
("de°roy"), 
CTL
(
tˇche_de°roy
)}

317 c⁄° 
˘l_«med_node_t
 
	g¨ía_i_node
[] = {

318 {
NAME
("öôülized"), 
CTL
(
¨ía_i_öôülized
)},

319 {
NAME
("deˇy"), 
CTL
(
¨ía_i_deˇy
)},

320 {
NAME
("purge"), 
CTL
(
¨ía_i_purge
)},

321 {
NAME
("ª£t"), 
CTL
(
¨ía_i_ª£t
)},

322 {
NAME
("de°roy"), 
CTL
(
¨ía_i_de°roy
)},

323 {
NAME
("dss"), 
CTL
(
¨ía_i_dss
)},

324 {
NAME
("dúty_deˇy_ms"), 
CTL
(
¨ía_i_dúty_deˇy_ms
)},

325 {
NAME
("muzzy_deˇy_ms"), 
CTL
(
¨ía_i_muzzy_deˇy_ms
)},

326 {
NAME
("exã¡_hooks"), 
CTL
(
¨ía_i_exã¡_hooks
)},

327 {
NAME
("ªèö_grow_limô"), 
CTL
(
¨ía_i_ªèö_grow_limô
)}

329 c⁄° 
˘l_«med_node_t
 
	gsu≥r_¨ía_i_node
[] = {

330 {
NAME
(""), 
CHILD
(
«med
, 
¨ía_i
)}

333 c⁄° 
˘l_ödexed_node_t
 
	g¨ía_node
[] = {

334 {
INDEX
(
¨ía_i
)}

337 c⁄° 
˘l_«med_node_t
 
	g¨ías_bö_i_node
[] = {

338 {
NAME
("size"), 
CTL
(
¨ías_bö_i_size
)},

339 {
NAME
("ƒegs"), 
CTL
(
¨ías_bö_i_ƒegs
)},

340 {
NAME
("¶ab_size"), 
CTL
(
¨ías_bö_i_¶ab_size
)}

342 c⁄° 
˘l_«med_node_t
 
	gsu≥r_¨ías_bö_i_node
[] = {

343 {
NAME
(""), 
CHILD
(
«med
, 
¨ías_bö_i
)}

346 c⁄° 
˘l_ödexed_node_t
 
	g¨ías_bö_node
[] = {

347 {
INDEX
(
¨ías_bö_i
)}

350 c⁄° 
˘l_«med_node_t
 
	g¨ías_Àxã¡_i_node
[] = {

351 {
NAME
("size"), 
CTL
(
¨ías_Àxã¡_i_size
)}

353 c⁄° 
˘l_«med_node_t
 
	gsu≥r_¨ías_Àxã¡_i_node
[] = {

354 {
NAME
(""), 
CHILD
(
«med
, 
¨ías_Àxã¡_i
)}

357 c⁄° 
˘l_ödexed_node_t
 
	g¨ías_Àxã¡_node
[] = {

358 {
INDEX
(
¨ías_Àxã¡_i
)}

361 c⁄° 
˘l_«med_node_t
 
	g¨ías_node
[] = {

362 {
NAME
("«ª«s"), 
CTL
(
¨ías_«ª«s
)},

363 {
NAME
("dúty_deˇy_ms"), 
CTL
(
¨ías_dúty_deˇy_ms
)},

364 {
NAME
("muzzy_deˇy_ms"), 
CTL
(
¨ías_muzzy_deˇy_ms
)},

365 {
NAME
("qu™tum"), 
CTL
(
¨ías_qu™tum
)},

366 {
NAME
("∑ge"), 
CTL
(
¨ías_∑ge
)},

367 {
NAME
("tˇche_max"), 
CTL
(
¨ías_tˇche_max
)},

368 {
NAME
("nbös"), 
CTL
(
¨ías_nbös
)},

369 {
NAME
("nhbös"), 
CTL
(
¨ías_nhbös
)},

370 {
NAME
("bö"), 
CHILD
(
ödexed
, 
¨ías_bö
)},

371 {
NAME
("∆exã¡s"), 
CTL
(
¨ías_∆exã¡s
)},

372 {
NAME
("Àxã¡"), 
CHILD
(
ödexed
, 
¨ías_Àxã¡
)},

373 {
NAME
("¸óã"), 
CTL
(
¨ías_¸óã
)}

376 c⁄° 
˘l_«med_node_t
 
	g¥of_node
[] = {

377 {
NAME
("thªad_a˘ive_öô"), 
CTL
(
¥of_thªad_a˘ive_öô
)},

378 {
NAME
("a˘ive"), 
CTL
(
¥of_a˘ive
)},

379 {
NAME
("dump"), 
CTL
(
¥of_dump
)},

380 {
NAME
("gdump"), 
CTL
(
¥of_gdump
)},

381 {
NAME
("ª£t"), 
CTL
(
¥of_ª£t
)},

382 {
NAME
("öãrvÆ"), 
CTL
(
¥of_öãrvÆ
)},

383 {
NAME
("lg_ßm∂e"), 
CTL
(
lg_¥of_ßm∂e
)}

386 c⁄° 
˘l_«med_node_t
 
	g°©s_¨ías_i_smÆl_node
[] = {

387 {
NAME
("Æloˇãd"), 
CTL
(
°©s_¨ías_i_smÆl_Æloˇãd
)},

388 {
NAME
("nmÆloc"), 
CTL
(
°©s_¨ías_i_smÆl_nmÆloc
)},

389 {
NAME
("ndÆloc"), 
CTL
(
°©s_¨ías_i_smÆl_ndÆloc
)},

390 {
NAME
("ƒeque°s"), 
CTL
(
°©s_¨ías_i_smÆl_ƒeque°s
)}

393 c⁄° 
˘l_«med_node_t
 
	g°©s_¨ías_i_œrge_node
[] = {

394 {
NAME
("Æloˇãd"), 
CTL
(
°©s_¨ías_i_œrge_Æloˇãd
)},

395 {
NAME
("nmÆloc"), 
CTL
(
°©s_¨ías_i_œrge_nmÆloc
)},

396 {
NAME
("ndÆloc"), 
CTL
(
°©s_¨ías_i_œrge_ndÆloc
)},

397 {
NAME
("ƒeque°s"), 
CTL
(
°©s_¨ías_i_œrge_ƒeque°s
)}

400 
	#MUTEX_PROF_DATA_NODE
(
¥efix
) \

401 c⁄° 
˘l_«med_node_t
 
°©s_
##
¥efix
##
_node
[] = { \

402 {
	`NAME
("num_ops"), \

403 
	`CTL
(
°©s_
##
¥efix
##
_num_›s
)}, \

404 {
	`NAME
("num_wait"), \

405 
	`CTL
(
°©s_
##
¥efix
##
_num_waô
)}, \

406 {
	`NAME
("num_spin_acq"), \

407 
	`CTL
(
°©s_
##
¥efix
##
_num_•ö_acq
)}, \

408 {
	`NAME
("num_owner_switch"), \

409 
	`CTL
(
°©s_
##
¥efix
##
_num_ow√r_swôch
)}, \

410 {
	`NAME
("total_wait_time"), \

411 
	`CTL
(
°©s_
##
¥efix
##
_tŸÆ_waô_time
)}, \

412 {
	`NAME
("max_wait_time"), \

413 
	`CTL
(
°©s_
##
¥efix
##
_max_waô_time
)}, \

414 {
	`NAME
("max_num_thds"), \

415 
	`CTL
(
°©s_
##
¥efix
##
_max_num_thds
)} \

417 };

	)

419 
	$MUTEX_PROF_DATA_NODE
(
¨ías_i_bös_j_muãx
)

421 c⁄° 
˘l_«med_node_t
 
°©s_¨ías_i_bös_j_node
[] = {

422 {
	`NAME
("nmÆloc"), 
	`CTL
(
°©s_¨ías_i_bös_j_nmÆloc
)},

423 {
	`NAME
("ndÆloc"), 
	`CTL
(
°©s_¨ías_i_bös_j_ndÆloc
)},

424 {
	`NAME
("ƒeque°s"), 
	`CTL
(
°©s_¨ías_i_bös_j_ƒeque°s
)},

425 {
	`NAME
("cuºegs"), 
	`CTL
(
°©s_¨ías_i_bös_j_cuºegs
)},

426 {
	`NAME
("nfûls"), 
	`CTL
(
°©s_¨ías_i_bös_j_nfûls
)},

427 {
	`NAME
("nÊushes"), 
	`CTL
(
°©s_¨ías_i_bös_j_nÊushes
)},

428 {
	`NAME
("n¶abs"), 
	`CTL
(
°©s_¨ías_i_bös_j_n¶abs
)},

429 {
	`NAME
("ƒe¶abs"), 
	`CTL
(
°©s_¨ías_i_bös_j_ƒe¶abs
)},

430 {
	`NAME
("cur¶abs"), 
	`CTL
(
°©s_¨ías_i_bös_j_cur¶abs
)},

431 {
	`NAME
("muãx"), 
	`CHILD
(
«med
, 
°©s_¨ías_i_bös_j_muãx
)}

432 
	}
};

434 c⁄° 
˘l_«med_node_t
 
	gsu≥r_°©s_¨ías_i_bös_j_node
[] = {

435 {
NAME
(""), 
CHILD
(
«med
, 
°©s_¨ías_i_bös_j
)}

438 c⁄° 
˘l_ödexed_node_t
 
	g°©s_¨ías_i_bös_node
[] = {

439 {
INDEX
(
°©s_¨ías_i_bös_j
)}

442 c⁄° 
˘l_«med_node_t
 
	g°©s_¨ías_i_Àxã¡s_j_node
[] = {

443 {
NAME
("nmÆloc"), 
CTL
(
°©s_¨ías_i_Àxã¡s_j_nmÆloc
)},

444 {
NAME
("ndÆloc"), 
CTL
(
°©s_¨ías_i_Àxã¡s_j_ndÆloc
)},

445 {
NAME
("ƒeque°s"), 
CTL
(
°©s_¨ías_i_Àxã¡s_j_ƒeque°s
)},

446 {
NAME
("cuæexã¡s"), 
CTL
(
°©s_¨ías_i_Àxã¡s_j_cuæexã¡s
)}

448 c⁄° 
˘l_«med_node_t
 
	gsu≥r_°©s_¨ías_i_Àxã¡s_j_node
[] = {

449 {
NAME
(""), 
CHILD
(
«med
, 
°©s_¨ías_i_Àxã¡s_j
)}

452 c⁄° 
˘l_ödexed_node_t
 
	g°©s_¨ías_i_Àxã¡s_node
[] = {

453 {
INDEX
(
°©s_¨ías_i_Àxã¡s_j
)}

456 
	#OP
(
mtx
Ë
	`MUTEX_PROF_DATA_NODE
(
¨ías_i_muãxes_
##mtx)

	)

457 
	gMUTEX_PROF_ARENA_MUTEXES


458 #unde‡
OP


460 c⁄° 
˘l_«med_node_t
 
	g°©s_¨ías_i_muãxes_node
[] = {

461 
	#OP
(
mtx
Ë{
	`NAME
(#mtx), 
	`CHILD
(
«med
, 
°©s_¨ías_i_muãxes_
##mtx)},

	)

462 
MUTEX_PROF_ARENA_MUTEXES


463 #unde‡
OP


466 c⁄° 
˘l_«med_node_t
 
	g°©s_¨ías_i_node
[] = {

467 {
NAME
("¡hªads"), 
CTL
(
°©s_¨ías_i_¡hªads
)},

468 {
NAME
("u±ime"), 
CTL
(
°©s_¨ías_i_u±ime
)},

469 {
NAME
("dss"), 
CTL
(
°©s_¨ías_i_dss
)},

470 {
NAME
("dúty_deˇy_ms"), 
CTL
(
°©s_¨ías_i_dúty_deˇy_ms
)},

471 {
NAME
("muzzy_deˇy_ms"), 
CTL
(
°©s_¨ías_i_muzzy_deˇy_ms
)},

472 {
NAME
("∑˘ive"), 
CTL
(
°©s_¨ías_i_∑˘ive
)},

473 {
NAME
("pdúty"), 
CTL
(
°©s_¨ías_i_pdúty
)},

474 {
NAME
("pmuzzy"), 
CTL
(
°©s_¨ías_i_pmuzzy
)},

475 {
NAME
("m≠≥d"), 
CTL
(
°©s_¨ías_i_m≠≥d
)},

476 {
NAME
("ªèöed"), 
CTL
(
°©s_¨ías_i_ªèöed
)},

477 {
NAME
("dúty_≈urge"), 
CTL
(
°©s_¨ías_i_dúty_≈urge
)},

478 {
NAME
("dúty_nmadvi£"), 
CTL
(
°©s_¨ías_i_dúty_nmadvi£
)},

479 {
NAME
("dúty_purged"), 
CTL
(
°©s_¨ías_i_dúty_purged
)},

480 {
NAME
("muzzy_≈urge"), 
CTL
(
°©s_¨ías_i_muzzy_≈urge
)},

481 {
NAME
("muzzy_nmadvi£"), 
CTL
(
°©s_¨ías_i_muzzy_nmadvi£
)},

482 {
NAME
("muzzy_purged"), 
CTL
(
°©s_¨ías_i_muzzy_purged
)},

483 {
NAME
("ba£"), 
CTL
(
°©s_¨ías_i_ba£
)},

484 {
NAME
("öã∫Æ"), 
CTL
(
°©s_¨ías_i_öã∫Æ
)},

485 {
NAME
("mëad©a_thp"), 
CTL
(
°©s_¨ías_i_mëad©a_thp
)},

486 {
NAME
("tˇche_byãs"), 
CTL
(
°©s_¨ías_i_tˇche_byãs
)},

487 {
NAME
("ªsidít"), 
CTL
(
°©s_¨ías_i_ªsidít
)},

488 {
NAME
("smÆl"), 
CHILD
(
«med
, 
°©s_¨ías_i_smÆl
)},

489 {
NAME
("œrge"), 
CHILD
(
«med
, 
°©s_¨ías_i_œrge
)},

490 {
NAME
("bös"), 
CHILD
(
ödexed
, 
°©s_¨ías_i_bös
)},

491 {
NAME
("Àxã¡s"), 
CHILD
(
ödexed
, 
°©s_¨ías_i_Àxã¡s
)},

492 {
NAME
("muãxes"), 
CHILD
(
«med
, 
°©s_¨ías_i_muãxes
)}

494 c⁄° 
˘l_«med_node_t
 
	gsu≥r_°©s_¨ías_i_node
[] = {

495 {
NAME
(""), 
CHILD
(
«med
, 
°©s_¨ías_i
)}

498 c⁄° 
˘l_ödexed_node_t
 
	g°©s_¨ías_node
[] = {

499 {
INDEX
(
°©s_¨ías_i
)}

502 c⁄° 
˘l_«med_node_t
 
	g°©s_background_thªad_node
[] = {

503 {
NAME
("num_thªads"), 
CTL
(
°©s_background_thªad_num_thªads
)},

504 {
NAME
("num_runs"), 
CTL
(
°©s_background_thªad_num_runs
)},

505 {
NAME
("run_öãrvÆ"), 
CTL
(
°©s_background_thªad_run_öãrvÆ
)}

508 
	#OP
(
mtx
Ë
	`MUTEX_PROF_DATA_NODE
(
muãxes_
##mtx)

	)

509 
	gMUTEX_PROF_GLOBAL_MUTEXES


510 #unde‡
OP


512 c⁄° 
˘l_«med_node_t
 
	g°©s_muãxes_node
[] = {

513 
	#OP
(
mtx
Ë{
	`NAME
(#mtx), 
	`CHILD
(
«med
, 
°©s_muãxes_
##mtx)},

	)

514 
MUTEX_PROF_GLOBAL_MUTEXES


515 #unde‡
OP


516 {
NAME
("ª£t"), 
CTL
(
°©s_muãxes_ª£t
)}

518 #unde‡
MUTEX_PROF_DATA_NODE


520 c⁄° 
˘l_«med_node_t
 
	g°©s_node
[] = {

521 {
NAME
("Æloˇãd"), 
CTL
(
°©s_Æloˇãd
)},

522 {
NAME
("a˘ive"), 
CTL
(
°©s_a˘ive
)},

523 {
NAME
("mëad©a"), 
CTL
(
°©s_mëad©a
)},

524 {
NAME
("mëad©a_thp"), 
CTL
(
°©s_mëad©a_thp
)},

525 {
NAME
("ªsidít"), 
CTL
(
°©s_ªsidít
)},

526 {
NAME
("m≠≥d"), 
CTL
(
°©s_m≠≥d
)},

527 {
NAME
("ªèöed"), 
CTL
(
°©s_ªèöed
)},

528 {
NAME
("background_thread"),

529 
CHILD
(
«med
, 
°©s_background_thªad
)},

530 {
NAME
("muãxes"), 
CHILD
(
«med
, 
°©s_muãxes
)},

531 {
NAME
("¨ías"), 
CHILD
(
ödexed
, 
°©s_¨ías
)}

534 c⁄° 
˘l_«med_node_t
 
	groŸ_node
[] = {

535 {
NAME
("vîsi⁄"), 
CTL
(
vîsi⁄
)},

536 {
NAME
("ïoch"), 
CTL
(
ïoch
)},

537 {
NAME
("background_thªad"), 
CTL
(
background_thªad
)},

538 {
NAME
("thªad"), 
CHILD
(
«med
, 
thªad
)},

539 {
NAME
("c⁄fig"), 
CHILD
(
«med
, 
c⁄fig
)},

540 {
NAME
("›t"), 
CHILD
(
«med
, 
›t
)},

541 {
NAME
("tˇche"), 
CHILD
(
«med
, 
tˇche
)},

542 {
NAME
("¨ía"), 
CHILD
(
ödexed
, 
¨ía
)},

543 {
NAME
("¨ías"), 
CHILD
(
«med
, 
¨ías
)},

544 {
NAME
("¥of"), 
CHILD
(
«med
, 
¥of
)},

545 {
NAME
("°©s"), 
CHILD
(
«med
, 
°©s
)}

547 c⁄° 
˘l_«med_node_t
 
	gsu≥r_roŸ_node
[] = {

548 {
NAME
(""), 
CHILD
(
«med
, 
roŸ
)}

551 #unde‡
NAME


552 #unde‡
CHILD


553 #unde‡
CTL


554 #unde‡
INDEX


563 
	$˘l_accum_¨ía_°©s_u64
(
¨ía_°©s_u64_t
 *
d°
,áª«_°©s_u64_à*
§c
) {

564 #ifde‡
JEMALLOC_ATOMIC_U64


565 
uöt64_t
 
cur_d°
 = 
	`©omic_lﬂd_u64
(
d°
, 
ATOMIC_RELAXED
);

566 
uöt64_t
 
cur_§c
 = 
	`©omic_lﬂd_u64
(
§c
, 
ATOMIC_RELAXED
);

567 
	`©omic_°‹e_u64
(
d°
, 
cur_d°
 + 
cur_§c
, 
ATOMIC_RELAXED
);

569 *
d°
 +*
§c
;

571 
	}
}

574 
uöt64_t


575 
	$˘l_¨ía_°©s_ªad_u64
(
¨ía_°©s_u64_t
 *
p
) {

576 #ifde‡
JEMALLOC_ATOMIC_U64


577  
	`©omic_lﬂd_u64
(
p
, 
ATOMIC_RELAXED
);

579  *
p
;

581 
	}
}

584 
	$accum_©omic_zu
(
©omic_zu_t
 *
d°
,átomic_zu_à*
§c
) {

585 
size_t
 
cur_d°
 = 
	`©omic_lﬂd_zu
(
d°
, 
ATOMIC_RELAXED
);

586 
size_t
 
cur_§c
 = 
	`©omic_lﬂd_zu
(
§c
, 
ATOMIC_RELAXED
);

587 
	`©omic_°‹e_zu
(
d°
, 
cur_d°
 + 
cur_§c
, 
ATOMIC_RELAXED
);

588 
	}
}

593 
	$¨ías_i2a_im∂
(
size_t
 
i
, 
boﬁ
 
com∑t
, boﬁ 
vÆid©e
) {

594 
a
;

596 
i
) {

597 
MALLCTL_ARENAS_ALL
:

598 
a
 = 0;

600 
MALLCTL_ARENAS_DESTROYED
:

601 
a
 = 1;

604 i‡(
com∑t
 && 
i
 =
˘l_¨ías
->
«ª«s
) {

611 
a
 = 0;

612 } i‡(
vÆid©e
 && 
i
 >
˘l_¨ías
->
«ª«s
) {

613 
a
 = 
UINT_MAX
;

620 
	`as£π
(
i
 < 
˘l_¨ías
->
«ª«s
 || (!
vÆid©e
 && i ==

621 
˘l_¨ías
->
«ª«s
));

622 
a
 = ()
i
 + 2;

627  
a
;

628 
	}
}

631 
	$¨ías_i2a
(
size_t
 
i
) {

632  
	`¨ías_i2a_im∂
(
i
, 
åue
, 
Ál£
);

633 
	}
}

635 
˘l_¨ía_t
 *

636 
	$¨ías_i_im∂
(
tsd_t
 *
tsd
, 
size_t
 
i
, 
boﬁ
 
com∑t
, boﬁ 
öô
) {

637 
˘l_¨ía_t
 *
ªt
;

639 
	`as£π
(!
com∑t
 || !
öô
);

641 
ªt
 = 
˘l_¨ías
->
¨ías
[
	`¨ías_i2a_im∂
(
i
, 
com∑t
, 
Ál£
)];

642 i‡(
öô
 && 
ªt
 =
NULL
) {

643 i‡(
c⁄fig_°©s
) {

644 
	sc⁄èöî_s
 {

645 
˘l_¨ía_t
 
˘l_¨ía
;

646 
˘l_¨ía_°©s_t
 
a°©s
;

648 
c⁄èöî_s
 *
c⁄t
 =

649 (
c⁄èöî_s
 *)
	`ba£_Æloc
(
	`tsd_tsdn
(
tsd
),

650 
	`b0gë
(), (
c⁄èöî_s
), 
QUANTUM
);

651 i‡(
c⁄t
 =
NULL
) {

652  
NULL
;

654 
ªt
 = &
c⁄t
->
˘l_¨ía
;

655 
ªt
->
a°©s
 = &
c⁄t
->astats;

657 
ªt
 = (
˘l_¨ía_t
 *)
	`ba£_Æloc
(
	`tsd_tsdn
(
tsd
), 
	`b0gë
(),

658 (
˘l_¨ía_t
), 
QUANTUM
);

659 i‡(
ªt
 =
NULL
) {

660  
NULL
;

663 
ªt
->
¨ía_öd
 = ()
i
;

664 
˘l_¨ías
->
¨ías
[
	`¨ías_i2a_im∂
(
i
, 
com∑t
, 
Ál£
)] = 
ªt
;

667 
	`as£π
(
ªt
 =
NULL
 || 
	`¨ías_i2a
‘ë->
¨ía_öd
Ë=¨ías_i2a(
i
));

668  
ªt
;

669 
	}
}

671 
˘l_¨ía_t
 *

672 
	$¨ías_i
(
size_t
 
i
) {

673 
˘l_¨ía_t
 *
ªt
 = 
	`¨ías_i_im∂
(
	`tsd_„tch
(), 
i
, 
åue
, 
Ál£
);

674 
	`as£π
(
ªt
 !
NULL
);

675  
ªt
;

676 
	}
}

679 
	$˘l_¨ía_˛ór
(
˘l_¨ía_t
 *
˘l_¨ía
) {

680 
˘l_¨ía
->
¡hªads
 = 0;

681 
˘l_¨ía
->
dss
 = 
dss_¥ec_«mes
[
dss_¥ec_limô
];

682 
˘l_¨ía
->
dúty_deˇy_ms
 = -1;

683 
˘l_¨ía
->
muzzy_deˇy_ms
 = -1;

684 
˘l_¨ía
->
∑˘ive
 = 0;

685 
˘l_¨ía
->
pdúty
 = 0;

686 
˘l_¨ía
->
pmuzzy
 = 0;

687 i‡(
c⁄fig_°©s
) {

688 
	`mem£t
(&
˘l_¨ía
->
a°©s
->a°©s, 0, (
¨ía_°©s_t
));

689 
˘l_¨ía
->
a°©s
->
Æloˇãd_smÆl
 = 0;

690 
˘l_¨ía
->
a°©s
->
nmÆloc_smÆl
 = 0;

691 
˘l_¨ía
->
a°©s
->
ndÆloc_smÆl
 = 0;

692 
˘l_¨ía
->
a°©s
->
ƒeque°s_smÆl
 = 0;

693 
	`mem£t
(
˘l_¨ía
->
a°©s
->
b°©s
, 0, 
NBINS
 *

694 (
bö_°©s_t
));

695 
	`mem£t
(
˘l_¨ía
->
a°©s
->
l°©s
, 0, (
NSIZES
 - 
NBINS
) *

696 (
¨ía_°©s_œrge_t
));

698 
	}
}

701 
	$˘l_¨ía_°©s_amîge
(
tsdn_t
 *
tsdn
, 
˘l_¨ía_t
 *
˘l_¨ía
, 
¨ía_t
 *
¨ía
) {

702 
i
;

704 i‡(
c⁄fig_°©s
) {

705 
	`¨ía_°©s_mîge
(
tsdn
, 
¨ía
, &
˘l_¨ía
->
¡hªads
,

706 &
˘l_¨ía
->
dss
, &˘l_¨ía->
dúty_deˇy_ms
,

707 &
˘l_¨ía
->
muzzy_deˇy_ms
, &˘l_¨ía->
∑˘ive
,

708 &
˘l_¨ía
->
pdúty
, &˘l_¨ía->
pmuzzy
,

709 &
˘l_¨ía
->
a°©s
->a°©s, cé_¨ía->a°©s->
b°©s
,

710 
˘l_¨ía
->
a°©s
->
l°©s
);

712 
i
 = 0; i < 
NBINS
; i++) {

713 
˘l_¨ía
->
a°©s
->
Æloˇãd_smÆl
 +=

714 
˘l_¨ía
->
a°©s
->
b°©s
[
i
].
cuºegs
 *

715 
	`sz_ödex2size
(
i
);

716 
˘l_¨ía
->
a°©s
->
nmÆloc_smÆl
 +=

717 
˘l_¨ía
->
a°©s
->
b°©s
[
i
].
nmÆloc
;

718 
˘l_¨ía
->
a°©s
->
ndÆloc_smÆl
 +=

719 
˘l_¨ía
->
a°©s
->
b°©s
[
i
].
ndÆloc
;

720 
˘l_¨ía
->
a°©s
->
ƒeque°s_smÆl
 +=

721 
˘l_¨ía
->
a°©s
->
b°©s
[
i
].
ƒeque°s
;

724 
	`¨ía_basic_°©s_mîge
(
tsdn
, 
¨ía
, &
˘l_¨ía
->
¡hªads
,

725 &
˘l_¨ía
->
dss
, &˘l_¨ía->
dúty_deˇy_ms
,

726 &
˘l_¨ía
->
muzzy_deˇy_ms
, &˘l_¨ía->
∑˘ive
,

727 &
˘l_¨ía
->
pdúty
, &˘l_¨ía->
pmuzzy
);

729 
	}
}

732 
	$˘l_¨ía_°©s_sdmîge
(
˘l_¨ía_t
 *
˘l_sd¨ía
, cé_¨ía_à*
˘l_¨ía
,

733 
boﬁ
 
de°royed
) {

734 
i
;

736 i‡(!
de°royed
) {

737 
˘l_sd¨ía
->
¡hªads
 +
˘l_¨ía
->nthreads;

738 
˘l_sd¨ía
->
∑˘ive
 +
˘l_¨ía
->pactive;

739 
˘l_sd¨ía
->
pdúty
 +
˘l_¨ía
->pdirty;

740 
˘l_sd¨ía
->
pmuzzy
 +
˘l_¨ía
->pmuzzy;

742 
	`as£π
(
˘l_¨ía
->
¡hªads
 == 0);

743 
	`as£π
(
˘l_¨ía
->
∑˘ive
 == 0);

744 
	`as£π
(
˘l_¨ía
->
pdúty
 == 0);

745 
	`as£π
(
˘l_¨ía
->
pmuzzy
 == 0);

748 i‡(
c⁄fig_°©s
) {

749 
˘l_¨ía_°©s_t
 *
sd°©s
 = 
˘l_sd¨ía
->
a°©s
;

750 
˘l_¨ía_°©s_t
 *
a°©s
 = 
˘l_¨ía
->astats;

752 i‡(!
de°royed
) {

753 
	`accum_©omic_zu
(&
sd°©s
->
a°©s
.
m≠≥d
,

754 &
a°©s
->a°©s.
m≠≥d
);

755 
	`accum_©omic_zu
(&
sd°©s
->
a°©s
.
ªèöed
,

756 &
a°©s
->a°©s.
ªèöed
);

759 
	`˘l_accum_¨ía_°©s_u64
(&
sd°©s
->
a°©s
.
deˇy_dúty
.
≈urge
,

760 &
a°©s
->a°©s.
deˇy_dúty
.
≈urge
);

761 
	`˘l_accum_¨ía_°©s_u64
(&
sd°©s
->
a°©s
.
deˇy_dúty
.
nmadvi£
,

762 &
a°©s
->a°©s.
deˇy_dúty
.
nmadvi£
);

763 
	`˘l_accum_¨ía_°©s_u64
(&
sd°©s
->
a°©s
.
deˇy_dúty
.
purged
,

764 &
a°©s
->a°©s.
deˇy_dúty
.
purged
);

766 
	`˘l_accum_¨ía_°©s_u64
(&
sd°©s
->
a°©s
.
deˇy_muzzy
.
≈urge
,

767 &
a°©s
->a°©s.
deˇy_muzzy
.
≈urge
);

768 
	`˘l_accum_¨ía_°©s_u64
(&
sd°©s
->
a°©s
.
deˇy_muzzy
.
nmadvi£
,

769 &
a°©s
->a°©s.
deˇy_muzzy
.
nmadvi£
);

770 
	`˘l_accum_¨ía_°©s_u64
(&
sd°©s
->
a°©s
.
deˇy_muzzy
.
purged
,

771 &
a°©s
->a°©s.
deˇy_muzzy
.
purged
);

773 
	#OP
(
mtx
Ë
	`mÆloc_muãx_¥of_mîge
( \

774 &(
sd°©s
->
a°©s
.
muãx_¥of_d©a
[ \

775 
¨ía_¥of_muãx_
##
mtx
]), \

776 &(
a°©s
->a°©s.
muãx_¥of_d©a
[ \

777 
¨ía_¥of_muãx_
##
mtx
]));

	)

778 
MUTEX_PROF_ARENA_MUTEXES


779 #unde‡
OP


780 i‡(!
de°royed
) {

781 
	`accum_©omic_zu
(&
sd°©s
->
a°©s
.
ba£
,

782 &
a°©s
->a°©s.
ba£
);

783 
	`accum_©omic_zu
(&
sd°©s
->
a°©s
.
öã∫Æ
,

784 &
a°©s
->a°©s.
öã∫Æ
);

785 
	`accum_©omic_zu
(&
sd°©s
->
a°©s
.
ªsidít
,

786 &
a°©s
->a°©s.
ªsidít
);

787 
	`accum_©omic_zu
(&
sd°©s
->
a°©s
.
mëad©a_thp
,

788 &
a°©s
->a°©s.
mëad©a_thp
);

790 
	`as£π
(
	`©omic_lﬂd_zu
(

791 &
a°©s
->a°©s.
öã∫Æ
, 
ATOMIC_RELAXED
) == 0);

794 i‡(!
de°royed
) {

795 
sd°©s
->
Æloˇãd_smÆl
 +
a°©s
->allocated_small;

797 
	`as£π
(
a°©s
->
Æloˇãd_smÆl
 == 0);

799 
sd°©s
->
nmÆloc_smÆl
 +
a°©s
->nmalloc_small;

800 
sd°©s
->
ndÆloc_smÆl
 +
a°©s
->ndalloc_small;

801 
sd°©s
->
ƒeque°s_smÆl
 +
a°©s
->nrequests_small;

803 i‡(!
de°royed
) {

804 
	`accum_©omic_zu
(&
sd°©s
->
a°©s
.
Æloˇãd_œrge
,

805 &
a°©s
->a°©s.
Æloˇãd_œrge
);

807 
	`as£π
(
	`©omic_lﬂd_zu
(&
a°©s
->a°©s.
Æloˇãd_œrge
,

808 
ATOMIC_RELAXED
) == 0);

810 
	`˘l_accum_¨ía_°©s_u64
(&
sd°©s
->
a°©s
.
nmÆloc_œrge
,

811 &
a°©s
->a°©s.
nmÆloc_œrge
);

812 
	`˘l_accum_¨ía_°©s_u64
(&
sd°©s
->
a°©s
.
ndÆloc_œrge
,

813 &
a°©s
->a°©s.
ndÆloc_œrge
);

814 
	`˘l_accum_¨ía_°©s_u64
(&
sd°©s
->
a°©s
.
ƒeque°s_œrge
,

815 &
a°©s
->a°©s.
ƒeque°s_œrge
);

817 
	`accum_©omic_zu
(&
sd°©s
->
a°©s
.
tˇche_byãs
,

818 &
a°©s
->a°©s.
tˇche_byãs
);

820 i‡(
˘l_¨ía
->
¨ía_öd
 == 0) {

821 
sd°©s
->
a°©s
.
u±ime
 =ástats->astats.uptime;

824 
i
 = 0; i < 
NBINS
; i++) {

825 
sd°©s
->
b°©s
[
i
].
nmÆloc
 +
a°©s
->bstats[i].nmalloc;

826 
sd°©s
->
b°©s
[
i
].
ndÆloc
 +
a°©s
->bstats[i].ndalloc;

827 
sd°©s
->
b°©s
[
i
].
ƒeque°s
 +=

828 
a°©s
->
b°©s
[
i
].
ƒeque°s
;

829 i‡(!
de°royed
) {

830 
sd°©s
->
b°©s
[
i
].
cuºegs
 +=

831 
a°©s
->
b°©s
[
i
].
cuºegs
;

833 
	`as£π
(
a°©s
->
b°©s
[
i
].
cuºegs
 == 0);

835 
sd°©s
->
b°©s
[
i
].
nfûls
 +
a°©s
->bstats[i].nfills;

836 
sd°©s
->
b°©s
[
i
].
nÊushes
 +=

837 
a°©s
->
b°©s
[
i
].
nÊushes
;

838 
sd°©s
->
b°©s
[
i
].
n¶abs
 +
a°©s
->bstats[i].nslabs;

839 
sd°©s
->
b°©s
[
i
].
ª¶abs
 +
a°©s
->bstats[i].reslabs;

840 i‡(!
de°royed
) {

841 
sd°©s
->
b°©s
[
i
].
cur¶abs
 +=

842 
a°©s
->
b°©s
[
i
].
cur¶abs
;

844 
	`as£π
(
a°©s
->
b°©s
[
i
].
cur¶abs
 == 0);

846 
	`mÆloc_muãx_¥of_mîge
(&
sd°©s
->
b°©s
[
i
].
muãx_d©a
,

847 &
a°©s
->
b°©s
[
i
].
muãx_d©a
);

850 
i
 = 0; i < 
NSIZES
 - 
NBINS
; i++) {

851 
	`˘l_accum_¨ía_°©s_u64
(&
sd°©s
->
l°©s
[
i
].
nmÆloc
,

852 &
a°©s
->
l°©s
[
i
].
nmÆloc
);

853 
	`˘l_accum_¨ía_°©s_u64
(&
sd°©s
->
l°©s
[
i
].
ndÆloc
,

854 &
a°©s
->
l°©s
[
i
].
ndÆloc
);

855 
	`˘l_accum_¨ía_°©s_u64
(&
sd°©s
->
l°©s
[
i
].
ƒeque°s
,

856 &
a°©s
->
l°©s
[
i
].
ƒeque°s
);

857 i‡(!
de°royed
) {

858 
sd°©s
->
l°©s
[
i
].
cuæexã¡s
 +=

859 
a°©s
->
l°©s
[
i
].
cuæexã¡s
;

861 
	`as£π
(
a°©s
->
l°©s
[
i
].
cuæexã¡s
 == 0);

865 
	}
}

868 
	$˘l_¨ía_ª‰esh
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
˘l_¨ía_t
 *
˘l_sd¨ía
,

869 
i
, 
boﬁ
 
de°royed
) {

870 
˘l_¨ía_t
 *
˘l_¨ía
 = 
	`¨ías_i
(
i
);

872 
	`˘l_¨ía_˛ór
(
˘l_¨ía
);

873 
	`˘l_¨ía_°©s_amîge
(
tsdn
, 
˘l_¨ía
, 
¨ía
);

875 
	`˘l_¨ía_°©s_sdmîge
(
˘l_sd¨ía
, 
˘l_¨ía
, 
de°royed
);

876 
	}
}

879 
	$˘l_¨ía_öô
(
tsd_t
 *
tsd
, 
exã¡_hooks_t
 *
exã¡_hooks
) {

880 
¨ía_öd
;

881 
˘l_¨ía_t
 *
˘l_¨ía
;

883 i‡((
˘l_¨ía
 = 
	`ql_œ°
(&
˘l_¨ías
->
de°royed
, 
de°royed_lök
)) !=

884 
NULL
) {

885 
	`ql_ªmove
(&
˘l_¨ías
->
de°royed
, 
˘l_¨ía
, 
de°royed_lök
);

886 
¨ía_öd
 = 
˘l_¨ía
->arena_ind;

888 
¨ía_öd
 = 
˘l_¨ías
->
«ª«s
;

892 i‡(
	`¨ías_i_im∂
(
tsd
, 
¨ía_öd
, 
Ál£
, 
åue
Ë=
NULL
) {

893  
UINT_MAX
;

897 i‡(
	`¨ía_öô
(
	`tsd_tsdn
(
tsd
), 
¨ía_öd
, 
exã¡_hooks
Ë=
NULL
) {

898  
UINT_MAX
;

901 i‡(
¨ía_öd
 =
˘l_¨ías
->
«ª«s
) {

902 
˘l_¨ías
->
«ª«s
++;

905  
¨ía_öd
;

906 
	}
}

909 
	$˘l_background_thªad_°©s_ªad
(
tsdn_t
 *
tsdn
) {

910 
background_thªad_°©s_t
 *
°©s
 = &
˘l_°©s
->
background_thªad
;

911 i‡(!
have_background_thªad
 ||

912 
	`background_thªad_°©s_ªad
(
tsdn
, 
°©s
)) {

913 
	`mem£t
(
°©s
, 0, (
background_thªad_°©s_t
));

914 
	`n°ime_öô
(&
°©s
->
run_öãrvÆ
, 0);

916 
	}
}

919 
	$˘l_ª‰esh
(
tsdn_t
 *
tsdn
) {

920 
i
;

921 
˘l_¨ía_t
 *
˘l_ßª«
 = 
	`¨ías_i
(
MALLCTL_ARENAS_ALL
);

922 
	`VARIABLE_ARRAY
(
¨ía_t
 *, 
èª«s
, 
˘l_¨ías
->
«ª«s
);

928 
	`˘l_¨ía_˛ór
(
˘l_ßª«
);

930 
i
 = 0; i < 
˘l_¨ías
->
«ª«s
; i++) {

931 
èª«s
[
i
] = 
	`¨ía_gë
(
tsdn
, i, 
Ál£
);

934 
i
 = 0; i < 
˘l_¨ías
->
«ª«s
; i++) {

935 
˘l_¨ía_t
 *
˘l_¨ía
 = 
	`¨ías_i
(
i
);

936 
boﬁ
 
öôülized
 = (
èª«s
[
i
] !
NULL
);

938 
˘l_¨ía
->
öôülized
 = initialized;

939 i‡(
öôülized
) {

940 
	`˘l_¨ía_ª‰esh
(
tsdn
, 
èª«s
[
i
], 
˘l_ßª«
, i,

941 
Ál£
);

945 i‡(
c⁄fig_°©s
) {

946 
˘l_°©s
->
Æloˇãd
 = 
˘l_ßª«
->
a°©s
->
Æloˇãd_smÆl
 +

947 
	`©omic_lﬂd_zu
(&
˘l_ßª«
->
a°©s
->a°©s.
Æloˇãd_œrge
,

948 
ATOMIC_RELAXED
);

949 
˘l_°©s
->
a˘ive
 = (
˘l_ßª«
->
∑˘ive
 << 
LG_PAGE
);

950 
˘l_°©s
->
mëad©a
 = 
	`©omic_lﬂd_zu
(

951 &
˘l_ßª«
->
a°©s
->a°©s.
ba£
, 
ATOMIC_RELAXED
) +

952 
	`©omic_lﬂd_zu
(&
˘l_ßª«
->
a°©s
->a°©s.
öã∫Æ
,

953 
ATOMIC_RELAXED
);

954 
˘l_°©s
->
mëad©a_thp
 = 
	`©omic_lﬂd_zu
(

955 &
˘l_ßª«
->
a°©s
->a°©s.
mëad©a_thp
, 
ATOMIC_RELAXED
);

956 
˘l_°©s
->
ªsidít
 = 
	`©omic_lﬂd_zu
(

957 &
˘l_ßª«
->
a°©s
->a°©s.
ªsidít
, 
ATOMIC_RELAXED
);

958 
˘l_°©s
->
m≠≥d
 = 
	`©omic_lﬂd_zu
(

959 &
˘l_ßª«
->
a°©s
->a°©s.
m≠≥d
, 
ATOMIC_RELAXED
);

960 
˘l_°©s
->
ªèöed
 = 
	`©omic_lﬂd_zu
(

961 &
˘l_ßª«
->
a°©s
->a°©s.
ªèöed
, 
ATOMIC_RELAXED
);

963 
	`˘l_background_thªad_°©s_ªad
(
tsdn
);

965 
	#READ_GLOBAL_MUTEX_PROF_DATA
(
i
, 
mtx
) \

966 
	`mÆloc_muãx_lock
(
tsdn
, &
mtx
); \

967 
	`mÆloc_muãx_¥of_ªad
(
tsdn
, &
˘l_°©s
->
muãx_¥of_d©a
[
i
], &
mtx
); \

968 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
mtx
);

	)

970 i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

971 
	`READ_GLOBAL_MUTEX_PROF_DATA
(
globÆ_¥of_muãx_¥of
,

972 
bt2g˘x_mtx
);

974 i‡(
have_background_thªad
) {

975 
	`READ_GLOBAL_MUTEX_PROF_DATA
(

976 
globÆ_¥of_muãx_background_thªad
,

977 
background_thªad_lock
);

979 
	`mem£t
(&
˘l_°©s
->
muãx_¥of_d©a
[

980 
globÆ_¥of_muãx_background_thªad
], 0,

981 (
muãx_¥of_d©a_t
));

984 
	`mÆloc_muãx_¥of_ªad
(
tsdn
,

985 &
˘l_°©s
->
muãx_¥of_d©a
[
globÆ_¥of_muãx_˘l
],

986 &
˘l_mtx
);

987 #unde‡
READ_GLOBAL_MUTEX_PROF_DATA


989 
˘l_¨ías
->
ïoch
++;

990 
	}
}

992 
boﬁ


993 
	$˘l_öô
(
tsd_t
 *
tsd
) {

994 
boﬁ
 
ªt
;

995 
tsdn_t
 *
tsdn
 = 
	`tsd_tsdn
(
tsd
);

997 
	`mÆloc_muãx_lock
(
tsdn
, &
˘l_mtx
);

998 i‡(!
˘l_öôülized
) {

999 
˘l_¨ía_t
 *
˘l_ßª«
, *
˘l_d¨ía
;

1000 
i
;

1006 i‡(
˘l_¨ías
 =
NULL
) {

1007 
˘l_¨ías
 = (
˘l_¨ías_t
 *)
	`ba£_Æloc
(
tsdn
,

1008 
	`b0gë
(), (
˘l_¨ías_t
), 
QUANTUM
);

1009 i‡(
˘l_¨ías
 =
NULL
) {

1010 
ªt
 = 
åue
;

1011 
œbñ_ªtu∫
;

1015 i‡(
c⁄fig_°©s
 && 
˘l_°©s
 =
NULL
) {

1016 
˘l_°©s
 = (
˘l_°©s_t
 *)
	`ba£_Æloc
(
tsdn
, 
	`b0gë
(),

1017 (
˘l_°©s_t
), 
QUANTUM
);

1018 i‡(
˘l_°©s
 =
NULL
) {

1019 
ªt
 = 
åue
;

1020 
œbñ_ªtu∫
;

1029 i‡((
˘l_ßª«
 = 
	`¨ías_i_im∂
(
tsd
, 
MALLCTL_ARENAS_ALL
, 
Ál£
,

1030 
åue
)Ë=
NULL
) {

1031 
ªt
 = 
åue
;

1032 
œbñ_ªtu∫
;

1034 
˘l_ßª«
->
öôülized
 = 
åue
;

1036 i‡((
˘l_d¨ía
 = 
	`¨ías_i_im∂
(
tsd
, 
MALLCTL_ARENAS_DESTROYED
,

1037 
Ál£
, 
åue
)Ë=
NULL
) {

1038 
ªt
 = 
åue
;

1039 
œbñ_ªtu∫
;

1041 
	`˘l_¨ía_˛ór
(
˘l_d¨ía
);

1048 
˘l_¨ías
->
«ª«s
 = 
	`«ª«s_tŸÆ_gë
();

1049 
i
 = 0; i < 
˘l_¨ías
->
«ª«s
; i++) {

1050 i‡(
	`¨ías_i_im∂
(
tsd
, 
i
, 
Ál£
, 
åue
Ë=
NULL
) {

1051 
ªt
 = 
åue
;

1052 
œbñ_ªtu∫
;

1056 
	`ql_√w
(&
˘l_¨ías
->
de°royed
);

1057 
	`˘l_ª‰esh
(
tsdn
);

1059 
˘l_öôülized
 = 
åue
;

1062 
ªt
 = 
Ál£
;

1063 
œbñ_ªtu∫
:

1064 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
˘l_mtx
);

1065  
ªt
;

1066 
	}
}

1069 
	$˘l_lookup
(
tsdn_t
 *
tsdn
, c⁄° *
«me
, 
˘l_node_t
 c⁄° **
node•
,

1070 
size_t
 *
mibp
, size_à*
dïthp
) {

1071 
ªt
;

1072 c⁄° *
ñm
, *
tdŸ
, *
dŸ
;

1073 
size_t
 
ñí
, 
i
, 
j
;

1074 c⁄° 
˘l_«med_node_t
 *
node
;

1076 
ñm
 = 
«me
;

1078 
dŸ
 = ((
tdŸ
 = 
	`°rchr
(
ñm
, '.')Ë!
NULL
) ?Ådot : strchr(elm, '\0');

1079 
ñí
 = (
size_t
)((
uöçå_t
)
dŸ
 - (uöçå_t)
ñm
);

1080 i‡(
ñí
 == 0) {

1081 
ªt
 = 
ENOENT
;

1082 
œbñ_ªtu∫
;

1084 
node
 = 
su≥r_roŸ_node
;

1085 
i
 = 0; i < *
dïthp
; i++) {

1086 
	`as£π
(
node
);

1087 
	`as£π
(
node
->
nchûdªn
 > 0);

1088 i‡(
	`˘l_«med_node
(
node
->
chûdªn
Ë!
NULL
) {

1089 c⁄° 
˘l_«med_node_t
 *
≤ode
 = 
node
;

1092 
j
 = 0; j < 
node
->
nchûdªn
; j++) {

1093 c⁄° 
˘l_«med_node_t
 *
chûd
 =

1094 
	`˘l_«med_chûdªn
(
node
, 
j
);

1095 i‡(
	`°æí
(
chûd
->
«me
Ë=
ñí
 &&

1096 
	`°∫cmp
(
ñm
, 
chûd
->
«me
, 
ñí
) == 0) {

1097 
node
 = 
chûd
;

1098 i‡(
node•
 !
NULL
) {

1099 
node•
[
i
] =

1100 (c⁄° 
˘l_node_t
 *)
node
;

1102 
mibp
[
i
] = 
j
;

1106 i‡(
node
 =
≤ode
) {

1107 
ªt
 = 
ENOENT
;

1108 
œbñ_ªtu∫
;

1111 
uötmax_t
 
ödex
;

1112 c⁄° 
˘l_ödexed_node_t
 *
öode
;

1115 
ödex
 = 
	`mÆloc_°πoumax
(
ñm
, 
NULL
, 10);

1116 i‡(
ödex
 =
UINTMAX_MAX
 || index > 
SIZE_T_MAX
) {

1117 
ªt
 = 
ENOENT
;

1118 
œbñ_ªtu∫
;

1121 
öode
 = 
	`˘l_ödexed_node
(
node
->
chûdªn
);

1122 
node
 = 
öode
->
	`ödex
(
tsdn
, 
mibp
, *
dïthp
, (
size_t
)
ödex
);

1123 i‡(
node
 =
NULL
) {

1124 
ªt
 = 
ENOENT
;

1125 
œbñ_ªtu∫
;

1128 i‡(
node•
 !
NULL
) {

1129 
node•
[
i
] = (c⁄° 
˘l_node_t
 *)
node
;

1131 
mibp
[
i
] = (
size_t
)
ödex
;

1134 i‡(
node
->
˘l
 !
NULL
) {

1136 i‡(*
dŸ
 != '\0') {

1141 
ªt
 = 
ENOENT
;

1142 
œbñ_ªtu∫
;

1145 *
dïthp
 = 
i
 + 1;

1150 i‡(*
dŸ
 == '\0') {

1152 
ªt
 = 
ENOENT
;

1153 
œbñ_ªtu∫
;

1155 
ñm
 = &
dŸ
[1];

1156 
dŸ
 = ((
tdŸ
 = 
	`°rchr
(
ñm
, '.')Ë!
NULL
) ?Ådot :

1157 
	`°rchr
(
ñm
, '\0');

1158 
ñí
 = (
size_t
)((
uöçå_t
)
dŸ
 - (uöçå_t)
ñm
);

1161 
ªt
 = 0;

1162 
œbñ_ªtu∫
:

1163  
ªt
;

1164 
	}
}

1167 
	$˘l_by«me
(
tsd_t
 *
tsd
, c⁄° *
«me
, *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
,

1168 *
√wp
, 
size_t
 
√wÀn
) {

1169 
ªt
;

1170 
size_t
 
dïth
;

1171 
˘l_node_t
 c⁄° *
nodes
[
CTL_MAX_DEPTH
];

1172 
size_t
 
mib
[
CTL_MAX_DEPTH
];

1173 c⁄° 
˘l_«med_node_t
 *
node
;

1175 i‡(!
˘l_öôülized
 && 
	`˘l_öô
(
tsd
)) {

1176 
ªt
 = 
EAGAIN
;

1177 
œbñ_ªtu∫
;

1180 
dïth
 = 
CTL_MAX_DEPTH
;

1181 
ªt
 = 
	`˘l_lookup
(
	`tsd_tsdn
(
tsd
), 
«me
, 
nodes
, 
mib
, &
dïth
);

1182 i‡(
ªt
 != 0) {

1183 
œbñ_ªtu∫
;

1186 
node
 = 
	`˘l_«med_node
(
nodes
[
dïth
-1]);

1187 i‡(
node
 !
NULL
 &&Çode->
˘l
) {

1188 
ªt
 = 
node
->
	`˘l
(
tsd
, 
mib
, 
dïth
, 
ﬁdp
, 
ﬁdÀ≈
, 
√wp
, 
√wÀn
);

1191 
ªt
 = 
ENOENT
;

1194 
œbñ_ªtu∫
:

1195 (
ªt
);

1196 
	}
}

1199 
	$˘l_«mëomib
(
tsd_t
 *
tsd
, c⁄° *
«me
, 
size_t
 *
mibp
, size_à*
mibÀ≈
) {

1200 
ªt
;

1202 i‡(!
˘l_öôülized
 && 
	`˘l_öô
(
tsd
)) {

1203 
ªt
 = 
EAGAIN
;

1204 
œbñ_ªtu∫
;

1207 
ªt
 = 
	`˘l_lookup
(
	`tsd_tsdn
(
tsd
), 
«me
, 
NULL
, 
mibp
, 
mibÀ≈
);

1208 
œbñ_ªtu∫
:

1209 (
ªt
);

1210 
	}
}

1213 
	$˘l_bymib
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

1214 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

1215 
ªt
;

1216 c⁄° 
˘l_«med_node_t
 *
node
;

1217 
size_t
 
i
;

1219 i‡(!
˘l_öôülized
 && 
	`˘l_öô
(
tsd
)) {

1220 
ªt
 = 
EAGAIN
;

1221 
œbñ_ªtu∫
;

1225 
node
 = 
su≥r_roŸ_node
;

1226 
i
 = 0; i < 
mibÀn
; i++) {

1227 
	`as£π
(
node
);

1228 
	`as£π
(
node
->
nchûdªn
 > 0);

1229 i‡(
	`˘l_«med_node
(
node
->
chûdªn
Ë!
NULL
) {

1231 i‡(
node
->
nchûdªn
 <
mib
[
i
]) {

1232 
ªt
 = 
ENOENT
;

1233 
œbñ_ªtu∫
;

1235 
node
 = 
	`˘l_«med_chûdªn
“ode, 
mib
[
i
]);

1237 c⁄° 
˘l_ödexed_node_t
 *
öode
;

1240 
öode
 = 
	`˘l_ödexed_node
(
node
->
chûdªn
);

1241 
node
 = 
öode
->
	`ödex
(
	`tsd_tsdn
(
tsd
), 
mib
, 
mibÀn
, mib[
i
]);

1242 i‡(
node
 =
NULL
) {

1243 
ªt
 = 
ENOENT
;

1244 
œbñ_ªtu∫
;

1250 i‡(
node
 &&Çode->
˘l
) {

1251 
ªt
 = 
node
->
	`˘l
(
tsd
, 
mib
, 
mibÀn
, 
ﬁdp
, 
ﬁdÀ≈
, 
√wp
, 
√wÀn
);

1254 
ªt
 = 
ENOENT
;

1257 
œbñ_ªtu∫
:

1258 (
ªt
);

1259 
	}
}

1261 
boﬁ


1262 
	$˘l_boŸ
() {

1263 i‡(
	`mÆloc_muãx_öô
(&
˘l_mtx
, "˘l", 
WITNESS_RANK_CTL
,

1264 
mÆloc_muãx_ønk_ex˛usive
)) {

1265  
åue
;

1268 
˘l_öôülized
 = 
Ál£
;

1270  
Ál£
;

1271 
	}
}

1274 
	$˘l_¥ef‹k
(
tsdn_t
 *
tsdn
) {

1275 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
˘l_mtx
);

1276 
	}
}

1279 
	$˘l_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
) {

1280 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
˘l_mtx
);

1281 
	}
}

1284 
	$˘l_po°f‹k_chûd
(
tsdn_t
 *
tsdn
) {

1285 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
˘l_mtx
);

1286 
	}
}

1291 
	#READONLY
() do { \

1292 i‡(
√wp
 !
NULL
 || 
√wÀn
 != 0) { \

1293 
ªt
 = 
EPERM
; \

1294 
œbñ_ªtu∫
; \

1296 } 0)

	)

1298 
	#WRITEONLY
() do { \

1299 i‡(
ﬁdp
 !
NULL
 || 
ﬁdÀ≈
 != NULL) { \

1300 
ªt
 = 
EPERM
; \

1301 
œbñ_ªtu∫
; \

1303 } 0)

	)

1305 
	#READ_XOR_WRITE
() do { \

1306 i‡((
ﬁdp
 !
NULL
 && 
ﬁdÀ≈
 !NULLË&& (
√wp
 != NULL || \

1307 
√wÀn
 != 0)) { \

1308 
ªt
 = 
EPERM
; \

1309 
œbñ_ªtu∫
; \

1311 } 0)

	)

1313 
	#READ
(
v
, 
t
) do { \

1314 i‡(
ﬁdp
 !
NULL
 && 
ﬁdÀ≈
 != NULL) { \

1315 i‡(*
ﬁdÀ≈
 !(
t
)) { \

1316 
size_t
 
c›yÀn
 = ((
t
Ë<*
ﬁdÀ≈
) \

1317 ? (
t
Ë: *
ﬁdÀ≈
; \

1318 
	`mem˝y
(
ﬁdp
, (*)&(
v
), 
c›yÀn
); \

1319 
ªt
 = 
EINVAL
; \

1320 
œbñ_ªtu∫
; \

1322 *(
t
 *)
ﬁdp
 = (
v
); \

1324 } 0)

	)

1326 
	#WRITE
(
v
, 
t
) do { \

1327 i‡(
√wp
 !
NULL
) { \

1328 i‡(
√wÀn
 !(
t
)) { \

1329 
ªt
 = 
EINVAL
; \

1330 
œbñ_ªtu∫
; \

1332 (
v
Ë*(
t
 *)
√wp
; \

1334 } 0)

	)

1336 
	#MIB_UNSIGNED
(
v
, 
i
) do { \

1337 i‡(
mib
[
i
] > 
UINT_MAX
) { \

1338 
ªt
 = 
EFAULT
; \

1339 
œbñ_ªtu∫
; \

1341 
v
 = ()
mib
[
i
]; \

1342 } 0)

	)

1348 
	#CTL_RO_CLGEN
(
c
, 
l
, 
n
, 
v
, 
t
) \

1350 
n
##
	`_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
, \

1351 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) { \

1352 
ªt
; \

1353 
t
 
ﬁdvÆ
; \

1355 i‡(!(
c
)) { \

1356  
ENOENT
; \

1358 i‡(
l
) { \

1359 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
); \

1361 
	`READONLY
(); \

1362 
ﬁdvÆ
 = (
v
); \

1363 
	`READ
(
ﬁdvÆ
, 
t
); \

1365 
ªt
 = 0; \

1366 
œbñ_ªtu∫
: \

1367 i‡(
l
) { \

1368 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
); \

1370  
ªt
; \

1371 }

	)

1373 
	#CTL_RO_CGEN
(
c
, 
n
, 
v
, 
t
) \

1375 
n
##
	`_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
, \

1376 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) { \

1377 
ªt
; \

1378 
t
 
ﬁdvÆ
; \

1380 i‡(!(
c
)) { \

1381  
ENOENT
; \

1383 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
); \

1384 
	`READONLY
(); \

1385 
ﬁdvÆ
 = (
v
); \

1386 
	`READ
(
ﬁdvÆ
, 
t
); \

1388 
ªt
 = 0; \

1389 
œbñ_ªtu∫
: \

1390 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
); \

1391  
ªt
; \

1392 }

	)

1394 
	#CTL_RO_GEN
(
n
, 
v
, 
t
) \

1396 
n
##
	`_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
, \

1397 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) { \

1398 
ªt
; \

1399 
t
 
ﬁdvÆ
; \

1401 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
); \

1402 
	`READONLY
(); \

1403 
ﬁdvÆ
 = (
v
); \

1404 
	`READ
(
ﬁdvÆ
, 
t
); \

1406 
ªt
 = 0; \

1407 
œbñ_ªtu∫
: \

1408 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
); \

1409  
ªt
; \

1410 }

	)

1416 
	#CTL_RO_NL_CGEN
(
c
, 
n
, 
v
, 
t
) \

1418 
n
##
	`_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
, \

1419 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) { \

1420 
ªt
; \

1421 
t
 
ﬁdvÆ
; \

1423 i‡(!(
c
)) { \

1424  
ENOENT
; \

1426 
	`READONLY
(); \

1427 
ﬁdvÆ
 = (
v
); \

1428 
	`READ
(
ﬁdvÆ
, 
t
); \

1430 
ªt
 = 0; \

1431 
œbñ_ªtu∫
: \

1432  
ªt
; \

1433 }

	)

1435 
	#CTL_RO_NL_GEN
(
n
, 
v
, 
t
) \

1437 
n
##
	`_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
, \

1438 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) { \

1439 
ªt
; \

1440 
t
 
ﬁdvÆ
; \

1442 
	`READONLY
(); \

1443 
ﬁdvÆ
 = (
v
); \

1444 
	`READ
(
ﬁdvÆ
, 
t
); \

1446 
ªt
 = 0; \

1447 
œbñ_ªtu∫
: \

1448  
ªt
; \

1449 }

	)

1451 
	#CTL_TSD_RO_NL_CGEN
(
c
, 
n
, 
m
, 
t
) \

1453 
n
##
	`_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
, \

1454 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) { \

1455 
ªt
; \

1456 
t
 
ﬁdvÆ
; \

1458 i‡(!(
c
)) { \

1459  
ENOENT
; \

1461 
	`READONLY
(); \

1462 
ﬁdvÆ
 = (
	`m
(
tsd
)); \

1463 
	`READ
(
ﬁdvÆ
, 
t
); \

1465 
ªt
 = 0; \

1466 
œbñ_ªtu∫
: \

1467  
ªt
; \

1468 }

	)

1470 
	#CTL_RO_CONFIG_GEN
(
n
, 
t
) \

1472 
n
##
	`_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
, \

1473 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) { \

1474 
ªt
; \

1475 
t
 
ﬁdvÆ
; \

1477 
	`READONLY
(); \

1478 
ﬁdvÆ
 = 
n
; \

1479 
	`READ
(
ﬁdvÆ
, 
t
); \

1481 
ªt
 = 0; \

1482 
œbñ_ªtu∫
: \

1483  
ªt
; \

1484 }

	)

1488 
	$CTL_RO_NL_GEN
(
vîsi⁄
, 
JEMALLOC_VERSION
, const *)

1491 
	$ïoch_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

1492 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

1493 
ªt
;

1494 
UNUSED
 
uöt64_t
 
√wvÆ
;

1496 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
);

1497 
	`WRITE
(
√wvÆ
, 
uöt64_t
);

1498 i‡(
√wp
 !
NULL
) {

1499 
	`˘l_ª‰esh
(
	`tsd_tsdn
(
tsd
));

1501 
	`READ
(
˘l_¨ías
->
ïoch
, 
uöt64_t
);

1503 
ªt
 = 0;

1504 
œbñ_ªtu∫
:

1505 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
);

1506  
ªt
;

1507 
	}
}

1510 
	$background_thªad_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

1511 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

1512 
ªt
;

1513 
boﬁ
 
ﬁdvÆ
;

1515 i‡(!
have_background_thªad
) {

1516  
ENOENT
;

1518 
	`background_thªad_˘l_öô
(
	`tsd_tsdn
(
tsd
));

1520 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
);

1521 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
background_thªad_lock
);

1522 i‡(
√wp
 =
NULL
) {

1523 
ﬁdvÆ
 = 
	`background_thªad_íabÀd
();

1524 
	`READ
(
ﬁdvÆ
, 
boﬁ
);

1526 i‡(
√wÀn
 !(
boﬁ
)) {

1527 
ªt
 = 
EINVAL
;

1528 
œbñ_ªtu∫
;

1530 
ﬁdvÆ
 = 
	`background_thªad_íabÀd
();

1531 
	`READ
(
ﬁdvÆ
, 
boﬁ
);

1533 
boﬁ
 
√wvÆ
 = *(boﬁ *)
√wp
;

1534 i‡(
√wvÆ
 =
ﬁdvÆ
) {

1535 
ªt
 = 0;

1536 
œbñ_ªtu∫
;

1539 
	`background_thªad_íabÀd_£t
(
	`tsd_tsdn
(
tsd
), 
√wvÆ
);

1540 i‡(
√wvÆ
) {

1541 i‡(!
ˇn_íabÀ_background_thªad
) {

1542 
	`mÆloc_¥ötf
("<jemalloc>: Error in dlsym("

1545 
ªt
 = 
EFAULT
;

1546 
œbñ_ªtu∫
;

1548 i‡(
	`background_thªads_íabÀ
(
tsd
)) {

1549 
ªt
 = 
EFAULT
;

1550 
œbñ_ªtu∫
;

1553 i‡(
	`background_thªads_dißbÀ
(
tsd
)) {

1554 
ªt
 = 
EFAULT
;

1555 
œbñ_ªtu∫
;

1559 
ªt
 = 0;

1560 
œbñ_ªtu∫
:

1561 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
background_thªad_lock
);

1562 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
);

1564  
ªt
;

1565 
	}
}

1569 
	$CTL_RO_CONFIG_GEN
(
c⁄fig_ˇche_oblivious
, 
boﬁ
)

1570 
	$CTL_RO_CONFIG_GEN
(
c⁄fig_debug
, 
boﬁ
)

1571 
	$CTL_RO_CONFIG_GEN
(
c⁄fig_fûl
, 
boﬁ
)

1572 
	$CTL_RO_CONFIG_GEN
(
c⁄fig_œzy_lock
, 
boﬁ
)

1573 
	$CTL_RO_CONFIG_GEN
(
c⁄fig_mÆloc_c⁄f
, const *)

1574 
	$CTL_RO_CONFIG_GEN
(
c⁄fig_¥of
, 
boﬁ
)

1575 
	$CTL_RO_CONFIG_GEN
(
c⁄fig_¥of_libgcc
, 
boﬁ
)

1576 
	$CTL_RO_CONFIG_GEN
(
c⁄fig_¥of_libunwöd
, 
boﬁ
)

1577 
	$CTL_RO_CONFIG_GEN
(
c⁄fig_°©s
, 
boﬁ
)

1578 
	$CTL_RO_CONFIG_GEN
(
c⁄fig_thp
, 
boﬁ
)

1579 
	$CTL_RO_CONFIG_GEN
(
c⁄fig_uåa˚
, 
boﬁ
)

1580 
	$CTL_RO_CONFIG_GEN
(
c⁄fig_xmÆloc
, 
boﬁ
)

1584 
	$CTL_RO_NL_GEN
(
›t_ab‹t
, o±_ab‹t, 
boﬁ
)

1585 
	$CTL_RO_NL_GEN
(
›t_ab‹t_c⁄f
, o±_ab‹t_c⁄f, 
boﬁ
)

1586 
	$CTL_RO_NL_GEN
(
›t_mëad©a_thp
, 
mëad©a_thp_mode_«mes
[opt_metadata_thp],

1588 
	$CTL_RO_NL_GEN
(
›t_ªèö
, o±_ªèö, 
boﬁ
)

1589 
	$CTL_RO_NL_GEN
(
›t_dss
, opt_dss, const *)

1590 
	$CTL_RO_NL_GEN
(
›t_«ª«s
, opt_narenas, )

1591 
	$CTL_RO_NL_GEN
(
›t_≥r˝u_¨ía
, 
≥r˝u_¨ía_mode_«mes
[opt_percpu_arena],

1593 
	$CTL_RO_NL_GEN
(
›t_background_thªad
, o±_background_thªad, 
boﬁ
)

1594 
	$CTL_RO_NL_GEN
(
›t_dúty_deˇy_ms
, o±_dúty_deˇy_ms, 
ssize_t
)

1595 
	$CTL_RO_NL_GEN
(
›t_muzzy_deˇy_ms
, o±_muzzy_deˇy_ms, 
ssize_t
)

1596 
	$CTL_RO_NL_GEN
(
›t_°©s_¥öt
, o±_°©s_¥öt, 
boﬁ
)

1597 
	$CTL_RO_NL_GEN
(
›t_°©s_¥öt_›ts
, opt_stats_print_opts, const *)

1598 
	$CTL_RO_NL_CGEN
(
c⁄fig_fûl
, 
›t_junk
, opt_junk, const *)

1599 
	$CTL_RO_NL_CGEN
(
c⁄fig_fûl
, 
›t_zîo
, o±_zîo, 
boﬁ
)

1600 
	$CTL_RO_NL_CGEN
(
c⁄fig_uåa˚
, 
›t_uåa˚
, o±_uåa˚, 
boﬁ
)

1601 
	$CTL_RO_NL_CGEN
(
c⁄fig_xmÆloc
, 
›t_xmÆloc
, o±_xmÆloc, 
boﬁ
)

1602 
	$CTL_RO_NL_GEN
(
›t_tˇche
, o±_tˇche, 
boﬁ
)

1603 
	$CTL_RO_NL_GEN
(
›t_lg_exã¡_max_a˘ive_fô
, opt_lg_extent_max_active_fit,

1604 
size_t
)

1605 
	$CTL_RO_NL_GEN
(
›t_lg_tˇche_max
, o±_lg_tˇche_max, 
ssize_t
)

1606 
	$CTL_RO_NL_CGEN
(
c⁄fig_¥of
, 
›t_¥of
, o±_¥of, 
boﬁ
)

1607 
	$CTL_RO_NL_CGEN
(
c⁄fig_¥of
, 
›t_¥of_¥efix
, opt_prof_prefix, const *)

1608 
	$CTL_RO_NL_CGEN
(
c⁄fig_¥of
, 
›t_¥of_a˘ive
, o±_¥of_a˘ive, 
boﬁ
)

1609 
	$CTL_RO_NL_CGEN
(
c⁄fig_¥of
, 
›t_¥of_thªad_a˘ive_öô
,

1610 
›t_¥of_thªad_a˘ive_öô
, 
boﬁ
)

1611 
	$CTL_RO_NL_CGEN
(
c⁄fig_¥of
, 
›t_lg_¥of_ßm∂e
, o±_lg_¥of_ßm∂e, 
size_t
)

1612 
	$CTL_RO_NL_CGEN
(
c⁄fig_¥of
, 
›t_¥of_accum
, o±_¥of_accum, 
boﬁ
)

1613 
	$CTL_RO_NL_CGEN
(
c⁄fig_¥of
, 
›t_lg_¥of_öãrvÆ
, o±_lg_¥of_öãrvÆ, 
ssize_t
)

1614 
	$CTL_RO_NL_CGEN
(
c⁄fig_¥of
, 
›t_¥of_gdump
, o±_¥of_gdump, 
boﬁ
)

1615 
	$CTL_RO_NL_CGEN
(
c⁄fig_¥of
, 
›t_¥of_föÆ
, o±_¥of_föÆ, 
boﬁ
)

1616 
	$CTL_RO_NL_CGEN
(
c⁄fig_¥of
, 
›t_¥of_Àak
, o±_¥of_Àak, 
boﬁ
)

1621 
	$thªad_¨ía_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

1622 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

1623 
ªt
;

1624 
¨ía_t
 *
ﬁd¨ía
;

1625 
√wöd
, 
ﬁdöd
;

1627 
ﬁd¨ía
 = 
	`¨ía_choo£
(
tsd
, 
NULL
);

1628 i‡(
ﬁd¨ía
 =
NULL
) {

1629  
EAGAIN
;

1631 
√wöd
 = 
ﬁdöd
 = 
	`¨ía_öd_gë
(
ﬁd¨ía
);

1632 
	`WRITE
(
√wöd
, );

1633 
	`READ
(
ﬁdöd
, );

1635 i‡(
√wöd
 !
ﬁdöd
) {

1636 
¨ía_t
 *
√w¨ía
;

1638 i‡(
√wöd
 >
	`«ª«s_tŸÆ_gë
()) {

1640 
ªt
 = 
EFAULT
;

1641 
œbñ_ªtu∫
;

1644 i‡(
have_≥r˝u_¨ía
 &&

1645 
	`PERCPU_ARENA_ENABLED
(
›t_≥r˝u_¨ía
)) {

1646 i‡(
√wöd
 < 
	`≥r˝u_¨ía_öd_limô
(
›t_≥r˝u_¨ía
)) {

1652 
ªt
 = 
EPERM
;

1653 
œbñ_ªtu∫
;

1658 
√w¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
√wöd
, 
åue
);

1659 i‡(
√w¨ía
 =
NULL
) {

1660 
ªt
 = 
EAGAIN
;

1661 
œbñ_ªtu∫
;

1664 
	`¨ía_migøã
(
tsd
, 
ﬁdöd
, 
√wöd
);

1665 i‡(
	`tˇche_avaûabÀ
(
tsd
)) {

1666 
	`tˇche_¨ía_ªassocüã
(
	`tsd_tsdn
(
tsd
),

1667 
	`tsd_tˇchï_gë
(
tsd
), 
√w¨ía
);

1671 
ªt
 = 0;

1672 
œbñ_ªtu∫
:

1673  
ªt
;

1674 
	}
}

1676 
	$CTL_TSD_RO_NL_CGEN
(
c⁄fig_°©s
, 
thªad_Æloˇãd
, 
tsd_thªad_Æloˇãd_gë
,

1677 
uöt64_t
)

1678 
	$CTL_TSD_RO_NL_CGEN
(
c⁄fig_°©s
, 
thªad_Æloˇãdp
, 
tsd_thªad_Æloˇãdp_gë
,

1679 
uöt64_t
 *)

1680 
	$CTL_TSD_RO_NL_CGEN
(
c⁄fig_°©s
, 
thªad_dóŒoˇãd
, 
tsd_thªad_dóŒoˇãd_gë
,

1681 
uöt64_t
)

1682 
	$CTL_TSD_RO_NL_CGEN
(
c⁄fig_°©s
, 
thªad_dóŒoˇãdp
,

1683 
tsd_thªad_dóŒoˇãdp_gë
, 
uöt64_t
 *)

1686 
	$thªad_tˇche_íabÀd_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

1687 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

1688 
ªt
;

1689 
boﬁ
 
ﬁdvÆ
;

1691 
ﬁdvÆ
 = 
	`tˇche_íabÀd_gë
(
tsd
);

1692 i‡(
√wp
 !
NULL
) {

1693 i‡(
√wÀn
 !(
boﬁ
)) {

1694 
ªt
 = 
EINVAL
;

1695 
œbñ_ªtu∫
;

1697 
	`tˇche_íabÀd_£t
(
tsd
, *(
boﬁ
 *)
√wp
);

1699 
	`READ
(
ﬁdvÆ
, 
boﬁ
);

1701 
ªt
 = 0;

1702 
œbñ_ªtu∫
:

1703  
ªt
;

1704 
	}
}

1707 
	$thªad_tˇche_Êush_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

1708 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

1709 
ªt
;

1711 i‡(!
	`tˇche_avaûabÀ
(
tsd
)) {

1712 
ªt
 = 
EFAULT
;

1713 
œbñ_ªtu∫
;

1716 
	`READONLY
();

1717 
	`WRITEONLY
();

1719 
	`tˇche_Êush
(
tsd
);

1721 
ªt
 = 0;

1722 
œbñ_ªtu∫
:

1723  
ªt
;

1724 
	}
}

1727 
	$thªad_¥of_«me_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

1728 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

1729 
ªt
;

1731 i‡(!
c⁄fig_¥of
) {

1732  
ENOENT
;

1735 
	`READ_XOR_WRITE
();

1737 i‡(
√wp
 !
NULL
) {

1738 i‡(
√wÀn
 != (const *)) {

1739 
ªt
 = 
EINVAL
;

1740 
œbñ_ªtu∫
;

1743 i‡((
ªt
 = 
	`¥of_thªad_«me_£t
(
tsd
, *(c⁄° **)
√wp
)) !=

1745 
œbñ_ªtu∫
;

1748 c⁄° *
ﬁd«me
 = 
	`¥of_thªad_«me_gë
(
tsd
);

1749 
	`READ
(
ﬁd«me
, const *);

1752 
ªt
 = 0;

1753 
œbñ_ªtu∫
:

1754  
ªt
;

1755 
	}
}

1758 
	$thªad_¥of_a˘ive_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

1759 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

1760 
ªt
;

1761 
boﬁ
 
ﬁdvÆ
;

1763 i‡(!
c⁄fig_¥of
) {

1764  
ENOENT
;

1767 
ﬁdvÆ
 = 
	`¥of_thªad_a˘ive_gë
(
tsd
);

1768 i‡(
√wp
 !
NULL
) {

1769 i‡(
√wÀn
 !(
boﬁ
)) {

1770 
ªt
 = 
EINVAL
;

1771 
œbñ_ªtu∫
;

1773 i‡(
	`¥of_thªad_a˘ive_£t
(
tsd
, *(
boﬁ
 *)
√wp
)) {

1774 
ªt
 = 
EAGAIN
;

1775 
œbñ_ªtu∫
;

1778 
	`READ
(
ﬁdvÆ
, 
boﬁ
);

1780 
ªt
 = 0;

1781 
œbñ_ªtu∫
:

1782  
ªt
;

1783 
	}
}

1788 
	$tˇche_¸óã_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

1789 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

1790 
ªt
;

1791 
tˇche_öd
;

1793 
	`READONLY
();

1794 i‡(
	`tˇches_¸óã
(
tsd
, &
tˇche_öd
)) {

1795 
ªt
 = 
EFAULT
;

1796 
œbñ_ªtu∫
;

1798 
	`READ
(
tˇche_öd
, );

1800 
ªt
 = 0;

1801 
œbñ_ªtu∫
:

1802  
ªt
;

1803 
	}
}

1806 
	$tˇche_Êush_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

1807 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

1808 
ªt
;

1809 
tˇche_öd
;

1811 
	`WRITEONLY
();

1812 
tˇche_öd
 = 
UINT_MAX
;

1813 
	`WRITE
(
tˇche_öd
, );

1814 i‡(
tˇche_öd
 =
UINT_MAX
) {

1815 
ªt
 = 
EFAULT
;

1816 
œbñ_ªtu∫
;

1818 
	`tˇches_Êush
(
tsd
, 
tˇche_öd
);

1820 
ªt
 = 0;

1821 
œbñ_ªtu∫
:

1822  
ªt
;

1823 
	}
}

1826 
	$tˇche_de°roy_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

1827 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

1828 
ªt
;

1829 
tˇche_öd
;

1831 
	`WRITEONLY
();

1832 
tˇche_öd
 = 
UINT_MAX
;

1833 
	`WRITE
(
tˇche_öd
, );

1834 i‡(
tˇche_öd
 =
UINT_MAX
) {

1835 
ªt
 = 
EFAULT
;

1836 
œbñ_ªtu∫
;

1838 
	`tˇches_de°roy
(
tsd
, 
tˇche_öd
);

1840 
ªt
 = 0;

1841 
œbñ_ªtu∫
:

1842  
ªt
;

1843 
	}
}

1848 
	$¨ía_i_öôülized_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

1849 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

1850 
ªt
;

1851 
tsdn_t
 *
tsdn
 = 
	`tsd_tsdn
(
tsd
);

1852 
¨ía_öd
;

1853 
boﬁ
 
öôülized
;

1855 
	`READONLY
();

1856 
	`MIB_UNSIGNED
(
¨ía_öd
, 1);

1858 
	`mÆloc_muãx_lock
(
tsdn
, &
˘l_mtx
);

1859 
öôülized
 = 
	`¨ías_i
(
¨ía_öd
)->initialized;

1860 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
˘l_mtx
);

1862 
	`READ
(
öôülized
, 
boﬁ
);

1864 
ªt
 = 0;

1865 
œbñ_ªtu∫
:

1866  
ªt
;

1867 
	}
}

1870 
	$¨ía_i_deˇy
(
tsdn_t
 *
tsdn
, 
¨ía_öd
, 
boﬁ
 
Æl
) {

1871 
	`mÆloc_muãx_lock
(
tsdn
, &
˘l_mtx
);

1873 
«ª«s
 = 
˘l_¨ías
->narenas;

1879 i‡(
¨ía_öd
 =
MALLCTL_ARENAS_ALL
 ||áª«_öd =
«ª«s
) {

1880 
i
;

1881 
	`VARIABLE_ARRAY
(
¨ía_t
 *, 
èª«s
, 
«ª«s
);

1883 
i
 = 0; i < 
«ª«s
; i++) {

1884 
èª«s
[
i
] = 
	`¨ía_gë
(
tsdn
, i, 
Ál£
);

1891 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
˘l_mtx
);

1893 
i
 = 0; i < 
«ª«s
; i++) {

1894 i‡(
èª«s
[
i
] !
NULL
) {

1895 
	`¨ía_deˇy
(
tsdn
, 
èª«s
[
i
], 
Ál£
,

1896 
Æl
);

1900 
¨ía_t
 *
èª«
;

1902 
	`as£π
(
¨ía_öd
 < 
«ª«s
);

1904 
èª«
 = 
	`¨ía_gë
(
tsdn
, 
¨ía_öd
, 
Ál£
);

1907 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
˘l_mtx
);

1909 i‡(
èª«
 !
NULL
) {

1910 
	`¨ía_deˇy
(
tsdn
, 
èª«
, 
Ál£
, 
Æl
);

1914 
	}
}

1917 
	$¨ía_i_deˇy_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

1918 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

1919 
ªt
;

1920 
¨ía_öd
;

1922 
	`READONLY
();

1923 
	`WRITEONLY
();

1924 
	`MIB_UNSIGNED
(
¨ía_öd
, 1);

1925 
	`¨ía_i_deˇy
(
	`tsd_tsdn
(
tsd
), 
¨ía_öd
, 
Ál£
);

1927 
ªt
 = 0;

1928 
œbñ_ªtu∫
:

1929  
ªt
;

1930 
	}
}

1933 
	$¨ía_i_purge_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

1934 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

1935 
ªt
;

1936 
¨ía_öd
;

1938 
	`READONLY
();

1939 
	`WRITEONLY
();

1940 
	`MIB_UNSIGNED
(
¨ía_öd
, 1);

1941 
	`¨ía_i_deˇy
(
	`tsd_tsdn
(
tsd
), 
¨ía_öd
, 
åue
);

1943 
ªt
 = 0;

1944 
œbñ_ªtu∫
:

1945  
ªt
;

1946 
	}
}

1949 
	$¨ía_i_ª£t_de°roy_hñ≥r
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

1950 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
, *
¨ía_öd
,

1951 
¨ía_t
 **
¨ía
) {

1952 
ªt
;

1954 
	`READONLY
();

1955 
	`WRITEONLY
();

1956 
	`MIB_UNSIGNED
(*
¨ía_öd
, 1);

1958 *
¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), *
¨ía_öd
, 
Ál£
);

1959 i‡(*
¨ía
 =
NULL
 || 
	`¨ía_is_auto
(*arena)) {

1960 
ªt
 = 
EFAULT
;

1961 
œbñ_ªtu∫
;

1964 
ªt
 = 0;

1965 
œbñ_ªtu∫
:

1966  
ªt
;

1967 
	}
}

1970 
	$¨ía_ª£t_¥ï¨e_background_thªad
(
tsd_t
 *
tsd
, 
¨ía_öd
) {

1972 i‡(
have_background_thªad
) {

1973 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
background_thªad_lock
);

1974 i‡(
	`background_thªad_íabÀd
()) {

1975 
öd
 = 
¨ía_öd
 % 
n˝us
;

1976 
background_thªad_öfo_t
 *
öfo
 =

1977 &
background_thªad_öfo
[
öd
];

1978 
	`as£π
(
öfo
->
°©e
 =
background_thªad_°¨ãd
);

1979 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

1980 
öfo
->
°©e
 = 
background_thªad_∑u£d
;

1981 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

1984 
	}
}

1987 
	$¨ía_ª£t_föish_background_thªad
(
tsd_t
 *
tsd
, 
¨ía_öd
) {

1988 i‡(
have_background_thªad
) {

1989 i‡(
	`background_thªad_íabÀd
()) {

1990 
öd
 = 
¨ía_öd
 % 
n˝us
;

1991 
background_thªad_öfo_t
 *
öfo
 =

1992 &
background_thªad_öfo
[
öd
];

1993 
	`as£π
(
öfo
->
°©e
 =
background_thªad_∑u£d
);

1994 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

1995 
öfo
->
°©e
 = 
background_thªad_°¨ãd
;

1996 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

1998 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
background_thªad_lock
);

2000 
	}
}

2003 
	$¨ía_i_ª£t_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

2004 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2005 
ªt
;

2006 
¨ía_öd
;

2007 
¨ía_t
 *
¨ía
;

2009 
ªt
 = 
	`¨ía_i_ª£t_de°roy_hñ≥r
(
tsd
, 
mib
, 
mibÀn
, 
ﬁdp
, 
ﬁdÀ≈
,

2010 
√wp
, 
√wÀn
, &
¨ía_öd
, &
¨ía
);

2011 i‡(
ªt
 != 0) {

2012  
ªt
;

2015 
	`¨ía_ª£t_¥ï¨e_background_thªad
(
tsd
, 
¨ía_öd
);

2016 
	`¨ía_ª£t
(
tsd
, 
¨ía
);

2017 
	`¨ía_ª£t_föish_background_thªad
(
tsd
, 
¨ía_öd
);

2019  
ªt
;

2020 
	}
}

2023 
	$¨ía_i_de°roy_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

2024 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2025 
ªt
;

2026 
¨ía_öd
;

2027 
¨ía_t
 *
¨ía
;

2028 
˘l_¨ía_t
 *
˘l_d¨ía
, *
˘l_¨ía
;

2030 
ªt
 = 
	`¨ía_i_ª£t_de°roy_hñ≥r
(
tsd
, 
mib
, 
mibÀn
, 
ﬁdp
, 
ﬁdÀ≈
,

2031 
√wp
, 
√wÀn
, &
¨ía_öd
, &
¨ía
);

2032 i‡(
ªt
 != 0) {

2033 
œbñ_ªtu∫
;

2036 i‡(
	`¨ía_¡hªads_gë
(
¨ía
, 
Ál£
) != 0 ||árena_nthreads_get(arena,

2037 
åue
) != 0) {

2038 
ªt
 = 
EFAULT
;

2039 
œbñ_ªtu∫
;

2042 
	`¨ía_ª£t_¥ï¨e_background_thªad
(
tsd
, 
¨ía_öd
);

2044 
	`¨ía_ª£t
(
tsd
, 
¨ía
);

2045 
	`¨ía_deˇy
(
	`tsd_tsdn
(
tsd
), 
¨ía
, 
Ál£
, 
åue
);

2046 
˘l_d¨ía
 = 
	`¨ías_i
(
MALLCTL_ARENAS_DESTROYED
);

2047 
˘l_d¨ía
->
öôülized
 = 
åue
;

2048 
	`˘l_¨ía_ª‰esh
(
	`tsd_tsdn
(
tsd
), 
¨ía
, 
˘l_d¨ía
, 
¨ía_öd
, 
åue
);

2050 
	`¨ía_de°roy
(
tsd
, 
¨ía
);

2051 
˘l_¨ía
 = 
	`¨ías_i
(
¨ía_öd
);

2052 
˘l_¨ía
->
öôülized
 = 
Ál£
;

2054 
	`ql_ñm_√w
(
˘l_¨ía
, 
de°royed_lök
);

2055 
	`ql_èû_ö£π
(&
˘l_¨ías
->
de°royed
, 
˘l_¨ía
, 
de°royed_lök
);

2056 
	`¨ía_ª£t_föish_background_thªad
(
tsd
, 
¨ía_öd
);

2058 
	`as£π
(
ªt
 == 0);

2059 
œbñ_ªtu∫
:

2060  
ªt
;

2061 
	}
}

2064 
	$¨ía_i_dss_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

2065 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2066 
ªt
;

2067 c⁄° *
dss
 = 
NULL
;

2068 
¨ía_öd
;

2069 
dss_¥ec_t
 
dss_¥ec_ﬁd
 = 
dss_¥ec_limô
;

2070 
dss_¥ec_t
 
dss_¥ec
 = 
dss_¥ec_limô
;

2072 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
);

2073 
	`WRITE
(
dss
, const *);

2074 
	`MIB_UNSIGNED
(
¨ía_öd
, 1);

2075 i‡(
dss
 !
NULL
) {

2076 
i
;

2077 
boﬁ
 
m©ch
 = 
Ál£
;

2079 
i
 = 0; i < 
dss_¥ec_limô
; i++) {

2080 i‡(
	`°rcmp
(
dss_¥ec_«mes
[
i
], 
dss
) == 0) {

2081 
dss_¥ec
 = 
i
;

2082 
m©ch
 = 
åue
;

2087 i‡(!
m©ch
) {

2088 
ªt
 = 
EINVAL
;

2089 
œbñ_ªtu∫
;

2097 i‡(
¨ía_öd
 =
MALLCTL_ARENAS_ALL
 ||árena_ind ==

2098 
˘l_¨ías
->
«ª«s
) {

2099 i‡(
dss_¥ec
 !
dss_¥ec_limô
 &&

2100 
	`exã¡_dss_¥ec_£t
(
dss_¥ec
)) {

2101 
ªt
 = 
EFAULT
;

2102 
œbñ_ªtu∫
;

2104 
dss_¥ec_ﬁd
 = 
	`exã¡_dss_¥ec_gë
();

2106 
¨ía_t
 *
¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
¨ía_öd
, 
Ál£
);

2107 i‡(
¨ía
 =
NULL
 || (
dss_¥ec
 !
dss_¥ec_limô
 &&

2108 
	`¨ía_dss_¥ec_£t
(
¨ía
, 
dss_¥ec
))) {

2109 
ªt
 = 
EFAULT
;

2110 
œbñ_ªtu∫
;

2112 
dss_¥ec_ﬁd
 = 
	`¨ía_dss_¥ec_gë
(
¨ía
);

2115 
dss
 = 
dss_¥ec_«mes
[
dss_¥ec_ﬁd
];

2116 
	`READ
(
dss
, const *);

2118 
ªt
 = 0;

2119 
œbñ_ªtu∫
:

2120 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
);

2121  
ªt
;

2122 
	}
}

2125 
	$¨ía_i_deˇy_ms_˘l_im∂
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

2126 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
, 
boﬁ
 
dúty
) {

2127 
ªt
;

2128 
¨ía_öd
;

2129 
¨ía_t
 *
¨ía
;

2131 
	`MIB_UNSIGNED
(
¨ía_öd
, 1);

2132 
¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
¨ía_öd
, 
Ál£
);

2133 i‡(
¨ía
 =
NULL
) {

2134 
ªt
 = 
EFAULT
;

2135 
œbñ_ªtu∫
;

2138 i‡(
ﬁdp
 !
NULL
 && 
ﬁdÀ≈
 != NULL) {

2139 
size_t
 
ﬁdvÆ
 = 
dúty
 ? 
	`¨ía_dúty_deˇy_ms_gë
(
¨ía
) :

2140 
	`¨ía_muzzy_deˇy_ms_gë
(
¨ía
);

2141 
	`READ
(
ﬁdvÆ
, 
ssize_t
);

2143 i‡(
√wp
 !
NULL
) {

2144 i‡(
√wÀn
 !(
ssize_t
)) {

2145 
ªt
 = 
EINVAL
;

2146 
œbñ_ªtu∫
;

2148 i‡(
dúty
 ? 
	`¨ía_dúty_deˇy_ms_£t
(
	`tsd_tsdn
(
tsd
), 
¨ía
,

2149 *(
ssize_t
 *)
√wp
Ë: 
	`¨ía_muzzy_deˇy_ms_£t
(
	`tsd_tsdn
(
tsd
),

2150 
¨ía
, *(
ssize_t
 *)
√wp
)) {

2151 
ªt
 = 
EFAULT
;

2152 
œbñ_ªtu∫
;

2156 
ªt
 = 0;

2157 
œbñ_ªtu∫
:

2158  
ªt
;

2159 
	}
}

2162 
	$¨ía_i_dúty_deˇy_ms_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

2163 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2164  
	`¨ía_i_deˇy_ms_˘l_im∂
(
tsd
, 
mib
, 
mibÀn
, 
ﬁdp
, 
ﬁdÀ≈
, 
√wp
,

2165 
√wÀn
, 
åue
);

2166 
	}
}

2169 
	$¨ía_i_muzzy_deˇy_ms_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

2170 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2171  
	`¨ía_i_deˇy_ms_˘l_im∂
(
tsd
, 
mib
, 
mibÀn
, 
ﬁdp
, 
ﬁdÀ≈
, 
√wp
,

2172 
√wÀn
, 
Ál£
);

2173 
	}
}

2176 
	$¨ía_i_exã¡_hooks_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

2177 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2178 
ªt
;

2179 
¨ía_öd
;

2180 
¨ía_t
 *
¨ía
;

2182 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
);

2183 
	`MIB_UNSIGNED
(
¨ía_öd
, 1);

2184 i‡(
¨ía_öd
 < 
	`«ª«s_tŸÆ_gë
(Ë&& (
¨ía
 =

2185 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
¨ía_öd
, 
Ál£
)Ë!
NULL
) {

2186 i‡(
√wp
 !
NULL
) {

2187 
exã¡_hooks_t
 *
ﬁd_exã¡_hooks
;

2188 
exã¡_hooks_t
 *
√w_exã¡_hooks


2189 
	`JEMALLOC_CC_SILENCE_INIT
(
NULL
);

2190 
	`WRITE
(
√w_exã¡_hooks
, 
exã¡_hooks_t
 *);

2191 
ﬁd_exã¡_hooks
 = 
	`exã¡_hooks_£t
(
tsd
, 
¨ía
,

2192 
√w_exã¡_hooks
);

2193 
	`READ
(
ﬁd_exã¡_hooks
, 
exã¡_hooks_t
 *);

2195 
exã¡_hooks_t
 *
ﬁd_exã¡_hooks
 =

2196 
	`exã¡_hooks_gë
(
¨ía
);

2197 
	`READ
(
ﬁd_exã¡_hooks
, 
exã¡_hooks_t
 *);

2200 
ªt
 = 
EFAULT
;

2201 
œbñ_ªtu∫
;

2203 
ªt
 = 0;

2204 
œbñ_ªtu∫
:

2205 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
);

2206  
ªt
;

2207 
	}
}

2210 
	$¨ía_i_ªèö_grow_limô_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

2211 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2212 
ªt
;

2213 
¨ía_öd
;

2214 
¨ía_t
 *
¨ía
;

2216 i‡(!
›t_ªèö
) {

2218  
ENOENT
;

2221 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
);

2222 
	`MIB_UNSIGNED
(
¨ía_öd
, 1);

2223 i‡(
¨ía_öd
 < 
	`«ª«s_tŸÆ_gë
(Ë&& (
¨ía
 =

2224 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
¨ía_öd
, 
Ál£
)Ë!
NULL
) {

2225 
size_t
 
ﬁd_limô
, 
√w_limô
;

2226 i‡(
√wp
 !
NULL
) {

2227 
	`WRITE
(
√w_limô
, 
size_t
);

2229 
boﬁ
 
îr
 = 
	`¨ía_ªèö_grow_limô_gë_£t
(
tsd
, 
¨ía
,

2230 &
ﬁd_limô
, 
√wp
 !
NULL
 ? &
√w_limô
 : NULL);

2231 i‡(!
îr
) {

2232 
	`READ
(
ﬁd_limô
, 
size_t
);

2233 
ªt
 = 0;

2235 
ªt
 = 
EFAULT
;

2238 
ªt
 = 
EFAULT
;

2240 
œbñ_ªtu∫
:

2241 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
);

2242  
ªt
;

2243 
	}
}

2245 c⁄° 
˘l_«med_node_t
 *

2246 
	$¨ía_i_ödex
(
tsdn_t
 *
tsdn
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, size_à
i
) {

2247 c⁄° 
˘l_«med_node_t
 *
ªt
;

2249 
	`mÆloc_muãx_lock
(
tsdn
, &
˘l_mtx
);

2250 
i
) {

2251 
MALLCTL_ARENAS_ALL
:

2252 
MALLCTL_ARENAS_DESTROYED
:

2255 i‡(
i
 > 
˘l_¨ías
->
«ª«s
) {

2256 
ªt
 = 
NULL
;

2257 
œbñ_ªtu∫
;

2262 
ªt
 = 
su≥r_¨ía_i_node
;

2263 
œbñ_ªtu∫
:

2264 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
˘l_mtx
);

2265  
ªt
;

2266 
	}
}

2271 
	$¨ías_«ª«s_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

2272 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2273 
ªt
;

2274 
«ª«s
;

2276 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
);

2277 
	`READONLY
();

2278 i‡(*
ﬁdÀ≈
 != ()) {

2279 
ªt
 = 
EINVAL
;

2280 
œbñ_ªtu∫
;

2282 
«ª«s
 = 
˘l_¨ías
->narenas;

2283 
	`READ
(
«ª«s
, );

2285 
ªt
 = 0;

2286 
œbñ_ªtu∫
:

2287 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
);

2288  
ªt
;

2289 
	}
}

2292 
	$¨ías_deˇy_ms_˘l_im∂
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

2293 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
, 
boﬁ
 
dúty
) {

2294 
ªt
;

2296 i‡(
ﬁdp
 !
NULL
 && 
ﬁdÀ≈
 != NULL) {

2297 
size_t
 
ﬁdvÆ
 = (
dúty
 ? 
	`¨ía_dúty_deˇy_ms_deÁu…_gë
() :

2298 
	`¨ía_muzzy_deˇy_ms_deÁu…_gë
());

2299 
	`READ
(
ﬁdvÆ
, 
ssize_t
);

2301 i‡(
√wp
 !
NULL
) {

2302 i‡(
√wÀn
 !(
ssize_t
)) {

2303 
ªt
 = 
EINVAL
;

2304 
œbñ_ªtu∫
;

2306 i‡(
dúty
 ? 
	`¨ía_dúty_deˇy_ms_deÁu…_£t
(*(
ssize_t
 *)
√wp
)

2307 : 
	`¨ía_muzzy_deˇy_ms_deÁu…_£t
(*(
ssize_t
 *)
√wp
)) {

2308 
ªt
 = 
EFAULT
;

2309 
œbñ_ªtu∫
;

2313 
ªt
 = 0;

2314 
œbñ_ªtu∫
:

2315  
ªt
;

2316 
	}
}

2319 
	$¨ías_dúty_deˇy_ms_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

2320 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2321  
	`¨ías_deˇy_ms_˘l_im∂
(
tsd
, 
mib
, 
mibÀn
, 
ﬁdp
, 
ﬁdÀ≈
, 
√wp
,

2322 
√wÀn
, 
åue
);

2323 
	}
}

2326 
	$¨ías_muzzy_deˇy_ms_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

2327 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2328  
	`¨ías_deˇy_ms_˘l_im∂
(
tsd
, 
mib
, 
mibÀn
, 
ﬁdp
, 
ﬁdÀ≈
, 
√wp
,

2329 
√wÀn
, 
Ál£
);

2330 
	}
}

2332 
	$CTL_RO_NL_GEN
(
¨ías_qu™tum
, 
QUANTUM
, 
size_t
)

2333 
	$CTL_RO_NL_GEN
(
¨ías_∑ge
, 
PAGE
, 
size_t
)

2334 
	$CTL_RO_NL_GEN
(
¨ías_tˇche_max
, 
tˇche_max˛ass
, 
size_t
)

2335 
	$CTL_RO_NL_GEN
(
¨ías_nbös
, 
NBINS
, )

2336 
	$CTL_RO_NL_GEN
(
¨ías_nhbös
, 
nhbös
, )

2337 
	$CTL_RO_NL_GEN
(
¨ías_bö_i_size
, 
bö_öfos
[
mib
[2]].
ªg_size
, 
size_t
)

2338 
	$CTL_RO_NL_GEN
(
¨ías_bö_i_ƒegs
, 
bö_öfos
[
mib
[2]].
ƒegs
, 
uöt32_t
)

2339 
	$CTL_RO_NL_GEN
(
¨ías_bö_i_¶ab_size
, 
bö_öfos
[
mib
[2]].
¶ab_size
, 
size_t
)

2340 c⁄° 
˘l_«med_node_t
 *

2341 
	$¨ías_bö_i_ödex
(
tsdn_t
 *
tsdn
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, size_à
i
) {

2342 i‡(
i
 > 
NBINS
) {

2343  
NULL
;

2345  
su≥r_¨ías_bö_i_node
;

2346 
	}
}

2348 
CTL_RO_NL_GEN
(
¨ías_∆exã¡s
, 
NSIZES
 - 
NBINS
, )

2349 
CTL_RO_NL_GEN
(
¨ías_Àxã¡_i_size
, 
sz_ödex2size
(
NBINS
+(
szöd_t
)
mib
[2]),

2350 
size_t
)

2351 c⁄° 
˘l_«med_node_t
 *

2352 
	$¨ías_Àxã¡_i_ödex
(
tsdn_t
 *
tsdn
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

2353 
size_t
 
i
) {

2354 i‡(
i
 > 
NSIZES
 - 
NBINS
) {

2355  
NULL
;

2357  
su≥r_¨ías_Àxã¡_i_node
;

2358 
	}
}

2361 
	$¨ías_¸óã_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

2362 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2363 
ªt
;

2364 
exã¡_hooks_t
 *
exã¡_hooks
;

2365 
¨ía_öd
;

2367 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
);

2369 
exã¡_hooks
 = (
exã¡_hooks_t
 *)&
exã¡_hooks_deÁu…
;

2370 
	`WRITE
(
exã¡_hooks
, 
exã¡_hooks_t
 *);

2371 i‡((
¨ía_öd
 = 
	`˘l_¨ía_öô
(
tsd
, 
exã¡_hooks
)Ë=
UINT_MAX
) {

2372 
ªt
 = 
EAGAIN
;

2373 
œbñ_ªtu∫
;

2375 
	`READ
(
¨ía_öd
, );

2377 
ªt
 = 0;

2378 
œbñ_ªtu∫
:

2379 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
˘l_mtx
);

2380  
ªt
;

2381 
	}
}

2386 
	$¥of_thªad_a˘ive_öô_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

2387 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2388 
ªt
;

2389 
boﬁ
 
ﬁdvÆ
;

2391 i‡(!
c⁄fig_¥of
) {

2392  
ENOENT
;

2395 i‡(
√wp
 !
NULL
) {

2396 i‡(
√wÀn
 !(
boﬁ
)) {

2397 
ªt
 = 
EINVAL
;

2398 
œbñ_ªtu∫
;

2400 
ﬁdvÆ
 = 
	`¥of_thªad_a˘ive_öô_£t
(
	`tsd_tsdn
(
tsd
),

2401 *(
boﬁ
 *)
√wp
);

2403 
ﬁdvÆ
 = 
	`¥of_thªad_a˘ive_öô_gë
(
	`tsd_tsdn
(
tsd
));

2405 
	`READ
(
ﬁdvÆ
, 
boﬁ
);

2407 
ªt
 = 0;

2408 
œbñ_ªtu∫
:

2409  
ªt
;

2410 
	}
}

2413 
	$¥of_a˘ive_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

2414 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2415 
ªt
;

2416 
boﬁ
 
ﬁdvÆ
;

2418 i‡(!
c⁄fig_¥of
) {

2419  
ENOENT
;

2422 i‡(
√wp
 !
NULL
) {

2423 i‡(
√wÀn
 !(
boﬁ
)) {

2424 
ªt
 = 
EINVAL
;

2425 
œbñ_ªtu∫
;

2427 
ﬁdvÆ
 = 
	`¥of_a˘ive_£t
(
	`tsd_tsdn
(
tsd
), *(
boﬁ
 *)
√wp
);

2429 
ﬁdvÆ
 = 
	`¥of_a˘ive_gë
(
	`tsd_tsdn
(
tsd
));

2431 
	`READ
(
ﬁdvÆ
, 
boﬁ
);

2433 
ªt
 = 0;

2434 
œbñ_ªtu∫
:

2435  
ªt
;

2436 
	}
}

2439 
	$¥of_dump_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

2440 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2441 
ªt
;

2442 c⁄° *
fûíame
 = 
NULL
;

2444 i‡(!
c⁄fig_¥of
) {

2445  
ENOENT
;

2448 
	`WRITEONLY
();

2449 
	`WRITE
(
fûíame
, const *);

2451 i‡(
	`¥of_mdump
(
tsd
, 
fûíame
)) {

2452 
ªt
 = 
EFAULT
;

2453 
œbñ_ªtu∫
;

2456 
ªt
 = 0;

2457 
œbñ_ªtu∫
:

2458  
ªt
;

2459 
	}
}

2462 
	$¥of_gdump_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

2463 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2464 
ªt
;

2465 
boﬁ
 
ﬁdvÆ
;

2467 i‡(!
c⁄fig_¥of
) {

2468  
ENOENT
;

2471 i‡(
√wp
 !
NULL
) {

2472 i‡(
√wÀn
 !(
boﬁ
)) {

2473 
ªt
 = 
EINVAL
;

2474 
œbñ_ªtu∫
;

2476 
ﬁdvÆ
 = 
	`¥of_gdump_£t
(
	`tsd_tsdn
(
tsd
), *(
boﬁ
 *)
√wp
);

2478 
ﬁdvÆ
 = 
	`¥of_gdump_gë
(
	`tsd_tsdn
(
tsd
));

2480 
	`READ
(
ﬁdvÆ
, 
boﬁ
);

2482 
ªt
 = 0;

2483 
œbñ_ªtu∫
:

2484  
ªt
;

2485 
	}
}

2488 
	$¥of_ª£t_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
,

2489 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2490 
ªt
;

2491 
size_t
 
lg_ßm∂e
 = 
lg_¥of_ßm∂e
;

2493 i‡(!
c⁄fig_¥of
) {

2494  
ENOENT
;

2497 
	`WRITEONLY
();

2498 
	`WRITE
(
lg_ßm∂e
, 
size_t
);

2499 i‡(
lg_ßm∂e
 >((
uöt64_t
) << 3)) {

2500 
lg_ßm∂e
 = ((
uöt64_t
) << 3) - 1;

2503 
	`¥of_ª£t
(
tsd
, 
lg_ßm∂e
);

2505 
ªt
 = 0;

2506 
œbñ_ªtu∫
:

2507  
ªt
;

2508 
	}
}

2510 
	$CTL_RO_NL_CGEN
(
c⁄fig_¥of
, 
¥of_öãrvÆ
,Örof_öãrvÆ, 
uöt64_t
)

2511 
	$CTL_RO_NL_CGEN
(
c⁄fig_¥of
, 
lg_¥of_ßm∂e
,Üg_¥of_ßm∂e, 
size_t
)

2515 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_Æloˇãd
, 
˘l_°©s
->
Æloˇãd
, 
size_t
)

2516 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_a˘ive
, 
˘l_°©s
->
a˘ive
, 
size_t
)

2517 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_mëad©a
, 
˘l_°©s
->
mëad©a
, 
size_t
)

2518 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_mëad©a_thp
, 
˘l_°©s
->
mëad©a_thp
, 
size_t
)

2519 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_ªsidít
, 
˘l_°©s
->
ªsidít
, 
size_t
)

2520 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_m≠≥d
, 
˘l_°©s
->
m≠≥d
, 
size_t
)

2521 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_ªèöed
, 
˘l_°©s
->
ªèöed
, 
size_t
)

2523 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_background_thªad_num_thªads
,

2524 
˘l_°©s
->
background_thªad
.
num_thªads
, 
size_t
)

2525 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_background_thªad_num_runs
,

2526 
˘l_°©s
->
background_thªad
.
num_runs
, 
uöt64_t
)

2527 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_background_thªad_run_öãrvÆ
,

2528 
	`n°ime_ns
(&
˘l_°©s
->
background_thªad
.
run_öãrvÆ
), 
uöt64_t
)

2530 
	`CTL_RO_GEN
(
°©s_¨ías_i_dss
, 
	`¨ías_i
(
mib
[2])->
dss
, const *)

2531 
	`CTL_RO_GEN
(
°©s_¨ías_i_dúty_deˇy_ms
, 
	`¨ías_i
(
mib
[2])->
dúty_deˇy_ms
,

2532 
ssize_t
)

2533 
	`CTL_RO_GEN
(
°©s_¨ías_i_muzzy_deˇy_ms
, 
	`¨ías_i
(
mib
[2])->
muzzy_deˇy_ms
,

2534 
ssize_t
)

2535 
	`CTL_RO_GEN
(
°©s_¨ías_i_¡hªads
, 
	`¨ías_i
(
mib
[2])->
¡hªads
, )

2536 
	`CTL_RO_GEN
(
°©s_¨ías_i_u±ime
,

2537 
	`n°ime_ns
(&
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
u±ime
), 
uöt64_t
)

2538 
	`CTL_RO_GEN
(
°©s_¨ías_i_∑˘ive
, 
	`¨ías_i
(
mib
[2])->
∑˘ive
, 
size_t
)

2539 
	`CTL_RO_GEN
(
°©s_¨ías_i_pdúty
, 
	`¨ías_i
(
mib
[2])->
pdúty
, 
size_t
)

2540 
	`CTL_RO_GEN
(
°©s_¨ías_i_pmuzzy
, 
	`¨ías_i
(
mib
[2])->
pmuzzy
, 
size_t
)

2541 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_m≠≥d
,

2542 
	`©omic_lﬂd_zu
(&
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
m≠≥d
, 
ATOMIC_RELAXED
),

2543 
size_t
)

2544 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_ªèöed
,

2545 
	`©omic_lﬂd_zu
(&
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
ªèöed
, 
ATOMIC_RELAXED
),

2546 
size_t
)

2548 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_dúty_≈urge
,

2549 
	`˘l_¨ía_°©s_ªad_u64
(

2550 &
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
deˇy_dúty
.
≈urge
), 
uöt64_t
)

2551 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_dúty_nmadvi£
,

2552 
	`˘l_¨ía_°©s_ªad_u64
(

2553 &
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
deˇy_dúty
.
nmadvi£
), 
uöt64_t
)

2554 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_dúty_purged
,

2555 
	`˘l_¨ía_°©s_ªad_u64
(

2556 &
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
deˇy_dúty
.
purged
), 
uöt64_t
)

2558 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_muzzy_≈urge
,

2559 
	`˘l_¨ía_°©s_ªad_u64
(

2560 &
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
deˇy_muzzy
.
≈urge
), 
uöt64_t
)

2561 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_muzzy_nmadvi£
,

2562 
	`˘l_¨ía_°©s_ªad_u64
(

2563 &
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
deˇy_muzzy
.
nmadvi£
), 
uöt64_t
)

2564 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_muzzy_purged
,

2565 
	`˘l_¨ía_°©s_ªad_u64
(

2566 &
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
deˇy_muzzy
.
purged
), 
uöt64_t
)

2568 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_ba£
,

2569 
	`©omic_lﬂd_zu
(&
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
ba£
, 
ATOMIC_RELAXED
),

2570 
size_t
)

2571 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_öã∫Æ
,

2572 
	`©omic_lﬂd_zu
(&
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
öã∫Æ
, 
ATOMIC_RELAXED
),

2573 
size_t
)

2574 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_mëad©a_thp
,

2575 
	`©omic_lﬂd_zu
(&
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
mëad©a_thp
,

2576 
ATOMIC_RELAXED
), 
size_t
)

2577 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_tˇche_byãs
,

2578 
	`©omic_lﬂd_zu
(&
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
tˇche_byãs
,

2579 
ATOMIC_RELAXED
), 
size_t
)

2580 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_ªsidít
,

2581 
	`©omic_lﬂd_zu
(&
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
ªsidít
, 
ATOMIC_RELAXED
),

2582 
size_t
)

2584 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_smÆl_Æloˇãd
,

2585 
	`¨ías_i
(
mib
[2])->
a°©s
->
Æloˇãd_smÆl
, 
size_t
)

2586 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_smÆl_nmÆloc
,

2587 
	`¨ías_i
(
mib
[2])->
a°©s
->
nmÆloc_smÆl
, 
uöt64_t
)

2588 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_smÆl_ndÆloc
,

2589 
	`¨ías_i
(
mib
[2])->
a°©s
->
ndÆloc_smÆl
, 
uöt64_t
)

2590 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_smÆl_ƒeque°s
,

2591 
	`¨ías_i
(
mib
[2])->
a°©s
->
ƒeque°s_smÆl
, 
uöt64_t
)

2592 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_œrge_Æloˇãd
,

2593 
	`©omic_lﬂd_zu
(&
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
Æloˇãd_œrge
,

2594 
ATOMIC_RELAXED
), 
size_t
)

2595 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_œrge_nmÆloc
,

2596 
	`˘l_¨ía_°©s_ªad_u64
(

2597 &
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
nmÆloc_œrge
), 
uöt64_t
)

2598 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_œrge_ndÆloc
,

2599 
	`˘l_¨ía_°©s_ªad_u64
(

2600 &
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
ndÆloc_œrge
), 
uöt64_t
)

2604 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_œrge_ƒeque°s
,

2605 
	`˘l_¨ía_°©s_ªad_u64
(

2606 &
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
nmÆloc_œrge
), 
uöt64_t
)

2609 
	#RO_MUTEX_CTL_GEN
(
n
, 
l
) \

2610 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_
##
n
##
_num_›s
, \

2611 
l
.
n_lock_›s
, 
uöt64_t
) \

2612 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_
##
n
##
_num_waô
, \

2613 
l
.
n_waô_times
, 
uöt64_t
) \

2614 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_
##
n
##
_num_•ö_acq
, \

2615 
l
.
n_•ö_acquúed
, 
uöt64_t
) \

2616 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_
##
n
##
_num_ow√r_swôch
, \

2617 
l
.
n_ow√r_swôches
, 
uöt64_t
) \

2618 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_
##
n
##
_tŸÆ_waô_time
, \

2619 
	`n°ime_ns
(&
l
.
tŸ_waô_time
), 
uöt64_t
) \

2620 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_
##
n
##
_max_waô_time
, \

2621 
	`n°ime_ns
(&
l
.
max_waô_time
), 
uöt64_t
) \

2622 
	`CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_
##
n
##
_max_num_thds
, \

2623 
l
.
max_n_thds
, 
uöt32_t
)

	)

2626 
	#OP
(
mtx
) \

2627 
	`RO_MUTEX_CTL_GEN
(
muãxes_
##
mtx
, \

2628 
˘l_°©s
->
muãx_¥of_d©a
[
globÆ_¥of_muãx_
##
mtx
])

	)

2629 
MUTEX_PROF_GLOBAL_MUTEXES


2630 #unde‡
OP


2633 
	#OP
(
mtx
Ë
	`RO_MUTEX_CTL_GEN
(
¨ías_i_muãxes_
##mtx, \

2634 
	`¨ías_i
(
mib
[2])->
a°©s
->a°©s.
muãx_¥of_d©a
[
¨ía_¥of_muãx_
##
mtx
])

	)

2635 
MUTEX_PROF_ARENA_MUTEXES


2636 #unde‡
OP


2639 
	`RO_MUTEX_CTL_GEN
(
¨ías_i_bös_j_muãx
,

2640 
	`¨ías_i
(
mib
[2])->
a°©s
->
b°©s
[mib[4]].
muãx_d©a
)

2641 #unde‡
RO_MUTEX_CTL_GEN


2645 
	$°©s_muãxes_ª£t_˘l
(
tsd_t
 *
tsd
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

2646 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
) {

2647 i‡(!
c⁄fig_°©s
) {

2648  
ENOENT
;

2651 
tsdn_t
 *
tsdn
 = 
	`tsd_tsdn
(
tsd
);

2653 
	#MUTEX_PROF_RESET
(
mtx
) \

2654 
	`mÆloc_muãx_lock
(
tsdn
, &
mtx
); \

2655 
	`mÆloc_muãx_¥of_d©a_ª£t
(
tsdn
, &
mtx
); \

2656 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
mtx
);

	)

2659 
	`MUTEX_PROF_RESET
(
˘l_mtx
);

2660 i‡(
have_background_thªad
) {

2661 
	`MUTEX_PROF_RESET
(
background_thªad_lock
);

2663 i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

2664 
	`MUTEX_PROF_RESET
(
bt2g˘x_mtx
);

2669 
n
 = 
	`«ª«s_tŸÆ_gë
();

2671 
i
 = 0; i < 
n
; i++) {

2672 
¨ía_t
 *
¨ía
 = 
	`¨ía_gë
(
tsdn
, 
i
, 
Ál£
);

2673 i‡(!
¨ía
) {

2676 
	`MUTEX_PROF_RESET
(
¨ía
->
œrge_mtx
);

2677 
	`MUTEX_PROF_RESET
(
¨ía
->
exã¡_avaû_mtx
);

2678 
	`MUTEX_PROF_RESET
(
¨ía
->
exã¡s_dúty
.
mtx
);

2679 
	`MUTEX_PROF_RESET
(
¨ía
->
exã¡s_muzzy
.
mtx
);

2680 
	`MUTEX_PROF_RESET
(
¨ía
->
exã¡s_ªèöed
.
mtx
);

2681 
	`MUTEX_PROF_RESET
(
¨ía
->
deˇy_dúty
.
mtx
);

2682 
	`MUTEX_PROF_RESET
(
¨ía
->
deˇy_muzzy
.
mtx
);

2683 
	`MUTEX_PROF_RESET
(
¨ía
->
tˇche_ql_mtx
);

2684 
	`MUTEX_PROF_RESET
(
¨ía
->
ba£
->
mtx
);

2686 
szöd_t
 
i
 = 0; i < 
NBINS
; i++) {

2687 
bö_t
 *
bö
 = &
¨ía
->
bös
[
i
];

2688 
	`MUTEX_PROF_RESET
(
bö
->
lock
);

2691 #unde‡
MUTEX_PROF_RESET


2693 
	}
}

2695 
CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_bös_j_nmÆloc
,

2696 
¨ías_i
(
mib
[2])->
a°©s
->
b°©s
[mib[4]].
nmÆloc
, 
uöt64_t
)

2697 
CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_bös_j_ndÆloc
,

2698 
¨ías_i
(
mib
[2])->
a°©s
->
b°©s
[mib[4]].
ndÆloc
, 
uöt64_t
)

2699 
CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_bös_j_ƒeque°s
,

2700 
¨ías_i
(
mib
[2])->
a°©s
->
b°©s
[mib[4]].
ƒeque°s
, 
uöt64_t
)

2701 
CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_bös_j_cuºegs
,

2702 
¨ías_i
(
mib
[2])->
a°©s
->
b°©s
[mib[4]].
cuºegs
, 
size_t
)

2703 
CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_bös_j_nfûls
,

2704 
¨ías_i
(
mib
[2])->
a°©s
->
b°©s
[mib[4]].
nfûls
, 
uöt64_t
)

2705 
CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_bös_j_nÊushes
,

2706 
¨ías_i
(
mib
[2])->
a°©s
->
b°©s
[mib[4]].
nÊushes
, 
uöt64_t
)

2707 
CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_bös_j_n¶abs
,

2708 
¨ías_i
(
mib
[2])->
a°©s
->
b°©s
[mib[4]].
n¶abs
, 
uöt64_t
)

2709 
CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_bös_j_ƒe¶abs
,

2710 
¨ías_i
(
mib
[2])->
a°©s
->
b°©s
[mib[4]].
ª¶abs
, 
uöt64_t
)

2711 
CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_bös_j_cur¶abs
,

2712 
¨ías_i
(
mib
[2])->
a°©s
->
b°©s
[mib[4]].
cur¶abs
, 
size_t
)

2714 c⁄° 
˘l_«med_node_t
 *

2715 
	$°©s_¨ías_i_bös_j_ödex
(
tsdn_t
 *
tsdn
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

2716 
size_t
 
j
) {

2717 i‡(
j
 > 
NBINS
) {

2718  
NULL
;

2720  
su≥r_°©s_¨ías_i_bös_j_node
;

2721 
	}
}

2723 
CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_Àxã¡s_j_nmÆloc
,

2724 
˘l_¨ía_°©s_ªad_u64
(

2725 &
¨ías_i
(
mib
[2])->
a°©s
->
l°©s
[mib[4]].
nmÆloc
), 
uöt64_t
)

2726 
CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_Àxã¡s_j_ndÆloc
,

2727 
˘l_¨ía_°©s_ªad_u64
(

2728 &
¨ías_i
(
mib
[2])->
a°©s
->
l°©s
[mib[4]].
ndÆloc
), 
uöt64_t
)

2729 
CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_Àxã¡s_j_ƒeque°s
,

2730 
˘l_¨ía_°©s_ªad_u64
(

2731 &
¨ías_i
(
mib
[2])->
a°©s
->
l°©s
[mib[4]].
ƒeque°s
), 
uöt64_t
)

2732 
CTL_RO_CGEN
(
c⁄fig_°©s
, 
°©s_¨ías_i_Àxã¡s_j_cuæexã¡s
,

2733 
¨ías_i
(
mib
[2])->
a°©s
->
l°©s
[mib[4]].
cuæexã¡s
, 
size_t
)

2735 c⁄° 
˘l_«med_node_t
 *

2736 
	$°©s_¨ías_i_Àxã¡s_j_ödex
(
tsdn_t
 *
tsdn
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

2737 
size_t
 
j
) {

2738 i‡(
j
 > 
NSIZES
 - 
NBINS
) {

2739  
NULL
;

2741  
su≥r_°©s_¨ías_i_Àxã¡s_j_node
;

2742 
	}
}

2744 c⁄° 
˘l_«med_node_t
 *

2745 
	$°©s_¨ías_i_ödex
(
tsdn_t
 *
tsdn
, c⁄° 
size_t
 *
mib
, size_à
mibÀn
, size_à
i
) {

2746 c⁄° 
˘l_«med_node_t
 *
ªt
;

2747 
size_t
 
a
;

2749 
	`mÆloc_muãx_lock
(
tsdn
, &
˘l_mtx
);

2750 
a
 = 
	`¨ías_i2a_im∂
(
i
, 
åue
,Årue);

2751 i‡(
a
 =
UINT_MAX
 || !
˘l_¨ías
->
¨ías
[a]->
öôülized
) {

2752 
ªt
 = 
NULL
;

2753 
œbñ_ªtu∫
;

2756 
ªt
 = 
su≥r_°©s_¨ías_i_node
;

2757 
œbñ_ªtu∫
:

2758 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
˘l_mtx
);

2759  
ªt
;

2760 
	}
}

	@src/div.c

1 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/div.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

30 
	$div_öô
(
div_öfo_t
 *
div_öfo
, 
size_t
 
d
) {

32 
	`as£π
(
d
 != 0);

38 
	`as£π
(
d
 != 1);

40 
uöt64_t
 
two_to_k
 = ((uint64_t)1 << 32);

41 
uöt32_t
 
magic
 = (uöt32_t)(
two_to_k
 / 
d
);

48 i‡(
two_to_k
 % 
d
 != 0) {

49 
magic
++;

51 
div_öfo
->
magic
 = magic;

52 #ifde‡
JEMALLOC_DEBUG


53 
div_öfo
->
d
 = d;

55 
	}
}

	@src/extent.c

1 
	#JEMALLOC_EXTENT_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/exã¡_dss.h
"

7 
	~"jemÆloc/öã∫Æ/exã¡_mm≠.h
"

8 
	~"jemÆloc/öã∫Æ/ph.h
"

9 
	~"jemÆloc/öã∫Æ/πªe.h
"

10 
	~"jemÆloc/öã∫Æ/muãx.h
"

11 
	~"jemÆloc/öã∫Æ/muãx_poﬁ.h
"

16 
πªe_t
 
	gexã¡s_πªe
;

18 
muãx_poﬁ_t
 
	gexã¡_muãx_poﬁ
;

20 
size_t
 
	g›t_lg_exã¡_max_a˘ive_fô
 = 
LG_EXTENT_MAX_ACTIVE_FIT_DEFAULT
;

22 c⁄° 
bôm≠_öfo_t
 
	gexã¡s_bôm≠_öfo
 =

23 
BITMAP_INFO_INITIALIZER
(
NPSIZES
+1);

25 *
exã¡_Æloc_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
√w_addr
,

26 
size_t
 
size
, size_à
Æignmít
, 
boﬁ
 *
zîo
, boﬁ *
commô
,

27 
¨ía_öd
);

28 
boﬁ
 
exã¡_dÆloc_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
,

29 
size_t
 
size
, 
boﬁ
 
commôãd
, 
¨ía_öd
);

30 
exã¡_de°roy_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
,

31 
size_t
 
size
, 
boﬁ
 
commôãd
, 
¨ía_öd
);

32 
boﬁ
 
exã¡_commô_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
,

33 
size_t
 
size
, size_à
off£t
, size_à
Àngth
, 
¨ía_öd
);

34 
boﬁ
 
exã¡_commô_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

35 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
off£t
,

36 
size_t
 
Àngth
, 
boﬁ
 
growög_ªèöed
);

37 
boﬁ
 
exã¡_decommô_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
,

38 *
addr
, 
size_t
 
size
, size_à
off£t
, size_à
Àngth
, 
¨ía_öd
);

39 #ifde‡
PAGES_CAN_PURGE_LAZY


40 
boﬁ
 
exã¡_purge_œzy_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
,

41 
size_t
 
size
, size_à
off£t
, size_à
Àngth
, 
¨ía_öd
);

43 
boﬁ
 
exã¡_purge_œzy_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

44 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
off£t
,

45 
size_t
 
Àngth
, 
boﬁ
 
growög_ªèöed
);

46 #ifde‡
PAGES_CAN_PURGE_FORCED


47 
boﬁ
 
exã¡_purge_f‹˚d_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
,

48 *
addr
, 
size_t
 
size
, size_à
off£t
, size_à
Àngth
, 
¨ía_öd
);

50 
boﬁ
 
exã¡_purge_f‹˚d_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

51 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
off£t
,

52 
size_t
 
Àngth
, 
boﬁ
 
growög_ªèöed
);

53 #ifde‡
JEMALLOC_MAPS_COALESCE


54 
boﬁ
 
exã¡_•lô_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
,

55 
size_t
 
size
, size_à
size_a
, size_à
size_b
, 
boﬁ
 
commôãd
,

56 
¨ía_öd
);

58 
exã¡_t
 *
exã¡_•lô_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

59 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
size_a
,

60 
szöd_t
 
szöd_a
, 
boﬁ
 
¶ab_a
, 
size_t
 
size_b
, szöd_à
szöd_b
, boﬁ 
¶ab_b
,

61 
boﬁ
 
growög_ªèöed
);

62 #ifde‡
JEMALLOC_MAPS_COALESCE


63 
boﬁ
 
exã¡_mîge_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr_a
,

64 
size_t
 
size_a
, *
addr_b
, size_à
size_b
, 
boﬁ
 
commôãd
,

65 
¨ía_öd
);

67 
boﬁ
 
exã¡_mîge_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

68 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
a
,Éxã¡_à*
b
,

69 
boﬁ
 
growög_ªèöed
);

71 c⁄° 
exã¡_hooks_t
 
	gexã¡_hooks_deÁu…
 = {

72 
exã¡_Æloc_deÁu…
,

73 
exã¡_dÆloc_deÁu…
,

74 
exã¡_de°roy_deÁu…
,

75 
exã¡_commô_deÁu…
,

76 
exã¡_decommô_deÁu…


77 #ifde‡
PAGES_CAN_PURGE_LAZY


79 
exã¡_purge_œzy_deÁu…


82 
NULL


84 #ifde‡
PAGES_CAN_PURGE_FORCED


86 
exã¡_purge_f‹˚d_deÁu…


89 
NULL


91 #ifde‡
JEMALLOC_MAPS_COALESCE


93 
exã¡_•lô_deÁu…
,

94 
exã¡_mîge_deÁu…


99 
©omic_zu_t
 
	gcuΩages
;

100 
©omic_zu_t
 
	ghigh∑ges
;

108 
exã¡_dîegi°î
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
);

109 
exã¡_t
 *
exã¡_ªcy˛e
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

110 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡s_t
 *
exã¡s
, *
√w_addr
,

111 
size_t
 
usize
, size_à
∑d
, size_à
Æignmít
, 
boﬁ
 
¶ab
, 
szöd_t
 
szöd
,

112 
boﬁ
 *
zîo
, boﬁ *
commô
, boﬁ 
growög_ªèöed
);

113 
exã¡_t
 *
exã¡_åy_cﬂÀs˚
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

114 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
πªe_˘x_t
 *
πªe_˘x
, 
exã¡s_t
 *
exã¡s
,

115 
exã¡_t
 *
exã¡
, 
boﬁ
 *
cﬂÀs˚d
, boﬁ 
growög_ªèöed
);

116 
exã¡_ªc‹d
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

117 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡s_t
 *
exã¡s
, 
exã¡_t
 *
exã¡
,

118 
boﬁ
 
growög_ªèöed
);

122 
	$ph_gí
(
UNUSED
, 
exã¡_avaû_
, 
exã¡_åì_t
, 
exã¡_t
, 
ph_lök
,

123 
exã¡_e¢ód_comp
)

126 
lock_ªsu…_suc˚ss
,

127 
lock_ªsu…_Áûuª
,

128 
lock_ªsu…_no_exã¡


129 } 
	tlock_ªsu…_t
;

131 
lock_ªsu…_t


132 
	$exã¡_πªe_Àaf_ñm_åy_lock
(
tsdn_t
 *
tsdn
, 
πªe_Àaf_ñm_t
 *
ñm
,

133 
exã¡_t
 **
ªsu…
) {

134 
exã¡_t
 *
exã¡1
 = 
	`πªe_Àaf_ñm_exã¡_ªad
(
tsdn
, &
exã¡s_πªe
,

135 
ñm
, 
åue
);

137 i‡(
exã¡1
 =
NULL
) {

138  
lock_ªsu…_no_exã¡
;

144 
	`exã¡_lock
(
tsdn
, 
exã¡1
);

145 
exã¡_t
 *
exã¡2
 = 
	`πªe_Àaf_ñm_exã¡_ªad
(
tsdn
,

146 &
exã¡s_πªe
, 
ñm
, 
åue
);

148 i‡(
exã¡1
 =
exã¡2
) {

149 *
ªsu…
 = 
exã¡1
;

150  
lock_ªsu…_suc˚ss
;

152 
	`exã¡_u∆ock
(
tsdn
, 
exã¡1
);

153  
lock_ªsu…_Áûuª
;

155 
	}
}

161 
exã¡_t
 *

162 
	$exã¡_lock_‰om_addr
(
tsdn_t
 *
tsdn
, 
πªe_˘x_t
 *
πªe_˘x
, *
addr
) {

163 
exã¡_t
 *
ªt
 = 
NULL
;

164 
πªe_Àaf_ñm_t
 *
ñm
 = 
	`πªe_Àaf_ñm_lookup
(
tsdn
, &
exã¡s_πªe
,

165 
πªe_˘x
, (
uöçå_t
)
addr
, 
Ál£
, false);

166 i‡(
ñm
 =
NULL
) {

167  
NULL
;

169 
lock_ªsu…_t
 
lock_ªsu…
;

171 
lock_ªsu…
 = 
	`exã¡_πªe_Àaf_ñm_åy_lock
(
tsdn
, 
ñm
, &
ªt
);

172 } 
lock_ªsu…
 =
lock_ªsu…_Áûuª
);

173  
ªt
;

174 
	}
}

176 
exã¡_t
 *

177 
	$exã¡_Æloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

178 
	`mÆloc_muãx_lock
(
tsdn
, &
¨ía
->
exã¡_avaû_mtx
);

179 
exã¡_t
 *
exã¡
 = 
	`exã¡_avaû_fú°
(&
¨ía
->
exã¡_avaû
);

180 i‡(
exã¡
 =
NULL
) {

181 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ía
->
exã¡_avaû_mtx
);

182  
	`ba£_Æloc_exã¡
(
tsdn
, 
¨ía
->
ba£
);

184 
	`exã¡_avaû_ªmove
(&
¨ía
->
exã¡_avaû
, 
exã¡
);

185 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ía
->
exã¡_avaû_mtx
);

186  
exã¡
;

187 
	}
}

190 
	$exã¡_dÆloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
exã¡
) {

191 
	`mÆloc_muãx_lock
(
tsdn
, &
¨ía
->
exã¡_avaû_mtx
);

192 
	`exã¡_avaû_ö£π
(&
¨ía
->
exã¡_avaû
, 
exã¡
);

193 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ía
->
exã¡_avaû_mtx
);

194 
	}
}

196 
exã¡_hooks_t
 *

197 
	$exã¡_hooks_gë
(
¨ía_t
 *
¨ía
) {

198  
	`ba£_exã¡_hooks_gë
(
¨ía
->
ba£
);

199 
	}
}

201 
exã¡_hooks_t
 *

202 
	$exã¡_hooks_£t
(
tsd_t
 *
tsd
, 
¨ía_t
 *
¨ía
, 
exã¡_hooks_t
 *
exã¡_hooks
) {

203 
background_thªad_öfo_t
 *
öfo
;

204 i‡(
have_background_thªad
) {

205 
öfo
 = 
	`¨ía_background_thªad_öfo_gë
(
¨ía
);

206 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

208 
exã¡_hooks_t
 *
ªt
 = 
	`ba£_exã¡_hooks_£t
(
¨ía
->
ba£
, 
exã¡_hooks
);

209 i‡(
have_background_thªad
) {

210 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

213  
ªt
;

214 
	}
}

217 
	$exã¡_hooks_assuª_öôülized
(
¨ía_t
 *
¨ía
,

218 
exã¡_hooks_t
 **
r_exã¡_hooks
) {

219 i‡(*
r_exã¡_hooks
 =
EXTENT_HOOKS_INITIALIZER
) {

220 *
r_exã¡_hooks
 = 
	`exã¡_hooks_gë
(
¨ía
);

222 
	}
}

224 #i‚de‡
JEMALLOC_JET


227 
size_t


228 
	$exã¡_size_qu™tize_Êo‹
(
size_t
 
size
) {

229 
size_t
 
ªt
;

230 
pszöd_t
 
pöd
;

232 
	`as£π
(
size
 > 0);

233 
	`as£π
((
size
 & 
PAGE_MASK
) == 0);

235 
pöd
 = 
	`sz_psz2öd
(
size
 - 
sz_œrge_∑d
 + 1);

236 i‡(
pöd
 == 0) {

243  
size
;

245 
ªt
 = 
	`sz_pöd2sz
(
pöd
 - 1Ë+ 
sz_œrge_∑d
;

246 
	`as£π
(
ªt
 <
size
);

247  
ªt
;

248 
	}
}

250 #i‚de‡
JEMALLOC_JET


253 
size_t


254 
	$exã¡_size_qu™tize_˚û
(
size_t
 
size
) {

255 
size_t
 
ªt
;

257 
	`as£π
(
size
 > 0);

258 
	`as£π
(
size
 - 
sz_œrge_∑d
 <
LARGE_MAXCLASS
);

259 
	`as£π
((
size
 & 
PAGE_MASK
) == 0);

261 
ªt
 = 
	`exã¡_size_qu™tize_Êo‹
(
size
);

262 i‡(
ªt
 < 
size
) {

271 
ªt
 = 
	`sz_pöd2sz
(
	`sz_psz2öd
‘ë - 
sz_œrge_∑d
 + 1)) +

272 
sz_œrge_∑d
;

274  
ªt
;

275 
	}
}

278 
	$ph_gí
(, 
exã¡_hóp_
, 
exã¡_hóp_t
, 
exã¡_t
, 
ph_lök
, 
exã¡_¢ad_comp
)

280 
boﬁ


281 
	$exã¡s_öô
(
tsdn_t
 *
tsdn
, 
exã¡s_t
 *
exã¡s
, 
exã¡_°©e_t
 
°©e
,

282 
boﬁ
 
dñay_cﬂÀs˚
) {

283 i‡(
	`mÆloc_muãx_öô
(&
exã¡s
->
mtx
, "exã¡s", 
WITNESS_RANK_EXTENTS
,

284 
mÆloc_muãx_ønk_ex˛usive
)) {

285  
åue
;

287 
i
 = 0; i < 
NPSIZES
+1; i++) {

288 
	`exã¡_hóp_√w
(&
exã¡s
->
hóps
[
i
]);

290 
	`bôm≠_öô
(
exã¡s
->
bôm≠
, &
exã¡s_bôm≠_öfo
, 
åue
);

291 
	`exã¡_li°_öô
(&
exã¡s
->
Ãu
);

292 
	`©omic_°‹e_zu
(&
exã¡s
->
≈ages
, 0, 
ATOMIC_RELAXED
);

293 
exã¡s
->
°©e
 = state;

294 
exã¡s
->
dñay_cﬂÀs˚
 = delay_coalesce;

295  
Ál£
;

296 
	}
}

298 
exã¡_°©e_t


299 
	$exã¡s_°©e_gë
(c⁄° 
exã¡s_t
 *
exã¡s
) {

300  
exã¡s
->
°©e
;

301 
	}
}

303 
size_t


304 
	$exã¡s_≈ages_gë
(
exã¡s_t
 *
exã¡s
) {

305  
	`©omic_lﬂd_zu
(&
exã¡s
->
≈ages
, 
ATOMIC_RELAXED
);

306 
	}
}

309 
	$exã¡s_ö£π_locked
(
tsdn_t
 *
tsdn
, 
exã¡s_t
 *
exã¡s
, 
exã¡_t
 *
exã¡
,

310 
boﬁ
 
¥e£rve_Ãu
) {

311 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
exã¡s
->
mtx
);

312 
	`as£π
(
	`exã¡_°©e_gë
(
exã¡
Ë=
exã¡s
->
°©e
);

314 
size_t
 
size
 = 
	`exã¡_size_gë
(
exã¡
);

315 
size_t
 
psz
 = 
	`exã¡_size_qu™tize_Êo‹
(
size
);

316 
pszöd_t
 
pöd
 = 
	`sz_psz2öd
(
psz
);

317 i‡(
	`exã¡_hóp_em±y
(&
exã¡s
->
hóps
[
pöd
])) {

318 
	`bôm≠_un£t
(
exã¡s
->
bôm≠
, &
exã¡s_bôm≠_öfo
,

319 (
size_t
)
pöd
);

321 
	`exã¡_hóp_ö£π
(&
exã¡s
->
hóps
[
pöd
], 
exã¡
);

322 i‡(!
¥e£rve_Ãu
) {

323 
	`exã¡_li°_≠≥nd
(&
exã¡s
->
Ãu
, 
exã¡
);

325 
size_t
 
≈ages
 = 
size
 >> 
LG_PAGE
;

331 
size_t
 
cur_exã¡s_≈ages
 =

332 
	`©omic_lﬂd_zu
(&
exã¡s
->
≈ages
, 
ATOMIC_RELAXED
);

333 
	`©omic_°‹e_zu
(&
exã¡s
->
≈ages
, 
cur_exã¡s_≈ages
 +Çpages,

334 
ATOMIC_RELAXED
);

335 
	}
}

338 
	$exã¡s_ªmove_locked
(
tsdn_t
 *
tsdn
, 
exã¡s_t
 *
exã¡s
, 
exã¡_t
 *
exã¡
,

339 
boﬁ
 
¥e£rve_Ãu
) {

340 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
exã¡s
->
mtx
);

341 
	`as£π
(
	`exã¡_°©e_gë
(
exã¡
Ë=
exã¡s
->
°©e
);

343 
size_t
 
size
 = 
	`exã¡_size_gë
(
exã¡
);

344 
size_t
 
psz
 = 
	`exã¡_size_qu™tize_Êo‹
(
size
);

345 
pszöd_t
 
pöd
 = 
	`sz_psz2öd
(
psz
);

346 
	`exã¡_hóp_ªmove
(&
exã¡s
->
hóps
[
pöd
], 
exã¡
);

347 i‡(
	`exã¡_hóp_em±y
(&
exã¡s
->
hóps
[
pöd
])) {

348 
	`bôm≠_£t
(
exã¡s
->
bôm≠
, &
exã¡s_bôm≠_öfo
,

349 (
size_t
)
pöd
);

351 i‡(!
¥e£rve_Ãu
) {

352 
	`exã¡_li°_ªmove
(&
exã¡s
->
Ãu
, 
exã¡
);

354 
size_t
 
≈ages
 = 
size
 >> 
LG_PAGE
;

359 
size_t
 
cur_exã¡s_≈ages
 =

360 
	`©omic_lﬂd_zu
(&
exã¡s
->
≈ages
, 
ATOMIC_RELAXED
);

361 
	`as£π
(
cur_exã¡s_≈ages
 >
≈ages
);

362 
	`©omic_°‹e_zu
(&
exã¡s
->
≈ages
,

363 
cur_exã¡s_≈ages
 - (
size
 >> 
LG_PAGE
), 
ATOMIC_RELAXED
);

364 
	}
}

370 
exã¡_t
 *

371 
	$exã¡s_fô_Æignmít
(
exã¡s_t
 *
exã¡s
, 
size_t
 
mö_size
, size_à
max_size
,

372 
size_t
 
Æignmít
) {

373 
pszöd_t
 
pöd
 = 
	`sz_psz2öd
(
	`exã¡_size_qu™tize_˚û
(
mö_size
));

374 
pszöd_t
 
pöd_max
 = 
	`sz_psz2öd
(
	`exã¡_size_qu™tize_˚û
(
max_size
));

376 
pszöd_t
 
i
 = (pszöd_t)
	`bôm≠_ffu
(
exã¡s
->
bôm≠
,

377 &
exã¡s_bôm≠_öfo
, (
size_t
)
pöd
); 
i
 < 
pöd_max
; i =

378 (
pszöd_t
)
	`bôm≠_ffu
(
exã¡s
->
bôm≠
, &
exã¡s_bôm≠_öfo
,

379 (
size_t
)
i
+1)) {

380 
	`as£π
(
i
 < 
NPSIZES
);

381 
	`as£π
(!
	`exã¡_hóp_em±y
(&
exã¡s
->
hóps
[
i
]));

382 
exã¡_t
 *
exã¡
 = 
	`exã¡_hóp_fú°
(&
exã¡s
->
hóps
[
i
]);

383 
uöçå_t
 
ba£
 = (uöçå_t)
	`exã¡_ba£_gë
(
exã¡
);

384 
size_t
 
ˇndid©e_size
 = 
	`exã¡_size_gë
(
exã¡
);

385 
	`as£π
(
ˇndid©e_size
 >
mö_size
);

387 
uöçå_t
 
√xt_Æign
 = 
	`ALIGNMENT_CEILING
((uöçå_t)
ba£
,

388 
	`PAGE_CEILING
(
Æignmít
));

389 i‡(
ba£
 > 
√xt_Æign
 || ba£ + 
ˇndid©e_size
 <=Çext_align) {

394 
size_t
 
Àadsize
 = 
√xt_Æign
 - 
ba£
;

395 i‡(
ˇndid©e_size
 - 
Àadsize
 >
mö_size
) {

396  
exã¡
;

400  
NULL
;

401 
	}
}

404 
exã¡_t
 *

405 
	$exã¡s_be°_fô_locked
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡s_t
 *
exã¡s
,

406 
size_t
 
size
) {

407 
pszöd_t
 
pöd
 = 
	`sz_psz2öd
(
	`exã¡_size_qu™tize_˚û
(
size
));

408 
pszöd_t
 
i
 = (pszöd_t)
	`bôm≠_ffu
(
exã¡s
->
bôm≠
, &
exã¡s_bôm≠_öfo
,

409 (
size_t
)
pöd
);

410 i‡(
i
 < 
NPSIZES
+1) {

415 i‡((
	`sz_pöd2sz
(
i
Ë>> 
›t_lg_exã¡_max_a˘ive_fô
Ë> 
size
) {

416  
NULL
;

418 
	`as£π
(!
	`exã¡_hóp_em±y
(&
exã¡s
->
hóps
[
i
]));

419 
exã¡_t
 *
exã¡
 = 
	`exã¡_hóp_fú°
(&
exã¡s
->
hóps
[
i
]);

420 
	`as£π
(
	`exã¡_size_gë
(
exã¡
Ë>
size
);

421  
exã¡
;

424  
NULL
;

425 
	}
}

431 
exã¡_t
 *

432 
	$exã¡s_fú°_fô_locked
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡s_t
 *
exã¡s
,

433 
size_t
 
size
) {

434 
exã¡_t
 *
ªt
 = 
NULL
;

436 
pszöd_t
 
pöd
 = 
	`sz_psz2öd
(
	`exã¡_size_qu™tize_˚û
(
size
));

437 
pszöd_t
 
i
 = (pszöd_t)
	`bôm≠_ffu
(
exã¡s
->
bôm≠
,

438 &
exã¡s_bôm≠_öfo
, (
size_t
)
pöd
); 
i
 < 
NPSIZES
+1; i =

439 (
pszöd_t
)
	`bôm≠_ffu
(
exã¡s
->
bôm≠
, &
exã¡s_bôm≠_öfo
,

440 (
size_t
)
i
+1)) {

441 
	`as£π
(!
	`exã¡_hóp_em±y
(&
exã¡s
->
hóps
[
i
]));

442 
exã¡_t
 *
exã¡
 = 
	`exã¡_hóp_fú°
(&
exã¡s
->
hóps
[
i
]);

443 
	`as£π
(
	`exã¡_size_gë
(
exã¡
Ë>
size
);

444 i‡(
ªt
 =
NULL
 || 
	`exã¡_¢ad_comp
(
exã¡
,Ñet) < 0) {

445 
ªt
 = 
exã¡
;

447 i‡(
i
 =
NPSIZES
) {

450 
	`as£π
(
i
 < 
NPSIZES
);

453  
ªt
;

454 
	}
}

462 
exã¡_t
 *

463 
	$exã¡s_fô_locked
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡s_t
 *
exã¡s
,

464 
size_t
 
esize
, size_à
Æignmít
) {

465 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
exã¡s
->
mtx
);

467 
size_t
 
max_size
 = 
esize
 + 
	`PAGE_CEILING
(
Æignmít
Ë- 
PAGE
;

469 i‡(
max_size
 < 
esize
) {

470  
NULL
;

473 
exã¡_t
 *
exã¡
 = 
exã¡s
->
dñay_cﬂÀs˚
 ?

474 
	`exã¡s_be°_fô_locked
(
tsdn
, 
¨ía
, 
exã¡s
, 
max_size
) :

475 
	`exã¡s_fú°_fô_locked
(
tsdn
, 
¨ía
, 
exã¡s
, 
max_size
);

477 i‡(
Æignmít
 > 
PAGE
 && 
exã¡
 =
NULL
) {

483 
exã¡
 = 
	`exã¡s_fô_Æignmít
(
exã¡s
, 
esize
, 
max_size
,

484 
Æignmít
);

487  
exã¡
;

488 
	}
}

490 
boﬁ


491 
	$exã¡_åy_dñayed_cﬂÀs˚
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

492 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
πªe_˘x_t
 *
πªe_˘x
, 
exã¡s_t
 *
exã¡s
,

493 
exã¡_t
 *
exã¡
) {

494 
	`exã¡_°©e_£t
(
exã¡
, 
exã¡_°©e_a˘ive
);

495 
boﬁ
 
cﬂÀs˚d
;

496 
exã¡
 = 
	`exã¡_åy_cﬂÀs˚
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
πªe_˘x
,

497 
exã¡s
, 
exã¡
, &
cﬂÀs˚d
, 
Ál£
);

498 
	`exã¡_°©e_£t
(
exã¡
, 
	`exã¡s_°©e_gë
(
exã¡s
));

500 i‡(!
cﬂÀs˚d
) {

501  
åue
;

503 
	`exã¡s_ö£π_locked
(
tsdn
, 
exã¡s
, 
exã¡
, 
åue
);

504  
Ál£
;

505 
	}
}

507 
exã¡_t
 *

508 
	$exã¡s_Æloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_hooks_t
 **
r_exã¡_hooks
,

509 
exã¡s_t
 *
exã¡s
, *
√w_addr
, 
size_t
 
size
, size_à
∑d
,

510 
size_t
 
Æignmít
, 
boﬁ
 
¶ab
, 
szöd_t
 
szöd
, boﬁ *
zîo
, boﬁ *
commô
) {

511 
	`as£π
(
size
 + 
∑d
 != 0);

512 
	`as£π
(
Æignmít
 != 0);

513 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

514 
WITNESS_RANK_CORE
, 0);

516 
exã¡_t
 *
exã¡
 = 
	`exã¡_ªcy˛e
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
exã¡s
,

517 
√w_addr
, 
size
, 
∑d
, 
Æignmít
, 
¶ab
, 
szöd
, 
zîo
, 
commô
, 
Ál£
);

518 
	`as£π
(
exã¡
 =
NULL
 || 
	`exã¡_dum∑bÀ_gë
(extent));

519  
exã¡
;

520 
	}
}

523 
	$exã¡s_dÆloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_hooks_t
 **
r_exã¡_hooks
,

524 
exã¡s_t
 *
exã¡s
, 
exã¡_t
 *
exã¡
) {

525 
	`as£π
(
	`exã¡_ba£_gë
(
exã¡
Ë!
NULL
);

526 
	`as£π
(
	`exã¡_size_gë
(
exã¡
) != 0);

527 
	`as£π
(
	`exã¡_dum∑bÀ_gë
(
exã¡
));

528 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

529 
WITNESS_RANK_CORE
, 0);

531 
	`exã¡_addr_£t
(
exã¡
, 
	`exã¡_ba£_gë
(extent));

532 
	`exã¡_zî€d_£t
(
exã¡
, 
Ál£
);

534 
	`exã¡_ªc‹d
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
exã¡s
, 
exã¡
, 
Ál£
);

535 
	}
}

537 
exã¡_t
 *

538 
	$exã¡s_evi˘
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_hooks_t
 **
r_exã¡_hooks
,

539 
exã¡s_t
 *
exã¡s
, 
size_t
 
≈ages_mö
) {

540 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

541 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

543 
	`mÆloc_muãx_lock
(
tsdn
, &
exã¡s
->
mtx
);

549 
exã¡_t
 *
exã¡
;

550 
åue
) {

552 
exã¡
 = 
	`exã¡_li°_fú°
(&
exã¡s
->
Ãu
);

553 i‡(
exã¡
 =
NULL
) {

554 
œbñ_ªtu∫
;

557 
size_t
 
exã¡s_≈ages
 = 
	`©omic_lﬂd_zu
(&
exã¡s
->
≈ages
,

558 
ATOMIC_RELAXED
);

559 i‡(
exã¡s_≈ages
 <
≈ages_mö
) {

560 
exã¡
 = 
NULL
;

561 
œbñ_ªtu∫
;

563 
	`exã¡s_ªmove_locked
(
tsdn
, 
exã¡s
, 
exã¡
, 
Ál£
);

564 i‡(!
exã¡s
->
dñay_cﬂÀs˚
) {

568 i‡(
	`exã¡_åy_dñayed_cﬂÀs˚
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

569 
πªe_˘x
, 
exã¡s
, 
exã¡
)) {

582 
	`exã¡s_°©e_gë
(
exã¡s
)) {

583 
exã¡_°©e_a˘ive
:

584 
	`nŸ_ªached
();

585 
exã¡_°©e_dúty
:

586 
exã¡_°©e_muzzy
:

587 
	`exã¡_°©e_£t
(
exã¡
, 
exã¡_°©e_a˘ive
);

589 
exã¡_°©e_ªèöed
:

590 
	`exã¡_dîegi°î
(
tsdn
, 
exã¡
);

593 
	`nŸ_ªached
();

596 
œbñ_ªtu∫
:

597 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
exã¡s
->
mtx
);

598  
exã¡
;

599 
	}
}

602 
	$exã¡s_Àak
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_hooks_t
 **
r_exã¡_hooks
,

603 
exã¡s_t
 *
exã¡s
, 
exã¡_t
 *
exã¡
, 
boﬁ
 
growög_ªèöed
) {

608 i‡(
	`exã¡s_°©e_gë
(
exã¡s
Ë=
exã¡_°©e_dúty
) {

609 i‡(
	`exã¡_purge_œzy_im∂
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

610 
exã¡
, 0, 
	`exã¡_size_gë
”xã¡), 
growög_ªèöed
)) {

611 
	`exã¡_purge_f‹˚d_im∂
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

612 
exã¡
, 0, 
	`exã¡_size_gë
(extent),

613 
growög_ªèöed
);

616 
	`exã¡_dÆloc
(
tsdn
, 
¨ía
, 
exã¡
);

617 
	}
}

620 
	$exã¡s_¥ef‹k
(
tsdn_t
 *
tsdn
, 
exã¡s_t
 *
exã¡s
) {

621 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
exã¡s
->
mtx
);

622 
	}
}

625 
	$exã¡s_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
, 
exã¡s_t
 *
exã¡s
) {

626 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
exã¡s
->
mtx
);

627 
	}
}

630 
	$exã¡s_po°f‹k_chûd
(
tsdn_t
 *
tsdn
, 
exã¡s_t
 *
exã¡s
) {

631 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
exã¡s
->
mtx
);

632 
	}
}

635 
	$exã¡_dó˘iv©e_locked
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡s_t
 *
exã¡s
,

636 
exã¡_t
 *
exã¡
, 
boﬁ
 
¥e£rve_Ãu
) {

637 
	`as£π
(
	`exã¡_¨ía_gë
(
exã¡
Ë=
¨ía
);

638 
	`as£π
(
	`exã¡_°©e_gë
(
exã¡
Ë=
exã¡_°©e_a˘ive
);

640 
	`exã¡_°©e_£t
(
exã¡
, 
	`exã¡s_°©e_gë
(
exã¡s
));

641 
	`exã¡s_ö£π_locked
(
tsdn
, 
exã¡s
, 
exã¡
, 
¥e£rve_Ãu
);

642 
	}
}

645 
	$exã¡_dó˘iv©e
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡s_t
 *
exã¡s
,

646 
exã¡_t
 *
exã¡
, 
boﬁ
 
¥e£rve_Ãu
) {

647 
	`mÆloc_muãx_lock
(
tsdn
, &
exã¡s
->
mtx
);

648 
	`exã¡_dó˘iv©e_locked
(
tsdn
, 
¨ía
, 
exã¡s
, 
exã¡
, 
¥e£rve_Ãu
);

649 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
exã¡s
->
mtx
);

650 
	}
}

653 
	$exã¡_a˘iv©e_locked
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡s_t
 *
exã¡s
,

654 
exã¡_t
 *
exã¡
, 
boﬁ
 
¥e£rve_Ãu
) {

655 
	`as£π
(
	`exã¡_¨ía_gë
(
exã¡
Ë=
¨ía
);

656 
	`as£π
(
	`exã¡_°©e_gë
(
exã¡
Ë=
	`exã¡s_°©e_gë
(
exã¡s
));

658 
	`exã¡s_ªmove_locked
(
tsdn
, 
exã¡s
, 
exã¡
, 
¥e£rve_Ãu
);

659 
	`exã¡_°©e_£t
(
exã¡
, 
exã¡_°©e_a˘ive
);

660 
	}
}

662 
boﬁ


663 
	$exã¡_πªe_Àaf_ñms_lookup
(
tsdn_t
 *
tsdn
, 
πªe_˘x_t
 *
πªe_˘x
,

664 c⁄° 
exã¡_t
 *
exã¡
, 
boﬁ
 
dïídít
, boﬁ 
öô_missög
,

665 
πªe_Àaf_ñm_t
 **
r_ñm_a
,Ñåì_Àaf_ñm_à**
r_ñm_b
) {

666 *
r_ñm_a
 = 
	`πªe_Àaf_ñm_lookup
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

667 (
uöçå_t
)
	`exã¡_ba£_gë
(
exã¡
), 
dïídít
, 
öô_missög
);

668 i‡(!
dïídít
 && *
r_ñm_a
 =
NULL
) {

669  
åue
;

671 
	`as£π
(*
r_ñm_a
 !
NULL
);

673 *
r_ñm_b
 = 
	`πªe_Àaf_ñm_lookup
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

674 (
uöçå_t
)
	`exã¡_œ°_gë
(
exã¡
), 
dïídít
, 
öô_missög
);

675 i‡(!
dïídít
 && *
r_ñm_b
 =
NULL
) {

676  
åue
;

678 
	`as£π
(*
r_ñm_b
 !
NULL
);

680  
Ál£
;

681 
	}
}

684 
	$exã¡_πªe_wrôe_acquúed
(
tsdn_t
 *
tsdn
, 
πªe_Àaf_ñm_t
 *
ñm_a
,

685 
πªe_Àaf_ñm_t
 *
ñm_b
, 
exã¡_t
 *
exã¡
, 
szöd_t
 
szöd
, 
boﬁ
 
¶ab
) {

686 
	`πªe_Àaf_ñm_wrôe
(
tsdn
, &
exã¡s_πªe
, 
ñm_a
, 
exã¡
, 
szöd
, 
¶ab
);

687 i‡(
ñm_b
 !
NULL
) {

688 
	`πªe_Àaf_ñm_wrôe
(
tsdn
, &
exã¡s_πªe
, 
ñm_b
, 
exã¡
, 
szöd
,

689 
¶ab
);

691 
	}
}

694 
	$exã¡_öãri‹_ªgi°î
(
tsdn_t
 *
tsdn
, 
πªe_˘x_t
 *
πªe_˘x
, 
exã¡_t
 *
exã¡
,

695 
szöd_t
 
szöd
) {

696 
	`as£π
(
	`exã¡_¶ab_gë
(
exã¡
));

699 
size_t
 
i
 = 1; i < (
	`exã¡_size_gë
(
exã¡
Ë>> 
LG_PAGE
) - 1; i++) {

700 
	`πªe_wrôe
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

701 (
uöçå_t
)
	`exã¡_ba£_gë
(
exã¡
Ë+ (uöçå_t)(
i
 <<

702 
LG_PAGE
), 
exã¡
, 
szöd
, 
åue
);

704 
	}
}

707 
	$exã¡_gdump_add
(
tsdn_t
 *
tsdn
, c⁄° 
exã¡_t
 *
exã¡
) {

708 
	`ˇs£π
(
c⁄fig_¥of
);

710 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

711 
WITNESS_RANK_CORE
, 0);

713 i‡(
›t_¥of
 && 
	`exã¡_°©e_gë
(
exã¡
Ë=
exã¡_°©e_a˘ive
) {

714 
size_t
 
«dd
 = 
	`exã¡_size_gë
(
exã¡
Ë>> 
LG_PAGE
;

715 
size_t
 
cur
 = 
	`©omic_„tch_add_zu
(&
cuΩages
, 
«dd
,

716 
ATOMIC_RELAXED
Ë+ 
«dd
;

717 
size_t
 
high
 = 
	`©omic_lﬂd_zu
(&
high∑ges
, 
ATOMIC_RELAXED
);

718 
cur
 > 
high
 && !
	`©omic_com∑ª_exch™ge_wók_zu
(

719 &
high∑ges
, &
high
, 
cur
, 
ATOMIC_RELAXED
, ATOMIC_RELAXED)) {

726 i‡(
cur
 > 
high
 && 
	`¥of_gdump_gë_u∆ocked
()) {

727 
	`¥of_gdump
(
tsdn
);

730 
	}
}

733 
	$exã¡_gdump_sub
(
tsdn_t
 *
tsdn
, c⁄° 
exã¡_t
 *
exã¡
) {

734 
	`ˇs£π
(
c⁄fig_¥of
);

736 i‡(
›t_¥of
 && 
	`exã¡_°©e_gë
(
exã¡
Ë=
exã¡_°©e_a˘ive
) {

737 
size_t
 
nsub
 = 
	`exã¡_size_gë
(
exã¡
Ë>> 
LG_PAGE
;

738 
	`as£π
(
	`©omic_lﬂd_zu
(&
cuΩages
, 
ATOMIC_RELAXED
Ë>
nsub
);

739 
	`©omic_„tch_sub_zu
(&
cuΩages
, 
nsub
, 
ATOMIC_RELAXED
);

741 
	}
}

743 
boﬁ


744 
	$exã¡_ªgi°î_im∂
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
, 
boﬁ
 
gdump_add
) {

745 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

746 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

747 
πªe_Àaf_ñm_t
 *
ñm_a
, *
ñm_b
;

753 
	`exã¡_lock
(
tsdn
, 
exã¡
);

755 i‡(
	`exã¡_πªe_Àaf_ñms_lookup
(
tsdn
, 
πªe_˘x
, 
exã¡
, 
Ál£
, 
åue
,

756 &
ñm_a
, &
ñm_b
)) {

757  
åue
;

760 
szöd_t
 
szöd
 = 
	`exã¡_szöd_gë_maybe_övÆid
(
exã¡
);

761 
boﬁ
 
¶ab
 = 
	`exã¡_¶ab_gë
(
exã¡
);

762 
	`exã¡_πªe_wrôe_acquúed
(
tsdn
, 
ñm_a
, 
ñm_b
, 
exã¡
, 
szöd
, 
¶ab
);

763 i‡(
¶ab
) {

764 
	`exã¡_öãri‹_ªgi°î
(
tsdn
, 
πªe_˘x
, 
exã¡
, 
szöd
);

767 
	`exã¡_u∆ock
(
tsdn
, 
exã¡
);

769 i‡(
c⁄fig_¥of
 && 
gdump_add
) {

770 
	`exã¡_gdump_add
(
tsdn
, 
exã¡
);

773  
Ál£
;

774 
	}
}

776 
boﬁ


777 
	$exã¡_ªgi°î
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
) {

778  
	`exã¡_ªgi°î_im∂
(
tsdn
, 
exã¡
, 
åue
);

779 
	}
}

781 
boﬁ


782 
	$exã¡_ªgi°î_no_gdump_add
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
) {

783  
	`exã¡_ªgi°î_im∂
(
tsdn
, 
exã¡
, 
Ál£
);

784 
	}
}

787 
	$exã¡_ªªgi°î
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
) {

788 
boﬁ
 
îr
 = 
	`exã¡_ªgi°î
(
tsdn
, 
exã¡
);

789 
	`as£π
(!
îr
);

790 
	}
}

800 
	$exã¡_öãri‹_dîegi°î
(
tsdn_t
 *
tsdn
, 
πªe_˘x_t
 *
πªe_˘x
,

801 
exã¡_t
 *
exã¡
) {

802 
size_t
 
i
;

804 
	`as£π
(
	`exã¡_¶ab_gë
(
exã¡
));

806 
i
 = 1; i < (
	`exã¡_size_gë
(
exã¡
Ë>> 
LG_PAGE
) - 1; i++) {

807 
	`πªe_˛ór
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

808 (
uöçå_t
)
	`exã¡_ba£_gë
(
exã¡
Ë+ (uöçå_t)(
i
 <<

809 
LG_PAGE
));

811 
	}
}

817 
	$exã¡_dîegi°î_im∂
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
, 
boﬁ
 
gdump
) {

818 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

819 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

820 
πªe_Àaf_ñm_t
 *
ñm_a
, *
ñm_b
;

821 
	`exã¡_πªe_Àaf_ñms_lookup
(
tsdn
, 
πªe_˘x
, 
exã¡
, 
åue
, 
Ál£
,

822 &
ñm_a
, &
ñm_b
);

824 
	`exã¡_lock
(
tsdn
, 
exã¡
);

826 
	`exã¡_πªe_wrôe_acquúed
(
tsdn
, 
ñm_a
, 
ñm_b
, 
NULL
, 
NSIZES
, 
Ál£
);

827 i‡(
	`exã¡_¶ab_gë
(
exã¡
)) {

828 
	`exã¡_öãri‹_dîegi°î
(
tsdn
, 
πªe_˘x
, 
exã¡
);

829 
	`exã¡_¶ab_£t
(
exã¡
, 
Ál£
);

832 
	`exã¡_u∆ock
(
tsdn
, 
exã¡
);

834 i‡(
c⁄fig_¥of
 && 
gdump
) {

835 
	`exã¡_gdump_sub
(
tsdn
, 
exã¡
);

837 
	}
}

840 
	$exã¡_dîegi°î
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
) {

841 
	`exã¡_dîegi°î_im∂
(
tsdn
, 
exã¡
, 
åue
);

842 
	}
}

845 
	$exã¡_dîegi°î_no_gdump_sub
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
) {

846 
	`exã¡_dîegi°î_im∂
(
tsdn
, 
exã¡
, 
Ál£
);

847 
	}
}

853 
exã¡_t
 *

854 
	$exã¡_ªcy˛e_exåa˘
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

855 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
πªe_˘x_t
 *
πªe_˘x
, 
exã¡s_t
 *
exã¡s
,

856 *
√w_addr
, 
size_t
 
size
, size_à
∑d
, size_à
Æignmít
, 
boﬁ
 
¶ab
,

857 
boﬁ
 
growög_ªèöed
) {

858 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

859 
WITNESS_RANK_CORE
, 
growög_ªèöed
 ? 1 : 0);

860 
	`as£π
(
Æignmít
 > 0);

861 i‡(
c⁄fig_debug
 && 
√w_addr
 !
NULL
) {

873 
	`as£π
(
	`PAGE_ADDR2BASE
(
√w_addr
) ==Çew_addr);

874 
	`as£π
(
∑d
 == 0);

875 
	`as£π
(
Æignmít
 <
PAGE
);

878 
size_t
 
esize
 = 
size
 + 
∑d
;

879 
	`mÆloc_muãx_lock
(
tsdn
, &
exã¡s
->
mtx
);

880 
	`exã¡_hooks_assuª_öôülized
(
¨ía
, 
r_exã¡_hooks
);

881 
exã¡_t
 *
exã¡
;

882 i‡(
√w_addr
 !
NULL
) {

883 
exã¡
 = 
	`exã¡_lock_‰om_addr
(
tsdn
, 
πªe_˘x
, 
√w_addr
);

884 i‡(
exã¡
 !
NULL
) {

889 
exã¡_t
 *
u∆ock_exã¡
 = 
exã¡
;

890 
	`as£π
(
	`exã¡_ba£_gë
(
exã¡
Ë=
√w_addr
);

891 i‡(
	`exã¡_¨ía_gë
(
exã¡
Ë!
¨ía
 ||

892 
	`exã¡_size_gë
(
exã¡
Ë< 
esize
 ||

893 
	`exã¡_°©e_gë
(
exã¡
) !=

894 
	`exã¡s_°©e_gë
(
exã¡s
)) {

895 
exã¡
 = 
NULL
;

897 
	`exã¡_u∆ock
(
tsdn
, 
u∆ock_exã¡
);

900 
exã¡
 = 
	`exã¡s_fô_locked
(
tsdn
, 
¨ía
, 
exã¡s
, 
esize
,

901 
Æignmít
);

903 i‡(
exã¡
 =
NULL
) {

904 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
exã¡s
->
mtx
);

905  
NULL
;

908 
	`exã¡_a˘iv©e_locked
(
tsdn
, 
¨ía
, 
exã¡s
, 
exã¡
, 
Ál£
);

909 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
exã¡s
->
mtx
);

911  
exã¡
;

912 
	}
}

926 
	mexã¡_•lô_öãri‹_ok
,

931 
	mexã¡_•lô_öãri‹_ˇ¡_Æloc
,

937 
	mexã¡_•lô_öãri‹_îr‹


938 } 
	texã¡_•lô_öãri‹_ªsu…_t
;

940 
exã¡_•lô_öãri‹_ªsu…_t


941 
	$exã¡_•lô_öãri‹
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

942 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
πªe_˘x_t
 *
πªe_˘x
,

944 
exã¡_t
 **
exã¡
,Éxã¡_à**
Àad
,Éxã¡_à**
åaû
,

946 
exã¡_t
 **
to_Àak
,Éxã¡_à**
to_ßlvage
,

947 *
√w_addr
, 
size_t
 
size
, size_à
∑d
, size_à
Æignmít
, 
boﬁ
 
¶ab
,

948 
szöd_t
 
szöd
, 
boﬁ
 
growög_ªèöed
) {

949 
size_t
 
esize
 = 
size
 + 
∑d
;

950 
size_t
 
Àadsize
 = 
	`ALIGNMENT_CEILING
((
uöçå_t
)
	`exã¡_ba£_gë
(*
exã¡
),

951 
	`PAGE_CEILING
(
Æignmít
)Ë- (
uöçå_t
)
	`exã¡_ba£_gë
(*
exã¡
);

952 
	`as£π
(
√w_addr
 =
NULL
 || 
Àadsize
 == 0);

953 i‡(
	`exã¡_size_gë
(*
exã¡
Ë< 
Àadsize
 + 
esize
) {

954  
exã¡_•lô_öãri‹_ˇ¡_Æloc
;

956 
size_t
 
åaûsize
 = 
	`exã¡_size_gë
(*
exã¡
Ë- 
Àadsize
 - 
esize
;

958 *
Àad
 = 
NULL
;

959 *
åaû
 = 
NULL
;

960 *
to_Àak
 = 
NULL
;

961 *
to_ßlvage
 = 
NULL
;

964 i‡(
Àadsize
 != 0) {

965 *
Àad
 = *
exã¡
;

966 *
exã¡
 = 
	`exã¡_•lô_im∂
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

967 *
Àad
, 
Àadsize
, 
NSIZES
, 
Ál£
, 
esize
 + 
åaûsize
, 
szöd
,

968 
¶ab
, 
growög_ªèöed
);

969 i‡(*
exã¡
 =
NULL
) {

970 *
to_Àak
 = *
Àad
;

971 *
Àad
 = 
NULL
;

972  
exã¡_•lô_öãri‹_îr‹
;

977 i‡(
åaûsize
 != 0) {

978 *
åaû
 = 
	`exã¡_•lô_im∂
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, *
exã¡
,

979 
esize
, 
szöd
, 
¶ab
, 
åaûsize
, 
NSIZES
, 
Ál£
,

980 
growög_ªèöed
);

981 i‡(*
åaû
 =
NULL
) {

982 *
to_Àak
 = *
exã¡
;

983 *
to_ßlvage
 = *
Àad
;

984 *
Àad
 = 
NULL
;

985 *
exã¡
 = 
NULL
;

986  
exã¡_•lô_öãri‹_îr‹
;

990 i‡(
Àadsize
 =0 && 
åaûsize
 == 0) {

995 
	`exã¡_szöd_£t
(*
exã¡
, 
szöd
);

996 i‡(
szöd
 !
NSIZES
) {

997 
	`πªe_szöd_¶ab_upd©e
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

998 (
uöçå_t
)
	`exã¡_addr_gë
(*
exã¡
), 
szöd
, 
¶ab
);

999 i‡(
¶ab
 && 
	`exã¡_size_gë
(*
exã¡
Ë> 
PAGE
) {

1000 
	`πªe_szöd_¶ab_upd©e
(
tsdn
, &
exã¡s_πªe
,

1001 
πªe_˘x
,

1002 (
uöçå_t
)
	`exã¡_∑°_gë
(*
exã¡
) -

1003 (
uöçå_t
)
PAGE
, 
szöd
, 
¶ab
);

1008  
exã¡_•lô_öãri‹_ok
;

1009 
	}
}

1017 
exã¡_t
 *

1018 
	$exã¡_ªcy˛e_•lô
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1019 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
πªe_˘x_t
 *
πªe_˘x
, 
exã¡s_t
 *
exã¡s
,

1020 *
√w_addr
, 
size_t
 
size
, size_à
∑d
, size_à
Æignmít
, 
boﬁ
 
¶ab
,

1021 
szöd_t
 
szöd
, 
exã¡_t
 *
exã¡
, 
boﬁ
 
growög_ªèöed
) {

1022 
exã¡_t
 *
Àad
;

1023 
exã¡_t
 *
åaû
;

1024 
exã¡_t
 *
to_Àak
;

1025 
exã¡_t
 *
to_ßlvage
;

1027 
exã¡_•lô_öãri‹_ªsu…_t
 
ªsu…
 = 
	`exã¡_•lô_öãri‹
(

1028 
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
πªe_˘x
, &
exã¡
, &
Àad
, &
åaû
,

1029 &
to_Àak
, &
to_ßlvage
, 
√w_addr
, 
size
, 
∑d
, 
Æignmít
, 
¶ab
, 
szöd
,

1030 
growög_ªèöed
);

1032 i‡(
ªsu…
 =
exã¡_•lô_öãri‹_ok
) {

1033 i‡(
Àad
 !
NULL
) {

1034 
	`exã¡_dó˘iv©e
(
tsdn
, 
¨ía
, 
exã¡s
, 
Àad
, 
Ál£
);

1036 i‡(
åaû
 !
NULL
) {

1037 
	`exã¡_dó˘iv©e
(
tsdn
, 
¨ía
, 
exã¡s
, 
åaû
, 
Ál£
);

1039  
exã¡
;

1045 
	`as£π
(
ªsu…
 =
exã¡_•lô_öãri‹_îr‹
);

1046 i‡(
to_ßlvage
 !
NULL
) {

1047 
	`exã¡_dîegi°î
(
tsdn
, 
to_ßlvage
);

1049 i‡(
to_Àak
 !
NULL
) {

1050 *
Àak
 = 
	`exã¡_ba£_gë
(
to_Àak
);

1051 
	`exã¡_dîegi°î_no_gdump_sub
(
tsdn
, 
to_Àak
);

1052 
	`exã¡s_Àak
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
exã¡s
,

1053 
to_Àak
, 
growög_ªèöed
);

1054 
	`as£π
(
	`exã¡_lock_‰om_addr
(
tsdn
, 
πªe_˘x
, 
Àak
)

1055 =
NULL
);

1057  
NULL
;

1059 
	`uƒóchabÀ
();

1060 
	}
}

1066 
exã¡_t
 *

1067 
	$exã¡_ªcy˛e
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_hooks_t
 **
r_exã¡_hooks
,

1068 
exã¡s_t
 *
exã¡s
, *
√w_addr
, 
size_t
 
size
, size_à
∑d
,

1069 
size_t
 
Æignmít
, 
boﬁ
 
¶ab
, 
szöd_t
 
szöd
, boﬁ *
zîo
, boﬁ *
commô
,

1070 
boﬁ
 
growög_ªèöed
) {

1071 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

1072 
WITNESS_RANK_CORE
, 
growög_ªèöed
 ? 1 : 0);

1073 
	`as£π
(
√w_addr
 =
NULL
 || !
¶ab
);

1074 
	`as£π
(
∑d
 =0 || !
¶ab
);

1075 
	`as£π
(!*
zîo
 || !
¶ab
);

1077 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

1078 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

1080 
exã¡_t
 *
exã¡
 = 
	`exã¡_ªcy˛e_exåa˘
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

1081 
πªe_˘x
, 
exã¡s
, 
√w_addr
, 
size
, 
∑d
, 
Æignmít
, 
¶ab
,

1082 
growög_ªèöed
);

1083 i‡(
exã¡
 =
NULL
) {

1084  
NULL
;

1087 
exã¡
 = 
	`exã¡_ªcy˛e_•lô
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
πªe_˘x
,

1088 
exã¡s
, 
√w_addr
, 
size
, 
∑d
, 
Æignmít
, 
¶ab
, 
szöd
, 
exã¡
,

1089 
growög_ªèöed
);

1090 i‡(
exã¡
 =
NULL
) {

1091  
NULL
;

1094 i‡(*
commô
 && !
	`exã¡_commôãd_gë
(
exã¡
)) {

1095 i‡(
	`exã¡_commô_im∂
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
exã¡
,

1096 0, 
	`exã¡_size_gë
(
exã¡
), 
growög_ªèöed
)) {

1097 
	`exã¡_ªc‹d
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
exã¡s
,

1098 
exã¡
, 
growög_ªèöed
);

1099  
NULL
;

1101 
	`exã¡_zî€d_£t
(
exã¡
, 
åue
);

1104 i‡(
	`exã¡_commôãd_gë
(
exã¡
)) {

1105 *
commô
 = 
åue
;

1107 i‡(
	`exã¡_zî€d_gë
(
exã¡
)) {

1108 *
zîo
 = 
åue
;

1111 i‡(
∑d
 != 0) {

1112 
	`exã¡_addr_øndomize
(
tsdn
, 
exã¡
, 
Æignmít
);

1114 
	`as£π
(
	`exã¡_°©e_gë
(
exã¡
Ë=
exã¡_°©e_a˘ive
);

1115 i‡(
¶ab
) {

1116 
	`exã¡_¶ab_£t
(
exã¡
, 
¶ab
);

1117 
	`exã¡_öãri‹_ªgi°î
(
tsdn
, 
πªe_˘x
, 
exã¡
, 
szöd
);

1120 i‡(*
zîo
) {

1121 *
addr
 = 
	`exã¡_ba£_gë
(
exã¡
);

1122 
size_t
 
size
 = 
	`exã¡_size_gë
(
exã¡
);

1123 i‡(!
	`exã¡_zî€d_gë
(
exã¡
)) {

1124 i‡(
	`∑ges_purge_f‹˚d
(
addr
, 
size
)) {

1125 
	`mem£t
(
addr
, 0, 
size
);

1127 } i‡(
c⁄fig_debug
) {

1128 
size_t
 *
p
 = (size_à*)(
uöçå_t
)
addr
;

1129 
size_t
 
i
 = 0; i < 
size
 / (size_t); i++) {

1130 
	`as£π
(
p
[
i
] == 0);

1134  
exã¡
;

1135 
	}
}

1144 
	$exã¡_Æloc_c‹e
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, *
√w_addr
, 
size_t
 
size
,

1145 
size_t
 
Æignmít
, 
boﬁ
 *
zîo
, boﬁ *
commô
, 
dss_¥ec_t
 
dss_¥ec
) {

1146 *
ªt
;

1148 
	`as£π
(
size
 != 0);

1149 
	`as£π
(
Æignmít
 != 0);

1152 i‡(
have_dss
 && 
dss_¥ec
 =
dss_¥ec_¥im¨y
 && (
ªt
 =

1153 
	`exã¡_Æloc_dss
(
tsdn
, 
¨ía
, 
√w_addr
, 
size
, 
Æignmít
, 
zîo
,

1154 
commô
)Ë!
NULL
) {

1155  
ªt
;

1158 i‡((
ªt
 = 
	`exã¡_Æloc_mm≠
(
√w_addr
, 
size
, 
Æignmít
, 
zîo
, 
commô
))

1159 !
NULL
) {

1160  
ªt
;

1163 i‡(
have_dss
 && 
dss_¥ec
 =
dss_¥ec_£c⁄d¨y
 && (
ªt
 =

1164 
	`exã¡_Æloc_dss
(
tsdn
, 
¨ía
, 
√w_addr
, 
size
, 
Æignmít
, 
zîo
,

1165 
commô
)Ë!
NULL
) {

1166  
ªt
;

1170  
NULL
;

1171 
	}
}

1174 
	$exã¡_Æloc_deÁu…_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, *
√w_addr
,

1175 
size_t
 
size
, size_à
Æignmít
, 
boﬁ
 *
zîo
, boﬁ *
commô
) {

1176 *
ªt
;

1178 
ªt
 = 
	`exã¡_Æloc_c‹e
(
tsdn
, 
¨ía
, 
√w_addr
, 
size
, 
Æignmít
, 
zîo
,

1179 
commô
, (
dss_¥ec_t
)
	`©omic_lﬂd_u
(&
¨ía
->
dss_¥ec
,

1180 
ATOMIC_RELAXED
));

1181  
ªt
;

1182 
	}
}

1185 
	$exã¡_Æloc_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
√w_addr
, 
size_t
 
size
,

1186 
size_t
 
Æignmít
, 
boﬁ
 *
zîo
, boﬁ *
commô
, 
¨ía_öd
) {

1187 
tsdn_t
 *
tsdn
;

1188 
¨ía_t
 *
¨ía
;

1190 
tsdn
 = 
	`tsdn_„tch
();

1191 
¨ía
 = 
	`¨ía_gë
(
tsdn
, 
¨ía_öd
, 
Ál£
);

1196 
	`as£π
(
¨ía
 !
NULL
);

1198  
	`exã¡_Æloc_deÁu…_im∂
(
tsdn
, 
¨ía
, 
√w_addr
, 
size
,

1199 
Æignmít
, 
zîo
, 
commô
);

1200 
	}
}

1203 
	$exã¡_hook_¥e_ªíå™cy
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
) {

1204 
tsd_t
 *
tsd
 = 
	`tsdn_nuŒ
(
tsdn
Ë? 
	`tsd_„tch
(Ë: 
	`tsdn_tsd
(tsdn);

1205 i‡(
¨ía
 =
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 0, 
Ál£
)) {

1213 
	`¥e_ªíå™cy
(
tsd
, 
NULL
);

1215 
	`¥e_ªíå™cy
(
tsd
, 
¨ía
);

1217 
	}
}

1220 
	$exã¡_hook_po°_ªíå™cy
(
tsdn_t
 *
tsdn
) {

1221 
tsd_t
 *
tsd
 = 
	`tsdn_nuŒ
(
tsdn
Ë? 
	`tsd_„tch
(Ë: 
	`tsdn_tsd
(tsdn);

1222 
	`po°_ªíå™cy
(
tsd
);

1223 
	}
}

1230 
exã¡_t
 *

1231 
	$exã¡_grow_ªèöed
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1232 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
size_t
 
size
, size_à
∑d
, size_à
Æignmít
,

1233 
boﬁ
 
¶ab
, 
szöd_t
 
szöd
, boﬁ *
zîo
, boﬁ *
commô
) {

1234 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
¨ía
->
exã¡_grow_mtx
);

1235 
	`as£π
(
∑d
 =0 || !
¶ab
);

1236 
	`as£π
(!*
zîo
 || !
¶ab
);

1238 
size_t
 
esize
 = 
size
 + 
∑d
;

1239 
size_t
 
Æloc_size_mö
 = 
esize
 + 
	`PAGE_CEILING
(
Æignmít
Ë- 
PAGE
;

1241 i‡(
Æloc_size_mö
 < 
esize
) {

1242 
œbñ_îr
;

1248 
pszöd_t
 
egn_skù
 = 0;

1249 
size_t
 
Æloc_size
 = 
	`sz_pöd2sz
(
¨ía
->
exã¡_grow_√xt
 + 
egn_skù
);

1250 
Æloc_size
 < 
Æloc_size_mö
) {

1251 
egn_skù
++;

1252 i‡(
¨ía
->
exã¡_grow_√xt
 + 
egn_skù
 =
NPSIZES
) {

1254 
œbñ_îr
;

1256 
	`as£π
(
¨ía
->
exã¡_grow_√xt
 + 
egn_skù
 < 
NPSIZES
);

1257 
Æloc_size
 = 
	`sz_pöd2sz
(
¨ía
->
exã¡_grow_√xt
 + 
egn_skù
);

1260 
exã¡_t
 *
exã¡
 = 
	`exã¡_Æloc
(
tsdn
, 
¨ía
);

1261 i‡(
exã¡
 =
NULL
) {

1262 
œbñ_îr
;

1264 
boﬁ
 
zî€d
 = 
Ál£
;

1265 
boﬁ
 
commôãd
 = 
Ál£
;

1267 *
±r
;

1268 i‡(*
r_exã¡_hooks
 =&
exã¡_hooks_deÁu…
) {

1269 
±r
 = 
	`exã¡_Æloc_c‹e
(
tsdn
, 
¨ía
, 
NULL
, 
Æloc_size
, 
PAGE
,

1270 &
zî€d
, &
commôãd
, (
dss_¥ec_t
)
	`©omic_lﬂd_u
(

1271 &
¨ía
->
dss_¥ec
, 
ATOMIC_RELAXED
));

1273 
	`exã¡_hook_¥e_ªíå™cy
(
tsdn
, 
¨ía
);

1274 
±r
 = (*
r_exã¡_hooks
)->
	`Æloc
(*r_exã¡_hooks, 
NULL
,

1275 
Æloc_size
, 
PAGE
, &
zî€d
, &
commôãd
,

1276 
	`¨ía_öd_gë
(
¨ía
));

1277 
	`exã¡_hook_po°_ªíå™cy
(
tsdn
);

1280 
	`exã¡_öô
(
exã¡
, 
¨ía
, 
±r
, 
Æloc_size
, 
Ál£
, 
NSIZES
,

1281 
	`¨ía_exã¡_¢_√xt
(
¨ía
), 
exã¡_°©e_a˘ive
, 
zî€d
,

1282 
commôãd
, 
åue
);

1283 i‡(
±r
 =
NULL
) {

1284 
	`exã¡_dÆloc
(
tsdn
, 
¨ía
, 
exã¡
);

1285 
œbñ_îr
;

1288 i‡(
	`exã¡_ªgi°î_no_gdump_add
(
tsdn
, 
exã¡
)) {

1289 
	`exã¡s_Àak
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

1290 &
¨ía
->
exã¡s_ªèöed
, 
exã¡
, 
åue
);

1291 
œbñ_îr
;

1294 i‡(
	`exã¡_zî€d_gë
(
exã¡
Ë&& 
	`exã¡_commôãd_gë
(extent)) {

1295 *
zîo
 = 
åue
;

1297 i‡(
	`exã¡_commôãd_gë
(
exã¡
)) {

1298 *
commô
 = 
åue
;

1301 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

1302 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

1304 
exã¡_t
 *
Àad
;

1305 
exã¡_t
 *
åaû
;

1306 
exã¡_t
 *
to_Àak
;

1307 
exã¡_t
 *
to_ßlvage
;

1308 
exã¡_•lô_öãri‹_ªsu…_t
 
ªsu…
 = 
	`exã¡_•lô_öãri‹
(

1309 
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
πªe_˘x
, &
exã¡
, &
Àad
, &
åaû
,

1310 &
to_Àak
, &
to_ßlvage
, 
NULL
, 
size
, 
∑d
, 
Æignmít
, 
¶ab
, 
szöd
,

1311 
åue
);

1313 i‡(
ªsu…
 =
exã¡_•lô_öãri‹_ok
) {

1314 i‡(
Àad
 !
NULL
) {

1315 
	`exã¡_ªc‹d
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

1316 &
¨ía
->
exã¡s_ªèöed
, 
Àad
, 
åue
);

1318 i‡(
åaû
 !
NULL
) {

1319 
	`exã¡_ªc‹d
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

1320 &
¨ía
->
exã¡s_ªèöed
, 
åaû
, 
åue
);

1327 
	`as£π
(
ªsu…
 =
exã¡_•lô_öãri‹_îr‹
);

1328 i‡(
to_Àak
 !
NULL
) {

1329 
	`exã¡_dîegi°î_no_gdump_sub
(
tsdn
, 
to_Àak
);

1330 
	`exã¡s_Àak
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

1331 &
¨ía
->
exã¡s_ªèöed
, 
to_Àak
, 
åue
);

1332 
œbñ_îr
;

1345 i‡(*
commô
 && !
	`exã¡_commôãd_gë
(
exã¡
)) {

1346 i‡(
	`exã¡_commô_im∂
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
exã¡
, 0,

1347 
	`exã¡_size_gë
(
exã¡
), 
åue
)) {

1348 
	`exã¡_ªc‹d
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

1349 &
¨ía
->
exã¡s_ªèöed
, 
exã¡
, 
åue
);

1350 
œbñ_îr
;

1352 
	`exã¡_zî€d_£t
(
exã¡
, 
åue
);

1359 i‡(
¨ía
->
exã¡_grow_√xt
 + 
egn_skù
 + 1 <=

1360 
¨ía
->
ªèö_grow_limô
) {

1361 
¨ía
->
exã¡_grow_√xt
 +
egn_skù
 + 1;

1363 
¨ía
->
exã¡_grow_√xt
 =áª«->
ªèö_grow_limô
;

1366 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ía
->
exã¡_grow_mtx
);

1368 i‡(
c⁄fig_¥of
) {

1370 
	`exã¡_gdump_add
(
tsdn
, 
exã¡
);

1372 i‡(
∑d
 != 0) {

1373 
	`exã¡_addr_øndomize
(
tsdn
, 
exã¡
, 
Æignmít
);

1375 i‡(
¶ab
) {

1376 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

1377 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
,

1378 &
πªe_˘x_ÁŒback
);

1380 
	`exã¡_¶ab_£t
(
exã¡
, 
åue
);

1381 
	`exã¡_öãri‹_ªgi°î
(
tsdn
, 
πªe_˘x
, 
exã¡
, 
szöd
);

1383 i‡(*
zîo
 && !
	`exã¡_zî€d_gë
(
exã¡
)) {

1384 *
addr
 = 
	`exã¡_ba£_gë
(
exã¡
);

1385 
size_t
 
size
 = 
	`exã¡_size_gë
(
exã¡
);

1386 i‡(
	`∑ges_purge_f‹˚d
(
addr
, 
size
)) {

1387 
	`mem£t
(
addr
, 0, 
size
);

1391  
exã¡
;

1392 
œbñ_îr
:

1393 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ía
->
exã¡_grow_mtx
);

1394  
NULL
;

1395 
	}
}

1397 
exã¡_t
 *

1398 
	$exã¡_Æloc_ªèöed
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1399 
exã¡_hooks_t
 **
r_exã¡_hooks
, *
√w_addr
, 
size_t
 
size
, size_à
∑d
,

1400 
size_t
 
Æignmít
, 
boﬁ
 
¶ab
, 
szöd_t
 
szöd
, boﬁ *
zîo
, boﬁ *
commô
) {

1401 
	`as£π
(
size
 != 0);

1402 
	`as£π
(
Æignmít
 != 0);

1404 
	`mÆloc_muãx_lock
(
tsdn
, &
¨ía
->
exã¡_grow_mtx
);

1406 
exã¡_t
 *
exã¡
 = 
	`exã¡_ªcy˛e
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

1407 &
¨ía
->
exã¡s_ªèöed
, 
√w_addr
, 
size
, 
∑d
, 
Æignmít
, 
¶ab
,

1408 
szöd
, 
zîo
, 
commô
, 
åue
);

1409 i‡(
exã¡
 !
NULL
) {

1410 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ía
->
exã¡_grow_mtx
);

1411 i‡(
c⁄fig_¥of
) {

1412 
	`exã¡_gdump_add
(
tsdn
, 
exã¡
);

1414 } i‡(
›t_ªèö
 && 
√w_addr
 =
NULL
) {

1415 
exã¡
 = 
	`exã¡_grow_ªèöed
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
size
,

1416 
∑d
, 
Æignmít
, 
¶ab
, 
szöd
, 
zîo
, 
commô
);

1419 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ía
->
exã¡_grow_mtx
);

1421 
	`mÆloc_muãx_as£π_nŸ_ow√r
(
tsdn
, &
¨ía
->
exã¡_grow_mtx
);

1423  
exã¡
;

1424 
	}
}

1426 
exã¡_t
 *

1427 
	$exã¡_Æloc_wøµî_h¨d
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1428 
exã¡_hooks_t
 **
r_exã¡_hooks
, *
√w_addr
, 
size_t
 
size
, size_à
∑d
,

1429 
size_t
 
Æignmít
, 
boﬁ
 
¶ab
, 
szöd_t
 
szöd
, boﬁ *
zîo
, boﬁ *
commô
) {

1430 
size_t
 
esize
 = 
size
 + 
∑d
;

1431 
exã¡_t
 *
exã¡
 = 
	`exã¡_Æloc
(
tsdn
, 
¨ía
);

1432 i‡(
exã¡
 =
NULL
) {

1433  
NULL
;

1435 *
addr
;

1436 i‡(*
r_exã¡_hooks
 =&
exã¡_hooks_deÁu…
) {

1438 
addr
 = 
	`exã¡_Æloc_deÁu…_im∂
(
tsdn
, 
¨ía
, 
√w_addr
, 
esize
,

1439 
Æignmít
, 
zîo
, 
commô
);

1441 
	`exã¡_hook_¥e_ªíå™cy
(
tsdn
, 
¨ía
);

1442 
addr
 = (*
r_exã¡_hooks
)->
	`Æloc
(*r_exã¡_hooks, 
√w_addr
,

1443 
esize
, 
Æignmít
, 
zîo
, 
commô
, 
	`¨ía_öd_gë
(
¨ía
));

1444 
	`exã¡_hook_po°_ªíå™cy
(
tsdn
);

1446 i‡(
addr
 =
NULL
) {

1447 
	`exã¡_dÆloc
(
tsdn
, 
¨ía
, 
exã¡
);

1448  
NULL
;

1450 
	`exã¡_öô
(
exã¡
, 
¨ía
, 
addr
, 
esize
, 
¶ab
, 
szöd
,

1451 
	`¨ía_exã¡_¢_√xt
(
¨ía
), 
exã¡_°©e_a˘ive
, 
zîo
, 
commô
,

1452 
åue
);

1453 i‡(
∑d
 != 0) {

1454 
	`exã¡_addr_øndomize
(
tsdn
, 
exã¡
, 
Æignmít
);

1456 i‡(
	`exã¡_ªgi°î
(
tsdn
, 
exã¡
)) {

1457 
	`exã¡s_Àak
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

1458 &
¨ía
->
exã¡s_ªèöed
, 
exã¡
, 
Ál£
);

1459  
NULL
;

1462  
exã¡
;

1463 
	}
}

1465 
exã¡_t
 *

1466 
	$exã¡_Æloc_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1467 
exã¡_hooks_t
 **
r_exã¡_hooks
, *
√w_addr
, 
size_t
 
size
, size_à
∑d
,

1468 
size_t
 
Æignmít
, 
boﬁ
 
¶ab
, 
szöd_t
 
szöd
, boﬁ *
zîo
, boﬁ *
commô
) {

1469 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

1470 
WITNESS_RANK_CORE
, 0);

1472 
	`exã¡_hooks_assuª_öôülized
(
¨ía
, 
r_exã¡_hooks
);

1474 
exã¡_t
 *
exã¡
 = 
	`exã¡_Æloc_ªèöed
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

1475 
√w_addr
, 
size
, 
∑d
, 
Æignmít
, 
¶ab
, 
szöd
, 
zîo
, 
commô
);

1476 i‡(
exã¡
 =
NULL
) {

1477 i‡(
›t_ªèö
 && 
√w_addr
 !
NULL
) {

1484  
NULL
;

1486 
exã¡
 = 
	`exã¡_Æloc_wøµî_h¨d
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

1487 
√w_addr
, 
size
, 
∑d
, 
Æignmít
, 
¶ab
, 
szöd
, 
zîo
, 
commô
);

1490 
	`as£π
(
exã¡
 =
NULL
 || 
	`exã¡_dum∑bÀ_gë
(extent));

1491  
exã¡
;

1492 
	}
}

1494 
boﬁ


1495 
	$exã¡_ˇn_cﬂÀs˚
(
¨ía_t
 *
¨ía
, 
exã¡s_t
 *
exã¡s
, c⁄° 
exã¡_t
 *
ö√r
,

1496 c⁄° 
exã¡_t
 *
ouãr
) {

1497 
	`as£π
(
	`exã¡_¨ía_gë
(
ö√r
Ë=
¨ía
);

1498 i‡(
	`exã¡_¨ía_gë
(
ouãr
Ë!
¨ía
) {

1499  
Ál£
;

1502 
	`as£π
(
	`exã¡_°©e_gë
(
ö√r
Ë=
exã¡_°©e_a˘ive
);

1503 i‡(
	`exã¡_°©e_gë
(
ouãr
Ë!
exã¡s
->
°©e
) {

1504  
Ál£
;

1507 i‡(
	`exã¡_commôãd_gë
(
ö√r
Ë!exã¡_commôãd_gë(
ouãr
)) {

1508  
Ál£
;

1511  
åue
;

1512 
	}
}

1514 
boﬁ


1515 
	$exã¡_cﬂÀs˚
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_hooks_t
 **
r_exã¡_hooks
,

1516 
exã¡s_t
 *
exã¡s
, 
exã¡_t
 *
ö√r
,Éxã¡_à*
ouãr
, 
boﬁ
 
f‹w¨d
,

1517 
boﬁ
 
growög_ªèöed
) {

1518 
	`as£π
(
	`exã¡_ˇn_cﬂÀs˚
(
¨ía
, 
exã¡s
, 
ö√r
, 
ouãr
));

1520 i‡(
exã¡s
->
dñay_cﬂÀs˚
) {

1525 
	`exã¡_li°_ªmove
(&
exã¡s
->
Ãu
, 
ouãr
);

1527 
	`exã¡_a˘iv©e_locked
(
tsdn
, 
¨ía
, 
exã¡s
, 
ouãr
,

1528 
exã¡s
->
dñay_cﬂÀs˚
);

1530 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
exã¡s
->
mtx
);

1531 
boﬁ
 
îr
 = 
	`exã¡_mîge_im∂
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

1532 
f‹w¨d
 ? 
ö√r
 : 
ouãr
, f‹w¨d ? ouã∏: i¬î, 
growög_ªèöed
);

1533 
	`mÆloc_muãx_lock
(
tsdn
, &
exã¡s
->
mtx
);

1535 i‡(!
îr
 && 
exã¡s
->
dñay_cﬂÀs˚
) {

1536 i‡(
f‹w¨d
) {

1537 
	`exã¡_li°_¥ïíd
(&
exã¡s
->
Ãu
, 
ö√r
);

1539 
	`exã¡_li°_¥ïíd
(&
exã¡s
->
Ãu
, 
ouãr
);

1542 i‡(
îr
) {

1543 i‡(
exã¡s
->
dñay_cﬂÀs˚
) {

1544 
	`exã¡_li°_¥ïíd
(&
exã¡s
->
Ãu
, 
ouãr
);

1546 
	`exã¡_dó˘iv©e_locked
(
tsdn
, 
¨ía
, 
exã¡s
, 
ouãr
,

1547 
exã¡s
->
dñay_cﬂÀs˚
);

1550  
îr
;

1551 
	}
}

1553 
exã¡_t
 *

1554 
	$exã¡_åy_cﬂÀs˚
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1555 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
πªe_˘x_t
 *
πªe_˘x
, 
exã¡s_t
 *
exã¡s
,

1556 
exã¡_t
 *
exã¡
, 
boﬁ
 *
cﬂÀs˚d
, boﬁ 
growög_ªèöed
) {

1561 
boﬁ
 
agaö
;

1563 
agaö
 = 
Ál£
;

1566 
exã¡_t
 *
√xt
 = 
	`exã¡_lock_‰om_addr
(
tsdn
, 
πªe_˘x
,

1567 
	`exã¡_∑°_gë
(
exã¡
));

1568 i‡(
√xt
 !
NULL
) {

1574 
boﬁ
 
ˇn_cﬂÀs˚
 = 
	`exã¡_ˇn_cﬂÀs˚
(
¨ía
, 
exã¡s
,

1575 
exã¡
, 
√xt
);

1577 
	`exã¡_u∆ock
(
tsdn
, 
√xt
);

1579 i‡(
ˇn_cﬂÀs˚
 && !
	`exã¡_cﬂÀs˚
(
tsdn
, 
¨ía
,

1580 
r_exã¡_hooks
, 
exã¡s
, 
exã¡
, 
√xt
, 
åue
,

1581 
growög_ªèöed
)) {

1582 i‡(
exã¡s
->
dñay_cﬂÀs˚
) {

1584 *
cﬂÀs˚d
 = 
åue
;

1585  
exã¡
;

1587 
agaö
 = 
åue
;

1592 
exã¡_t
 *
¥ev
 = 
	`exã¡_lock_‰om_addr
(
tsdn
, 
πªe_˘x
,

1593 
	`exã¡_bef‹e_gë
(
exã¡
));

1594 i‡(
¥ev
 !
NULL
) {

1595 
boﬁ
 
ˇn_cﬂÀs˚
 = 
	`exã¡_ˇn_cﬂÀs˚
(
¨ía
, 
exã¡s
,

1596 
exã¡
, 
¥ev
);

1597 
	`exã¡_u∆ock
(
tsdn
, 
¥ev
);

1599 i‡(
ˇn_cﬂÀs˚
 && !
	`exã¡_cﬂÀs˚
(
tsdn
, 
¨ía
,

1600 
r_exã¡_hooks
, 
exã¡s
, 
exã¡
, 
¥ev
, 
Ál£
,

1601 
growög_ªèöed
)) {

1602 
exã¡
 = 
¥ev
;

1603 i‡(
exã¡s
->
dñay_cﬂÀs˚
) {

1605 *
cﬂÀs˚d
 = 
åue
;

1606  
exã¡
;

1608 
agaö
 = 
åue
;

1611 } 
agaö
);

1613 i‡(
exã¡s
->
dñay_cﬂÀs˚
) {

1614 *
cﬂÀs˚d
 = 
Ál£
;

1616  
exã¡
;

1617 
	}
}

1624 
	$exã¡_ªc‹d
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_hooks_t
 **
r_exã¡_hooks
,

1625 
exã¡s_t
 *
exã¡s
, 
exã¡_t
 *
exã¡
, 
boﬁ
 
growög_ªèöed
) {

1626 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

1627 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

1629 
	`as£π
((
	`exã¡s_°©e_gë
(
exã¡s
Ë!
exã¡_°©e_dúty
 &&

1630 
	`exã¡s_°©e_gë
(
exã¡s
Ë!
exã¡_°©e_muzzy
) ||

1631 !
	`exã¡_zî€d_gë
(
exã¡
));

1633 
	`mÆloc_muãx_lock
(
tsdn
, &
exã¡s
->
mtx
);

1634 
	`exã¡_hooks_assuª_öôülized
(
¨ía
, 
r_exã¡_hooks
);

1636 
	`exã¡_szöd_£t
(
exã¡
, 
NSIZES
);

1637 i‡(
	`exã¡_¶ab_gë
(
exã¡
)) {

1638 
	`exã¡_öãri‹_dîegi°î
(
tsdn
, 
πªe_˘x
, 
exã¡
);

1639 
	`exã¡_¶ab_£t
(
exã¡
, 
Ál£
);

1642 
	`as£π
(
	`πªe_exã¡_ªad
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

1643 (
uöçå_t
)
	`exã¡_ba£_gë
(
exã¡
), 
åue
) ==Éxtent);

1645 i‡(!
exã¡s
->
dñay_cﬂÀs˚
) {

1646 
exã¡
 = 
	`exã¡_åy_cﬂÀs˚
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
,

1647 
πªe_˘x
, 
exã¡s
, 
exã¡
, 
NULL
, 
growög_ªèöed
);

1648 } i‡(
	`exã¡_size_gë
(
exã¡
Ë>
LARGE_MINCLASS
) {

1650 
boﬁ
 
cﬂÀs˚d
;

1651 
size_t
 
¥ev_size
;

1653 
¥ev_size
 = 
	`exã¡_size_gë
(
exã¡
);

1654 
	`as£π
(
	`exã¡_°©e_gë
(
exã¡
Ë=
exã¡_°©e_a˘ive
);

1655 
exã¡
 = 
	`exã¡_åy_cﬂÀs˚
(
tsdn
, 
¨ía
,

1656 
r_exã¡_hooks
, 
πªe_˘x
, 
exã¡s
, 
exã¡
,

1657 &
cﬂÀs˚d
, 
growög_ªèöed
);

1658 i‡(
cﬂÀs˚d
) {

1659 
	`exã¡_li°_ªmove
(&
exã¡s
->
Ãu
, 
exã¡
);

1661 } 
cﬂÀs˚d
 &&

1662 
	`exã¡_size_gë
(
exã¡
Ë>
¥ev_size
 + 
LARGE_MINCLASS
);

1664 
	`exã¡_dó˘iv©e_locked
(
tsdn
, 
¨ía
, 
exã¡s
, 
exã¡
, 
Ál£
);

1666 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
exã¡s
->
mtx
);

1667 
	}
}

1670 
	$exã¡_dÆloc_g≠
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
exã¡
) {

1671 
exã¡_hooks_t
 *
exã¡_hooks
 = 
EXTENT_HOOKS_INITIALIZER
;

1673 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

1674 
WITNESS_RANK_CORE
, 0);

1676 i‡(
	`exã¡_ªgi°î
(
tsdn
, 
exã¡
)) {

1677 
	`exã¡s_Àak
(
tsdn
, 
¨ía
, &
exã¡_hooks
,

1678 &
¨ía
->
exã¡s_ªèöed
, 
exã¡
, 
Ál£
);

1681 
	`exã¡_dÆloc_wøµî
(
tsdn
, 
¨ía
, &
exã¡_hooks
, 
exã¡
);

1682 
	}
}

1684 
boﬁ


1685 
	$exã¡_dÆloc_deÁu…_im∂
(*
addr
, 
size_t
 
size
) {

1686 i‡(!
have_dss
 || !
	`exã¡_ö_dss
(
addr
)) {

1687  
	`exã¡_dÆloc_mm≠
(
addr
, 
size
);

1689  
åue
;

1690 
	}
}

1692 
boﬁ


1693 
	$exã¡_dÆloc_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
, 
size_t
 
size
,

1694 
boﬁ
 
commôãd
, 
¨ía_öd
) {

1695  
	`exã¡_dÆloc_deÁu…_im∂
(
addr
, 
size
);

1696 
	}
}

1698 
boﬁ


1699 
	$exã¡_dÆloc_wøµî_åy
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1700 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
) {

1701 
boﬁ
 
îr
;

1703 
	`as£π
(
	`exã¡_ba£_gë
(
exã¡
Ë!
NULL
);

1704 
	`as£π
(
	`exã¡_size_gë
(
exã¡
) != 0);

1705 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

1706 
WITNESS_RANK_CORE
, 0);

1708 
	`exã¡_addr_£t
(
exã¡
, 
	`exã¡_ba£_gë
(extent));

1710 
	`exã¡_hooks_assuª_öôülized
(
¨ía
, 
r_exã¡_hooks
);

1712 i‡(*
r_exã¡_hooks
 =&
exã¡_hooks_deÁu…
) {

1714 
îr
 = 
	`exã¡_dÆloc_deÁu…_im∂
(
	`exã¡_ba£_gë
(
exã¡
),

1715 
	`exã¡_size_gë
(
exã¡
));

1717 
	`exã¡_hook_¥e_ªíå™cy
(
tsdn
, 
¨ía
);

1718 
îr
 = ((*
r_exã¡_hooks
)->
dÆloc
 =
NULL
 ||

1719 (*
r_exã¡_hooks
)->
	`dÆloc
(*r_extent_hooks,

1720 
	`exã¡_ba£_gë
(
exã¡
), 
	`exã¡_size_gë
(extent),

1721 
	`exã¡_commôãd_gë
(
exã¡
), 
	`¨ía_öd_gë
(
¨ía
)));

1722 
	`exã¡_hook_po°_ªíå™cy
(
tsdn
);

1725 i‡(!
îr
) {

1726 
	`exã¡_dÆloc
(
tsdn
, 
¨ía
, 
exã¡
);

1729  
îr
;

1730 
	}
}

1733 
	$exã¡_dÆloc_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1734 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
) {

1735 
	`as£π
(
	`exã¡_dum∑bÀ_gë
(
exã¡
));

1736 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

1737 
WITNESS_RANK_CORE
, 0);

1743 
	`exã¡_dîegi°î
(
tsdn
, 
exã¡
);

1744 i‡(!
	`exã¡_dÆloc_wøµî_åy
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
exã¡
)) {

1748 
	`exã¡_ªªgi°î
(
tsdn
, 
exã¡
);

1749 i‡(*
r_exã¡_hooks
 !&
exã¡_hooks_deÁu…
) {

1750 
	`exã¡_hook_¥e_ªíå™cy
(
tsdn
, 
¨ía
);

1753 
boﬁ
 
zî€d
;

1754 i‡(!
	`exã¡_commôãd_gë
(
exã¡
)) {

1755 
zî€d
 = 
åue
;

1756 } i‡(!
	`exã¡_decommô_wøµî
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
exã¡
,

1757 0, 
	`exã¡_size_gë
(
exã¡
))) {

1758 
zî€d
 = 
åue
;

1759 } i‡((*
r_exã¡_hooks
)->
purge_f‹˚d
 !
NULL
 &&

1760 !(*
r_exã¡_hooks
)->
	`purge_f‹˚d
(*r_extent_hooks,

1761 
	`exã¡_ba£_gë
(
exã¡
), 
	`exã¡_size_gë
(extent), 0,

1762 
	`exã¡_size_gë
(
exã¡
), 
	`¨ía_öd_gë
(
¨ía
))) {

1763 
zî€d
 = 
åue
;

1764 } i‡(
	`exã¡_°©e_gë
(
exã¡
Ë=
exã¡_°©e_muzzy
 ||

1765 ((*
r_exã¡_hooks
)->
purge_œzy
 !
NULL
 &&

1766 !(*
r_exã¡_hooks
)->
	`purge_œzy
(*r_extent_hooks,

1767 
	`exã¡_ba£_gë
(
exã¡
), 
	`exã¡_size_gë
(extent), 0,

1768 
	`exã¡_size_gë
(
exã¡
), 
	`¨ía_öd_gë
(
¨ía
)))) {

1769 
zî€d
 = 
Ál£
;

1771 
zî€d
 = 
Ál£
;

1773 i‡(*
r_exã¡_hooks
 !&
exã¡_hooks_deÁu…
) {

1774 
	`exã¡_hook_po°_ªíå™cy
(
tsdn
);

1776 
	`exã¡_zî€d_£t
(
exã¡
, 
zî€d
);

1778 i‡(
c⁄fig_¥of
) {

1779 
	`exã¡_gdump_sub
(
tsdn
, 
exã¡
);

1782 
	`exã¡_ªc‹d
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, &¨ía->
exã¡s_ªèöed
,

1783 
exã¡
, 
Ál£
);

1784 
	}
}

1787 
	$exã¡_de°roy_deÁu…_im∂
(*
addr
, 
size_t
 
size
) {

1788 i‡(!
have_dss
 || !
	`exã¡_ö_dss
(
addr
)) {

1789 
	`∑ges_unm≠
(
addr
, 
size
);

1791 
	}
}

1794 
	$exã¡_de°roy_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
, 
size_t
 
size
,

1795 
boﬁ
 
commôãd
, 
¨ía_öd
) {

1796 
	`exã¡_de°roy_deÁu…_im∂
(
addr
, 
size
);

1797 
	}
}

1800 
	$exã¡_de°roy_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1801 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
) {

1802 
	`as£π
(
	`exã¡_ba£_gë
(
exã¡
Ë!
NULL
);

1803 
	`as£π
(
	`exã¡_size_gë
(
exã¡
) != 0);

1804 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

1805 
WITNESS_RANK_CORE
, 0);

1808 
	`exã¡_dîegi°î
(
tsdn
, 
exã¡
);

1810 
	`exã¡_addr_£t
(
exã¡
, 
	`exã¡_ba£_gë
(extent));

1812 
	`exã¡_hooks_assuª_öôülized
(
¨ía
, 
r_exã¡_hooks
);

1814 i‡(*
r_exã¡_hooks
 =&
exã¡_hooks_deÁu…
) {

1816 
	`exã¡_de°roy_deÁu…_im∂
(
	`exã¡_ba£_gë
(
exã¡
),

1817 
	`exã¡_size_gë
(
exã¡
));

1818 } i‡((*
r_exã¡_hooks
)->
de°roy
 !
NULL
) {

1819 
	`exã¡_hook_¥e_ªíå™cy
(
tsdn
, 
¨ía
);

1820 (*
r_exã¡_hooks
)->
	`de°roy
(*r_extent_hooks,

1821 
	`exã¡_ba£_gë
(
exã¡
), 
	`exã¡_size_gë
(extent),

1822 
	`exã¡_commôãd_gë
(
exã¡
), 
	`¨ía_öd_gë
(
¨ía
));

1823 
	`exã¡_hook_po°_ªíå™cy
(
tsdn
);

1826 
	`exã¡_dÆloc
(
tsdn
, 
¨ía
, 
exã¡
);

1827 
	}
}

1829 
boﬁ


1830 
	$exã¡_commô_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
, 
size_t
 
size
,

1831 
size_t
 
off£t
, size_à
Àngth
, 
¨ía_öd
) {

1832  
	`∑ges_commô
((*)((
uöçå_t
)
addr
 + (uöçå_t)
off£t
),

1833 
Àngth
);

1834 
	}
}

1836 
boﬁ


1837 
	$exã¡_commô_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1838 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
off£t
,

1839 
size_t
 
Àngth
, 
boﬁ
 
growög_ªèöed
) {

1840 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

1841 
WITNESS_RANK_CORE
, 
growög_ªèöed
 ? 1 : 0);

1843 
	`exã¡_hooks_assuª_öôülized
(
¨ía
, 
r_exã¡_hooks
);

1844 i‡(*
r_exã¡_hooks
 !&
exã¡_hooks_deÁu…
) {

1845 
	`exã¡_hook_¥e_ªíå™cy
(
tsdn
, 
¨ía
);

1847 
boﬁ
 
îr
 = ((*
r_exã¡_hooks
)->
commô
 =
NULL
 ||

1848 (*
r_exã¡_hooks
)->
	`commô
(*r_exã¡_hooks, 
	`exã¡_ba£_gë
(
exã¡
),

1849 
	`exã¡_size_gë
(
exã¡
), 
off£t
, 
Àngth
, 
	`¨ía_öd_gë
(
¨ía
)));

1850 i‡(*
r_exã¡_hooks
 !&
exã¡_hooks_deÁu…
) {

1851 
	`exã¡_hook_po°_ªíå™cy
(
tsdn
);

1853 
	`exã¡_commôãd_£t
(
exã¡
, 
	`exã¡_commôãd_gë
”xã¡Ë|| !
îr
);

1854  
îr
;

1855 
	}
}

1857 
boﬁ


1858 
	$exã¡_commô_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1859 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
off£t
,

1860 
size_t
 
Àngth
) {

1861  
	`exã¡_commô_im∂
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
exã¡
, 
off£t
,

1862 
Àngth
, 
Ál£
);

1863 
	}
}

1865 
boﬁ


1866 
	$exã¡_decommô_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
, 
size_t
 
size
,

1867 
size_t
 
off£t
, size_à
Àngth
, 
¨ía_öd
) {

1868  
	`∑ges_decommô
((*)((
uöçå_t
)
addr
 + (uöçå_t)
off£t
),

1869 
Àngth
);

1870 
	}
}

1872 
boﬁ


1873 
	$exã¡_decommô_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1874 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
off£t
,

1875 
size_t
 
Àngth
) {

1876 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

1877 
WITNESS_RANK_CORE
, 0);

1879 
	`exã¡_hooks_assuª_öôülized
(
¨ía
, 
r_exã¡_hooks
);

1881 i‡(*
r_exã¡_hooks
 !&
exã¡_hooks_deÁu…
) {

1882 
	`exã¡_hook_¥e_ªíå™cy
(
tsdn
, 
¨ía
);

1884 
boﬁ
 
îr
 = ((*
r_exã¡_hooks
)->
decommô
 =
NULL
 ||

1885 (*
r_exã¡_hooks
)->
	`decommô
(*r_extent_hooks,

1886 
	`exã¡_ba£_gë
(
exã¡
), 
	`exã¡_size_gë
”xã¡), 
off£t
, 
Àngth
,

1887 
	`¨ía_öd_gë
(
¨ía
)));

1888 i‡(*
r_exã¡_hooks
 !&
exã¡_hooks_deÁu…
) {

1889 
	`exã¡_hook_po°_ªíå™cy
(
tsdn
);

1891 
	`exã¡_commôãd_£t
(
exã¡
, 
	`exã¡_commôãd_gë
”xã¡Ë&& 
îr
);

1892  
îr
;

1893 
	}
}

1895 #ifde‡
PAGES_CAN_PURGE_LAZY


1896 
boﬁ


1897 
	$exã¡_purge_œzy_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
, 
size_t
 
size
,

1898 
size_t
 
off£t
, size_à
Àngth
, 
¨ía_öd
) {

1899 
	`as£π
(
addr
 !
NULL
);

1900 
	`as£π
((
off£t
 & 
PAGE_MASK
) == 0);

1901 
	`as£π
(
Àngth
 != 0);

1902 
	`as£π
((
Àngth
 & 
PAGE_MASK
) == 0);

1904  
	`∑ges_purge_œzy
((*)((
uöçå_t
)
addr
 + (uöçå_t)
off£t
),

1905 
Àngth
);

1906 
	}
}

1909 
boﬁ


1910 
	$exã¡_purge_œzy_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1911 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
off£t
,

1912 
size_t
 
Àngth
, 
boﬁ
 
growög_ªèöed
) {

1913 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

1914 
WITNESS_RANK_CORE
, 
growög_ªèöed
 ? 1 : 0);

1916 
	`exã¡_hooks_assuª_öôülized
(
¨ía
, 
r_exã¡_hooks
);

1918 i‡((*
r_exã¡_hooks
)->
purge_œzy
 =
NULL
) {

1919  
åue
;

1921 i‡(*
r_exã¡_hooks
 !&
exã¡_hooks_deÁu…
) {

1922 
	`exã¡_hook_¥e_ªíå™cy
(
tsdn
, 
¨ía
);

1924 
boﬁ
 
îr
 = (*
r_exã¡_hooks
)->
	`purge_œzy
(*r_extent_hooks,

1925 
	`exã¡_ba£_gë
(
exã¡
), 
	`exã¡_size_gë
”xã¡), 
off£t
, 
Àngth
,

1926 
	`¨ía_öd_gë
(
¨ía
));

1927 i‡(*
r_exã¡_hooks
 !&
exã¡_hooks_deÁu…
) {

1928 
	`exã¡_hook_po°_ªíå™cy
(
tsdn
);

1931  
îr
;

1932 
	}
}

1934 
boﬁ


1935 
	$exã¡_purge_œzy_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1936 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
off£t
,

1937 
size_t
 
Àngth
) {

1938  
	`exã¡_purge_œzy_im∂
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
exã¡
,

1939 
off£t
, 
Àngth
, 
Ál£
);

1940 
	}
}

1942 #ifde‡
PAGES_CAN_PURGE_FORCED


1943 
boﬁ


1944 
	$exã¡_purge_f‹˚d_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
,

1945 
size_t
 
size
, size_à
off£t
, size_à
Àngth
, 
¨ía_öd
) {

1946 
	`as£π
(
addr
 !
NULL
);

1947 
	`as£π
((
off£t
 & 
PAGE_MASK
) == 0);

1948 
	`as£π
(
Àngth
 != 0);

1949 
	`as£π
((
Àngth
 & 
PAGE_MASK
) == 0);

1951  
	`∑ges_purge_f‹˚d
((*)((
uöçå_t
)
addr
 +

1952 (
uöçå_t
)
off£t
), 
Àngth
);

1953 
	}
}

1956 
boﬁ


1957 
	$exã¡_purge_f‹˚d_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1958 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
off£t
,

1959 
size_t
 
Àngth
, 
boﬁ
 
growög_ªèöed
) {

1960 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

1961 
WITNESS_RANK_CORE
, 
growög_ªèöed
 ? 1 : 0);

1963 
	`exã¡_hooks_assuª_öôülized
(
¨ía
, 
r_exã¡_hooks
);

1965 i‡((*
r_exã¡_hooks
)->
purge_f‹˚d
 =
NULL
) {

1966  
åue
;

1968 i‡(*
r_exã¡_hooks
 !&
exã¡_hooks_deÁu…
) {

1969 
	`exã¡_hook_¥e_ªíå™cy
(
tsdn
, 
¨ía
);

1971 
boﬁ
 
îr
 = (*
r_exã¡_hooks
)->
	`purge_f‹˚d
(*r_extent_hooks,

1972 
	`exã¡_ba£_gë
(
exã¡
), 
	`exã¡_size_gë
”xã¡), 
off£t
, 
Àngth
,

1973 
	`¨ía_öd_gë
(
¨ía
));

1974 i‡(*
r_exã¡_hooks
 !&
exã¡_hooks_deÁu…
) {

1975 
	`exã¡_hook_po°_ªíå™cy
(
tsdn
);

1977  
îr
;

1978 
	}
}

1980 
boﬁ


1981 
	$exã¡_purge_f‹˚d_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

1982 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
off£t
,

1983 
size_t
 
Àngth
) {

1984  
	`exã¡_purge_f‹˚d_im∂
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
exã¡
,

1985 
off£t
, 
Àngth
, 
Ál£
);

1986 
	}
}

1988 #ifde‡
JEMALLOC_MAPS_COALESCE


1989 
boﬁ


1990 
	$exã¡_•lô_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
, 
size_t
 
size
,

1991 
size_t
 
size_a
, size_à
size_b
, 
boﬁ
 
commôãd
, 
¨ía_öd
) {

1992  !
m≠s_cﬂÀs˚
;

1993 
	}
}

2003 
exã¡_t
 *

2004 
	$exã¡_•lô_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

2005 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
size_a
,

2006 
szöd_t
 
szöd_a
, 
boﬁ
 
¶ab_a
, 
size_t
 
size_b
, szöd_à
szöd_b
, boﬁ 
¶ab_b
,

2007 
boﬁ
 
growög_ªèöed
) {

2008 
	`as£π
(
	`exã¡_size_gë
(
exã¡
Ë=
size_a
 + 
size_b
);

2009 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

2010 
WITNESS_RANK_CORE
, 
growög_ªèöed
 ? 1 : 0);

2012 
	`exã¡_hooks_assuª_öôülized
(
¨ía
, 
r_exã¡_hooks
);

2014 i‡((*
r_exã¡_hooks
)->
•lô
 =
NULL
) {

2015  
NULL
;

2018 
exã¡_t
 *
åaû
 = 
	`exã¡_Æloc
(
tsdn
, 
¨ía
);

2019 i‡(
åaû
 =
NULL
) {

2020 
œbñ_îr‹_a
;

2023 
	`exã¡_öô
(
åaû
, 
¨ía
, (*)((
uöçå_t
)
	`exã¡_ba£_gë
(
exã¡
) +

2024 
size_a
), 
size_b
, 
¶ab_b
, 
szöd_b
, 
	`exã¡_¢_gë
(
exã¡
),

2025 
	`exã¡_°©e_gë
(
exã¡
), 
	`exã¡_zî€d_gë
(extent),

2026 
	`exã¡_commôãd_gë
(
exã¡
), 
	`exã¡_dum∑bÀ_gë
(extent));

2028 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

2029 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

2030 
πªe_Àaf_ñm_t
 *
Àad_ñm_a
, *
Àad_ñm_b
;

2032 
exã¡_t
 
Àad
;

2034 
	`exã¡_öô
(&
Àad
, 
¨ía
, 
	`exã¡_addr_gë
(
exã¡
), 
size_a
,

2035 
¶ab_a
, 
szöd_a
, 
	`exã¡_¢_gë
(
exã¡
),

2036 
	`exã¡_°©e_gë
(
exã¡
), 
	`exã¡_zî€d_gë
(extent),

2037 
	`exã¡_commôãd_gë
(
exã¡
), 
	`exã¡_dum∑bÀ_gë
(extent));

2039 
	`exã¡_πªe_Àaf_ñms_lookup
(
tsdn
, 
πªe_˘x
, &
Àad
, 
Ál£
,

2040 
åue
, &
Àad_ñm_a
, &
Àad_ñm_b
);

2042 
πªe_Àaf_ñm_t
 *
åaû_ñm_a
, *
åaû_ñm_b
;

2043 
	`exã¡_πªe_Àaf_ñms_lookup
(
tsdn
, 
πªe_˘x
, 
åaû
, 
Ál£
, 
åue
,

2044 &
åaû_ñm_a
, &
åaû_ñm_b
);

2046 i‡(
Àad_ñm_a
 =
NULL
 || 
Àad_ñm_b
 =NULL || 
åaû_ñm_a
 == NULL

2047 || 
åaû_ñm_b
 =
NULL
) {

2048 
œbñ_îr‹_b
;

2051 
	`exã¡_lock2
(
tsdn
, 
exã¡
, 
åaû
);

2053 i‡(*
r_exã¡_hooks
 !&
exã¡_hooks_deÁu…
) {

2054 
	`exã¡_hook_¥e_ªíå™cy
(
tsdn
, 
¨ía
);

2056 
boﬁ
 
îr
 = (*
r_exã¡_hooks
)->
	`•lô
(*r_exã¡_hooks, 
	`exã¡_ba£_gë
(
exã¡
),

2057 
size_a
 + 
size_b
, size_a, size_b, 
	`exã¡_commôãd_gë
(
exã¡
),

2058 
	`¨ía_öd_gë
(
¨ía
));

2059 i‡(*
r_exã¡_hooks
 !&
exã¡_hooks_deÁu…
) {

2060 
	`exã¡_hook_po°_ªíå™cy
(
tsdn
);

2062 i‡(
îr
) {

2063 
œbñ_îr‹_c
;

2066 
	`exã¡_size_£t
(
exã¡
, 
size_a
);

2067 
	`exã¡_szöd_£t
(
exã¡
, 
szöd_a
);

2069 
	`exã¡_πªe_wrôe_acquúed
(
tsdn
, 
Àad_ñm_a
, 
Àad_ñm_b
, 
exã¡
,

2070 
szöd_a
, 
¶ab_a
);

2071 
	`exã¡_πªe_wrôe_acquúed
(
tsdn
, 
åaû_ñm_a
, 
åaû_ñm_b
, 
åaû
,

2072 
szöd_b
, 
¶ab_b
);

2074 
	`exã¡_u∆ock2
(
tsdn
, 
exã¡
, 
åaû
);

2076  
åaû
;

2077 
œbñ_îr‹_c
:

2078 
	`exã¡_u∆ock2
(
tsdn
, 
exã¡
, 
åaû
);

2079 
œbñ_îr‹_b
:

2080 
	`exã¡_dÆloc
(
tsdn
, 
¨ía
, 
åaû
);

2081 
œbñ_îr‹_a
:

2082  
NULL
;

2083 
	}
}

2085 
exã¡_t
 *

2086 
	$exã¡_•lô_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

2087 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
exã¡
, 
size_t
 
size_a
,

2088 
szöd_t
 
szöd_a
, 
boﬁ
 
¶ab_a
, 
size_t
 
size_b
, szöd_à
szöd_b
, boﬁ 
¶ab_b
) {

2089  
	`exã¡_•lô_im∂
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
exã¡
, 
size_a
,

2090 
szöd_a
, 
¶ab_a
, 
size_b
, 
szöd_b
, 
¶ab_b
, 
Ál£
);

2091 
	}
}

2093 
boﬁ


2094 
	$exã¡_mîge_deÁu…_im∂
(*
addr_a
, *
addr_b
) {

2095 i‡(!
m≠s_cﬂÀs˚
) {

2096  
åue
;

2098 i‡(
have_dss
 && !
	`exã¡_dss_mîgóbÀ
(
addr_a
, 
addr_b
)) {

2099  
åue
;

2102  
Ál£
;

2103 
	}
}

2105 #ifde‡
JEMALLOC_MAPS_COALESCE


2106 
boﬁ


2107 
	$exã¡_mîge_deÁu…
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr_a
, 
size_t
 
size_a
,

2108 *
addr_b
, 
size_t
 
size_b
, 
boﬁ
 
commôãd
, 
¨ía_öd
) {

2109  
	`exã¡_mîge_deÁu…_im∂
(
addr_a
, 
addr_b
);

2110 
	}
}

2113 
boﬁ


2114 
	$exã¡_mîge_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

2115 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
a
,Éxã¡_à*
b
,

2116 
boﬁ
 
growög_ªèöed
) {

2117 
	`wô√ss_as£π_dïth_to_ønk
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
),

2118 
WITNESS_RANK_CORE
, 
growög_ªèöed
 ? 1 : 0);

2120 
	`exã¡_hooks_assuª_öôülized
(
¨ía
, 
r_exã¡_hooks
);

2122 i‡((*
r_exã¡_hooks
)->
mîge
 =
NULL
) {

2123  
åue
;

2126 
boﬁ
 
îr
;

2127 i‡(*
r_exã¡_hooks
 =&
exã¡_hooks_deÁu…
) {

2129 
îr
 = 
	`exã¡_mîge_deÁu…_im∂
(
	`exã¡_ba£_gë
(
a
),

2130 
	`exã¡_ba£_gë
(
b
));

2132 
	`exã¡_hook_¥e_ªíå™cy
(
tsdn
, 
¨ía
);

2133 
îr
 = (*
r_exã¡_hooks
)->
	`mîge
(*r_extent_hooks,

2134 
	`exã¡_ba£_gë
(
a
), 
	`exã¡_size_gë
◊),Éxã¡_ba£_gë(
b
),

2135 
	`exã¡_size_gë
(
b
), 
	`exã¡_commôãd_gë
(
a
),

2136 
	`¨ía_öd_gë
(
¨ía
));

2137 
	`exã¡_hook_po°_ªíå™cy
(
tsdn
);

2140 i‡(
îr
) {

2141  
åue
;

2149 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

2150 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

2151 
πªe_Àaf_ñm_t
 *
a_ñm_a
, *
a_ñm_b
, *
b_ñm_a
, *
b_ñm_b
;

2152 
	`exã¡_πªe_Àaf_ñms_lookup
(
tsdn
, 
πªe_˘x
, 
a
, 
åue
, 
Ál£
, &
a_ñm_a
,

2153 &
a_ñm_b
);

2154 
	`exã¡_πªe_Àaf_ñms_lookup
(
tsdn
, 
πªe_˘x
, 
b
, 
åue
, 
Ál£
, &
b_ñm_a
,

2155 &
b_ñm_b
);

2157 
	`exã¡_lock2
(
tsdn
, 
a
, 
b
);

2159 i‡(
a_ñm_b
 !
NULL
) {

2160 
	`πªe_Àaf_ñm_wrôe
(
tsdn
, &
exã¡s_πªe
, 
a_ñm_b
, 
NULL
,

2161 
NSIZES
, 
Ál£
);

2163 i‡(
b_ñm_b
 !
NULL
) {

2164 
	`πªe_Àaf_ñm_wrôe
(
tsdn
, &
exã¡s_πªe
, 
b_ñm_a
, 
NULL
,

2165 
NSIZES
, 
Ál£
);

2167 
b_ñm_b
 = 
b_ñm_a
;

2170 
	`exã¡_size_£t
(
a
, 
	`exã¡_size_gë
◊Ë+Éxã¡_size_gë(
b
));

2171 
	`exã¡_szöd_£t
(
a
, 
NSIZES
);

2172 
	`exã¡_¢_£t
(
a
, (
	`exã¡_¢_gë
◊Ë<Éxã¡_¢_gë(
b
)) ?

2173 
	`exã¡_¢_gë
(
a
Ë:Éxã¡_¢_gë(
b
));

2174 
	`exã¡_zî€d_£t
(
a
, 
	`exã¡_zî€d_gë
◊Ë&&Éxã¡_zî€d_gë(
b
));

2176 
	`exã¡_πªe_wrôe_acquúed
(
tsdn
, 
a_ñm_a
, 
b_ñm_b
, 
a
, 
NSIZES
, 
Ál£
);

2178 
	`exã¡_u∆ock2
(
tsdn
, 
a
, 
b
);

2180 
	`exã¡_dÆloc
(
tsdn
, 
	`exã¡_¨ía_gë
(
b
), b);

2182  
Ál£
;

2183 
	}
}

2185 
boﬁ


2186 
	$exã¡_mîge_wøµî
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
,

2187 
exã¡_hooks_t
 **
r_exã¡_hooks
, 
exã¡_t
 *
a
,Éxã¡_à*
b
) {

2188  
	`exã¡_mîge_im∂
(
tsdn
, 
¨ía
, 
r_exã¡_hooks
, 
a
, 
b
, 
Ál£
);

2189 
	}
}

2191 
boﬁ


2192 
	$exã¡_boŸ
() {

2193 i‡(
	`πªe_√w
(&
exã¡s_πªe
, 
åue
)) {

2194  
åue
;

2197 i‡(
	`muãx_poﬁ_öô
(&
exã¡_muãx_poﬁ
, "extent_mutex_pool",

2198 
WITNESS_RANK_EXTENT_POOL
)) {

2199  
åue
;

2202 i‡(
have_dss
) {

2203 
	`exã¡_dss_boŸ
();

2206  
Ál£
;

2207 
	}
}

	@src/extent_dss.c

1 
	#JEMALLOC_EXTENT_DSS_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/exã¡_dss.h
"

7 
	~"jemÆloc/öã∫Æ/•ö.h
"

12 c⁄° *
	g›t_dss
 = 
DSS_DEFAULT
;

14 c⁄° *
	gdss_¥ec_«mes
[] = {

27 
©omic_u_t
 
	gdss_¥ec_deÁu…
 = 
ATOMIC_INIT
(

28 ()
DSS_PREC_DEFAULT
);

31 *
	gdss_ba£
;

33 
©omic_b_t
 
	gdss_exãndög
;

35 
©omic_b_t
 
	gdss_exhau°ed
;

37 
©omic_p_t
 
	gdss_max
;

42 
	$exã¡_dss_sbrk
(
öçå_t
 
ö¸emít
) {

43 #ifde‡
JEMALLOC_DSS


44  
	`sbrk
(
ö¸emít
);

46 
	`nŸ_im∂emíãd
();

47  
NULL
;

49 
	}
}

51 
dss_¥ec_t


52 
	$exã¡_dss_¥ec_gë
() {

53 
dss_¥ec_t
 
ªt
;

55 i‡(!
have_dss
) {

56  
dss_¥ec_dißbÀd
;

58 
ªt
 = (
dss_¥ec_t
)
	`©omic_lﬂd_u
(&
dss_¥ec_deÁu…
, 
ATOMIC_ACQUIRE
);

59  
ªt
;

60 
	}
}

62 
boﬁ


63 
	$exã¡_dss_¥ec_£t
(
dss_¥ec_t
 
dss_¥ec
) {

64 i‡(!
have_dss
) {

65  (
dss_¥ec
 !
dss_¥ec_dißbÀd
);

67 
	`©omic_°‹e_u
(&
dss_¥ec_deÁu…
, ()
dss_¥ec
, 
ATOMIC_RELEASE
);

68  
Ál£
;

69 
	}
}

72 
	$exã¡_dss_exãndög_°¨t
() {

73 
•ö_t
 
•ö√r
 = 
SPIN_INITIALIZER
;

74 
åue
) {

75 
boﬁ
 
ex≥˘ed
 = 
Ál£
;

76 i‡(
	`©omic_com∑ª_exch™ge_wók_b
(&
dss_exãndög
, &
ex≥˘ed
,

77 
åue
, 
ATOMIC_ACQ_REL
, 
ATOMIC_RELAXED
)) {

80 
	`•ö_ad≠tive
(&
•ö√r
);

82 
	}
}

85 
	$exã¡_dss_exãndög_föish
() {

86 
	`as£π
(
	`©omic_lﬂd_b
(&
dss_exãndög
, 
ATOMIC_RELAXED
));

88 
	`©omic_°‹e_b
(&
dss_exãndög
, 
Ál£
, 
ATOMIC_RELEASE
);

89 
	}
}

92 
	$exã¡_dss_max_upd©e
(*
√w_addr
) {

97 *
max_cur
 = 
	`exã¡_dss_sbrk
(0);

98 i‡(
max_cur
 == (*)-1) {

99  
NULL
;

101 
	`©omic_°‹e_p
(&
dss_max
, 
max_cur
, 
ATOMIC_RELEASE
);

103 i‡(
√w_addr
 !
NULL
 && 
max_cur
 !=Çew_addr) {

104  
NULL
;

106  
max_cur
;

107 
	}
}

110 
	$exã¡_Æloc_dss
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, *
√w_addr
, 
size_t
 
size
,

111 
size_t
 
Æignmít
, 
boﬁ
 *
zîo
, boﬁ *
commô
) {

112 
exã¡_t
 *
g≠
;

114 
	`ˇs£π
(
have_dss
);

115 
	`as£π
(
size
 > 0);

116 
	`as£π
(
Æignmít
 > 0);

122 i‡((
öçå_t
)
size
 < 0) {

123  
NULL
;

126 
g≠
 = 
	`exã¡_Æloc
(
tsdn
, 
¨ía
);

127 i‡(
g≠
 =
NULL
) {

128  
NULL
;

131 
	`exã¡_dss_exãndög_°¨t
();

132 i‡(!
	`©omic_lﬂd_b
(&
dss_exhau°ed
, 
ATOMIC_ACQUIRE
)) {

138 
åue
) {

139 *
max_cur
 = 
	`exã¡_dss_max_upd©e
(
√w_addr
);

140 i‡(
max_cur
 =
NULL
) {

141 
œbñ_oom
;

149 *
g≠_addr_∑ge
 = (*)(
	`PAGE_CEILING
(

150 (
uöçå_t
)
max_cur
));

151 *
ªt
 = (*)
	`ALIGNMENT_CEILING
(

152 (
uöçå_t
)
g≠_addr_∑ge
, 
Æignmít
);

153 
size_t
 
g≠_size_∑ge
 = (
uöçå_t
)
ªt
 -

154 (
uöçå_t
)
g≠_addr_∑ge
;

155 i‡(
g≠_size_∑ge
 != 0) {

156 
	`exã¡_öô
(
g≠
, 
¨ía
, 
g≠_addr_∑ge
,

157 
g≠_size_∑ge
, 
Ál£
, 
NSIZES
,

158 
	`¨ía_exã¡_¢_√xt
(
¨ía
),

159 
exã¡_°©e_a˘ive
, 
Ál£
, 
åue
,Årue);

165 *
dss_√xt
 = (*)((
uöçå_t
)
ªt
 + 
size
);

166 i‡((
uöçå_t
)
ªt
 < (uöçå_t)
max_cur
 ||

167 (
uöçå_t
)
dss_√xt
 < (uöçå_t)
max_cur
) {

168 
œbñ_oom
;

171 *
g≠_addr_sub∑ge
 = 
max_cur
;

172 
size_t
 
g≠_size_sub∑ge
 = (
uöçå_t
)
ªt
 -

173 (
uöçå_t
)
g≠_addr_sub∑ge
;

174 
öçå_t
 
ö¸
 = 
g≠_size_sub∑ge
 + 
size
;

176 
	`as£π
((
uöçå_t
)
max_cur
 + 
ö¸
 =(uöçå_t)
ªt
 +

177 
size
);

180 *
dss_¥ev
 = 
	`exã¡_dss_sbrk
(
ö¸
);

181 i‡(
dss_¥ev
 =
max_cur
) {

183 
	`©omic_°‹e_p
(&
dss_max
, 
dss_√xt
,

184 
ATOMIC_RELEASE
);

185 
	`exã¡_dss_exãndög_föish
();

187 i‡(
g≠_size_∑ge
 != 0) {

188 
	`exã¡_dÆloc_g≠
(
tsdn
, 
¨ía
, 
g≠
);

190 
	`exã¡_dÆloc
(
tsdn
, 
¨ía
, 
g≠
);

192 i‡(!*
commô
) {

193 *
commô
 = 
	`∑ges_decommô
(
ªt
, 
size
);

195 i‡(*
zîo
 && *
commô
) {

196 
exã¡_hooks_t
 *
exã¡_hooks
 =

197 
EXTENT_HOOKS_INITIALIZER
;

198 
exã¡_t
 
exã¡
;

200 
	`exã¡_öô
(&
exã¡
, 
¨ía
, 
ªt
, 
size
,

201 
size
, 
Ál£
, 
NSIZES
,

202 
exã¡_°©e_a˘ive
, 
Ál£
, 
åue
,

203 
åue
);

204 i‡(
	`exã¡_purge_f‹˚d_wøµî
(
tsdn
,

205 
¨ía
, &
exã¡_hooks
, &
exã¡
, 0,

206 
size
)) {

207 
	`mem£t
(
ªt
, 0, 
size
);

210  
ªt
;

216 i‡(
dss_¥ev
 == (*)-1) {

218 
	`©omic_°‹e_b
(&
dss_exhau°ed
, 
åue
,

219 
ATOMIC_RELEASE
);

220 
œbñ_oom
;

224 
œbñ_oom
:

225 
	`exã¡_dss_exãndög_föish
();

226 
	`exã¡_dÆloc
(
tsdn
, 
¨ía
, 
g≠
);

227  
NULL
;

228 
	}
}

230 
boﬁ


231 
	$exã¡_ö_dss_hñ≥r
(*
addr
, *
max
) {

232  ((
uöçå_t
)
addr
 >(uöçå_t)
dss_ba£
 && (uintptr_t)addr <

233 (
uöçå_t
)
max
);

234 
	}
}

236 
boﬁ


237 
	$exã¡_ö_dss
(*
addr
) {

238 
	`ˇs£π
(
have_dss
);

240  
	`exã¡_ö_dss_hñ≥r
(
addr
, 
	`©omic_lﬂd_p
(&
dss_max
,

241 
ATOMIC_ACQUIRE
));

242 
	}
}

244 
boﬁ


245 
	$exã¡_dss_mîgóbÀ
(*
addr_a
, *
addr_b
) {

246 *
max
;

248 
	`ˇs£π
(
have_dss
);

250 i‡((
uöçå_t
)
addr_a
 < (uöçå_t)
dss_ba£
 && (uöçå_t)
addr_b
 <

251 (
uöçå_t
)
dss_ba£
) {

252  
åue
;

255 
max
 = 
	`©omic_lﬂd_p
(&
dss_max
, 
ATOMIC_ACQUIRE
);

256  (
	`exã¡_ö_dss_hñ≥r
(
addr_a
, 
max
) ==

257 
	`exã¡_ö_dss_hñ≥r
(
addr_b
, 
max
));

258 
	}
}

261 
	$exã¡_dss_boŸ
() {

262 
	`ˇs£π
(
have_dss
);

264 
dss_ba£
 = 
	`exã¡_dss_sbrk
(0);

265 
	`©omic_°‹e_b
(&
dss_exãndög
, 
Ál£
, 
ATOMIC_RELAXED
);

266 
	`©omic_°‹e_b
(&
dss_exhau°ed
, 
dss_ba£
 =(*)-1, 
ATOMIC_RELAXED
);

267 
	`©omic_°‹e_p
(&
dss_max
, 
dss_ba£
, 
ATOMIC_RELAXED
);

268 
	}
}

	@src/extent_mmap.c

1 
	#JEMALLOC_EXTENT_MMAP_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/exã¡_mm≠.h
"

11 
boﬁ
 
	g›t_ªèö
 =

12 #ifde‡
JEMALLOC_RETAIN


13 
åue


15 
Ál£


22 
	$exã¡_Æloc_mm≠
(*
√w_addr
, 
size_t
 
size
, size_à
Æignmít
, 
boﬁ
 *
zîo
,

23 
boﬁ
 *
commô
) {

24 *
ªt
 = 
	`∑ges_m≠
(
√w_addr
, 
size
, 
	`ALIGNMENT_CEILING
(
Æignmít
,

25 
PAGE
), 
commô
);

26 i‡(
ªt
 =
NULL
) {

27  
NULL
;

29 
	`as£π
(
ªt
 !
NULL
);

30 i‡(*
commô
) {

31 *
zîo
 = 
åue
;

33  
ªt
;

34 
	}
}

36 
boﬁ


37 
	$exã¡_dÆloc_mm≠
(*
addr
, 
size_t
 
size
) {

38 i‡(!
›t_ªèö
) {

39 
	`∑ges_unm≠
(
addr
, 
size
);

41  
›t_ªèö
;

42 
	}
}

	@src/hash.c

1 
	#JEMALLOC_HASH_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

	@src/hooks.c

1 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

8 
JEMALLOC_EXPORT


9 (*
	ghooks_¨ía_√w_hook
)(Ë
NULL
;

11 
JEMALLOC_EXPORT


12 (*
	ghooks_libc_hook
)(Ë
NULL
;

	@src/jemalloc.c

1 
	#JEMALLOC_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/©omic.h
"

7 
	~"jemÆloc/öã∫Æ/˘l.h
"

8 
	~"jemÆloc/öã∫Æ/exã¡_dss.h
"

9 
	~"jemÆloc/öã∫Æ/exã¡_mm≠.h
"

10 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ty≥s.h
"

11 
	~"jemÆloc/öã∫Æ/log.h
"

12 
	~"jemÆloc/öã∫Æ/mÆloc_io.h
"

13 
	~"jemÆloc/öã∫Æ/muãx.h
"

14 
	~"jemÆloc/öã∫Æ/πªe.h
"

15 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

16 
	~"jemÆloc/öã∫Æ/•ö.h
"

17 
	~"jemÆloc/öã∫Æ/sz.h
"

18 
	~"jemÆloc/öã∫Æ/tickî.h
"

19 
	~"jemÆloc/öã∫Æ/utû.h
"

25 c⁄° *
	gje_mÆloc_c⁄f


26 #i‚de‡
_WIN32


27 
	$JEMALLOC_ATTR
(
wók
)

30 
boﬁ
 
›t_ab‹t
 =

31 #ifde‡
JEMALLOC_DEBUG


32 
åue


34 
Ál£


37 
boﬁ
 
›t_ab‹t_c⁄f
 =

38 #ifde‡
JEMALLOC_DEBUG


39 
åue


41 
Ál£


44 c⁄° *
›t_junk
 =

45 #i‡(
	`deföed
(
JEMALLOC_DEBUG
Ë&& deföed(
JEMALLOC_FILL
))

51 
boﬁ
 
›t_junk_Æloc
 =

52 #i‡(
	`deföed
(
JEMALLOC_DEBUG
Ë&& deföed(
JEMALLOC_FILL
))

53 
åue


55 
Ál£


58 
boﬁ
 
›t_junk_‰ì
 =

59 #i‡(
	`deföed
(
JEMALLOC_DEBUG
Ë&& deföed(
JEMALLOC_FILL
))

60 
åue


62 
Ál£


66 
boﬁ
 
›t_uåa˚
 = 
Ál£
;

67 
boﬁ
 
›t_xmÆloc
 = 
Ál£
;

68 
boﬁ
 
›t_zîo
 = 
Ál£
;

69 
›t_«ª«s
 = 0;

71 
n˝us
;

74 
mÆloc_muãx_t
 
¨ías_lock
;

85 
	$JEMALLOC_ALIGNED
(
CACHELINE
)

86 
©omic_p_t
 
¨ías
[
MALLOCX_ARENA_LIMIT
];

87 
©omic_u_t
 
«ª«s_tŸÆ
;

88 
¨ía_t
 *
a0
;

89 
«ª«s_auto
;

92 
mÆloc_öô_unöôülized
 = 3,

93 
mÆloc_öô_a0_öôülized
 = 2,

94 
mÆloc_öô_ªcursibÀ
 = 1,

95 
mÆloc_öô_öôülized
 = 0

96 } 
	tmÆloc_öô_t
;

97 
mÆloc_öô_t
 
mÆloc_öô_°©e
 = 
mÆloc_öô_unöôülized
;

100 
boﬁ
 
mÆloc_¶ow
 = 
åue
;

104 
Êag_›t_junk_Æloc
 = (1U),

105 
Êag_›t_junk_‰ì
 = (1U << 1),

106 
Êag_›t_zîo
 = (1U << 2),

107 
Êag_›t_uåa˚
 = (1U << 3),

108 
Êag_›t_xmÆloc
 = (1U << 4)

110 
uöt8_t
 
mÆloc_¶ow_Êags
;

112 #ifde‡
JEMALLOC_THREADED_INIT


114 
	#NO_INITIALIZER
 (()0)

	)

115 
	#INITIALIZER
 
	`±hªad_£lf
()

	)

116 
	#IS_INITIALIZER
 (
mÆloc_öôülizî
 =
	`±hªad_£lf
())

	)

117 
±hªad_t
 
mÆloc_öôülizî
 = 
NO_INITIALIZER
;

119 
	#NO_INITIALIZER
 
Ál£


	)

120 
	#INITIALIZER
 
åue


	)

121 
	#IS_INITIALIZER
 
mÆloc_öôülizî


	)

122 
boﬁ
 
mÆloc_öôülizî
 = 
NO_INITIALIZER
;

126 #ifde‡
_WIN32


127 #i‡
_WIN32_WINNT
 >= 0x0600

128 
mÆloc_muãx_t
 
öô_lock
 = 
SRWLOCK_INIT
;

130 
mÆloc_muãx_t
 
öô_lock
;

131 
boﬁ
 
öô_lock_öôülized
 = 
Ál£
;

133 
	$JEMALLOC_ATTR
(
c⁄°ru˘‹
)

134 
WINAPI


135 
	$_öô_öô_lock
() {

146 i‡(!
öô_lock_öôülized
) {

147 
	`mÆloc_muãx_öô
(&
öô_lock
, "öô", 
WITNESS_RANK_INIT
,

148 
mÆloc_muãx_ønk_ex˛usive
);

150 
öô_lock_öôülized
 = 
åue
;

151 
	}
}

153 #ifde‡
_MSC_VER


154 #¥agm®
£˘i⁄
(".CRT$XCU", 
ªad
)

155 
JEMALLOC_SECTION
(".CRT$XCU"Ë
	$JEMALLOC_ATTR
(
u£d
)

156 c⁄° (
WINAPI
 *
öô_öô_lock
)(Ë
_öô_öô_lock
;

160 
mÆloc_muãx_t
 
öô_lock
 = 
MALLOC_MUTEX_INITIALIZER
;

164 *
p
;

165 
size_t
 
s
;

166 *
r
;

167 } 
	tmÆloc_uåa˚_t
;

169 #ifde‡
JEMALLOC_UTRACE


170 
	#UTRACE
(
a
, 
b
, 
c
) do { \

171 i‡(
	`u∆ikñy
(
›t_uåa˚
)) { \

172 
uåa˚_£ºno
 = 
î∫o
; \

173 
mÆloc_uåa˚_t
 
ut
; \

174 
ut
.
p
 = (
a
); \

175 
ut
.
s
 = (
b
); \

176 
ut
.
r
 = (
c
); \

177 
	`uåa˚
(&
ut
, (ut)); \

178 
î∫o
 = 
uåa˚_£ºno
; \

180 
	}
} 0)

	)

182 
	#UTRACE
(
a
, 
b
, 
c
)

	)

186 
boﬁ
 
	ghad_c⁄f_îr‹
 = 
Ál£
;

194 
boﬁ
 
mÆloc_öô_h¨d_a0
();

195 
boﬁ
 
mÆloc_öô_h¨d
();

202 
boﬁ


203 
	$mÆloc_öôülized
() {

204  (
mÆloc_öô_°©e
 =
mÆloc_öô_öôülized
);

205 
	}
}

207 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


208 
	$mÆloc_öô_a0
() {

209 i‡(
	`u∆ikñy
(
mÆloc_öô_°©e
 =
mÆloc_öô_unöôülized
)) {

210  
	`mÆloc_öô_h¨d_a0
();

212  
Ál£
;

213 
	}
}

215 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


216 
	$mÆloc_öô
() {

217 i‡(
	`u∆ikñy
(!
	`mÆloc_öôülized
()Ë&& 
	`mÆloc_öô_h¨d
()) {

218  
åue
;

220  
Ál£
;

221 
	}
}

229 
	$a0üŒoc
(
size_t
 
size
, 
boﬁ
 
zîo
, boﬁ 
is_öã∫Æ
) {

230 i‡(
	`u∆ikñy
(
	`mÆloc_öô_a0
())) {

231  
NULL
;

234  
	`üŒocztm
(
TSDN_NULL
, 
size
, 
	`sz_size2ödex
(size), 
zîo
, 
NULL
,

235 
is_öã∫Æ
, 
	`¨ía_gë
(
TSDN_NULL
, 0, 
åue
),Årue);

236 
	}
}

239 
	$a0idÆloc
(*
±r
, 
boﬁ
 
is_öã∫Æ
) {

240 
	`idÆlo˘m
(
TSDN_NULL
, 
±r
, 
NULL
, NULL, 
is_öã∫Æ
, 
åue
);

241 
	}
}

244 
	$a0mÆloc
(
size_t
 
size
) {

245  
	`a0üŒoc
(
size
, 
Ál£
, 
åue
);

246 
	}
}

249 
	$a0dÆloc
(*
±r
) {

250 
	`a0idÆloc
(
±r
, 
åue
);

251 
	}
}

260 
	$boŸ°øp_mÆloc
(
size_t
 
size
) {

261 i‡(
	`u∆ikñy
(
size
 == 0)) {

262 
size
 = 1;

265  
	`a0üŒoc
(
size
, 
Ál£
, false);

266 
	}
}

269 
	$boŸ°øp_ˇŒoc
(
size_t
 
num
, size_à
size
) {

270 
size_t
 
num_size
;

272 
num_size
 = 
num
 * 
size
;

273 i‡(
	`u∆ikñy
(
num_size
 == 0)) {

274 
	`as£π
(
num
 =0 || 
size
 == 0);

275 
num_size
 = 1;

278  
	`a0üŒoc
(
num_size
, 
åue
, 
Ál£
);

279 
	}
}

282 
	$boŸ°øp_‰ì
(*
±r
) {

283 i‡(
	`u∆ikñy
(
±r
 =
NULL
)) {

287 
	`a0idÆloc
(
±r
, 
Ál£
);

288 
	}
}

291 
	$¨ía_£t
(
öd
, 
¨ía_t
 *
¨ía
) {

292 
	`©omic_°‹e_p
(&
¨ías
[
öd
], 
¨ía
, 
ATOMIC_RELEASE
);

293 
	}
}

296 
	$«ª«s_tŸÆ_£t
(
«ª«s
) {

297 
	`©omic_°‹e_u
(&
«ª«s_tŸÆ
, 
«ª«s
, 
ATOMIC_RELEASE
);

298 
	}
}

301 
	$«ª«s_tŸÆ_öc
() {

302 
	`©omic_„tch_add_u
(&
«ª«s_tŸÆ
, 1, 
ATOMIC_RELEASE
);

303 
	}
}

306 
	$«ª«s_tŸÆ_gë
() {

307  
	`©omic_lﬂd_u
(&
«ª«s_tŸÆ
, 
ATOMIC_ACQUIRE
);

308 
	}
}

311 
¨ía_t
 *

312 
	$¨ía_öô_locked
(
tsdn_t
 *
tsdn
, 
öd
, 
exã¡_hooks_t
 *
exã¡_hooks
) {

313 
¨ía_t
 *
¨ía
;

315 
	`as£π
(
öd
 <
	`«ª«s_tŸÆ_gë
());

316 i‡(
öd
 >
MALLOCX_ARENA_LIMIT
) {

317  
NULL
;

319 i‡(
öd
 =
	`«ª«s_tŸÆ_gë
()) {

320 
	`«ª«s_tŸÆ_öc
();

327 
¨ía
 = 
	`¨ía_gë
(
tsdn
, 
öd
, 
Ál£
);

328 i‡(
¨ía
 !
NULL
) {

329 
	`as£π
(
öd
 < 
«ª«s_auto
);

330  
¨ía
;

334 
¨ía
 = 
	`¨ía_√w
(
tsdn
, 
öd
, 
exã¡_hooks
);

336  
¨ía
;

337 
	}
}

340 
	$¨ía_√w_¸óã_background_thªad
(
tsdn_t
 *
tsdn
, 
öd
) {

341 i‡(
öd
 == 0) {

344 i‡(
have_background_thªad
) {

345 
boﬁ
 
îr
;

346 
	`mÆloc_muãx_lock
(
tsdn
, &
background_thªad_lock
);

347 
îr
 = 
	`background_thªad_¸óã
(
	`tsdn_tsd
(
tsdn
), 
öd
);

348 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
background_thªad_lock
);

349 i‡(
îr
) {

350 
	`mÆloc_¥ötf
("<jemalloc>:Érror in backgroundÅhread "

351 "¸óti⁄ f‹áª« %u. Ab‹t.\n", 
öd
);

352 
	`ab‹t
();

355 
	}
}

357 
¨ía_t
 *

358 
	$¨ía_öô
(
tsdn_t
 *
tsdn
, 
öd
, 
exã¡_hooks_t
 *
exã¡_hooks
) {

359 
¨ía_t
 *
¨ía
;

361 
	`mÆloc_muãx_lock
(
tsdn
, &
¨ías_lock
);

362 
¨ía
 = 
	`¨ía_öô_locked
(
tsdn
, 
öd
, 
exã¡_hooks
);

363 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ías_lock
);

365 
	`¨ía_√w_¸óã_background_thªad
(
tsdn
, 
öd
);

367  
¨ía
;

368 
	}
}

371 
	$¨ía_böd
(
tsd_t
 *
tsd
, 
öd
, 
boﬁ
 
öã∫Æ
) {

372 
¨ía_t
 *
¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
öd
, 
Ál£
);

373 
	`¨ía_¡hªads_öc
(
¨ía
, 
öã∫Æ
);

375 i‡(
öã∫Æ
) {

376 
	`tsd_üª«_£t
(
tsd
, 
¨ía
);

378 
	`tsd_¨ía_£t
(
tsd
, 
¨ía
);

380 
	}
}

383 
	$¨ía_migøã
(
tsd_t
 *
tsd
, 
ﬁdöd
, 
√wöd
) {

384 
¨ía_t
 *
ﬁd¨ía
, *
√w¨ía
;

386 
ﬁd¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
ﬁdöd
, 
Ál£
);

387 
√w¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
√wöd
, 
Ál£
);

388 
	`¨ía_¡hªads_dec
(
ﬁd¨ía
, 
Ál£
);

389 
	`¨ía_¡hªads_öc
(
√w¨ía
, 
Ál£
);

390 
	`tsd_¨ía_£t
(
tsd
, 
√w¨ía
);

391 
	}
}

394 
	$¨ía_unböd
(
tsd_t
 *
tsd
, 
öd
, 
boﬁ
 
öã∫Æ
) {

395 
¨ía_t
 *
¨ía
;

397 
¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
öd
, 
Ál£
);

398 
	`¨ía_¡hªads_dec
(
¨ía
, 
öã∫Æ
);

400 i‡(
öã∫Æ
) {

401 
	`tsd_üª«_£t
(
tsd
, 
NULL
);

403 
	`tsd_¨ía_£t
(
tsd
, 
NULL
);

405 
	}
}

407 
¨ía_td©a_t
 *

408 
	$¨ía_td©a_gë_h¨d
(
tsd_t
 *
tsd
, 
öd
) {

409 
¨ía_td©a_t
 *
td©a
, *
¨ías_td©a_ﬁd
;

410 
¨ía_td©a_t
 *
¨ías_td©a
 = 
	`tsd_¨ías_td©a_gë
(
tsd
);

411 
«ª«s_td©a_ﬁd
, 
i
;

412 
«ª«s_td©a
 = 
	`tsd_«ª«s_td©a_gë
(
tsd
);

413 
«ª«s_a˘uÆ
 = 
	`«ª«s_tŸÆ_gë
();

419 i‡(
¨ías_td©a
 !
NULL
 && 
«ª«s_td©a
 < 
«ª«s_a˘uÆ
) {

420 
¨ías_td©a_ﬁd
 = 
¨ías_td©a
;

421 
«ª«s_td©a_ﬁd
 = 
«ª«s_td©a
;

422 
¨ías_td©a
 = 
NULL
;

423 
«ª«s_td©a
 = 0;

424 
	`tsd_¨ías_td©a_£t
(
tsd
, 
¨ías_td©a
);

425 
	`tsd_«ª«s_td©a_£t
(
tsd
, 
«ª«s_td©a
);

427 
¨ías_td©a_ﬁd
 = 
NULL
;

428 
«ª«s_td©a_ﬁd
 = 0;

432 i‡(
¨ías_td©a
 =
NULL
) {

433 
boﬁ
 *
¨ías_td©a_by∑s•
 = 
	`tsd_¨ías_td©a_by∑s•_gë
(
tsd
);

434 
«ª«s_td©a
 = (
öd
 < 
«ª«s_a˘uÆ
) ?Çarenas_actual : ind+1;

436 i‡(
	`tsd_nomöÆ
(
tsd
Ë&& !*
¨ías_td©a_by∑s•
) {

437 *
¨ías_td©a_by∑s•
 = 
åue
;

438 
¨ías_td©a
 = (
¨ía_td©a_t
 *)
	`a0mÆloc
(

439 (
¨ía_td©a_t
Ë* 
«ª«s_td©a
);

440 *
¨ías_td©a_by∑s•
 = 
Ál£
;

442 i‡(
¨ías_td©a
 =
NULL
) {

443 
td©a
 = 
NULL
;

444 
œbñ_ªtu∫
;

446 
	`as£π
(
	`tsd_nomöÆ
(
tsd
Ë&& !*
¨ías_td©a_by∑s•
);

447 
	`tsd_¨ías_td©a_£t
(
tsd
, 
¨ías_td©a
);

448 
	`tsd_«ª«s_td©a_£t
(
tsd
, 
«ª«s_td©a
);

460 
i
 = 0; i < 
«ª«s_a˘uÆ
; i++) {

461 i‡(
i
 < 
«ª«s_td©a_ﬁd
) {

462 
	`tickî_c›y
(&
¨ías_td©a
[
i
].
deˇy_tickî
,

463 &
¨ías_td©a_ﬁd
[
i
].
deˇy_tickî
);

465 
	`tickî_öô
(&
¨ías_td©a
[
i
].
deˇy_tickî
,

466 
DECAY_NTICKS_PER_UPDATE
);

469 i‡(
«ª«s_td©a
 > 
«ª«s_a˘uÆ
) {

470 
	`mem£t
(&
¨ías_td©a
[
«ª«s_a˘uÆ
], 0, (
¨ía_td©a_t
)

471 * (
«ª«s_td©a
 - 
«ª«s_a˘uÆ
));

475 
td©a
 = &
¨ías_td©a
[
öd
];

476 
œbñ_ªtu∫
:

477 i‡(
¨ías_td©a_ﬁd
 !
NULL
) {

478 
	`a0dÆloc
(
¨ías_td©a_ﬁd
);

480  
td©a
;

481 
	}
}

484 
¨ía_t
 *

485 
	$¨ía_choo£_h¨d
(
tsd_t
 *
tsd
, 
boﬁ
 
öã∫Æ
) {

486 
¨ía_t
 *
ªt
 
	`JEMALLOC_CC_SILENCE_INIT
(
NULL
);

488 i‡(
have_≥r˝u_¨ía
 && 
	`PERCPU_ARENA_ENABLED
(
›t_≥r˝u_¨ía
)) {

489 
choo£
 = 
	`≥r˝u_¨ía_choo£
();

490 
ªt
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
choo£
, 
åue
);

491 
	`as£π
(
ªt
 !
NULL
);

492 
	`¨ía_böd
(
tsd
, 
	`¨ía_öd_gë
(
ªt
), 
Ál£
);

493 
	`¨ía_böd
(
tsd
, 
	`¨ía_öd_gë
(
ªt
), 
åue
);

495  
ªt
;

498 i‡(
«ª«s_auto
 > 1) {

499 
i
, 
j
, 
choo£
[2], 
fú°_nuŒ
;

500 
boﬁ
 
is_√w_¨ía
[2];

510 
j
 = 0; j < 2; j++) {

511 
choo£
[
j
] = 0;

512 
is_√w_¨ía
[
j
] = 
Ál£
;

515 
fú°_nuŒ
 = 
«ª«s_auto
;

516 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
¨ías_lock
);

517 
	`as£π
(
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 0, 
Ál£
Ë!
NULL
);

518 
i
 = 1; i < 
«ª«s_auto
; i++) {

519 i‡(
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
i
, 
Ál£
Ë!
NULL
) {

524 
j
 = 0; j < 2; j++) {

525 i‡(
	`¨ía_¡hªads_gë
(
	`¨ía_gë
(

526 
	`tsd_tsdn
(
tsd
), 
i
, 
Ál£
), !!
j
) <

527 
	`¨ía_¡hªads_gë
(
	`¨ía_gë
(

528 
	`tsd_tsdn
(
tsd
), 
choo£
[
j
], 
Ál£
),

529 !!
j
)) {

530 
choo£
[
j
] = 
i
;

533 } i‡(
fú°_nuŒ
 =
«ª«s_auto
) {

543 
fú°_nuŒ
 = 
i
;

547 
j
 = 0; j < 2; j++) {

548 i‡(
	`¨ía_¡hªads_gë
(
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
),

549 
choo£
[
j
], 
Ál£
), !!jË=0 || 
fú°_nuŒ
 ==

550 
«ª«s_auto
) {

555 i‡(!!
j
 =
öã∫Æ
) {

556 
ªt
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
),

557 
choo£
[
j
], 
Ál£
);

560 
¨ía_t
 *
¨ía
;

563 
choo£
[
j
] = 
fú°_nuŒ
;

564 
¨ía
 = 
	`¨ía_öô_locked
(
	`tsd_tsdn
(
tsd
),

565 
choo£
[
j
],

566 (
exã¡_hooks_t
 *)&
exã¡_hooks_deÁu…
);

567 i‡(
¨ía
 =
NULL
) {

568 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
),

569 &
¨ías_lock
);

570  
NULL
;

572 
is_√w_¨ía
[
j
] = 
åue
;

573 i‡(!!
j
 =
öã∫Æ
) {

574 
ªt
 = 
¨ía
;

577 
	`¨ía_böd
(
tsd
, 
choo£
[
j
], !!j);

579 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
¨ías_lock
);

581 
j
 = 0; j < 2; j++) {

582 i‡(
is_√w_¨ía
[
j
]) {

583 
	`as£π
(
choo£
[
j
] > 0);

584 
	`¨ía_√w_¸óã_background_thªad
(

585 
	`tsd_tsdn
(
tsd
), 
choo£
[
j
]);

590 
ªt
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 0, 
Ál£
);

591 
	`¨ía_böd
(
tsd
, 0, 
Ál£
);

592 
	`¨ía_böd
(
tsd
, 0, 
åue
);

595  
ªt
;

596 
	}
}

599 
	$üª«_˛ónup
(
tsd_t
 *
tsd
) {

600 
¨ía_t
 *
üª«
;

602 
üª«
 = 
	`tsd_üª«_gë
(
tsd
);

603 i‡(
üª«
 !
NULL
) {

604 
	`¨ía_unböd
(
tsd
, 
	`¨ía_öd_gë
(
üª«
), 
åue
);

606 
	}
}

609 
	$¨ía_˛ónup
(
tsd_t
 *
tsd
) {

610 
¨ía_t
 *
¨ía
;

612 
¨ía
 = 
	`tsd_¨ía_gë
(
tsd
);

613 i‡(
¨ía
 !
NULL
) {

614 
	`¨ía_unböd
(
tsd
, 
	`¨ía_öd_gë
(
¨ía
), 
Ál£
);

616 
	}
}

619 
	$¨ías_td©a_˛ónup
(
tsd_t
 *
tsd
) {

620 
¨ía_td©a_t
 *
¨ías_td©a
;

623 *
	`tsd_¨ías_td©a_by∑s•_gë
(
tsd
Ë
åue
;

625 
¨ías_td©a
 = 
	`tsd_¨ías_td©a_gë
(
tsd
);

626 i‡(
¨ías_td©a
 !
NULL
) {

627 
	`tsd_¨ías_td©a_£t
(
tsd
, 
NULL
);

628 
	`a0dÆloc
(
¨ías_td©a
);

630 
	}
}

633 
	$°©s_¥öt_©exô
() {

634 i‡(
c⁄fig_°©s
) {

635 
tsdn_t
 *
tsdn
;

636 
«ª«s
, 
i
;

638 
tsdn
 = 
	`tsdn_„tch
();

647 
i
 = 0, 
«ª«s
 = 
	`«ª«s_tŸÆ_gë
(); i <Çarenas; i++) {

648 
¨ía_t
 *
¨ía
 = 
	`¨ía_gë
(
tsdn
, 
i
, 
Ál£
);

649 i‡(
¨ía
 !
NULL
) {

650 
tˇche_t
 *
tˇche
;

652 
	`mÆloc_muãx_lock
(
tsdn
, &
¨ía
->
tˇche_ql_mtx
);

653 
	`ql_f‹óch
(
tˇche
, &
¨ía
->
tˇche_ql
, 
lök
) {

654 
	`tˇche_°©s_mîge
(
tsdn
, 
tˇche
, 
¨ía
);

656 
	`mÆloc_muãx_u∆ock
(
tsdn
,

657 &
¨ía
->
tˇche_ql_mtx
);

661 
	`je_mÆloc_°©s_¥öt
(
NULL
, NULL, 
›t_°©s_¥öt_›ts
);

662 
	}
}

669 
JEMALLOC_ALWAYS_INLINE
 

670 
	$check_íåy_exô_lockög
(
tsdn_t
 *
tsdn
) {

671 i‡(!
c⁄fig_debug
) {

674 i‡(
	`tsdn_nuŒ
(
tsdn
)) {

677 
tsd_t
 *
tsd
 = 
	`tsdn_tsd
(
tsdn
);

682 
öt8_t
 
ªíå™cy_Àvñ
 = 
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
);

683 i‡(
ªíå™cy_Àvñ
 != 0) {

686 
	`wô√ss_as£π_lockÀss
(
	`tsdn_wô√ss_tsdp_gë
(
tsdn
));

687 
	}
}

698 
	$jemÆloc_£cuª_gëív
(c⁄° *
«me
) {

699 #ifde‡
JEMALLOC_HAVE_SECURE_GETENV


700  
	`£cuª_gëív
(
«me
);

702 #ifde‡
JEMALLOC_HAVE_ISSETUGID


703 i‡(
	`is£tugid
() != 0) {

704  
NULL
;

707  
	`gëív
(
«me
);

709 
	}
}

712 
	$mÆloc_n˝us
() {

713 
ªsu…
;

715 #ifde‡
_WIN32


716 
SYSTEM_INFO
 
si
;

717 
	`GëSy°emInfo
(&
si
);

718 
ªsu…
 = 
si
.
dwNumbîOfPro˚ss‹s
;

719 #ñi‡
	`deföed
(
JEMALLOC_GLIBC_MALLOC_HOOK
Ë&& deföed(
CPU_COUNT
)

728 
˝u_£t_t
 
£t
;

730 
	`±hªad_gëafföôy_≈
(
	`±hªad_£lf
(), (
£t
), &set);

731 
ªsu…
 = 
	`CPU_COUNT
(&
£t
);

734 
ªsu…
 = 
	`sysc⁄f
(
_SC_NPROCESSORS_ONLN
);

736  ((
ªsu…
 == -1) ? 1 : ()result);

737 
	}
}

740 
	$öô_›t_°©s_¥öt_›ts
(c⁄° *
v
, 
size_t
 
vÀn
) {

741 
size_t
 
›ts_Àn
 = 
	`°æí
(
›t_°©s_¥öt_›ts
);

742 
	`as£π
(
›ts_Àn
 <
°©s_¥öt_tŸ_num_›ti⁄s
);

744 
size_t
 
i
 = 0; i < 
vÀn
; i++) {

745 
v
[
i
]) {

746 
	#OPTION
(
o
, 
v
, 
d
, 
s
Ëo: ;

	)

747 
STATS_PRINT_OPTIONS


748 #unde‡
OPTION


752 i‡(
	`°rchr
(
›t_°©s_¥öt_›ts
, 
v
[
i
]Ë!
NULL
) {

757 
›t_°©s_¥öt_›ts
[
›ts_Àn
++] = 
v
[
i
];

758 
›t_°©s_¥öt_›ts
[
›ts_Àn
] = '\0';

759 
	`as£π
(
›ts_Àn
 <
°©s_¥öt_tŸ_num_›ti⁄s
);

761 
	`as£π
(
›ts_Àn
 =
	`°æí
(
›t_°©s_¥öt_›ts
));

762 
	}
}

764 
boﬁ


765 
	$mÆloc_c⁄f_√xt
(c⁄° **
›ts_p
, c⁄° **
k_p
, 
size_t
 *
kÀn_p
,

766 c⁄° **
v_p
, 
size_t
 *
vÀn_p
) {

767 
boﬁ
 
ac˚±
;

768 c⁄° *
›ts
 = *
›ts_p
;

770 *
k_p
 = 
›ts
;

772 
ac˚±
 = 
Ál£
; !accept;) {

773 *
›ts
) {

787 
›ts
++;

790 
›ts
++;

791 *
kÀn_p
 = (
uöçå_t
)
›ts
 - 1 - (uöçå_t)*
k_p
;

792 *
v_p
 = 
›ts
;

793 
ac˚±
 = 
åue
;

796 i‡(
›ts
 !*
›ts_p
) {

797 
	`mÆloc_wrôe
("<jemalloc>: Conf stringÉnds "

800  
åue
;

802 
	`mÆloc_wrôe
("<jemalloc>: Malformed conf string\n");

803  
åue
;

807 
ac˚±
 = 
Ál£
; !accept;) {

808 *
›ts
) {

810 
›ts
++;

818 i‡(*
›ts
 == '\0') {

819 
	`mÆloc_wrôe
("<jemalloc>: Conf stringÉnds "

822 *
vÀn_p
 = (
uöçå_t
)
›ts
 - 1 - (uöçå_t)*
v_p
;

823 
ac˚±
 = 
åue
;

826 *
vÀn_p
 = (
uöçå_t
)
›ts
 - (uöçå_t)*
v_p
;

827 
ac˚±
 = 
åue
;

830 
›ts
++;

835 *
›ts_p
 = 
›ts
;

836  
Ál£
;

837 
	}
}

840 
	$mÆloc_ab‹t_övÆid_c⁄f
() {

841 
	`as£π
(
›t_ab‹t_c⁄f
);

842 
	`mÆloc_¥ötf
("<jemalloc>: Abort (abort_conf:true) on invalid conf "

844 
	`ab‹t
();

845 
	}
}

848 
	$mÆloc_c⁄f_îr‹
(c⁄° *
msg
, c⁄° *
k
, 
size_t
 
kÀn
, c⁄° *
v
,

849 
size_t
 
vÀn
) {

850 
	`mÆloc_¥ötf
("<jemÆloc>: %s: %.*s:%.*s\n", 
msg
, ()
kÀn
, 
k
,

851 ()
vÀn
, 
v
);

852 
had_c⁄f_îr‹
 = 
åue
;

853 i‡(
›t_ab‹t_c⁄f
) {

854 
	`mÆloc_ab‹t_övÆid_c⁄f
();

856 
	}
}

859 
	$mÆloc_¶ow_Êag_öô
() {

864 
mÆloc_¶ow_Êags
 |(
›t_junk_Æloc
 ? 
Êag_›t_junk_Æloc
 : 0)

865 | (
›t_junk_‰ì
 ? 
Êag_›t_junk_‰ì
 : 0)

866 | (
›t_zîo
 ? 
Êag_›t_zîo
 : 0)

867 | (
›t_uåa˚
 ? 
Êag_›t_uåa˚
 : 0)

868 | (
›t_xmÆloc
 ? 
Êag_›t_xmÆloc
 : 0);

870 
mÆloc_¶ow
 = (
mÆloc_¶ow_Êags
 != 0);

871 
	}
}

874 
	$mÆloc_c⁄f_öô
() {

875 
i
;

876 
buf
[
PATH_MAX
 + 1];

877 c⁄° *
›ts
, *
k
, *
v
;

878 
size_t
 
kÀn
, 
vÀn
;

880 
i
 = 0; i < 4; i++) {

882 
i
) {

884 
›ts
 = 
c⁄fig_mÆloc_c⁄f
;

887 i‡(
je_mÆloc_c⁄f
 !
NULL
) {

892 
›ts
 = 
je_mÆloc_c⁄f
;

895 
buf
[0] = '\0';

896 
›ts
 = 
buf
;

900 
ssize_t
 
lökÀn
 = 0;

901 #i‚de‡
_WIN32


902 
ßved_î∫o
 = 
î∫o
;

903 c⁄° *
lök«me
 =

904 #ifde‡
JEMALLOC_PREFIX


905 "/ëc/"
JEMALLOC_PREFIX
"malloc.conf"

915 
lökÀn
 = 
	`ªadlök
(
lök«me
, 
buf
, (buf) - 1);

916 i‡(
lökÀn
 == -1) {

918 
lökÀn
 = 0;

920 
	`£t_î∫o
(
ßved_î∫o
);

923 
buf
[
lökÀn
] = '\0';

924 
›ts
 = 
buf
;

927 c⁄° *
ív«me
 =

928 #ifde‡
JEMALLOC_PREFIX


929 
JEMALLOC_CPREFIX
"MALLOC_CONF"

935 i‡((
›ts
 = 
	`jemÆloc_£cuª_gëív
(
ív«me
)Ë!
NULL
) {

943 
buf
[0] = '\0';

944 
›ts
 = 
buf
;

948 
	`nŸ_ªached
();

949 
buf
[0] = '\0';

950 
›ts
 = 
buf
;

953 *
›ts
 !'\0' && !
	`mÆloc_c⁄f_√xt
(&›ts, &
k
, &
kÀn
, &
v
,

954 &
vÀn
)) {

955 
	#CONF_MATCH
(
n
) \

956 ((
n
)-1 =
kÀn
 && 
	`°∫cmp
“, 
k
, kÀnË=0)

	)

957 
	#CONF_MATCH_VALUE
(
n
) \

958 ((
n
)-1 =
vÀn
 && 
	`°∫cmp
“, 
v
, vÀnË=0)

	)

959 
	#CONF_HANDLE_BOOL
(
o
, 
n
) \

960 i‡(
	`CONF_MATCH
(
n
)) { \

961 i‡(
	`CONF_MATCH_VALUE
("true")) { \

962 
o
 = 
åue
; \

963 } i‡(
	`CONF_MATCH_VALUE
("false")) { \

964 
o
 = 
Ál£
; \

966 
	`mÆloc_c⁄f_îr‹
( \

968 
k
, 
kÀn
, 
v
, 
vÀn
); \

971 }

	)

972 
	#CONF_MIN_no
(
um
, 
mö
Ë
Ál£


	)

973 
	#CONF_MIN_yes
(
um
, 
mö
Ë((umË< (mö))

	)

974 
	#CONF_MAX_no
(
um
, 
max
Ë
Ál£


	)

975 
	#CONF_MAX_yes
(
um
, 
max
Ë((umË> (max))

	)

976 
	#CONF_HANDLE_T_U
(
t
, 
o
, 
n
, 
mö
, 
max
, 
check_mö
, 
check_max
, 
˛ù
) \

977 i‡(
	`CONF_MATCH
(
n
)) { \

978 
uötmax_t
 
um
; \

979 *
íd
; \

981 
	`£t_î∫o
(0); \

982 
um
 = 
	`mÆloc_°πoumax
(
v
, &
íd
, 0); \

983 i‡(
	`gë_î∫o
(Ë!0 || (
uöçå_t
)
íd
 -\

984 (
uöçå_t
)
v
 !
vÀn
) { \

985 
	`mÆloc_c⁄f_îr‹
( \

987 
k
, 
kÀn
, 
v
, 
vÀn
); \

988 } i‡(
˛ù
) { \

989 i‡(
CONF_MIN_
##
	`check_mö
(
um
, \

990 (
t
)(
mö
))) { \

991 
o
 = (
t
)(
mö
); \

993 
CONF_MAX_
##
	`check_max
(
um
, \

994 (
t
)(
max
))) { \

995 
o
 = (
t
)(
max
); \

997 
o
 = (
t
)
um
; \

1000 i‡(
CONF_MIN_
##
	`check_mö
(
um
, \

1001 (
t
)(
mö
)) || \

1002 
CONF_MAX_
##
	`check_max
(
um
, \

1003 (
t
)(
max
))) { \

1004 
	`mÆloc_c⁄f_îr‹
( \

1007 
k
, 
kÀn
, 
v
, 
vÀn
); \

1009 
o
 = (
t
)
um
; \

1013 }

	)

1014 
	#CONF_HANDLE_UNSIGNED
(
o
, 
n
, 
mö
, 
max
, 
check_mö
, 
check_max
, \

1015 
˛ù
) \

1016 
	`CONF_HANDLE_T_U
(, 
o
, 
n
, 
mö
, 
max
, \

1017 
check_mö
, 
check_max
, 
˛ù
)

	)

1018 
	#CONF_HANDLE_SIZE_T
(
o
, 
n
, 
mö
, 
max
, 
check_mö
, 
check_max
, 
˛ù
) \

1019 
	`CONF_HANDLE_T_U
(
size_t
, 
o
, 
n
, 
mö
, 
max
, \

1020 
check_mö
, 
check_max
, 
˛ù
)

	)

1021 
	#CONF_HANDLE_SSIZE_T
(
o
, 
n
, 
mö
, 
max
) \

1022 i‡(
	`CONF_MATCH
(
n
)) { \

1023 
l
; \

1024 *
íd
; \

1026 
	`£t_î∫o
(0); \

1027 
l
 = 
	`°πﬁ
(
v
, &
íd
, 0); \

1028 i‡(
	`gë_î∫o
(Ë!0 || (
uöçå_t
)
íd
 -\

1029 (
uöçå_t
)
v
 !
vÀn
) { \

1030 
	`mÆloc_c⁄f_îr‹
( \

1032 
k
, 
kÀn
, 
v
, 
vÀn
); \

1033 } i‡(
l
 < (
ssize_t
)(
mö
) ||Ü > \

1034 (
ssize_t
)(
max
)) { \

1035 
	`mÆloc_c⁄f_îr‹
( \

1037 
k
, 
kÀn
, 
v
, 
vÀn
); \

1039 
o
 = 
l
; \

1042 }

	)

1043 
	#CONF_HANDLE_CHAR_P
(
o
, 
n
, 
d
) \

1044 i‡(
	`CONF_MATCH
(
n
)) { \

1045 
size_t
 
˝yÀn
 = (
vÀn
 <= \

1046 (
o
)-1Ë? 
vÀn
 : \

1047 (
o
)-1; \

1048 
	`°∫˝y
(
o
, 
v
, 
˝yÀn
); \

1049 
o
[
˝yÀn
] = '\0'; \

1051 }

	)

1053 
	`CONF_HANDLE_BOOL
(
›t_ab‹t
, "abort")

1054 
	`CONF_HANDLE_BOOL
(
›t_ab‹t_c⁄f
, "abort_conf")

1055 i‡(
›t_ab‹t_c⁄f
 && 
had_c⁄f_îr‹
) {

1056 
	`mÆloc_ab‹t_övÆid_c⁄f
();

1058 i‡(
	`°∫cmp
("mëad©a_thp", 
k
, 
kÀn
) == 0) {

1059 
i
;

1060 
boﬁ
 
m©ch
 = 
Ál£
;

1061 
i
 = 0; i < 
mëad©a_thp_mode_limô
; i++) {

1062 i‡(
	`°∫cmp
(
mëad©a_thp_mode_«mes
[
i
],

1063 
v
, 
vÀn
) == 0) {

1064 
›t_mëad©a_thp
 = 
i
;

1065 
m©ch
 = 
åue
;

1069 i‡(!
m©ch
) {

1070 
	`mÆloc_c⁄f_îr‹
("Invalid conf value",

1071 
k
, 
kÀn
, 
v
, 
vÀn
);

1075 
	`CONF_HANDLE_BOOL
(
›t_ªèö
, "retain")

1076 i‡(
	`°∫cmp
("dss", 
k
, 
kÀn
) == 0) {

1077 
i
;

1078 
boﬁ
 
m©ch
 = 
Ál£
;

1079 
i
 = 0; i < 
dss_¥ec_limô
; i++) {

1080 i‡(
	`°∫cmp
(
dss_¥ec_«mes
[
i
], 
v
, 
vÀn
)

1082 i‡(
	`exã¡_dss_¥ec_£t
(
i
)) {

1083 
	`mÆloc_c⁄f_îr‹
(

1085 
k
, 
kÀn
, 
v
, 
vÀn
);

1087 
›t_dss
 =

1088 
dss_¥ec_«mes
[
i
];

1089 
m©ch
 = 
åue
;

1094 i‡(!
m©ch
) {

1095 
	`mÆloc_c⁄f_îr‹
("Invalid conf value",

1096 
k
, 
kÀn
, 
v
, 
vÀn
);

1100 
	`CONF_HANDLE_UNSIGNED
(
›t_«ª«s
, "narenas", 1,

1101 
UINT_MAX
, 
yes
, 
no
, 
Ál£
)

1102 
	`CONF_HANDLE_SSIZE_T
(
›t_dúty_deˇy_ms
,

1103 "dúty_deˇy_ms", -1, 
NSTIME_SEC_MAX
 * 
	`KQU
(1000) <

1104 
	`QU
(
SSIZE_MAX
Ë? 
NSTIME_SEC_MAX
 * 
	`KQU
(1000) :

1105 
SSIZE_MAX
);

1106 
	`CONF_HANDLE_SSIZE_T
(
›t_muzzy_deˇy_ms
,

1107 "muzzy_deˇy_ms", -1, 
NSTIME_SEC_MAX
 * 
	`KQU
(1000) <

1108 
	`QU
(
SSIZE_MAX
Ë? 
NSTIME_SEC_MAX
 * 
	`KQU
(1000) :

1109 
SSIZE_MAX
);

1110 
	`CONF_HANDLE_BOOL
(
›t_°©s_¥öt
, "stats_print")

1111 i‡(
	`CONF_MATCH
("stats_print_opts")) {

1112 
	`öô_›t_°©s_¥öt_›ts
(
v
, 
vÀn
);

1115 i‡(
c⁄fig_fûl
) {

1116 i‡(
	`CONF_MATCH
("junk")) {

1117 i‡(
	`CONF_MATCH_VALUE
("true")) {

1118 
›t_junk
 = "true";

1119 
›t_junk_Æloc
 = 
›t_junk_‰ì
 =

1120 
åue
;

1121 } i‡(
	`CONF_MATCH_VALUE
("false")) {

1122 
›t_junk
 = "false";

1123 
›t_junk_Æloc
 = 
›t_junk_‰ì
 =

1124 
Ál£
;

1125 } i‡(
	`CONF_MATCH_VALUE
("alloc")) {

1126 
›t_junk
 = "alloc";

1127 
›t_junk_Æloc
 = 
åue
;

1128 
›t_junk_‰ì
 = 
Ál£
;

1129 } i‡(
	`CONF_MATCH_VALUE
("free")) {

1130 
›t_junk
 = "free";

1131 
›t_junk_Æloc
 = 
Ál£
;

1132 
›t_junk_‰ì
 = 
åue
;

1134 
	`mÆloc_c⁄f_îr‹
(

1135 "InvÆid c⁄‡vÆue", 
k
,

1136 
kÀn
, 
v
, 
vÀn
);

1140 
	`CONF_HANDLE_BOOL
(
›t_zîo
, "zero")

1142 i‡(
c⁄fig_uåa˚
) {

1143 
	`CONF_HANDLE_BOOL
(
›t_uåa˚
, "utrace")

1145 i‡(
c⁄fig_xmÆloc
) {

1146 
	`CONF_HANDLE_BOOL
(
›t_xmÆloc
, "xmalloc")

1148 
	`CONF_HANDLE_BOOL
(
›t_tˇche
, "tcache")

1149 
	`CONF_HANDLE_SIZE_T
(
›t_lg_exã¡_max_a˘ive_fô
,

1151 ((
size_t
Ë<< 3), 
yes
, yes, 
Ál£
)

1152 
	`CONF_HANDLE_SSIZE_T
(
›t_lg_tˇche_max
, "lg_tcache_max",

1153 -1, ((
size_t
) << 3) - 1)

1154 i‡(
	`°∫cmp
("≥r˝u_¨ía", 
k
, 
kÀn
) == 0) {

1155 
i
;

1156 
boﬁ
 
m©ch
 = 
Ál£
;

1157 
i
 = 
≥r˝u_¨ía_mode_«mes_ba£
; i <

1158 
≥r˝u_¨ía_mode_«mes_limô
; 
i
++) {

1159 i‡(
	`°∫cmp
(
≥r˝u_¨ía_mode_«mes
[
i
],

1160 
v
, 
vÀn
) == 0) {

1161 i‡(!
have_≥r˝u_¨ía
) {

1162 
	`mÆloc_c⁄f_îr‹
(

1164 
k
, 
kÀn
, 
v
, 
vÀn
);

1166 
›t_≥r˝u_¨ía
 = 
i
;

1167 
m©ch
 = 
åue
;

1171 i‡(!
m©ch
) {

1172 
	`mÆloc_c⁄f_îr‹
("Invalid conf value",

1173 
k
, 
kÀn
, 
v
, 
vÀn
);

1177 
	`CONF_HANDLE_BOOL
(
›t_background_thªad
,

1179 i‡(
c⁄fig_¥of
) {

1180 
	`CONF_HANDLE_BOOL
(
›t_¥of
, "prof")

1181 
	`CONF_HANDLE_CHAR_P
(
›t_¥of_¥efix
,

1183 
	`CONF_HANDLE_BOOL
(
›t_¥of_a˘ive
, "prof_active")

1184 
	`CONF_HANDLE_BOOL
(
›t_¥of_thªad_a˘ive_öô
,

1186 
	`CONF_HANDLE_SIZE_T
(
›t_lg_¥of_ßm∂e
,

1187 "lg_¥of_ßm∂e", 0, ((
uöt64_t
) << 3)

1188 - 1, 
no
, 
yes
, 
åue
)

1189 
	`CONF_HANDLE_BOOL
(
›t_¥of_accum
, "prof_accum")

1190 
	`CONF_HANDLE_SSIZE_T
(
›t_lg_¥of_öãrvÆ
,

1192 ((
uöt64_t
) << 3) - 1)

1193 
	`CONF_HANDLE_BOOL
(
›t_¥of_gdump
, "prof_gdump")

1194 
	`CONF_HANDLE_BOOL
(
›t_¥of_föÆ
, "prof_final")

1195 
	`CONF_HANDLE_BOOL
(
›t_¥of_Àak
, "prof_leak")

1197 i‡(
c⁄fig_log
) {

1198 i‡(
	`CONF_MATCH
("log")) {

1199 
size_t
 
˝yÀn
 = (

1200 
vÀn
 <(
log_v¨_«mes
) ?

1201 
vÀn
 : (
log_v¨_«mes
) - 1);

1202 
	`°∫˝y
(
log_v¨_«mes
, 
v
, 
˝yÀn
);

1203 
log_v¨_«mes
[
˝yÀn
] = '\0';

1207 
	`mÆloc_c⁄f_îr‹
("InvÆid c⁄‡∑ú", 
k
, 
kÀn
, 
v
,

1208 
vÀn
);

1209 #unde‡
CONF_MATCH


1210 #unde‡
CONF_MATCH_VALUE


1211 #unde‡
CONF_HANDLE_BOOL


1212 #unde‡
CONF_MIN_no


1213 #unde‡
CONF_MIN_yes


1214 #unde‡
CONF_MAX_no


1215 #unde‡
CONF_MAX_yes


1216 #unde‡
CONF_HANDLE_T_U


1217 #unde‡
CONF_HANDLE_UNSIGNED


1218 #unde‡
CONF_HANDLE_SIZE_T


1219 #unde‡
CONF_HANDLE_SSIZE_T


1220 #unde‡
CONF_HANDLE_CHAR_P


1223 
	`©omic_°‹e_b
(&
log_öô_d⁄e
, 
åue
, 
ATOMIC_RELEASE
);

1224 
	}
}

1226 
boﬁ


1227 
	$mÆloc_öô_h¨d_√eded
() {

1228 i‡(
	`mÆloc_öôülized
(Ë|| (
IS_INITIALIZER
 && 
mÆloc_öô_°©e
 ==

1229 
mÆloc_öô_ªcursibÀ
)) {

1235  
Ál£
;

1237 #ifde‡
JEMALLOC_THREADED_INIT


1238 i‡(
mÆloc_öôülizî
 !
NO_INITIALIZER
 && !
IS_INITIALIZER
) {

1240 
•ö_t
 
•ö√r
 = 
SPIN_INITIALIZER
;

1242 
	`mÆloc_muãx_u∆ock
(
TSDN_NULL
, &
öô_lock
);

1243 
	`•ö_ad≠tive
(&
•ö√r
);

1244 
	`mÆloc_muãx_lock
(
TSDN_NULL
, &
öô_lock
);

1245 } !
	`mÆloc_öôülized
());

1246  
Ál£
;

1249  
åue
;

1250 
	}
}

1252 
boﬁ


1253 
	$mÆloc_öô_h¨d_a0_locked
() {

1254 
mÆloc_öôülizî
 = 
INITIALIZER
;

1256 i‡(
c⁄fig_¥of
) {

1257 
	`¥of_boŸ0
();

1259 
	`mÆloc_c⁄f_öô
();

1260 i‡(
›t_°©s_¥öt
) {

1262 i‡(
	`©exô
(
°©s_¥öt_©exô
) != 0) {

1263 
	`mÆloc_wrôe
("<jemalloc>: Error inátexit()\n");

1264 i‡(
›t_ab‹t
) {

1265 
	`ab‹t
();

1269 i‡(
	`∑ges_boŸ
()) {

1270  
åue
;

1272 i‡(
	`ba£_boŸ
(
TSDN_NULL
)) {

1273  
åue
;

1275 i‡(
	`exã¡_boŸ
()) {

1276  
åue
;

1278 i‡(
	`˘l_boŸ
()) {

1279  
åue
;

1281 i‡(
c⁄fig_¥of
) {

1282 
	`¥of_boŸ1
();

1284 
	`¨ía_boŸ
();

1285 i‡(
	`tˇche_boŸ
(
TSDN_NULL
)) {

1286  
åue
;

1288 i‡(
	`mÆloc_muãx_öô
(&
¨ías_lock
, "¨ías", 
WITNESS_RANK_ARENAS
,

1289 
mÆloc_muãx_ønk_ex˛usive
)) {

1290  
åue
;

1296 
«ª«s_auto
 = 1;

1297 
	`mem£t
(
¨ías
, 0, (
¨ía_t
 *Ë* 
«ª«s_auto
);

1302 i‡(
	`¨ía_öô
(
TSDN_NULL
, 0, (
exã¡_hooks_t
 *)&
exã¡_hooks_deÁu…
)

1303 =
NULL
) {

1304  
åue
;

1306 
a0
 = 
	`¨ía_gë
(
TSDN_NULL
, 0, 
Ál£
);

1307 
mÆloc_öô_°©e
 = 
mÆloc_öô_a0_öôülized
;

1309  
Ál£
;

1310 
	}
}

1312 
boﬁ


1313 
	$mÆloc_öô_h¨d_a0
() {

1314 
boﬁ
 
ªt
;

1316 
	`mÆloc_muãx_lock
(
TSDN_NULL
, &
öô_lock
);

1317 
ªt
 = 
	`mÆloc_öô_h¨d_a0_locked
();

1318 
	`mÆloc_muãx_u∆ock
(
TSDN_NULL
, &
öô_lock
);

1319  
ªt
;

1320 
	}
}

1323 
boﬁ


1324 
	$mÆloc_öô_h¨d_ªcursibÀ
() {

1325 
mÆloc_öô_°©e
 = 
mÆloc_öô_ªcursibÀ
;

1327 
n˝us
 = 
	`mÆloc_n˝us
();

1329 #i‡(
	`deföed
(
JEMALLOC_HAVE_PTHREAD_ATFORK
Ë&& !deföed(
JEMALLOC_MUTEX_INIT_CB
) \

1330 && !
	`deföed
(
JEMALLOC_ZONE
Ë&& !deföed(
_WIN32
) && \

1331 !
	`deföed
(
__«tive_˛õ¡__
))

1333 i‡(
	`±hªad_©f‹k
(
jemÆloc_¥ef‹k
, 
jemÆloc_po°f‹k_∑ª¡
,

1334 
jemÆloc_po°f‹k_chûd
) != 0) {

1335 
	`mÆloc_wrôe
("<jemalloc>: Error inÖthread_atfork()\n");

1336 i‡(
›t_ab‹t
) {

1337 
	`ab‹t
();

1339  
åue
;

1343 i‡(
	`background_thªad_boŸ0
()) {

1344  
åue
;

1347  
Ál£
;

1348 
	}
}

1351 
	$mÆloc_«ª«s_deÁu…
() {

1352 
	`as£π
(
n˝us
 > 0);

1357 i‡(
n˝us
 > 1) {

1358  
n˝us
 << 2;

1362 
	}
}

1364 
≥r˝u_¨ía_mode_t


1365 
	$≥r˝u_¨ía_as_öôülized
(
≥r˝u_¨ía_mode_t
 
mode
) {

1366 
	`as£π
(!
	`mÆloc_öôülized
());

1367 
	`as£π
(
mode
 <
≥r˝u_¨ía_dißbÀd
);

1369 i‡(
mode
 !
≥r˝u_¨ía_dißbÀd
) {

1370 
mode
 +
≥r˝u_¨ía_mode_íabÀd_ba£
;

1373  
mode
;

1374 
	}
}

1376 
boﬁ


1377 
	$mÆloc_öô_«ª«s
() {

1378 
	`as£π
(
n˝us
 > 0);

1380 i‡(
›t_≥r˝u_¨ía
 !
≥r˝u_¨ía_dißbÀd
) {

1381 i‡(!
have_≥r˝u_¨ía
 || 
	`mÆloc_gë˝u
() < 0) {

1382 
›t_≥r˝u_¨ía
 = 
≥r˝u_¨ía_dißbÀd
;

1383 
	`mÆloc_¥ötf
("<jemalloc>:ÖerCPUárena getcpu()Çot "

1384 "avaûabÀ. SëtögÇ¨ía†tÿ%u.\n", 
›t_«ª«s
 ?

1385 
›t_«ª«s
 : 
	`mÆloc_«ª«s_deÁu…
());

1386 i‡(
›t_ab‹t
) {

1387 
	`ab‹t
();

1390 i‡(
n˝us
 >
MALLOCX_ARENA_LIMIT
) {

1391 
	`mÆloc_¥ötf
("<jemalloc>:Çarenas w/Öercpu"

1392 "¨í®bey⁄dÜimô (%d)\n", 
n˝us
);

1393 i‡(
›t_ab‹t
) {

1394 
	`ab‹t
();

1396  
åue
;

1399 i‡(
	`≥r˝u_¨ía_as_öôülized
(
›t_≥r˝u_¨ía
) ==

1400 
≥r_phy˝u_¨ía
 && 
n˝us
 % 2 != 0) {

1401 
	`mÆloc_¥ötf
("<jemalloc>: invalid "

1404 "thªadög?).\n", 
n˝us
);

1405 i‡(
›t_ab‹t
)

1406 
	`ab‹t
();

1408 
n
 = 
	`≥r˝u_¨ía_öd_limô
(

1409 
	`≥r˝u_¨ía_as_öôülized
(
›t_≥r˝u_¨ía
));

1410 i‡(
›t_«ª«s
 < 
n
) {

1425 
›t_«ª«s
 = 
n
;

1429 i‡(
›t_«ª«s
 == 0) {

1430 
›t_«ª«s
 = 
	`mÆloc_«ª«s_deÁu…
();

1432 
	`as£π
(
›t_«ª«s
 > 0);

1434 
«ª«s_auto
 = 
›t_«ª«s
;

1438 i‡(
«ª«s_auto
 >
MALLOCX_ARENA_LIMIT
) {

1439 
«ª«s_auto
 = 
MALLOCX_ARENA_LIMIT
 - 1;

1440 
	`mÆloc_¥ötf
("<jemalloc>: ReducingÇarenasÅoÜimit (%d)\n",

1441 
«ª«s_auto
);

1443 
	`«ª«s_tŸÆ_£t
(
«ª«s_auto
);

1445  
Ál£
;

1446 
	}
}

1449 
	$mÆloc_öô_≥r˝u
() {

1450 
›t_≥r˝u_¨ía
 = 
	`≥r˝u_¨ía_as_öôülized
(opt_percpu_arena);

1451 
	}
}

1453 
boﬁ


1454 
	$mÆloc_öô_h¨d_föish
() {

1455 i‡(
	`mÆloc_muãx_boŸ
()) {

1456  
åue
;

1459 
mÆloc_öô_°©e
 = 
mÆloc_öô_öôülized
;

1460 
	`mÆloc_¶ow_Êag_öô
();

1462  
Ál£
;

1463 
	}
}

1466 
	$mÆloc_öô_h¨d_˛ónup
(
tsdn_t
 *
tsdn
, 
boﬁ
 
ªíå™cy_£t
) {

1467 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
öô_lock
);

1468 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
öô_lock
);

1469 i‡(
ªíå™cy_£t
) {

1470 
	`as£π
(!
	`tsdn_nuŒ
(
tsdn
));

1471 
tsd_t
 *
tsd
 = 
	`tsdn_tsd
(
tsdn
);

1472 
	`as£π
(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) > 0);

1473 
	`po°_ªíå™cy
(
tsd
);

1475 
	}
}

1477 
boﬁ


1478 
	$mÆloc_öô_h¨d
() {

1479 
tsd_t
 *
tsd
;

1481 #i‡
	`deföed
(
_WIN32
Ë&& 
_WIN32_WINNT
 < 0x0600

1482 
	`_öô_öô_lock
();

1484 
	`mÆloc_muãx_lock
(
TSDN_NULL
, &
öô_lock
);

1486 
	#UNLOCK_RETURN
(
tsdn
, 
ªt
, 
ªíå™cy
) \

1487 
	`mÆloc_öô_h¨d_˛ónup
(
tsdn
, 
ªíå™cy
); \

1488  
ªt
;

	)

1490 i‡(!
	`mÆloc_öô_h¨d_√eded
()) {

1491 
	`UNLOCK_RETURN
(
TSDN_NULL
, 
Ál£
, false)

1494 i‡(
mÆloc_öô_°©e
 !
mÆloc_öô_a0_öôülized
 &&

1495 
	`mÆloc_öô_h¨d_a0_locked
()) {

1496 
	`UNLOCK_RETURN
(
TSDN_NULL
, 
åue
, 
Ál£
)

1499 
	`mÆloc_muãx_u∆ock
(
TSDN_NULL
, &
öô_lock
);

1501 
tsd
 = 
	`mÆloc_tsd_boŸ0
();

1502 i‡(
tsd
 =
NULL
) {

1503  
åue
;

1505 i‡(
	`mÆloc_öô_h¨d_ªcursibÀ
()) {

1506  
åue
;

1509 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
öô_lock
);

1511 
	`¥e_ªíå™cy
(
tsd
, 
NULL
);

1513 i‡(
	`mÆloc_öô_«ª«s
(Ë|| 
	`background_thªad_boŸ1
(
	`tsd_tsdn
(
tsd
))) {

1514 
	`UNLOCK_RETURN
(
	`tsd_tsdn
(
tsd
), 
åue
,Årue)

1516 i‡(
c⁄fig_¥of
 && 
	`¥of_boŸ2
(
tsd
)) {

1517 
	`UNLOCK_RETURN
(
	`tsd_tsdn
(
tsd
), 
åue
,Årue)

1520 
	`mÆloc_öô_≥r˝u
();

1522 i‡(
	`mÆloc_öô_h¨d_föish
()) {

1523 
	`UNLOCK_RETURN
(
	`tsd_tsdn
(
tsd
), 
åue
,Årue)

1525 
	`po°_ªíå™cy
(
tsd
);

1526 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
öô_lock
);

1528 
	`wô√ss_as£π_lockÀss
(
	`wô√ss_tsd_tsdn
(

1529 
	`tsd_wô√ss_tsdp_gë_unß„
(
tsd
)));

1530 
	`mÆloc_tsd_boŸ1
();

1532 
tsd
 = 
	`tsd_„tch
();

1533 i‡(
›t_background_thªad
) {

1534 
	`as£π
(
have_background_thªad
);

1540 
	`background_thªad_˘l_öô
(
	`tsd_tsdn
(
tsd
));

1542 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
background_thªad_lock
);

1543 
boﬁ
 
îr
 = 
	`background_thªad_¸óã
(
tsd
, 0);

1544 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
background_thªad_lock
);

1545 i‡(
îr
) {

1546  
åue
;

1549 #unde‡
UNLOCK_RETURN


1550  
Ál£
;

1551 
	}
}

1564 
°©ic_›ts_s
 
	t°©ic_›ts_t
;

1565 
	s°©ic_›ts_s
 {

1567 
boﬁ
 
	mmay_ovîÊow
;

1569 
boﬁ
 
	mbump_em±y_Æloc
;

1574 
boﬁ
 
	mas£π_n⁄em±y_Æloc
;

1580 
boﬁ
 
	mnuŒ_out_ªsu…_⁄_îr‹
;

1582 
boﬁ
 
	m£t_î∫o_⁄_îr‹
;

1587 
size_t
 
	mmö_Æignmít
;

1590 c⁄° *
	moom_°rög
;

1592 c⁄° *
	mövÆid_Æignmít_°rög
;

1601 
boﬁ
 
	m¶ow
;

1604 
JEMALLOC_ALWAYS_INLINE
 

1605 
	$°©ic_›ts_öô
(
°©ic_›ts_t
 *
°©ic_›ts
) {

1606 
°©ic_›ts
->
may_ovîÊow
 = 
Ál£
;

1607 
°©ic_›ts
->
bump_em±y_Æloc
 = 
Ál£
;

1608 
°©ic_›ts
->
as£π_n⁄em±y_Æloc
 = 
Ál£
;

1609 
°©ic_›ts
->
nuŒ_out_ªsu…_⁄_îr‹
 = 
Ál£
;

1610 
°©ic_›ts
->
£t_î∫o_⁄_îr‹
 = 
Ál£
;

1611 
°©ic_›ts
->
mö_Æignmít
 = 0;

1612 
°©ic_›ts
->
oom_°rög
 = "";

1613 
°©ic_›ts
->
övÆid_Æignmít_°rög
 = "";

1614 
°©ic_›ts
->
¶ow
 = 
Ál£
;

1615 
	}
}

1622 
	#TCACHE_IND_NONE
 (()-1)

	)

1623 
	#TCACHE_IND_AUTOMATIC
 (()-2)

	)

1624 
	#ARENA_IND_AUTOMATIC
 (()-1)

	)

1626 
dy«mic_›ts_s
 
	tdy«mic_›ts_t
;

1627 
	sdy«mic_›ts_s
 {

1628 **
	mªsu…
;

1629 
size_t
 
	mnum_ôems
;

1630 
size_t
 
	môem_size
;

1631 
size_t
 
	mÆignmít
;

1632 
boﬁ
 
	mzîo
;

1633 
	mtˇche_öd
;

1634 
	m¨ía_öd
;

1637 
JEMALLOC_ALWAYS_INLINE
 

1638 
	$dy«mic_›ts_öô
(
dy«mic_›ts_t
 *
dy«mic_›ts
) {

1639 
dy«mic_›ts
->
ªsu…
 = 
NULL
;

1640 
dy«mic_›ts
->
num_ôems
 = 0;

1641 
dy«mic_›ts
->
ôem_size
 = 0;

1642 
dy«mic_›ts
->
Æignmít
 = 0;

1643 
dy«mic_›ts
->
zîo
 = 
Ál£
;

1644 
dy«mic_›ts
->
tˇche_öd
 = 
TCACHE_IND_AUTOMATIC
;

1645 
dy«mic_›ts
->
¨ía_öd
 = 
ARENA_IND_AUTOMATIC
;

1646 
	}
}

1649 
JEMALLOC_ALWAYS_INLINE
 *

1650 
	$imÆloc_no_ßm∂e
(
°©ic_›ts_t
 *
s›ts
, 
dy«mic_›ts_t
 *
d›ts
, 
tsd_t
 *
tsd
,

1651 
size_t
 
size
, size_à
usize
, 
szöd_t
 
öd
) {

1652 
tˇche_t
 *
tˇche
;

1653 
¨ía_t
 *
¨ía
;

1656 i‡(
d›ts
->
tˇche_öd
 =
TCACHE_IND_AUTOMATIC
) {

1657 i‡(
	`likñy
(!
s›ts
->
¶ow
)) {

1659 
tˇche
 = 
	`tsd_tˇchï_gë
(
tsd
);

1660 
	`as£π
(
tˇche
 =
	`tˇche_gë
(
tsd
));

1662 
tˇche
 = 
	`tˇche_gë
(
tsd
);

1664 } i‡(
d›ts
->
tˇche_öd
 =
TCACHE_IND_NONE
) {

1665 
tˇche
 = 
NULL
;

1667 
tˇche
 = 
	`tˇches_gë
(
tsd
, 
d›ts
->
tˇche_öd
);

1671 i‡(
d›ts
->
¨ía_öd
 =
ARENA_IND_AUTOMATIC
) {

1677 
¨ía
 = 
NULL
;

1679 
¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
d›ts
->
¨ía_öd
, 
åue
);

1682 i‡(
	`u∆ikñy
(
d›ts
->
Æignmít
 != 0)) {

1683  
	`ùÆlo˘
(
	`tsd_tsdn
(
tsd
), 
usize
, 
d›ts
->
Æignmít
,

1684 
d›ts
->
zîo
, 
tˇche
, 
¨ía
);

1687  
	`üŒocztm
(
	`tsd_tsdn
(
tsd
), 
size
, 
öd
, 
d›ts
->
zîo
, 
tˇche
, 
Ál£
,

1688 
¨ía
, 
s›ts
->
¶ow
);

1689 
	}
}

1691 
JEMALLOC_ALWAYS_INLINE
 *

1692 
	$imÆloc_ßm∂e
(
°©ic_›ts_t
 *
s›ts
, 
dy«mic_›ts_t
 *
d›ts
, 
tsd_t
 *
tsd
,

1693 
size_t
 
usize
, 
szöd_t
 
öd
) {

1694 *
ªt
;

1700 
szöd_t
 
öd_œrge
;

1701 
size_t
 
bum≥d_usize
 = 
usize
;

1703 i‡(
usize
 <
SMALL_MAXCLASS
) {

1704 
	`as£π
(((
d›ts
->
Æignmít
 =0Ë? 
	`sz_s2u
(
LARGE_MINCLASS
) :

1705 
	`sz_ß2u
(
LARGE_MINCLASS
, 
d›ts
->
Æignmít
))

1706 =
LARGE_MINCLASS
);

1707 
öd_œrge
 = 
	`sz_size2ödex
(
LARGE_MINCLASS
);

1708 
bum≥d_usize
 = 
	`sz_s2u
(
LARGE_MINCLASS
);

1709 
ªt
 = 
	`imÆloc_no_ßm∂e
(
s›ts
, 
d›ts
, 
tsd
, 
bum≥d_usize
,

1710 
bum≥d_usize
, 
öd_œrge
);

1711 i‡(
	`u∆ikñy
(
ªt
 =
NULL
)) {

1712  
NULL
;

1714 
	`¨ía_¥of_¥omŸe
(
	`tsd_tsdn
(
tsd
), 
ªt
, 
usize
);

1716 
ªt
 = 
	`imÆloc_no_ßm∂e
(
s›ts
, 
d›ts
, 
tsd
, 
usize
, usize, 
öd
);

1719  
ªt
;

1720 
	}
}

1726 
JEMALLOC_ALWAYS_INLINE
 
boﬁ


1727 
	$compuã_size_wôh_ovîÊow
(
boﬁ
 
may_ovîÊow
, 
dy«mic_›ts_t
 *
d›ts
,

1728 
size_t
 *
size
) {

1734 i‡(!
may_ovîÊow
) {

1735 
	`as£π
(
d›ts
->
num_ôems
 == 1);

1736 *
size
 = 
d›ts
->
ôem_size
;

1737  
Ál£
;

1741 c⁄° 
size_t
 
high_bôs
 = 
SIZE_T_MAX
 << ((size_t) * 8 / 2);

1743 *
size
 = 
d›ts
->
ôem_size
 * d›ts->
num_ôems
;

1745 i‡(
	`u∆ikñy
(*
size
 == 0)) {

1746  (
d›ts
->
num_ôems
 !0 && d›ts->
ôem_size
 != 0);

1755 i‡(
	`likñy
((
high_bôs
 & (
d›ts
->
num_ôems
 | d›ts->
ôem_size
)) == 0)) {

1756  
Ál£
;

1758 i‡(
	`likñy
(*
size
 / 
d›ts
->
ôem_size
 =d›ts->
num_ôems
)) {

1759  
Ál£
;

1761  
åue
;

1762 
	}
}

1764 
JEMALLOC_ALWAYS_INLINE
 

1765 
	$imÆloc_body
(
°©ic_›ts_t
 *
s›ts
, 
dy«mic_›ts_t
 *
d›ts
, 
tsd_t
 *
tsd
) {

1767 *
Æloˇti⁄
 = 
NULL
;

1769 
size_t
 
size
 = 0;

1779 
szöd_t
 
öd
 = 0;

1780 
size_t
 
usize
 = 0;

1783 
öt8_t
 
ªíå™cy_Àvñ
;

1786 i‡(
	`u∆ikñy
(
	`compuã_size_wôh_ovîÊow
(
s›ts
->
may_ovîÊow
, 
d›ts
,

1787 &
size
))) {

1788 
œbñ_oom
;

1792 i‡(
s›ts
->
bump_em±y_Æloc
) {

1793 i‡(
	`u∆ikñy
(
size
 == 0)) {

1794 
size
 = 1;

1798 i‡(
s›ts
->
as£π_n⁄em±y_Æloc
) {

1799 
	`as£π
 (
size
 != 0);

1802 i‡(
	`u∆ikñy
(
d›ts
->
Æignmít
 < 
s›ts
->
mö_Æignmít


1803 || (
d›ts
->
Æignmít
 & (dopts->alignment - 1)) != 0)) {

1804 
œbñ_övÆid_Æignmít
;

1809 i‡(
d›ts
->
Æignmít
 == 0) {

1810 
öd
 = 
	`sz_size2ödex
(
size
);

1811 i‡(
	`u∆ikñy
(
öd
 >
NSIZES
)) {

1812 
œbñ_oom
;

1814 i‡(
c⁄fig_°©s
 || (
c⁄fig_¥of
 && 
›t_¥of
)) {

1815 
usize
 = 
	`sz_ödex2size
(
öd
);

1816 
	`as£π
(
usize
 > 0 && usizê<
LARGE_MAXCLASS
);

1819 
usize
 = 
	`sz_ß2u
(
size
, 
d›ts
->
Æignmít
);

1820 i‡(
	`u∆ikñy
(
usize
 =0 || usizê> 
LARGE_MAXCLASS
)) {

1821 
œbñ_oom
;

1825 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

1831 
ªíå™cy_Àvñ
 = 
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
);

1832 i‡(
s›ts
->
¶ow
 && 
	`u∆ikñy
(
ªíå™cy_Àvñ
 > 0)) {

1837 
	`as£π
(
d›ts
->
tˇche_öd
 =
TCACHE_IND_AUTOMATIC
 ||

1838 
d›ts
->
tˇche_öd
 =
TCACHE_IND_NONE
);

1839 
	`as£π
(
d›ts
->
¨ía_öd
 =
ARENA_IND_AUTOMATIC
);

1840 
d›ts
->
tˇche_öd
 = 
TCACHE_IND_NONE
;

1842 
d›ts
->
¨ía_öd
 = 0;

1846 i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

1851 
¥of_t˘x_t
 *
t˘x
 = 
	`¥of_Æloc_¥ï
(

1852 
tsd
, 
usize
, 
	`¥of_a˘ive_gë_u∆ocked
(), 
åue
);

1854 
Æloc_˘x_t
 
Æloc_˘x
;

1855 i‡(
	`likñy
((
uöçå_t
)
t˘x
 == (uintptr_t)1U)) {

1856 
Æloc_˘x
.
¶ab
 = (
usize
 <
SMALL_MAXCLASS
);

1857 
Æloˇti⁄
 = 
	`imÆloc_no_ßm∂e
(

1858 
s›ts
, 
d›ts
, 
tsd
, 
usize
, usize, 
öd
);

1859 } i‡((
uöçå_t
)
t˘x
 > (uintptr_t)1U) {

1864 
Æloˇti⁄
 = 
	`imÆloc_ßm∂e
(

1865 
s›ts
, 
d›ts
, 
tsd
, 
usize
, 
öd
);

1866 
Æloc_˘x
.
¶ab
 = 
Ál£
;

1868 
Æloˇti⁄
 = 
NULL
;

1871 i‡(
	`u∆ikñy
(
Æloˇti⁄
 =
NULL
)) {

1872 
	`¥of_Æloc_rﬁlback
(
tsd
, 
t˘x
, 
åue
);

1873 
œbñ_oom
;

1875 
	`¥of_mÆloc
(
	`tsd_tsdn
(
tsd
), 
Æloˇti⁄
, 
usize
, &
Æloc_˘x
, 
t˘x
);

1883 
Æloˇti⁄
 = 
	`imÆloc_no_ßm∂e
(
s›ts
, 
d›ts
, 
tsd
, 
size
, 
usize
,

1884 
öd
);

1885 i‡(
	`u∆ikñy
(
Æloˇti⁄
 =
NULL
)) {

1886 
œbñ_oom
;

1894 
	`as£π
(
d›ts
->
Æignmít
 == 0

1895 || ((
uöçå_t
)
Æloˇti⁄
 & (
d›ts
->
Æignmít
 - 1)Ë=
	`ZU
(0));

1897 i‡(
c⁄fig_°©s
) {

1898 
	`as£π
(
usize
 =
	`ißŒoc
(
	`tsd_tsdn
(
tsd
), 
Æloˇti⁄
));

1899 *
	`tsd_thªad_Æloˇãdp_gë
(
tsd
Ë+
usize
;

1902 i‡(
s›ts
->
¶ow
) {

1903 
	`UTRACE
(0, 
size
, 
Æloˇti⁄
);

1907 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

1908 *
d›ts
->
ªsu…
 = 
Æloˇti⁄
;

1911 
œbñ_oom
:

1912 i‡(
	`u∆ikñy
(
s›ts
->
¶ow
Ë&& 
c⁄fig_xmÆloc
 && u∆ikñy(
›t_xmÆloc
)) {

1913 
	`mÆloc_wrôe
(
s›ts
->
oom_°rög
);

1914 
	`ab‹t
();

1917 i‡(
s›ts
->
¶ow
) {

1918 
	`UTRACE
(
NULL
, 
size
, NULL);

1921 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

1923 i‡(
s›ts
->
£t_î∫o_⁄_îr‹
) {

1924 
	`£t_î∫o
(
ENOMEM
);

1927 i‡(
s›ts
->
nuŒ_out_ªsu…_⁄_îr‹
) {

1928 *
d›ts
->
ªsu…
 = 
NULL
;

1931  
ENOMEM
;

1938 
œbñ_övÆid_Æignmít
:

1939 i‡(
c⁄fig_xmÆloc
 && 
	`u∆ikñy
(
›t_xmÆloc
)) {

1940 
	`mÆloc_wrôe
(
s›ts
->
övÆid_Æignmít_°rög
);

1941 
	`ab‹t
();

1944 i‡(
s›ts
->
£t_î∫o_⁄_îr‹
) {

1945 
	`£t_î∫o
(
EINVAL
);

1948 i‡(
s›ts
->
¶ow
) {

1949 
	`UTRACE
(
NULL
, 
size
, NULL);

1952 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

1954 i‡(
s›ts
->
nuŒ_out_ªsu…_⁄_îr‹
) {

1955 *
d›ts
->
ªsu…
 = 
NULL
;

1958  
EINVAL
;

1959 
	}
}

1962 
JEMALLOC_ALWAYS_INLINE
 

1963 
	$imÆloc
(
°©ic_›ts_t
 *
s›ts
, 
dy«mic_›ts_t
 *
d›ts
) {

1964 i‡(
	`u∆ikñy
(!
	`mÆloc_öôülized
()Ë&& u∆ikñy(
	`mÆloc_öô
())) {

1965 i‡(
c⁄fig_xmÆloc
 && 
	`u∆ikñy
(
›t_xmÆloc
)) {

1966 
	`mÆloc_wrôe
(
s›ts
->
oom_°rög
);

1967 
	`ab‹t
();

1969 
	`UTRACE
(
NULL
, 
d›ts
->
num_ôems
 * d›ts->
ôem_size
, NULL);

1970 
	`£t_î∫o
(
ENOMEM
);

1971 *
d›ts
->
ªsu…
 = 
NULL
;

1973  
ENOMEM
;

1977 
tsd_t
 *
tsd
 = 
	`tsd_„tch
();

1978 
	`as£π
(
tsd
);

1979 i‡(
	`likñy
(
	`tsd_Á°
(
tsd
))) {

1981 
	`tsd_as£π_Á°
(
tsd
);

1982 
s›ts
->
¶ow
 = 
Ál£
;

1983  
	`imÆloc_body
(
s›ts
, 
d›ts
, 
tsd
);

1985 
s›ts
->
¶ow
 = 
åue
;

1986  
	`imÆloc_body
(
s›ts
, 
d›ts
, 
tsd
);

1988 
	}
}

1994 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


1995 
JEMALLOC_NOTHROW
 *

1996 
	$JEMALLOC_ATTR
(
mÆloc
Ë
	$JEMALLOC_ALLOC_SIZE
(1)

1997 
	$je_mÆloc
(
size_t
 
size
) {

1998 *
ªt
;

1999 
°©ic_›ts_t
 
s›ts
;

2000 
dy«mic_›ts_t
 
d›ts
;

2002 
	`LOG
("c‹e.mÆloc.íåy", "size: %zu", 
size
);

2004 
	`°©ic_›ts_öô
(&
s›ts
);

2005 
	`dy«mic_›ts_öô
(&
d›ts
);

2007 
s›ts
.
bump_em±y_Æloc
 = 
åue
;

2008 
s›ts
.
nuŒ_out_ªsu…_⁄_îr‹
 = 
åue
;

2009 
s›ts
.
£t_î∫o_⁄_îr‹
 = 
åue
;

2010 
s›ts
.
oom_°rög
 = "<jemalloc>: Error in malloc(): out of memory\n";

2012 
d›ts
.
ªsu…
 = &
ªt
;

2013 
d›ts
.
num_ôems
 = 1;

2014 
d›ts
.
ôem_size
 = 
size
;

2016 
	`imÆloc
(&
s›ts
, &
d›ts
);

2018 
	`LOG
("c‹e.mÆloc.exô", "ªsu…: %p", 
ªt
);

2020  
ªt
;

2021 
	}
}

2023 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW


2024 
JEMALLOC_ATTR
(
	$n⁄nuŒ
(1))

2025 
	$je_posix_memÆign
(**
mem±r
, 
size_t
 
Æignmít
, size_à
size
) {

2026 
ªt
;

2027 
°©ic_›ts_t
 
s›ts
;

2028 
dy«mic_›ts_t
 
d›ts
;

2030 
	`LOG
("core.posix_memalign.entry", "memÖtr: %p,álignment: %zu, "

2031 "size: %zu", 
mem±r
, 
Æignmít
, 
size
);

2033 
	`°©ic_›ts_öô
(&
s›ts
);

2034 
	`dy«mic_›ts_öô
(&
d›ts
);

2036 
s›ts
.
bump_em±y_Æloc
 = 
åue
;

2037 
s›ts
.
mö_Æignmít
 = (*);

2038 
s›ts
.
oom_°rög
 =

2040 
s›ts
.
övÆid_Æignmít_°rög
 =

2043 
d›ts
.
ªsu…
 = 
mem±r
;

2044 
d›ts
.
num_ôems
 = 1;

2045 
d›ts
.
ôem_size
 = 
size
;

2046 
d›ts
.
Æignmít
 =álignment;

2048 
ªt
 = 
	`imÆloc
(&
s›ts
, &
d›ts
);

2050 
	`LOG
("c‹e.posix_memÆign.exô", "ªsu…: %d,áŒo¯±r: %p", 
ªt
,

2051 *
mem±r
);

2053  
ªt
;

2054 
	}
}

2056 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


2057 
JEMALLOC_NOTHROW
 *

2058 
	$JEMALLOC_ATTR
(
mÆloc
Ë
	$JEMALLOC_ALLOC_SIZE
(2)

2059 
	$je_Æig√d_Æloc
(
size_t
 
Æignmít
, size_à
size
) {

2060 *
ªt
;

2062 
°©ic_›ts_t
 
s›ts
;

2063 
dy«mic_›ts_t
 
d›ts
;

2065 
	`LOG
("core.aligned_alloc.entry", "alignment: %zu, size: %zu\n",

2066 
Æignmít
, 
size
);

2068 
	`°©ic_›ts_öô
(&
s›ts
);

2069 
	`dy«mic_›ts_öô
(&
d›ts
);

2071 
s›ts
.
bump_em±y_Æloc
 = 
åue
;

2072 
s›ts
.
nuŒ_out_ªsu…_⁄_îr‹
 = 
åue
;

2073 
s›ts
.
£t_î∫o_⁄_îr‹
 = 
åue
;

2074 
s›ts
.
mö_Æignmít
 = 1;

2075 
s›ts
.
oom_°rög
 =

2077 
s›ts
.
övÆid_Æignmít_°rög
 =

2080 
d›ts
.
ªsu…
 = &
ªt
;

2081 
d›ts
.
num_ôems
 = 1;

2082 
d›ts
.
ôem_size
 = 
size
;

2083 
d›ts
.
Æignmít
 =álignment;

2085 
	`imÆloc
(&
s›ts
, &
d›ts
);

2087 
	`LOG
("c‹e.Æig√d_Æloc.exô", "ªsu…: %p", 
ªt
);

2089  
ªt
;

2090 
	}
}

2092 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


2093 
JEMALLOC_NOTHROW
 *

2094 
	$JEMALLOC_ATTR
(
mÆloc
Ë
	$JEMALLOC_ALLOC_SIZE2
(1, 2)

2095 
	$je_ˇŒoc
(
size_t
 
num
, size_à
size
) {

2096 *
ªt
;

2097 
°©ic_›ts_t
 
s›ts
;

2098 
dy«mic_›ts_t
 
d›ts
;

2100 
	`LOG
("c‹e.ˇŒoc.íåy", "num: %zu, size: %zu\n", 
num
, 
size
);

2102 
	`°©ic_›ts_öô
(&
s›ts
);

2103 
	`dy«mic_›ts_öô
(&
d›ts
);

2105 
s›ts
.
may_ovîÊow
 = 
åue
;

2106 
s›ts
.
bump_em±y_Æloc
 = 
åue
;

2107 
s›ts
.
nuŒ_out_ªsu…_⁄_îr‹
 = 
åue
;

2108 
s›ts
.
£t_î∫o_⁄_îr‹
 = 
åue
;

2109 
s›ts
.
oom_°rög
 = "<jemalloc>: Error in calloc(): out of memory\n";

2111 
d›ts
.
ªsu…
 = &
ªt
;

2112 
d›ts
.
num_ôems
 = 
num
;

2113 
d›ts
.
ôem_size
 = 
size
;

2114 
d›ts
.
zîo
 = 
åue
;

2116 
	`imÆloc
(&
s›ts
, &
d›ts
);

2118 
	`LOG
("c‹e.ˇŒoc.exô", "ªsu…: %p", 
ªt
);

2120  
ªt
;

2121 
	}
}

2124 
	$úóŒoc_¥of_ßm∂e
(
tsd_t
 *
tsd
, *
ﬁd_±r
, 
size_t
 
ﬁd_usize
, size_à
usize
,

2125 
¥of_t˘x_t
 *
t˘x
) {

2126 *
p
;

2128 i‡(
t˘x
 =
NULL
) {

2129  
NULL
;

2131 i‡(
usize
 <
SMALL_MAXCLASS
) {

2132 
p
 = 
	`úÆloc
(
tsd
, 
ﬁd_±r
, 
ﬁd_usize
, 
LARGE_MINCLASS
, 0, 
Ál£
);

2133 i‡(
p
 =
NULL
) {

2134  
NULL
;

2136 
	`¨ía_¥of_¥omŸe
(
	`tsd_tsdn
(
tsd
), 
p
, 
usize
);

2138 
p
 = 
	`úÆloc
(
tsd
, 
ﬁd_±r
, 
ﬁd_usize
, 
usize
, 0, 
Ál£
);

2141  
p
;

2142 
	}
}

2144 
JEMALLOC_ALWAYS_INLINE
 *

2145 
	$úóŒoc_¥of
(
tsd_t
 *
tsd
, *
ﬁd_±r
, 
size_t
 
ﬁd_usize
, size_à
usize
,

2146 
Æloc_˘x_t
 *
Æloc_˘x
) {

2147 *
p
;

2148 
boﬁ
 
¥of_a˘ive
;

2149 
¥of_t˘x_t
 *
ﬁd_t˘x
, *
t˘x
;

2151 
¥of_a˘ive
 = 
	`¥of_a˘ive_gë_u∆ocked
();

2152 
ﬁd_t˘x
 = 
	`¥of_t˘x_gë
(
	`tsd_tsdn
(
tsd
), 
ﬁd_±r
, 
Æloc_˘x
);

2153 
t˘x
 = 
	`¥of_Æloc_¥ï
(
tsd
, 
usize
, 
¥of_a˘ive
, 
åue
);

2154 i‡(
	`u∆ikñy
((
uöçå_t
)
t˘x
 != (uintptr_t)1U)) {

2155 
p
 = 
	`úóŒoc_¥of_ßm∂e
(
tsd
, 
ﬁd_±r
, 
ﬁd_usize
, 
usize
, 
t˘x
);

2157 
p
 = 
	`úÆloc
(
tsd
, 
ﬁd_±r
, 
ﬁd_usize
, 
usize
, 0, 
Ál£
);

2159 i‡(
	`u∆ikñy
(
p
 =
NULL
)) {

2160 
	`¥of_Æloc_rﬁlback
(
tsd
, 
t˘x
, 
åue
);

2161  
NULL
;

2163 
	`¥of_ªÆloc
(
tsd
, 
p
, 
usize
, 
t˘x
, 
¥of_a˘ive
, 
åue
, 
ﬁd_±r
, 
ﬁd_usize
,

2164 
ﬁd_t˘x
);

2166  
p
;

2167 
	}
}

2169 
JEMALLOC_ALWAYS_INLINE
 

2170 
	$i‰ì
(
tsd_t
 *
tsd
, *
±r
, 
tˇche_t
 *
tˇche
, 
boﬁ
 
¶ow_∑th
) {

2171 i‡(!
¶ow_∑th
) {

2172 
	`tsd_as£π_Á°
(
tsd
);

2174 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

2175 i‡(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) != 0) {

2176 
	`as£π
(
¶ow_∑th
);

2179 
	`as£π
(
±r
 !
NULL
);

2180 
	`as£π
(
	`mÆloc_öôülized
(Ë|| 
IS_INITIALIZER
);

2182 
Æloc_˘x_t
 
Æloc_˘x
;

2183 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsd_πªe_˘x
(
tsd
);

2184 
	`πªe_szöd_¶ab_ªad
(
	`tsd_tsdn
(
tsd
), &
exã¡s_πªe
, 
πªe_˘x
,

2185 (
uöçå_t
)
±r
, 
åue
, &
Æloc_˘x
.
szöd
, &Æloc_˘x.
¶ab
);

2186 
	`as£π
(
Æloc_˘x
.
szöd
 !
NSIZES
);

2188 
size_t
 
usize
;

2189 i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

2190 
usize
 = 
	`sz_ödex2size
(
Æloc_˘x
.
szöd
);

2191 
	`¥of_‰ì
(
tsd
, 
±r
, 
usize
, &
Æloc_˘x
);

2192 } i‡(
c⁄fig_°©s
) {

2193 
usize
 = 
	`sz_ödex2size
(
Æloc_˘x
.
szöd
);

2195 i‡(
c⁄fig_°©s
) {

2196 *
	`tsd_thªad_dóŒoˇãdp_gë
(
tsd
Ë+
usize
;

2199 i‡(
	`likñy
(!
¶ow_∑th
)) {

2200 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
±r
, 
tˇche
, &
Æloc_˘x
, 
Ál£
,

2201 
Ál£
);

2203 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
±r
, 
tˇche
, &
Æloc_˘x
, 
Ál£
,

2204 
åue
);

2206 
	}
}

2208 
JEMALLOC_ALWAYS_INLINE
 

2209 
	$is‰ì
(
tsd_t
 *
tsd
, *
±r
, 
size_t
 
usize
, 
tˇche_t
 *
tˇche
, 
boﬁ
 
¶ow_∑th
) {

2210 i‡(!
¶ow_∑th
) {

2211 
	`tsd_as£π_Á°
(
tsd
);

2213 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

2214 i‡(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) != 0) {

2215 
	`as£π
(
¶ow_∑th
);

2218 
	`as£π
(
±r
 !
NULL
);

2219 
	`as£π
(
	`mÆloc_öôülized
(Ë|| 
IS_INITIALIZER
);

2221 
Æloc_˘x_t
 
Æloc_˘x
, *
˘x
;

2222 i‡(!
c⁄fig_ˇche_oblivious
 && ((
uöçå_t
)
±r
 & 
PAGE_MASK
) != 0) {

2228 
Æloc_˘x
.
szöd
 = 
	`sz_size2ödex
(
usize
);

2229 
Æloc_˘x
.
¶ab
 = 
åue
;

2230 
˘x
 = &
Æloc_˘x
;

2231 i‡(
c⁄fig_debug
) {

2232 
Æloc_˘x_t
 
dbg_˘x
;

2233 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsd_πªe_˘x
(
tsd
);

2234 
	`πªe_szöd_¶ab_ªad
(
	`tsd_tsdn
(
tsd
), &
exã¡s_πªe
,

2235 
πªe_˘x
, (
uöçå_t
)
±r
, 
åue
, &
dbg_˘x
.
szöd
,

2236 &
dbg_˘x
.
¶ab
);

2237 
	`as£π
(
dbg_˘x
.
szöd
 =
Æloc_˘x
.szind);

2238 
	`as£π
(
dbg_˘x
.
¶ab
 =
Æloc_˘x
.slab);

2240 } i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

2241 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsd_πªe_˘x
(
tsd
);

2242 
	`πªe_szöd_¶ab_ªad
(
	`tsd_tsdn
(
tsd
), &
exã¡s_πªe
, 
πªe_˘x
,

2243 (
uöçå_t
)
±r
, 
åue
, &
Æloc_˘x
.
szöd
, &Æloc_˘x.
¶ab
);

2244 
	`as£π
(
Æloc_˘x
.
szöd
 =
	`sz_size2ödex
(
usize
));

2245 
˘x
 = &
Æloc_˘x
;

2247 
˘x
 = 
NULL
;

2250 i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

2251 
	`¥of_‰ì
(
tsd
, 
±r
, 
usize
, 
˘x
);

2253 i‡(
c⁄fig_°©s
) {

2254 *
	`tsd_thªad_dóŒoˇãdp_gë
(
tsd
Ë+
usize
;

2257 i‡(
	`likñy
(!
¶ow_∑th
)) {

2258 
	`isdÆlo˘
(
	`tsd_tsdn
(
tsd
), 
±r
, 
usize
, 
tˇche
, 
˘x
, 
Ál£
);

2260 
	`isdÆlo˘
(
	`tsd_tsdn
(
tsd
), 
±r
, 
usize
, 
tˇche
, 
˘x
, 
åue
);

2262 
	}
}

2264 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


2265 
JEMALLOC_NOTHROW
 *

2266 
	$JEMALLOC_ALLOC_SIZE
(2)

2267 
	$je_ªÆloc
(*
±r
, 
size_t
 
size
) {

2268 *
ªt
;

2269 
tsdn_t
 *
tsdn
 
	`JEMALLOC_CC_SILENCE_INIT
(
NULL
);

2270 
size_t
 
usize
 
	`JEMALLOC_CC_SILENCE_INIT
(0);

2271 
size_t
 
ﬁd_usize
 = 0;

2273 
	`LOG
("c‹e.ªÆloc.íåy", "±r: %p, size: %zu\n", 
±r
, 
size
);

2275 i‡(
	`u∆ikñy
(
size
 == 0)) {

2276 i‡(
±r
 !
NULL
) {

2278 
	`UTRACE
(
±r
, 0, 0);

2279 
tˇche_t
 *
tˇche
;

2280 
tsd_t
 *
tsd
 = 
	`tsd_„tch
();

2281 i‡(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) == 0) {

2282 
tˇche
 = 
	`tˇche_gë
(
tsd
);

2284 
tˇche
 = 
NULL
;

2286 
	`i‰ì
(
tsd
, 
±r
, 
tˇche
, 
åue
);

2288 
	`LOG
("c‹e.ªÆloc.exô", "ªsu…: %p", 
NULL
);

2289  
NULL
;

2291 
size
 = 1;

2294 i‡(
	`likñy
(
±r
 !
NULL
)) {

2295 
	`as£π
(
	`mÆloc_öôülized
(Ë|| 
IS_INITIALIZER
);

2296 
tsd_t
 *
tsd
 = 
	`tsd_„tch
();

2298 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

2300 
Æloc_˘x_t
 
Æloc_˘x
;

2301 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsd_πªe_˘x
(
tsd
);

2302 
	`πªe_szöd_¶ab_ªad
(
	`tsd_tsdn
(
tsd
), &
exã¡s_πªe
, 
πªe_˘x
,

2303 (
uöçå_t
)
±r
, 
åue
, &
Æloc_˘x
.
szöd
, &Æloc_˘x.
¶ab
);

2304 
	`as£π
(
Æloc_˘x
.
szöd
 !
NSIZES
);

2305 
ﬁd_usize
 = 
	`sz_ödex2size
(
Æloc_˘x
.
szöd
);

2306 
	`as£π
(
ﬁd_usize
 =
	`ißŒoc
(
	`tsd_tsdn
(
tsd
), 
±r
));

2307 i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

2308 
usize
 = 
	`sz_s2u
(
size
);

2309 
ªt
 = 
	`u∆ikñy
(
usize
 =0 || usizê> 
LARGE_MAXCLASS
) ?

2310 
NULL
 : 
	`úóŒoc_¥of
(
tsd
, 
±r
, 
ﬁd_usize
, 
usize
,

2311 &
Æloc_˘x
);

2313 i‡(
c⁄fig_°©s
) {

2314 
usize
 = 
	`sz_s2u
(
size
);

2316 
ªt
 = 
	`úÆloc
(
tsd
, 
±r
, 
ﬁd_usize
, 
size
, 0, 
Ál£
);

2318 
tsdn
 = 
	`tsd_tsdn
(
tsd
);

2321 *
ªt
 = 
	`je_mÆloc
(
size
);

2322 
	`LOG
("c‹e.ªÆloc.exô", "ªsu…: %p", 
ªt
);

2323  
ªt
;

2326 i‡(
	`u∆ikñy
(
ªt
 =
NULL
)) {

2327 i‡(
c⁄fig_xmÆloc
 && 
	`u∆ikñy
(
›t_xmÆloc
)) {

2328 
	`mÆloc_wrôe
("<jemalloc>: Error inÑealloc(): "

2330 
	`ab‹t
();

2332 
	`£t_î∫o
(
ENOMEM
);

2334 i‡(
c⁄fig_°©s
 && 
	`likñy
(
ªt
 !
NULL
)) {

2335 
tsd_t
 *
tsd
;

2337 
	`as£π
(
usize
 =
	`ißŒoc
(
tsdn
, 
ªt
));

2338 
tsd
 = 
	`tsdn_tsd
(
tsdn
);

2339 *
	`tsd_thªad_Æloˇãdp_gë
(
tsd
Ë+
usize
;

2340 *
	`tsd_thªad_dóŒoˇãdp_gë
(
tsd
Ë+
ﬁd_usize
;

2342 
	`UTRACE
(
±r
, 
size
, 
ªt
);

2343 
	`check_íåy_exô_lockög
(
tsdn
);

2345 
	`LOG
("c‹e.ªÆloc.exô", "ªsu…: %p", 
ªt
);

2346  
ªt
;

2347 
	}
}

2349 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW


2350 
	$je_‰ì
(*
±r
) {

2351 
	`LOG
("c‹e.‰ì.íåy", "±r: %p", 
±r
);

2353 
	`UTRACE
(
±r
, 0, 0);

2354 i‡(
	`likñy
(
±r
 !
NULL
)) {

2363 
tsd_t
 *
tsd
 = 
	`tsd_„tch_mö
();

2364 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

2366 
tˇche_t
 *
tˇche
;

2367 i‡(
	`likñy
(
	`tsd_Á°
(
tsd
))) {

2368 
	`tsd_as£π_Á°
(
tsd
);

2370 
tˇche
 = 
	`tsd_tˇchï_gë
(
tsd
);

2371 
	`i‰ì
(
tsd
, 
±r
, 
tˇche
, 
Ál£
);

2373 i‡(
	`likñy
(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) == 0)) {

2374 
tˇche
 = 
	`tˇche_gë
(
tsd
);

2376 
tˇche
 = 
NULL
;

2378 
	`i‰ì
(
tsd
, 
±r
, 
tˇche
, 
åue
);

2380 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

2382 
	`LOG
("core.free.exit", "");

2383 
	}
}

2393 #ifde‡
JEMALLOC_OVERRIDE_MEMALIGN


2394 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


2395 
JEMALLOC_NOTHROW
 *

2396 
	$JEMALLOC_ATTR
(
mÆloc
)

2397 
	$je_memÆign
(
size_t
 
Æignmít
, size_à
size
) {

2398 *
ªt
;

2399 
°©ic_›ts_t
 
s›ts
;

2400 
dy«mic_›ts_t
 
d›ts
;

2402 
	`LOG
("c‹e.memÆign.íåy", "Æignmít: %zu, size: %zu\n", 
Æignmít
,

2403 
size
);

2405 
	`°©ic_›ts_öô
(&
s›ts
);

2406 
	`dy«mic_›ts_öô
(&
d›ts
);

2408 
s›ts
.
bump_em±y_Æloc
 = 
åue
;

2409 
s›ts
.
mö_Æignmít
 = 1;

2410 
s›ts
.
oom_°rög
 =

2412 
s›ts
.
övÆid_Æignmít_°rög
 =

2414 
s›ts
.
nuŒ_out_ªsu…_⁄_îr‹
 = 
åue
;

2416 
d›ts
.
ªsu…
 = &
ªt
;

2417 
d›ts
.
num_ôems
 = 1;

2418 
d›ts
.
ôem_size
 = 
size
;

2419 
d›ts
.
Æignmít
 =álignment;

2421 
	`imÆloc
(&
s›ts
, &
d›ts
);

2423 
	`LOG
("c‹e.memÆign.exô", "ªsu…: %p", 
ªt
);

2424  
ªt
;

2425 
	}
}

2428 #ifde‡
JEMALLOC_OVERRIDE_VALLOC


2429 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


2430 
JEMALLOC_NOTHROW
 *

2431 
	$JEMALLOC_ATTR
(
mÆloc
)

2432 
	$je_vÆloc
(
size_t
 
size
) {

2433 *
ªt
;

2435 
°©ic_›ts_t
 
s›ts
;

2436 
dy«mic_›ts_t
 
d›ts
;

2438 
	`LOG
("c‹e.vÆloc.íåy", "size: %zu\n", 
size
);

2440 
	`°©ic_›ts_öô
(&
s›ts
);

2441 
	`dy«mic_›ts_öô
(&
d›ts
);

2443 
s›ts
.
bump_em±y_Æloc
 = 
åue
;

2444 
s›ts
.
nuŒ_out_ªsu…_⁄_îr‹
 = 
åue
;

2445 
s›ts
.
mö_Æignmít
 = 
PAGE
;

2446 
s›ts
.
oom_°rög
 =

2448 
s›ts
.
övÆid_Æignmít_°rög
 =

2451 
d›ts
.
ªsu…
 = &
ªt
;

2452 
d›ts
.
num_ôems
 = 1;

2453 
d›ts
.
ôem_size
 = 
size
;

2454 
d›ts
.
Æignmít
 = 
PAGE
;

2456 
	`imÆloc
(&
s›ts
, &
d›ts
);

2458 
	`LOG
("c‹e.vÆloc.exô", "ªsu…: %p\n", 
ªt
);

2459  
ªt
;

2460 
	}
}

2463 #i‡
deföed
(
JEMALLOC_IS_MALLOC
Ë&& deföed(
JEMALLOC_GLIBC_MALLOC_HOOK
)

2473 
JEMALLOC_EXPORT
 (*
__‰ì_hook
)(*
±r
Ë
je_‰ì
;

2474 
JEMALLOC_EXPORT
 *(*
__mÆloc_hook
)(
size_t
 
size
Ë
je_mÆloc
;

2475 
JEMALLOC_EXPORT
 *(*
__ªÆloc_hook
)(*
±r
, 
size_t
 
size
Ë
je_ªÆloc
;

2476 #ifde‡
JEMALLOC_GLIBC_MEMALIGN_HOOK


2477 
JEMALLOC_EXPORT
 *(*
__memÆign_hook
)(
size_t
 
Æignmít
, size_à
size
) =

2478 
je_memÆign
;

2481 #ifde‡
CPU_COUNT


2487 
	#ALIAS
(
je_‚
Ë
	`__©åibuã__
((
	`Æüs
 (#je_‚), 
u£d
))

	)

2489 
	#PREALIAS
(
je_‚
Ë
	`ALIAS
(je_‚)

	)

2490 #ifde‡
JEMALLOC_OVERRIDE___LIBC_CALLOC


2491 *
	$__libc_ˇŒoc
(
size_t
 
n
, size_à
size
Ë
	`PREALIAS
(
je_ˇŒoc
);

2493 #ifde‡
JEMALLOC_OVERRIDE___LIBC_FREE


2494 
	$__libc_‰ì
(* 
±r
Ë
	`PREALIAS
(
je_‰ì
);

2496 #ifde‡
JEMALLOC_OVERRIDE___LIBC_MALLOC


2497 *
	$__libc_mÆloc
(
size_t
 
size
Ë
	`PREALIAS
(
je_mÆloc
);

2499 #ifde‡
JEMALLOC_OVERRIDE___LIBC_MEMALIGN


2500 *
	$__libc_memÆign
(
size_t
 
Æign
, size_à
s
Ë
	`PREALIAS
(
je_memÆign
);

2502 #ifde‡
JEMALLOC_OVERRIDE___LIBC_REALLOC


2503 *
	$__libc_ªÆloc
(* 
±r
, 
size_t
 
size
Ë
	`PREALIAS
(
je_ªÆloc
);

2505 #ifde‡
JEMALLOC_OVERRIDE___LIBC_VALLOC


2506 *
	$__libc_vÆloc
(
size_t
 
size
Ë
	`PREALIAS
(
je_vÆloc
);

2508 #ifde‡
JEMALLOC_OVERRIDE___POSIX_MEMALIGN


2509 
	$__posix_memÆign
(** 
r
, 
size_t
 
a
, size_à
s
Ë
	`PREALIAS
(
je_posix_memÆign
);

2511 #unde‡
PREALIAS


2512 #unde‡
ALIAS


2524 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


2525 
JEMALLOC_NOTHROW
 *

2526 
	$JEMALLOC_ATTR
(
mÆloc
Ë
	$JEMALLOC_ALLOC_SIZE
(1)

2527 
	$je_mÆlocx
(
size_t
 
size
, 
Êags
) {

2528 *
ªt
;

2529 
°©ic_›ts_t
 
s›ts
;

2530 
dy«mic_›ts_t
 
d›ts
;

2532 
	`LOG
("c‹e.mÆlocx.íåy", "size: %zu, fœgs: %d", 
size
, 
Êags
);

2534 
	`°©ic_›ts_öô
(&
s›ts
);

2535 
	`dy«mic_›ts_öô
(&
d›ts
);

2537 
s›ts
.
as£π_n⁄em±y_Æloc
 = 
åue
;

2538 
s›ts
.
nuŒ_out_ªsu…_⁄_îr‹
 = 
åue
;

2539 
s›ts
.
oom_°rög
 = "<jemalloc>: Error in mallocx(): out of memory\n";

2541 
d›ts
.
ªsu…
 = &
ªt
;

2542 
d›ts
.
num_ôems
 = 1;

2543 
d›ts
.
ôem_size
 = 
size
;

2544 i‡(
	`u∆ikñy
(
Êags
 != 0)) {

2545 i‡((
Êags
 & 
MALLOCX_LG_ALIGN_MASK
) != 0) {

2546 
d›ts
.
Æignmít
 = 
	`MALLOCX_ALIGN_GET_SPECIFIED
(
Êags
);

2549 
d›ts
.
zîo
 = 
	`MALLOCX_ZERO_GET
(
Êags
);

2551 i‡((
Êags
 & 
MALLOCX_TCACHE_MASK
) != 0) {

2552 i‡((
Êags
 & 
MALLOCX_TCACHE_MASK
)

2553 =
MALLOCX_TCACHE_NONE
) {

2554 
d›ts
.
tˇche_öd
 = 
TCACHE_IND_NONE
;

2556 
d›ts
.
tˇche_öd
 = 
	`MALLOCX_TCACHE_GET
(
Êags
);

2559 
d›ts
.
tˇche_öd
 = 
TCACHE_IND_AUTOMATIC
;

2562 i‡((
Êags
 & 
MALLOCX_ARENA_MASK
) != 0)

2563 
d›ts
.
¨ía_öd
 = 
	`MALLOCX_ARENA_GET
(
Êags
);

2566 
	`imÆloc
(&
s›ts
, &
d›ts
);

2568 
	`LOG
("c‹e.mÆlocx.exô", "ªsu…: %p", 
ªt
);

2569  
ªt
;

2570 
	}
}

2573 
	$úÆlocx_¥of_ßm∂e
(
tsdn_t
 *
tsdn
, *
ﬁd_±r
, 
size_t
 
ﬁd_usize
,

2574 
size_t
 
usize
, size_à
Æignmít
, 
boﬁ
 
zîo
, 
tˇche_t
 *
tˇche
, 
¨ía_t
 *
¨ía
,

2575 
¥of_t˘x_t
 *
t˘x
) {

2576 *
p
;

2578 i‡(
t˘x
 =
NULL
) {

2579  
NULL
;

2581 i‡(
usize
 <
SMALL_MAXCLASS
) {

2582 
p
 = 
	`úÆlo˘
(
tsdn
, 
ﬁd_±r
, 
ﬁd_usize
, 
LARGE_MINCLASS
,

2583 
Æignmít
, 
zîo
, 
tˇche
, 
¨ía
);

2584 i‡(
p
 =
NULL
) {

2585  
NULL
;

2587 
	`¨ía_¥of_¥omŸe
(
tsdn
, 
p
, 
usize
);

2589 
p
 = 
	`úÆlo˘
(
tsdn
, 
ﬁd_±r
, 
ﬁd_usize
, 
usize
, 
Æignmít
, 
zîo
,

2590 
tˇche
, 
¨ía
);

2593  
p
;

2594 
	}
}

2596 
JEMALLOC_ALWAYS_INLINE
 *

2597 
	$úÆlocx_¥of
(
tsd_t
 *
tsd
, *
ﬁd_±r
, 
size_t
 
ﬁd_usize
, size_à
size
,

2598 
size_t
 
Æignmít
, size_à*
usize
, 
boﬁ
 
zîo
, 
tˇche_t
 *
tˇche
,

2599 
¨ía_t
 *
¨ía
, 
Æloc_˘x_t
 *
Æloc_˘x
) {

2600 *
p
;

2601 
boﬁ
 
¥of_a˘ive
;

2602 
¥of_t˘x_t
 *
ﬁd_t˘x
, *
t˘x
;

2604 
¥of_a˘ive
 = 
	`¥of_a˘ive_gë_u∆ocked
();

2605 
ﬁd_t˘x
 = 
	`¥of_t˘x_gë
(
	`tsd_tsdn
(
tsd
), 
ﬁd_±r
, 
Æloc_˘x
);

2606 
t˘x
 = 
	`¥of_Æloc_¥ï
(
tsd
, *
usize
, 
¥of_a˘ive
, 
Ál£
);

2607 i‡(
	`u∆ikñy
((
uöçå_t
)
t˘x
 != (uintptr_t)1U)) {

2608 
p
 = 
	`úÆlocx_¥of_ßm∂e
(
	`tsd_tsdn
(
tsd
), 
ﬁd_±r
, 
ﬁd_usize
,

2609 *
usize
, 
Æignmít
, 
zîo
, 
tˇche
, 
¨ía
, 
t˘x
);

2611 
p
 = 
	`úÆlo˘
(
	`tsd_tsdn
(
tsd
), 
ﬁd_±r
, 
ﬁd_usize
, 
size
, 
Æignmít
,

2612 
zîo
, 
tˇche
, 
¨ía
);

2614 i‡(
	`u∆ikñy
(
p
 =
NULL
)) {

2615 
	`¥of_Æloc_rﬁlback
(
tsd
, 
t˘x
, 
Ál£
);

2616  
NULL
;

2619 i‡(
p
 =
ﬁd_±r
 && 
Æignmít
 != 0) {

2628 *
usize
 = 
	`ißŒoc
(
	`tsd_tsdn
(
tsd
), 
p
);

2630 
	`¥of_ªÆloc
(
tsd
, 
p
, *
usize
, 
t˘x
, 
¥of_a˘ive
, 
Ál£
, 
ﬁd_±r
,

2631 
ﬁd_usize
, 
ﬁd_t˘x
);

2633  
p
;

2634 
	}
}

2636 
JEMALLOC_EXPORT
 
JEMALLOC_ALLOCATOR
 
JEMALLOC_RESTRICT_RETURN


2637 
JEMALLOC_NOTHROW
 *

2638 
	$JEMALLOC_ALLOC_SIZE
(2)

2639 
	$je_øŒocx
(*
±r
, 
size_t
 
size
, 
Êags
) {

2640 *
p
;

2641 
tsd_t
 *
tsd
;

2642 
size_t
 
usize
;

2643 
size_t
 
ﬁd_usize
;

2644 
size_t
 
Æignmít
 = 
	`MALLOCX_ALIGN_GET
(
Êags
);

2645 
boﬁ
 
zîo
 = 
Êags
 & 
MALLOCX_ZERO
;

2646 
¨ía_t
 *
¨ía
;

2647 
tˇche_t
 *
tˇche
;

2649 
	`LOG
("c‹e.øŒocx.íåy", "±r: %p, size: %zu, fœgs: %d", 
±r
,

2650 
size
, 
Êags
);

2653 
	`as£π
(
±r
 !
NULL
);

2654 
	`as£π
(
size
 != 0);

2655 
	`as£π
(
	`mÆloc_öôülized
(Ë|| 
IS_INITIALIZER
);

2656 
tsd
 = 
	`tsd_„tch
();

2657 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

2659 i‡(
	`u∆ikñy
((
Êags
 & 
MALLOCX_ARENA_MASK
) != 0)) {

2660 
¨ía_öd
 = 
	`MALLOCX_ARENA_GET
(
Êags
);

2661 
¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
¨ía_öd
, 
åue
);

2662 i‡(
	`u∆ikñy
(
¨ía
 =
NULL
)) {

2663 
œbñ_oom
;

2666 
¨ía
 = 
NULL
;

2669 i‡(
	`u∆ikñy
((
Êags
 & 
MALLOCX_TCACHE_MASK
) != 0)) {

2670 i‡((
Êags
 & 
MALLOCX_TCACHE_MASK
Ë=
MALLOCX_TCACHE_NONE
) {

2671 
tˇche
 = 
NULL
;

2673 
tˇche
 = 
	`tˇches_gë
(
tsd
, 
	`MALLOCX_TCACHE_GET
(
Êags
));

2676 
tˇche
 = 
	`tˇche_gë
(
tsd
);

2679 
Æloc_˘x_t
 
Æloc_˘x
;

2680 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsd_πªe_˘x
(
tsd
);

2681 
	`πªe_szöd_¶ab_ªad
(
	`tsd_tsdn
(
tsd
), &
exã¡s_πªe
, 
πªe_˘x
,

2682 (
uöçå_t
)
±r
, 
åue
, &
Æloc_˘x
.
szöd
, &Æloc_˘x.
¶ab
);

2683 
	`as£π
(
Æloc_˘x
.
szöd
 !
NSIZES
);

2684 
ﬁd_usize
 = 
	`sz_ödex2size
(
Æloc_˘x
.
szöd
);

2685 
	`as£π
(
ﬁd_usize
 =
	`ißŒoc
(
	`tsd_tsdn
(
tsd
), 
±r
));

2686 i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

2687 
usize
 = (
Æignmít
 == 0) ?

2688 
	`sz_s2u
(
size
Ë: 
	`sz_ß2u
(size, 
Æignmít
);

2689 i‡(
	`u∆ikñy
(
usize
 =0 || usizê> 
LARGE_MAXCLASS
)) {

2690 
œbñ_oom
;

2692 
p
 = 
	`úÆlocx_¥of
(
tsd
, 
±r
, 
ﬁd_usize
, 
size
, 
Æignmít
, &
usize
,

2693 
zîo
, 
tˇche
, 
¨ía
, &
Æloc_˘x
);

2694 i‡(
	`u∆ikñy
(
p
 =
NULL
)) {

2695 
œbñ_oom
;

2698 
p
 = 
	`úÆlo˘
(
	`tsd_tsdn
(
tsd
), 
±r
, 
ﬁd_usize
, 
size
, 
Æignmít
,

2699 
zîo
, 
tˇche
, 
¨ía
);

2700 i‡(
	`u∆ikñy
(
p
 =
NULL
)) {

2701 
œbñ_oom
;

2703 i‡(
c⁄fig_°©s
) {

2704 
usize
 = 
	`ißŒoc
(
	`tsd_tsdn
(
tsd
), 
p
);

2707 
	`as£π
(
Æignmít
 =0 || ((
uöçå_t
)
p
 & (Æignmíà- 1)Ë=
	`ZU
(0));

2709 i‡(
c⁄fig_°©s
) {

2710 *
	`tsd_thªad_Æloˇãdp_gë
(
tsd
Ë+
usize
;

2711 *
	`tsd_thªad_dóŒoˇãdp_gë
(
tsd
Ë+
ﬁd_usize
;

2713 
	`UTRACE
(
±r
, 
size
, 
p
);

2714 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

2716 
	`LOG
("c‹e.øŒocx.exô", "ªsu…: %p", 
p
);

2717  
p
;

2718 
œbñ_oom
:

2719 i‡(
c⁄fig_xmÆloc
 && 
	`u∆ikñy
(
›t_xmÆloc
)) {

2720 
	`mÆloc_wrôe
("<jemalloc>: Error inÑallocx(): out of memory\n");

2721 
	`ab‹t
();

2723 
	`UTRACE
(
±r
, 
size
, 0);

2724 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

2726 
	`LOG
("c‹e.øŒocx.exô", "ªsu…: %p", 
NULL
);

2727  
NULL
;

2728 
	}
}

2730 
JEMALLOC_ALWAYS_INLINE
 
size_t


2731 
	$ixÆlocx_hñ≥r
(
tsdn_t
 *
tsdn
, *
±r
, 
size_t
 
ﬁd_usize
, size_à
size
,

2732 
size_t
 
exåa
, size_à
Æignmít
, 
boﬁ
 
zîo
) {

2733 
size_t
 
usize
;

2735 i‡(
	`ixÆloc
(
tsdn
, 
±r
, 
ﬁd_usize
, 
size
, 
exåa
, 
Æignmít
, 
zîo
)) {

2736  
ﬁd_usize
;

2738 
usize
 = 
	`ißŒoc
(
tsdn
, 
±r
);

2740  
usize
;

2741 
	}
}

2743 
size_t


2744 
	$ixÆlocx_¥of_ßm∂e
(
tsdn_t
 *
tsdn
, *
±r
, 
size_t
 
ﬁd_usize
, size_à
size
,

2745 
size_t
 
exåa
, size_à
Æignmít
, 
boﬁ
 
zîo
, 
¥of_t˘x_t
 *
t˘x
) {

2746 
size_t
 
usize
;

2748 i‡(
t˘x
 =
NULL
) {

2749  
ﬁd_usize
;

2751 
usize
 = 
	`ixÆlocx_hñ≥r
(
tsdn
, 
±r
, 
ﬁd_usize
, 
size
, 
exåa
, 
Æignmít
,

2752 
zîo
);

2754  
usize
;

2755 
	}
}

2757 
JEMALLOC_ALWAYS_INLINE
 
size_t


2758 
	$ixÆlocx_¥of
(
tsd_t
 *
tsd
, *
±r
, 
size_t
 
ﬁd_usize
, size_à
size
,

2759 
size_t
 
exåa
, size_à
Æignmít
, 
boﬁ
 
zîo
, 
Æloc_˘x_t
 *
Æloc_˘x
) {

2760 
size_t
 
usize_max
, 
usize
;

2761 
boﬁ
 
¥of_a˘ive
;

2762 
¥of_t˘x_t
 *
ﬁd_t˘x
, *
t˘x
;

2764 
¥of_a˘ive
 = 
	`¥of_a˘ive_gë_u∆ocked
();

2765 
ﬁd_t˘x
 = 
	`¥of_t˘x_gë
(
	`tsd_tsdn
(
tsd
), 
±r
, 
Æloc_˘x
);

2772 i‡(
Æignmít
 == 0) {

2773 
usize_max
 = 
	`sz_s2u
(
size
+
exåa
);

2774 
	`as£π
(
usize_max
 > 0 && usize_max <
LARGE_MAXCLASS
);

2776 
usize_max
 = 
	`sz_ß2u
(
size
+
exåa
, 
Æignmít
);

2777 i‡(
	`u∆ikñy
(
usize_max
 =0 || usize_max > 
LARGE_MAXCLASS
)) {

2784 
usize_max
 = 
LARGE_MAXCLASS
;

2787 
t˘x
 = 
	`¥of_Æloc_¥ï
(
tsd
, 
usize_max
, 
¥of_a˘ive
, 
Ál£
);

2789 i‡(
	`u∆ikñy
((
uöçå_t
)
t˘x
 != (uintptr_t)1U)) {

2790 
usize
 = 
	`ixÆlocx_¥of_ßm∂e
(
	`tsd_tsdn
(
tsd
), 
±r
, 
ﬁd_usize
,

2791 
size
, 
exåa
, 
Æignmít
, 
zîo
, 
t˘x
);

2793 
usize
 = 
	`ixÆlocx_hñ≥r
(
	`tsd_tsdn
(
tsd
), 
±r
, 
ﬁd_usize
, 
size
,

2794 
exåa
, 
Æignmít
, 
zîo
);

2796 i‡(
usize
 =
ﬁd_usize
) {

2797 
	`¥of_Æloc_rﬁlback
(
tsd
, 
t˘x
, 
Ál£
);

2798  
usize
;

2800 
	`¥of_ªÆloc
(
tsd
, 
±r
, 
usize
, 
t˘x
, 
¥of_a˘ive
, 
Ál£
,Öå, 
ﬁd_usize
,

2801 
ﬁd_t˘x
);

2803  
usize
;

2804 
	}
}

2806 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW


2807 
	$je_xÆlocx
(*
±r
, 
size_t
 
size
, size_à
exåa
, 
Êags
) {

2808 
tsd_t
 *
tsd
;

2809 
size_t
 
usize
, 
ﬁd_usize
;

2810 
size_t
 
Æignmít
 = 
	`MALLOCX_ALIGN_GET
(
Êags
);

2811 
boﬁ
 
zîo
 = 
Êags
 & 
MALLOCX_ZERO
;

2813 
	`LOG
("core.xallocx.entry", "ptr: %p, size: %zu,Éxtra: %zu, "

2814 "Êags: %d", 
±r
, 
size
, 
exåa
, 
Êags
);

2816 
	`as£π
(
±r
 !
NULL
);

2817 
	`as£π
(
size
 != 0);

2818 
	`as£π
(
SIZE_T_MAX
 - 
size
 >
exåa
);

2819 
	`as£π
(
	`mÆloc_öôülized
(Ë|| 
IS_INITIALIZER
);

2820 
tsd
 = 
	`tsd_„tch
();

2821 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

2823 
Æloc_˘x_t
 
Æloc_˘x
;

2824 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsd_πªe_˘x
(
tsd
);

2825 
	`πªe_szöd_¶ab_ªad
(
	`tsd_tsdn
(
tsd
), &
exã¡s_πªe
, 
πªe_˘x
,

2826 (
uöçå_t
)
±r
, 
åue
, &
Æloc_˘x
.
szöd
, &Æloc_˘x.
¶ab
);

2827 
	`as£π
(
Æloc_˘x
.
szöd
 !
NSIZES
);

2828 
ﬁd_usize
 = 
	`sz_ödex2size
(
Æloc_˘x
.
szöd
);

2829 
	`as£π
(
ﬁd_usize
 =
	`ißŒoc
(
	`tsd_tsdn
(
tsd
), 
±r
));

2839 i‡(
	`u∆ikñy
(
size
 > 
LARGE_MAXCLASS
)) {

2840 
usize
 = 
ﬁd_usize
;

2841 
œbñ_nŸ_ªsized
;

2843 i‡(
	`u∆ikñy
(
LARGE_MAXCLASS
 - 
size
 < 
exåa
)) {

2844 
exåa
 = 
LARGE_MAXCLASS
 - 
size
;

2847 i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

2848 
usize
 = 
	`ixÆlocx_¥of
(
tsd
, 
±r
, 
ﬁd_usize
, 
size
, 
exåa
,

2849 
Æignmít
, 
zîo
, &
Æloc_˘x
);

2851 
usize
 = 
	`ixÆlocx_hñ≥r
(
	`tsd_tsdn
(
tsd
), 
±r
, 
ﬁd_usize
, 
size
,

2852 
exåa
, 
Æignmít
, 
zîo
);

2854 i‡(
	`u∆ikñy
(
usize
 =
ﬁd_usize
)) {

2855 
œbñ_nŸ_ªsized
;

2858 i‡(
c⁄fig_°©s
) {

2859 *
	`tsd_thªad_Æloˇãdp_gë
(
tsd
Ë+
usize
;

2860 *
	`tsd_thªad_dóŒoˇãdp_gë
(
tsd
Ë+
ﬁd_usize
;

2862 
œbñ_nŸ_ªsized
:

2863 
	`UTRACE
(
±r
, 
size
,Ötr);

2864 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

2866 
	`LOG
("c‹e.xÆlocx.exô", "ªsu…: %zu", 
usize
);

2867  
usize
;

2868 
	}
}

2870 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW


2871 
	$JEMALLOC_ATTR
(
puª
)

2872 
	$je_ßŒocx
(c⁄° *
±r
, 
Êags
) {

2873 
size_t
 
usize
;

2874 
tsdn_t
 *
tsdn
;

2876 
	`LOG
("c‹e.ßŒocx.íåy", "±r: %p, fœgs: %d", 
±r
, 
Êags
);

2878 
	`as£π
(
	`mÆloc_öôülized
(Ë|| 
IS_INITIALIZER
);

2879 
	`as£π
(
±r
 !
NULL
);

2881 
tsdn
 = 
	`tsdn_„tch
();

2882 
	`check_íåy_exô_lockög
(
tsdn
);

2884 i‡(
c⁄fig_debug
 || 
f‹˚_ivßŒoc
) {

2885 
usize
 = 
	`ivßŒoc
(
tsdn
, 
±r
);

2886 
	`as£π
(
f‹˚_ivßŒoc
 || 
usize
 != 0);

2888 
usize
 = 
	`ißŒoc
(
tsdn
, 
±r
);

2891 
	`check_íåy_exô_lockög
(
tsdn
);

2893 
	`LOG
("c‹e.ßŒocx.exô", "ªsu…: %zu", 
usize
);

2894  
usize
;

2895 
	}
}

2897 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW


2898 
	$je_dÆlocx
(*
±r
, 
Êags
) {

2899 
	`LOG
("c‹e.dÆlocx.íåy", "±r: %p, fœgs: %d", 
±r
, 
Êags
);

2901 
	`as£π
(
±r
 !
NULL
);

2902 
	`as£π
(
	`mÆloc_öôülized
(Ë|| 
IS_INITIALIZER
);

2904 
tsd_t
 *
tsd
 = 
	`tsd_„tch
();

2905 
boﬁ
 
Á°
 = 
	`tsd_Á°
(
tsd
);

2906 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

2908 
tˇche_t
 *
tˇche
;

2909 i‡(
	`u∆ikñy
((
Êags
 & 
MALLOCX_TCACHE_MASK
) != 0)) {

2911 
	`as£π
(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) == 0);

2912 i‡((
Êags
 & 
MALLOCX_TCACHE_MASK
Ë=
MALLOCX_TCACHE_NONE
) {

2913 
tˇche
 = 
NULL
;

2915 
tˇche
 = 
	`tˇches_gë
(
tsd
, 
	`MALLOCX_TCACHE_GET
(
Êags
));

2918 i‡(
	`likñy
(
Á°
)) {

2919 
tˇche
 = 
	`tsd_tˇchï_gë
(
tsd
);

2920 
	`as£π
(
tˇche
 =
	`tˇche_gë
(
tsd
));

2922 i‡(
	`likñy
(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) == 0)) {

2923 
tˇche
 = 
	`tˇche_gë
(
tsd
);

2925 
tˇche
 = 
NULL
;

2930 
	`UTRACE
(
±r
, 0, 0);

2931 i‡(
	`likñy
(
Á°
)) {

2932 
	`tsd_as£π_Á°
(
tsd
);

2933 
	`i‰ì
(
tsd
, 
±r
, 
tˇche
, 
Ál£
);

2935 
	`i‰ì
(
tsd
, 
±r
, 
tˇche
, 
åue
);

2937 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

2939 
	`LOG
("core.dallocx.exit", "");

2940 
	}
}

2942 
JEMALLOC_ALWAYS_INLINE
 
size_t


2943 
	$öÆlocx
(
tsdn_t
 *
tsdn
, 
size_t
 
size
, 
Êags
) {

2944 
	`check_íåy_exô_lockög
(
tsdn
);

2946 
size_t
 
usize
;

2947 i‡(
	`likñy
((
Êags
 & 
MALLOCX_LG_ALIGN_MASK
) == 0)) {

2948 
usize
 = 
	`sz_s2u
(
size
);

2950 
usize
 = 
	`sz_ß2u
(
size
, 
	`MALLOCX_ALIGN_GET_SPECIFIED
(
Êags
));

2952 
	`check_íåy_exô_lockög
(
tsdn
);

2953  
usize
;

2954 
	}
}

2956 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW


2957 
	$je_sdÆlocx
(*
±r
, 
size_t
 
size
, 
Êags
) {

2958 
	`as£π
(
±r
 !
NULL
);

2959 
	`as£π
(
	`mÆloc_öôülized
(Ë|| 
IS_INITIALIZER
);

2961 
	`LOG
("c‹e.sdÆlocx.íåy", "±r: %p, size: %zu, fœgs: %d", 
±r
,

2962 
size
, 
Êags
);

2964 
tsd_t
 *
tsd
 = 
	`tsd_„tch
();

2965 
boﬁ
 
Á°
 = 
	`tsd_Á°
(
tsd
);

2966 
size_t
 
usize
 = 
	`öÆlocx
(
	`tsd_tsdn
(
tsd
), 
size
, 
Êags
);

2967 
	`as£π
(
usize
 =
	`ißŒoc
(
	`tsd_tsdn
(
tsd
), 
±r
));

2968 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

2970 
tˇche_t
 *
tˇche
;

2971 i‡(
	`u∆ikñy
((
Êags
 & 
MALLOCX_TCACHE_MASK
) != 0)) {

2973 
	`as£π
(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) == 0);

2974 i‡((
Êags
 & 
MALLOCX_TCACHE_MASK
Ë=
MALLOCX_TCACHE_NONE
) {

2975 
tˇche
 = 
NULL
;

2977 
tˇche
 = 
	`tˇches_gë
(
tsd
, 
	`MALLOCX_TCACHE_GET
(
Êags
));

2980 i‡(
	`likñy
(
Á°
)) {

2981 
tˇche
 = 
	`tsd_tˇchï_gë
(
tsd
);

2982 
	`as£π
(
tˇche
 =
	`tˇche_gë
(
tsd
));

2984 i‡(
	`likñy
(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) == 0)) {

2985 
tˇche
 = 
	`tˇche_gë
(
tsd
);

2987 
tˇche
 = 
NULL
;

2992 
	`UTRACE
(
±r
, 0, 0);

2993 i‡(
	`likñy
(
Á°
)) {

2994 
	`tsd_as£π_Á°
(
tsd
);

2995 
	`is‰ì
(
tsd
, 
±r
, 
usize
, 
tˇche
, 
Ál£
);

2997 
	`is‰ì
(
tsd
, 
±r
, 
usize
, 
tˇche
, 
åue
);

2999 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

3001 
	`LOG
("core.sdallocx.exit", "");

3002 
	}
}

3004 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW


3005 
	$JEMALLOC_ATTR
(
puª
)

3006 
	$je_«Œocx
(
size_t
 
size
, 
Êags
) {

3007 
size_t
 
usize
;

3008 
tsdn_t
 *
tsdn
;

3010 
	`as£π
(
size
 != 0);

3012 i‡(
	`u∆ikñy
(
	`mÆloc_öô
())) {

3013 
	`LOG
("c‹e.«Œocx.exô", "ªsu…: %zu", 
	`ZU
(0));

3017 
tsdn
 = 
	`tsdn_„tch
();

3018 
	`check_íåy_exô_lockög
(
tsdn
);

3020 
usize
 = 
	`öÆlocx
(
tsdn
, 
size
, 
Êags
);

3021 i‡(
	`u∆ikñy
(
usize
 > 
LARGE_MAXCLASS
)) {

3022 
	`LOG
("c‹e.«Œocx.exô", "ªsu…: %zu", 
	`ZU
(0));

3026 
	`check_íåy_exô_lockög
(
tsdn
);

3027 
	`LOG
("c‹e.«Œocx.exô", "ªsu…: %zu", 
usize
);

3028  
usize
;

3029 
	}
}

3031 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW


3032 
	$je_mÆl˘l
(c⁄° *
«me
, *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
,

3033 
size_t
 
√wÀn
) {

3034 
ªt
;

3035 
tsd_t
 *
tsd
;

3037 
	`LOG
("c‹e.mÆl˘l.íåy", "«me: %s", 
«me
);

3039 i‡(
	`u∆ikñy
(
	`mÆloc_öô
())) {

3040 
	`LOG
("c‹e.mÆl˘l.exô", "ªsu…: %d", 
EAGAIN
);

3041  
EAGAIN
;

3044 
tsd
 = 
	`tsd_„tch
();

3045 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

3046 
ªt
 = 
	`˘l_by«me
(
tsd
, 
«me
, 
ﬁdp
, 
ﬁdÀ≈
, 
√wp
, 
√wÀn
);

3047 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

3049 
	`LOG
("c‹e.mÆl˘l.exô", "ªsu…: %d", 
ªt
);

3050  
ªt
;

3051 
	}
}

3053 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW


3054 
	$je_mÆl˘ amëomib
(c⁄° *
«me
, 
size_t
 *
mibp
, size_à*
mibÀ≈
) {

3055 
ªt
;

3057 
	`LOG
("c‹e.mÆl˘ amëomib.íåy", "«me: %s", 
«me
);

3059 i‡(
	`u∆ikñy
(
	`mÆloc_öô
())) {

3060 
	`LOG
("c‹e.mÆl˘ amëomib.exô", "ªsu…: %d", 
EAGAIN
);

3061  
EAGAIN
;

3064 
tsd_t
 *
tsd
 = 
	`tsd_„tch
();

3065 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

3066 
ªt
 = 
	`˘l_«mëomib
(
tsd
, 
«me
, 
mibp
, 
mibÀ≈
);

3067 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

3069 
	`LOG
("c‹e.mÆl˘ amëomib.exô", "ªsu…: %d", 
ªt
);

3070  
ªt
;

3071 
	}
}

3073 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW


3074 
	$je_mÆl˘lbymib
(c⁄° 
size_t
 *
mib
, size_à
mibÀn
, *
ﬁdp
, size_à*
ﬁdÀ≈
,

3075 *
√wp
, 
size_t
 
√wÀn
) {

3076 
ªt
;

3077 
tsd_t
 *
tsd
;

3079 
	`LOG
("core.mallctlbymib.entry", "");

3081 i‡(
	`u∆ikñy
(
	`mÆloc_öô
())) {

3082 
	`LOG
("c‹e.mÆl˘lbymib.exô", "ªsu…: %d", 
EAGAIN
);

3083  
EAGAIN
;

3086 
tsd
 = 
	`tsd_„tch
();

3087 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

3088 
ªt
 = 
	`˘l_bymib
(
tsd
, 
mib
, 
mibÀn
, 
ﬁdp
, 
ﬁdÀ≈
, 
√wp
, 
√wÀn
);

3089 
	`check_íåy_exô_lockög
(
	`tsd_tsdn
(
tsd
));

3090 
	`LOG
("c‹e.mÆl˘lbymib.exô", "ªsu…: %d", 
ªt
);

3091  
ªt
;

3092 
	}
}

3094 
JEMALLOC_EXPORT
 
JEMALLOC_NOTHROW


3095 
	$je_mÆloc_°©s_¥öt
((*
wrôe_cb
)(*, c⁄° *), *
cb›aque
,

3096 c⁄° *
›ts
) {

3097 
tsdn_t
 *
tsdn
;

3099 
	`LOG
("core.malloc_stats_print.entry", "");

3101 
tsdn
 = 
	`tsdn_„tch
();

3102 
	`check_íåy_exô_lockög
(
tsdn
);

3103 
	`°©s_¥öt
(
wrôe_cb
, 
cb›aque
, 
›ts
);

3104 
	`check_íåy_exô_lockög
(
tsdn
);

3105 
	`LOG
("core.malloc_stats_print.exit", "");

3106 
	}
}

3108 
JEMALLOC_EXPORT
 
size_t
 
JEMALLOC_NOTHROW


3109 
	$je_mÆloc_ußbÀ_size
(
JEMALLOC_USABLE_SIZE_CONST
 *
±r
) {

3110 
size_t
 
ªt
;

3111 
tsdn_t
 *
tsdn
;

3113 
	`LOG
("c‹e.mÆloc_ußbÀ_size.íåy", "±r: %p", 
±r
);

3115 
	`as£π
(
	`mÆloc_öôülized
(Ë|| 
IS_INITIALIZER
);

3117 
tsdn
 = 
	`tsdn_„tch
();

3118 
	`check_íåy_exô_lockög
(
tsdn
);

3120 i‡(
	`u∆ikñy
(
±r
 =
NULL
)) {

3121 
ªt
 = 0;

3123 i‡(
c⁄fig_debug
 || 
f‹˚_ivßŒoc
) {

3124 
ªt
 = 
	`ivßŒoc
(
tsdn
, 
±r
);

3125 
	`as£π
(
f‹˚_ivßŒoc
 || 
ªt
 != 0);

3127 
ªt
 = 
	`ißŒoc
(
tsdn
, 
±r
);

3131 
	`check_íåy_exô_lockög
(
tsdn
);

3132 
	`LOG
("c‹e.mÆloc_ußbÀ_size.exô", "ªsu…: %zu", 
ªt
);

3133  
ªt
;

3134 
	}
}

3158 #i‚de‡
JEMALLOC_JET


3159 
	$JEMALLOC_ATTR
(
c⁄°ru˘‹
)

3161 
	$jemÆloc_c⁄°ru˘‹
() {

3162 
	`mÆloc_öô
();

3163 
	}
}

3166 #i‚de‡
JEMALLOC_MUTEX_INIT_CB


3168 
	$jemÆloc_¥ef‹k
()

3170 
JEMALLOC_EXPORT
 

3171 
	$_mÆloc_¥ef‹k
()

3174 
tsd_t
 *
tsd
;

3175 
i
, 
j
, 
«ª«s
;

3176 
¨ía_t
 *
¨ía
;

3178 #ifde‡
JEMALLOC_MUTEX_INIT_CB


3179 i‡(!
	`mÆloc_öôülized
()) {

3183 
	`as£π
(
	`mÆloc_öôülized
());

3185 
tsd
 = 
	`tsd_„tch
();

3187 
«ª«s
 = 
	`«ª«s_tŸÆ_gë
();

3189 
	`wô√ss_¥ef‹k
(
	`tsd_wô√ss_tsdp_gë
(
tsd
));

3191 
	`˘l_¥ef‹k
(
	`tsd_tsdn
(
tsd
));

3192 
	`tˇche_¥ef‹k
(
	`tsd_tsdn
(
tsd
));

3193 
	`mÆloc_muãx_¥ef‹k
(
	`tsd_tsdn
(
tsd
), &
¨ías_lock
);

3194 i‡(
have_background_thªad
) {

3195 
	`background_thªad_¥ef‹k0
(
	`tsd_tsdn
(
tsd
));

3197 
	`¥of_¥ef‹k0
(
	`tsd_tsdn
(
tsd
));

3198 i‡(
have_background_thªad
) {

3199 
	`background_thªad_¥ef‹k1
(
	`tsd_tsdn
(
tsd
));

3202 
i
 = 0; i < 8; i++) {

3203 
j
 = 0; j < 
«ª«s
; j++) {

3204 i‡((
¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
j
, 
Ál£
)) !=

3205 
NULL
) {

3206 
i
) {

3208 
	`¨ía_¥ef‹k0
(
	`tsd_tsdn
(
tsd
), 
¨ía
);

3211 
	`¨ía_¥ef‹k1
(
	`tsd_tsdn
(
tsd
), 
¨ía
);

3214 
	`¨ía_¥ef‹k2
(
	`tsd_tsdn
(
tsd
), 
¨ía
);

3217 
	`¨ía_¥ef‹k3
(
	`tsd_tsdn
(
tsd
), 
¨ía
);

3220 
	`¨ía_¥ef‹k4
(
	`tsd_tsdn
(
tsd
), 
¨ía
);

3223 
	`¨ía_¥ef‹k5
(
	`tsd_tsdn
(
tsd
), 
¨ía
);

3226 
	`¨ía_¥ef‹k6
(
	`tsd_tsdn
(
tsd
), 
¨ía
);

3229 
	`¨ía_¥ef‹k7
(
	`tsd_tsdn
(
tsd
), 
¨ía
);

3231 : 
	`nŸ_ªached
();

3236 
	`¥of_¥ef‹k1
(
	`tsd_tsdn
(
tsd
));

3237 
	}
}

3239 #i‚de‡
JEMALLOC_MUTEX_INIT_CB


3241 
	$jemÆloc_po°f‹k_∑ª¡
()

3243 
JEMALLOC_EXPORT
 

3244 
	$_mÆloc_po°f‹k
()

3247 
tsd_t
 *
tsd
;

3248 
i
, 
«ª«s
;

3250 #ifde‡
JEMALLOC_MUTEX_INIT_CB


3251 i‡(!
	`mÆloc_öôülized
()) {

3255 
	`as£π
(
	`mÆloc_öôülized
());

3257 
tsd
 = 
	`tsd_„tch
();

3259 
	`wô√ss_po°f‹k_∑ª¡
(
	`tsd_wô√ss_tsdp_gë
(
tsd
));

3261 
i
 = 0, 
«ª«s
 = 
	`«ª«s_tŸÆ_gë
(); i <Çarenas; i++) {

3262 
¨ía_t
 *
¨ía
;

3264 i‡((
¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
i
, 
Ál£
)Ë!
NULL
) {

3265 
	`¨ía_po°f‹k_∑ª¡
(
	`tsd_tsdn
(
tsd
), 
¨ía
);

3268 
	`¥of_po°f‹k_∑ª¡
(
	`tsd_tsdn
(
tsd
));

3269 i‡(
have_background_thªad
) {

3270 
	`background_thªad_po°f‹k_∑ª¡
(
	`tsd_tsdn
(
tsd
));

3272 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
	`tsd_tsdn
(
tsd
), &
¨ías_lock
);

3273 
	`tˇche_po°f‹k_∑ª¡
(
	`tsd_tsdn
(
tsd
));

3274 
	`˘l_po°f‹k_∑ª¡
(
	`tsd_tsdn
(
tsd
));

3275 
	}
}

3278 
	$jemÆloc_po°f‹k_chûd
() {

3279 
tsd_t
 *
tsd
;

3280 
i
, 
«ª«s
;

3282 
	`as£π
(
	`mÆloc_öôülized
());

3284 
tsd
 = 
	`tsd_„tch
();

3286 
	`wô√ss_po°f‹k_chûd
(
	`tsd_wô√ss_tsdp_gë
(
tsd
));

3288 
i
 = 0, 
«ª«s
 = 
	`«ª«s_tŸÆ_gë
(); i <Çarenas; i++) {

3289 
¨ía_t
 *
¨ía
;

3291 i‡((
¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 
i
, 
Ál£
)Ë!
NULL
) {

3292 
	`¨ía_po°f‹k_chûd
(
	`tsd_tsdn
(
tsd
), 
¨ía
);

3295 
	`¥of_po°f‹k_chûd
(
	`tsd_tsdn
(
tsd
));

3296 i‡(
have_background_thªad
) {

3297 
	`background_thªad_po°f‹k_chûd
(
	`tsd_tsdn
(
tsd
));

3299 
	`mÆloc_muãx_po°f‹k_chûd
(
	`tsd_tsdn
(
tsd
), &
¨ías_lock
);

3300 
	`tˇche_po°f‹k_chûd
(
	`tsd_tsdn
(
tsd
));

3301 
	`˘l_po°f‹k_chûd
(
	`tsd_tsdn
(
tsd
));

3302 
	}
}

	@src/jemalloc_cpp.cpp

1 
	~<muãx
>

2 
	~<√w
>

4 
	#JEMALLOC_CPP_CPP_


	)

5 #ifde‡
__˝lu•lus


9 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

10 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

12 #ifde‡
__˝lu•lus


27 *
›î©‹
 
√w
(
°d
::
size_t
 
size
);

28 *
›î©‹
 
	g√w
[](
	g°d
::
size_t
 
size
);

29 *
›î©‹
 
	$√w
(
°d
::
size_t
 
size
, c⁄° std::
nŸhrow_t
 &Ë
n€x˚±
;

30 *
›î©‹
 
√w
[](
°d
::
size_t
 
size
, c⁄° std::
nŸhrow_t
 &Ë
n€x˚±
;

31 
›î©‹
 
	$dñëe
(*
±r
Ë
n€x˚±
;

32 
›î©‹
 
dñëe
[](*
±r
Ë
n€x˚±
;

33 
›î©‹
 
	$dñëe
(*
±r
, c⁄° 
°d
::
nŸhrow_t
 &Ë
n€x˚±
;

34 
›î©‹
 
dñëe
[](*
±r
, c⁄° 
°d
::
nŸhrow_t
 &Ë
n€x˚±
;

36 #i‡
__˝p_sized_dóŒoˇti⁄
 >= 201309

38 
›î©‹
 
	$dñëe
(*
±r
, 
°d
::
size_t
 
size
Ë
n€x˚±
;

39 
›î©‹
 
dñëe
[](*
±r
, 
°d
::
size_t
 
size
Ë
n€x˚±
;

42 
JEMALLOC_NOINLINE


44 
	$h™dÀOOM
(
°d
::
size_t
 
size
, 
boﬁ
 
nŸhrow
) {

45 *
±r
 = 
nuŒ±r
;

47 
±r
 =
nuŒ±r
) {

48 
°d
::
√w_h™dÀr
 
h™dÀr
;

51 
°d
::
muãx
 
mtx
;

52 
°d
::
lock_gu¨d
<°d::
muãx
> 
	`lock
(
mtx
);

54 
h™dÀr
 = 
°d
::
	`£t_√w_h™dÀr
(
nuŒ±r
);

55 
°d
::
	`£t_√w_h™dÀr
(
h™dÀr
);

57 i‡(
h™dÀr
 =
nuŒ±r
)

60 
åy
 {

61 
	`h™dÀr
();

62 } 
	`ˇtch
 (c⁄° 
°d
::
bad_Æloc
 &) {

66 
±r
 = 
	`je_mÆloc
(
size
);

69 i‡(
±r
 =
nuŒ±r
 && !
nŸhrow
)

70 
°d
::
	`__throw_bad_Æloc
();

71  
±r
;

72 
	}
}

74 
	gãm∂©e
 <
boﬁ
 
	gIsNoEx˚±
>

75 
JEMALLOC_ALWAYS_INLINE


77 
	$√wIm∂
(
°d
::
size_t
 
size
Ë
	$n€x˚±
(
IsNoEx˚±
) {

78 *
±r
 = 
	`je_mÆloc
(
size
);

79 i‡(
	`likñy
(
±r
 !
nuŒ±r
))

80  
±r
;

82  
	`h™dÀOOM
(
size
, 
IsNoEx˚±
);

83 
	}
}

86 
›î©‹
 
	$√w
(
°d
::
size_t
 
size
) {

87  
√wIm∂
<
Ál£
>(
size
);

88 
	}
}

91 
›î©‹
 
	g√w
[](
	g°d
::
size_t
 
size
) {

92  
√wIm∂
<
Ál£
>(
size
);

96 
›î©‹
 
	$√w
(
°d
::
size_t
 
size
, c⁄° std::
nŸhrow_t
 &Ë
n€x˚±
 {

97  
√wIm∂
<
åue
>(
size
);

98 
	}
}

101 
›î©‹
 
	g√w
[](
	g°d
::
size_t
 
size
, c⁄° std::
nŸhrow_t
 &Ë
n€x˚±
 {

102  
√wIm∂
<
åue
>(
size
);

106 
›î©‹
 
	$dñëe
(*
±r
Ë
n€x˚±
 {

107 
	`je_‰ì
(
±r
);

108 
	}
}

111 
›î©‹
 
	gdñëe
[](*
	g±r
Ë
	gn€x˚±
 {

112 
je_‰ì
(
±r
);

116 
›î©‹
 
	$dñëe
(*
±r
, c⁄° 
°d
::
nŸhrow_t
 &Ë
n€x˚±
 {

117 
	`je_‰ì
(
±r
);

118 
	}
}

120 
›î©‹
 
	gdñëe
[](*
	g±r
, c⁄° 
	g°d
::
nŸhrow_t
 &Ë
n€x˚±
 {

121 
je_‰ì
(
±r
);

124 #i‡
__˝p_sized_dóŒoˇti⁄
 >= 201309

127 
›î©‹
 
	$dñëe
(*
±r
, 
°d
::
size_t
 
size
Ë
n€x˚±
 {

128 i‡(
	`u∆ikñy
(
±r
 =
nuŒ±r
)) {

131 
	`je_sdÆlocx
(
±r
, 
size
, 0);

132 
	}
}

134 
›î©‹
 
	gdñëe
[](*
	g±r
, 
	g°d
::
size_t
 
size
Ë
n€x˚±
 {

135 i‡(
u∆ikñy
(
±r
 =
nuŒ±r
)) {

138 
je_sdÆlocx
(
±r
, 
size
, 0);

	@src/large.c

1 
	#JEMALLOC_LARGE_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/exã¡_mm≠.h
"

7 
	~"jemÆloc/öã∫Æ/muãx.h
"

8 
	~"jemÆloc/öã∫Æ/πªe.h
"

9 
	~"jemÆloc/öã∫Æ/utû.h
"

14 
	$œrge_mÆloc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
usize
, 
boﬁ
 
zîo
) {

15 
	`as£π
(
usize
 =
	`sz_s2u
(usize));

17  
	`œrge_∑Œoc
(
tsdn
, 
¨ía
, 
usize
, 
CACHELINE
, 
zîo
);

18 
	}
}

21 
	$œrge_∑Œoc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
usize
, size_à
Æignmít
,

22 
boﬁ
 
zîo
) {

23 
size_t
 
ausize
;

24 
exã¡_t
 *
exã¡
;

25 
boﬁ
 
is_zî€d
;

26 
UNUSED
 
boﬁ
 
idump
 
	`JEMALLOC_CC_SILENCE_INIT
(
Ál£
);

28 
	`as£π
(!
	`tsdn_nuŒ
(
tsdn
Ë|| 
¨ía
 !
NULL
);

30 
ausize
 = 
	`sz_ß2u
(
usize
, 
Æignmít
);

31 i‡(
	`u∆ikñy
(
ausize
 =0 ||áusizê> 
LARGE_MAXCLASS
)) {

32  
NULL
;

35 i‡(
c⁄fig_fûl
 && 
	`u∆ikñy
(
›t_zîo
)) {

36 
zîo
 = 
åue
;

43 
is_zî€d
 = 
zîo
;

44 i‡(
	`likñy
(!
	`tsdn_nuŒ
(
tsdn
))) {

45 
¨ía
 = 
	`¨ía_choo£
(
	`tsdn_tsd
(
tsdn
),árena);

47 i‡(
	`u∆ikñy
(
¨ía
 =
NULL
Ë|| (
exã¡
 = 
	`¨ía_exã¡_Æloc_œrge
(
tsdn
,

48 
¨ía
, 
usize
, 
Æignmít
, &
is_zî€d
)Ë=
NULL
) {

49  
NULL
;

53 i‡(!
	`¨ía_is_auto
(
¨ía
)) {

55 
	`mÆloc_muãx_lock
(
tsdn
, &
¨ía
->
œrge_mtx
);

56 
	`exã¡_li°_≠≥nd
(&
¨ía
->
œrge
, 
exã¡
);

57 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ía
->
œrge_mtx
);

59 i‡(
c⁄fig_¥of
 && 
	`¨ía_¥of_accum
(
tsdn
, 
¨ía
, 
usize
)) {

60 
	`¥of_idump
(
tsdn
);

63 i‡(
zîo
) {

64 
	`as£π
(
is_zî€d
);

65 } i‡(
c⁄fig_fûl
 && 
	`u∆ikñy
(
›t_junk_Æloc
)) {

66 
	`mem£t
(
	`exã¡_addr_gë
(
exã¡
), 
JEMALLOC_ALLOC_JUNK
,

67 
	`exã¡_usize_gë
(
exã¡
));

70 
	`¨ía_deˇy_tick
(
tsdn
, 
¨ía
);

71  
	`exã¡_addr_gë
(
exã¡
);

72 
	}
}

75 
	$œrge_dÆloc_junk_im∂
(*
±r
, 
size_t
 
size
) {

76 
	`mem£t
(
±r
, 
JEMALLOC_FREE_JUNK
, 
size
);

77 
	}
}

78 
œrge_dÆloc_junk_t
 *
JET_MUTABLE
 
	gœrge_dÆloc_junk
 = 
œrge_dÆloc_junk_im∂
;

81 
	$œrge_dÆloc_maybe_junk_im∂
(*
±r
, 
size_t
 
size
) {

82 i‡(
c⁄fig_fûl
 && 
have_dss
 && 
	`u∆ikñy
(
›t_junk_‰ì
)) {

87 i‡(
›t_ªèö
 || (
have_dss
 && 
	`exã¡_ö_dss
(
±r
))) {

88 
	`œrge_dÆloc_junk
(
±r
, 
size
);

91 
	}
}

92 
œrge_dÆloc_maybe_junk_t
 *
JET_MUTABLE
 
	gœrge_dÆloc_maybe_junk
 =

93 
œrge_dÆloc_maybe_junk_im∂
;

95 
boﬁ


96 
	$œrge_øŒoc_no_move_shrök
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
, 
size_t
 
usize
) {

97 
¨ía_t
 *
¨ía
 = 
	`exã¡_¨ía_gë
(
exã¡
);

98 
size_t
 
ﬁdusize
 = 
	`exã¡_usize_gë
(
exã¡
);

99 
exã¡_hooks_t
 *
exã¡_hooks
 = 
	`exã¡_hooks_gë
(
¨ía
);

100 
size_t
 
diff
 = 
	`exã¡_size_gë
(
exã¡
Ë- (
usize
 + 
sz_œrge_∑d
);

102 
	`as£π
(
ﬁdusize
 > 
usize
);

104 i‡(
exã¡_hooks
->
•lô
 =
NULL
) {

105  
åue
;

109 i‡(
diff
 != 0) {

110 
exã¡_t
 *
åaû
 = 
	`exã¡_•lô_wøµî
(
tsdn
, 
¨ía
,

111 &
exã¡_hooks
, 
exã¡
, 
usize
 + 
sz_œrge_∑d
,

112 
	`sz_size2ödex
(
usize
), 
Ál£
, 
diff
, 
NSIZES
, false);

113 i‡(
åaû
 =
NULL
) {

114  
åue
;

117 i‡(
c⁄fig_fûl
 && 
	`u∆ikñy
(
›t_junk_‰ì
)) {

118 
	`œrge_dÆloc_maybe_junk
(
	`exã¡_addr_gë
(
åaû
),

119 
	`exã¡_size_gë
(
åaû
));

122 
	`¨ía_exã¡s_dúty_dÆloc
(
tsdn
, 
¨ía
, &
exã¡_hooks
, 
åaû
);

125 
	`¨ía_exã¡_øŒoc_œrge_shrök
(
tsdn
, 
¨ía
, 
exã¡
, 
ﬁdusize
);

127  
Ál£
;

128 
	}
}

130 
boﬁ


131 
	$œrge_øŒoc_no_move_ex∑nd
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
, 
size_t
 
usize
,

132 
boﬁ
 
zîo
) {

133 
¨ía_t
 *
¨ía
 = 
	`exã¡_¨ía_gë
(
exã¡
);

134 
size_t
 
ﬁdusize
 = 
	`exã¡_usize_gë
(
exã¡
);

135 
exã¡_hooks_t
 *
exã¡_hooks
 = 
	`exã¡_hooks_gë
(
¨ía
);

136 
size_t
 
åaûsize
 = 
usize
 - 
ﬁdusize
;

138 i‡(
exã¡_hooks
->
mîge
 =
NULL
) {

139  
åue
;

142 i‡(
c⁄fig_fûl
 && 
	`u∆ikñy
(
›t_zîo
)) {

143 
zîo
 = 
åue
;

151 
boﬁ
 
is_zî€d_åaû
 = 
zîo
;

152 
boﬁ
 
commô
 = 
åue
;

153 
exã¡_t
 *
åaû
;

154 
boﬁ
 
√w_m≠pög
;

155 i‡((
åaû
 = 
	`exã¡s_Æloc
(
tsdn
, 
¨ía
, &
exã¡_hooks
,

156 &
¨ía
->
exã¡s_dúty
, 
	`exã¡_∑°_gë
(
exã¡
), 
åaûsize
, 0,

157 
CACHELINE
, 
Ál£
, 
NSIZES
, &
is_zî€d_åaû
, &
commô
)Ë!
NULL


158 || (
åaû
 = 
	`exã¡s_Æloc
(
tsdn
, 
¨ía
, &
exã¡_hooks
,

159 &
¨ía
->
exã¡s_muzzy
, 
	`exã¡_∑°_gë
(
exã¡
), 
åaûsize
, 0,

160 
CACHELINE
, 
Ál£
, 
NSIZES
, &
is_zî€d_åaû
, &
commô
)Ë!
NULL
) {

161 i‡(
c⁄fig_°©s
) {

162 
√w_m≠pög
 = 
Ál£
;

165 i‡((
åaû
 = 
	`exã¡_Æloc_wøµî
(
tsdn
, 
¨ía
, &
exã¡_hooks
,

166 
	`exã¡_∑°_gë
(
exã¡
), 
åaûsize
, 0, 
CACHELINE
, 
Ál£
,

167 
NSIZES
, &
is_zî€d_åaû
, &
commô
)Ë=
NULL
) {

168  
åue
;

170 i‡(
c⁄fig_°©s
) {

171 
√w_m≠pög
 = 
åue
;

175 i‡(
	`exã¡_mîge_wøµî
(
tsdn
, 
¨ía
, &
exã¡_hooks
, 
exã¡
, 
åaû
)) {

176 
	`exã¡_dÆloc_wøµî
(
tsdn
, 
¨ía
, &
exã¡_hooks
, 
åaû
);

177  
åue
;

179 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

180 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

181 
szöd_t
 
szöd
 = 
	`sz_size2ödex
(
usize
);

182 
	`exã¡_szöd_£t
(
exã¡
, 
szöd
);

183 
	`πªe_szöd_¶ab_upd©e
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

184 (
uöçå_t
)
	`exã¡_addr_gë
(
exã¡
), 
szöd
, 
Ál£
);

186 i‡(
c⁄fig_°©s
 && 
√w_m≠pög
) {

187 
	`¨ía_°©s_m≠≥d_add
(
tsdn
, &
¨ía
->
°©s
, 
åaûsize
);

190 i‡(
zîo
) {

191 i‡(
c⁄fig_ˇche_oblivious
) {

199 *
zba£
 = (*)

200 ((
uöçå_t
)
	`exã¡_addr_gë
(
exã¡
Ë+ 
ﬁdusize
);

201 *
z∑°
 = 
	`PAGE_ADDR2BASE
((*)((
uöçå_t
)
zba£
 +

202 
PAGE
));

203 
size_t
 
nzîo
 = (
uöçå_t
)
z∑°
 - (uöçå_t)
zba£
;

204 
	`as£π
(
nzîo
 > 0);

205 
	`mem£t
(
zba£
, 0, 
nzîo
);

207 
	`as£π
(
is_zî€d_åaû
);

208 } i‡(
c⁄fig_fûl
 && 
	`u∆ikñy
(
›t_junk_Æloc
)) {

209 
	`mem£t
((*)((
uöçå_t
)
	`exã¡_addr_gë
(
exã¡
Ë+ 
ﬁdusize
),

210 
JEMALLOC_ALLOC_JUNK
, 
usize
 - 
ﬁdusize
);

213 
	`¨ía_exã¡_øŒoc_œrge_ex∑nd
(
tsdn
, 
¨ía
, 
exã¡
, 
ﬁdusize
);

215  
Ál£
;

216 
	}
}

218 
boﬁ


219 
	$œrge_øŒoc_no_move
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
, 
size_t
 
usize_mö
,

220 
size_t
 
usize_max
, 
boﬁ
 
zîo
) {

221 
size_t
 
ﬁdusize
 = 
	`exã¡_usize_gë
(
exã¡
);

224 
	`as£π
(
usize_mö
 > 0 && 
usize_max
 <
LARGE_MAXCLASS
);

226 
	`as£π
(
ﬁdusize
 >
LARGE_MINCLASS
 && 
usize_max
 >= LARGE_MINCLASS);

228 i‡(
usize_max
 > 
ﬁdusize
) {

230 i‡(!
	`œrge_øŒoc_no_move_ex∑nd
(
tsdn
, 
exã¡
, 
usize_max
,

231 
zîo
)) {

232 
	`¨ía_deˇy_tick
(
tsdn
, 
	`exã¡_¨ía_gë
(
exã¡
));

233  
Ál£
;

236 i‡(
usize_mö
 < 
usize_max
 && usize_mö > 
ﬁdusize
 &&

237 
	`œrge_øŒoc_no_move_ex∑nd
(
tsdn
, 
exã¡
, 
usize_mö
,

238 
zîo
)) {

239 
	`¨ía_deˇy_tick
(
tsdn
, 
	`exã¡_¨ía_gë
(
exã¡
));

240  
Ál£
;

248 i‡(
ﬁdusize
 >
usize_mö
 && oldusizê<
usize_max
) {

249 
	`¨ía_deˇy_tick
(
tsdn
, 
	`exã¡_¨ía_gë
(
exã¡
));

250  
Ál£
;

254 i‡(
ﬁdusize
 > 
usize_max
) {

255 i‡(!
	`œrge_øŒoc_no_move_shrök
(
tsdn
, 
exã¡
, 
usize_max
)) {

256 
	`¨ía_deˇy_tick
(
tsdn
, 
	`exã¡_¨ía_gë
(
exã¡
));

257  
Ál£
;

260  
åue
;

261 
	}
}

264 
	$œrge_øŒoc_move_hñ≥r
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
size_t
 
usize
,

265 
size_t
 
Æignmít
, 
boﬁ
 
zîo
) {

266 i‡(
Æignmít
 <
CACHELINE
) {

267  
	`œrge_mÆloc
(
tsdn
, 
¨ía
, 
usize
, 
zîo
);

269  
	`œrge_∑Œoc
(
tsdn
, 
¨ía
, 
usize
, 
Æignmít
, 
zîo
);

270 
	}
}

273 
	$œrge_øŒoc
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
exã¡
, 
size_t
 
usize
,

274 
size_t
 
Æignmít
, 
boﬁ
 
zîo
, 
tˇche_t
 *
tˇche
) {

275 
size_t
 
ﬁdusize
 = 
	`exã¡_usize_gë
(
exã¡
);

278 
	`as£π
(
usize
 > 0 && usizê<
LARGE_MAXCLASS
);

280 
	`as£π
(
ﬁdusize
 >
LARGE_MINCLASS
 && 
usize
 >= LARGE_MINCLASS);

283 i‡(!
	`œrge_øŒoc_no_move
(
tsdn
, 
exã¡
, 
usize
, usize, 
zîo
)) {

284  
	`exã¡_addr_gë
(
exã¡
);

292 *
ªt
 = 
	`œrge_øŒoc_move_hñ≥r
(
tsdn
, 
¨ía
, 
usize
, 
Æignmít
,

293 
zîo
);

294 i‡(
ªt
 =
NULL
) {

295  
NULL
;

298 
size_t
 
c›ysize
 = (
usize
 < 
ﬁdusize
) ? usize : oldusize;

299 
	`mem˝y
(
ªt
, 
	`exã¡_addr_gë
(
exã¡
), 
c›ysize
);

300 
	`isdÆlo˘
(
tsdn
, 
	`exã¡_addr_gë
(
exã¡
), 
ﬁdusize
, 
tˇche
, 
NULL
, 
åue
);

301  
ªt
;

302 
	}
}

309 
	$œrge_dÆloc_¥ï_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
exã¡
,

310 
boﬁ
 
junked_locked
) {

311 i‡(!
junked_locked
) {

313 i‡(!
	`¨ía_is_auto
(
¨ía
)) {

314 
	`mÆloc_muãx_lock
(
tsdn
, &
¨ía
->
œrge_mtx
);

315 
	`exã¡_li°_ªmove
(&
¨ía
->
œrge
, 
exã¡
);

316 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ía
->
œrge_mtx
);

318 
	`œrge_dÆloc_maybe_junk
(
	`exã¡_addr_gë
(
exã¡
),

319 
	`exã¡_usize_gë
(
exã¡
));

321 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, &
¨ía
->
œrge_mtx
);

322 i‡(!
	`¨ía_is_auto
(
¨ía
)) {

323 
	`exã¡_li°_ªmove
(&
¨ía
->
œrge
, 
exã¡
);

326 
	`¨ía_exã¡_dÆloc_œrge_¥ï
(
tsdn
, 
¨ía
, 
exã¡
);

327 
	}
}

330 
	$œrge_dÆloc_föish_im∂
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
exã¡_t
 *
exã¡
) {

331 
exã¡_hooks_t
 *
exã¡_hooks
 = 
EXTENT_HOOKS_INITIALIZER
;

332 
	`¨ía_exã¡s_dúty_dÆloc
(
tsdn
, 
¨ía
, &
exã¡_hooks
, 
exã¡
);

333 
	}
}

336 
	$œrge_dÆloc_¥ï_junked_locked
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
) {

337 
	`œrge_dÆloc_¥ï_im∂
(
tsdn
, 
	`exã¡_¨ía_gë
(
exã¡
),Éxã¡, 
åue
);

338 
	}
}

341 
	$œrge_dÆloc_föish
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
) {

342 
	`œrge_dÆloc_föish_im∂
(
tsdn
, 
	`exã¡_¨ía_gë
(
exã¡
),Éxtent);

343 
	}
}

346 
	$œrge_dÆloc
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
) {

347 
¨ía_t
 *
¨ía
 = 
	`exã¡_¨ía_gë
(
exã¡
);

348 
	`œrge_dÆloc_¥ï_im∂
(
tsdn
, 
¨ía
, 
exã¡
, 
Ál£
);

349 
	`œrge_dÆloc_föish_im∂
(
tsdn
, 
¨ía
, 
exã¡
);

350 
	`¨ía_deˇy_tick
(
tsdn
, 
¨ía
);

351 
	}
}

353 
size_t


354 
	$œrge_ßŒoc
(
tsdn_t
 *
tsdn
, c⁄° 
exã¡_t
 *
exã¡
) {

355  
	`exã¡_usize_gë
(
exã¡
);

356 
	}
}

358 
¥of_t˘x_t
 *

359 
	$œrge_¥of_t˘x_gë
(
tsdn_t
 *
tsdn
, c⁄° 
exã¡_t
 *
exã¡
) {

360  
	`exã¡_¥of_t˘x_gë
(
exã¡
);

361 
	}
}

364 
	$œrge_¥of_t˘x_£t
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
, 
¥of_t˘x_t
 *
t˘x
) {

365 
	`exã¡_¥of_t˘x_£t
(
exã¡
, 
t˘x
);

366 
	}
}

369 
	$œrge_¥of_t˘x_ª£t
(
tsdn_t
 *
tsdn
, 
exã¡_t
 *
exã¡
) {

370 
	`œrge_¥of_t˘x_£t
(
tsdn
, 
exã¡
, (
¥of_t˘x_t
 *)(
uöçå_t
)1U);

371 
	}
}

	@src/log.c

1 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

2 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

4 
	~"jemÆloc/öã∫Æ/log.h
"

6 
	glog_v¨_«mes
[
JEMALLOC_LOG_VAR_BUFSIZE
];

7 
©omic_b_t
 
	glog_öô_d⁄e
 = 
ATOMIC_INIT
(
Ál£
);

14 
	$log_v¨_exåa˘_£gmít
(c⁄° * 
£gmít_begö
) {

15 c⁄° *
íd
;

16 
íd
 = 
£gmít_begö
; *end != '\0' && *end != '|';Énd++) {

18  
íd
;

19 
	}
}

21 
boﬁ


22 
	$log_v¨_m©ches_£gmít
(c⁄° *
£gmít_begö
, c⁄° *
£gmít_íd
,

23 c⁄° *
log_v¨_begö
, c⁄° *
log_v¨_íd
) {

24 
	`as£π
(
£gmít_begö
 <
£gmít_íd
);

25 
	`as£π
(
log_v¨_begö
 < 
log_v¨_íd
);

27 
±rdiff_t
 
£gmít_Àn
 = 
£gmít_íd
 - 
£gmít_begö
;

28 
±rdiff_t
 
log_v¨_Àn
 = 
log_v¨_íd
 - 
log_v¨_begö
;

30 i‡(
£gmít_Àn
 =1 && *
£gmít_begö
 == '.') {

31  
åue
;

33 i‡(
£gmít_Àn
 =
log_v¨_Àn
) {

34  
	`°∫cmp
(
£gmít_begö
, 
log_v¨_begö
, 
£gmít_Àn
) == 0;

35 } i‡(
£gmít_Àn
 < 
log_v¨_Àn
) {

36  
	`°∫cmp
(
£gmít_begö
, 
log_v¨_begö
, 
£gmít_Àn
) == 0

37 && 
log_v¨_begö
[
£gmít_Àn
] == '.';

39  
Ál£
;

41 
	}
}

44 
	$log_v¨_upd©e_°©e
(
log_v¨_t
 *
log_v¨
) {

45 c⁄° *
log_v¨_begö
 = 
log_v¨
->
«me
;

46 c⁄° *
log_v¨_íd
 = 
log_v¨
->
«me
 + 
	`°æí
(log_var->name);

49 c⁄° *
£gmít_begö
 = 
log_v¨_«mes
;

55 i‡(!
	`©omic_lﬂd_b
(&
log_öô_d⁄e
, 
ATOMIC_ACQUIRE
)) {

56  
LOG_INITIALIZED_NOT_ENABLED
;

59 
åue
) {

60 c⁄° *
£gmít_íd
 = 
	`log_v¨_exåa˘_£gmít
(

61 
£gmít_begö
);

62 
	`as£π
(
£gmít_íd
 < 
log_v¨_«mes
 + 
JEMALLOC_LOG_VAR_BUFSIZE
);

63 i‡(
	`log_v¨_m©ches_£gmít
(
£gmít_begö
, 
£gmít_íd
,

64 
log_v¨_begö
, 
log_v¨_íd
)) {

65 
	`©omic_°‹e_u
(&
log_v¨
->
°©e
, 
LOG_ENABLED
,

66 
ATOMIC_RELAXED
);

67  
LOG_ENABLED
;

69 i‡(*
£gmít_íd
 == '\0') {

71 
	`©omic_°‹e_u
(&
log_v¨
->
°©e
,

72 
LOG_INITIALIZED_NOT_ENABLED
, 
ATOMIC_RELAXED
);

73  
LOG_INITIALIZED_NOT_ENABLED
;

76 
£gmít_begö
 = 
£gmít_íd
 + 1;

78 
	}
}

	@src/malloc_io.c

1 
	#JEMALLOC_MALLOC_IO_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/mÆloc_io.h
"

6 
	~"jemÆloc/öã∫Æ/utû.h
"

8 #ifde‡
as£π


9 #unde‡
as£π


11 #ifde‡
nŸ_ªached


12 #unde‡
nŸ_ªached


14 #ifde‡
nŸ_im∂emíãd


15 #unde‡
nŸ_im∂emíãd


17 #ifde‡
as£π_nŸ_im∂emíãd


18 #unde‡
as£π_nŸ_im∂emíãd


25 
	#as£π
(
e
) do { \

26 i‡(
c⁄fig_debug
 && !(
e
)) { \

27 
	`mÆloc_wrôe
("<jemalloc>: Failedássertion\n"); \

28 
	`ab‹t
(); \

30 } 0)

	)

32 
	#nŸ_ªached
() do { \

33 i‡(
c⁄fig_debug
) { \

34 
	`mÆloc_wrôe
("<jemalloc>: Unreachable codeÑeached\n"); \

35 
	`ab‹t
(); \

37 
	`uƒóchabÀ
(); \

38 } 0)

	)

40 
	#nŸ_im∂emíãd
() do { \

41 i‡(
c⁄fig_debug
) { \

42 
	`mÆloc_wrôe
("<jemalloc>: Not implemented\n"); \

43 
	`ab‹t
(); \

45 } 0)

	)

47 
	#as£π_nŸ_im∂emíãd
(
e
) do { \

48 i‡(
	`u∆ikñy
(
c⁄fig_debug
 && !(
e
))) { \

49 
	`nŸ_im∂emíãd
(); \

51 } 0)

	)

56 
wπmesßge
(*
cb›aque
, c⁄° *
s
);

57 
	#U2S_BUFSIZE
 ((1U << (
LG_SIZEOF_INTMAX_T
 + 3)Ë+ 1)

	)

58 *
u2s
(
uötmax_t
 
x
, 
ba£
, 
boﬁ
 
uµîˇ£
, *
s
,

59 
size_t
 *
¶í_p
);

60 
	#D2S_BUFSIZE
 (1 + 
U2S_BUFSIZE
)

	)

61 *
d2s
(
ötmax_t
 
x
, 
sign
, *
s
, 
size_t
 *
¶í_p
);

62 
	#O2S_BUFSIZE
 (1 + 
U2S_BUFSIZE
)

	)

63 *
o2s
(
uötmax_t
 
x
, 
boﬁ
 
Æt_f‹m
, *
s
, 
size_t
 *
¶í_p
);

64 
	#X2S_BUFSIZE
 (2 + 
U2S_BUFSIZE
)

	)

65 *
x2s
(
uötmax_t
 
x
, 
boﬁ
 
Æt_f‹m
, boﬁ 
uµîˇ£
, *
s
,

66 
size_t
 *
¶í_p
);

72 
	$wπmesßge
(*
cb›aque
, c⁄° *
s
) {

73 #i‡
	`deföed
(
JEMALLOC_USE_SYSCALL
Ë&& deföed(
SYS_wrôe
)

83 
UNUSED
 
ªsu…
 = 
	`sysˇŒ
(
SYS_wrôe
, 
STDERR_FILENO
, 
s
, 
	`°æí
(s));

85 
UNUSED
 
ssize_t
 
ªsu…
 = 
	`wrôe
(
STDERR_FILENO
, 
s
, 
	`°æí
(s));

87 
	}
}

89 
JEMALLOC_EXPORT
 (*
je_mÆloc_mesßge
)(*, c⁄° *
s
);

96 
	$mÆloc_wrôe
(c⁄° *
s
) {

97 i‡(
je_mÆloc_mesßge
 !
NULL
) {

98 
	`je_mÆloc_mesßge
(
NULL
, 
s
);

100 
	`wπmesßge
(
NULL
, 
s
);

102 
	}
}

109 
	$bu„º‹
(
îr
, *
buf
, 
size_t
 
buÊí
) {

110 #ifde‡
_WIN32


111 
	`F‹m©MesßgeA
(
FORMAT_MESSAGE_FROM_SYSTEM
, 
NULL
, 
îr
, 0,

112 (
LPSTR
)
buf
, (
DWORD
)
buÊí
, 
NULL
);

114 #ñi‡
	`deföed
(
JEMALLOC_STRERROR_R_RETURNS_CHAR_WITH_GNU_SOURCE
Ë&& deföed(
_GNU_SOURCE
)

115 *
b
 = 
	`°ªº‹_r
(
îr
, 
buf
, 
buÊí
);

116 i‡(
b
 !
buf
) {

117 
	`°∫˝y
(
buf
, 
b
, 
buÊí
);

118 
buf
[
buÊí
-1] = '\0';

122  
	`°ªº‹_r
(
îr
, 
buf
, 
buÊí
);

124 
	}
}

126 
uötmax_t


127 
	$mÆloc_°πoumax
(c⁄° *
ª°ri˘
 
≈å
, **ª°ri˘ 
íd±r
, 
ba£
) {

128 
uötmax_t
 
ªt
, 
digô
;

129 
b
;

130 
boﬁ
 
√g
;

131 c⁄° *
p
, *
ns
;

133 
p
 = 
≈å
;

134 i‡(
ba£
 < 0 || base == 1 || base > 36) {

135 
ns
 = 
p
;

136 
	`£t_î∫o
(
EINVAL
);

137 
ªt
 = 
UINTMAX_MAX
;

138 
œbñ_ªtu∫
;

140 
b
 = 
ba£
;

143 
√g
 = 
Ál£
;

144 
åue
) {

145 *
p
) {

147 
p
++;

150 
√g
 = 
åue
;

153 
p
++;

156 
œbñ_¥efix
;

161 
œbñ_¥efix
:

167 
ns
 = 
p
;

168 i‡(*
p
 == '0') {

169 
p
[1]) {

172 i‡(
b
 == 0) {

173 
b
 = 8;

175 i‡(
b
 == 8) {

176 
p
++;

180 
p
[2]) {

187 i‡(
b
 == 0) {

188 
b
 = 16;

190 i‡(
b
 == 16) {

191 
p
 += 2;

199 
p
++;

200 
ªt
 = 0;

201 
œbñ_ªtu∫
;

204 i‡(
b
 == 0) {

205 
b
 = 10;

209 
ªt
 = 0;

210 (*
p
 >'0' && *∞<'9' && (
digô
 = *∞- '0'Ë< 
b
)

211 || (*
p
 >'A' && *∞<'Z' && (
digô
 = 10 + *∞- 'A'Ë< 
b
)

212 || (*
p
 >'a' && *∞<'z' && (
digô
 = 10 + *∞- 'a'Ë< 
b
)) {

213 
uötmax_t
 
¥ë
 = 
ªt
;

214 
ªt
 *
b
;

215 
ªt
 +
digô
;

216 i‡(
ªt
 < 
¥ë
) {

218 
	`£t_î∫o
(
ERANGE
);

219 
ªt
 = 
UINTMAX_MAX
;

220 
œbñ_ªtu∫
;

222 
p
++;

224 i‡(
√g
) {

225 
ªt
 = (
uötmax_t
)(-((
ötmax_t
)ret));

228 i‡(
p
 =
ns
) {

230 
	`£t_î∫o
(
EINVAL
);

231 
ªt
 = 
UINTMAX_MAX
;

232 
œbñ_ªtu∫
;

235 
œbñ_ªtu∫
:

236 i‡(
íd±r
 !
NULL
) {

237 i‡(
p
 =
ns
) {

239 *
íd±r
 = (*)
≈å
;

241 *
íd±r
 = (*)
p
;

244  
ªt
;

245 
	}
}

248 
	$u2s
(
uötmax_t
 
x
, 
ba£
, 
boﬁ
 
uµîˇ£
, *
s
, 
size_t
 *
¶í_p
) {

249 
i
;

251 
i
 = 
U2S_BUFSIZE
 - 1;

252 
s
[
i
] = '\0';

253 
ba£
) {

256 
i
--;

257 
s
[
i
] = "0123456789"[
x
 % (
uöt64_t
)10];

258 
x
 /(
uöt64_t
)10;

259 } 
x
 > 0);

262 c⁄° *
digôs
 = (
uµîˇ£
)

267 
i
--;

268 
s
[
i
] = 
digôs
[
x
 & 0xf];

269 
x
 >>= 4;

270 } 
x
 > 0);

273 c⁄° *
digôs
 = (
uµîˇ£
)

277 
	`as£π
(
ba£
 >= 2 && base <= 36);

279 
i
--;

280 
s
[
i
] = 
digôs
[
x
 % (
uöt64_t
)
ba£
];

281 
x
 /(
uöt64_t
)
ba£
;

282 } 
x
 > 0);

285 *
¶í_p
 = 
U2S_BUFSIZE
 - 1 - 
i
;

286  &
s
[
i
];

287 
	}
}

290 
	$d2s
(
ötmax_t
 
x
, 
sign
, *
s
, 
size_t
 *
¶í_p
) {

291 
boﬁ
 
√g
;

293 i‡((
√g
 = (
x
 < 0))) {

294 
x
 = -x;

296 
s
 = 
	`u2s
(
x
, 10, 
Ál£
, s, 
¶í_p
);

297 i‡(
√g
) {

298 
sign
 = '-';

300 
sign
) {

302 i‡(!
√g
) {

308 
s
--;

309 (*
¶í_p
)++;

310 *
s
 = 
sign
;

312 : 
	`nŸ_ªached
();

314  
s
;

315 
	}
}

318 
	$o2s
(
uötmax_t
 
x
, 
boﬁ
 
Æt_f‹m
, *
s
, 
size_t
 *
¶í_p
) {

319 
s
 = 
	`u2s
(
x
, 8, 
Ál£
, s, 
¶í_p
);

320 i‡(
Æt_f‹m
 && *
s
 != '0') {

321 
s
--;

322 (*
¶í_p
)++;

323 *
s
 = '0';

325  
s
;

326 
	}
}

329 
	$x2s
(
uötmax_t
 
x
, 
boﬁ
 
Æt_f‹m
, boﬁ 
uµîˇ£
, *
s
, 
size_t
 *
¶í_p
) {

330 
s
 = 
	`u2s
(
x
, 16, 
uµîˇ£
, s, 
¶í_p
);

331 i‡(
Æt_f‹m
) {

332 
s
 -= 2;

333 (*
¶í_p
) += 2;

334 
	`mem˝y
(
s
, 
uµîˇ£
 ? "0X" : "0x", 2);

336  
s
;

337 
	}
}

339 
size_t


340 
	$mÆloc_v¢¥ötf
(*
°r
, 
size_t
 
size
, c⁄° *
f‹m©
, 
va_li°
 
≠
) {

341 
size_t
 
i
;

342 c⁄° *
f
;

344 
	#APPEND_C
(
c
) do { \

345 i‡(
i
 < 
size
) { \

346 
°r
[
i
] = (
c
); \

348 
i
++; \

349 } 0)

	)

350 
	#APPEND_S
(
s
, 
¶í
) do { \

351 i‡(
i
 < 
size
) { \

352 
size_t
 
˝yÀn
 = (
¶í
 <
size
 - 
i
) ? slen : size - i; \

353 
	`mem˝y
(&
°r
[
i
], 
s
, 
˝yÀn
); \

355 
i
 +
¶í
; \

356 } 0)

	)

357 
	#APPEND_PADDED_S
(
s
, 
¶í
, 
width
, 
À·_ju°ify
) do { \

359 
size_t
 
∑d_Àn
 = (
width
 =-1Ë? 0 : ((
¶í
 < (size_t)width) ? \

360 (
size_t
)
width
 - 
¶í
 : 0); \

361 i‡(!
À·_ju°ify
 && 
∑d_Àn
 != 0) { \

362 
size_t
 
j
; \

363 
j
 = 0; j < 
∑d_Àn
; j++) { \

364 
	`APPEND_C
(' '); \

368 
	`APPEND_S
(
s
, 
¶í
); \

370 i‡(
À·_ju°ify
 && 
∑d_Àn
 != 0) { \

371 
size_t
 
j
; \

372 
j
 = 0; j < 
∑d_Àn
; j++) { \

373 
	`APPEND_C
(' '); \

376 } 0)

	)

377 
	#GET_ARG_NUMERIC
(
vÆ
, 
Àn
) do { \

378 
Àn
) { \

380 
vÆ
 = 
	`va_¨g
(
≠
, ); \

383 
vÆ
 = 
	`va_¨g
(
≠
, ); \

386 
vÆ
 = 
	`va_¨g
(
≠
, ); \

389 
vÆ
 = 
	`va_¨g
(
≠
, ); \

392 
vÆ
 = 
	`va_¨g
(
≠
, ); \

395 
vÆ
 = 
	`va_¨g
(
≠
, ); \

398 
vÆ
 = 
	`va_¨g
(
≠
, 
ötmax_t
); \

401 
vÆ
 = 
	`va_¨g
(
≠
, 
uötmax_t
); \

404 
vÆ
 = 
	`va_¨g
(
≠
, 
±rdiff_t
); \

407 
vÆ
 = 
	`va_¨g
(
≠
, 
ssize_t
); \

410 
vÆ
 = 
	`va_¨g
(
≠
, 
size_t
); \

413 
vÆ
 = 
	`va_¨g
(
≠
, 
uöçå_t
); \

416 
	`nŸ_ªached
(); \

417 
vÆ
 = 0; \

419 } 0)

	)

421 
i
 = 0;

422 
f
 = 
f‹m©
;

423 
åue
) {

424 *
f
) {

425 '\0': 
œbñ_out
;

427 
boﬁ
 
Æt_f‹m
 = 
Ál£
;

428 
boﬁ
 
À·_ju°ify
 = 
Ál£
;

429 
boﬁ
 
∂us_•a˚
 = 
Ál£
;

430 
boﬁ
 
∂us_∂us
 = 
Ál£
;

431 
¥ec
 = -1;

432 
width
 = -1;

433 
Àn
 = '?';

434 *
s
;

435 
size_t
 
¶í
;

437 
f
++;

439 
åue
) {

440 *
f
) {

442 
	`as£π
(!
Æt_f‹m
);

443 
Æt_f‹m
 = 
åue
;

446 
	`as£π
(!
À·_ju°ify
);

447 
À·_ju°ify
 = 
åue
;

450 
	`as£π
(!
∂us_•a˚
);

451 
∂us_•a˚
 = 
åue
;

454 
	`as£π
(!
∂us_∂us
);

455 
∂us_∂us
 = 
åue
;

457 : 
œbñ_width
;

459 
f
++;

462 
œbñ_width
:

463 *
f
) {

465 
width
 = 
	`va_¨g
(
≠
, );

466 
f
++;

467 i‡(
width
 < 0) {

468 
À·_ju°ify
 = 
åue
;

469 
width
 = -width;

474 
uötmax_t
 
uwidth
;

475 
	`£t_î∫o
(0);

476 
uwidth
 = 
	`mÆloc_°πoumax
(
f
, (**)&f, 10);

477 
	`as£π
(
uwidth
 !
UINTMAX_MAX
 || 
	`gë_î∫o
() !=

478 
ERANGE
);

479 
width
 = ()
uwidth
;

485 i‡(*
f
 == '.') {

486 
f
++;

488 
œbñ_Àngth
;

491 *
f
) {

493 
¥ec
 = 
	`va_¨g
(
≠
, );

494 
f
++;

498 
uötmax_t
 
u¥ec
;

499 
	`£t_î∫o
(0);

500 
u¥ec
 = 
	`mÆloc_°πoumax
(
f
, (**)&f, 10);

501 
	`as£π
(
u¥ec
 !
UINTMAX_MAX
 || 
	`gë_î∫o
() !=

502 
ERANGE
);

503 
¥ec
 = ()
u¥ec
;

509 
œbñ_Àngth
:

510 *
f
) {

512 
f
++;

513 i‡(*
f
 == 'l') {

514 
Àn
 = 'q';

515 
f
++;

517 
Àn
 = 'l';

521 
Àn
 = *
f
;

522 
f
++;

527 *
f
) {

530 
	`APPEND_C
(*
f
);

531 
f
++;

534 
ötmax_t
 
vÆ
 
	`JEMALLOC_CC_SILENCE_INIT
(0);

535 
buf
[
D2S_BUFSIZE
];

537 
	`GET_ARG_NUMERIC
(
vÆ
, 
Àn
);

538 
s
 = 
	`d2s
(
vÆ
, (
∂us_∂us
 ? '+' : (
∂us_•a˚
 ?

539 ' ' : '-')), 
buf
, &
¶í
);

540 
	`APPEND_PADDED_S
(
s
, 
¶í
, 
width
, 
À·_ju°ify
);

541 
f
++;

544 
uötmax_t
 
vÆ
 
	`JEMALLOC_CC_SILENCE_INIT
(0);

545 
buf
[
O2S_BUFSIZE
];

547 
	`GET_ARG_NUMERIC
(
vÆ
, 
Àn
 | 0x80);

548 
s
 = 
	`o2s
(
vÆ
, 
Æt_f‹m
, 
buf
, &
¶í
);

549 
	`APPEND_PADDED_S
(
s
, 
¶í
, 
width
, 
À·_ju°ify
);

550 
f
++;

553 
uötmax_t
 
vÆ
 
	`JEMALLOC_CC_SILENCE_INIT
(0);

554 
buf
[
U2S_BUFSIZE
];

556 
	`GET_ARG_NUMERIC
(
vÆ
, 
Àn
 | 0x80);

557 
s
 = 
	`u2s
(
vÆ
, 10, 
Ál£
, 
buf
, &
¶í
);

558 
	`APPEND_PADDED_S
(
s
, 
¶í
, 
width
, 
À·_ju°ify
);

559 
f
++;

562 
uötmax_t
 
vÆ
 
	`JEMALLOC_CC_SILENCE_INIT
(0);

563 
buf
[
X2S_BUFSIZE
];

565 
	`GET_ARG_NUMERIC
(
vÆ
, 
Àn
 | 0x80);

566 
s
 = 
	`x2s
(
vÆ
, 
Æt_f‹m
, *
f
 ='X', 
buf
, &
¶í
);

567 
	`APPEND_PADDED_S
(
s
, 
¶í
, 
width
, 
À·_ju°ify
);

568 
f
++;

571 
vÆ
;

572 
buf
[2];

574 
	`as£π
(
Àn
 == '?' ||Üen == 'l');

575 
	`as£π_nŸ_im∂emíãd
(
Àn
 != 'l');

576 
vÆ
 = 
	`va_¨g
(
≠
, );

577 
buf
[0] = 
vÆ
;

578 
buf
[1] = '\0';

579 
	`APPEND_PADDED_S
(
buf
, 1, 
width
, 
À·_ju°ify
);

580 
f
++;

583 
	`as£π
(
Àn
 == '?' ||Üen == 'l');

584 
	`as£π_nŸ_im∂emíãd
(
Àn
 != 'l');

585 
s
 = 
	`va_¨g
(
≠
, *);

586 
¶í
 = (
¥ec
 < 0Ë? 
	`°æí
(
s
Ë: (
size_t
)prec;

587 
	`APPEND_PADDED_S
(
s
, 
¶í
, 
width
, 
À·_ju°ify
);

588 
f
++;

591 
uötmax_t
 
vÆ
;

592 
buf
[
X2S_BUFSIZE
];

594 
	`GET_ARG_NUMERIC
(
vÆ
, 'p');

595 
s
 = 
	`x2s
(
vÆ
, 
åue
, 
Ál£
, 
buf
, &
¶í
);

596 
	`APPEND_PADDED_S
(
s
, 
¶í
, 
width
, 
À·_ju°ify
);

597 
f
++;

599 } : 
	`nŸ_ªached
();

603 
	`APPEND_C
(*
f
);

604 
f
++;

608 
œbñ_out
:

609 i‡(
i
 < 
size
) {

610 
°r
[
i
] = '\0';

612 
°r
[
size
 - 1] = '\0';

615 #unde‡
APPEND_C


616 #unde‡
APPEND_S


617 #unde‡
APPEND_PADDED_S


618 #unde‡
GET_ARG_NUMERIC


619  
i
;

620 
	}
}

622 
	$JEMALLOC_FORMAT_PRINTF
(3, 4)

623 
size_t


624 
	$mÆloc_¢¥ötf
(*
°r
, 
size_t
 
size
, c⁄° *
f‹m©
, ...) {

625 
size_t
 
ªt
;

626 
va_li°
 
≠
;

628 
	`va_°¨t
(
≠
, 
f‹m©
);

629 
ªt
 = 
	`mÆloc_v¢¥ötf
(
°r
, 
size
, 
f‹m©
, 
≠
);

630 
	`va_íd
(
≠
);

632  
ªt
;

633 
	}
}

636 
	$mÆloc_v˝rötf
((*
wrôe_cb
)(*, c⁄° *), *
cb›aque
,

637 c⁄° *
f‹m©
, 
va_li°
 
≠
) {

638 
buf
[
MALLOC_PRINTF_BUFSIZE
];

640 i‡(
wrôe_cb
 =
NULL
) {

646 
wrôe_cb
 = (
je_mÆloc_mesßge
 !
NULL
) ? je_malloc_message :

647 
wπmesßge
;

648 
cb›aque
 = 
NULL
;

651 
	`mÆloc_v¢¥ötf
(
buf
, (buf), 
f‹m©
, 
≠
);

652 
	`wrôe_cb
(
cb›aque
, 
buf
);

653 
	}
}

659 
	$JEMALLOC_FORMAT_PRINTF
(3, 4)

661 
	$mÆloc_˝rötf
((*
wrôe_cb
)(*, c⁄° *), *
cb›aque
,

662 c⁄° *
f‹m©
, ...) {

663 
va_li°
 
≠
;

665 
	`va_°¨t
(
≠
, 
f‹m©
);

666 
	`mÆloc_v˝rötf
(
wrôe_cb
, 
cb›aque
, 
f‹m©
, 
≠
);

667 
	`va_íd
(
≠
);

668 
	}
}

671 
	$JEMALLOC_FORMAT_PRINTF
(1, 2)

673 
	$mÆloc_¥ötf
(c⁄° *
f‹m©
, ...) {

674 
va_li°
 
≠
;

676 
	`va_°¨t
(
≠
, 
f‹m©
);

677 
	`mÆloc_v˝rötf
(
NULL
, NULL, 
f‹m©
, 
≠
);

678 
	`va_íd
(
≠
);

679 
	}
}

685 #unde‡
as£π


686 #unde‡
nŸ_ªached


687 #unde‡
nŸ_im∂emíãd


688 #unde‡
as£π_nŸ_im∂emíãd


689 
	~"jemÆloc/öã∫Æ/as£π.h
"

	@src/mutex.c

1 
	#JEMALLOC_MUTEX_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/mÆloc_io.h
"

7 
	~"jemÆloc/öã∫Æ/•ö.h
"

9 #i‚de‡
_CRT_SPINCOUNT


10 
	#_CRT_SPINCOUNT
 4000

	)

16 #ifde‡
JEMALLOC_LAZY_LOCK


17 
boﬁ
 
	gi°hªaded
 = 
Ál£
;

19 #ifde‡
JEMALLOC_MUTEX_INIT_CB


20 
boﬁ
 
	gpo°p⁄e_öô
 = 
åue
;

21 
mÆloc_muãx_t
 *
	gpo°p⁄ed_muãxes
 = 
NULL
;

30 #i‡
deföed
(
JEMALLOC_LAZY_LOCK
Ë&& !deföed(
_WIN32
)

31 
JEMALLOC_EXPORT
 

32 
	$±hªad_¸óã
(
±hªad_t
 *
__ª°ri˘
 
thªad
,

33 c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
©å
, *(*
°¨t_routöe
)(*),

34 *
__ª°ri˘
 
¨g
) {

35  
	`±hªad_¸óã_wøµî
(
thªad
, 
©å
, 
°¨t_routöe
, 
¨g
);

36 
	}
}

41 #ifde‡
JEMALLOC_MUTEX_INIT_CB


42 
JEMALLOC_EXPORT
 
_±hªad_muãx_öô_ˇŒoc_cb
(
±hªad_muãx_t
 *
muãx
,

43 *(
ˇŒoc_cb
)(
size_t
, size_t));

47 
	$mÆloc_muãx_lock_¶ow
(
mÆloc_muãx_t
 *
muãx
) {

48 
muãx_¥of_d©a_t
 *
d©a
 = &
muãx
->
¥of_d©a
;

49 
UNUSED
 
n°ime_t
 
bef‹e
 = 
NSTIME_ZERO_INITIALIZER
;

51 i‡(
n˝us
 == 1) {

52 
œbñ_•ö_d⁄e
;

55 
˙t
 = 0, 
max_˙t
 = 
MALLOC_MUTEX_MAX_SPIN
;

57 
	`•ö_˝u_•öwaô
();

58 i‡(!
	`mÆloc_muãx_åylock_föÆ
(
muãx
)) {

59 
d©a
->
n_•ö_acquúed
++;

62 } 
˙t
++ < 
max_˙t
);

64 i‡(!
c⁄fig_°©s
) {

66 
	`mÆloc_muãx_lock_föÆ
(
muãx
);

69 
œbñ_•ö_d⁄e
:

70 
	`n°ime_upd©e
(&
bef‹e
);

72 
n°ime_t
 
a·î
;

73 
	`n°ime_c›y
(&
a·î
, &
bef‹e
);

74 
uöt32_t
 
n_thds
 = 
	`©omic_„tch_add_u32
(&
d©a
->
n_waôög_thds
, 1,

75 
ATOMIC_RELAXED
) + 1;

77 i‡(!
	`mÆloc_muãx_åylock_föÆ
(
muãx
)) {

78 
	`©omic_„tch_sub_u32
(&
d©a
->
n_waôög_thds
, 1, 
ATOMIC_RELAXED
);

79 
d©a
->
n_•ö_acquúed
++;

84 
	`mÆloc_muãx_lock_föÆ
(
muãx
);

86 
	`©omic_„tch_sub_u32
(&
d©a
->
n_waôög_thds
, 1, 
ATOMIC_RELAXED
);

87 
	`n°ime_upd©e
(&
a·î
);

89 
n°ime_t
 
dñè
;

90 
	`n°ime_c›y
(&
dñè
, &
a·î
);

91 
	`n°ime_subåa˘
(&
dñè
, &
bef‹e
);

93 
d©a
->
n_waô_times
++;

94 
	`n°ime_add
(&
d©a
->
tŸ_waô_time
, &
dñè
);

95 i‡(
	`n°ime_com∑ª
(&
d©a
->
max_waô_time
, &
dñè
) < 0) {

96 
	`n°ime_c›y
(&
d©a
->
max_waô_time
, &
dñè
);

98 i‡(
n_thds
 > 
d©a
->
max_n_thds
) {

99 
d©a
->
max_n_thds
 = 
n_thds
;

101 
	}
}

104 
	$muãx_¥of_d©a_öô
(
muãx_¥of_d©a_t
 *
d©a
) {

105 
	`mem£t
(
d©a
, 0, (
muãx_¥of_d©a_t
));

106 
	`n°ime_öô
(&
d©a
->
max_waô_time
, 0);

107 
	`n°ime_öô
(&
d©a
->
tŸ_waô_time
, 0);

108 
d©a
->
¥ev_ow√r
 = 
NULL
;

109 
	}
}

112 
	$mÆloc_muãx_¥of_d©a_ª£t
(
tsdn_t
 *
tsdn
, 
mÆloc_muãx_t
 *
muãx
) {

113 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, 
muãx
);

114 
	`muãx_¥of_d©a_öô
(&
muãx
->
¥of_d©a
);

115 
	}
}

118 
	$muãx_addr_comp
(c⁄° 
wô√ss_t
 *
wô√ss1
, *
muãx1
,

119 c⁄° 
wô√ss_t
 *
wô√ss2
, *
muãx2
) {

120 
	`as£π
(
muãx1
 !
NULL
);

121 
	`as£π
(
muãx2
 !
NULL
);

122 
uöçå_t
 
mu1öt
 = (uöçå_t)
muãx1
;

123 
uöçå_t
 
mu2öt
 = (uöçå_t)
muãx2
;

124 i‡(
mu1öt
 < 
mu2öt
) {

126 } i‡(
mu1öt
 =
mu2öt
) {

131 
	}
}

133 
boﬁ


134 
	$mÆloc_muãx_öô
(
mÆloc_muãx_t
 *
muãx
, c⁄° *
«me
,

135 
wô√ss_ønk_t
 
ønk
, 
mÆloc_muãx_lock_‹dî_t
 
lock_‹dî
) {

136 
	`muãx_¥of_d©a_öô
(&
muãx
->
¥of_d©a
);

137 #ifde‡
_WIN32


138 #i‡
_WIN32_WINNT
 >= 0x0600

139 
	`InôülizeSRWLock
(&
muãx
->
lock
);

141 i‡(!
	`InôülizeCrôiˇlSe˘i⁄AndSpöCou¡
(&
muãx
->
lock
,

142 
_CRT_SPINCOUNT
)) {

143  
åue
;

146 #ñi‡(
	`deföed
(
JEMALLOC_OS_UNFAIR_LOCK
))

147 
muãx
->
lock
 = 
OS_UNFAIR_LOCK_INIT
;

148 #ñi‡(
	`deföed
(
JEMALLOC_OSSPIN
))

149 
muãx
->
lock
 = 0;

150 #ñi‡(
	`deföed
(
JEMALLOC_MUTEX_INIT_CB
))

151 i‡(
po°p⁄e_öô
) {

152 
muãx
->
po°p⁄ed_√xt
 = 
po°p⁄ed_muãxes
;

153 
po°p⁄ed_muãxes
 = 
muãx
;

155 i‡(
	`_±hªad_muãx_öô_ˇŒoc_cb
(&
muãx
->
lock
,

156 
boŸ°øp_ˇŒoc
) != 0) {

157  
åue
;

161 
±hªad_muãx©å_t
 
©å
;

163 i‡(
	`±hªad_muãx©å_öô
(&
©å
) != 0) {

164  
åue
;

166 
	`±hªad_muãx©å_£ây≥
(&
©å
, 
MALLOC_MUTEX_TYPE
);

167 i‡(
	`±hªad_muãx_öô
(&
muãx
->
lock
, &
©å
) != 0) {

168 
	`±hªad_muãx©å_de°roy
(&
©å
);

169  
åue
;

171 
	`±hªad_muãx©å_de°roy
(&
©å
);

173 i‡(
c⁄fig_debug
) {

174 
muãx
->
lock_‹dî
 =Üock_order;

175 i‡(
lock_‹dî
 =
mÆloc_muãx_addªss_‹dîed
) {

176 
	`wô√ss_öô
(&
muãx
->
wô√ss
, 
«me
, 
ønk
,

177 
muãx_addr_comp
, &
muãx
);

179 
	`wô√ss_öô
(&
muãx
->
wô√ss
, 
«me
, 
ønk
, 
NULL
, NULL);

182  
Ál£
;

183 
	}
}

186 
	$mÆloc_muãx_¥ef‹k
(
tsdn_t
 *
tsdn
, 
mÆloc_muãx_t
 *
muãx
) {

187 
	`mÆloc_muãx_lock
(
tsdn
, 
muãx
);

188 
	}
}

191 
	$mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
, 
mÆloc_muãx_t
 *
muãx
) {

192 
	`mÆloc_muãx_u∆ock
(
tsdn
, 
muãx
);

193 
	}
}

196 
	$mÆloc_muãx_po°f‹k_chûd
(
tsdn_t
 *
tsdn
, 
mÆloc_muãx_t
 *
muãx
) {

197 #ifde‡
JEMALLOC_MUTEX_INIT_CB


198 
	`mÆloc_muãx_u∆ock
(
tsdn
, 
muãx
);

200 i‡(
	`mÆloc_muãx_öô
(
muãx
, muãx->
wô√ss
.
«me
,

201 
muãx
->
wô√ss
.
ønk
, muãx->
lock_‹dî
)) {

202 
	`mÆloc_¥ötf
("<jemalloc>: ErrorÑe-initializing mutex in "

204 i‡(
›t_ab‹t
) {

205 
	`ab‹t
();

209 
	}
}

211 
boﬁ


212 
	$mÆloc_muãx_boŸ
() {

213 #ifde‡
JEMALLOC_MUTEX_INIT_CB


214 
po°p⁄e_öô
 = 
Ál£
;

215 
po°p⁄ed_muãxes
 !
NULL
) {

216 i‡(
	`_±hªad_muãx_öô_ˇŒoc_cb
(&
po°p⁄ed_muãxes
->
lock
,

217 
boŸ°øp_ˇŒoc
) != 0) {

218  
åue
;

220 
po°p⁄ed_muãxes
 =Öo°p⁄ed_muãxes->
po°p⁄ed_√xt
;

223  
Ál£
;

224 
	}
}

	@src/mutex_pool.c

1 
	#JEMALLOC_MUTEX_POOL_C_


	)

3 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

4 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

6 
	~"jemÆloc/öã∫Æ/muãx.h
"

7 
	~"jemÆloc/öã∫Æ/muãx_poﬁ.h
"

9 
boﬁ


10 
	$muãx_poﬁ_öô
(
muãx_poﬁ_t
 *
poﬁ
, c⁄° *
«me
, 
wô√ss_ønk_t
 
ønk
) {

11 
i
 = 0; i < 
MUTEX_POOL_SIZE
; ++i) {

12 i‡(
	`mÆloc_muãx_öô
(&
poﬁ
->
muãxes
[
i
], 
«me
, 
ønk
,

13 
mÆloc_muãx_addªss_‹dîed
)) {

14  
åue
;

17  
Ál£
;

18 
	}
}

	@src/nstime.c

1 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

2 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

4 
	~"jemÆloc/öã∫Æ/n°ime.h
"

6 
	~"jemÆloc/öã∫Æ/as£π.h
"

8 
	#BILLION
 
	`UINT64_C
(1000000000)

	)

9 
	#MILLION
 
	`UINT64_C
(1000000)

	)

12 
	$n°ime_öô
(
n°ime_t
 *
time
, 
uöt64_t
 
ns
) {

13 
time
->
ns
 =Çs;

14 
	}
}

17 
	$n°ime_öô2
(
n°ime_t
 *
time
, 
uöt64_t
 
£c
, uöt64_à
n£c
) {

18 
time
->
ns
 = 
£c
 * 
BILLION
 + 
n£c
;

19 
	}
}

21 
uöt64_t


22 
	$n°ime_ns
(c⁄° 
n°ime_t
 *
time
) {

23  
time
->
ns
;

24 
	}
}

26 
uöt64_t


27 
	$n°ime_m£c
(c⁄° 
n°ime_t
 *
time
) {

28  
time
->
ns
 / 
MILLION
;

29 
	}
}

31 
uöt64_t


32 
	$n°ime_£c
(c⁄° 
n°ime_t
 *
time
) {

33  
time
->
ns
 / 
BILLION
;

34 
	}
}

36 
uöt64_t


37 
	$n°ime_n£c
(c⁄° 
n°ime_t
 *
time
) {

38  
time
->
ns
 % 
BILLION
;

39 
	}
}

42 
	$n°ime_c›y
(
n°ime_t
 *
time
, c⁄°Ç°ime_à*
sour˚
) {

43 *
time
 = *
sour˚
;

44 
	}
}

47 
	$n°ime_com∑ª
(c⁄° 
n°ime_t
 *
a
, c⁄°Ç°ime_à*
b
) {

48  (
a
->
ns
 > 
b
->ns) - (a->ns < b->ns);

49 
	}
}

52 
	$n°ime_add
(
n°ime_t
 *
time
, c⁄°Ç°ime_à*
addíd
) {

53 
	`as£π
(
UINT64_MAX
 - 
time
->
ns
 >
addíd
->ns);

55 
time
->
ns
 +
addíd
->ns;

56 
	}
}

59 
	$n°ime_üdd
(
n°ime_t
 *
time
, 
uöt64_t
 
addíd
) {

60 
	`as£π
(
UINT64_MAX
 - 
time
->
ns
 >
addíd
);

62 
time
->
ns
 +
addíd
;

63 
	}
}

66 
	$n°ime_subåa˘
(
n°ime_t
 *
time
, c⁄°Ç°ime_à*
subåahíd
) {

67 
	`as£π
(
	`n°ime_com∑ª
(
time
, 
subåahíd
) >= 0);

69 
time
->
ns
 -
subåahíd
->ns;

70 
	}
}

73 
	$n°ime_isubåa˘
(
n°ime_t
 *
time
, 
uöt64_t
 
subåahíd
) {

74 
	`as£π
(
time
->
ns
 >
subåahíd
);

76 
time
->
ns
 -
subåahíd
;

77 
	}
}

80 
	$n°ime_imu…ùly
(
n°ime_t
 *
time
, 
uöt64_t
 
mu…ùlõr
) {

81 
	`as£π
((((
time
->
ns
 | 
mu…ùlõr
Ë& (
UINT64_MAX
 << ((
uöt64_t
) <<

82 2))Ë=0Ë|| ((
time
->
ns
 * 
mu…ùlõr
) / multiplier ==Åime->ns));

84 
time
->
ns
 *
mu…ùlõr
;

85 
	}
}

88 
	$n°ime_idivide
(
n°ime_t
 *
time
, 
uöt64_t
 
divis‹
) {

89 
	`as£π
(
divis‹
 != 0);

91 
time
->
ns
 /
divis‹
;

92 
	}
}

94 
uöt64_t


95 
	$n°ime_divide
(c⁄° 
n°ime_t
 *
time
, c⁄°Ç°ime_à*
divis‹
) {

96 
	`as£π
(
divis‹
->
ns
 != 0);

98  
time
->
ns
 / 
divis‹
->ns;

99 
	}
}

101 #ifde‡
_WIN32


102 
	#NSTIME_MONOTONIC
 
åue


	)

104 
	$n°ime_gë
(
n°ime_t
 *
time
) {

105 
FILETIME
 
·
;

106 
uöt64_t
 
ticks_100ns
;

108 
	`GëSy°emTimeAsFûeTime
(&
·
);

109 
ticks_100ns
 = (((
uöt64_t
)
·
.
dwHighD©eTime
Ë<< 32Ë| ft.
dwLowD©eTime
;

111 
	`n°ime_öô
(
time
, 
ticks_100ns
 * 100);

112 
	}
}

113 #ñi‡
deföed
(
JEMALLOC_HAVE_CLOCK_MONOTONIC_COARSE
)

114 
	#NSTIME_MONOTONIC
 
åue


	)

116 
	$n°ime_gë
(
n°ime_t
 *
time
) {

117 
time•ec
 
ts
;

119 
	`˛ock_gëtime
(
CLOCK_MONOTONIC_COARSE
, &
ts
);

120 
	`n°ime_öô2
(
time
, 
ts
.
tv_£c
,Ås.
tv_n£c
);

121 
	}
}

122 #ñi‡
deföed
(
JEMALLOC_HAVE_CLOCK_MONOTONIC
)

123 
	#NSTIME_MONOTONIC
 
åue


	)

125 
	$n°ime_gë
(
n°ime_t
 *
time
) {

126 
time•ec
 
ts
;

128 
	`˛ock_gëtime
(
CLOCK_MONOTONIC
, &
ts
);

129 
	`n°ime_öô2
(
time
, 
ts
.
tv_£c
,Ås.
tv_n£c
);

130 
	}
}

131 #ñi‡
deföed
(
JEMALLOC_HAVE_MACH_ABSOLUTE_TIME
)

132 
	#NSTIME_MONOTONIC
 
åue


	)

134 
	$n°ime_gë
(
n°ime_t
 *
time
) {

135 
	`n°ime_öô
(
time
, 
	`mach_absﬁuã_time
());

136 
	}
}

138 
	#NSTIME_MONOTONIC
 
Ál£


	)

140 
	$n°ime_gë
(
n°ime_t
 *
time
) {

141 
timevÆ
 
tv
;

143 
	`gëtimeofday
(&
tv
, 
NULL
);

144 
	`n°ime_öô2
(
time
, 
tv
.
tv_£c
,Åv.
tv_u£c
 * 1000);

145 
	}
}

148 
boﬁ


149 
	$n°ime_m⁄Ÿ⁄ic_im∂
() {

150  
NSTIME_MONOTONIC
;

151 #unde‡
NSTIME_MONOTONIC


152 
	}
}

153 
n°ime_m⁄Ÿ⁄ic_t
 *
JET_MUTABLE
 
	gn°ime_m⁄Ÿ⁄ic
 = 
n°ime_m⁄Ÿ⁄ic_im∂
;

155 
boﬁ


156 
	$n°ime_upd©e_im∂
(
n°ime_t
 *
time
) {

157 
n°ime_t
 
ﬁd_time
;

159 
	`n°ime_c›y
(&
ﬁd_time
, 
time
);

160 
	`n°ime_gë
(
time
);

163 i‡(
	`u∆ikñy
(
	`n°ime_com∑ª
(&
ﬁd_time
, 
time
) > 0)) {

164 
	`n°ime_c›y
(
time
, &
ﬁd_time
);

165  
åue
;

168  
Ál£
;

169 
	}
}

170 
n°ime_upd©e_t
 *
JET_MUTABLE
 
	gn°ime_upd©e
 = 
n°ime_upd©e_im∂
;

	@src/pages.c

1 
	#JEMALLOC_PAGES_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

4 
	~"jemÆloc/öã∫Æ/∑ges.h
"

6 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

8 
	~"jemÆloc/öã∫Æ/as£π.h
"

9 
	~"jemÆloc/öã∫Æ/mÆloc_io.h
"

11 #ifde‡
JEMALLOC_SYSCTL_VM_OVERCOMMIT


12 
	~<sys/sys˘l.h
>

13 #ifde‡
__FªeBSD__


14 
	~<vm/vm_∑øm.h
>

22 
size_t
 
	gos_∑ge
;

24 #i‚de‡
_WIN32


25 
	#PAGES_PROT_COMMIT
 (
PROT_READ
 | 
PROT_WRITE
)

	)

26 
	#PAGES_PROT_DECOMMIT
 (
PROT_NONE
)

	)

27 
	gmm≠_Êags
;

29 
boﬁ
 
	gos_ovîcommôs
;

31 
boﬁ
 
	gthp_°©e_madvi£
;

34 
boﬁ
 
	g∑ges_ˇn_purge_œzy_ru¡ime
 = 
åue
;

42 
os_∑ges_unm≠
(*
addr
, 
size_t
 
size
);

47 
	$os_∑ges_m≠
(*
addr
, 
size_t
 
size
, size_à
Æignmít
, 
boﬁ
 *
commô
) {

48 
	`as£π
(
	`ALIGNMENT_ADDR2BASE
(
addr
, 
os_∑ge
) ==áddr);

49 
	`as£π
(
	`ALIGNMENT_CEILING
(
size
, 
os_∑ge
) == size);

50 
	`as£π
(
size
 != 0);

52 i‡(
os_ovîcommôs
) {

53 *
commô
 = 
åue
;

56 *
ªt
;

57 #ifde‡
_WIN32


62 
ªt
 = 
	`VútuÆAŒoc
(
addr
, 
size
, 
MEM_RESERVE
 | (*
commô
 ? 
MEM_COMMIT
 : 0),

63 
PAGE_READWRITE
);

70 
¥Ÿ
 = *
commô
 ? 
PAGES_PROT_COMMIT
 : 
PAGES_PROT_DECOMMIT
;

72 
ªt
 = 
	`mm≠
(
addr
, 
size
, 
¥Ÿ
, 
mm≠_Êags
, -1, 0);

74 
	`as£π
(
ªt
 !
NULL
);

76 i‡(
ªt
 =
MAP_FAILED
) {

77 
ªt
 = 
NULL
;

78 } i‡(
addr
 !
NULL
 && 
ªt
 !=áddr) {

82 
	`os_∑ges_unm≠
(
ªt
, 
size
);

83 
ªt
 = 
NULL
;

86 
	`as£π
(
ªt
 =
NULL
 || (
addr
 == NULL &&Ñet !=áddr) || (addr != NULL &&

87 
ªt
 =
addr
));

88  
ªt
;

89 
	}
}

92 
	$os_∑ges_åim
(*
addr
, 
size_t
 
Æloc_size
, size_à
Àadsize
, size_à
size
,

93 
boﬁ
 *
commô
) {

94 *
ªt
 = (*)((
uöçå_t
)
addr
 + 
Àadsize
);

96 
	`as£π
(
Æloc_size
 >
Àadsize
 + 
size
);

97 #ifde‡
_WIN32


98 
	`os_∑ges_unm≠
(
addr
, 
Æloc_size
);

99 *
√w_addr
 = 
	`os_∑ges_m≠
(
ªt
, 
size
, 
PAGE
, 
commô
);

100 i‡(
√w_addr
 =
ªt
) {

101  
ªt
;

103 i‡(
√w_addr
 !
NULL
) {

104 
	`os_∑ges_unm≠
(
√w_addr
, 
size
);

106  
NULL
;

108 
size_t
 
åaûsize
 = 
Æloc_size
 - 
Àadsize
 - 
size
;

110 i‡(
Àadsize
 != 0) {

111 
	`os_∑ges_unm≠
(
addr
, 
Àadsize
);

113 i‡(
åaûsize
 != 0) {

114 
	`os_∑ges_unm≠
((*)((
uöçå_t
)
ªt
 + 
size
), 
åaûsize
);

116  
ªt
;

118 
	}
}

121 
	$os_∑ges_unm≠
(*
addr
, 
size_t
 
size
) {

122 
	`as£π
(
	`ALIGNMENT_ADDR2BASE
(
addr
, 
os_∑ge
) ==áddr);

123 
	`as£π
(
	`ALIGNMENT_CEILING
(
size
, 
os_∑ge
) == size);

125 #ifde‡
_WIN32


126 i‡(
	`VútuÆFªe
(
addr
, 0, 
MEM_RELEASE
) == 0)

128 i‡(
	`munm≠
(
addr
, 
size
) == -1)

131 
buf
[
BUFERROR_BUF
];

133 
	`bu„º‹
(
	`gë_î∫o
(), 
buf
, (buf));

134 
	`mÆloc_¥ötf
("<jemalloc>: Error in "

135 #ifde‡
_WIN32


140 "(): %s\n", 
buf
);

141 i‡(
›t_ab‹t
) {

142 
	`ab‹t
();

145 
	}
}

148 
	$∑ges_m≠_¶ow
(
size_t
 
size
, size_à
Æignmít
, 
boﬁ
 *
commô
) {

149 
size_t
 
Æloc_size
 = 
size
 + 
Æignmít
 - 
os_∑ge
;

151 i‡(
Æloc_size
 < 
size
) {

152  
NULL
;

155 *
ªt
;

157 *
∑ges
 = 
	`os_∑ges_m≠
(
NULL
, 
Æloc_size
, 
Æignmít
, 
commô
);

158 i‡(
∑ges
 =
NULL
) {

159  
NULL
;

161 
size_t
 
Àadsize
 = 
	`ALIGNMENT_CEILING
((
uöçå_t
)
∑ges
, 
Æignmít
)

162 - (
uöçå_t
)
∑ges
;

163 
ªt
 = 
	`os_∑ges_åim
(
∑ges
, 
Æloc_size
, 
Àadsize
, 
size
, 
commô
);

164 } 
ªt
 =
NULL
);

166 
	`as£π
(
ªt
 !
NULL
);

167 
	`as£π
(
	`PAGE_ADDR2BASE
(
ªt
) ==Ñet);

168  
ªt
;

169 
	}
}

172 
	$∑ges_m≠
(*
addr
, 
size_t
 
size
, size_à
Æignmít
, 
boﬁ
 *
commô
) {

173 
	`as£π
(
Æignmít
 >
PAGE
);

174 
	`as£π
(
	`ALIGNMENT_ADDR2BASE
(
addr
, 
Æignmít
) ==áddr);

190 *
ªt
 = 
	`os_∑ges_m≠
(
addr
, 
size
, 
os_∑ge
, 
commô
);

191 i‡(
ªt
 =
NULL
 ||Ñë =
addr
) {

192  
ªt
;

194 
	`as£π
(
addr
 =
NULL
);

195 i‡(
	`ALIGNMENT_ADDR2OFFSET
(
ªt
, 
Æignmít
) != 0) {

196 
	`os_∑ges_unm≠
(
ªt
, 
size
);

197  
	`∑ges_m≠_¶ow
(
size
, 
Æignmít
, 
commô
);

200 
	`as£π
(
	`PAGE_ADDR2BASE
(
ªt
) ==Ñet);

201  
ªt
;

202 
	}
}

205 
	$∑ges_unm≠
(*
addr
, 
size_t
 
size
) {

206 
	`as£π
(
	`PAGE_ADDR2BASE
(
addr
) ==áddr);

207 
	`as£π
(
	`PAGE_CEILING
(
size
) == size);

209 
	`os_∑ges_unm≠
(
addr
, 
size
);

210 
	}
}

212 
boﬁ


213 
	$∑ges_commô_im∂
(*
addr
, 
size_t
 
size
, 
boﬁ
 
commô
) {

214 
	`as£π
(
	`PAGE_ADDR2BASE
(
addr
) ==áddr);

215 
	`as£π
(
	`PAGE_CEILING
(
size
) == size);

217 i‡(
os_ovîcommôs
) {

218  
åue
;

221 #ifde‡
_WIN32


222  (
commô
 ? (
addr
 !
	`VútuÆAŒoc
◊ddr, 
size
, 
MEM_COMMIT
,

223 
PAGE_READWRITE
)Ë: (!
	`VútuÆFªe
(
addr
, 
size
, 
MEM_DECOMMIT
)));

226 
¥Ÿ
 = 
commô
 ? 
PAGES_PROT_COMMIT
 : 
PAGES_PROT_DECOMMIT
;

227 *
ªsu…
 = 
	`mm≠
(
addr
, 
size
, 
¥Ÿ
, 
mm≠_Êags
 | 
MAP_FIXED
,

229 i‡(
ªsu…
 =
MAP_FAILED
) {

230  
åue
;

232 i‡(
ªsu…
 !
addr
) {

237 
	`os_∑ges_unm≠
(
ªsu…
, 
size
);

238  
åue
;

240  
Ál£
;

243 
	}
}

245 
boﬁ


246 
	$∑ges_commô
(*
addr
, 
size_t
 
size
) {

247  
	`∑ges_commô_im∂
(
addr
, 
size
, 
åue
);

248 
	}
}

250 
boﬁ


251 
	$∑ges_decommô
(*
addr
, 
size_t
 
size
) {

252  
	`∑ges_commô_im∂
(
addr
, 
size
, 
Ál£
);

253 
	}
}

255 
boﬁ


256 
	$∑ges_purge_œzy
(*
addr
, 
size_t
 
size
) {

257 
	`as£π
(
	`PAGE_ADDR2BASE
(
addr
) ==áddr);

258 
	`as£π
(
	`PAGE_CEILING
(
size
) == size);

260 i‡(!
∑ges_ˇn_purge_œzy
) {

261  
åue
;

263 i‡(!
∑ges_ˇn_purge_œzy_ru¡ime
) {

268  
åue
;

271 #ifde‡
_WIN32


272 
	`VútuÆAŒoc
(
addr
, 
size
, 
MEM_RESET
, 
PAGE_READWRITE
);

273  
Ál£
;

274 #ñi‡
	`deföed
(
JEMALLOC_PURGE_MADVISE_FREE
)

275  (
	`madvi£
(
addr
, 
size
,

276 #ifde‡
MADV_FREE


277 
MADV_FREE


279 
JEMALLOC_MADV_FREE


282 #ñi‡
	`deföed
(
JEMALLOC_PURGE_MADVISE_DONTNEED
) && \

283 !
	`deföed
(
JEMALLOC_PURGE_MADVISE_DONTNEED_ZEROS
)

284  (
	`madvi£
(
addr
, 
size
, 
MADV_DONTNEED
) != 0);

286 
	`nŸ_ªached
();

288 
	}
}

290 
boﬁ


291 
	$∑ges_purge_f‹˚d
(*
addr
, 
size_t
 
size
) {

292 
	`as£π
(
	`PAGE_ADDR2BASE
(
addr
) ==áddr);

293 
	`as£π
(
	`PAGE_CEILING
(
size
) == size);

295 i‡(!
∑ges_ˇn_purge_f‹˚d
) {

296  
åue
;

299 #i‡
	`deföed
(
JEMALLOC_PURGE_MADVISE_DONTNEED
) && \

300 
	`deföed
(
JEMALLOC_PURGE_MADVISE_DONTNEED_ZEROS
)

301  (
	`madvi£
(
addr
, 
size
, 
MADV_DONTNEED
) != 0);

302 #ñi‡
	`deföed
(
JEMALLOC_MAPS_COALESCE
)

304  
	`∑ges_commô
(
addr
, 
size
);

306 
	`nŸ_ªached
();

308 
	}
}

310 
boﬁ


311 
	$∑ges_huge
(*
addr
, 
size_t
 
size
) {

312 
	`as£π
(
	`HUGEPAGE_ADDR2BASE
(
addr
) ==áddr);

313 
	`as£π
(
	`HUGEPAGE_CEILING
(
size
) == size);

315 #ifde‡
JEMALLOC_HAVE_MADVISE_HUGE


316  (
	`madvi£
(
addr
, 
size
, 
MADV_HUGEPAGE
) != 0);

318  
åue
;

320 
	}
}

322 
boﬁ


323 
	$∑ges_nohuge
(*
addr
, 
size_t
 
size
) {

324 
	`as£π
(
	`HUGEPAGE_ADDR2BASE
(
addr
) ==áddr);

325 
	`as£π
(
	`HUGEPAGE_CEILING
(
size
) == size);

327 #ifde‡
JEMALLOC_HAVE_MADVISE_HUGE


328  (
	`madvi£
(
addr
, 
size
, 
MADV_NOHUGEPAGE
) != 0);

330  
Ál£
;

332 
	}
}

334 
boﬁ


335 
	$∑ges_d⁄tdump
(*
addr
, 
size_t
 
size
) {

336 
	`as£π
(
	`PAGE_ADDR2BASE
(
addr
) ==áddr);

337 
	`as£π
(
	`PAGE_CEILING
(
size
) == size);

338 #ifde‡
JEMALLOC_MADVISE_DONTDUMP


339  
	`madvi£
(
addr
, 
size
, 
MADV_DONTDUMP
) != 0;

341  
Ál£
;

343 
	}
}

345 
boﬁ


346 
	$∑ges_dodump
(*
addr
, 
size_t
 
size
) {

347 
	`as£π
(
	`PAGE_ADDR2BASE
(
addr
) ==áddr);

348 
	`as£π
(
	`PAGE_CEILING
(
size
) == size);

349 #ifde‡
JEMALLOC_MADVISE_DONTDUMP


350  
	`madvi£
(
addr
, 
size
, 
MADV_DODUMP
) != 0;

352  
Ál£
;

354 
	}
}

357 
size_t


358 
	$os_∑ge_dëe˘
() {

359 #ifde‡
_WIN32


360 
SYSTEM_INFO
 
si
;

361 
	`GëSy°emInfo
(&
si
);

362  
si
.
dwPageSize
;

363 #ñi‡
	`deföed
(
__FªeBSD__
)

364  
	`gë∑gesize
();

366 
ªsu…
 = 
	`sysc⁄f
(
_SC_PAGESIZE
);

367 i‡(
ªsu…
 == -1) {

368  
LG_PAGE
;

370  (
size_t
)
ªsu…
;

372 
	}
}

374 #ifde‡
JEMALLOC_SYSCTL_VM_OVERCOMMIT


375 
boﬁ


376 
	$os_ovîcommôs_sys˘l
() {

377 
vm_ovîcommô
;

378 
size_t
 
sz
;

380 
sz
 = (
vm_ovîcommô
);

381 #i‡
	`deföed
(
__FªeBSD__
Ë&& deföed(
VM_OVERCOMMIT
)

382 
mib
[2];

384 
mib
[0] = 
CTL_VM
;

385 
mib
[1] = 
VM_OVERCOMMIT
;

386 i‡(
	`sys˘l
(
mib
, 2, &
vm_ovîcommô
, &
sz
, 
NULL
, 0) != 0) {

387  
Ál£
;

390 i‡(
	`sys˘lby«me
("vm.ovîcommô", &
vm_ovîcommô
, &
sz
, 
NULL
, 0) != 0) {

391  
Ál£
;

395  ((
vm_ovîcommô
 & 0x3) == 0);

396 
	}
}

399 #ifde‡
JEMALLOC_PROC_SYS_VM_OVERCOMMIT_MEMORY


405 
boﬁ


406 
	$os_ovîcommôs_¥oc
() {

407 
fd
;

408 
buf
[1];

409 
ssize_t
 
ƒód
;

411 #i‡
	`deföed
(
JEMALLOC_USE_SYSCALL
Ë&& deföed(
SYS_›í
)

412 #i‡
	`deföed
(
O_CLOEXEC
)

413 
fd
 = ()
	`sysˇŒ
(
SYS_›í
, "/¥oc/sys/vm/ovîcommô_mem‹y", 
O_RDONLY
 |

414 
O_CLOEXEC
);

416 
fd
 = ()
	`sysˇŒ
(
SYS_›í
, "/¥oc/sys/vm/ovîcommô_mem‹y", 
O_RDONLY
);

417 i‡(
fd
 != -1) {

418 
	`f˙é
(
fd
, 
F_SETFD
, f˙é(fd, 
F_GETFD
Ë| 
FD_CLOEXEC
);

421 #ñi‡
	`deföed
(
JEMALLOC_USE_SYSCALL
Ë&& deföed(
SYS_›í©
)

422 #i‡
	`deföed
(
O_CLOEXEC
)

423 
fd
 = ()
	`sysˇŒ
(
SYS_›í©
,

424 
AT_FDCWD
, "/¥oc/sys/vm/ovîcommô_mem‹y", 
O_RDONLY
 | 
O_CLOEXEC
);

426 
fd
 = ()
	`sysˇŒ
(
SYS_›í©
,

427 
AT_FDCWD
, "/¥oc/sys/vm/ovîcommô_mem‹y", 
O_RDONLY
);

428 i‡(
fd
 != -1) {

429 
	`f˙é
(
fd
, 
F_SETFD
, f˙é(fd, 
F_GETFD
Ë| 
FD_CLOEXEC
);

433 #i‡
	`deföed
(
O_CLOEXEC
)

434 
fd
 = 
	`›í
("/¥oc/sys/vm/ovîcommô_mem‹y", 
O_RDONLY
 | 
O_CLOEXEC
);

436 
fd
 = 
	`›í
("/¥oc/sys/vm/ovîcommô_mem‹y", 
O_RDONLY
);

437 i‡(
fd
 != -1) {

438 
	`f˙é
(
fd
, 
F_SETFD
, f˙é(fd, 
F_GETFD
Ë| 
FD_CLOEXEC
);

443 i‡(
fd
 == -1) {

444  
Ál£
;

447 #i‡
	`deföed
(
JEMALLOC_USE_SYSCALL
Ë&& deföed(
SYS_ªad
)

448 
ƒód
 = (
ssize_t
)
	`sysˇŒ
(
SYS_ªad
, 
fd
, &
buf
, (buf));

450 
ƒód
 = 
	`ªad
(
fd
, &
buf
, (buf));

453 #i‡
	`deföed
(
JEMALLOC_USE_SYSCALL
Ë&& deföed(
SYS_˛o£
)

454 
	`sysˇŒ
(
SYS_˛o£
, 
fd
);

456 
	`˛o£
(
fd
);

459 i‡(
ƒód
 < 1) {

460  
Ál£
;

468  (
buf
[0] == '0' || buf[0] == '1');

469 
	}
}

473 
	$öô_thp_°©e
() {

474 i‡(!
have_madvi£_huge
) {

475 i‡(
	`mëad©a_thp_íabÀd
(Ë&& 
›t_ab‹t
) {

476 
	`mÆloc_wrôe
("<jemalloc>:Ço MADV_HUGEPAGE support\n");

477 
	`ab‹t
();

479 
œbñ_îr‹
;

482 c⁄° 
madvi£_°©e
[] = "always [madvise]Çever\n";

483 
buf
[(
madvi£_°©e
)];

485 #i‡
	`deföed
(
JEMALLOC_USE_SYSCALL
Ë&& deföed(
SYS_›í
)

486 
fd
 = ()
	`sysˇŒ
(
SYS_›í
,

487 "/sys/kî√l/mm/å™•¨ít_hugïage/íabÀd", 
O_RDONLY
);

489 
fd
 = 
	`›í
("/sys/kî√l/mm/å™•¨ít_hugïage/íabÀd", 
O_RDONLY
);

491 i‡(
fd
 == -1) {

492 
œbñ_îr‹
;

495 #i‡
	`deföed
(
JEMALLOC_USE_SYSCALL
Ë&& deföed(
SYS_ªad
)

496 
ssize_t
 
ƒód
 = (ssize_t)
	`sysˇŒ
(
SYS_ªad
, 
fd
, &
buf
, (buf));

498 
ssize_t
 
ƒód
 = 
	`ªad
(
fd
, &
buf
, (buf));

501 #i‡
	`deföed
(
JEMALLOC_USE_SYSCALL
Ë&& deföed(
SYS_˛o£
)

502 
	`sysˇŒ
(
SYS_˛o£
, 
fd
);

504 
	`˛o£
(
fd
);

507 i‡(
ƒód
 < 1) {

508 
œbñ_îr‹
;

510 i‡(
	`°∫cmp
(
buf
, 
madvi£_°©e
, (
size_t
)
ƒód
) == 0) {

511 
thp_°©e_madvi£
 = 
åue
;

514 
œbñ_îr‹
:

515 
thp_°©e_madvi£
 = 
Ál£
;

516 
	}
}

518 
boﬁ


519 
	$∑ges_boŸ
() {

520 
os_∑ge
 = 
	`os_∑ge_dëe˘
();

521 i‡(
os_∑ge
 > 
PAGE
) {

522 
	`mÆloc_wrôe
("<jemalloc>: Unsupported systemÖage size\n");

523 i‡(
›t_ab‹t
) {

524 
	`ab‹t
();

526  
åue
;

529 #i‚de‡
_WIN32


530 
mm≠_Êags
 = 
MAP_PRIVATE
 | 
MAP_ANON
;

533 #ifde‡
JEMALLOC_SYSCTL_VM_OVERCOMMIT


534 
os_ovîcommôs
 = 
	`os_ovîcommôs_sys˘l
();

535 #ñi‡
	`deföed
(
JEMALLOC_PROC_SYS_VM_OVERCOMMIT_MEMORY
)

536 
os_ovîcommôs
 = 
	`os_ovîcommôs_¥oc
();

537 #ifde‡
MAP_NORESERVE


538 i‡(
os_ovîcommôs
) {

539 
mm≠_Êags
 |
MAP_NORESERVE
;

543 
os_ovîcommôs
 = 
Ál£
;

546 
	`öô_thp_°©e
();

549 i‡(
∑ges_ˇn_purge_œzy
) {

550 
boﬁ
 
commôãd
 = 
Ál£
;

551 *
madv_‰ì_∑ge
 = 
	`os_∑ges_m≠
(
NULL
, 
PAGE
, PAGE, &
commôãd
);

552 i‡(
madv_‰ì_∑ge
 =
NULL
) {

553  
åue
;

555 
	`as£π
(
∑ges_ˇn_purge_œzy_ru¡ime
);

556 i‡(
	`∑ges_purge_œzy
(
madv_‰ì_∑ge
, 
PAGE
)) {

557 
∑ges_ˇn_purge_œzy_ru¡ime
 = 
Ál£
;

559 
	`os_∑ges_unm≠
(
madv_‰ì_∑ge
, 
PAGE
);

562  
Ál£
;

563 
	}
}

	@src/prng.c

1 
	#JEMALLOC_PRNG_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

	@src/prof.c

1 
	#JEMALLOC_PROF_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/ckh.h
"

7 
	~"jemÆloc/öã∫Æ/hash.h
"

8 
	~"jemÆloc/öã∫Æ/mÆloc_io.h
"

9 
	~"jemÆloc/öã∫Æ/muãx.h
"

13 #ifde‡
JEMALLOC_PROF_LIBUNWIND


14 
	#UNW_LOCAL_ONLY


	)

15 
	~<libunwöd.h
>

18 #ifde‡
JEMALLOC_PROF_LIBGCC


24 #unde‡
_Unwöd_Backåa˚


25 
	~<unwöd.h
>

26 
	#_Unwöd_Backåa˚
 
	`JEMALLOC_HOOK
(
_Unwöd_Backåa˚
, 
hooks_libc_hook
)

	)

32 
boﬁ
 
	g›t_¥of
 = 
Ál£
;

33 
boﬁ
 
	g›t_¥of_a˘ive
 = 
åue
;

34 
boﬁ
 
	g›t_¥of_thªad_a˘ive_öô
 = 
åue
;

35 
size_t
 
	g›t_lg_¥of_ßm∂e
 = 
LG_PROF_SAMPLE_DEFAULT
;

36 
ssize_t
 
	g›t_lg_¥of_öãrvÆ
 = 
LG_PROF_INTERVAL_DEFAULT
;

37 
boﬁ
 
	g›t_¥of_gdump
 = 
Ál£
;

38 
boﬁ
 
	g›t_¥of_föÆ
 = 
Ál£
;

39 
boﬁ
 
	g›t_¥of_Àak
 = 
Ál£
;

40 
boﬁ
 
	g›t_¥of_accum
 = 
Ál£
;

41 
	g›t_¥of_¥efix
[

43 #ifde‡
JEMALLOC_PROF


44 
PATH_MAX
 +

52 
boﬁ
 
	g¥of_a˘ive
;

53 
mÆloc_muãx_t
 
	g¥of_a˘ive_mtx
;

59 
boﬁ
 
	g¥of_thªad_a˘ive_öô
;

60 
mÆloc_muãx_t
 
	g¥of_thªad_a˘ive_öô_mtx
;

66 
boﬁ
 
	g¥of_gdump_vÆ
;

67 
mÆloc_muãx_t
 
	g¥of_gdump_mtx
;

69 
uöt64_t
 
	g¥of_öãrvÆ
 = 0;

71 
size_t
 
	glg_¥of_ßm∂e
;

80 
mÆloc_muãx_t
 *
	gg˘x_locks
;

81 
©omic_u_t
 
	gcum_g˘xs
;

89 
mÆloc_muãx_t
 *
	gtd©a_locks
;

95 
ckh_t
 
	gbt2g˘x
;

97 
mÆloc_muãx_t
 
	gbt2g˘x_mtx
;

103 
¥of_td©a_åì_t
 
	gtd©as
;

104 
mÆloc_muãx_t
 
	gtd©as_mtx
;

106 
uöt64_t
 
	g√xt_thr_uid
;

107 
mÆloc_muãx_t
 
	g√xt_thr_uid_mtx
;

109 
mÆloc_muãx_t
 
	g¥of_dump_£q_mtx
;

110 
uöt64_t
 
	g¥of_dump_£q
;

111 
uöt64_t
 
	g¥of_dump_i£q
;

112 
uöt64_t
 
	g¥of_dump_m£q
;

113 
uöt64_t
 
	g¥of_dump_u£q
;

119 
mÆloc_muãx_t
 
	g¥of_dump_mtx
;

120 
	g¥of_dump_buf
[

122 #ifde‡
JEMALLOC_PROF


123 
PROF_DUMP_BUFSIZE


128 
size_t
 
	g¥of_dump_buf_íd
;

129 
	g¥of_dump_fd
;

132 
boﬁ
 
	g¥of_boŸed
 = 
Ál£
;

140 
boﬁ
 
¥of_t˘x_should_de°roy
(
tsdn_t
 *
tsdn
, 
¥of_t˘x_t
 *
t˘x
);

141 
¥of_t˘x_de°roy
(
tsd_t
 *
tsd
, 
¥of_t˘x_t
 *
t˘x
);

142 
boﬁ
 
¥of_td©a_should_de°roy
(
tsdn_t
 *
tsdn
, 
¥of_td©a_t
 *
td©a
,

143 
boﬁ
 
eví_if_©èched
);

144 
¥of_td©a_de°roy
(
tsd_t
 *
tsd
, 
¥of_td©a_t
 *
td©a
,

145 
boﬁ
 
eví_if_©èched
);

146 *
¥of_thªad_«me_Æloc
(
tsdn_t
 *
tsdn
, c⁄° *
thªad_«me
);

152 
	$¥of_t˘x_comp
(c⁄° 
¥of_t˘x_t
 *
a
, c⁄°Örof_t˘x_à*
b
) {

153 
uöt64_t
 
a_thr_uid
 = 
a
->
thr_uid
;

154 
uöt64_t
 
b_thr_uid
 = 
b
->
thr_uid
;

155 
ªt
 = (
a_thr_uid
 > 
b_thr_uid
) - (a_thr_uid < b_thr_uid);

156 i‡(
ªt
 == 0) {

157 
uöt64_t
 
a_thr_dis¸im
 = 
a
->
thr_dis¸im
;

158 
uöt64_t
 
b_thr_dis¸im
 = 
b
->
thr_dis¸im
;

159 
ªt
 = (
a_thr_dis¸im
 > 
b_thr_dis¸im
) - (a_thr_discrim <

160 
b_thr_dis¸im
);

161 i‡(
ªt
 == 0) {

162 
uöt64_t
 
a_t˘x_uid
 = 
a
->
t˘x_uid
;

163 
uöt64_t
 
b_t˘x_uid
 = 
b
->
t˘x_uid
;

164 
ªt
 = (
a_t˘x_uid
 > 
b_t˘x_uid
) - (a_tctx_uid <

165 
b_t˘x_uid
);

168  
ªt
;

169 
	}
}

171 
	$rb_gí
(
UNUSED
, 
t˘x_åì_
, 
¥of_t˘x_åì_t
, 
¥of_t˘x_t
,

172 
t˘x_lök
, 
¥of_t˘x_comp
)

175 
	$¥of_g˘x_comp
(c⁄° 
¥of_g˘x_t
 *
a
, c⁄°Örof_g˘x_à*
b
) {

176 
a_Àn
 = 
a
->
bt
.
Àn
;

177 
b_Àn
 = 
b
->
bt
.
Àn
;

178 
comp_Àn
 = (
a_Àn
 < 
b_Àn
) ?á_len : b_len;

179 
ªt
 = 
	`memcmp
(
a
->
bt
.
vec
, 
b
->bt.vec, 
comp_Àn
 * (*));

180 i‡(
ªt
 == 0) {

181 
ªt
 = (
a_Àn
 > 
b_Àn
) - (a_len < b_len);

183  
ªt
;

184 
	}
}

186 
	$rb_gí
(
UNUSED
, 
g˘x_åì_
, 
¥of_g˘x_åì_t
, 
¥of_g˘x_t
, 
dump_lök
,

187 
¥of_g˘x_comp
)

190 
	$¥of_td©a_comp
(c⁄° 
¥of_td©a_t
 *
a
, c⁄°Örof_td©a_à*
b
) {

191 
ªt
;

192 
uöt64_t
 
a_uid
 = 
a
->
thr_uid
;

193 
uöt64_t
 
b_uid
 = 
b
->
thr_uid
;

195 
ªt
 = ((
a_uid
 > 
b_uid
) - (a_uid < b_uid));

196 i‡(
ªt
 == 0) {

197 
uöt64_t
 
a_dis¸im
 = 
a
->
thr_dis¸im
;

198 
uöt64_t
 
b_dis¸im
 = 
b
->
thr_dis¸im
;

200 
ªt
 = ((
a_dis¸im
 > 
b_dis¸im
) - (a_discrim < b_discrim));

202  
ªt
;

203 
	}
}

205 
	$rb_gí
(
UNUSED
, 
td©a_åì_
, 
¥of_td©a_åì_t
, 
¥of_td©a_t
, 
td©a_lök
,

206 
¥of_td©a_comp
)

211 
	$¥of_Æloc_rﬁlback
(
tsd_t
 *
tsd
, 
¥of_t˘x_t
 *
t˘x
, 
boﬁ
 
upd©ed
) {

212 
¥of_td©a_t
 *
td©a
;

214 
	`ˇs£π
(
c⁄fig_¥of
);

216 i‡(
upd©ed
) {

223 
td©a
 = 
	`¥of_td©a_gë
(
tsd
, 
åue
);

224 i‡(
td©a
 !
NULL
) {

225 
	`¥of_ßm∂e_thªshﬁd_upd©e
(
td©a
);

229 i‡((
uöçå_t
)
t˘x
 > (uintptr_t)1U) {

230 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), 
t˘x
->
td©a
->
lock
);

231 
t˘x
->
¥ï¨ed
 = 
Ál£
;

232 i‡(
	`¥of_t˘x_should_de°roy
(
	`tsd_tsdn
(
tsd
), 
t˘x
)) {

233 
	`¥of_t˘x_de°roy
(
tsd
, 
t˘x
);

235 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), 
t˘x
->
td©a
->
lock
);

238 
	}
}

241 
	$¥of_mÆloc_ßm∂e_obje˘
(
tsdn_t
 *
tsdn
, c⁄° *
±r
, 
size_t
 
usize
,

242 
¥of_t˘x_t
 *
t˘x
) {

243 
	`¥of_t˘x_£t
(
tsdn
, 
±r
, 
usize
, 
NULL
, 
t˘x
);

245 
	`mÆloc_muãx_lock
(
tsdn
, 
t˘x
->
td©a
->
lock
);

246 
t˘x
->
˙ts
.
curobjs
++;

247 
t˘x
->
˙ts
.
curbyãs
 +
usize
;

248 i‡(
›t_¥of_accum
) {

249 
t˘x
->
˙ts
.
accumobjs
++;

250 
t˘x
->
˙ts
.
accumbyãs
 +
usize
;

252 
t˘x
->
¥ï¨ed
 = 
Ál£
;

253 
	`mÆloc_muãx_u∆ock
(
tsdn
, 
t˘x
->
td©a
->
lock
);

254 
	}
}

257 
	$¥of_‰ì_ßm∂ed_obje˘
(
tsd_t
 *
tsd
, 
size_t
 
usize
, 
¥of_t˘x_t
 *
t˘x
) {

258 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), 
t˘x
->
td©a
->
lock
);

259 
	`as£π
(
t˘x
->
˙ts
.
curobjs
 > 0);

260 
	`as£π
(
t˘x
->
˙ts
.
curbyãs
 >
usize
);

261 
t˘x
->
˙ts
.
curobjs
--;

262 
t˘x
->
˙ts
.
curbyãs
 -
usize
;

264 i‡(
	`¥of_t˘x_should_de°roy
(
	`tsd_tsdn
(
tsd
), 
t˘x
)) {

265 
	`¥of_t˘x_de°roy
(
tsd
, 
t˘x
);

267 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), 
t˘x
->
td©a
->
lock
);

269 
	}
}

272 
	$bt_öô
(
¥of_bt_t
 *
bt
, **
vec
) {

273 
	`ˇs£π
(
c⁄fig_¥of
);

275 
bt
->
vec
 = vec;

276 
bt
->
Àn
 = 0;

277 
	}
}

280 
	$¥of_íãr
(
tsd_t
 *
tsd
, 
¥of_td©a_t
 *
td©a
) {

281 
	`ˇs£π
(
c⁄fig_¥of
);

282 
	`as£π
(
td©a
 =
	`¥of_td©a_gë
(
tsd
, 
Ál£
));

284 i‡(
td©a
 !
NULL
) {

285 
	`as£π
(!
td©a
->
íq
);

286 
td©a
->
íq
 = 
åue
;

289 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
bt2g˘x_mtx
);

290 
	}
}

293 
	$¥of_Àave
(
tsd_t
 *
tsd
, 
¥of_td©a_t
 *
td©a
) {

294 
	`ˇs£π
(
c⁄fig_¥of
);

295 
	`as£π
(
td©a
 =
	`¥of_td©a_gë
(
tsd
, 
Ál£
));

297 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
bt2g˘x_mtx
);

299 i‡(
td©a
 !
NULL
) {

300 
boﬁ
 
idump
, 
gdump
;

302 
	`as£π
(
td©a
->
íq
);

303 
td©a
->
íq
 = 
Ál£
;

304 
idump
 = 
td©a
->
íq_idump
;

305 
td©a
->
íq_idump
 = 
Ál£
;

306 
gdump
 = 
td©a
->
íq_gdump
;

307 
td©a
->
íq_gdump
 = 
Ál£
;

309 i‡(
idump
) {

310 
	`¥of_idump
(
	`tsd_tsdn
(
tsd
));

312 i‡(
gdump
) {

313 
	`¥of_gdump
(
	`tsd_tsdn
(
tsd
));

316 
	}
}

318 #ifde‡
JEMALLOC_PROF_LIBUNWIND


320 
	$¥of_backåa˚
(
¥of_bt_t
 *
bt
) {

321 
n‰ames
;

323 
	`ˇs£π
(
c⁄fig_¥of
);

324 
	`as£π
(
bt
->
Àn
 == 0);

325 
	`as£π
(
bt
->
vec
 !
NULL
);

327 
n‰ames
 = 
	`unw_backåa˚
(
bt
->
vec
, 
PROF_BT_MAX
);

328 i‡(
n‰ames
 <= 0) {

331 
bt
->
Àn
 = 
n‰ames
;

332 
	}
}

333 #ñi‡(
deföed
(
JEMALLOC_PROF_LIBGCC
))

334 
_Unwöd_Rós⁄_Code


335 
	$¥of_unwöd_öô_ˇŒback
(
_Unwöd_C⁄ãxt
 *
c⁄ãxt
, *
¨g
) {

336 
	`ˇs£π
(
c⁄fig_¥of
);

338  
_URC_NO_REASON
;

339 
	}
}

341 
_Unwöd_Rós⁄_Code


342 
	$¥of_unwöd_ˇŒback
(
_Unwöd_C⁄ãxt
 *
c⁄ãxt
, *
¨g
) {

343 
¥of_unwöd_d©a_t
 *
d©a
 = (¥of_unwöd_d©a_à*)
¨g
;

344 *
ù
;

346 
	`ˇs£π
(
c⁄fig_¥of
);

348 
ù
 = (*)
	`_Unwöd_GëIP
(
c⁄ãxt
);

349 i‡(
ù
 =
NULL
) {

350  
_URC_END_OF_STACK
;

352 
d©a
->
bt
->
vec
[d©a->bt->
Àn
] = 
ù
;

353 
d©a
->
bt
->
Àn
++;

354 i‡(
d©a
->
bt
->
Àn
 =d©a->
max
) {

355  
_URC_END_OF_STACK
;

358  
_URC_NO_REASON
;

359 
	}
}

362 
	$¥of_backåa˚
(
¥of_bt_t
 *
bt
) {

363 
¥of_unwöd_d©a_t
 
d©a
 = {
bt
, 
PROF_BT_MAX
};

365 
	`ˇs£π
(
c⁄fig_¥of
);

367 
	`_Unwöd_Backåa˚
(
¥of_unwöd_ˇŒback
, &
d©a
);

368 
	}
}

369 #ñi‡(
deföed
(
JEMALLOC_PROF_GCC
))

371 
	$¥of_backåa˚
(
¥of_bt_t
 *
bt
) {

372 
	#BT_FRAME
(
i
) \

373 i‡((
i
Ë< 
PROF_BT_MAX
) { \

374 *
p
; \

375 i‡(
	`__buûtö_‰ame_addªss
(
i
) == 0) { \

378 
p
 = 
	`__buûtö_ªtu∫_addªss
(
i
); \

379 i‡(
p
 =
NULL
) { \

382 
bt
->
vec
[(
i
)] = 
p
; \

383 
bt
->
Àn
 = (
i
) + 1; \

386 }

	)

388 
	`ˇs£π
(
c⁄fig_¥of
);

390 
	`BT_FRAME
(0)

391 
	`BT_FRAME
(1)

392 
	`BT_FRAME
(2)

393 
	`BT_FRAME
(3)

394 
	`BT_FRAME
(4)

395 
	`BT_FRAME
(5)

396 
	`BT_FRAME
(6)

397 
	`BT_FRAME
(7)

398 
	`BT_FRAME
(8)

399 
	`BT_FRAME
(9)

401 
	`BT_FRAME
(10)

402 
	`BT_FRAME
(11)

403 
	`BT_FRAME
(12)

404 
	`BT_FRAME
(13)

405 
	`BT_FRAME
(14)

406 
	`BT_FRAME
(15)

407 
	`BT_FRAME
(16)

408 
	`BT_FRAME
(17)

409 
	`BT_FRAME
(18)

410 
	`BT_FRAME
(19)

412 
	`BT_FRAME
(20)

413 
	`BT_FRAME
(21)

414 
	`BT_FRAME
(22)

415 
	`BT_FRAME
(23)

416 
	`BT_FRAME
(24)

417 
	`BT_FRAME
(25)

418 
	`BT_FRAME
(26)

419 
	`BT_FRAME
(27)

420 
	`BT_FRAME
(28)

421 
	`BT_FRAME
(29)

423 
	`BT_FRAME
(30)

424 
	`BT_FRAME
(31)

425 
	`BT_FRAME
(32)

426 
	`BT_FRAME
(33)

427 
	`BT_FRAME
(34)

428 
	`BT_FRAME
(35)

429 
	`BT_FRAME
(36)

430 
	`BT_FRAME
(37)

431 
	`BT_FRAME
(38)

432 
	`BT_FRAME
(39)

434 
	`BT_FRAME
(40)

435 
	`BT_FRAME
(41)

436 
	`BT_FRAME
(42)

437 
	`BT_FRAME
(43)

438 
	`BT_FRAME
(44)

439 
	`BT_FRAME
(45)

440 
	`BT_FRAME
(46)

441 
	`BT_FRAME
(47)

442 
	`BT_FRAME
(48)

443 
	`BT_FRAME
(49)

445 
	`BT_FRAME
(50)

446 
	`BT_FRAME
(51)

447 
	`BT_FRAME
(52)

448 
	`BT_FRAME
(53)

449 
	`BT_FRAME
(54)

450 
	`BT_FRAME
(55)

451 
	`BT_FRAME
(56)

452 
	`BT_FRAME
(57)

453 
	`BT_FRAME
(58)

454 
	`BT_FRAME
(59)

456 
	`BT_FRAME
(60)

457 
	`BT_FRAME
(61)

458 
	`BT_FRAME
(62)

459 
	`BT_FRAME
(63)

460 
	`BT_FRAME
(64)

461 
	`BT_FRAME
(65)

462 
	`BT_FRAME
(66)

463 
	`BT_FRAME
(67)

464 
	`BT_FRAME
(68)

465 
	`BT_FRAME
(69)

467 
	`BT_FRAME
(70)

468 
	`BT_FRAME
(71)

469 
	`BT_FRAME
(72)

470 
	`BT_FRAME
(73)

471 
	`BT_FRAME
(74)

472 
	`BT_FRAME
(75)

473 
	`BT_FRAME
(76)

474 
	`BT_FRAME
(77)

475 
	`BT_FRAME
(78)

476 
	`BT_FRAME
(79)

478 
	`BT_FRAME
(80)

479 
	`BT_FRAME
(81)

480 
	`BT_FRAME
(82)

481 
	`BT_FRAME
(83)

482 
	`BT_FRAME
(84)

483 
	`BT_FRAME
(85)

484 
	`BT_FRAME
(86)

485 
	`BT_FRAME
(87)

486 
	`BT_FRAME
(88)

487 
	`BT_FRAME
(89)

489 
	`BT_FRAME
(90)

490 
	`BT_FRAME
(91)

491 
	`BT_FRAME
(92)

492 
	`BT_FRAME
(93)

493 
	`BT_FRAME
(94)

494 
	`BT_FRAME
(95)

495 
	`BT_FRAME
(96)

496 
	`BT_FRAME
(97)

497 
	`BT_FRAME
(98)

498 
	`BT_FRAME
(99)

500 
	`BT_FRAME
(100)

501 
	`BT_FRAME
(101)

502 
	`BT_FRAME
(102)

503 
	`BT_FRAME
(103)

504 
	`BT_FRAME
(104)

505 
	`BT_FRAME
(105)

506 
	`BT_FRAME
(106)

507 
	`BT_FRAME
(107)

508 
	`BT_FRAME
(108)

509 
	`BT_FRAME
(109)

511 
	`BT_FRAME
(110)

512 
	`BT_FRAME
(111)

513 
	`BT_FRAME
(112)

514 
	`BT_FRAME
(113)

515 
	`BT_FRAME
(114)

516 
	`BT_FRAME
(115)

517 
	`BT_FRAME
(116)

518 
	`BT_FRAME
(117)

519 
	`BT_FRAME
(118)

520 
	`BT_FRAME
(119)

522 
	`BT_FRAME
(120)

523 
	`BT_FRAME
(121)

524 
	`BT_FRAME
(122)

525 
	`BT_FRAME
(123)

526 
	`BT_FRAME
(124)

527 
	`BT_FRAME
(125)

528 
	`BT_FRAME
(126)

529 
	`BT_FRAME
(127)

530 #unde‡
BT_FRAME


531 
	}
}

534 
	$¥of_backåa˚
(
¥of_bt_t
 *
bt
) {

535 
	`ˇs£π
(
c⁄fig_¥of
);

536 
	`nŸ_ªached
();

537 
	}
}

540 
mÆloc_muãx_t
 *

541 
	$¥of_g˘x_muãx_choo£
() {

542 
ng˘xs
 = 
	`©omic_„tch_add_u
(&
cum_g˘xs
, 1, 
ATOMIC_RELAXED
);

544  &
g˘x_locks
[(
ng˘xs
 - 1Ë% 
PROF_NCTX_LOCKS
];

545 
	}
}

547 
mÆloc_muãx_t
 *

548 
	$¥of_td©a_muãx_choo£
(
uöt64_t
 
thr_uid
) {

549  &
td©a_locks
[
thr_uid
 % 
PROF_NTDATA_LOCKS
];

550 
	}
}

552 
¥of_g˘x_t
 *

553 
	$¥of_g˘x_¸óã
(
tsdn_t
 *
tsdn
, 
¥of_bt_t
 *
bt
) {

557 
size_t
 
size
 = 
	`off£tof
(
¥of_g˘x_t
, 
vec
Ë+ (
bt
->
Àn
 * (*));

558 
¥of_g˘x_t
 *
g˘x
 = (¥of_g˘x_à*)
	`üŒocztm
(
tsdn
, 
size
,

559 
	`sz_size2ödex
(
size
), 
Ál£
, 
NULL
, 
åue
, 
	`¨ía_gë
(
TSDN_NULL
, 0,Årue),

560 
åue
);

561 i‡(
g˘x
 =
NULL
) {

562  
NULL
;

564 
g˘x
->
lock
 = 
	`¥of_g˘x_muãx_choo£
();

569 
g˘x
->
∆imbo
 = 1;

570 
	`t˘x_åì_√w
(&
g˘x
->
t˘xs
);

572 
	`mem˝y
(
g˘x
->
vec
, 
bt
->vec, bt->
Àn
 * (*));

573 
g˘x
->
bt
.
vec
 = gctx->vec;

574 
g˘x
->
bt
.
Àn
 = bt->len;

575  
g˘x
;

576 
	}
}

579 
	$¥of_g˘x_åy_de°roy
(
tsd_t
 *
tsd
, 
¥of_td©a_t
 *
td©a_£lf
, 
¥of_g˘x_t
 *
g˘x
,

580 
¥of_td©a_t
 *
td©a
) {

581 
	`ˇs£π
(
c⁄fig_¥of
);

590 
	`¥of_íãr
(
tsd
, 
td©a_£lf
);

591 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), 
g˘x
->
lock
);

592 
	`as£π
(
g˘x
->
∆imbo
 != 0);

593 i‡(
	`t˘x_åì_em±y
(&
g˘x
->
t˘xs
Ë&& g˘x->
∆imbo
 == 1) {

595 i‡(
	`ckh_ªmove
(
tsd
, &
bt2g˘x
, &
g˘x
->
bt
, 
NULL
, NULL)) {

596 
	`nŸ_ªached
();

598 
	`¥of_Àave
(
tsd
, 
td©a_£lf
);

600 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), 
g˘x
->
lock
);

601 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
g˘x
, 
NULL
, NULL, 
åue
,Årue);

607 
g˘x
->
∆imbo
--;

608 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), 
g˘x
->
lock
);

609 
	`¥of_Àave
(
tsd
, 
td©a_£lf
);

611 
	}
}

613 
boﬁ


614 
	$¥of_t˘x_should_de°roy
(
tsdn_t
 *
tsdn
, 
¥of_t˘x_t
 *
t˘x
) {

615 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, 
t˘x
->
td©a
->
lock
);

617 i‡(
›t_¥of_accum
) {

618  
Ál£
;

620 i‡(
t˘x
->
˙ts
.
curobjs
 != 0) {

621  
Ál£
;

623 i‡(
t˘x
->
¥ï¨ed
) {

624  
Ál£
;

626  
åue
;

627 
	}
}

629 
boﬁ


630 
	$¥of_g˘x_should_de°roy
(
¥of_g˘x_t
 *
g˘x
) {

631 i‡(
›t_¥of_accum
) {

632  
Ál£
;

634 i‡(!
	`t˘x_åì_em±y
(&
g˘x
->
t˘xs
)) {

635  
Ál£
;

637 i‡(
g˘x
->
∆imbo
 != 0) {

638  
Ál£
;

640  
åue
;

641 
	}
}

644 
	$¥of_t˘x_de°roy
(
tsd_t
 *
tsd
, 
¥of_t˘x_t
 *
t˘x
) {

645 
¥of_td©a_t
 *
td©a
 = 
t˘x
->tdata;

646 
¥of_g˘x_t
 *
g˘x
 = 
t˘x
->gctx;

647 
boﬁ
 
de°roy_td©a
, 
de°roy_t˘x
, 
de°roy_g˘x
;

649 
	`mÆloc_muãx_as£π_ow√r
(
	`tsd_tsdn
(
tsd
), 
t˘x
->
td©a
->
lock
);

651 
	`as£π
(
t˘x
->
˙ts
.
curobjs
 == 0);

652 
	`as£π
(
t˘x
->
˙ts
.
curbyãs
 == 0);

653 
	`as£π
(!
›t_¥of_accum
);

654 
	`as£π
(
t˘x
->
˙ts
.
accumobjs
 == 0);

655 
	`as£π
(
t˘x
->
˙ts
.
accumbyãs
 == 0);

657 
	`ckh_ªmove
(
tsd
, &
td©a
->
bt2t˘x
, &
g˘x
->
bt
, 
NULL
, NULL);

658 
de°roy_td©a
 = 
	`¥of_td©a_should_de°roy
(
	`tsd_tsdn
(
tsd
), 
td©a
, 
Ál£
);

659 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), 
td©a
->
lock
);

661 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), 
g˘x
->
lock
);

662 
t˘x
->
°©e
) {

663 
¥of_t˘x_°©e_nomöÆ
:

664 
	`t˘x_åì_ªmove
(&
g˘x
->
t˘xs
, 
t˘x
);

665 
de°roy_t˘x
 = 
åue
;

666 i‡(
	`¥of_g˘x_should_de°roy
(
g˘x
)) {

681 
g˘x
->
∆imbo
++;

682 
de°roy_g˘x
 = 
åue
;

684 
de°roy_g˘x
 = 
Ál£
;

687 
¥of_t˘x_°©e_dumpög
:

693 
t˘x
->
°©e
 = 
¥of_t˘x_°©e_purg©‹y
;

694 
de°roy_t˘x
 = 
Ál£
;

695 
de°roy_g˘x
 = 
Ál£
;

698 
	`nŸ_ªached
();

699 
de°roy_t˘x
 = 
Ál£
;

700 
de°roy_g˘x
 = 
Ál£
;

702 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), 
g˘x
->
lock
);

703 i‡(
de°roy_g˘x
) {

704 
	`¥of_g˘x_åy_de°roy
(
tsd
, 
	`¥of_td©a_gë
—sd, 
Ál£
), 
g˘x
,

705 
td©a
);

708 
	`mÆloc_muãx_as£π_nŸ_ow√r
(
	`tsd_tsdn
(
tsd
), 
t˘x
->
td©a
->
lock
);

710 i‡(
de°roy_td©a
) {

711 
	`¥of_td©a_de°roy
(
tsd
, 
td©a
, 
Ál£
);

714 i‡(
de°roy_t˘x
) {

715 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
t˘x
, 
NULL
, NULL, 
åue
,Årue);

717 
	}
}

719 
boﬁ


720 
	$¥of_lookup_globÆ
(
tsd_t
 *
tsd
, 
¥of_bt_t
 *
bt
, 
¥of_td©a_t
 *
td©a
,

721 **
p_btkey
, 
¥of_g˘x_t
 **
p_g˘x
, 
boﬁ
 *
p_√w_g˘x
) {

723 
¥of_g˘x_t
 *
p
;

724 *
v
;

725 } 
g˘x
, 
tg˘x
;

727 
¥of_bt_t
 *
p
;

728 *
v
;

729 } 
btkey
;

730 
boﬁ
 
√w_g˘x
;

732 
	`¥of_íãr
(
tsd
, 
td©a
);

733 i‡(
	`ckh_£¨ch
(&
bt2g˘x
, 
bt
, &
btkey
.
v
, &
g˘x
.v)) {

735 
	`¥of_Àave
(
tsd
, 
td©a
);

736 
tg˘x
.
p
 = 
	`¥of_g˘x_¸óã
(
	`tsd_tsdn
(
tsd
), 
bt
);

737 i‡(
tg˘x
.
v
 =
NULL
) {

738  
åue
;

740 
	`¥of_íãr
(
tsd
, 
td©a
);

741 i‡(
	`ckh_£¨ch
(&
bt2g˘x
, 
bt
, &
btkey
.
v
, &
g˘x
.v)) {

742 
g˘x
.
p
 = 
tg˘x
.p;

743 
btkey
.
p
 = &
g˘x
.p->
bt
;

744 i‡(
	`ckh_ö£π
(
tsd
, &
bt2g˘x
, 
btkey
.
v
, 
g˘x
.v)) {

746 
	`¥of_Àave
(
tsd
, 
td©a
);

747 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
g˘x
.
v
, 
NULL
, NULL,

748 
åue
,Årue);

749  
åue
;

751 
√w_g˘x
 = 
åue
;

753 
√w_g˘x
 = 
Ál£
;

756 
tg˘x
.
v
 = 
NULL
;

757 
√w_g˘x
 = 
Ál£
;

760 i‡(!
√w_g˘x
) {

765 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), 
g˘x
.
p
->
lock
);

766 
g˘x
.
p
->
∆imbo
++;

767 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), 
g˘x
.
p
->
lock
);

768 
√w_g˘x
 = 
Ál£
;

770 i‡(
tg˘x
.
v
 !
NULL
) {

772 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
tg˘x
.
v
, 
NULL
, NULL, 
åue
,

773 
åue
);

776 
	`¥of_Àave
(
tsd
, 
td©a
);

778 *
p_btkey
 = 
btkey
.
v
;

779 *
p_g˘x
 = 
g˘x
.
p
;

780 *
p_√w_g˘x
 = 
√w_g˘x
;

781  
Ál£
;

782 
	}
}

784 
¥of_t˘x_t
 *

785 
	$¥of_lookup
(
tsd_t
 *
tsd
, 
¥of_bt_t
 *
bt
) {

787 
¥of_t˘x_t
 *
p
;

788 *
v
;

789 } 
ªt
;

790 
¥of_td©a_t
 *
td©a
;

791 
boﬁ
 
nŸ_found
;

793 
	`ˇs£π
(
c⁄fig_¥of
);

795 
td©a
 = 
	`¥of_td©a_gë
(
tsd
, 
Ál£
);

796 i‡(
td©a
 =
NULL
) {

797  
NULL
;

800 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), 
td©a
->
lock
);

801 
nŸ_found
 = 
	`ckh_£¨ch
(&
td©a
->
bt2t˘x
, 
bt
, 
NULL
, &
ªt
.
v
);

802 i‡(!
nŸ_found
) {

803 
ªt
.
p
->
¥ï¨ed
 = 
åue
;

805 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), 
td©a
->
lock
);

806 i‡(
nŸ_found
) {

807 *
btkey
;

808 
¥of_g˘x_t
 *
g˘x
;

809 
boﬁ
 
√w_g˘x
, 
îr‹
;

815 i‡(
	`¥of_lookup_globÆ
(
tsd
, 
bt
, 
td©a
, &
btkey
, &
g˘x
,

816 &
√w_g˘x
)) {

817  
NULL
;

821 
ªt
.
v
 = 
	`üŒocztm
(
	`tsd_tsdn
(
tsd
), (
¥of_t˘x_t
),

822 
	`sz_size2ödex
((
¥of_t˘x_t
)), 
Ál£
, 
NULL
, 
åue
,

823 
	`¨ía_ichoo£
(
tsd
, 
NULL
), 
åue
);

824 i‡(
ªt
.
p
 =
NULL
) {

825 i‡(
√w_g˘x
) {

826 
	`¥of_g˘x_åy_de°roy
(
tsd
, 
td©a
, 
g˘x
,Ådata);

828  
NULL
;

830 
ªt
.
p
->
td©a
 =Ådata;

831 
ªt
.
p
->
thr_uid
 = 
td©a
->thr_uid;

832 
ªt
.
p
->
thr_dis¸im
 = 
td©a
->thr_discrim;

833 
	`mem£t
(&
ªt
.
p
->
˙ts
, 0, (
¥of_˙t_t
));

834 
ªt
.
p
->
g˘x
 = gctx;

835 
ªt
.
p
->
t˘x_uid
 = 
td©a
->
t˘x_uid_√xt
++;

836 
ªt
.
p
->
¥ï¨ed
 = 
åue
;

837 
ªt
.
p
->
°©e
 = 
¥of_t˘x_°©e_öôülizög
;

838 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), 
td©a
->
lock
);

839 
îr‹
 = 
	`ckh_ö£π
(
tsd
, &
td©a
->
bt2t˘x
, 
btkey
, 
ªt
.
v
);

840 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), 
td©a
->
lock
);

841 i‡(
îr‹
) {

842 i‡(
√w_g˘x
) {

843 
	`¥of_g˘x_åy_de°roy
(
tsd
, 
td©a
, 
g˘x
,Ådata);

845 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
ªt
.
v
, 
NULL
, NULL, 
åue
,Årue);

846  
NULL
;

848 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), 
g˘x
->
lock
);

849 
ªt
.
p
->
°©e
 = 
¥of_t˘x_°©e_nomöÆ
;

850 
	`t˘x_åì_ö£π
(&
g˘x
->
t˘xs
, 
ªt
.
p
);

851 
g˘x
->
∆imbo
--;

852 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), 
g˘x
->
lock
);

855  
ªt
.
p
;

856 
	}
}

872 
	$¥of_ßm∂e_thªshﬁd_upd©e
(
¥of_td©a_t
 *
td©a
) {

873 #ifde‡
JEMALLOC_PROF


874 
uöt64_t
 
r
;

875 
u
;

877 i‡(!
c⁄fig_¥of
) {

881 i‡(
lg_¥of_ßm∂e
 == 0) {

882 
td©a
->
byãs_u¡û_ßm∂e
 = 0;

904 
r
 = 
	`¥ng_lg_ønge_u64
(&
td©a
->
¥ng_°©e
, 53);

905 
u
 = ()
r
 * (1.0/9007199254740992.0L);

906 
td©a
->
byãs_u¡û_ßm∂e
 = (
uöt64_t
)(
	`log
(
u
) /

907 
	`log
(1.0 - (1.0 / ()((
uöt64_t
)1U << 
lg_¥of_ßm∂e
))))

908 + (
uöt64_t
)1U;

910 
	}
}

912 #ifde‡
JEMALLOC_JET


913 
¥of_td©a_t
 *

914 
	$¥of_td©a_cou¡_ôî
(
¥of_td©a_åì_t
 *
td©as
, 
¥of_td©a_t
 *
td©a
,

915 *
¨g
) {

916 
size_t
 *
td©a_cou¡
 = (size_à*)
¨g
;

918 (*
td©a_cou¡
)++;

920  
NULL
;

921 
	}
}

923 
size_t


924 
	$¥of_td©a_cou¡
() {

925 
size_t
 
td©a_cou¡
 = 0;

926 
tsdn_t
 *
tsdn
;

928 
tsdn
 = 
	`tsdn_„tch
();

929 
	`mÆloc_muãx_lock
(
tsdn
, &
td©as_mtx
);

930 
	`td©a_åì_ôî
(&
td©as
, 
NULL
, 
¥of_td©a_cou¡_ôî
,

931 (*)&
td©a_cou¡
);

932 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
td©as_mtx
);

934  
td©a_cou¡
;

935 
	}
}

937 
size_t


938 
	$¥of_bt_cou¡
() {

939 
size_t
 
bt_cou¡
;

940 
tsd_t
 *
tsd
;

941 
¥of_td©a_t
 *
td©a
;

943 
tsd
 = 
	`tsd_„tch
();

944 
td©a
 = 
	`¥of_td©a_gë
(
tsd
, 
Ál£
);

945 i‡(
td©a
 =
NULL
) {

949 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
bt2g˘x_mtx
);

950 
bt_cou¡
 = 
	`ckh_cou¡
(&
bt2g˘x
);

951 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
bt2g˘x_mtx
);

953  
bt_cou¡
;

954 
	}
}

958 
	$¥of_dump_›í_im∂
(
boﬁ
 
¥›ag©e_îr
, c⁄° *
fûíame
) {

959 
fd
;

961 
fd
 = 
	`¸ót
(
fûíame
, 0644);

962 i‡(
fd
 =-1 && !
¥›ag©e_îr
) {

963 
	`mÆloc_¥ötf
("<jemalloc>: creat(\"%s\"), 0644) failed\n",

964 
fûíame
);

965 i‡(
›t_ab‹t
) {

966 
	`ab‹t
();

970  
fd
;

971 
	}
}

972 
¥of_dump_›í_t
 *
JET_MUTABLE
 
	g¥of_dump_›í
 = 
¥of_dump_›í_im∂
;

974 
boﬁ


975 
	$¥of_dump_Êush
(
boﬁ
 
¥›ag©e_îr
) {

976 
boﬁ
 
ªt
 = 
Ál£
;

977 
ssize_t
 
îr
;

979 
	`ˇs£π
(
c⁄fig_¥of
);

981 
îr
 = 
	`wrôe
(
¥of_dump_fd
, 
¥of_dump_buf
, 
¥of_dump_buf_íd
);

982 i‡(
îr
 == -1) {

983 i‡(!
¥›ag©e_îr
) {

984 
	`mÆloc_wrôe
("<jemalloc>: write() failed during heap "

986 i‡(
›t_ab‹t
) {

987 
	`ab‹t
();

990 
ªt
 = 
åue
;

992 
¥of_dump_buf_íd
 = 0;

994  
ªt
;

995 
	}
}

997 
boﬁ


998 
	$¥of_dump_˛o£
(
boﬁ
 
¥›ag©e_îr
) {

999 
boﬁ
 
ªt
;

1001 
	`as£π
(
¥of_dump_fd
 != -1);

1002 
ªt
 = 
	`¥of_dump_Êush
(
¥›ag©e_îr
);

1003 
	`˛o£
(
¥of_dump_fd
);

1004 
¥of_dump_fd
 = -1;

1006  
ªt
;

1007 
	}
}

1009 
boﬁ


1010 
	$¥of_dump_wrôe
(
boﬁ
 
¥›ag©e_îr
, c⁄° *
s
) {

1011 
size_t
 
i
, 
¶í
, 
n
;

1013 
	`ˇs£π
(
c⁄fig_¥of
);

1015 
i
 = 0;

1016 
¶í
 = 
	`°æí
(
s
);

1017 
i
 < 
¶í
) {

1019 i‡(
¥of_dump_buf_íd
 =
PROF_DUMP_BUFSIZE
) {

1020 i‡(
	`¥of_dump_Êush
(
¥›ag©e_îr
) &&Öropagate_err) {

1021  
åue
;

1025 i‡(
¥of_dump_buf_íd
 + 
¶í
 <
PROF_DUMP_BUFSIZE
) {

1027 
n
 = 
¶í
 - 
i
;

1030 
n
 = 
PROF_DUMP_BUFSIZE
 - 
¥of_dump_buf_íd
;

1032 
	`mem˝y
(&
¥of_dump_buf
[
¥of_dump_buf_íd
], &
s
[
i
], 
n
);

1033 
¥of_dump_buf_íd
 +
n
;

1034 
i
 +
n
;

1037  
Ál£
;

1038 
	}
}

1040 
	$JEMALLOC_FORMAT_PRINTF
(2, 3)

1041 
boﬁ


1042 
	$¥of_dump_¥ötf
(
boﬁ
 
¥›ag©e_îr
, c⁄° *
f‹m©
, ...) {

1043 
boﬁ
 
ªt
;

1044 
va_li°
 
≠
;

1045 
buf
[
PROF_PRINTF_BUFSIZE
];

1047 
	`va_°¨t
(
≠
, 
f‹m©
);

1048 
	`mÆloc_v¢¥ötf
(
buf
, (buf), 
f‹m©
, 
≠
);

1049 
	`va_íd
(
≠
);

1050 
ªt
 = 
	`¥of_dump_wrôe
(
¥›ag©e_îr
, 
buf
);

1052  
ªt
;

1053 
	}
}

1056 
	$¥of_t˘x_mîge_td©a
(
tsdn_t
 *
tsdn
, 
¥of_t˘x_t
 *
t˘x
, 
¥of_td©a_t
 *
td©a
) {

1057 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, 
t˘x
->
td©a
->
lock
);

1059 
	`mÆloc_muãx_lock
(
tsdn
, 
t˘x
->
g˘x
->
lock
);

1061 
t˘x
->
°©e
) {

1062 
¥of_t˘x_°©e_öôülizög
:

1063 
	`mÆloc_muãx_u∆ock
(
tsdn
, 
t˘x
->
g˘x
->
lock
);

1065 
¥of_t˘x_°©e_nomöÆ
:

1066 
t˘x
->
°©e
 = 
¥of_t˘x_°©e_dumpög
;

1067 
	`mÆloc_muãx_u∆ock
(
tsdn
, 
t˘x
->
g˘x
->
lock
);

1069 
	`mem˝y
(&
t˘x
->
dump_˙ts
, &t˘x->
˙ts
, (
¥of_˙t_t
));

1071 
td©a
->
˙t_summed
.
curobjs
 +
t˘x
->
dump_˙ts
.curobjs;

1072 
td©a
->
˙t_summed
.
curbyãs
 +
t˘x
->
dump_˙ts
.curbytes;

1073 i‡(
›t_¥of_accum
) {

1074 
td©a
->
˙t_summed
.
accumobjs
 +=

1075 
t˘x
->
dump_˙ts
.
accumobjs
;

1076 
td©a
->
˙t_summed
.
accumbyãs
 +=

1077 
t˘x
->
dump_˙ts
.
accumbyãs
;

1080 
¥of_t˘x_°©e_dumpög
:

1081 
¥of_t˘x_°©e_purg©‹y
:

1082 
	`nŸ_ªached
();

1084 
	}
}

1087 
	$¥of_t˘x_mîge_g˘x
(
tsdn_t
 *
tsdn
, 
¥of_t˘x_t
 *
t˘x
, 
¥of_g˘x_t
 *
g˘x
) {

1088 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, 
g˘x
->
lock
);

1090 
g˘x
->
˙t_summed
.
curobjs
 +
t˘x
->
dump_˙ts
.curobjs;

1091 
g˘x
->
˙t_summed
.
curbyãs
 +
t˘x
->
dump_˙ts
.curbytes;

1092 i‡(
›t_¥of_accum
) {

1093 
g˘x
->
˙t_summed
.
accumobjs
 +
t˘x
->
dump_˙ts
.accumobjs;

1094 
g˘x
->
˙t_summed
.
accumbyãs
 +
t˘x
->
dump_˙ts
.accumbytes;

1096 
	}
}

1098 
¥of_t˘x_t
 *

1099 
	$¥of_t˘x_mîge_ôî
(
¥of_t˘x_åì_t
 *
t˘xs
, 
¥of_t˘x_t
 *
t˘x
, *
¨g
) {

1100 
tsdn_t
 *
tsdn
 = (tsdn_à*)
¨g
;

1102 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, 
t˘x
->
g˘x
->
lock
);

1104 
t˘x
->
°©e
) {

1105 
¥of_t˘x_°©e_nomöÆ
:

1108 
¥of_t˘x_°©e_dumpög
:

1109 
¥of_t˘x_°©e_purg©‹y
:

1110 
	`¥of_t˘x_mîge_g˘x
(
tsdn
, 
t˘x
,Å˘x->
g˘x
);

1113 
	`nŸ_ªached
();

1116  
NULL
;

1117 
	}
}

1119 
	s¥of_t˘x_dump_ôî_¨g_s
 {

1120 
tsdn_t
 *
	mtsdn
;

1121 
boﬁ
 
	m¥›ag©e_îr
;

1124 
¥of_t˘x_t
 *

1125 
	$¥of_t˘x_dump_ôî
(
¥of_t˘x_åì_t
 *
t˘xs
, 
¥of_t˘x_t
 *
t˘x
, *
›aque
) {

1126 
¥of_t˘x_dump_ôî_¨g_s
 *
¨g
 =

1127 (
¥of_t˘x_dump_ôî_¨g_s
 *)
›aque
;

1129 
	`mÆloc_muãx_as£π_ow√r
(
¨g
->
tsdn
, 
t˘x
->
g˘x
->
lock
);

1131 
t˘x
->
°©e
) {

1132 
¥of_t˘x_°©e_öôülizög
:

1133 
¥of_t˘x_°©e_nomöÆ
:

1136 
¥of_t˘x_°©e_dumpög
:

1137 
¥of_t˘x_°©e_purg©‹y
:

1138 i‡(
	`¥of_dump_¥ötf
(
¨g
->
¥›ag©e_îr
,

1139 "Å%"
FMTu64
": %"FMTu64": %"FMTu64" [%"FMTu64": "

1140 "%"
FMTu64
"]\n", 
t˘x
->
thr_uid
,Å˘x->
dump_˙ts
.
curobjs
,

1141 
t˘x
->
dump_˙ts
.
curbyãs
,Å˘x->dump_˙ts.
accumobjs
,

1142 
t˘x
->
dump_˙ts
.
accumbyãs
)) {

1143  
t˘x
;

1147 
	`nŸ_ªached
();

1149  
NULL
;

1150 
	}
}

1152 
¥of_t˘x_t
 *

1153 
	$¥of_t˘x_föish_ôî
(
¥of_t˘x_åì_t
 *
t˘xs
, 
¥of_t˘x_t
 *
t˘x
, *
¨g
) {

1154 
tsdn_t
 *
tsdn
 = (tsdn_à*)
¨g
;

1155 
¥of_t˘x_t
 *
ªt
;

1157 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, 
t˘x
->
g˘x
->
lock
);

1159 
t˘x
->
°©e
) {

1160 
¥of_t˘x_°©e_nomöÆ
:

1163 
¥of_t˘x_°©e_dumpög
:

1164 
t˘x
->
°©e
 = 
¥of_t˘x_°©e_nomöÆ
;

1166 
¥of_t˘x_°©e_purg©‹y
:

1167 
ªt
 = 
t˘x
;

1168 
œbñ_ªtu∫
;

1170 
	`nŸ_ªached
();

1173 
ªt
 = 
NULL
;

1174 
œbñ_ªtu∫
:

1175  
ªt
;

1176 
	}
}

1179 
	$¥of_dump_g˘x_¥ï
(
tsdn_t
 *
tsdn
, 
¥of_g˘x_t
 *
g˘x
, 
¥of_g˘x_åì_t
 *
g˘xs
) {

1180 
	`ˇs£π
(
c⁄fig_¥of
);

1182 
	`mÆloc_muãx_lock
(
tsdn
, 
g˘x
->
lock
);

1189 
g˘x
->
∆imbo
++;

1190 
	`g˘x_åì_ö£π
(
g˘xs
, 
g˘x
);

1192 
	`mem£t
(&
g˘x
->
˙t_summed
, 0, (
¥of_˙t_t
));

1194 
	`mÆloc_muãx_u∆ock
(
tsdn
, 
g˘x
->
lock
);

1195 
	}
}

1197 
	s¥of_g˘x_mîge_ôî_¨g_s
 {

1198 
tsdn_t
 *
	mtsdn
;

1199 
size_t
 
	mÀak_ng˘x
;

1202 
¥of_g˘x_t
 *

1203 
	$¥of_g˘x_mîge_ôî
(
¥of_g˘x_åì_t
 *
g˘xs
, 
¥of_g˘x_t
 *
g˘x
, *
›aque
) {

1204 
¥of_g˘x_mîge_ôî_¨g_s
 *
¨g
 =

1205 (
¥of_g˘x_mîge_ôî_¨g_s
 *)
›aque
;

1207 
	`mÆloc_muãx_lock
(
¨g
->
tsdn
, 
g˘x
->
lock
);

1208 
	`t˘x_åì_ôî
(&
g˘x
->
t˘xs
, 
NULL
, 
¥of_t˘x_mîge_ôî
,

1209 (*)
¨g
->
tsdn
);

1210 i‡(
g˘x
->
˙t_summed
.
curobjs
 != 0) {

1211 
¨g
->
Àak_ng˘x
++;

1213 
	`mÆloc_muãx_u∆ock
(
¨g
->
tsdn
, 
g˘x
->
lock
);

1215  
NULL
;

1216 
	}
}

1219 
	$¥of_g˘x_föish
(
tsd_t
 *
tsd
, 
¥of_g˘x_åì_t
 *
g˘xs
) {

1220 
¥of_td©a_t
 *
td©a
 = 
	`¥of_td©a_gë
(
tsd
, 
Ál£
);

1221 
¥of_g˘x_t
 *
g˘x
;

1229 (
g˘x
 = 
	`g˘x_åì_fú°
(
g˘xs
)Ë!
NULL
) {

1230 
	`g˘x_åì_ªmove
(
g˘xs
, 
g˘x
);

1231 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), 
g˘x
->
lock
);

1233 
¥of_t˘x_t
 *
√xt
;

1235 
√xt
 = 
NULL
;

1237 
¥of_t˘x_t
 *
to_de°roy
 =

1238 
	`t˘x_åì_ôî
(&
g˘x
->
t˘xs
, 
√xt
,

1239 
¥of_t˘x_föish_ôî
,

1240 (*)
	`tsd_tsdn
(
tsd
));

1241 i‡(
to_de°roy
 !
NULL
) {

1242 
√xt
 = 
	`t˘x_åì_√xt
(&
g˘x
->
t˘xs
,

1243 
to_de°roy
);

1244 
	`t˘x_åì_ªmove
(&
g˘x
->
t˘xs
,

1245 
to_de°roy
);

1246 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
to_de°roy
,

1247 
NULL
, NULL, 
åue
,Årue);

1249 
√xt
 = 
NULL
;

1251 } 
√xt
 !
NULL
);

1253 
g˘x
->
∆imbo
--;

1254 i‡(
	`¥of_g˘x_should_de°roy
(
g˘x
)) {

1255 
g˘x
->
∆imbo
++;

1256 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), 
g˘x
->
lock
);

1257 
	`¥of_g˘x_åy_de°roy
(
tsd
, 
td©a
, 
g˘x
,Ådata);

1259 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), 
g˘x
->
lock
);

1262 
	}
}

1264 
	s¥of_td©a_mîge_ôî_¨g_s
 {

1265 
tsdn_t
 *
	mtsdn
;

1266 
¥of_˙t_t
 
	m˙t_Æl
;

1269 
¥of_td©a_t
 *

1270 
	$¥of_td©a_mîge_ôî
(
¥of_td©a_åì_t
 *
td©as
, 
¥of_td©a_t
 *
td©a
,

1271 *
›aque
) {

1272 
¥of_td©a_mîge_ôî_¨g_s
 *
¨g
 =

1273 (
¥of_td©a_mîge_ôî_¨g_s
 *)
›aque
;

1275 
	`mÆloc_muãx_lock
(
¨g
->
tsdn
, 
td©a
->
lock
);

1276 i‡(!
td©a
->
expúed
) {

1277 
size_t
 
èböd
;

1279 
¥of_t˘x_t
 *
p
;

1280 *
v
;

1281 } 
t˘x
;

1283 
td©a
->
dumpög
 = 
åue
;

1284 
	`mem£t
(&
td©a
->
˙t_summed
, 0, (
¥of_˙t_t
));

1285 
èböd
 = 0; !
	`ckh_ôî
(&
td©a
->
bt2t˘x
, &èböd, 
NULL
,

1286 &
t˘x
.
v
);) {

1287 
	`¥of_t˘x_mîge_td©a
(
¨g
->
tsdn
, 
t˘x
.
p
, 
td©a
);

1290 
¨g
->
˙t_Æl
.
curobjs
 +
td©a
->
˙t_summed
.curobjs;

1291 
¨g
->
˙t_Æl
.
curbyãs
 +
td©a
->
˙t_summed
.curbytes;

1292 i‡(
›t_¥of_accum
) {

1293 
¨g
->
˙t_Æl
.
accumobjs
 +
td©a
->
˙t_summed
.accumobjs;

1294 
¨g
->
˙t_Æl
.
accumbyãs
 +
td©a
->
˙t_summed
.accumbytes;

1297 
td©a
->
dumpög
 = 
Ál£
;

1299 
	`mÆloc_muãx_u∆ock
(
¨g
->
tsdn
, 
td©a
->
lock
);

1301  
NULL
;

1302 
	}
}

1304 
¥of_td©a_t
 *

1305 
	$¥of_td©a_dump_ôî
(
¥of_td©a_åì_t
 *
td©as
, 
¥of_td©a_t
 *
td©a
,

1306 *
¨g
) {

1307 
boﬁ
 
¥›ag©e_îr
 = *(boﬁ *)
¨g
;

1309 i‡(!
td©a
->
dumpög
) {

1310  
NULL
;

1313 i‡(
	`¥of_dump_¥ötf
(
¥›ag©e_îr
,

1314 "Å%"
FMTu64
": %"FMTu64": %"FMTu64" [%"FMTu64": %"FMTu64"]%s%s\n",

1315 
td©a
->
thr_uid
,Åd©a->
˙t_summed
.
curobjs
,

1316 
td©a
->
˙t_summed
.
curbyãs
,Åd©a->˙t_summed.
accumobjs
,

1317 
td©a
->
˙t_summed
.
accumbyãs
,

1318 (
td©a
->
thªad_«me
 !
NULL
) ? " " : "",

1319 (
td©a
->
thªad_«me
 !
NULL
) ?Ådata->thread_name : "")) {

1320  
td©a
;

1322  
NULL
;

1323 
	}
}

1325 
boﬁ


1326 
	$¥of_dump_hódî_im∂
(
tsdn_t
 *
tsdn
, 
boﬁ
 
¥›ag©e_îr
,

1327 c⁄° 
¥of_˙t_t
 *
˙t_Æl
) {

1328 
boﬁ
 
ªt
;

1330 i‡(
	`¥of_dump_¥ötf
(
¥›ag©e_îr
,

1331 "hóp_v2/%"
FMTu64
"\n"

1332 "Å*: %"
FMTu64
": %"FMTu64" [%"FMTu64": %"FMTu64"]\n",

1333 ((
uöt64_t
)1U << 
lg_¥of_ßm∂e
), 
˙t_Æl
->
curobjs
,

1334 
˙t_Æl
->
curbyãs
, c¡_Æl->
accumobjs
, c¡_Æl->
accumbyãs
)) {

1335  
åue
;

1338 
	`mÆloc_muãx_lock
(
tsdn
, &
td©as_mtx
);

1339 
ªt
 = (
	`td©a_åì_ôî
(&
td©as
, 
NULL
, 
¥of_td©a_dump_ôî
,

1340 (*)&
¥›ag©e_îr
Ë!
NULL
);

1341 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
td©as_mtx
);

1342  
ªt
;

1343 
	}
}

1344 
¥of_dump_hódî_t
 *
JET_MUTABLE
 
	g¥of_dump_hódî
 = 
¥of_dump_hódî_im∂
;

1346 
boﬁ


1347 
	$¥of_dump_g˘x
(
tsdn_t
 *
tsdn
, 
boﬁ
 
¥›ag©e_îr
, 
¥of_g˘x_t
 *
g˘x
,

1348 c⁄° 
¥of_bt_t
 *
bt
, 
¥of_g˘x_åì_t
 *
g˘xs
) {

1349 
boﬁ
 
ªt
;

1350 
i
;

1351 
¥of_t˘x_dump_ôî_¨g_s
 
¥of_t˘x_dump_ôî_¨g
;

1353 
	`ˇs£π
(
c⁄fig_¥of
);

1354 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, 
g˘x
->
lock
);

1357 i‡((!
›t_¥of_accum
 && 
g˘x
->
˙t_summed
.
curobjs
 == 0) ||

1358 (
›t_¥of_accum
 && 
g˘x
->
˙t_summed
.
accumobjs
 == 0)) {

1359 
	`as£π
(
g˘x
->
˙t_summed
.
curobjs
 == 0);

1360 
	`as£π
(
g˘x
->
˙t_summed
.
curbyãs
 == 0);

1361 
	`as£π
(
g˘x
->
˙t_summed
.
accumobjs
 == 0);

1362 
	`as£π
(
g˘x
->
˙t_summed
.
accumbyãs
 == 0);

1363 
ªt
 = 
Ál£
;

1364 
œbñ_ªtu∫
;

1367 i‡(
	`¥of_dump_¥ötf
(
¥›ag©e_îr
, "@")) {

1368 
ªt
 = 
åue
;

1369 
œbñ_ªtu∫
;

1371 
i
 = 0; i < 
bt
->
Àn
; i++) {

1372 i‡(
	`¥of_dump_¥ötf
(
¥›ag©e_îr
, " %#"
FMTxPTR
,

1373 (
uöçå_t
)
bt
->
vec
[
i
])) {

1374 
ªt
 = 
åue
;

1375 
œbñ_ªtu∫
;

1379 i‡(
	`¥of_dump_¥ötf
(
¥›ag©e_îr
,

1381 "Å*: %"
FMTu64
": %"FMTu64" [%"FMTu64": %"FMTu64"]\n",

1382 
g˘x
->
˙t_summed
.
curobjs
, g˘x->˙t_summed.
curbyãs
,

1383 
g˘x
->
˙t_summed
.
accumobjs
, g˘x->˙t_summed.
accumbyãs
)) {

1384 
ªt
 = 
åue
;

1385 
œbñ_ªtu∫
;

1388 
¥of_t˘x_dump_ôî_¨g
.
tsdn
 =Åsdn;

1389 
¥of_t˘x_dump_ôî_¨g
.
¥›ag©e_îr
 =Öropagate_err;

1390 i‡(
	`t˘x_åì_ôî
(&
g˘x
->
t˘xs
, 
NULL
, 
¥of_t˘x_dump_ôî
,

1391 (*)&
¥of_t˘x_dump_ôî_¨g
Ë!
NULL
) {

1392 
ªt
 = 
åue
;

1393 
œbñ_ªtu∫
;

1396 
ªt
 = 
Ál£
;

1397 
œbñ_ªtu∫
:

1398  
ªt
;

1399 
	}
}

1401 #i‚de‡
_WIN32


1402 
	$JEMALLOC_FORMAT_PRINTF
(1, 2)

1404 
	$¥of_›í_m≠s
(c⁄° *
f‹m©
, ...) {

1405 
mfd
;

1406 
va_li°
 
≠
;

1407 
fûíame
[
PATH_MAX
 + 1];

1409 
	`va_°¨t
(
≠
, 
f‹m©
);

1410 
	`mÆloc_v¢¥ötf
(
fûíame
, (fûíame), 
f‹m©
, 
≠
);

1411 
	`va_íd
(
≠
);

1413 #i‡
	`deföed
(
O_CLOEXEC
)

1414 
mfd
 = 
	`›í
(
fûíame
, 
O_RDONLY
 | 
O_CLOEXEC
);

1416 
mfd
 = 
	`›í
(
fûíame
, 
O_RDONLY
);

1417 i‡(
mfd
 != -1) {

1418 
	`f˙é
(
mfd
, 
F_SETFD
, f˙é(mfd, 
F_GETFD
Ë| 
FD_CLOEXEC
);

1422  
mfd
;

1423 
	}
}

1427 
	$¥of_gëpid
() {

1428 #ifde‡
_WIN32


1429  
	`GëCuºítPro˚ssId
();

1431  
	`gëpid
();

1433 
	}
}

1435 
boﬁ


1436 
	$¥of_dump_m≠s
(
boﬁ
 
¥›ag©e_îr
) {

1437 
boﬁ
 
ªt
;

1438 
mfd
;

1440 
	`ˇs£π
(
c⁄fig_¥of
);

1441 #ifde‡
__FªeBSD__


1442 
mfd
 = 
	`¥of_›í_m≠s
("/proc/curproc/map");

1443 #ñi‡
	`deföed
(
_WIN32
)

1444 
mfd
 = -1;

1447 
pid
 = 
	`¥of_gëpid
();

1449 
mfd
 = 
	`¥of_›í_m≠s
("/¥oc/%d/èsk/%d/m≠s", 
pid
,Öid);

1450 i‡(
mfd
 == -1) {

1451 
mfd
 = 
	`¥of_›í_m≠s
("/¥oc/%d/m≠s", 
pid
);

1455 i‡(
mfd
 != -1) {

1456 
ssize_t
 
ƒód
;

1458 i‡(
	`¥of_dump_wrôe
(
¥›ag©e_îr
, "\nMAPPED_LIBRARIES:\n") &&

1459 
¥›ag©e_îr
) {

1460 
ªt
 = 
åue
;

1461 
œbñ_ªtu∫
;

1463 
ƒód
 = 0;

1465 
¥of_dump_buf_íd
 +
ƒód
;

1466 i‡(
¥of_dump_buf_íd
 =
PROF_DUMP_BUFSIZE
) {

1468 i‡(
	`¥of_dump_Êush
(
¥›ag©e_îr
) &&

1469 
¥›ag©e_îr
) {

1470 
ªt
 = 
åue
;

1471 
œbñ_ªtu∫
;

1474 
ƒód
 = 
	`ªad
(
mfd
, &
¥of_dump_buf
[
¥of_dump_buf_íd
],

1475 
PROF_DUMP_BUFSIZE
 - 
¥of_dump_buf_íd
);

1476 } 
ƒód
 > 0);

1478 
ªt
 = 
åue
;

1479 
œbñ_ªtu∫
;

1482 
ªt
 = 
Ál£
;

1483 
œbñ_ªtu∫
:

1484 i‡(
mfd
 != -1) {

1485 
	`˛o£
(
mfd
);

1487  
ªt
;

1488 
	}
}

1495 
	$¥of_Àakcheck
(c⁄° 
¥of_˙t_t
 *
˙t_Æl
, 
size_t
 
Àak_ng˘x
,

1496 c⁄° *
fûíame
) {

1497 #ifde‡
JEMALLOC_PROF


1504 i‡(
˙t_Æl
->
curbyãs
 != 0) {

1505 
ßm∂e_≥riod
 = ()((
uöt64_t
)1 << 
lg_¥of_ßm∂e
);

1506 
øtio
 = ((()
˙t_Æl
->
curbyãs
) /

1507 ()
˙t_Æl
->
curobjs
Ë/ 
ßm∂e_≥riod
;

1508 
sˇÀ_Á˘‹
 = 1.0 / (1.0 - 
	`exp
(-
øtio
));

1509 
uöt64_t
 
curbyãs
 = (uöt64_t)
	`round
((()
˙t_Æl
->curbytes)

1510 * 
sˇÀ_Á˘‹
);

1511 
uöt64_t
 
curobjs
 = (uöt64_t)
	`round
((()
˙t_Æl
->curobjs) *

1512 
sˇÀ_Á˘‹
);

1514 
	`mÆloc_¥ötf
("<jemÆloc>: Lókáµroxim©i⁄ summ¨y: ~%"
FMTu64


1515 " byã%s, ~%"
FMTu64
" object%s, >= %zu context%s\n",

1516 
curbyãs
, (curbyã†!1Ë? "s" : "", 
curobjs
, (curobjs !=

1517 1Ë? "s" : "", 
Àak_ng˘x
, (leak_ngctx != 1) ? "s" : "");

1518 
	`mÆloc_¥ötf
(

1520 
fûíame
);

1523 
	}
}

1525 
	s¥of_g˘x_dump_ôî_¨g_s
 {

1526 
tsdn_t
 *
	mtsdn
;

1527 
boﬁ
 
	m¥›ag©e_îr
;

1530 
¥of_g˘x_t
 *

1531 
	$¥of_g˘x_dump_ôî
(
¥of_g˘x_åì_t
 *
g˘xs
, 
¥of_g˘x_t
 *
g˘x
, *
›aque
) {

1532 
¥of_g˘x_t
 *
ªt
;

1533 
¥of_g˘x_dump_ôî_¨g_s
 *
¨g
 =

1534 (
¥of_g˘x_dump_ôî_¨g_s
 *)
›aque
;

1536 
	`mÆloc_muãx_lock
(
¨g
->
tsdn
, 
g˘x
->
lock
);

1538 i‡(
	`¥of_dump_g˘x
(
¨g
->
tsdn
,árg->
¥›ag©e_îr
, 
g˘x
, &g˘x->
bt
,

1539 
g˘xs
)) {

1540 
ªt
 = 
g˘x
;

1541 
œbñ_ªtu∫
;

1544 
ªt
 = 
NULL
;

1545 
œbñ_ªtu∫
:

1546 
	`mÆloc_muãx_u∆ock
(
¨g
->
tsdn
, 
g˘x
->
lock
);

1547  
ªt
;

1548 
	}
}

1551 
	$¥of_dump_¥ï
(
tsd_t
 *
tsd
, 
¥of_td©a_t
 *
td©a
,

1552 
¥of_td©a_mîge_ôî_¨g_s
 *
¥of_td©a_mîge_ôî_¨g
,

1553 
¥of_g˘x_mîge_ôî_¨g_s
 *
¥of_g˘x_mîge_ôî_¨g
,

1554 
¥of_g˘x_åì_t
 *
g˘xs
) {

1555 
size_t
 
èböd
;

1557 
¥of_g˘x_t
 *
p
;

1558 *
v
;

1559 } 
g˘x
;

1561 
	`¥of_íãr
(
tsd
, 
td©a
);

1567 
	`g˘x_åì_√w
(
g˘xs
);

1568 
èböd
 = 0; !
	`ckh_ôî
(&
bt2g˘x
, &èböd, 
NULL
, &
g˘x
.
v
);) {

1569 
	`¥of_dump_g˘x_¥ï
(
	`tsd_tsdn
(
tsd
), 
g˘x
.
p
, 
g˘xs
);

1576 
¥of_td©a_mîge_ôî_¨g
->
tsdn
 = 
	`tsd_tsdn
(
tsd
);

1577 
	`mem£t
(&
¥of_td©a_mîge_ôî_¨g
->
˙t_Æl
, 0, (
¥of_˙t_t
));

1578 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
td©as_mtx
);

1579 
	`td©a_åì_ôî
(&
td©as
, 
NULL
, 
¥of_td©a_mîge_ôî
,

1580 (*)
¥of_td©a_mîge_ôî_¨g
);

1581 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
td©as_mtx
);

1584 
¥of_g˘x_mîge_ôî_¨g
->
tsdn
 = 
	`tsd_tsdn
(
tsd
);

1585 
¥of_g˘x_mîge_ôî_¨g
->
Àak_ng˘x
 = 0;

1586 
	`g˘x_åì_ôî
(
g˘xs
, 
NULL
, 
¥of_g˘x_mîge_ôî
,

1587 (*)
¥of_g˘x_mîge_ôî_¨g
);

1589 
	`¥of_Àave
(
tsd
, 
td©a
);

1590 
	}
}

1592 
boﬁ


1593 
	$¥of_dump_fûe
(
tsd_t
 *
tsd
, 
boﬁ
 
¥›ag©e_îr
, c⁄° *
fûíame
,

1594 
boﬁ
 
Àakcheck
, 
¥of_td©a_t
 *
td©a
,

1595 
¥of_td©a_mîge_ôî_¨g_s
 *
¥of_td©a_mîge_ôî_¨g
,

1596 
¥of_g˘x_mîge_ôî_¨g_s
 *
¥of_g˘x_mîge_ôî_¨g
,

1597 
¥of_g˘x_dump_ôî_¨g_s
 *
¥of_g˘x_dump_ôî_¨g
,

1598 
¥of_g˘x_åì_t
 *
g˘xs
) {

1600 i‡((
¥of_dump_fd
 = 
	`¥of_dump_›í
(
¥›ag©e_îr
, 
fûíame
)) == -1) {

1601  
åue
;

1605 i‡(
	`¥of_dump_hódî
(
	`tsd_tsdn
(
tsd
), 
¥›ag©e_îr
,

1606 &
¥of_td©a_mîge_ôî_¨g
->
˙t_Æl
)) {

1607 
œbñ_wrôe_îr‹
;

1611 
¥of_g˘x_dump_ôî_¨g
->
tsdn
 = 
	`tsd_tsdn
(
tsd
);

1612 
¥of_g˘x_dump_ôî_¨g
->
¥›ag©e_îr
 =Öropagate_err;

1613 i‡(
	`g˘x_åì_ôî
(
g˘xs
, 
NULL
, 
¥of_g˘x_dump_ôî
,

1614 (*)
¥of_g˘x_dump_ôî_¨g
Ë!
NULL
) {

1615 
œbñ_wrôe_îr‹
;

1619 i‡(
	`¥of_dump_m≠s
(
¥›ag©e_îr
)) {

1620 
œbñ_wrôe_îr‹
;

1623 i‡(
	`¥of_dump_˛o£
(
¥›ag©e_îr
)) {

1624  
åue
;

1627  
Ál£
;

1628 
œbñ_wrôe_îr‹
:

1629 
	`¥of_dump_˛o£
(
¥›ag©e_îr
);

1630  
åue
;

1631 
	}
}

1633 
boﬁ


1634 
	$¥of_dump
(
tsd_t
 *
tsd
, 
boﬁ
 
¥›ag©e_îr
, c⁄° *
fûíame
,

1635 
boﬁ
 
Àakcheck
) {

1636 
	`ˇs£π
(
c⁄fig_¥of
);

1637 
	`as£π
(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) == 0);

1639 
¥of_td©a_t
 * 
td©a
 = 
	`¥of_td©a_gë
(
tsd
, 
åue
);

1640 i‡(
td©a
 =
NULL
) {

1641  
åue
;

1644 
	`¥e_ªíå™cy
(
tsd
, 
NULL
);

1645 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
¥of_dump_mtx
);

1647 
¥of_g˘x_åì_t
 
g˘xs
;

1648 
¥of_td©a_mîge_ôî_¨g_s
 
¥of_td©a_mîge_ôî_¨g
;

1649 
¥of_g˘x_mîge_ôî_¨g_s
 
¥of_g˘x_mîge_ôî_¨g
;

1650 
¥of_g˘x_dump_ôî_¨g_s
 
¥of_g˘x_dump_ôî_¨g
;

1651 
	`¥of_dump_¥ï
(
tsd
, 
td©a
, &
¥of_td©a_mîge_ôî_¨g
,

1652 &
¥of_g˘x_mîge_ôî_¨g
, &
g˘xs
);

1653 
boﬁ
 
îr
 = 
	`¥of_dump_fûe
(
tsd
, 
¥›ag©e_îr
, 
fûíame
, 
Àakcheck
, 
td©a
,

1654 &
¥of_td©a_mîge_ôî_¨g
, &
¥of_g˘x_mîge_ôî_¨g
,

1655 &
¥of_g˘x_dump_ôî_¨g
, &
g˘xs
);

1656 
	`¥of_g˘x_föish
(
tsd
, &
g˘xs
);

1658 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
¥of_dump_mtx
);

1659 
	`po°_ªíå™cy
(
tsd
);

1661 i‡(
îr
) {

1662  
åue
;

1665 i‡(
Àakcheck
) {

1666 
	`¥of_Àakcheck
(&
¥of_td©a_mîge_ôî_¨g
.
˙t_Æl
,

1667 
¥of_g˘x_mîge_ôî_¨g
.
Àak_ng˘x
, 
fûíame
);

1669  
Ál£
;

1670 
	}
}

1672 #ifde‡
JEMALLOC_JET


1674 
	$¥of_˙t_Æl
(
uöt64_t
 *
curobjs
, uöt64_à*
curbyãs
, uöt64_à*
accumobjs
,

1675 
uöt64_t
 *
accumbyãs
) {

1676 
tsd_t
 *
tsd
;

1677 
¥of_td©a_t
 *
td©a
;

1678 
¥of_td©a_mîge_ôî_¨g_s
 
¥of_td©a_mîge_ôî_¨g
;

1679 
¥of_g˘x_mîge_ôî_¨g_s
 
¥of_g˘x_mîge_ôî_¨g
;

1680 
¥of_g˘x_åì_t
 
g˘xs
;

1682 
tsd
 = 
	`tsd_„tch
();

1683 
td©a
 = 
	`¥of_td©a_gë
(
tsd
, 
Ál£
);

1684 i‡(
td©a
 =
NULL
) {

1685 i‡(
curobjs
 !
NULL
) {

1686 *
curobjs
 = 0;

1688 i‡(
curbyãs
 !
NULL
) {

1689 *
curbyãs
 = 0;

1691 i‡(
accumobjs
 !
NULL
) {

1692 *
accumobjs
 = 0;

1694 i‡(
accumbyãs
 !
NULL
) {

1695 *
accumbyãs
 = 0;

1700 
	`¥of_dump_¥ï
(
tsd
, 
td©a
, &
¥of_td©a_mîge_ôî_¨g
,

1701 &
¥of_g˘x_mîge_ôî_¨g
, &
g˘xs
);

1702 
	`¥of_g˘x_föish
(
tsd
, &
g˘xs
);

1704 i‡(
curobjs
 !
NULL
) {

1705 *
curobjs
 = 
¥of_td©a_mîge_ôî_¨g
.
˙t_Æl
.curobjs;

1707 i‡(
curbyãs
 !
NULL
) {

1708 *
curbyãs
 = 
¥of_td©a_mîge_ôî_¨g
.
˙t_Æl
.curbytes;

1710 i‡(
accumobjs
 !
NULL
) {

1711 *
accumobjs
 = 
¥of_td©a_mîge_ôî_¨g
.
˙t_Æl
.accumobjs;

1713 i‡(
accumbyãs
 !
NULL
) {

1714 *
accumbyãs
 = 
¥of_td©a_mîge_ôî_¨g
.
˙t_Æl
.accumbytes;

1716 
	}
}

1719 
	#DUMP_FILENAME_BUFSIZE
 (
PATH_MAX
 + 1)

	)

1720 
	#VSEQ_INVALID
 
	`UINT64_C
(0xffffffffffffffff)

	)

1722 
	$¥of_dump_fûíame
(*
fûíame
, 
v
, 
uöt64_t
 
v£q
) {

1723 
	`ˇs£π
(
c⁄fig_¥of
);

1725 i‡(
v£q
 !
VSEQ_INVALID
) {

1727 
	`mÆloc_¢¥ötf
(
fûíame
, 
DUMP_FILENAME_BUFSIZE
,

1728 "%s.%d.%"
FMTu64
".%c%"FMTu64".heap",

1729 
›t_¥of_¥efix
, 
	`¥of_gëpid
(), 
¥of_dump_£q
, 
v
, 
v£q
);

1732 
	`mÆloc_¢¥ötf
(
fûíame
, 
DUMP_FILENAME_BUFSIZE
,

1733 "%s.%d.%"
FMTu64
".%c.heap",

1734 
›t_¥of_¥efix
, 
	`¥of_gëpid
(), 
¥of_dump_£q
, 
v
);

1736 
¥of_dump_£q
++;

1737 
	}
}

1740 
	$¥of_fdump
() {

1741 
tsd_t
 *
tsd
;

1742 
fûíame
[
DUMP_FILENAME_BUFSIZE
];

1744 
	`ˇs£π
(
c⁄fig_¥of
);

1745 
	`as£π
(
›t_¥of_föÆ
);

1746 
	`as£π
(
›t_¥of_¥efix
[0] != '\0');

1748 i‡(!
¥of_boŸed
) {

1751 
tsd
 = 
	`tsd_„tch
();

1752 
	`as£π
(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) == 0);

1754 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
¥of_dump_£q_mtx
);

1755 
	`¥of_dump_fûíame
(
fûíame
, 'f', 
VSEQ_INVALID
);

1756 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
¥of_dump_£q_mtx
);

1757 
	`¥of_dump
(
tsd
, 
Ál£
, 
fûíame
, 
›t_¥of_Àak
);

1758 
	}
}

1760 
boﬁ


1761 
	$¥of_accum_öô
(
tsdn_t
 *
tsdn
, 
¥of_accum_t
 *
¥of_accum
) {

1762 
	`ˇs£π
(
c⁄fig_¥of
);

1764 #i‚de‡
JEMALLOC_ATOMIC_U64


1765 i‡(
	`mÆloc_muãx_öô
(&
¥of_accum
->
mtx
, "prof_accum",

1766 
WITNESS_RANK_PROF_ACCUM
, 
mÆloc_muãx_ønk_ex˛usive
)) {

1767  
åue
;

1769 
¥of_accum
->
accumbyãs
 = 0;

1771 
	`©omic_°‹e_u64
(&
¥of_accum
->
accumbyãs
, 0, 
ATOMIC_RELAXED
);

1773  
Ál£
;

1774 
	}
}

1777 
	$¥of_idump
(
tsdn_t
 *
tsdn
) {

1778 
tsd_t
 *
tsd
;

1779 
¥of_td©a_t
 *
td©a
;

1781 
	`ˇs£π
(
c⁄fig_¥of
);

1783 i‡(!
¥of_boŸed
 || 
	`tsdn_nuŒ
(
tsdn
)) {

1786 
tsd
 = 
	`tsdn_tsd
(
tsdn
);

1787 i‡(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) > 0) {

1791 
td©a
 = 
	`¥of_td©a_gë
(
tsd
, 
Ál£
);

1792 i‡(
td©a
 =
NULL
) {

1795 i‡(
td©a
->
íq
) {

1796 
td©a
->
íq_idump
 = 
åue
;

1800 i‡(
›t_¥of_¥efix
[0] != '\0') {

1801 
fûíame
[
PATH_MAX
 + 1];

1802 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
¥of_dump_£q_mtx
);

1803 
	`¥of_dump_fûíame
(
fûíame
, 'i', 
¥of_dump_i£q
);

1804 
¥of_dump_i£q
++;

1805 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
¥of_dump_£q_mtx
);

1806 
	`¥of_dump
(
tsd
, 
Ál£
, 
fûíame
, false);

1808 
	}
}

1810 
boﬁ


1811 
	$¥of_mdump
(
tsd_t
 *
tsd
, c⁄° *
fûíame
) {

1812 
	`ˇs£π
(
c⁄fig_¥of
);

1813 
	`as£π
(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) == 0);

1815 i‡(!
›t_¥of
 || !
¥of_boŸed
) {

1816  
åue
;

1818 
fûíame_buf
[
DUMP_FILENAME_BUFSIZE
];

1819 i‡(
fûíame
 =
NULL
) {

1821 i‡(
›t_¥of_¥efix
[0] == '\0') {

1822  
åue
;

1824 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
¥of_dump_£q_mtx
);

1825 
	`¥of_dump_fûíame
(
fûíame_buf
, 'm', 
¥of_dump_m£q
);

1826 
¥of_dump_m£q
++;

1827 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
¥of_dump_£q_mtx
);

1828 
fûíame
 = 
fûíame_buf
;

1830  
	`¥of_dump
(
tsd
, 
åue
, 
fûíame
, 
Ál£
);

1831 
	}
}

1834 
	$¥of_gdump
(
tsdn_t
 *
tsdn
) {

1835 
tsd_t
 *
tsd
;

1836 
¥of_td©a_t
 *
td©a
;

1838 
	`ˇs£π
(
c⁄fig_¥of
);

1840 i‡(!
¥of_boŸed
 || 
	`tsdn_nuŒ
(
tsdn
)) {

1843 
tsd
 = 
	`tsdn_tsd
(
tsdn
);

1844 i‡(
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) > 0) {

1848 
td©a
 = 
	`¥of_td©a_gë
(
tsd
, 
Ál£
);

1849 i‡(
td©a
 =
NULL
) {

1852 i‡(
td©a
->
íq
) {

1853 
td©a
->
íq_gdump
 = 
åue
;

1857 i‡(
›t_¥of_¥efix
[0] != '\0') {

1858 
fûíame
[
DUMP_FILENAME_BUFSIZE
];

1859 
	`mÆloc_muãx_lock
(
tsdn
, &
¥of_dump_£q_mtx
);

1860 
	`¥of_dump_fûíame
(
fûíame
, 'u', 
¥of_dump_u£q
);

1861 
¥of_dump_u£q
++;

1862 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¥of_dump_£q_mtx
);

1863 
	`¥of_dump
(
tsd
, 
Ál£
, 
fûíame
, false);

1865 
	}
}

1868 
	$¥of_bt_hash
(c⁄° *
key
, 
size_t
 
r_hash
[2]) {

1869 
¥of_bt_t
 *
bt
 = (¥of_bt_à*)
key
;

1871 
	`ˇs£π
(
c⁄fig_¥of
);

1873 
	`hash
(
bt
->
vec
, bt->
Àn
 * (*), 0x94122f33U, 
r_hash
);

1874 
	}
}

1876 
boﬁ


1877 
	$¥of_bt_keycomp
(c⁄° *
k1
, c⁄° *
k2
) {

1878 c⁄° 
¥of_bt_t
 *
bt1
 = (¥of_bt_à*)
k1
;

1879 c⁄° 
¥of_bt_t
 *
bt2
 = (¥of_bt_à*)
k2
;

1881 
	`ˇs£π
(
c⁄fig_¥of
);

1883 i‡(
bt1
->
Àn
 !
bt2
->len) {

1884  
Ál£
;

1886  (
	`memcmp
(
bt1
->
vec
, 
bt2
->vec, bt1->
Àn
 * (*)) == 0);

1887 
	}
}

1889 
uöt64_t


1890 
	$¥of_thr_uid_Æloc
(
tsdn_t
 *
tsdn
) {

1891 
uöt64_t
 
thr_uid
;

1893 
	`mÆloc_muãx_lock
(
tsdn
, &
√xt_thr_uid_mtx
);

1894 
thr_uid
 = 
√xt_thr_uid
;

1895 
√xt_thr_uid
++;

1896 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
√xt_thr_uid_mtx
);

1898  
thr_uid
;

1899 
	}
}

1901 
¥of_td©a_t
 *

1902 
	$¥of_td©a_öô_im∂
(
tsd_t
 *
tsd
, 
uöt64_t
 
thr_uid
, uöt64_à
thr_dis¸im
,

1903 *
thªad_«me
, 
boﬁ
 
a˘ive
) {

1904 
¥of_td©a_t
 *
td©a
;

1906 
	`ˇs£π
(
c⁄fig_¥of
);

1909 
td©a
 = (
¥of_td©a_t
 *)
	`üŒocztm
(
	`tsd_tsdn
(
tsd
), (prof_tdata_t),

1910 
	`sz_size2ödex
((
¥of_td©a_t
)), 
Ál£
, 
NULL
, 
åue
,

1911 
	`¨ía_gë
(
TSDN_NULL
, 0, 
åue
),Årue);

1912 i‡(
td©a
 =
NULL
) {

1913  
NULL
;

1916 
td©a
->
lock
 = 
	`¥of_td©a_muãx_choo£
(
thr_uid
);

1917 
td©a
->
thr_uid
 =Åhr_uid;

1918 
td©a
->
thr_dis¸im
 =Åhr_discrim;

1919 
td©a
->
thªad_«me
 =Åhread_name;

1920 
td©a
->
©èched
 = 
åue
;

1921 
td©a
->
expúed
 = 
Ál£
;

1922 
td©a
->
t˘x_uid_√xt
 = 0;

1924 i‡(
	`ckh_√w
(
tsd
, &
td©a
->
bt2t˘x
, 
PROF_CKH_MINITEMS
, 
¥of_bt_hash
,

1925 
¥of_bt_keycomp
)) {

1926 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
td©a
, 
NULL
, NULL, 
åue
,Årue);

1927  
NULL
;

1930 
td©a
->
¥ng_°©e
 = (
uöt64_t
)(
uöçå_t
)tdata;

1931 
	`¥of_ßm∂e_thªshﬁd_upd©e
(
td©a
);

1933 
td©a
->
íq
 = 
Ál£
;

1934 
td©a
->
íq_idump
 = 
Ál£
;

1935 
td©a
->
íq_gdump
 = 
Ál£
;

1937 
td©a
->
dumpög
 = 
Ál£
;

1938 
td©a
->
a˘ive
 =áctive;

1940 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
td©as_mtx
);

1941 
	`td©a_åì_ö£π
(&
td©as
, 
td©a
);

1942 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
td©as_mtx
);

1944  
td©a
;

1945 
	}
}

1947 
¥of_td©a_t
 *

1948 
	$¥of_td©a_öô
(
tsd_t
 *
tsd
) {

1949  
	`¥of_td©a_öô_im∂
(
tsd
, 
	`¥of_thr_uid_Æloc
(
	`tsd_tsdn
(tsd)), 0,

1950 
NULL
, 
	`¥of_thªad_a˘ive_öô_gë
(
	`tsd_tsdn
(
tsd
)));

1951 
	}
}

1953 
boﬁ


1954 
	$¥of_td©a_should_de°roy_u∆ocked
(
¥of_td©a_t
 *
td©a
, 
boﬁ
 
eví_if_©èched
) {

1955 i‡(
td©a
->
©èched
 && !
eví_if_©èched
) {

1956  
Ál£
;

1958 i‡(
	`ckh_cou¡
(&
td©a
->
bt2t˘x
) != 0) {

1959  
Ál£
;

1961  
åue
;

1962 
	}
}

1964 
boﬁ


1965 
	$¥of_td©a_should_de°roy
(
tsdn_t
 *
tsdn
, 
¥of_td©a_t
 *
td©a
,

1966 
boﬁ
 
eví_if_©èched
) {

1967 
	`mÆloc_muãx_as£π_ow√r
(
tsdn
, 
td©a
->
lock
);

1969  
	`¥of_td©a_should_de°roy_u∆ocked
(
td©a
, 
eví_if_©èched
);

1970 
	}
}

1973 
	$¥of_td©a_de°roy_locked
(
tsd_t
 *
tsd
, 
¥of_td©a_t
 *
td©a
,

1974 
boﬁ
 
eví_if_©èched
) {

1975 
	`mÆloc_muãx_as£π_ow√r
(
	`tsd_tsdn
(
tsd
), &
td©as_mtx
);

1977 
	`td©a_åì_ªmove
(&
td©as
, 
td©a
);

1979 
	`as£π
(
	`¥of_td©a_should_de°roy_u∆ocked
(
td©a
, 
eví_if_©èched
));

1981 i‡(
td©a
->
thªad_«me
 !
NULL
) {

1982 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
td©a
->
thªad_«me
, 
NULL
, NULL, 
åue
,

1983 
åue
);

1985 
	`ckh_dñëe
(
tsd
, &
td©a
->
bt2t˘x
);

1986 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
td©a
, 
NULL
, NULL, 
åue
,Årue);

1987 
	}
}

1990 
	$¥of_td©a_de°roy
(
tsd_t
 *
tsd
, 
¥of_td©a_t
 *
td©a
, 
boﬁ
 
eví_if_©èched
) {

1991 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
td©as_mtx
);

1992 
	`¥of_td©a_de°roy_locked
(
tsd
, 
td©a
, 
eví_if_©èched
);

1993 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
td©as_mtx
);

1994 
	}
}

1997 
	$¥of_td©a_dëach
(
tsd_t
 *
tsd
, 
¥of_td©a_t
 *
td©a
) {

1998 
boﬁ
 
de°roy_td©a
;

2000 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), 
td©a
->
lock
);

2001 i‡(
td©a
->
©èched
) {

2002 
de°roy_td©a
 = 
	`¥of_td©a_should_de°roy
(
	`tsd_tsdn
(
tsd
), 
td©a
,

2003 
åue
);

2008 i‡(!
de°roy_td©a
) {

2009 
td©a
->
©èched
 = 
Ál£
;

2011 
	`tsd_¥of_td©a_£t
(
tsd
, 
NULL
);

2013 
de°roy_td©a
 = 
Ál£
;

2015 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), 
td©a
->
lock
);

2016 i‡(
de°roy_td©a
) {

2017 
	`¥of_td©a_de°roy
(
tsd
, 
td©a
, 
åue
);

2019 
	}
}

2021 
¥of_td©a_t
 *

2022 
	$¥of_td©a_ªöô
(
tsd_t
 *
tsd
, 
¥of_td©a_t
 *
td©a
) {

2023 
uöt64_t
 
thr_uid
 = 
td©a
->thr_uid;

2024 
uöt64_t
 
thr_dis¸im
 = 
td©a
->thr_discrim + 1;

2025 *
thªad_«me
 = (
td©a
->thªad_«mê!
NULL
) ?

2026 
	`¥of_thªad_«me_Æloc
(
	`tsd_tsdn
(
tsd
), 
td©a
->
thªad_«me
Ë: 
NULL
;

2027 
boﬁ
 
a˘ive
 = 
td©a
->active;

2029 
	`¥of_td©a_dëach
(
tsd
, 
td©a
);

2030  
	`¥of_td©a_öô_im∂
(
tsd
, 
thr_uid
, 
thr_dis¸im
, 
thªad_«me
,

2031 
a˘ive
);

2032 
	}
}

2034 
boﬁ


2035 
	$¥of_td©a_expúe
(
tsdn_t
 *
tsdn
, 
¥of_td©a_t
 *
td©a
) {

2036 
boﬁ
 
de°roy_td©a
;

2038 
	`mÆloc_muãx_lock
(
tsdn
, 
td©a
->
lock
);

2039 i‡(!
td©a
->
expúed
) {

2040 
td©a
->
expúed
 = 
åue
;

2041 
de°roy_td©a
 = 
td©a
->
©èched
 ? 
Ál£
 :

2042 
	`¥of_td©a_should_de°roy
(
tsdn
, 
td©a
, 
Ál£
);

2044 
de°roy_td©a
 = 
Ál£
;

2046 
	`mÆloc_muãx_u∆ock
(
tsdn
, 
td©a
->
lock
);

2048  
de°roy_td©a
;

2049 
	}
}

2051 
¥of_td©a_t
 *

2052 
	$¥of_td©a_ª£t_ôî
(
¥of_td©a_åì_t
 *
td©as
, 
¥of_td©a_t
 *
td©a
,

2053 *
¨g
) {

2054 
tsdn_t
 *
tsdn
 = (tsdn_à*)
¨g
;

2056  (
	`¥of_td©a_expúe
(
tsdn
, 
td©a
Ë?Åd©®: 
NULL
);

2057 
	}
}

2060 
	$¥of_ª£t
(
tsd_t
 *
tsd
, 
size_t
 
lg_ßm∂e
) {

2061 
¥of_td©a_t
 *
√xt
;

2063 
	`as£π
(
lg_ßm∂e
 < ((
uöt64_t
) << 3));

2065 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
¥of_dump_mtx
);

2066 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
td©as_mtx
);

2068 
lg_¥of_ßm∂e
 = 
lg_ßm∂e
;

2070 
√xt
 = 
NULL
;

2072 
¥of_td©a_t
 *
to_de°roy
 = 
	`td©a_åì_ôî
(&
td©as
, 
√xt
,

2073 
¥of_td©a_ª£t_ôî
, (*)
tsd
);

2074 i‡(
to_de°roy
 !
NULL
) {

2075 
√xt
 = 
	`td©a_åì_√xt
(&
td©as
, 
to_de°roy
);

2076 
	`¥of_td©a_de°roy_locked
(
tsd
, 
to_de°roy
, 
Ál£
);

2078 
√xt
 = 
NULL
;

2080 } 
√xt
 !
NULL
);

2082 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
td©as_mtx
);

2083 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
¥of_dump_mtx
);

2084 
	}
}

2087 
	$¥of_td©a_˛ónup
(
tsd_t
 *
tsd
) {

2088 
¥of_td©a_t
 *
td©a
;

2090 i‡(!
c⁄fig_¥of
) {

2094 
td©a
 = 
	`tsd_¥of_td©a_gë
(
tsd
);

2095 i‡(
td©a
 !
NULL
) {

2096 
	`¥of_td©a_dëach
(
tsd
, 
td©a
);

2098 
	}
}

2100 
boﬁ


2101 
	$¥of_a˘ive_gë
(
tsdn_t
 *
tsdn
) {

2102 
boﬁ
 
¥of_a˘ive_cuºít
;

2104 
	`mÆloc_muãx_lock
(
tsdn
, &
¥of_a˘ive_mtx
);

2105 
¥of_a˘ive_cuºít
 = 
¥of_a˘ive
;

2106 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¥of_a˘ive_mtx
);

2107  
¥of_a˘ive_cuºít
;

2108 
	}
}

2110 
boﬁ


2111 
	$¥of_a˘ive_£t
(
tsdn_t
 *
tsdn
, 
boﬁ
 
a˘ive
) {

2112 
boﬁ
 
¥of_a˘ive_ﬁd
;

2114 
	`mÆloc_muãx_lock
(
tsdn
, &
¥of_a˘ive_mtx
);

2115 
¥of_a˘ive_ﬁd
 = 
¥of_a˘ive
;

2116 
¥of_a˘ive
 = 
a˘ive
;

2117 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¥of_a˘ive_mtx
);

2118  
¥of_a˘ive_ﬁd
;

2119 
	}
}

2122 
	$¥of_thªad_«me_gë
(
tsd_t
 *
tsd
) {

2123 
¥of_td©a_t
 *
td©a
;

2125 
td©a
 = 
	`¥of_td©a_gë
(
tsd
, 
åue
);

2126 i‡(
td©a
 =
NULL
) {

2129  (
td©a
->
thªad_«me
 !
NULL
 ?Ådata->thread_name : "");

2130 
	}
}

2133 
	$¥of_thªad_«me_Æloc
(
tsdn_t
 *
tsdn
, c⁄° *
thªad_«me
) {

2134 *
ªt
;

2135 
size_t
 
size
;

2137 i‡(
thªad_«me
 =
NULL
) {

2138  
NULL
;

2141 
size
 = 
	`°æí
(
thªad_«me
) + 1;

2142 i‡(
size
 == 1) {

2146 
ªt
 = 
	`üŒocztm
(
tsdn
, 
size
, 
	`sz_size2ödex
(size), 
Ál£
, 
NULL
, 
åue
,

2147 
	`¨ía_gë
(
TSDN_NULL
, 0, 
åue
),Årue);

2148 i‡(
ªt
 =
NULL
) {

2149  
NULL
;

2151 
	`mem˝y
(
ªt
, 
thªad_«me
, 
size
);

2152  
ªt
;

2153 
	}
}

2156 
	$¥of_thªad_«me_£t
(
tsd_t
 *
tsd
, c⁄° *
thªad_«me
) {

2157 
¥of_td©a_t
 *
td©a
;

2158 
i
;

2159 *
s
;

2161 
td©a
 = 
	`¥of_td©a_gë
(
tsd
, 
åue
);

2162 i‡(
td©a
 =
NULL
) {

2163  
EAGAIN
;

2167 i‡(
thªad_«me
 =
NULL
) {

2168  
EFAULT
;

2170 
i
 = 0; 
thªad_«me
[i] != '\0'; i++) {

2171 
c
 = 
thªad_«me
[
i
];

2172 i‡(!
	`isgøph
(
c
Ë&& !
	`isbœnk
(c)) {

2173  
EFAULT
;

2177 
s
 = 
	`¥of_thªad_«me_Æloc
(
	`tsd_tsdn
(
tsd
), 
thªad_«me
);

2178 i‡(
s
 =
NULL
) {

2179  
EAGAIN
;

2182 i‡(
td©a
->
thªad_«me
 !
NULL
) {

2183 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
td©a
->
thªad_«me
, 
NULL
, NULL, 
åue
,

2184 
åue
);

2185 
td©a
->
thªad_«me
 = 
NULL
;

2187 i‡(
	`°æí
(
s
) > 0) {

2188 
td©a
->
thªad_«me
 = 
s
;

2191 
	}
}

2193 
boﬁ


2194 
	$¥of_thªad_a˘ive_gë
(
tsd_t
 *
tsd
) {

2195 
¥of_td©a_t
 *
td©a
;

2197 
td©a
 = 
	`¥of_td©a_gë
(
tsd
, 
åue
);

2198 i‡(
td©a
 =
NULL
) {

2199  
Ál£
;

2201  
td©a
->
a˘ive
;

2202 
	}
}

2204 
boﬁ


2205 
	$¥of_thªad_a˘ive_£t
(
tsd_t
 *
tsd
, 
boﬁ
 
a˘ive
) {

2206 
¥of_td©a_t
 *
td©a
;

2208 
td©a
 = 
	`¥of_td©a_gë
(
tsd
, 
åue
);

2209 i‡(
td©a
 =
NULL
) {

2210  
åue
;

2212 
td©a
->
a˘ive
 =áctive;

2213  
Ál£
;

2214 
	}
}

2216 
boﬁ


2217 
	$¥of_thªad_a˘ive_öô_gë
(
tsdn_t
 *
tsdn
) {

2218 
boﬁ
 
a˘ive_öô
;

2220 
	`mÆloc_muãx_lock
(
tsdn
, &
¥of_thªad_a˘ive_öô_mtx
);

2221 
a˘ive_öô
 = 
¥of_thªad_a˘ive_öô
;

2222 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¥of_thªad_a˘ive_öô_mtx
);

2223  
a˘ive_öô
;

2224 
	}
}

2226 
boﬁ


2227 
	$¥of_thªad_a˘ive_öô_£t
(
tsdn_t
 *
tsdn
, 
boﬁ
 
a˘ive_öô
) {

2228 
boﬁ
 
a˘ive_öô_ﬁd
;

2230 
	`mÆloc_muãx_lock
(
tsdn
, &
¥of_thªad_a˘ive_öô_mtx
);

2231 
a˘ive_öô_ﬁd
 = 
¥of_thªad_a˘ive_öô
;

2232 
¥of_thªad_a˘ive_öô
 = 
a˘ive_öô
;

2233 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¥of_thªad_a˘ive_öô_mtx
);

2234  
a˘ive_öô_ﬁd
;

2235 
	}
}

2237 
boﬁ


2238 
	$¥of_gdump_gë
(
tsdn_t
 *
tsdn
) {

2239 
boﬁ
 
¥of_gdump_cuºít
;

2241 
	`mÆloc_muãx_lock
(
tsdn
, &
¥of_gdump_mtx
);

2242 
¥of_gdump_cuºít
 = 
¥of_gdump_vÆ
;

2243 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¥of_gdump_mtx
);

2244  
¥of_gdump_cuºít
;

2245 
	}
}

2247 
boﬁ


2248 
	$¥of_gdump_£t
(
tsdn_t
 *
tsdn
, 
boﬁ
 
gdump
) {

2249 
boﬁ
 
¥of_gdump_ﬁd
;

2251 
	`mÆloc_muãx_lock
(
tsdn
, &
¥of_gdump_mtx
);

2252 
¥of_gdump_ﬁd
 = 
¥of_gdump_vÆ
;

2253 
¥of_gdump_vÆ
 = 
gdump
;

2254 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¥of_gdump_mtx
);

2255  
¥of_gdump_ﬁd
;

2256 
	}
}

2259 
	$¥of_boŸ0
() {

2260 
	`ˇs£π
(
c⁄fig_¥of
);

2262 
	`mem˝y
(
›t_¥of_¥efix
, 
PROF_PREFIX_DEFAULT
,

2263 (
PROF_PREFIX_DEFAULT
));

2264 
	}
}

2267 
	$¥of_boŸ1
() {

2268 
	`ˇs£π
(
c⁄fig_¥of
);

2275 i‡(
›t_¥of_Àak
 && !
›t_¥of
) {

2280 
›t_¥of
 = 
åue
;

2281 
›t_¥of_gdump
 = 
Ál£
;

2282 } i‡(
›t_¥of
) {

2283 i‡(
›t_lg_¥of_öãrvÆ
 >= 0) {

2284 
¥of_öãrvÆ
 = (((
uöt64_t
)1U) <<

2285 
›t_lg_¥of_öãrvÆ
);

2288 
	}
}

2290 
boﬁ


2291 
	$¥of_boŸ2
(
tsd_t
 *
tsd
) {

2292 
	`ˇs£π
(
c⁄fig_¥of
);

2294 i‡(
›t_¥of
) {

2295 
i
;

2297 
lg_¥of_ßm∂e
 = 
›t_lg_¥of_ßm∂e
;

2299 
¥of_a˘ive
 = 
›t_¥of_a˘ive
;

2300 i‡(
	`mÆloc_muãx_öô
(&
¥of_a˘ive_mtx
, "prof_active",

2301 
WITNESS_RANK_PROF_ACTIVE
, 
mÆloc_muãx_ønk_ex˛usive
)) {

2302  
åue
;

2305 
¥of_gdump_vÆ
 = 
›t_¥of_gdump
;

2306 i‡(
	`mÆloc_muãx_öô
(&
¥of_gdump_mtx
, "prof_gdump",

2307 
WITNESS_RANK_PROF_GDUMP
, 
mÆloc_muãx_ønk_ex˛usive
)) {

2308  
åue
;

2311 
¥of_thªad_a˘ive_öô
 = 
›t_¥of_thªad_a˘ive_öô
;

2312 i‡(
	`mÆloc_muãx_öô
(&
¥of_thªad_a˘ive_öô_mtx
,

2314 
WITNESS_RANK_PROF_THREAD_ACTIVE_INIT
,

2315 
mÆloc_muãx_ønk_ex˛usive
)) {

2316  
åue
;

2319 i‡(
	`ckh_√w
(
tsd
, &
bt2g˘x
, 
PROF_CKH_MINITEMS
, 
¥of_bt_hash
,

2320 
¥of_bt_keycomp
)) {

2321  
åue
;

2323 i‡(
	`mÆloc_muãx_öô
(&
bt2g˘x_mtx
, "prof_bt2gctx",

2324 
WITNESS_RANK_PROF_BT2GCTX
, 
mÆloc_muãx_ønk_ex˛usive
)) {

2325  
åue
;

2328 
	`td©a_åì_√w
(&
td©as
);

2329 i‡(
	`mÆloc_muãx_öô
(&
td©as_mtx
, "prof_tdatas",

2330 
WITNESS_RANK_PROF_TDATAS
, 
mÆloc_muãx_ønk_ex˛usive
)) {

2331  
åue
;

2334 
√xt_thr_uid
 = 0;

2335 i‡(
	`mÆloc_muãx_öô
(&
√xt_thr_uid_mtx
, "prof_next_thr_uid",

2336 
WITNESS_RANK_PROF_NEXT_THR_UID
, 
mÆloc_muãx_ønk_ex˛usive
)) {

2337  
åue
;

2340 i‡(
	`mÆloc_muãx_öô
(&
¥of_dump_£q_mtx
, "prof_dump_seq",

2341 
WITNESS_RANK_PROF_DUMP_SEQ
, 
mÆloc_muãx_ønk_ex˛usive
)) {

2342  
åue
;

2344 i‡(
	`mÆloc_muãx_öô
(&
¥of_dump_mtx
, "prof_dump",

2345 
WITNESS_RANK_PROF_DUMP
, 
mÆloc_muãx_ønk_ex˛usive
)) {

2346  
åue
;

2349 i‡(
›t_¥of_föÆ
 && 
›t_¥of_¥efix
[0] != '\0' &&

2350 
	`©exô
(
¥of_fdump
) != 0) {

2351 
	`mÆloc_wrôe
("<jemalloc>: Error inátexit()\n");

2352 i‡(
›t_ab‹t
) {

2353 
	`ab‹t
();

2357 
g˘x_locks
 = (
mÆloc_muãx_t
 *)
	`ba£_Æloc
(
	`tsd_tsdn
(
tsd
),

2358 
	`b0gë
(), 
PROF_NCTX_LOCKS
 * (
mÆloc_muãx_t
),

2359 
CACHELINE
);

2360 i‡(
g˘x_locks
 =
NULL
) {

2361  
åue
;

2363 
i
 = 0; i < 
PROF_NCTX_LOCKS
; i++) {

2364 i‡(
	`mÆloc_muãx_öô
(&
g˘x_locks
[
i
], "prof_gctx",

2365 
WITNESS_RANK_PROF_GCTX
,

2366 
mÆloc_muãx_ønk_ex˛usive
)) {

2367  
åue
;

2371 
td©a_locks
 = (
mÆloc_muãx_t
 *)
	`ba£_Æloc
(
	`tsd_tsdn
(
tsd
),

2372 
	`b0gë
(), 
PROF_NTDATA_LOCKS
 * (
mÆloc_muãx_t
),

2373 
CACHELINE
);

2374 i‡(
td©a_locks
 =
NULL
) {

2375  
åue
;

2377 
i
 = 0; i < 
PROF_NTDATA_LOCKS
; i++) {

2378 i‡(
	`mÆloc_muãx_öô
(&
td©a_locks
[
i
], "prof_tdata",

2379 
WITNESS_RANK_PROF_TDATA
,

2380 
mÆloc_muãx_ønk_ex˛usive
)) {

2381  
åue
;

2386 #ifde‡
JEMALLOC_PROF_LIBGCC


2391 
	`_Unwöd_Backåa˚
(
¥of_unwöd_öô_ˇŒback
, 
NULL
);

2394 
¥of_boŸed
 = 
åue
;

2396  
Ál£
;

2397 
	}
}

2400 
	$¥of_¥ef‹k0
(
tsdn_t
 *
tsdn
) {

2401 i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

2402 
i
;

2404 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
¥of_dump_mtx
);

2405 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
bt2g˘x_mtx
);

2406 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
td©as_mtx
);

2407 
i
 = 0; i < 
PROF_NTDATA_LOCKS
; i++) {

2408 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
td©a_locks
[
i
]);

2410 
i
 = 0; i < 
PROF_NCTX_LOCKS
; i++) {

2411 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
g˘x_locks
[
i
]);

2414 
	}
}

2417 
	$¥of_¥ef‹k1
(
tsdn_t
 *
tsdn
) {

2418 i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

2419 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
¥of_a˘ive_mtx
);

2420 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
¥of_dump_£q_mtx
);

2421 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
¥of_gdump_mtx
);

2422 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
√xt_thr_uid_mtx
);

2423 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
¥of_thªad_a˘ive_öô_mtx
);

2425 
	}
}

2428 
	$¥of_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
) {

2429 i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

2430 
i
;

2432 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
,

2433 &
¥of_thªad_a˘ive_öô_mtx
);

2434 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
√xt_thr_uid_mtx
);

2435 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
¥of_gdump_mtx
);

2436 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
¥of_dump_£q_mtx
);

2437 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
¥of_a˘ive_mtx
);

2438 
i
 = 0; i < 
PROF_NCTX_LOCKS
; i++) {

2439 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
g˘x_locks
[
i
]);

2441 
i
 = 0; i < 
PROF_NTDATA_LOCKS
; i++) {

2442 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
td©a_locks
[
i
]);

2444 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
td©as_mtx
);

2445 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
bt2g˘x_mtx
);

2446 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
¥of_dump_mtx
);

2448 
	}
}

2451 
	$¥of_po°f‹k_chûd
(
tsdn_t
 *
tsdn
) {

2452 i‡(
c⁄fig_¥of
 && 
›t_¥of
) {

2453 
i
;

2455 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
¥of_thªad_a˘ive_öô_mtx
);

2456 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
√xt_thr_uid_mtx
);

2457 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
¥of_gdump_mtx
);

2458 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
¥of_dump_£q_mtx
);

2459 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
¥of_a˘ive_mtx
);

2460 
i
 = 0; i < 
PROF_NCTX_LOCKS
; i++) {

2461 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
g˘x_locks
[
i
]);

2463 
i
 = 0; i < 
PROF_NTDATA_LOCKS
; i++) {

2464 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
td©a_locks
[
i
]);

2466 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
td©as_mtx
);

2467 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
bt2g˘x_mtx
);

2468 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
¥of_dump_mtx
);

2470 
	}
}

	@src/rtree.c

1 
	#JEMALLOC_RTREE_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/muãx.h
"

12 
boﬁ


13 
	$πªe_√w
(
πªe_t
 *
πªe
, 
boﬁ
 
zî€d
) {

14 #ifde‡
JEMALLOC_JET


15 i‡(!
zî€d
) {

16 
	`mem£t
(
πªe
, 0, (
πªe_t
));

19 
	`as£π
(
zî€d
);

22 i‡(
	`mÆloc_muãx_öô
(&
πªe
->
öô_lock
, "πªe", 
WITNESS_RANK_RTREE
,

23 
mÆloc_muãx_ønk_ex˛usive
)) {

24  
åue
;

27  
Ál£
;

28 
	}
}

30 
πªe_node_ñm_t
 *

31 
	$πªe_node_Æloc_im∂
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
size_t
 
√lms
) {

32  (
πªe_node_ñm_t
 *)
	`ba£_Æloc
(
tsdn
, 
	`b0gë
(), 
√lms
 *

33 (
πªe_node_ñm_t
), 
CACHELINE
);

34 
	}
}

35 
πªe_node_Æloc_t
 *
JET_MUTABLE
 
	gπªe_node_Æloc
 = 
πªe_node_Æloc_im∂
;

38 
	$πªe_node_dÆloc_im∂
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_node_ñm_t
 *
node
) {

40 
	`nŸ_ªached
();

41 
	}
}

42 
UNUSED
 
πªe_node_dÆloc_t
 *
JET_MUTABLE
 
	gπªe_node_dÆloc
 =

43 
πªe_node_dÆloc_im∂
;

45 
πªe_Àaf_ñm_t
 *

46 
	$πªe_Àaf_Æloc_im∂
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
size_t
 
√lms
) {

47  (
πªe_Àaf_ñm_t
 *)
	`ba£_Æloc
(
tsdn
, 
	`b0gë
(), 
√lms
 *

48 (
πªe_Àaf_ñm_t
), 
CACHELINE
);

49 
	}
}

50 
πªe_Àaf_Æloc_t
 *
JET_MUTABLE
 
	gπªe_Àaf_Æloc
 = 
πªe_Àaf_Æloc_im∂
;

53 
	$πªe_Àaf_dÆloc_im∂
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_Àaf_ñm_t
 *
Àaf
) {

55 
	`nŸ_ªached
();

56 
	}
}

57 
UNUSED
 
πªe_Àaf_dÆloc_t
 *
JET_MUTABLE
 
	gπªe_Àaf_dÆloc
 =

58 
πªe_Àaf_dÆloc_im∂
;

60 #ifde‡
JEMALLOC_JET


61 #i‡
RTREE_HEIGHT
 > 1

63 
	$πªe_dñëe_subåì
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_node_ñm_t
 *
subåì
,

64 
Àvñ
) {

65 
size_t
 
nchûdªn
 = 
	`ZU
(1Ë<< 
πªe_Àvñs
[
Àvñ
].
bôs
;

66 i‡(
Àvñ
 + 2 < 
RTREE_HEIGHT
) {

67 
size_t
 
i
 = 0; i < 
nchûdªn
; i++) {

68 
πªe_node_ñm_t
 *
node
 =

69 (
πªe_node_ñm_t
 *)
	`©omic_lﬂd_p
(&
subåì
[
i
].
chûd
,

70 
ATOMIC_RELAXED
);

71 i‡(
node
 !
NULL
) {

72 
	`πªe_dñëe_subåì
(
tsdn
, 
πªe
, 
node
, 
Àvñ
 +

77 
size_t
 
i
 = 0; i < 
nchûdªn
; i++) {

78 
πªe_Àaf_ñm_t
 *
Àaf
 =

79 (
πªe_Àaf_ñm_t
 *)
	`©omic_lﬂd_p
(&
subåì
[
i
].
chûd
,

80 
ATOMIC_RELAXED
);

81 i‡(
Àaf
 !
NULL
) {

82 
	`πªe_Àaf_dÆloc
(
tsdn
, 
πªe
, 
Àaf
);

87 i‡(
subåì
 !
πªe
->
roŸ
) {

88 
	`πªe_node_dÆloc
(
tsdn
, 
πªe
, 
subåì
);

90 
	}
}

94 
	$πªe_dñëe
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
) {

95 #i‡
RTREE_HEIGHT
 > 1

96 
	`πªe_dñëe_subåì
(
tsdn
, 
πªe
,Ñåì->
roŸ
, 0);

98 
	}
}

101 
πªe_node_ñm_t
 *

102 
	$πªe_node_öô
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
Àvñ
,

103 
©omic_p_t
 *
ñmp
) {

104 
	`mÆloc_muãx_lock
(
tsdn
, &
πªe
->
öô_lock
);

109 
πªe_node_ñm_t
 *
node
 = 
	`©omic_lﬂd_p
(
ñmp
, 
ATOMIC_RELAXED
);

110 i‡(
node
 =
NULL
) {

111 
node
 = 
	`πªe_node_Æloc
(
tsdn
, 
πªe
, 
	`ZU
(1) <<

112 
πªe_Àvñs
[
Àvñ
].
bôs
);

113 i‡(
node
 =
NULL
) {

114 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
πªe
->
öô_lock
);

115  
NULL
;

121 
	`©omic_°‹e_p
(
ñmp
, 
node
, 
ATOMIC_RELEASE
);

123 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
πªe
->
öô_lock
);

125  
node
;

126 
	}
}

128 
πªe_Àaf_ñm_t
 *

129 
	$πªe_Àaf_öô
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
©omic_p_t
 *
ñmp
) {

130 
	`mÆloc_muãx_lock
(
tsdn
, &
πªe
->
öô_lock
);

135 
πªe_Àaf_ñm_t
 *
Àaf
 = 
	`©omic_lﬂd_p
(
ñmp
, 
ATOMIC_RELAXED
);

136 i‡(
Àaf
 =
NULL
) {

137 
Àaf
 = 
	`πªe_Àaf_Æloc
(
tsdn
, 
πªe
, 
	`ZU
(1) <<

138 
πªe_Àvñs
[
RTREE_HEIGHT
-1].
bôs
);

139 i‡(
Àaf
 =
NULL
) {

140 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
πªe
->
öô_lock
);

141  
NULL
;

147 
	`©omic_°‹e_p
(
ñmp
, 
Àaf
, 
ATOMIC_RELEASE
);

149 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
πªe
->
öô_lock
);

151  
Àaf
;

152 
	}
}

154 
boﬁ


155 
	$πªe_node_vÆid
(
πªe_node_ñm_t
 *
node
) {

156  ((
uöçå_t
)
node
 != (uintptr_t)0);

157 
	}
}

159 
boﬁ


160 
	$πªe_Àaf_vÆid
(
πªe_Àaf_ñm_t
 *
Àaf
) {

161  ((
uöçå_t
)
Àaf
 != (uintptr_t)0);

162 
	}
}

164 
πªe_node_ñm_t
 *

165 
	$πªe_chûd_node_åyªad
(
πªe_node_ñm_t
 *
ñm
, 
boﬁ
 
dïídít
) {

166 
πªe_node_ñm_t
 *
node
;

168 i‡(
dïídít
) {

169 
node
 = (
πªe_node_ñm_t
 *)
	`©omic_lﬂd_p
(&
ñm
->
chûd
,

170 
ATOMIC_RELAXED
);

172 
node
 = (
πªe_node_ñm_t
 *)
	`©omic_lﬂd_p
(&
ñm
->
chûd
,

173 
ATOMIC_ACQUIRE
);

176 
	`as£π
(!
dïídít
 || 
node
 !
NULL
);

177  
node
;

178 
	}
}

180 
πªe_node_ñm_t
 *

181 
	$πªe_chûd_node_ªad
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_node_ñm_t
 *
ñm
,

182 
Àvñ
, 
boﬁ
 
dïídít
) {

183 
πªe_node_ñm_t
 *
node
;

185 
node
 = 
	`πªe_chûd_node_åyªad
(
ñm
, 
dïídít
);

186 i‡(!
dïídít
 && 
	`u∆ikñy
(!
	`πªe_node_vÆid
(
node
))) {

187 
node
 = 
	`πªe_node_öô
(
tsdn
, 
πªe
, 
Àvñ
 + 1, &
ñm
->
chûd
);

189 
	`as£π
(!
dïídít
 || 
node
 !
NULL
);

190  
node
;

191 
	}
}

193 
πªe_Àaf_ñm_t
 *

194 
	$πªe_chûd_Àaf_åyªad
(
πªe_node_ñm_t
 *
ñm
, 
boﬁ
 
dïídít
) {

195 
πªe_Àaf_ñm_t
 *
Àaf
;

197 i‡(
dïídít
) {

198 
Àaf
 = (
πªe_Àaf_ñm_t
 *)
	`©omic_lﬂd_p
(&
ñm
->
chûd
,

199 
ATOMIC_RELAXED
);

201 
Àaf
 = (
πªe_Àaf_ñm_t
 *)
	`©omic_lﬂd_p
(&
ñm
->
chûd
,

202 
ATOMIC_ACQUIRE
);

205 
	`as£π
(!
dïídít
 || 
Àaf
 !
NULL
);

206  
Àaf
;

207 
	}
}

209 
πªe_Àaf_ñm_t
 *

210 
	$πªe_chûd_Àaf_ªad
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_node_ñm_t
 *
ñm
,

211 
Àvñ
, 
boﬁ
 
dïídít
) {

212 
πªe_Àaf_ñm_t
 *
Àaf
;

214 
Àaf
 = 
	`πªe_chûd_Àaf_åyªad
(
ñm
, 
dïídít
);

215 i‡(!
dïídít
 && 
	`u∆ikñy
(!
	`πªe_Àaf_vÆid
(
Àaf
))) {

216 
Àaf
 = 
	`πªe_Àaf_öô
(
tsdn
, 
πªe
, &
ñm
->
chûd
);

218 
	`as£π
(!
dïídít
 || 
Àaf
 !
NULL
);

219  
Àaf
;

220 
	}
}

222 
πªe_Àaf_ñm_t
 *

223 
	$πªe_Àaf_ñm_lookup_h¨d
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
πªe_˘x_t
 *
πªe_˘x
,

224 
uöçå_t
 
key
, 
boﬁ
 
dïídít
, boﬁ 
öô_missög
) {

225 
πªe_node_ñm_t
 *
node
;

226 
πªe_Àaf_ñm_t
 *
Àaf
;

227 #i‡
RTREE_HEIGHT
 > 1

228 
node
 = 
πªe
->
roŸ
;

230 
Àaf
 = 
πªe
->
roŸ
;

233 i‡(
c⁄fig_debug
) {

234 
uöçå_t
 
Àafkey
 = 
	`πªe_Àafkey
(
key
);

235 
i
 = 0; i < 
RTREE_CTX_NCACHE
; i++) {

236 
	`as£π
(
πªe_˘x
->
ˇche
[
i
].
Àafkey
 !=Üeafkey);

238 
i
 = 0; i < 
RTREE_CTX_NCACHE_L2
; i++) {

239 
	`as£π
(
πªe_˘x
->
l2_ˇche
[
i
].
Àafkey
 !=Üeafkey);

243 
	#RTREE_GET_CHILD
(
Àvñ
) { \

244 
	`as£π
(
Àvñ
 < 
RTREE_HEIGHT
-1); \

245 i‡(
Àvñ
 !0 && !
dïídít
 && \

246 
	`u∆ikñy
(!
	`πªe_node_vÆid
(
node
))) { \

247  
NULL
; \

249 
uöçå_t
 
subkey
 = 
	`πªe_subkey
(
key
, 
Àvñ
); \

250 i‡(
Àvñ
 + 2 < 
RTREE_HEIGHT
) { \

251 
node
 = 
öô_missög
 ? \

252 
	`πªe_chûd_node_ªad
(
tsdn
, 
πªe
, \

253 &
node
[
subkey
], 
Àvñ
, 
dïídít
) : \

254 
	`πªe_chûd_node_åyªad
(&
node
[
subkey
], \

255 
dïídít
); \

257 
Àaf
 = 
öô_missög
 ? \

258 
	`πªe_chûd_Àaf_ªad
(
tsdn
, 
πªe
, \

259 &
node
[
subkey
], 
Àvñ
, 
dïídít
) : \

260 
	`πªe_chûd_Àaf_åyªad
(&
node
[
subkey
], \

261 
dïídít
); \

263 }

	)

269 
	#RTREE_GET_LEAF
(
Àvñ
) { \

270 
	`as£π
(
Àvñ
 =
RTREE_HEIGHT
-1); \

271 i‡(!
dïídít
 && 
	`u∆ikñy
(!
	`πªe_Àaf_vÆid
(
Àaf
))) { \

272  
NULL
; \

274 i‡(
RTREE_CTX_NCACHE_L2
 > 1) { \

275 
	`memmove
(&
πªe_˘x
->
l2_ˇche
[1], \

276 &
πªe_˘x
->
l2_ˇche
[0], \

277 (
πªe_˘x_ˇche_ñm_t
) * \

278 (
RTREE_CTX_NCACHE_L2
 - 1)); \

280 
size_t
 
¶Ÿ
 = 
	`πªe_ˇche_dúe˘_m≠
(
key
); \

281 
πªe_˘x
->
l2_ˇche
[0].
Àafkey
 = \

282 
πªe_˘x
->
ˇche
[
¶Ÿ
].
Àafkey
; \

283 
πªe_˘x
->
l2_ˇche
[0].
Àaf
 = \

284 
πªe_˘x
->
ˇche
[
¶Ÿ
].
Àaf
; \

285 
uöçå_t
 
Àafkey
 = 
	`πªe_Àafkey
(
key
); \

286 
πªe_˘x
->
ˇche
[
¶Ÿ
].
Àafkey
 =Üeafkey; \

287 
πªe_˘x
->
ˇche
[
¶Ÿ
].
Àaf
 =Üeaf; \

288 
uöçå_t
 
subkey
 = 
	`πªe_subkey
(
key
, 
Àvñ
); \

289  &
Àaf
[
subkey
]; \

290 }

	)

291 i‡(
RTREE_HEIGHT
 > 1) {

292 
	`RTREE_GET_CHILD
(0)

294 i‡(
RTREE_HEIGHT
 > 2) {

295 
	`RTREE_GET_CHILD
(1)

297 i‡(
RTREE_HEIGHT
 > 3) {

298 
i
 = 2; i < 
RTREE_HEIGHT
-1; i++) {

299 
	`RTREE_GET_CHILD
(
i
)

302 
	`RTREE_GET_LEAF
(
RTREE_HEIGHT
-1)

303 #unde‡
RTREE_GET_CHILD


304 #unde‡
RTREE_GET_LEAF


305 
	`nŸ_ªached
();

306 
	}
}

309 
	$πªe_˘x_d©a_öô
(
πªe_˘x_t
 *
˘x
) {

310 
i
 = 0; i < 
RTREE_CTX_NCACHE
; i++) {

311 
πªe_˘x_ˇche_ñm_t
 *
ˇche
 = &
˘x
->ˇche[
i
];

312 
ˇche
->
Àafkey
 = 
RTREE_LEAFKEY_INVALID
;

313 
ˇche
->
Àaf
 = 
NULL
;

315 
i
 = 0; i < 
RTREE_CTX_NCACHE_L2
; i++) {

316 
πªe_˘x_ˇche_ñm_t
 *
ˇche
 = &
˘x
->
l2_ˇche
[
i
];

317 
ˇche
->
Àafkey
 = 
RTREE_LEAFKEY_INVALID
;

318 
ˇche
->
Àaf
 = 
NULL
;

320 
	}
}

	@src/stats.c

1 
	#JEMALLOC_STATS_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/˘l.h
"

7 
	~"jemÆloc/öã∫Æ/muãx.h
"

8 
	~"jemÆloc/öã∫Æ/muãx_¥of.h
"

10 c⁄° *
	gglobÆ_muãx_«mes
[
muãx_¥of_num_globÆ_muãxes
] = {

11 
	#OP
(
mtx
Ë#mtx,

	)

12 
MUTEX_PROF_GLOBAL_MUTEXES


13 #unde‡
OP


16 c⁄° *
	g¨ía_muãx_«mes
[
muãx_¥of_num_¨ía_muãxes
] = {

17 
	#OP
(
mtx
Ë#mtx,

	)

18 
MUTEX_PROF_ARENA_MUTEXES


19 #unde‡
OP


22 
	#CTL_GET
(
n
, 
v
, 
t
) do { \

23 
size_t
 
sz
 = (
t
); \

24 
	`xmÆl˘l
(
n
, (*)
v
, &
sz
, 
NULL
, 0); \

25 } 0)

	)

27 
	#CTL_M2_GET
(
n
, 
i
, 
v
, 
t
) do { \

28 
size_t
 
mib
[
CTL_MAX_DEPTH
]; \

29 
size_t
 
mibÀn
 = (
mib
) / (size_t); \

30 
size_t
 
sz
 = (
t
); \

31 
	`xmÆl˘ amëomib
(
n
, 
mib
, &
mibÀn
); \

32 
mib
[2] = (
i
); \

33 
	`xmÆl˘lbymib
(
mib
, 
mibÀn
, (*)
v
, &
sz
, 
NULL
, 0); \

34 } 0)

	)

36 
	#CTL_M2_M4_GET
(
n
, 
i
, 
j
, 
v
, 
t
) do { \

37 
size_t
 
mib
[
CTL_MAX_DEPTH
]; \

38 
size_t
 
mibÀn
 = (
mib
) / (size_t); \

39 
size_t
 
sz
 = (
t
); \

40 
	`xmÆl˘ amëomib
(
n
, 
mib
, &
mibÀn
); \

41 
mib
[2] = (
i
); \

42 
mib
[4] = (
j
); \

43 
	`xmÆl˘lbymib
(
mib
, 
mibÀn
, (*)
v
, &
sz
, 
NULL
, 0); \

44 } 0)

	)

49 
boﬁ
 
	g›t_°©s_¥öt
 = 
Ál£
;

50 
	g›t_°©s_¥öt_›ts
[
°©s_¥öt_tŸ_num_›ti⁄s
+1] = "";

55 
boﬁ


56 
	$gë_øã_°r
(
uöt64_t
 
dividíd
, uöt64_à
divis‹
, 
°r
[6]) {

57 i‡(
divis‹
 =0 || 
dividíd
 > divisor) {

59  
åue
;

61 i‡(
dividíd
 > 0) {

62 
	`as£π
(
UINT64_MAX
 / 
dividíd
 >= 1000);

65 
n
 = ()((
dividíd
 * 1000Ë/ 
divis‹
);

66 i‡(
n
 < 10) {

67 
	`mÆloc_¢¥ötf
(
°r
, 6, "0.00%u", 
n
);

68 } i‡(
n
 < 100) {

69 
	`mÆloc_¢¥ötf
(
°r
, 6, "0.0%u", 
n
);

70 } i‡(
n
 < 1000) {

71 
	`mÆloc_¢¥ötf
(
°r
, 6, "0.%u", 
n
);

73 
	`mÆloc_¢¥ötf
(
°r
, 6, "1");

76  
Ál£
;

77 
	}
}

79 
	#MUTEX_CTL_STR_MAX_LENGTH
 128

	)

81 
	$gí_muãx_˘l_°r
(*
°r
, 
size_t
 
buf_Àn
, c⁄° *
¥efix
,

82 c⁄° *
muãx
, c⁄° *
cou¡î
) {

83 
	`mÆloc_¢¥ötf
(
°r
, 
buf_Àn
, "°©s.%s.%s.%s", 
¥efix
, 
muãx
, 
cou¡î
);

84 
	}
}

87 
	$ªad_¨ía_bö_muãx_°©s
(
¨ía_öd
, 
bö_öd
,

88 
uöt64_t
 
ªsu…s_uöt64_t
[
muãx_¥of_num_uöt64_t_cou¡îs
],

89 
uöt32_t
 
ªsu…s_uöt32_t
[
muãx_¥of_num_uöt32_t_cou¡îs
]) {

90 
cmd
[
MUTEX_CTL_STR_MAX_LENGTH
];

91 
	#OP
(
c
, 
t
) \

92 
	`gí_muãx_˘l_°r
(
cmd
, 
MUTEX_CTL_STR_MAX_LENGTH
, \

94 
	`CTL_M2_M4_GET
(
cmd
, 
¨ía_öd
, 
bö_öd
, \

95 (
t
 *)&
ªsu…s_
##t[
muãx_cou¡î_
##
c
],Å);

	)

96 
MUTEX_PROF_COUNTERS


97 #unde‡
OP


98 
	}
}

101 
	$muãx_°©s_ouçut_js⁄
((*
wrôe_cb
)(*, c⁄° *), *
cb›aque
,

102 c⁄° *
«me
, 
uöt64_t
 
°©s_uöt64_t
[
muãx_¥of_num_uöt64_t_cou¡îs
],

103 
uöt32_t
 
°©s_uöt32_t
[
muãx_¥of_num_uöt32_t_cou¡îs
],

104 c⁄° *
js⁄_ödít
, 
boﬁ
 
œ°
) {

105 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "%s\"%s\": {\n", 
js⁄_ödít
, 
«me
);

107 
muãx_¥of_uöt64_t_cou¡î_öd_t
 
k_uöt64_t
 = 0;

108 
muãx_¥of_uöt32_t_cou¡î_öd_t
 
k_uöt32_t
 = 0;

109 *
fmt_°r
[2] = {"%s\t\"%s\": %"
FMTu32
"%s\n",

110 "%s\t\"%s\": %"
FMTu64
"%s\n"};

111 
	#OP
(
c
, 
t
) \

112 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

113 
fmt_°r
[(
t
Ë/ (
uöt32_t
) - 1], \

114 
js⁄_ödít
, #c, (
t
)
°©s_
##t[
muãx_cou¡î_
##
c
], \

115 (++
k_
##
t
 && 
k_uöt32_t
 =
muãx_¥of_num_uöt32_t_cou¡îs
Ë? "" : ",");

	)

116 
MUTEX_PROF_COUNTERS


117 #unde‡
OP


119 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "%s}%s\n", 
js⁄_ödít
,

120 
œ°
 ? "" : ",");

121 
	}
}

124 
	$°©s_¨ía_bös_¥öt
((*
wrôe_cb
)(*, c⁄° *), *
cb›aque
,

125 
boﬁ
 
js⁄
, boﬁ 
œrge
, boﬁ 
muãx
, 
i
) {

126 
size_t
 
∑ge
;

127 
boﬁ
 
ö_g≠
, 
ö_g≠_¥ev
;

128 
nbös
, 
j
;

130 
	`CTL_GET
("¨ías.∑ge", &
∑ge
, 
size_t
);

132 
	`CTL_GET
("¨ías.nbös", &
nbös
, );

133 i‡(
js⁄
) {

134 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

137 *
muãx_cou¡îs
 = "Ç_lock_opsÇ_waiting"

140 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

144 "Ñe¶abs%s", 
muãx
 ? 
muãx_cou¡îs
 : "\n");

146 
j
 = 0, 
ö_g≠
 = 
Ál£
; j < 
nbös
; j++) {

147 
uöt64_t
 
n¶abs
;

148 
size_t
 
ªg_size
, 
¶ab_size
, 
cuºegs
;

149 
size_t
 
cur¶abs
;

150 
uöt32_t
 
ƒegs
;

151 
uöt64_t
 
nmÆloc
, 
ndÆloc
, 
ƒeque°s
, 
nfûls
, 
nÊushes
;

152 
uöt64_t
 
ƒe¶abs
;

154 
	`CTL_M2_M4_GET
("°©s.¨ías.0.bös.0.n¶abs", 
i
, 
j
, &
n¶abs
,

155 
uöt64_t
);

156 
ö_g≠_¥ev
 = 
ö_g≠
;

157 
ö_g≠
 = (
n¶abs
 == 0);

159 i‡(!
js⁄
 && 
ö_g≠_¥ev
 && !
ö_g≠
) {

160 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

164 
	`CTL_M2_GET
("¨ías.bö.0.size", 
j
, &
ªg_size
, 
size_t
);

165 
	`CTL_M2_GET
("¨ías.bö.0.ƒegs", 
j
, &
ƒegs
, 
uöt32_t
);

166 
	`CTL_M2_GET
("¨ías.bö.0.¶ab_size", 
j
, &
¶ab_size
, 
size_t
);

168 
	`CTL_M2_M4_GET
("°©s.¨ías.0.bös.0.nmÆloc", 
i
, 
j
, &
nmÆloc
,

169 
uöt64_t
);

170 
	`CTL_M2_M4_GET
("°©s.¨ías.0.bös.0.ndÆloc", 
i
, 
j
, &
ndÆloc
,

171 
uöt64_t
);

172 
	`CTL_M2_M4_GET
("°©s.¨ías.0.bös.0.cuºegs", 
i
, 
j
, &
cuºegs
,

173 
size_t
);

174 
	`CTL_M2_M4_GET
("°©s.¨ías.0.bös.0.ƒeque°s", 
i
, 
j
,

175 &
ƒeque°s
, 
uöt64_t
);

176 
	`CTL_M2_M4_GET
("°©s.¨ías.0.bös.0.nfûls", 
i
, 
j
, &
nfûls
,

177 
uöt64_t
);

178 
	`CTL_M2_M4_GET
("°©s.¨ías.0.bös.0.nÊushes", 
i
, 
j
, &
nÊushes
,

179 
uöt64_t
);

180 
	`CTL_M2_M4_GET
("°©s.¨ías.0.bös.0.ƒe¶abs", 
i
, 
j
, &
ƒe¶abs
,

181 
uöt64_t
);

182 
	`CTL_M2_M4_GET
("°©s.¨ías.0.bös.0.cur¶abs", 
i
, 
j
, &
cur¶abs
,

183 
size_t
);

185 i‡(
js⁄
) {

186 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

188 "\t\t\t\t\t\t\"nmÆloc\": %"
FMTu64
",\n"

189 "\t\t\t\t\t\t\"ndÆloc\": %"
FMTu64
",\n"

191 "\t\t\t\t\t\t\"ƒeque°s\": %"
FMTu64
",\n"

192 "\t\t\t\t\t\t\"nfûls\": %"
FMTu64
",\n"

193 "\t\t\t\t\t\t\"nÊushes\": %"
FMTu64
",\n"

194 "\t\t\t\t\t\t\"ƒe¶abs\": %"
FMTu64
",\n"

196 
nmÆloc
, 
ndÆloc
, 
cuºegs
, 
ƒeque°s
, 
nfûls
,

197 
nÊushes
, 
ƒe¶abs
, 
cur¶abs
, 
muãx
 ? "," : "");

198 i‡(
muãx
) {

199 
uöt64_t
 
muãx_°©s_64
[
muãx_¥of_num_uöt64_t_cou¡îs
];

200 
uöt32_t
 
muãx_°©s_32
[
muãx_¥of_num_uöt32_t_cou¡îs
];

201 
	`ªad_¨ía_bö_muãx_°©s
(
i
, 
j
, 
muãx_°©s_64
, 
muãx_°©s_32
);

202 
	`muãx_°©s_ouçut_js⁄
(
wrôe_cb
, 
cb›aque
,

203 "muãx", 
muãx_°©s_64
, 
muãx_°©s_32
, "\t\t\t\t\t\t", 
åue
);

205 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

207 (
j
 + 1 < 
nbös
) ? "," : "");

208 } i‡(!
ö_g≠
) {

209 
size_t
 
avaûªgs
 = 
ƒegs
 * 
cur¶abs
;

210 
utû
[6];

211 i‡(
	`gë_øã_°r
((
uöt64_t
)
cuºegs
, (uöt64_t)
avaûªgs
,

212 
utû
)) {

213 i‡(
avaûªgs
 == 0) {

214 
	`mÆloc_¢¥ötf
(
utû
, (util),

216 } i‡(
cuºegs
 > 
avaûªgs
) {

224 
	`mÆloc_¢¥ötf
(
utû
, (util),

227 
	`nŸ_ªached
();

230 
uöt64_t
 
muãx_°©s_64
[
muãx_¥of_num_uöt64_t_cou¡îs
];

231 
uöt32_t
 
muãx_°©s_32
[
muãx_¥of_num_uöt32_t_cou¡îs
];

232 i‡(
muãx
) {

233 
	`ªad_¨ía_bö_muãx_°©s
(
i
, 
j
, 
muãx_°©s_64
, 
muãx_°©s_32
);

236 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "%20zu %3u %12zu %12"

237 
FMTu64
" %12"FMTu64" %12"FMTu64" %12zu %12zu %4u"

238 " %3zu %-5†%12"
FMTu64
" %12"FMTu64" %12"FMTu64

239 " %12"
FMTu64
, 
ªg_size
, 
j
, 
cuºegs
 *Ñeg_size,

240 
nmÆloc
, 
ndÆloc
, 
ƒeque°s
, 
cuºegs
, 
cur¶abs
,

241 
ƒegs
, 
¶ab_size
 / 
∑ge
, 
utû
, 
nfûls
, 
nÊushes
,

242 
n¶abs
, 
ƒe¶abs
);

244 i‡(
muãx
) {

245 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

246 " %12"
FMTu64
" %12"FMTu64" %12"FMTu64

247 " %14"
FMTu64
" %14"FMTu64" %12"FMTu64

248 " %10"
FMTu32
"\n",

249 
muãx_°©s_64
[
muãx_cou¡î_num_›s
],

250 
muãx_°©s_64
[
muãx_cou¡î_num_waô
],

251 
muãx_°©s_64
[
muãx_cou¡î_num_•ö_acq
],

252 
muãx_°©s_64
[
muãx_cou¡î_num_ow√r_swôch
],

253 
muãx_°©s_64
[
muãx_cou¡î_tŸÆ_waô_time
],

254 
muãx_°©s_64
[
muãx_cou¡î_max_waô_time
],

255 
muãx_°©s_32
[
muãx_cou¡î_max_num_thds
]);

257 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "\n");

261 i‡(
js⁄
) {

262 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

263 "\t\t\t\t]%s\n", 
œrge
 ? "," : "");

265 i‡(
ö_g≠
) {

266 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

270 
	}
}

273 
	$°©s_¨ía_Àxã¡s_¥öt
((*
wrôe_cb
)(*, const *),

274 *
cb›aque
, 
boﬁ
 
js⁄
, 
i
) {

275 
nbös
, 
∆exã¡s
, 
j
;

276 
boﬁ
 
ö_g≠
, 
ö_g≠_¥ev
;

278 
	`CTL_GET
("¨ías.nbös", &
nbös
, );

279 
	`CTL_GET
("¨ías.∆exã¡s", &
∆exã¡s
, );

280 i‡(
js⁄
) {

281 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

284 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

288 
j
 = 0, 
ö_g≠
 = 
Ál£
; j < 
∆exã¡s
; j++) {

289 
uöt64_t
 
nmÆloc
, 
ndÆloc
, 
ƒeque°s
;

290 
size_t
 
Àxã¡_size
, 
cuæexã¡s
;

292 
	`CTL_M2_M4_GET
("°©s.¨ías.0.Àxã¡s.0.nmÆloc", 
i
, 
j
,

293 &
nmÆloc
, 
uöt64_t
);

294 
	`CTL_M2_M4_GET
("°©s.¨ías.0.Àxã¡s.0.ndÆloc", 
i
, 
j
,

295 &
ndÆloc
, 
uöt64_t
);

296 
	`CTL_M2_M4_GET
("°©s.¨ías.0.Àxã¡s.0.ƒeque°s", 
i
, 
j
,

297 &
ƒeque°s
, 
uöt64_t
);

298 
ö_g≠_¥ev
 = 
ö_g≠
;

299 
ö_g≠
 = (
ƒeque°s
 == 0);

301 i‡(!
js⁄
 && 
ö_g≠_¥ev
 && !
ö_g≠
) {

302 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

306 
	`CTL_M2_GET
("¨ías.Àxã¡.0.size", 
j
, &
Àxã¡_size
, 
size_t
);

307 
	`CTL_M2_M4_GET
("°©s.¨ías.0.Àxã¡s.0.cuæexã¡s", 
i
, 
j
,

308 &
cuæexã¡s
, 
size_t
);

309 i‡(
js⁄
) {

310 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

314 
cuæexã¡s
,

315 (
j
 + 1 < 
∆exã¡s
) ? "," : "");

316 } i‡(!
ö_g≠
) {

317 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

318 "%20zu %3u %12zu %12"
FMTu64
" %12"FMTu64

319 " %12"
FMTu64
" %12zu\n",

320 
Àxã¡_size
, 
nbös
 + 
j
,

321 
cuæexã¡s
 * 
Àxã¡_size
, 
nmÆloc
, 
ndÆloc
,

322 
ƒeque°s
, 
cuæexã¡s
);

325 i‡(
js⁄
) {

326 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

329 i‡(
ö_g≠
) {

330 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

334 
	}
}

337 
	$ªad_¨ía_muãx_°©s
(
¨ía_öd
,

338 
uöt64_t
 
ªsu…s_uöt64_t
[
muãx_¥of_num_¨ía_muãxes
][
muãx_¥of_num_uöt64_t_cou¡îs
],

339 
uöt32_t
 
ªsu…s_uöt32_t
[
muãx_¥of_num_¨ía_muãxes
][
muãx_¥of_num_uöt32_t_cou¡îs
]) {

340 
cmd
[
MUTEX_CTL_STR_MAX_LENGTH
];

342 
muãx_¥of_¨ía_öd_t
 
i
;

343 
i
 = 0; i < 
muãx_¥of_num_¨ía_muãxes
; i++) {

344 
	#OP
(
c
, 
t
) \

345 
	`gí_muãx_˘l_°r
(
cmd
, 
MUTEX_CTL_STR_MAX_LENGTH
, \

346 "¨ías.0.muãxes", 
¨ía_muãx_«mes
[
i
], #c); \

347 
	`CTL_M2_GET
(
cmd
, 
¨ía_öd
, \

348 (
t
 *)&
ªsu…s_
##t[
i
][
muãx_cou¡î_
##
c
],Å);

	)

349 
MUTEX_PROF_COUNTERS


350 #unde‡
OP


352 
	}
}

355 
	$muãx_°©s_ouçut
((*
wrôe_cb
)(*, c⁄° *), *
cb›aque
,

356 c⁄° *
«me
, 
uöt64_t
 
°©s_uöt64_t
[
muãx_¥of_num_uöt64_t_cou¡îs
],

357 
uöt32_t
 
°©s_uöt32_t
[
muãx_¥of_num_uöt32_t_cou¡îs
],

358 
boﬁ
 
fú°_muãx
) {

359 i‡(
fú°_muãx
) {

361 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

367 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "%s", 
«me
);

368 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, ":%*c",

369 ()(20 - 
	`°æí
(
«me
)), ' ');

371 *
fmt_°r
[2] = {"%12"
FMTu32
, "%16"
FMTu64
};

372 
	#OP
(
c
, 
t
) \

373 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

374 
fmt_°r
[(
t
Ë/ (
uöt32_t
) - 1], \

375 (
t
)
°©s_
##t[
muãx_cou¡î_
##
c
]);

	)

376 
MUTEX_PROF_COUNTERS


377 #unde‡
OP


378 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "\n");

379 
	}
}

382 
	$°©s_¨ía_muãxes_¥öt
((*
wrôe_cb
)(*, const *),

383 *
cb›aque
, 
boﬁ
 
js⁄
, boﬁ 
js⁄_íd
, 
¨ía_öd
) {

384 
uöt64_t
 
muãx_°©s_64
[
muãx_¥of_num_¨ía_muãxes
][
muãx_¥of_num_uöt64_t_cou¡îs
];

385 
uöt32_t
 
muãx_°©s_32
[
muãx_¥of_num_¨ía_muãxes
][
muãx_¥of_num_uöt32_t_cou¡îs
];

386 
	`ªad_¨ía_muãx_°©s
(
¨ía_öd
, 
muãx_°©s_64
, 
muãx_°©s_32
);

389 i‡(
js⁄
) {

390 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "\t\t\t\t\"mutexes\": {\n");

391 
muãx_¥of_¨ía_öd_t
 
i
, 
œ°_muãx
;

392 
œ°_muãx
 = 
muãx_¥of_num_¨ía_muãxes
 - 1;

393 
i
 = 0; i < 
muãx_¥of_num_¨ía_muãxes
; i++) {

394 
	`muãx_°©s_ouçut_js⁄
(
wrôe_cb
, 
cb›aque
,

395 
¨ía_muãx_«mes
[
i
], 
muãx_°©s_64
[i], 
muãx_°©s_32
[i],

396 "\t\t\t\t\t", (
i
 =
œ°_muãx
));

398 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "\t\t\t\t}%s\n",

399 
js⁄_íd
 ? "" : ",");

401 
muãx_¥of_¨ía_öd_t
 
i
;

402 
i
 = 0; i < 
muãx_¥of_num_¨ía_muãxes
; i++) {

403 
	`muãx_°©s_ouçut
(
wrôe_cb
, 
cb›aque
,

404 
¨ía_muãx_«mes
[
i
], 
muãx_°©s_64
[i], 
muãx_°©s_32
[i], i == 0);

407 
	}
}

410 
	$°©s_¨ía_¥öt
((*
wrôe_cb
)(*, c⁄° *), *
cb›aque
,

411 
boﬁ
 
js⁄
, 
i
, boﬁ 
bös
, boﬁ 
œrge
, boﬁ 
muãx
) {

412 
¡hªads
;

413 c⁄° *
dss
;

414 
ssize_t
 
dúty_deˇy_ms
, 
muzzy_deˇy_ms
;

415 
size_t
 
∑ge
, 
∑˘ive
, 
pdúty
, 
pmuzzy
, 
m≠≥d
, 
ªèöed
;

416 
size_t
 
ba£
, 
öã∫Æ
, 
ªsidít
, 
mëad©a_thp
;

417 
uöt64_t
 
dúty_≈urge
, 
dúty_nmadvi£
, 
dúty_purged
;

418 
uöt64_t
 
muzzy_≈urge
, 
muzzy_nmadvi£
, 
muzzy_purged
;

419 
size_t
 
smÆl_Æloˇãd
;

420 
uöt64_t
 
smÆl_nmÆloc
, 
smÆl_ndÆloc
, 
smÆl_ƒeque°s
;

421 
size_t
 
œrge_Æloˇãd
;

422 
uöt64_t
 
œrge_nmÆloc
, 
œrge_ndÆloc
, 
œrge_ƒeque°s
;

423 
size_t
 
tˇche_byãs
;

424 
uöt64_t
 
u±ime
;

426 
	`CTL_GET
("¨ías.∑ge", &
∑ge
, 
size_t
);

428 
	`CTL_M2_GET
("°©s.¨ías.0.¡hªads", 
i
, &
¡hªads
, );

429 i‡(
js⁄
) {

430 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

431 "\t\t\t\t\"¡hªads\": %u,\n", 
¡hªads
);

433 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

434 "assig√dÅhªads: %u\n", 
¡hªads
);

437 
	`CTL_M2_GET
("°©s.¨ías.0.u±ime", 
i
, &
u±ime
, 
uöt64_t
);

438 i‡(
js⁄
) {

439 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

440 "\t\t\t\t\"u±ime_ns\": %"
FMTu64
",\n", 
u±ime
);

442 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

443 "u±ime: %"
FMTu64
"\n", 
u±ime
);

446 
	`CTL_M2_GET
("°©s.¨ías.0.dss", 
i
, &
dss
, const *);

447 i‡(
js⁄
) {

448 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

449 "\t\t\t\t\"dss\": \"%s\",\n", 
dss
);

451 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

452 "ds†Æloˇti⁄Öª˚dí˚: %s\n", 
dss
);

455 
	`CTL_M2_GET
("°©s.¨ías.0.dúty_deˇy_ms", 
i
, &
dúty_deˇy_ms
,

456 
ssize_t
);

457 
	`CTL_M2_GET
("°©s.¨ías.0.muzzy_deˇy_ms", 
i
, &
muzzy_deˇy_ms
,

458 
ssize_t
);

459 
	`CTL_M2_GET
("°©s.¨ías.0.∑˘ive", 
i
, &
∑˘ive
, 
size_t
);

460 
	`CTL_M2_GET
("°©s.¨ías.0.pdúty", 
i
, &
pdúty
, 
size_t
);

461 
	`CTL_M2_GET
("°©s.¨ías.0.pmuzzy", 
i
, &
pmuzzy
, 
size_t
);

462 
	`CTL_M2_GET
("°©s.¨ías.0.dúty_≈urge", 
i
, &
dúty_≈urge
, 
uöt64_t
);

463 
	`CTL_M2_GET
("°©s.¨ías.0.dúty_nmadvi£", 
i
, &
dúty_nmadvi£
,

464 
uöt64_t
);

465 
	`CTL_M2_GET
("°©s.¨ías.0.dúty_purged", 
i
, &
dúty_purged
, 
uöt64_t
);

466 
	`CTL_M2_GET
("°©s.¨ías.0.muzzy_≈urge", 
i
, &
muzzy_≈urge
, 
uöt64_t
);

467 
	`CTL_M2_GET
("°©s.¨ías.0.muzzy_nmadvi£", 
i
, &
muzzy_nmadvi£
,

468 
uöt64_t
);

469 
	`CTL_M2_GET
("°©s.¨ías.0.muzzy_purged", 
i
, &
muzzy_purged
, 
uöt64_t
);

470 i‡(
js⁄
) {

471 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

472 "\t\t\t\t\"dúty_deˇy_ms\": %zd,\n", 
dúty_deˇy_ms
);

473 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

474 "\t\t\t\t\"muzzy_deˇy_ms\": %zd,\n", 
muzzy_deˇy_ms
);

475 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

476 "\t\t\t\t\"∑˘ive\": %zu,\n", 
∑˘ive
);

477 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

478 "\t\t\t\t\"pdúty\": %zu,\n", 
pdúty
);

479 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

480 "\t\t\t\t\"pmuzzy\": %zu,\n", 
pmuzzy
);

481 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

482 "\t\t\t\t\"dúty_≈urge\": %"
FMTu64
",\n", 
dúty_≈urge
);

483 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

484 "\t\t\t\t\"dúty_nmadvi£\": %"
FMTu64
",\n", 
dúty_nmadvi£
);

485 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

486 "\t\t\t\t\"dúty_purged\": %"
FMTu64
",\n", 
dúty_purged
);

487 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

488 "\t\t\t\t\"muzzy_≈urge\": %"
FMTu64
",\n", 
muzzy_≈urge
);

489 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

490 "\t\t\t\t\"muzzy_nmadvi£\": %"
FMTu64
",\n", 
muzzy_nmadvi£
);

491 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

492 "\t\t\t\t\"muzzy_purged\": %"
FMTu64
",\n", 
muzzy_purged
);

494 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

497 i‡(
dúty_deˇy_ms
 >= 0) {

498 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

499 " dúty: %5zd %12zu %12"
FMTu64
" %12"FMTu64" %12"

500 
FMTu64
"\n", 
dúty_deˇy_ms
, 
pdúty
, 
dúty_≈urge
,

501 
dúty_nmadvi£
, 
dúty_purged
);

503 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

504 " dúty: N/A %12zu %12"
FMTu64
" %12"FMTu64" %12"

505 
FMTu64
"\n", 
pdúty
, 
dúty_≈urge
, 
dúty_nmadvi£
,

506 
dúty_purged
);

508 i‡(
muzzy_deˇy_ms
 >= 0) {

509 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

510 " muzzy: %5zd %12zu %12"
FMTu64
" %12"FMTu64" %12"

511 
FMTu64
"\n", 
muzzy_deˇy_ms
, 
pmuzzy
, 
muzzy_≈urge
,

512 
muzzy_nmadvi£
, 
muzzy_purged
);

514 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

515 " muzzy: N/A %12zu %12"
FMTu64
" %12"FMTu64" %12"

516 
FMTu64
"\n", 
pmuzzy
, 
muzzy_≈urge
, 
muzzy_nmadvi£
,

517 
muzzy_purged
);

521 
	`CTL_M2_GET
("°©s.¨ías.0.smÆl.Æloˇãd", 
i
, &
smÆl_Æloˇãd
,

522 
size_t
);

523 
	`CTL_M2_GET
("°©s.¨ías.0.smÆl.nmÆloc", 
i
, &
smÆl_nmÆloc
, 
uöt64_t
);

524 
	`CTL_M2_GET
("°©s.¨ías.0.smÆl.ndÆloc", 
i
, &
smÆl_ndÆloc
, 
uöt64_t
);

525 
	`CTL_M2_GET
("°©s.¨ías.0.smÆl.ƒeque°s", 
i
, &
smÆl_ƒeque°s
,

526 
uöt64_t
);

527 i‡(
js⁄
) {

528 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

531 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

532 "\t\t\t\t\t\"Æloˇãd\": %zu,\n", 
smÆl_Æloˇãd
);

533 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

534 "\t\t\t\t\t\"nmÆloc\": %"
FMTu64
",\n", 
smÆl_nmÆloc
);

535 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

536 "\t\t\t\t\t\"ndÆloc\": %"
FMTu64
",\n", 
smÆl_ndÆloc
);

537 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

538 "\t\t\t\t\t\"ƒeque°s\": %"
FMTu64
"\n", 
smÆl_ƒeque°s
);

540 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

543 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

546 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

547 "smÆl: %12zu %12"
FMTu64
" %12"FMTu64

548 " %12"
FMTu64
"\n",

549 
smÆl_Æloˇãd
, 
smÆl_nmÆloc
, 
smÆl_ndÆloc
,

550 
smÆl_ƒeque°s
);

553 
	`CTL_M2_GET
("°©s.¨ías.0.œrge.Æloˇãd", 
i
, &
œrge_Æloˇãd
,

554 
size_t
);

555 
	`CTL_M2_GET
("°©s.¨ías.0.œrge.nmÆloc", 
i
, &
œrge_nmÆloc
, 
uöt64_t
);

556 
	`CTL_M2_GET
("°©s.¨ías.0.œrge.ndÆloc", 
i
, &
œrge_ndÆloc
, 
uöt64_t
);

557 
	`CTL_M2_GET
("°©s.¨ías.0.œrge.ƒeque°s", 
i
, &
œrge_ƒeque°s
,

558 
uöt64_t
);

559 i‡(
js⁄
) {

560 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

563 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

564 "\t\t\t\t\t\"Æloˇãd\": %zu,\n", 
œrge_Æloˇãd
);

565 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

566 "\t\t\t\t\t\"nmÆloc\": %"
FMTu64
",\n", 
œrge_nmÆloc
);

567 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

568 "\t\t\t\t\t\"ndÆloc\": %"
FMTu64
",\n", 
œrge_ndÆloc
);

569 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

570 "\t\t\t\t\t\"ƒeque°s\": %"
FMTu64
"\n", 
œrge_ƒeque°s
);

572 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

575 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

576 "œrge: %12zu %12"
FMTu64
" %12"FMTu64

577 " %12"
FMTu64
"\n",

578 
œrge_Æloˇãd
, 
œrge_nmÆloc
, 
œrge_ndÆloc
,

579 
œrge_ƒeque°s
);

580 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

581 "tŸÆ: %12zu %12"
FMTu64
" %12"FMTu64

582 " %12"
FMTu64
"\n",

583 
smÆl_Æloˇãd
 + 
œrge_Æloˇãd
, 
smÆl_nmÆloc
 +

584 
œrge_nmÆloc
, 
smÆl_ndÆloc
 + 
œrge_ndÆloc
,

585 
smÆl_ƒeque°s
 + 
œrge_ƒeque°s
);

587 i‡(!
js⁄
) {

588 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

589 "a˘ive: %12zu\n", 
∑˘ive
 * 
∑ge
);

592 
	`CTL_M2_GET
("°©s.¨ías.0.m≠≥d", 
i
, &
m≠≥d
, 
size_t
);

593 i‡(
js⁄
) {

594 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

595 "\t\t\t\t\"m≠≥d\": %zu,\n", 
m≠≥d
);

597 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

598 "m≠≥d: %12zu\n", 
m≠≥d
);

601 
	`CTL_M2_GET
("°©s.¨ías.0.ªèöed", 
i
, &
ªèöed
, 
size_t
);

602 i‡(
js⁄
) {

603 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

604 "\t\t\t\t\"ªèöed\": %zu,\n", 
ªèöed
);

606 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

607 "ªèöed: %12zu\n", 
ªèöed
);

610 
	`CTL_M2_GET
("°©s.¨ías.0.ba£", 
i
, &
ba£
, 
size_t
);

611 i‡(
js⁄
) {

612 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

613 "\t\t\t\t\"ba£\": %zu,\n", 
ba£
);

615 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

616 "ba£: %12zu\n", 
ba£
);

619 
	`CTL_M2_GET
("°©s.¨ías.0.öã∫Æ", 
i
, &
öã∫Æ
, 
size_t
);

620 i‡(
js⁄
) {

621 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

622 "\t\t\t\t\"öã∫Æ\": %zu,\n", 
öã∫Æ
);

624 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

625 "öã∫Æ: %12zu\n", 
öã∫Æ
);

628 
	`CTL_M2_GET
("°©s.¨ías.0.mëad©a_thp", 
i
, &
mëad©a_thp
, 
size_t
);

629 i‡(
js⁄
) {

630 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

631 "\t\t\t\t\"mëad©a_thp\": %zu,\n", 
mëad©a_thp
);

633 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

634 "mëad©a_thp: %12zu\n", 
mëad©a_thp
);

637 
	`CTL_M2_GET
("°©s.¨ías.0.tˇche_byãs", 
i
, &
tˇche_byãs
, 
size_t
);

638 i‡(
js⁄
) {

639 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

640 "\t\t\t\t\"tˇche\": %zu,\n", 
tˇche_byãs
);

642 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

643 "tˇche: %12zu\n", 
tˇche_byãs
);

646 
	`CTL_M2_GET
("°©s.¨ías.0.ªsidít", 
i
, &
ªsidít
, 
size_t
);

647 i‡(
js⁄
) {

648 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

649 "\t\t\t\t\"ªsidít\": %zu%s\n", 
ªsidít
,

650 (
bös
 || 
œrge
 || 
muãx
) ? "," : "");

652 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

653 "ªsidít: %12zu\n", 
ªsidít
);

656 i‡(
muãx
) {

657 
	`°©s_¨ía_muãxes_¥öt
(
wrôe_cb
, 
cb›aque
, 
js⁄
,

658 !(
bös
 || 
œrge
), 
i
);

660 i‡(
bös
) {

661 
	`°©s_¨ía_bös_¥öt
(
wrôe_cb
, 
cb›aque
, 
js⁄
, 
œrge
, 
muãx
,

662 
i
);

664 i‡(
œrge
) {

665 
	`°©s_¨ía_Àxã¡s_¥öt
(
wrôe_cb
, 
cb›aque
, 
js⁄
, 
i
);

667 
	}
}

670 
	$°©s_gíîÆ_¥öt
((*
wrôe_cb
)(*, c⁄° *), *
cb›aque
,

671 
boﬁ
 
js⁄
, boﬁ 
m‹e
) {

672 c⁄° *
˝v
;

673 
boﬁ
 
bv
;

674 
uv
;

675 
uöt32_t
 
u32v
;

676 
uöt64_t
 
u64v
;

677 
ssize_t
 
ssv
;

678 
size_t
 
sv
, 
bsz
, 
usz
, 
ssz
, 
sssz
, 
˝sz
;

680 
bsz
 = (
boﬁ
);

681 
usz
 = ();

682 
ssz
 = (
size_t
);

683 
sssz
 = (
ssize_t
);

684 
˝sz
 = (const *);

686 
	`CTL_GET
("vîsi⁄", &
˝v
, const *);

687 i‡(
js⁄
) {

688 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

689 "\t\t\"vîsi⁄\": \"%s\",\n", 
˝v
);

691 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "Vîsi⁄: %s\n", 
˝v
);

695 
	#CONFIG_WRITE_BOOL_JSON
(
n
, 
c
) \

696 i‡(
js⁄
) { \

697 
	`CTL_GET
("c⁄fig."#n, &
bv
, 
boﬁ
); \

698 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

699 "\t\t\t\""#n"\": %s%s\n", 
bv
 ? "true" : "false", \

700 (
c
)); \

701 }

	)

703 i‡(
js⁄
) {

704 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

708 
	`CONFIG_WRITE_BOOL_JSON
(
ˇche_oblivious
, ",")

710 
	`CTL_GET
("c⁄fig.debug", &
bv
, 
boﬁ
);

711 i‡(
js⁄
) {

712 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

713 "\t\t\t\"debug\": %s,\n", 
bv
 ? "true" : "false");

715 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "Assertions %s\n",

716 
bv
 ? "enabled" : "disabled");

719 
	`CONFIG_WRITE_BOOL_JSON
(
fûl
, ",")

720 
	`CONFIG_WRITE_BOOL_JSON
(
œzy_lock
, ",")

722 i‡(
js⁄
) {

723 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

725 
c⁄fig_mÆloc_c⁄f
);

727 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

728 "c⁄fig.mÆloc_c⁄f: \"%s\"\n", 
c⁄fig_mÆloc_c⁄f
);

731 
	`CONFIG_WRITE_BOOL_JSON
(
¥of
, ",")

732 
	`CONFIG_WRITE_BOOL_JSON
(
¥of_libgcc
, ",")

733 
	`CONFIG_WRITE_BOOL_JSON
(
¥of_libunwöd
, ",")

734 
	`CONFIG_WRITE_BOOL_JSON
(
°©s
, ",")

735 
	`CONFIG_WRITE_BOOL_JSON
(
thp
, ",")

736 
	`CONFIG_WRITE_BOOL_JSON
(
uåa˚
, ",")

737 
	`CONFIG_WRITE_BOOL_JSON
(
xmÆloc
, "")

739 i‡(
js⁄
) {

740 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

743 #unde‡
CONFIG_WRITE_BOOL_JSON


746 
	#OPT_WRITE_BOOL
(
n
, 
c
) \

747 i‡(
	`je_mÆl˘l
("›t."#n, (*)&
bv
, &
bsz
, 
NULL
, 0) == 0) { \

748 i‡(
js⁄
) { \

749 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

750 "\t\t\t\""#n"\": %s%s\n", 
bv
 ? "true" : \

751 "Ál£", (
c
)); \

753 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

754 " o±."#n": %s\n", 
bv
 ? "true" : "false"); \

756 }

	)

757 
	#OPT_WRITE_BOOL_MUTABLE
(
n
, 
m
, 
c
) { \

758 
boﬁ
 
bv2
; \

759 i‡(
	`je_mÆl˘l
("›t."#n, (*)&
bv
, &
bsz
, 
NULL
, 0) == 0 && \

760 
	`je_mÆl˘l
(#m, (*)&
bv2
, &
bsz
, 
NULL
, 0) == 0) { \

761 i‡(
js⁄
) { \

762 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

763 "\t\t\t\""#n"\": %s%s\n", 
bv
 ? "true" : \

764 "Ál£", (
c
)); \

766 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

767 " o±."#n": %†("#m": %s)\n", 
bv
 ? "true" \

768 : "Ál£", 
bv2
 ? "true" : "false"); \

771 }

	)

772 
	#OPT_WRITE_UNSIGNED
(
n
, 
c
) \

773 i‡(
	`je_mÆl˘l
("›t."#n, (*)&
uv
, &
usz
, 
NULL
, 0) == 0) { \

774 i‡(
js⁄
) { \

775 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

776 "\t\t\t\""#n"\": %u%s\n", 
uv
, (
c
)); \

778 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

779 " o±."#n": %u\n", 
uv
); \

781 }

	)

782 
	#OPT_WRITE_SSIZE_T
(
n
, 
c
) \

783 i‡(
	`je_mÆl˘l
("›t."#n, (*)&
ssv
, &
sssz
, 
NULL
, 0) == 0) { \

784 i‡(
js⁄
) { \

785 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

786 "\t\t\t\""#n"\": %zd%s\n", 
ssv
, (
c
)); \

788 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

789 " o±."#n": %zd\n", 
ssv
); \

791 }

	)

792 
	#OPT_WRITE_SSIZE_T_MUTABLE
(
n
, 
m
, 
c
) { \

793 
ssize_t
 
ssv2
; \

794 i‡(
	`je_mÆl˘l
("›t."#n, (*)&
ssv
, &
sssz
, 
NULL
, 0) == 0 && \

795 
	`je_mÆl˘l
(#m, (*)&
ssv2
, &
sssz
, 
NULL
, 0) == 0) { \

796 i‡(
js⁄
) { \

797 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

798 "\t\t\t\""#n"\": %zd%s\n", 
ssv
, (
c
)); \

800 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

802 
ssv
, 
ssv2
); \

805 }

	)

806 
	#OPT_WRITE_CHAR_P
(
n
, 
c
) \

807 i‡(
	`je_mÆl˘l
("›t."#n, (*)&
˝v
, &
˝sz
, 
NULL
, 0) == 0) { \

808 i‡(
js⁄
) { \

809 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

810 "\t\t\t\""#n"\": \"%s\"%s\n", 
˝v
, (
c
)); \

812 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, \

813 " o±."#n": \"%s\"\n", 
˝v
); \

815 }

	)

817 i‡(
js⁄
) {

818 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

821 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

824 
	`OPT_WRITE_BOOL
(
ab‹t
, ",")

825 
	`OPT_WRITE_BOOL
(
ab‹t_c⁄f
, ",")

826 
	`OPT_WRITE_BOOL
(
ªèö
, ",")

827 
	`OPT_WRITE_CHAR_P
(
dss
, ",")

828 
	`OPT_WRITE_UNSIGNED
(
«ª«s
, ",")

829 
	`OPT_WRITE_CHAR_P
(
≥r˝u_¨ía
, ",")

830 
	`OPT_WRITE_CHAR_P
(
mëad©a_thp
, ",")

831 
	`OPT_WRITE_BOOL_MUTABLE
(
background_thªad
, background_thread, ",")

832 
	`OPT_WRITE_SSIZE_T_MUTABLE
(
dúty_deˇy_ms
, 
¨ías
.dirty_decay_ms, ",")

833 
	`OPT_WRITE_SSIZE_T_MUTABLE
(
muzzy_deˇy_ms
, 
¨ías
.muzzy_decay_ms, ",")

834 
	`OPT_WRITE_UNSIGNED
(
lg_exã¡_max_a˘ive_fô
, ",")

835 
	`OPT_WRITE_CHAR_P
(
junk
, ",")

836 
	`OPT_WRITE_BOOL
(
zîo
, ",")

837 
	`OPT_WRITE_BOOL
(
uåa˚
, ",")

838 
	`OPT_WRITE_BOOL
(
xmÆloc
, ",")

839 
	`OPT_WRITE_BOOL
(
tˇche
, ",")

840 
	`OPT_WRITE_SSIZE_T
(
lg_tˇche_max
, ",")

841 
	`OPT_WRITE_BOOL
(
¥of
, ",")

842 
	`OPT_WRITE_CHAR_P
(
¥of_¥efix
, ",")

843 
	`OPT_WRITE_BOOL_MUTABLE
(
¥of_a˘ive
, 
¥of
.
a˘ive
, ",")

844 
	`OPT_WRITE_BOOL_MUTABLE
(
¥of_thªad_a˘ive_öô
, 
¥of
.
thªad_a˘ive_öô
,

846 
	`OPT_WRITE_SSIZE_T_MUTABLE
(
lg_¥of_ßm∂e
, 
¥of
.
lg_ßm∂e
, ",")

847 
	`OPT_WRITE_BOOL
(
¥of_accum
, ",")

848 
	`OPT_WRITE_SSIZE_T
(
lg_¥of_öãrvÆ
, ",")

849 
	`OPT_WRITE_BOOL
(
¥of_gdump
, ",")

850 
	`OPT_WRITE_BOOL
(
¥of_föÆ
, ",")

851 
	`OPT_WRITE_BOOL
(
¥of_Àak
, ",")

852 
	`OPT_WRITE_BOOL
(
°©s_¥öt
, ",")

853 i‡(
js⁄
 || 
›t_°©s_¥öt
) {

860 
	`OPT_WRITE_CHAR_P
(
°©s_¥öt_›ts
, "")

862 i‡(
js⁄
) {

863 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

867 #unde‡
OPT_WRITE_BOOL


868 #unde‡
OPT_WRITE_BOOL_MUTABLE


869 #unde‡
OPT_WRITE_UNSIGNED


870 #unde‡
OPT_WRITE_SSIZE_T


871 #unde‡
OPT_WRITE_SSIZE_T_MUTABLE


872 #unde‡
OPT_WRITE_CHAR_P


875 i‡(
js⁄
) {

876 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

880 
	`CTL_GET
("¨ías.«ª«s", &
uv
, );

881 i‡(
js⁄
) {

882 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

883 "\t\t\t\"«ª«s\": %u,\n", 
uv
);

885 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "Aª«s: %u\n", 
uv
);

888 i‡(
js⁄
) {

889 
	`CTL_GET
("¨ías.dúty_deˇy_ms", &
ssv
, 
ssize_t
);

890 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

891 "\t\t\t\"dúty_deˇy_ms\": %zd,\n", 
ssv
);

893 
	`CTL_GET
("¨ías.muzzy_deˇy_ms", &
ssv
, 
ssize_t
);

894 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

895 "\t\t\t\"muzzy_deˇy_ms\": %zd,\n", 
ssv
);

898 
	`CTL_GET
("¨ías.qu™tum", &
sv
, 
size_t
);

899 i‡(
js⁄
) {

900 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

901 "\t\t\t\"qu™tum\": %zu,\n", 
sv
);

903 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "Qu™tum size: %zu\n", 
sv
);

906 
	`CTL_GET
("¨ías.∑ge", &
sv
, 
size_t
);

907 i‡(
js⁄
) {

908 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

909 "\t\t\t\"∑ge\": %zu,\n", 
sv
);

911 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "Pagêsize: %zu\n", 
sv
);

914 i‡(
	`je_mÆl˘l
("¨ías.tˇche_max", (*)&
sv
, &
ssz
, 
NULL
, 0) == 0) {

915 i‡(
js⁄
) {

916 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

917 "\t\t\t\"tˇche_max\": %zu,\n", 
sv
);

919 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

920 "MaximumÅhªad-ˇched sizê˛ass: %zu\n", 
sv
);

924 i‡(
js⁄
) {

925 
nbös
, 
∆exã¡s
, 
i
;

927 
	`CTL_GET
("¨ías.nbös", &
nbös
, );

928 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

929 "\t\t\t\"nbös\": %u,\n", 
nbös
);

931 
	`CTL_GET
("¨ías.nhbös", &
uv
, );

932 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "\t\t\t\"nhbins\": %u,\n",

933 
uv
);

935 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

937 
i
 = 0; i < 
nbös
; i++) {

938 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

941 
	`CTL_M2_GET
("¨ías.bö.0.size", 
i
, &
sv
, 
size_t
);

942 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

943 "\t\t\t\t\t\"size\": %zu,\n", 
sv
);

945 
	`CTL_M2_GET
("¨ías.bö.0.ƒegs", 
i
, &
u32v
, 
uöt32_t
);

946 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

947 "\t\t\t\t\t\"ƒegs\": %"
FMTu32
",\n", 
u32v
);

949 
	`CTL_M2_GET
("¨ías.bö.0.¶ab_size", 
i
, &
sv
, 
size_t
);

950 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

951 "\t\t\t\t\t\"¶ab_size\": %zu\n", 
sv
);

953 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

954 "\t\t\t\t}%s\n", (
i
 + 1 < 
nbös
) ? "," : "");

956 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

959 
	`CTL_GET
("¨ías.∆exã¡s", &
∆exã¡s
, );

960 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

961 "\t\t\t\"∆exã¡s\": %u,\n", 
∆exã¡s
);

963 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

965 
i
 = 0; i < 
∆exã¡s
; i++) {

966 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

969 
	`CTL_M2_GET
("¨ías.Àxã¡.0.size", 
i
, &
sv
, 
size_t
);

970 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

971 "\t\t\t\t\t\"size\": %zu\n", 
sv
);

973 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

974 "\t\t\t\t}%s\n", (
i
 + 1 < 
∆exã¡s
) ? "," : "");

976 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

979 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

980 "\t\t}%s\n", (
c⁄fig_¥of
 || 
m‹e
) ? "," : "");

984 i‡(
c⁄fig_¥of
 && 
js⁄
) {

985 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

988 
	`CTL_GET
("¥of.thªad_a˘ive_öô", &
bv
, 
boﬁ
);

989 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

990 "\t\t\t\"thªad_a˘ive_öô\": %s,\n", 
bv
 ? "true" :

993 
	`CTL_GET
("¥of.a˘ive", &
bv
, 
boﬁ
);

994 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

995 "\t\t\t\"a˘ive\": %s,\n", 
bv
 ? "true" : "false");

997 
	`CTL_GET
("¥of.gdump", &
bv
, 
boﬁ
);

998 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

999 "\t\t\t\"gdump\": %s,\n", 
bv
 ? "true" : "false");

1001 
	`CTL_GET
("¥of.öãrvÆ", &
u64v
, 
uöt64_t
);

1002 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1003 "\t\t\t\"öãrvÆ\": %"
FMTu64
",\n", 
u64v
);

1005 
	`CTL_GET
("¥of.lg_ßm∂e", &
ssv
, 
ssize_t
);

1006 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1007 "\t\t\t\"lg_ßm∂e\": %zd\n", 
ssv
);

1009 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1010 "\t\t}%s\n", 
m‹e
 ? "," : "");

1012 
	}
}

1015 
	$ªad_globÆ_muãx_°©s
(

1016 
uöt64_t
 
ªsu…s_uöt64_t
[
muãx_¥of_num_globÆ_muãxes
][
muãx_¥of_num_uöt64_t_cou¡îs
],

1017 
uöt32_t
 
ªsu…s_uöt32_t
[
muãx_¥of_num_globÆ_muãxes
][
muãx_¥of_num_uöt32_t_cou¡îs
]) {

1018 
cmd
[
MUTEX_CTL_STR_MAX_LENGTH
];

1020 
muãx_¥of_globÆ_öd_t
 
i
;

1021 
i
 = 0; i < 
muãx_¥of_num_globÆ_muãxes
; i++) {

1022 
	#OP
(
c
, 
t
) \

1023 
	`gí_muãx_˘l_°r
(
cmd
, 
MUTEX_CTL_STR_MAX_LENGTH
, \

1024 "muãxes", 
globÆ_muãx_«mes
[
i
], #c); \

1025 
	`CTL_GET
(
cmd
, (
t
 *)&
ªsu…s_
##t[
i
][
muãx_cou¡î_
##
c
],Å);

	)

1026 
MUTEX_PROF_COUNTERS


1027 #unde‡
OP


1029 
	}
}

1032 
	$°©s_¥öt_hñ≥r
((*
wrôe_cb
)(*, c⁄° *), *
cb›aque
,

1033 
boﬁ
 
js⁄
, boﬁ 
mîged
, boﬁ 
de°royed
, boﬁ 
unmîged
, boﬁ 
bös
,

1034 
boﬁ
 
œrge
, boﬁ 
muãx
) {

1035 
size_t
 
Æloˇãd
, 
a˘ive
, 
mëad©a
, 
mëad©a_thp
, 
ªsidít
, 
m≠≥d
,

1036 
ªèöed
;

1037 
size_t
 
num_background_thªads
;

1038 
uöt64_t
 
background_thªad_num_runs
, 
background_thªad_run_öãrvÆ
;

1040 
	`CTL_GET
("°©s.Æloˇãd", &
Æloˇãd
, 
size_t
);

1041 
	`CTL_GET
("°©s.a˘ive", &
a˘ive
, 
size_t
);

1042 
	`CTL_GET
("°©s.mëad©a", &
mëad©a
, 
size_t
);

1043 
	`CTL_GET
("°©s.mëad©a_thp", &
mëad©a_thp
, 
size_t
);

1044 
	`CTL_GET
("°©s.ªsidít", &
ªsidít
, 
size_t
);

1045 
	`CTL_GET
("°©s.m≠≥d", &
m≠≥d
, 
size_t
);

1046 
	`CTL_GET
("°©s.ªèöed", &
ªèöed
, 
size_t
);

1048 
uöt64_t
 
muãx_°©s_uöt64_t
[
muãx_¥of_num_globÆ_muãxes
][
muãx_¥of_num_uöt64_t_cou¡îs
];

1049 
uöt32_t
 
muãx_°©s_uöt32_t
[
muãx_¥of_num_globÆ_muãxes
][
muãx_¥of_num_uöt32_t_cou¡îs
];

1050 i‡(
muãx
) {

1051 
	`ªad_globÆ_muãx_°©s
(
muãx_°©s_uöt64_t
, 
muãx_°©s_uöt32_t
);

1054 i‡(
have_background_thªad
) {

1055 
	`CTL_GET
("stats.background_thread.num_threads",

1056 &
num_background_thªads
, 
size_t
);

1057 
	`CTL_GET
("stats.background_thread.num_runs",

1058 &
background_thªad_num_runs
, 
uöt64_t
);

1059 
	`CTL_GET
("stats.background_thread.run_interval",

1060 &
background_thªad_run_öãrvÆ
, 
uöt64_t
);

1062 
num_background_thªads
 = 0;

1063 
background_thªad_num_runs
 = 0;

1064 
background_thªad_run_öãrvÆ
 = 0;

1067 i‡(
js⁄
) {

1068 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1071 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1072 "\t\t\t\"Æloˇãd\": %zu,\n", 
Æloˇãd
);

1073 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1074 "\t\t\t\"a˘ive\": %zu,\n", 
a˘ive
);

1075 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1076 "\t\t\t\"mëad©a\": %zu,\n", 
mëad©a
);

1077 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1078 "\t\t\t\"mëad©a_thp\": %zu,\n", 
mëad©a_thp
);

1079 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1080 "\t\t\t\"ªsidít\": %zu,\n", 
ªsidít
);

1081 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1082 "\t\t\t\"m≠≥d\": %zu,\n", 
m≠≥d
);

1083 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1084 "\t\t\t\"ªèöed\": %zu,\n", 
ªèöed
);

1086 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1088 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1089 "\t\t\t\t\"num_thªads\": %zu,\n", 
num_background_thªads
);

1090 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1091 "\t\t\t\t\"num_runs\": %"
FMTu64
",\n",

1092 
background_thªad_num_runs
);

1093 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1094 "\t\t\t\t\"run_öãrvÆ\": %"
FMTu64
"\n",

1095 
background_thªad_run_öãrvÆ
);

1096 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "\t\t\t}%s\n",

1097 
muãx
 ? "," : "");

1099 i‡(
muãx
) {

1100 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1102 
muãx_¥of_globÆ_öd_t
 
i
;

1103 
i
 = 0; i < 
muãx_¥of_num_globÆ_muãxes
; i++) {

1104 
	`muãx_°©s_ouçut_js⁄
(
wrôe_cb
, 
cb›aque
,

1105 
globÆ_muãx_«mes
[
i
], 
muãx_°©s_uöt64_t
[i], 
muãx_°©s_uöt32_t
[i],

1107 
i
 =
muãx_¥of_num_globÆ_muãxes
 - 1);

1109 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
, "\t\t\t}\n");

1111 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1112 "\t\t}%s\n", (
mîged
 || 
unmîged
 || 
de°royed
) ? "," : "");

1114 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1117 
Æloˇãd
, 
a˘ive
, 
mëad©a
, 
mëad©a_thp
, 
ªsidít
, 
m≠≥d
,

1118 
ªèöed
);

1120 i‡(
have_background_thªad
 && 
num_background_thªads
 > 0) {

1121 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1122 "BackgroundÅhªads: %zu,Çum_runs: %"
FMTu64
", "

1123 "run_öãrvÆ: %"
FMTu64
"Çs\n",

1124 
num_background_thªads
,

1125 
background_thªad_num_runs
,

1126 
background_thªad_run_öãrvÆ
);

1128 i‡(
muãx
) {

1129 
muãx_¥of_globÆ_öd_t
 
i
;

1130 
i
 = 0; i < 
muãx_¥of_num_globÆ_muãxes
; i++) {

1131 
	`muãx_°©s_ouçut
(
wrôe_cb
, 
cb›aque
,

1132 
globÆ_muãx_«mes
[
i
], 
muãx_°©s_uöt64_t
[i], 
muãx_°©s_uöt32_t
[i],

1133 
i
 == 0);

1138 i‡(
mîged
 || 
de°royed
 || 
unmîged
) {

1139 
«ª«s
;

1141 i‡(
js⁄
) {

1142 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1146 
	`CTL_GET
("¨ías.«ª«s", &
«ª«s
, );

1148 
size_t
 
mib
[3];

1149 
size_t
 
mibÀn
 = (
mib
) / (size_t);

1150 
size_t
 
sz
;

1151 
	`VARIABLE_ARRAY
(
boﬁ
, 
öôülized
, 
«ª«s
);

1152 
boﬁ
 
de°royed_öôülized
;

1153 
i
, 
j
, 
nöôülized
;

1155 
	`xmÆl˘ amëomib
("¨ía.0.öôülized", 
mib
, &
mibÀn
);

1156 
i
 = 
nöôülized
 = 0; i < 
«ª«s
; i++) {

1157 
mib
[1] = 
i
;

1158 
sz
 = (
boﬁ
);

1159 
	`xmÆl˘lbymib
(
mib
, 
mibÀn
, &
öôülized
[
i
], &
sz
,

1160 
NULL
, 0);

1161 i‡(
öôülized
[
i
]) {

1162 
nöôülized
++;

1165 
mib
[1] = 
MALLCTL_ARENAS_DESTROYED
;

1166 
sz
 = (
boﬁ
);

1167 
	`xmÆl˘lbymib
(
mib
, 
mibÀn
, &
de°royed_öôülized
, &
sz
,

1168 
NULL
, 0);

1171 i‡(
mîged
 && (
nöôülized
 > 1 || !
unmîged
)) {

1173 i‡(
js⁄
) {

1174 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1177 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1180 
	`°©s_¨ía_¥öt
(
wrôe_cb
, 
cb›aque
, 
js⁄
,

1181 
MALLCTL_ARENAS_ALL
, 
bös
, 
œrge
, 
muãx
);

1182 i‡(
js⁄
) {

1183 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1185 ((
de°royed_öôülized
 &&

1186 
de°royed
Ë|| 
unmîged
) ? "," :

1192 i‡(
de°royed_öôülized
 && 
de°royed
) {

1194 i‡(
js⁄
) {

1195 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1198 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1201 
	`°©s_¨ía_¥öt
(
wrôe_cb
, 
cb›aque
, 
js⁄
,

1202 
MALLCTL_ARENAS_DESTROYED
, 
bös
, 
œrge
,

1203 
muãx
);

1204 i‡(
js⁄
) {

1205 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1206 "\t\t\t}%s\n", 
unmîged
 ? "," :

1212 i‡(
unmîged
) {

1213 
i
 = 
j
 = 0; i < 
«ª«s
; i++) {

1214 i‡(
öôülized
[
i
]) {

1215 i‡(
js⁄
) {

1216 
j
++;

1217 
	`mÆloc_˝rötf
(
wrôe_cb
,

1218 
cb›aque
,

1220 
i
);

1222 
	`mÆloc_˝rötf
(
wrôe_cb
,

1223 
cb›aque
,

1225 
i
);

1227 
	`°©s_¨ía_¥öt
(
wrôe_cb
,

1228 
cb›aque
, 
js⁄
, 
i
, 
bös
,

1229 
œrge
, 
muãx
);

1230 i‡(
js⁄
) {

1231 
	`mÆloc_˝rötf
(
wrôe_cb
,

1232 
cb›aque
,

1233 "\t\t\t}%s\n", (
j
 <

1234 
nöôülized
) ? ","

1242 i‡(
js⁄
) {

1243 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1247 
	}
}

1250 
	$°©s_¥öt
((*
wrôe_cb
)(*, c⁄° *), *
cb›aque
,

1251 c⁄° *
›ts
) {

1252 
îr
;

1253 
uöt64_t
 
ïoch
;

1254 
size_t
 
u64sz
;

1255 
	#OPTION
(
o
, 
v
, 
d
, 
s
Ë
boﬁ
 v = d;

	)

1256 
STATS_PRINT_OPTIONS


1257 #unde‡
OPTION


1266 
ïoch
 = 1;

1267 
u64sz
 = (
uöt64_t
);

1268 
îr
 = 
	`je_mÆl˘l
("ïoch", (*)&
ïoch
, &
u64sz
, (*)&epoch,

1269 (
uöt64_t
));

1270 i‡(
îr
 != 0) {

1271 i‡(
îr
 =
EAGAIN
) {

1272 
	`mÆloc_wrôe
("<jemalloc>: Memoryállocation failure in "

1276 
	`mÆloc_wrôe
("<jemalloc>: Failure in mallctl(\"epoch\", "

1278 
	`ab‹t
();

1281 i‡(
›ts
 !
NULL
) {

1282 
i
 = 0; 
›ts
[i] != '\0'; i++) {

1283 
›ts
[
i
]) {

1284 
	#OPTION
(
o
, 
v
, 
d
, 
s
Ëo: v = s; ;

	)

1285 
STATS_PRINT_OPTIONS


1286 #unde‡
OPTION


1292 i‡(
js⁄
) {

1293 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1297 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1301 i‡(
gíîÆ
) {

1302 
	`°©s_gíîÆ_¥öt
(
wrôe_cb
, 
cb›aque
, 
js⁄
, 
c⁄fig_°©s
);

1304 i‡(
c⁄fig_°©s
) {

1305 
	`°©s_¥öt_hñ≥r
(
wrôe_cb
, 
cb›aque
, 
js⁄
, 
mîged
, 
de°royed
,

1306 
unmîged
, 
bös
, 
œrge
, 
muãx
);

1309 i‡(
js⁄
) {

1310 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1314 
	`mÆloc_˝rötf
(
wrôe_cb
, 
cb›aque
,

1317 
	}
}

	@src/sz.c

1 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

2 
	~"jemÆloc/öã∫Æ/sz.h
"

4 
	$JEMALLOC_ALIGNED
(
CACHELINE
)

5 c⁄° 
size_t
 
sz_pöd2sz_èb
[
NPSIZES
+1] = {

6 
	#PSZ_yes
(
lg_gΩ
, 
ndñè
, 
lg_dñè
) \

7 (((
	`ZU
(1)<<
lg_gΩ
Ë+ (ZU(
ndñè
)<<
lg_dñè
))),

	)

8 
	#PSZ_no
(
lg_gΩ
, 
ndñè
, 
lg_dñè
)

	)

9 
	#SC
(
ödex
, 
lg_gΩ
, 
lg_dñè
, 
ndñè
, 
psz
, 
bö
, 
pgs
, 
lg_dñè_lookup
) \

10 
PSZ_
##
	`psz
(
lg_gΩ
, 
ndñè
, 
lg_dñè
)

	)

11 
SIZE_CLASSES


12 #unde‡
PSZ_yes


13 #unde‡
PSZ_no


14 #unde‡
SC


15 (
LARGE_MAXCLASS
 + 
PAGE
)

16 
	}
};

18 
	$JEMALLOC_ALIGNED
(
CACHELINE
)

19 c⁄° 
size_t
 
sz_ödex2size_èb
[
NSIZES
] = {

20 
	#SC
(
ödex
, 
lg_gΩ
, 
lg_dñè
, 
ndñè
, 
psz
, 
bö
, 
pgs
, 
lg_dñè_lookup
) \

21 ((
	`ZU
(1)<<
lg_gΩ
Ë+ (ZU(
ndñè
)<<
lg_dñè
)),

	)

22 
SIZE_CLASSES


23 #unde‡
SC


24 
	}
};

26 
	$JEMALLOC_ALIGNED
(
CACHELINE
)

27 c⁄° 
uöt8_t
 
sz_size2ödex_èb
[] = {

28 #i‡
LG_TINY_MIN
 == 0

31 
	#S2B_0
(
i
Ëi,

	)

32 #ñi‡
LG_TINY_MIN
 == 1

34 
	#S2B_1
(
i
Ëi,

	)

35 #ñi‡
LG_TINY_MIN
 == 2

37 
	#S2B_2
(
i
Ëi,

	)

38 #ñi‡
LG_TINY_MIN
 == 3

39 
	#S2B_3
(
i
Ëi,

	)

40 #ñi‡
LG_TINY_MIN
 == 4

41 
	#S2B_4
(
i
Ëi,

	)

42 #ñi‡
LG_TINY_MIN
 == 5

43 
	#S2B_5
(
i
Ëi,

	)

44 #ñi‡
LG_TINY_MIN
 == 6

45 
	#S2B_6
(
i
Ëi,

	)

46 #ñi‡
LG_TINY_MIN
 == 7

47 
	#S2B_7
(
i
Ëi,

	)

48 #ñi‡
LG_TINY_MIN
 == 8

49 
	#S2B_8
(
i
Ëi,

	)

50 #ñi‡
LG_TINY_MIN
 == 9

51 
	#S2B_9
(
i
Ëi,

	)

52 #ñi‡
LG_TINY_MIN
 == 10

53 
	#S2B_10
(
i
Ëi,

	)

54 #ñi‡
LG_TINY_MIN
 == 11

55 
	#S2B_11
(
i
Ëi,

	)

59 #i‡
LG_TINY_MIN
 < 1

60 
	#S2B_1
(
i
Ë
	`S2B_0
(iËS2B_0(i)

	)

62 #i‡
LG_TINY_MIN
 < 2

63 
	#S2B_2
(
i
Ë
	`S2B_1
(iËS2B_1(i)

	)

65 #i‡
LG_TINY_MIN
 < 3

66 
	#S2B_3
(
i
Ë
	`S2B_2
(iËS2B_2(i)

	)

68 #i‡
LG_TINY_MIN
 < 4

69 
	#S2B_4
(
i
Ë
	`S2B_3
(iËS2B_3(i)

	)

71 #i‡
LG_TINY_MIN
 < 5

72 
	#S2B_5
(
i
Ë
	`S2B_4
(iËS2B_4(i)

	)

74 #i‡
LG_TINY_MIN
 < 6

75 
	#S2B_6
(
i
Ë
	`S2B_5
(iËS2B_5(i)

	)

77 #i‡
LG_TINY_MIN
 < 7

78 
	#S2B_7
(
i
Ë
	`S2B_6
(iËS2B_6(i)

	)

80 #i‡
LG_TINY_MIN
 < 8

81 
	#S2B_8
(
i
Ë
	`S2B_7
(iËS2B_7(i)

	)

83 #i‡
LG_TINY_MIN
 < 9

84 
	#S2B_9
(
i
Ë
	`S2B_8
(iËS2B_8(i)

	)

86 #i‡
LG_TINY_MIN
 < 10

87 
	#S2B_10
(
i
Ë
	`S2B_9
(iËS2B_9(i)

	)

89 #i‡
LG_TINY_MIN
 < 11

90 
	#S2B_11
(
i
Ë
	`S2B_10
(iËS2B_10(i)

	)

92 
	#S2B_no
(
i
)

	)

93 
	#SC
(
ödex
, 
lg_gΩ
, 
lg_dñè
, 
ndñè
, 
psz
, 
bö
, 
pgs
, 
lg_dñè_lookup
) \

94 
S2B_
##
	`lg_dñè_lookup
(
ödex
)

	)

95 
SIZE_CLASSES


96 #unde‡
S2B_3


97 #unde‡
S2B_4


98 #unde‡
S2B_5


99 #unde‡
S2B_6


100 #unde‡
S2B_7


101 #unde‡
S2B_8


102 #unde‡
S2B_9


103 #unde‡
S2B_10


104 #unde‡
S2B_11


105 #unde‡
S2B_no


106 #unde‡
SC


107 
	}
};

	@src/tcache.c

1 
	#JEMALLOC_TCACHE_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/muãx.h
"

7 
	~"jemÆloc/öã∫Æ/size_˛as£s.h
"

12 
boﬁ
 
	g›t_tˇche
 = 
åue
;

13 
ssize_t
 
	g›t_lg_tˇche_max
 = 
LG_TCACHE_MAXCLASS_DEFAULT
;

15 
ˇche_bö_öfo_t
 *
	gtˇche_bö_öfo
;

16 
	g°ack_√lms
;

18 
	gnhbös
;

19 
size_t
 
	gtˇche_max˛ass
;

21 
tˇches_t
 *
	gtˇches
;

24 
	gtˇches_∑°
;

27 
tˇches_t
 *
	gtˇches_avaû
;

30 
mÆloc_muãx_t
 
	gtˇches_mtx
;

34 
size_t


35 
	$tˇche_ßŒoc
(
tsdn_t
 *
tsdn
, c⁄° *
±r
) {

36  
	`¨ía_ßŒoc
(
tsdn
, 
±r
);

37 
	}
}

40 
	$tˇche_evít_h¨d
(
tsd_t
 *
tsd
, 
tˇche_t
 *
tˇche
) {

41 
szöd_t
 
bööd
 = 
tˇche
->
√xt_gc_bö
;

43 
ˇche_bö_t
 *
tbö
;

44 i‡(
bööd
 < 
NBINS
) {

45 
tbö
 = 
	`tˇche_smÆl_bö_gë
(
tˇche
, 
bööd
);

47 
tbö
 = 
	`tˇche_œrge_bö_gë
(
tˇche
, 
bööd
);

49 i‡(
tbö
->
low_w©î
 > 0) {

53 i‡(
bööd
 < 
NBINS
) {

54 
	`tˇche_bö_Êush_smÆl
(
tsd
, 
tˇche
, 
tbö
, 
bööd
,

55 
tbö
->
nˇched
 -Åbö->
low_w©î
 + (tbin->low_water

61 
ˇche_bö_öfo_t
 *
tbö_öfo
 = &
tˇche_bö_öfo
[
bööd
];

62 i‡((
tbö_öfo
->
nˇched_max
 >>

63 (
tˇche
->
lg_fûl_div
[
bööd
] + 1)) >= 1) {

64 
tˇche
->
lg_fûl_div
[
bööd
]++;

67 
	`tˇche_bö_Êush_œrge
(
tsd
, 
tbö
, 
bööd
,Åbö->
nˇched


68 - 
tbö
->
low_w©î
 + (tbö->low_w©î >> 2), 
tˇche
);

70 } i‡(
tbö
->
low_w©î
 < 0) {

75 i‡(
bööd
 < 
NBINS
 && 
tˇche
->
lg_fûl_div
[binind] > 1) {

76 
tˇche
->
lg_fûl_div
[
bööd
]--;

79 
tbö
->
low_w©î
 =Åbö->
nˇched
;

81 
tˇche
->
√xt_gc_bö
++;

82 i‡(
tˇche
->
√xt_gc_bö
 =
nhbös
) {

83 
tˇche
->
√xt_gc_bö
 = 0;

85 
	}
}

88 
	$tˇche_Æloc_smÆl_h¨d
(
tsdn_t
 *
tsdn
, 
¨ía_t
 *
¨ía
, 
tˇche_t
 *
tˇche
,

89 
ˇche_bö_t
 *
tbö
, 
szöd_t
 
bööd
, 
boﬁ
 *
tˇche_suc˚ss
) {

90 *
ªt
;

92 
	`as£π
(
tˇche
->
¨ía
 !
NULL
);

93 
	`¨ía_tˇche_fûl_smÆl
(
tsdn
, 
¨ía
, 
tˇche
, 
tbö
, 
bööd
,

94 
c⁄fig_¥of
 ? 
tˇche
->
¥of_accumbyãs
 : 0);

95 i‡(
c⁄fig_¥of
) {

96 
tˇche
->
¥of_accumbyãs
 = 0;

98 
ªt
 = 
	`ˇche_bö_Æloc_ósy
(
tbö
, 
tˇche_suc˚ss
);

100  
ªt
;

101 
	}
}

104 
	$tˇche_bö_Êush_smÆl
(
tsd_t
 *
tsd
, 
tˇche_t
 *
tˇche
, 
ˇche_bö_t
 *
tbö
,

105 
szöd_t
 
bööd
, 
ªm
) {

106 
boﬁ
 
mîged_°©s
 = 
Ál£
;

108 
	`as£π
(
bööd
 < 
NBINS
);

109 
	`as£π
((
ˇche_bö_sz_t
)
ªm
 <
tbö
->
nˇched
);

111 
¨ía_t
 *
¨ía
 = 
tˇche
->arena;

112 
	`as£π
(
¨ía
 !
NULL
);

113 
nÊush
 = 
tbö
->
nˇched
 - 
ªm
;

114 
	`VARIABLE_ARRAY
(
exã¡_t
 *, 
ôem_exã¡
, 
nÊush
);

116 
i
 = 0 ; i < 
nÊush
; i++) {

117 
ôem_exã¡
[
i
] = 
	`õÆloc
(
	`tsd_tsdn
(
tsd
), *(
tbö
->
avaû
 - 1 - i));

120 
nÊush
 > 0) {

122 
exã¡_t
 *
exã¡
 = 
ôem_exã¡
[0];

123 
¨ía_t
 *
bö_¨ía
 = 
	`exã¡_¨ía_gë
(
exã¡
);

124 
bö_t
 *
bö
 = &
bö_¨ía
->
bös
[
bööd
];

126 i‡(
c⁄fig_¥of
 && 
bö_¨ía
 =
¨ía
) {

127 i‡(
	`¨ía_¥of_accum
(
	`tsd_tsdn
(
tsd
), 
¨ía
,

128 
tˇche
->
¥of_accumbyãs
)) {

129 
	`¥of_idump
(
	`tsd_tsdn
(
tsd
));

131 
tˇche
->
¥of_accumbyãs
 = 0;

134 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
bö
->
lock
);

135 i‡(
c⁄fig_°©s
 && 
bö_¨ía
 =
¨ía
) {

136 
	`as£π
(!
mîged_°©s
);

137 
mîged_°©s
 = 
åue
;

138 
bö
->
°©s
.
nÊushes
++;

139 
bö
->
°©s
.
ƒeque°s
 +
tbö
->
t°©s
.nrequests;

140 
tbö
->
t°©s
.
ƒeque°s
 = 0;

142 
nde„ºed
 = 0;

143 
i
 = 0; i < 
nÊush
; i++) {

144 *
±r
 = *(
tbö
->
avaû
 - 1 - 
i
);

145 
exã¡
 = 
ôem_exã¡
[
i
];

146 
	`as£π
(
±r
 !
NULL
 && 
exã¡
 != NULL);

148 i‡(
	`exã¡_¨ía_gë
(
exã¡
Ë=
bö_¨ía
) {

149 
	`¨ía_dÆloc_bö_junked_locked
(
	`tsd_tsdn
(
tsd
),

150 
bö_¨ía
, 
exã¡
, 
±r
);

158 *(
tbö
->
avaû
 - 1 - 
nde„ºed
Ë
±r
;

159 
ôem_exã¡
[
nde„ºed
] = 
exã¡
;

160 
nde„ºed
++;

163 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
bö
->
lock
);

164 
	`¨ía_deˇy_ticks
(
	`tsd_tsdn
(
tsd
), 
bö_¨ía
, 
nÊush
 - 
nde„ºed
);

165 
nÊush
 = 
nde„ºed
;

167 i‡(
c⁄fig_°©s
 && !
mîged_°©s
) {

172 
bö_t
 *
bö
 = &
¨ía
->
bös
[
bööd
];

173 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
bö
->
lock
);

174 
bö
->
°©s
.
nÊushes
++;

175 
bö
->
°©s
.
ƒeque°s
 +
tbö
->
t°©s
.nrequests;

176 
tbö
->
t°©s
.
ƒeque°s
 = 0;

177 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
bö
->
lock
);

180 
	`memmove
(
tbö
->
avaû
 - 
ªm
,Åbö->avaû -Åbö->
nˇched
,Ñem *

182 
tbö
->
nˇched
 = 
ªm
;

183 i‡(
tbö
->
nˇched
 <Åbö->
low_w©î
) {

184 
tbö
->
low_w©î
 =Åbö->
nˇched
;

186 
	}
}

189 
	$tˇche_bö_Êush_œrge
(
tsd_t
 *
tsd
, 
ˇche_bö_t
 *
tbö
, 
szöd_t
 
bööd
,

190 
ªm
, 
tˇche_t
 *
tˇche
) {

191 
boﬁ
 
mîged_°©s
 = 
Ál£
;

193 
	`as£π
(
bööd
 < 
nhbös
);

194 
	`as£π
((
ˇche_bö_sz_t
)
ªm
 <
tbö
->
nˇched
);

196 
¨ía_t
 *
¨ía
 = 
tˇche
->arena;

197 
	`as£π
(
¨ía
 !
NULL
);

198 
nÊush
 = 
tbö
->
nˇched
 - 
ªm
;

199 
	`VARIABLE_ARRAY
(
exã¡_t
 *, 
ôem_exã¡
, 
nÊush
);

201 
i
 = 0 ; i < 
nÊush
; i++) {

202 
ôem_exã¡
[
i
] = 
	`õÆloc
(
	`tsd_tsdn
(
tsd
), *(
tbö
->
avaû
 - 1 - i));

205 
nÊush
 > 0) {

207 
exã¡_t
 *
exã¡
 = 
ôem_exã¡
[0];

208 
¨ía_t
 *
locked_¨ía
 = 
	`exã¡_¨ía_gë
(
exã¡
);

209 
UNUSED
 
boﬁ
 
idump
;

211 i‡(
c⁄fig_¥of
) {

212 
idump
 = 
Ál£
;

215 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
locked_¨ía
->
œrge_mtx
);

216 
i
 = 0; i < 
nÊush
; i++) {

217 *
±r
 = *(
tbö
->
avaû
 - 1 - 
i
);

218 
	`as£π
(
±r
 !
NULL
);

219 
exã¡
 = 
ôem_exã¡
[
i
];

220 i‡(
	`exã¡_¨ía_gë
(
exã¡
Ë=
locked_¨ía
) {

221 
	`œrge_dÆloc_¥ï_junked_locked
(
	`tsd_tsdn
(
tsd
),

222 
exã¡
);

225 i‡((
c⁄fig_¥of
 || 
c⁄fig_°©s
Ë&& 
locked_¨ía
 =
¨ía
) {

226 i‡(
c⁄fig_¥of
) {

227 
idump
 = 
	`¨ía_¥of_accum
(
	`tsd_tsdn
(
tsd
), 
¨ía
,

228 
tˇche
->
¥of_accumbyãs
);

229 
tˇche
->
¥of_accumbyãs
 = 0;

231 i‡(
c⁄fig_°©s
) {

232 
mîged_°©s
 = 
åue
;

233 
	`¨ía_°©s_œrge_ƒeque°s_add
(
	`tsd_tsdn
(
tsd
),

234 &
¨ía
->
°©s
, 
bööd
,

235 
tbö
->
t°©s
.
ƒeque°s
);

236 
tbö
->
t°©s
.
ƒeque°s
 = 0;

239 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
locked_¨ía
->
œrge_mtx
);

241 
nde„ºed
 = 0;

242 
i
 = 0; i < 
nÊush
; i++) {

243 *
±r
 = *(
tbö
->
avaû
 - 1 - 
i
);

244 
exã¡
 = 
ôem_exã¡
[
i
];

245 
	`as£π
(
±r
 !
NULL
 && 
exã¡
 != NULL);

247 i‡(
	`exã¡_¨ía_gë
(
exã¡
Ë=
locked_¨ía
) {

248 
	`œrge_dÆloc_föish
(
	`tsd_tsdn
(
tsd
), 
exã¡
);

256 *(
tbö
->
avaû
 - 1 - 
nde„ºed
Ë
±r
;

257 
ôem_exã¡
[
nde„ºed
] = 
exã¡
;

258 
nde„ºed
++;

261 i‡(
c⁄fig_¥of
 && 
idump
) {

262 
	`¥of_idump
(
	`tsd_tsdn
(
tsd
));

264 
	`¨ía_deˇy_ticks
(
	`tsd_tsdn
(
tsd
), 
locked_¨ía
, 
nÊush
 -

265 
nde„ºed
);

266 
nÊush
 = 
nde„ºed
;

268 i‡(
c⁄fig_°©s
 && !
mîged_°©s
) {

273 
	`¨ía_°©s_œrge_ƒeque°s_add
(
	`tsd_tsdn
(
tsd
), &
¨ía
->
°©s
,

274 
bööd
, 
tbö
->
t°©s
.
ƒeque°s
);

275 
tbö
->
t°©s
.
ƒeque°s
 = 0;

278 
	`memmove
(
tbö
->
avaû
 - 
ªm
,Åbö->avaû -Åbö->
nˇched
,Ñem *

280 
tbö
->
nˇched
 = 
ªm
;

281 i‡(
tbö
->
nˇched
 <Åbö->
low_w©î
) {

282 
tbö
->
low_w©î
 =Åbö->
nˇched
;

284 
	}
}

287 
	$tˇche_¨ía_assocüã
(
tsdn_t
 *
tsdn
, 
tˇche_t
 *
tˇche
, 
¨ía_t
 *
¨ía
) {

288 
	`as£π
(
tˇche
->
¨ía
 =
NULL
);

289 
tˇche
->
¨ía
 =árena;

291 i‡(
c⁄fig_°©s
) {

293 
	`mÆloc_muãx_lock
(
tsdn
, &
¨ía
->
tˇche_ql_mtx
);

295 
	`ql_ñm_√w
(
tˇche
, 
lök
);

296 
	`ql_èû_ö£π
(&
¨ía
->
tˇche_ql
, 
tˇche
, 
lök
);

297 
	`ˇche_bö_¨øy_des¸ùt‹_öô
(

298 &
tˇche
->
ˇche_bö_¨øy_des¸ùt‹
,Åˇche->
bös_smÆl
,

299 
tˇche
->
bös_œrge
);

300 
	`ql_èû_ö£π
(&
¨ía
->
ˇche_bö_¨øy_des¸ùt‹_ql
,

301 &
tˇche
->
ˇche_bö_¨øy_des¸ùt‹
, 
lök
);

303 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ía
->
tˇche_ql_mtx
);

305 
	}
}

308 
	$tˇche_¨ía_dissocüã
(
tsdn_t
 *
tsdn
, 
tˇche_t
 *
tˇche
) {

309 
¨ía_t
 *
¨ía
 = 
tˇche
->arena;

310 
	`as£π
(
¨ía
 !
NULL
);

311 i‡(
c⁄fig_°©s
) {

313 
	`mÆloc_muãx_lock
(
tsdn
, &
¨ía
->
tˇche_ql_mtx
);

314 i‡(
c⁄fig_debug
) {

315 
boﬁ
 
ö_ql
 = 
Ál£
;

316 
tˇche_t
 *
ôî
;

317 
	`ql_f‹óch
(
ôî
, &
¨ía
->
tˇche_ql
, 
lök
) {

318 i‡(
ôî
 =
tˇche
) {

319 
ö_ql
 = 
åue
;

323 
	`as£π
(
ö_ql
);

325 
	`ql_ªmove
(&
¨ía
->
tˇche_ql
, 
tˇche
, 
lök
);

326 
	`ql_ªmove
(&
¨ía
->
ˇche_bö_¨øy_des¸ùt‹_ql
,

327 &
tˇche
->
ˇche_bö_¨øy_des¸ùt‹
, 
lök
);

328 
	`tˇche_°©s_mîge
(
tsdn
, 
tˇche
, 
¨ía
);

329 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
¨ía
->
tˇche_ql_mtx
);

331 
tˇche
->
¨ía
 = 
NULL
;

332 
	}
}

335 
	$tˇche_¨ía_ªassocüã
(
tsdn_t
 *
tsdn
, 
tˇche_t
 *
tˇche
, 
¨ía_t
 *
¨ía
) {

336 
	`tˇche_¨ía_dissocüã
(
tsdn
, 
tˇche
);

337 
	`tˇche_¨ía_assocüã
(
tsdn
, 
tˇche
, 
¨ía
);

338 
	}
}

340 
boﬁ


341 
	$tsd_tˇche_íabÀd_d©a_öô
(
tsd_t
 *
tsd
) {

343 
	`tsd_tˇche_íabÀd_£t
(
tsd
, 
›t_tˇche
);

344 
	`tsd_¶ow_upd©e
(
tsd
);

346 i‡(
›t_tˇche
) {

348 
	`tsd_tˇche_d©a_öô
(
tsd
);

351  
Ál£
;

352 
	}
}

356 
	$tˇche_öô
(
tsd_t
 *
tsd
, 
tˇche_t
 *
tˇche
, *
avaû_°ack
) {

357 
	`mem£t
(&
tˇche
->
lök
, 0, (
	`ql_ñm
(
tˇche_t
)));

358 
tˇche
->
¥of_accumbyãs
 = 0;

359 
tˇche
->
√xt_gc_bö
 = 0;

360 
tˇche
->
¨ía
 = 
NULL
;

362 
	`tickî_öô
(&
tˇche
->
gc_tickî
, 
TCACHE_GC_INCR
);

364 
size_t
 
°ack_off£t
 = 0;

365 
	`as£π
((
TCACHE_NSLOTS_SMALL_MAX
 & 1U) == 0);

366 
	`mem£t
(
tˇche
->
bös_smÆl
, 0, (
ˇche_bö_t
Ë* 
NBINS
);

367 
	`mem£t
(
tˇche
->
bös_œrge
, 0, (
ˇche_bö_t
Ë* (
nhbös
 - 
NBINS
));

368 
i
 = 0;

369 ; 
i
 < 
NBINS
; i++) {

370 
tˇche
->
lg_fûl_div
[
i
] = 1;

371 
°ack_off£t
 +
tˇche_bö_öfo
[
i
].
nˇched_max
 * (*);

377 
	`tˇche_smÆl_bö_gë
(
tˇche
, 
i
)->
avaû
 =

378 (**)((
uöçå_t
)
avaû_°ack
 + (uöçå_t)
°ack_off£t
);

380 ; 
i
 < 
nhbös
; i++) {

381 
°ack_off£t
 +
tˇche_bö_öfo
[
i
].
nˇched_max
 * (*);

382 
	`tˇche_œrge_bö_gë
(
tˇche
, 
i
)->
avaû
 =

383 (**)((
uöçå_t
)
avaû_°ack
 + (uöçå_t)
°ack_off£t
);

385 
	`as£π
(
°ack_off£t
 =
°ack_√lms
 * (*));

386 
	}
}

389 
boﬁ


390 
	$tsd_tˇche_d©a_öô
(
tsd_t
 *
tsd
) {

391 
tˇche_t
 *
tˇche
 = 
	`tsd_tˇchï_gë_unß„
(
tsd
);

392 
	`as£π
(
	`tˇche_smÆl_bö_gë
(
tˇche
, 0)->
avaû
 =
NULL
);

393 
size_t
 
size
 = 
°ack_√lms
 * (*);

395 
size
 = 
	`sz_ß2u
(size, 
CACHELINE
);

397 *
avaû_¨øy
 = 
	`ùÆlocztm
(
	`tsd_tsdn
(
tsd
), 
size
, 
CACHELINE
, 
åue
,

398 
NULL
, 
åue
, 
	`¨ía_gë
(
TSDN_NULL
, 0,Årue));

399 i‡(
avaû_¨øy
 =
NULL
) {

400  
åue
;

403 
	`tˇche_öô
(
tsd
, 
tˇche
, 
avaû_¨øy
);

412 
tˇche
->
¨ía
 = 
NULL
;

413 
¨ía_t
 *
¨ía
;

414 i‡(!
	`mÆloc_öôülized
()) {

416 
¨ía
 = 
	`¨ía_gë
(
	`tsd_tsdn
(
tsd
), 0, 
Ál£
);

417 
	`tˇche_¨ía_assocüã
(
	`tsd_tsdn
(
tsd
), 
tˇche
, 
¨ía
);

419 
¨ía
 = 
	`¨ía_choo£
(
tsd
, 
NULL
);

421 i‡(
tˇche
->
¨ía
 =
NULL
) {

422 
	`tˇche_¨ía_assocüã
(
	`tsd_tsdn
(
tsd
), 
tˇche
, 
¨ía
);

425 
	`as£π
(
¨ía
 =
tˇche
->arena);

427  
Ál£
;

428 
	}
}

431 
tˇche_t
 *

432 
	$tˇche_¸óã_ex∂icô
(
tsd_t
 *
tsd
) {

433 
tˇche_t
 *
tˇche
;

434 
size_t
 
size
, 
°ack_off£t
;

436 
size
 = (
tˇche_t
);

438 
size
 = 
	`PTR_CEILING
(size);

439 
°ack_off£t
 = 
size
;

440 
size
 +
°ack_√lms
 * (*);

442 
size
 = 
	`sz_ß2u
(size, 
CACHELINE
);

444 
tˇche
 = 
	`ùÆlocztm
(
	`tsd_tsdn
(
tsd
), 
size
, 
CACHELINE
, 
åue
, 
NULL
,Årue,

445 
	`¨ía_gë
(
TSDN_NULL
, 0, 
åue
));

446 i‡(
tˇche
 =
NULL
) {

447  
NULL
;

450 
	`tˇche_öô
(
tsd
, 
tˇche
,

451 (*)((
uöçå_t
)
tˇche
 + (uöçå_t)
°ack_off£t
));

452 
	`tˇche_¨ía_assocüã
(
	`tsd_tsdn
(
tsd
), 
tˇche
, 
	`¨ía_ichoo£
—sd, 
NULL
));

454  
tˇche
;

455 
	}
}

458 
	$tˇche_Êush_ˇche
(
tsd_t
 *
tsd
, 
tˇche_t
 *
tˇche
) {

459 
	`as£π
(
tˇche
->
¨ía
 !
NULL
);

461 
i
 = 0; i < 
NBINS
; i++) {

462 
ˇche_bö_t
 *
tbö
 = 
	`tˇche_smÆl_bö_gë
(
tˇche
, 
i
);

463 
	`tˇche_bö_Êush_smÆl
(
tsd
, 
tˇche
, 
tbö
, 
i
, 0);

465 i‡(
c⁄fig_°©s
) {

466 
	`as£π
(
tbö
->
t°©s
.
ƒeque°s
 == 0);

469 
i
 = 
NBINS
; i < 
nhbös
; i++) {

470 
ˇche_bö_t
 *
tbö
 = 
	`tˇche_œrge_bö_gë
(
tˇche
, 
i
);

471 
	`tˇche_bö_Êush_œrge
(
tsd
, 
tbö
, 
i
, 0, 
tˇche
);

473 i‡(
c⁄fig_°©s
) {

474 
	`as£π
(
tbö
->
t°©s
.
ƒeque°s
 == 0);

478 i‡(
c⁄fig_¥of
 && 
tˇche
->
¥of_accumbyãs
 > 0 &&

479 
	`¨ía_¥of_accum
(
	`tsd_tsdn
(
tsd
), 
tˇche
->
¨ía
,

480 
tˇche
->
¥of_accumbyãs
)) {

481 
	`¥of_idump
(
	`tsd_tsdn
(
tsd
));

483 
	}
}

486 
	$tˇche_Êush
(
tsd_t
 *
tsd
) {

487 
	`as£π
(
	`tˇche_avaûabÀ
(
tsd
));

488 
	`tˇche_Êush_ˇche
(
tsd
, 
	`tsd_tˇchï_gë
(tsd));

489 
	}
}

492 
	$tˇche_de°roy
(
tsd_t
 *
tsd
, 
tˇche_t
 *
tˇche
, 
boﬁ
 
tsd_tˇche
) {

493 
	`tˇche_Êush_ˇche
(
tsd
, 
tˇche
);

494 
	`tˇche_¨ía_dissocüã
(
	`tsd_tsdn
(
tsd
), 
tˇche
);

496 i‡(
tsd_tˇche
) {

498 *
avaû_¨øy
 =

499 (*)((
uöçå_t
)
	`tˇche_smÆl_bö_gë
(
tˇche
, 0)->
avaû
 -

500 (
uöçå_t
)
tˇche_bö_öfo
[0].
nˇched_max
 * (*));

501 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
avaû_¨øy
, 
NULL
, NULL, 
åue
,Årue);

504 
	`idÆlo˘m
(
	`tsd_tsdn
(
tsd
), 
tˇche
, 
NULL
, NULL, 
åue
,Årue);

506 
	}
}

510 
	$tˇche_˛ónup
(
tsd_t
 *
tsd
) {

511 
tˇche_t
 *
tˇche
 = 
	`tsd_tˇchï_gë
(
tsd
);

512 i‡(!
	`tˇche_avaûabÀ
(
tsd
)) {

513 
	`as£π
(
	`tsd_tˇche_íabÀd_gë
(
tsd
Ë=
Ál£
);

514 i‡(
c⁄fig_debug
) {

515 
	`as£π
(
	`tˇche_smÆl_bö_gë
(
tˇche
, 0)->
avaû
 =
NULL
);

519 
	`as£π
(
	`tsd_tˇche_íabÀd_gë
(
tsd
));

520 
	`as£π
(
	`tˇche_smÆl_bö_gë
(
tˇche
, 0)->
avaû
 !
NULL
);

522 
	`tˇche_de°roy
(
tsd
, 
tˇche
, 
åue
);

523 i‡(
c⁄fig_debug
) {

524 
	`tˇche_smÆl_bö_gë
(
tˇche
, 0)->
avaû
 = 
NULL
;

526 
	}
}

529 
	$tˇche_°©s_mîge
(
tsdn_t
 *
tsdn
, 
tˇche_t
 *
tˇche
, 
¨ía_t
 *
¨ía
) {

530 
i
;

532 
	`ˇs£π
(
c⁄fig_°©s
);

535 
i
 = 0; i < 
NBINS
; i++) {

536 
bö_t
 *
bö
 = &
¨ía
->
bös
[
i
];

537 
ˇche_bö_t
 *
tbö
 = 
	`tˇche_smÆl_bö_gë
(
tˇche
, 
i
);

538 
	`mÆloc_muãx_lock
(
tsdn
, &
bö
->
lock
);

539 
bö
->
°©s
.
ƒeque°s
 +
tbö
->
t°©s
.nrequests;

540 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
bö
->
lock
);

541 
tbö
->
t°©s
.
ƒeque°s
 = 0;

544 ; 
i
 < 
nhbös
; i++) {

545 
ˇche_bö_t
 *
tbö
 = 
	`tˇche_œrge_bö_gë
(
tˇche
, 
i
);

546 
	`¨ía_°©s_œrge_ƒeque°s_add
(
tsdn
, &
¨ía
->
°©s
, 
i
,

547 
tbö
->
t°©s
.
ƒeque°s
);

548 
tbö
->
t°©s
.
ƒeque°s
 = 0;

550 
	}
}

552 
boﬁ


553 
	$tˇches_¸óã_¥ï
(
tsd_t
 *
tsd
) {

554 
boﬁ
 
îr
;

556 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
tˇches_mtx
);

558 i‡(
tˇches
 =
NULL
) {

559 
tˇches
 = 
	`ba£_Æloc
(
	`tsd_tsdn
(
tsd
), 
	`b0gë
(), (
tˇche_t
 *)

560 * (
MALLOCX_TCACHE_MAX
+1), 
CACHELINE
);

561 i‡(
tˇches
 =
NULL
) {

562 
îr
 = 
åue
;

563 
œbñ_ªtu∫
;

567 i‡(
tˇches_avaû
 =
NULL
 && 
tˇches_∑°
 > 
MALLOCX_TCACHE_MAX
) {

568 
îr
 = 
åue
;

569 
œbñ_ªtu∫
;

572 
îr
 = 
Ál£
;

573 
œbñ_ªtu∫
:

574 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
tˇches_mtx
);

575  
îr
;

576 
	}
}

578 
boﬁ


579 
	$tˇches_¸óã
(
tsd_t
 *
tsd
, *
r_öd
) {

580 
	`wô√ss_as£π_dïth
(
	`tsdn_wô√ss_tsdp_gë
(
	`tsd_tsdn
(
tsd
)), 0);

582 
boﬁ
 
îr
;

584 i‡(
	`tˇches_¸óã_¥ï
(
tsd
)) {

585 
îr
 = 
åue
;

586 
œbñ_ªtu∫
;

589 
tˇche_t
 *
tˇche
 = 
	`tˇche_¸óã_ex∂icô
(
tsd
);

590 i‡(
tˇche
 =
NULL
) {

591 
îr
 = 
åue
;

592 
œbñ_ªtu∫
;

595 
tˇches_t
 *
ñm
;

596 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
tˇches_mtx
);

597 i‡(
tˇches_avaû
 !
NULL
) {

598 
ñm
 = 
tˇches_avaû
;

599 
tˇches_avaû
 =Åˇches_avaû->
√xt
;

600 
ñm
->
tˇche
 =Åcache;

601 *
r_öd
 = ()(
ñm
 - 
tˇches
);

603 
ñm
 = &
tˇches
[
tˇches_∑°
];

604 
ñm
->
tˇche
 =Åcache;

605 *
r_öd
 = 
tˇches_∑°
;

606 
tˇches_∑°
++;

608 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
tˇches_mtx
);

610 
îr
 = 
Ál£
;

611 
œbñ_ªtu∫
:

612 
	`wô√ss_as£π_dïth
(
	`tsdn_wô√ss_tsdp_gë
(
	`tsd_tsdn
(
tsd
)), 0);

613  
îr
;

614 
	}
}

616 
tˇche_t
 *

617 
	$tˇches_ñm_ªmove
(
tsd_t
 *
tsd
, 
tˇches_t
 *
ñm
) {

618 
	`mÆloc_muãx_as£π_ow√r
(
	`tsd_tsdn
(
tsd
), &
tˇches_mtx
);

620 i‡(
ñm
->
tˇche
 =
NULL
) {

621  
NULL
;

623 
tˇche_t
 *
tˇche
 = 
ñm
->tcache;

624 
ñm
->
tˇche
 = 
NULL
;

625  
tˇche
;

626 
	}
}

629 
	$tˇches_Êush
(
tsd_t
 *
tsd
, 
öd
) {

630 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
tˇches_mtx
);

631 
tˇche_t
 *
tˇche
 = 
	`tˇches_ñm_ªmove
(
tsd
, &
tˇches
[
öd
]);

632 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
tˇches_mtx
);

633 i‡(
tˇche
 !
NULL
) {

634 
	`tˇche_de°roy
(
tsd
, 
tˇche
, 
Ál£
);

636 
	}
}

639 
	$tˇches_de°roy
(
tsd_t
 *
tsd
, 
öd
) {

640 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
tˇches_mtx
);

641 
tˇches_t
 *
ñm
 = &
tˇches
[
öd
];

642 
tˇche_t
 *
tˇche
 = 
	`tˇches_ñm_ªmove
(
tsd
, 
ñm
);

643 
ñm
->
√xt
 = 
tˇches_avaû
;

644 
tˇches_avaû
 = 
ñm
;

645 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
tˇches_mtx
);

646 i‡(
tˇche
 !
NULL
) {

647 
	`tˇche_de°roy
(
tsd
, 
tˇche
, 
Ál£
);

649 
	}
}

651 
boﬁ


652 
	$tˇche_boŸ
(
tsdn_t
 *
tsdn
) {

654 i‡(
›t_lg_tˇche_max
 < 0 || (
	`ZU
(1) << opt_lg_tcache_max) <

655 
SMALL_MAXCLASS
) {

656 
tˇche_max˛ass
 = 
SMALL_MAXCLASS
;

658 
tˇche_max˛ass
 = (
	`ZU
(1Ë<< 
›t_lg_tˇche_max
);

661 i‡(
	`mÆloc_muãx_öô
(&
tˇches_mtx
, "tˇches", 
WITNESS_RANK_TCACHES
,

662 
mÆloc_muãx_ønk_ex˛usive
)) {

663  
åue
;

666 
nhbös
 = 
	`sz_size2ödex
(
tˇche_max˛ass
) + 1;

669 
tˇche_bö_öfo
 = (
ˇche_bö_öfo_t
 *)
	`ba£_Æloc
(
tsdn
, 
	`b0gë
(), 
nhbös


670 * (
ˇche_bö_öfo_t
), 
CACHELINE
);

671 i‡(
tˇche_bö_öfo
 =
NULL
) {

672  
åue
;

674 
°ack_√lms
 = 0;

675 
i
;

676 
i
 = 0; i < 
NBINS
; i++) {

677 i‡((
bö_öfos
[
i
].
ƒegs
 << 1Ë<
TCACHE_NSLOTS_SMALL_MIN
) {

678 
tˇche_bö_öfo
[
i
].
nˇched_max
 =

679 
TCACHE_NSLOTS_SMALL_MIN
;

680 } i‡((
bö_öfos
[
i
].
ƒegs
 << 1) <=

681 
TCACHE_NSLOTS_SMALL_MAX
) {

682 
tˇche_bö_öfo
[
i
].
nˇched_max
 =

683 (
bö_öfos
[
i
].
ƒegs
 << 1);

685 
tˇche_bö_öfo
[
i
].
nˇched_max
 =

686 
TCACHE_NSLOTS_SMALL_MAX
;

688 
°ack_√lms
 +
tˇche_bö_öfo
[
i
].
nˇched_max
;

690 ; 
i
 < 
nhbös
; i++) {

691 
tˇche_bö_öfo
[
i
].
nˇched_max
 = 
TCACHE_NSLOTS_LARGE
;

692 
°ack_√lms
 +
tˇche_bö_öfo
[
i
].
nˇched_max
;

695  
Ál£
;

696 
	}
}

699 
	$tˇche_¥ef‹k
(
tsdn_t
 *
tsdn
) {

700 i‡(!
c⁄fig_¥of
 && 
›t_tˇche
) {

701 
	`mÆloc_muãx_¥ef‹k
(
tsdn
, &
tˇches_mtx
);

703 
	}
}

706 
	$tˇche_po°f‹k_∑ª¡
(
tsdn_t
 *
tsdn
) {

707 i‡(!
c⁄fig_¥of
 && 
›t_tˇche
) {

708 
	`mÆloc_muãx_po°f‹k_∑ª¡
(
tsdn
, &
tˇches_mtx
);

710 
	}
}

713 
	$tˇche_po°f‹k_chûd
(
tsdn_t
 *
tsdn
) {

714 i‡(!
c⁄fig_¥of
 && 
›t_tˇche
) {

715 
	`mÆloc_muãx_po°f‹k_chûd
(
tsdn
, &
tˇches_mtx
);

717 
	}
}

	@src/ticker.c

1 
	#JEMALLOC_TICKER_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

	@src/tsd.c

1 
	#JEMALLOC_TSD_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/muãx.h
"

7 
	~"jemÆloc/öã∫Æ/πªe.h
"

12 
	gn˛ónups
;

13 
mÆloc_tsd_˛ónup_t
 
	g˛ónups
[
MALLOC_TSD_CLEANUPS_MAX
];

15 #ifde‡
JEMALLOC_MALLOC_THREAD_CLEANUP


16 
__thªad
 
tsd_t
 
JEMALLOC_TLS_MODEL
 
	gtsd_és
 = 
TSD_INITIALIZER
;

17 
__thªad
 
boﬁ
 
JEMALLOC_TLS_MODEL
 
	gtsd_öôülized
 = 
Ál£
;

18 
boﬁ
 
	gtsd_boŸed
 = 
Ál£
;

19 #ñi‡(
deföed
(
JEMALLOC_TLS
))

20 
__thªad
 
tsd_t
 
JEMALLOC_TLS_MODEL
 
	gtsd_és
 = 
TSD_INITIALIZER
;

21 
±hªad_key_t
 
	gtsd_tsd
;

22 
boﬁ
 
	gtsd_boŸed
 = 
Ál£
;

23 #ñi‡(
deföed
(
_WIN32
))

24 
DWORD
 
	gtsd_tsd
;

25 
tsd_wøµî_t
 
	gtsd_boŸ_wøµî
 = {
Ál£
, 
TSD_INITIALIZER
};

26 
boﬁ
 
	gtsd_boŸed
 = 
Ál£
;

34 
	stsd_öô_hód_s
 {

35 
ql_hód
(
tsd_öô_block_t
Ë
	mblocks
;

36 
mÆloc_muãx_t
 
	mlock
;

39 
±hªad_key_t
 
	gtsd_tsd
;

40 
tsd_öô_hód_t
 
	gtsd_öô_hód
 = {

41 
ql_hód_öôülizî
(
blocks
),

42 
MALLOC_MUTEX_INITIALIZER


44 
tsd_wøµî_t
 
	gtsd_boŸ_wøµî
 = {

45 
Ál£
,

46 
TSD_INITIALIZER


48 
boﬁ
 
	gtsd_boŸed
 = 
Ál£
;

55 
	$tsd_¶ow_upd©e
(
tsd_t
 *
tsd
) {

56 i‡(
	`tsd_nomöÆ
(
tsd
)) {

57 i‡(
mÆloc_¶ow
 || !
	`tsd_tˇche_íabÀd_gë
(
tsd
) ||

58 
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) > 0) {

59 
tsd
->
°©e
 = 
tsd_°©e_nomöÆ_¶ow
;

61 
tsd
->
°©e
 = 
tsd_°©e_nomöÆ
;

64 
	}
}

66 
boﬁ


67 
	$tsd_d©a_öô
(
tsd_t
 *
tsd
) {

72 
	`πªe_˘x_d©a_öô
(
	`tsd_πªe_˘xp_gë_unß„
(
tsd
));

81 *
	`tsd_off£t_°©ï_gë
(
tsd
Ë
c⁄fig_debug
 ? 0 :

82 (
uöt64_t
)(
uöçå_t
)
tsd
;

84  
	`tsd_tˇche_íabÀd_d©a_öô
(
tsd
);

85 
	}
}

88 
	$as£π_tsd_d©a_˛ónup_d⁄e
(
tsd_t
 *
tsd
) {

89 
	`as£π
(!
	`tsd_nomöÆ
(
tsd
));

90 
	`as£π
(*
	`tsd_¨í≠_gë_unß„
(
tsd
Ë=
NULL
);

91 
	`as£π
(*
	`tsd_üª«p_gë_unß„
(
tsd
Ë=
NULL
);

92 
	`as£π
(*
	`tsd_¨ías_td©a_by∑s•_gë_unß„
(
tsd
Ë=
åue
);

93 
	`as£π
(*
	`tsd_¨ías_td©≠_gë_unß„
(
tsd
Ë=
NULL
);

94 
	`as£π
(*
	`tsd_tˇche_íabÀdp_gë_unß„
(
tsd
Ë=
Ál£
);

95 
	`as£π
(*
	`tsd_¥of_td©≠_gë_unß„
(
tsd
Ë=
NULL
);

96 
	}
}

98 
boﬁ


99 
	$tsd_d©a_öô_no˛ónup
(
tsd_t
 *
tsd
) {

100 
	`as£π
(
tsd
->
°©e
 =
tsd_°©e_ªöˇ∫©ed
 ||

101 
tsd
->
°©e
 =
tsd_°©e_möimÆ_öôülized
);

107 
	`πªe_˘x_d©a_öô
(
	`tsd_πªe_˘xp_gë_unß„
(
tsd
));

108 *
	`tsd_¨ías_td©a_by∑s•_gë
(
tsd
Ë
åue
;

109 *
	`tsd_tˇche_íabÀdp_gë_unß„
(
tsd
Ë
Ál£
;

110 *
	`tsd_ªíå™cy_Àvñp_gë
(
tsd
) = 1;

111 
	`as£π_tsd_d©a_˛ónup_d⁄e
(
tsd
);

113  
Ál£
;

114 
	}
}

116 
tsd_t
 *

117 
	$tsd_„tch_¶ow
(
tsd_t
 *
tsd
, 
boﬁ
 
möimÆ
) {

118 
	`as£π
(!
	`tsd_Á°
(
tsd
));

120 i‡(
tsd
->
°©e
 =
tsd_°©e_nomöÆ_¶ow
) {

122 
	`as£π
(
mÆloc_¶ow
 || !
	`tsd_tˇche_íabÀd_gë
(
tsd
) ||

123 
	`tsd_ªíå™cy_Àvñ_gë
(
tsd
) > 0 ||

124 *
	`tsd_¨ías_td©a_by∑s•_gë
(
tsd
));

125 } i‡(
tsd
->
°©e
 =
tsd_°©e_unöôülized
) {

126 i‡(!
möimÆ
) {

127 
tsd
->
°©e
 = 
tsd_°©e_nomöÆ
;

128 
	`tsd_¶ow_upd©e
(
tsd
);

130 
	`tsd_£t
(
tsd
);

131 
	`tsd_d©a_öô
(
tsd
);

133 
tsd
->
°©e
 = 
tsd_°©e_möimÆ_öôülized
;

134 
	`tsd_£t
(
tsd
);

135 
	`tsd_d©a_öô_no˛ónup
(
tsd
);

137 } i‡(
tsd
->
°©e
 =
tsd_°©e_möimÆ_öôülized
) {

138 i‡(!
möimÆ
) {

140 
tsd
->
°©e
 = 
tsd_°©e_nomöÆ
;

141 
	`as£π
(*
	`tsd_ªíå™cy_Àvñp_gë
(
tsd
) >= 1);

142 (*
	`tsd_ªíå™cy_Àvñp_gë
(
tsd
))--;

143 
	`tsd_¶ow_upd©e
(
tsd
);

144 
	`tsd_d©a_öô
(
tsd
);

146 
	`as£π_tsd_d©a_˛ónup_d⁄e
(
tsd
);

148 } i‡(
tsd
->
°©e
 =
tsd_°©e_purg©‹y
) {

149 
tsd
->
°©e
 = 
tsd_°©e_ªöˇ∫©ed
;

150 
	`tsd_£t
(
tsd
);

151 
	`tsd_d©a_öô_no˛ónup
(
tsd
);

153 
	`as£π
(
tsd
->
°©e
 =
tsd_°©e_ªöˇ∫©ed
);

156  
tsd
;

157 
	}
}

160 
	$mÆloc_tsd_mÆloc
(
size_t
 
size
) {

161  
	`a0mÆloc
(
	`CACHELINE_CEILING
(
size
));

162 
	}
}

165 
	$mÆloc_tsd_dÆloc
(*
wøµî
) {

166 
	`a0dÆloc
(
wøµî
);

167 
	}
}

169 #i‡
deföed
(
JEMALLOC_MALLOC_THREAD_CLEANUP
Ë|| deföed(
_WIN32
)

170 #i‚de‡
_WIN32


171 
	gJEMALLOC_EXPORT


174 
	$_mÆloc_thªad_˛ónup
() {

175 
boﬁ
 
≥ndög
[
MALLOC_TSD_CLEANUPS_MAX
], 
agaö
;

176 
i
;

178 
i
 = 0; i < 
n˛ónups
; i++) {

179 
≥ndög
[
i
] = 
åue
;

183 
agaö
 = 
Ál£
;

184 
i
 = 0; i < 
n˛ónups
; i++) {

185 i‡(
≥ndög
[
i
]) {

186 
≥ndög
[
i
] = 
˛ónups
[i]();

187 i‡(
≥ndög
[
i
]) {

188 
agaö
 = 
åue
;

192 } 
agaö
);

193 
	}
}

197 
	$mÆloc_tsd_˛ónup_ªgi°î
(
	$boﬁ
 (*
f
)()) {

198 
	`as£π
(
n˛ónups
 < 
MALLOC_TSD_CLEANUPS_MAX
);

199 
˛ónups
[
n˛ónups
] = 
f
;

200 
n˛ónups
++;

201 
	}
}

204 
	$tsd_do_d©a_˛ónup
(
tsd_t
 *
tsd
) {

205 
	`¥of_td©a_˛ónup
(
tsd
);

206 
	`üª«_˛ónup
(
tsd
);

207 
	`¨ía_˛ónup
(
tsd
);

208 
	`¨ías_td©a_˛ónup
(
tsd
);

209 
	`tˇche_˛ónup
(
tsd
);

210 
	`wô√s£s_˛ónup
(
	`tsd_wô√ss_tsdp_gë_unß„
(
tsd
));

211 
	}
}

214 
	$tsd_˛ónup
(*
¨g
) {

215 
tsd_t
 *
tsd
 = (tsd_à*)
¨g
;

217 
tsd
->
°©e
) {

218 
tsd_°©e_unöôülized
:

221 
tsd_°©e_möimÆ_öôülized
:

224 
tsd_°©e_ªöˇ∫©ed
:

230 
	`as£π_tsd_d©a_˛ónup_d⁄e
(
tsd
);

232 
tsd_°©e_nomöÆ
:

233 
tsd_°©e_nomöÆ_¶ow
:

234 
	`tsd_do_d©a_˛ónup
(
tsd
);

235 
tsd
->
°©e
 = 
tsd_°©e_purg©‹y
;

236 
	`tsd_£t
(
tsd
);

238 
tsd_°©e_purg©‹y
:

247 
	`nŸ_ªached
();

249 #ifde‡
JEMALLOC_JET


250 
ã°_ˇŒback_t
 
ã°_ˇŒback
 = *
	`tsd_ã°_ˇŒbackp_gë_unß„
(
tsd
);

251 *
d©a
 = 
	`tsd_ã°_d©≠_gë_unß„
(
tsd
);

252 i‡(
ã°_ˇŒback
 !
NULL
) {

253 
	`ã°_ˇŒback
(
d©a
);

256 
	}
}

258 
tsd_t
 *

259 
	$mÆloc_tsd_boŸ0
() {

260 
tsd_t
 *
tsd
;

262 
n˛ónups
 = 0;

263 i‡(
	`tsd_boŸ0
()) {

264  
NULL
;

266 
tsd
 = 
	`tsd_„tch
();

267 *
	`tsd_¨ías_td©a_by∑s•_gë
(
tsd
Ë
åue
;

268  
tsd
;

269 
	}
}

272 
	$mÆloc_tsd_boŸ1
() {

273 
	`tsd_boŸ1
();

274 
tsd_t
 *
tsd
 = 
	`tsd_„tch
();

276 
	`tsd_¶ow_upd©e
(
tsd
);

277 *
	`tsd_¨ías_td©a_by∑s•_gë
(
tsd
Ë
Ál£
;

278 
	}
}

280 #ifde‡
_WIN32


281 
BOOL
 
WINAPI


282 
	$_és_ˇŒback
(
HINSTANCE
 
hö°DLL
, 
DWORD
 
fdwRós⁄
, 
LPVOID
 
ÕvRe£rved
) {

283 
fdwRós⁄
) {

284 #ifde‡
JEMALLOC_LAZY_LOCK


285 
DLL_THREAD_ATTACH
:

286 
i°hªaded
 = 
åue
;

289 
DLL_THREAD_DETACH
:

290 
	`_mÆloc_thªad_˛ónup
();

295  
åue
;

296 
	}
}

303 #ifde‡
ªad


304 #unde‡
ªad


307 #ifde‡
_MSC_VER


308 #ifde‡
_M_IX86


309 #¥agm®
commít
(
lökî
, "/INCLUDE:__tls_used")

310 #¥agm®
commít
(
lökî
, "/INCLUDE:_tls_callback")

312 #¥agm®
commít
(
lökî
, "/INCLUDE:_tls_used")

313 #¥agm®
commít
(
lökî
, "/INCLUDE:tls_callback")

315 #¥agm®
£˘i⁄
(".CRT$XLY",,
ªad
)

317 
JEMALLOC_SECTION
(".CRT$XLY"Ë
	$JEMALLOC_ATTR
(
u£d
)

318 
	$BOOL
 (
WINAPI
 *c⁄° 
és_ˇŒback
)(
HINSTANCE
 
hö°DLL
,

319 
DWORD
 
fdwRós⁄
, 
LPVOID
 
ÕvRe£rved
Ë
_és_ˇŒback
;

322 #i‡(!
	`deföed
(
JEMALLOC_MALLOC_THREAD_CLEANUP
Ë&& !deföed(
JEMALLOC_TLS
) && \

323 !
	$deföed
(
_WIN32
))

325 
	$tsd_öô_check_ªcursi⁄
(
tsd_öô_hód_t
 *
hód
, 
tsd_öô_block_t
 *
block
) {

326 
±hªad_t
 
£lf
 = 
	`±hªad_£lf
();

327 
tsd_öô_block_t
 *
ôî
;

330 
	`mÆloc_muãx_lock
(
TSDN_NULL
, &
hód
->
lock
);

331 
	`ql_f‹óch
(
ôî
, &
hód
->
blocks
, 
lök
) {

332 i‡(
ôî
->
thªad
 =
£lf
) {

333 
	`mÆloc_muãx_u∆ock
(
TSDN_NULL
, &
hód
->
lock
);

334  
ôî
->
d©a
;

338 
	`ql_ñm_√w
(
block
, 
lök
);

339 
block
->
thªad
 = 
£lf
;

340 
	`ql_èû_ö£π
(&
hód
->
blocks
, 
block
, 
lök
);

341 
	`mÆloc_muãx_u∆ock
(
TSDN_NULL
, &
hód
->
lock
);

342  
NULL
;

343 
	}
}

346 
	$tsd_öô_föish
(
tsd_öô_hód_t
 *
hód
, 
tsd_öô_block_t
 *
block
) {

347 
	`mÆloc_muãx_lock
(
TSDN_NULL
, &
hód
->
lock
);

348 
	`ql_ªmove
(&
hód
->
blocks
, 
block
, 
lök
);

349 
	`mÆloc_muãx_u∆ock
(
TSDN_NULL
, &
hód
->
lock
);

350 
	}
}

	@src/witness.c

1 
	#JEMALLOC_WITNESS_C_


	)

2 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

5 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 
	~"jemÆloc/öã∫Æ/mÆloc_io.h
"

9 
	$wô√ss_öô
(
wô√ss_t
 *
wô√ss
, c⁄° *
«me
, 
wô√ss_ønk_t
 
ønk
,

10 
wô√ss_comp_t
 *
comp
, *
›aque
) {

11 
wô√ss
->
«me
 =Çame;

12 
wô√ss
->
ønk
 =Ñank;

13 
wô√ss
->
comp
 = comp;

14 
wô√ss
->
›aque
 = opaque;

15 
	}
}

18 
	$wô√ss_lock_îr‹_im∂
(c⁄° 
wô√ss_li°_t
 *
wô√s£s
,

19 c⁄° 
wô√ss_t
 *
wô√ss
) {

20 
wô√ss_t
 *
w
;

22 
	`mÆloc_¥ötf
("<jemalloc>: LockÑank orderÑeversal:");

23 
	`ql_f‹óch
(
w
, 
wô√s£s
, 
lök
) {

24 
	`mÆloc_¥ötf
(" %s(%u)", 
w
->
«me
, w->
ønk
);

26 
	`mÆloc_¥ötf
(" %s(%u)\n", 
wô√ss
->
«me
, wô√ss->
ønk
);

27 
	`ab‹t
();

28 
	}
}

29 
wô√ss_lock_îr‹_t
 *
JET_MUTABLE
 
	gwô√ss_lock_îr‹
 = 
wô√ss_lock_îr‹_im∂
;

32 
	$wô√ss_ow√r_îr‹_im∂
(c⁄° 
wô√ss_t
 *
wô√ss
) {

33 
	`mÆloc_¥ötf
("<jemÆloc>: Should ow¿%s(%u)\n", 
wô√ss
->
«me
,

34 
wô√ss
->
ønk
);

35 
	`ab‹t
();

36 
	}
}

37 
wô√ss_ow√r_îr‹_t
 *
JET_MUTABLE
 
	gwô√ss_ow√r_îr‹
 =

38 
wô√ss_ow√r_îr‹_im∂
;

41 
	$wô√ss_nŸ_ow√r_îr‹_im∂
(c⁄° 
wô√ss_t
 *
wô√ss
) {

42 
	`mÆloc_¥ötf
("<jemÆloc>: ShouldÇŸ ow¿%s(%u)\n", 
wô√ss
->
«me
,

43 
wô√ss
->
ønk
);

44 
	`ab‹t
();

45 
	}
}

46 
wô√ss_nŸ_ow√r_îr‹_t
 *
JET_MUTABLE
 
	gwô√ss_nŸ_ow√r_îr‹
 =

47 
wô√ss_nŸ_ow√r_îr‹_im∂
;

50 
	$wô√ss_dïth_îr‹_im∂
(c⁄° 
wô√ss_li°_t
 *
wô√s£s
,

51 
wô√ss_ønk_t
 
ønk_ö˛usive
, 
dïth
) {

52 
wô√ss_t
 *
w
;

54 
	`mÆloc_¥ötf
("<jemÆloc>: Should ow¿%uÜock%†o‡ønk >%u:", 
dïth
,

55 (
dïth
 !1Ë? "s" : "", 
ønk_ö˛usive
);

56 
	`ql_f‹óch
(
w
, 
wô√s£s
, 
lök
) {

57 
	`mÆloc_¥ötf
(" %s(%u)", 
w
->
«me
, w->
ønk
);

59 
	`mÆloc_¥ötf
("\n");

60 
	`ab‹t
();

61 
	}
}

62 
wô√ss_dïth_îr‹_t
 *
JET_MUTABLE
 
	gwô√ss_dïth_îr‹
 =

63 
wô√ss_dïth_îr‹_im∂
;

66 
	$wô√s£s_˛ónup
(
wô√ss_tsd_t
 *
wô√ss_tsd
) {

67 
	`wô√ss_as£π_lockÀss
(
	`wô√ss_tsd_tsdn
(
wô√ss_tsd
));

70 
	}
}

73 
	$wô√ss_¥ef‹k
(
wô√ss_tsd_t
 *
wô√ss_tsd
) {

74 i‡(!
c⁄fig_debug
) {

77 
wô√ss_tsd
->
f‹kög
 = 
åue
;

78 
	}
}

81 
	$wô√ss_po°f‹k_∑ª¡
(
wô√ss_tsd_t
 *
wô√ss_tsd
) {

82 i‡(!
c⁄fig_debug
) {

85 
wô√ss_tsd
->
f‹kög
 = 
Ál£
;

86 
	}
}

89 
	$wô√ss_po°f‹k_chûd
(
wô√ss_tsd_t
 *
wô√ss_tsd
) {

90 i‡(!
c⁄fig_debug
) {

93 #i‚de‡
JEMALLOC_MUTEX_INIT_CB


94 
wô√ss_li°_t
 *
wô√s£s
;

96 
wô√s£s
 = &
wô√ss_tsd
->witnesses;

97 
	`ql_√w
(
wô√s£s
);

99 
wô√ss_tsd
->
f‹kög
 = 
Ál£
;

100 
	}
}

	@src/zone.c

1 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

2 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

4 
	~"jemÆloc/öã∫Æ/as£π.h
"

6 #i‚de‡
JEMALLOC_ZONE


14 
	s_mÆloc_z⁄e_t
 {

15 *
	mª£rved1
;

16 *
	mª£rved2
;

17 
size_t
 (*
size
)(
	m_mÆloc_z⁄e_t
 *, const *);

18 *(*
	mmÆloc
)(
	m_mÆloc_z⁄e_t
 *, 
	msize_t
);

19 *(*
	mˇŒoc
)(
	m_mÆloc_z⁄e_t
 *, 
	msize_t
, size_t);

20 *(*
	mvÆloc
)(
	m_mÆloc_z⁄e_t
 *, 
	msize_t
);

21 (*
	m‰ì
)(
	m_mÆloc_z⁄e_t
 *, *);

22 *(*
	mªÆloc
)(
	m_mÆloc_z⁄e_t
 *, *, 
	msize_t
);

23 (*
	mde°roy
)(
	m_mÆloc_z⁄e_t
 *);

24 c⁄° *
	mz⁄e_«me
;

25 (*
	mb©ch_mÆloc
)(
	m_mÆloc_z⁄e_t
 *, 
	msize_t
, **, );

26 (*
	mb©ch_‰ì
)(
	m_mÆloc_z⁄e_t
 *, **, );

27 
mÆloc_öåo•e˘i⁄_t
 *
	möåo•e˘
;

28 
	mvîsi⁄
;

29 *(*
	mmemÆign
)(
	m_mÆloc_z⁄e_t
 *, 
	msize_t
, size_t);

30 (*
	m‰ì_deföôe_size
)(
	m_mÆloc_z⁄e_t
 *, *, 
	msize_t
);

31 
size_t
 (*
¥essuª_ªlõf
)(
	m_mÆloc_z⁄e_t
 *, 
	msize_t
);

32 } 
	tmÆloc_z⁄e_t
;

35 
vm_addªss_t
 
	maddªss
;

36 
vm_size_t
 
	msize
;

37 } 
	tvm_ønge_t
;

39 
	smÆloc_°©i°ics_t
 {

40 
	mblocks_ö_u£
;

41 
size_t
 
	msize_ö_u£
;

42 
size_t
 
	mmax_size_ö_u£
;

43 
size_t
 
	msize_Æloˇãd
;

44 } 
	tmÆloc_°©i°ics_t
;

46 
kîn_ªtu∫_t
 
	tmem‹y_ªadî_t
(
	tèsk_t
, 
	tvm_addªss_t
, 
	tvm_size_t
, **);

48 
	tvm_ønge_ªc‹dî_t
(
	tèsk_t
, *, 
	tty≥
, 
	tvm_ønge_t
 *, );

50 
	smÆloc_öåo•e˘i⁄_t
 {

51 
kîn_ªtu∫_t
 (*
íumî©‹
)(
	mèsk_t
, *, , 
	mvm_addªss_t
, 
	mmem‹y_ªadî_t
, 
	mvm_ønge_ªc‹dî_t
);

52 
size_t
 (*
good_size
)(
	mmÆloc_z⁄e_t
 *, 
	msize_t
);

53 
boﬁón_t
 (*
check
)(
	mmÆloc_z⁄e_t
 *);

54 (*
	m¥öt
)(
	mmÆloc_z⁄e_t
 *, 
	mboﬁón_t
);

55 (*
	mlog
)(
	mmÆloc_z⁄e_t
 *, *);

56 (*
	mf‹˚_lock
)(
	mmÆloc_z⁄e_t
 *);

57 (*
	mf‹˚_u∆ock
)(
	mmÆloc_z⁄e_t
 *);

58 (*
	m°©i°ics
)(
	mmÆloc_z⁄e_t
 *, 
	mmÆloc_°©i°ics_t
 *);

59 
boﬁón_t
 (*
z⁄e_locked
)(
	mmÆloc_z⁄e_t
 *);

60 
boﬁón_t
 (*
íabÀ_disch¨ge_checkög
)(
	mmÆloc_z⁄e_t
 *);

61 
boﬁón_t
 (*
dißbÀ_disch¨ge_checkög
)(
	mmÆloc_z⁄e_t
 *);

62 (*
	mdisch¨ge
)(
	mmÆloc_z⁄e_t
 *, *);

63 #ifde‡
__BLOCKS__


64 (*
	míumî©e_disch¨ged_poöãrs
)(
	mmÆloc_z⁄e_t
 *, (^)(*, *));

66 *
	míumî©e_u«vaûabÀ_wôhout_blocks
;

68 (*
	mªöô_lock
)(
	mmÆloc_z⁄e_t
 *);

69 } 
	tmÆloc_öåo•e˘i⁄_t
;

71 
kîn_ªtu∫_t
 
mÆloc_gë_Æl_z⁄es
(
èsk_t
, 
mem‹y_ªadî_t
, 
vm_addªss_t
 **, *);

73 
mÆloc_z⁄e_t
 *
mÆloc_deÁu…_z⁄e
();

75 
mÆloc_z⁄e_ªgi°î
(
mÆloc_z⁄e_t
 *
z⁄e
);

77 
mÆloc_z⁄e_uƒegi°î
(
mÆloc_z⁄e_t
 *
z⁄e
);

83 
mÆloc_z⁄e_t
 *
	$mÆloc_deÁu…_purgóbÀ_z⁄e
()

84 
	`JEMALLOC_ATTR
(
wók_imp‹t
);

89 
mÆloc_z⁄e_t
 *
deÁu…_z⁄e
, *
purgóbÀ_z⁄e
;

90 
mÆloc_z⁄e_t
 
jemÆloc_z⁄e
;

91 
mÆloc_öåo•e˘i⁄_t
 
jemÆloc_z⁄e_öåo•e˘
;

92 
pid_t
 
z⁄e_f‹˚_lock_pid
 = -1;

97 
size_t
 
	`z⁄e_size
(
mÆloc_z⁄e_t
 *
z⁄e
, c⁄° *
±r
);

98 *
	`z⁄e_mÆloc
(
mÆloc_z⁄e_t
 *
z⁄e
, 
size_t
 
size
);

99 *
	`z⁄e_ˇŒoc
(
mÆloc_z⁄e_t
 *
z⁄e
, 
size_t
 
num
, size_à
size
);

100 *
	`z⁄e_vÆloc
(
mÆloc_z⁄e_t
 *
z⁄e
, 
size_t
 
size
);

101 
	`z⁄e_‰ì
(
mÆloc_z⁄e_t
 *
z⁄e
, *
±r
);

102 *
	`z⁄e_ªÆloc
(
mÆloc_z⁄e_t
 *
z⁄e
, *
±r
, 
size_t
 
size
);

103 *
	`z⁄e_memÆign
(
mÆloc_z⁄e_t
 *
z⁄e
, 
size_t
 
Æignmít
,

104 
size_t
 
size
);

105 
	`z⁄e_‰ì_deföôe_size
(
mÆloc_z⁄e_t
 *
z⁄e
, *
±r
,

106 
size_t
 
size
);

107 
	`z⁄e_de°roy
(
mÆloc_z⁄e_t
 *
z⁄e
);

108 
	`z⁄e_b©ch_mÆloc
(
_mÆloc_z⁄e_t
 *
z⁄e
, 
size_t
 
size
,

109 **
ªsu…s
, 
num_ªque°ed
);

110 
	`z⁄e_b©ch_‰ì
(
_mÆloc_z⁄e_t
 *
z⁄e
,

111 **
to_be_‰ìd
, 
num_to_be_‰ìd
);

112 
size_t
 
	`z⁄e_¥essuª_ªlõf
(
_mÆloc_z⁄e_t
 *
z⁄e
, size_à
gﬂl
);

113 
size_t
 
	`z⁄e_good_size
(
mÆloc_z⁄e_t
 *
z⁄e
, size_à
size
);

114 
kîn_ªtu∫_t
 
	`z⁄e_íumî©‹
(
èsk_t
 
èsk
, *
d©a
, 
ty≥_mask
,

115 
vm_addªss_t
 
z⁄e_addªss
, 
mem‹y_ªadî_t
 
ªadî
,

116 
vm_ønge_ªc‹dî_t
 
ªc‹dî
);

117 
boﬁón_t
 
	`z⁄e_check
(
mÆloc_z⁄e_t
 *
z⁄e
);

118 
	`z⁄e_¥öt
(
mÆloc_z⁄e_t
 *
z⁄e
, 
boﬁón_t
 
vîbo£
);

119 
	`z⁄e_log
(
mÆloc_z⁄e_t
 *
z⁄e
, *
addªss
);

120 
	`z⁄e_f‹˚_lock
(
mÆloc_z⁄e_t
 *
z⁄e
);

121 
	`z⁄e_f‹˚_u∆ock
(
mÆloc_z⁄e_t
 *
z⁄e
);

122 
	`z⁄e_°©i°ics
(
mÆloc_z⁄e_t
 *
z⁄e
,

123 
mÆloc_°©i°ics_t
 *
°©s
);

124 
boﬁón_t
 
	`z⁄e_locked
(
mÆloc_z⁄e_t
 *
z⁄e
);

125 
	`z⁄e_ªöô_lock
(
mÆloc_z⁄e_t
 *
z⁄e
);

132 
size_t


133 
	$z⁄e_size
(
mÆloc_z⁄e_t
 *
z⁄e
, c⁄° *
±r
) {

143  
	`ivßŒoc
(
	`tsdn_„tch
(), 
±r
);

144 
	}
}

147 
	$z⁄e_mÆloc
(
mÆloc_z⁄e_t
 *
z⁄e
, 
size_t
 
size
) {

148  
	`je_mÆloc
(
size
);

149 
	}
}

152 
	$z⁄e_ˇŒoc
(
mÆloc_z⁄e_t
 *
z⁄e
, 
size_t
 
num
, size_à
size
) {

153  
	`je_ˇŒoc
(
num
, 
size
);

154 
	}
}

157 
	$z⁄e_vÆloc
(
mÆloc_z⁄e_t
 *
z⁄e
, 
size_t
 
size
) {

158 *
ªt
 = 
NULL
;

160 
	`je_posix_memÆign
(&
ªt
, 
PAGE
, 
size
);

162  
ªt
;

163 
	}
}

166 
	$z⁄e_‰ì
(
mÆloc_z⁄e_t
 *
z⁄e
, *
±r
) {

167 i‡(
	`ivßŒoc
(
	`tsdn_„tch
(), 
±r
) != 0) {

168 
	`je_‰ì
(
±r
);

172 
	`‰ì
(
±r
);

173 
	}
}

176 
	$z⁄e_ªÆloc
(
mÆloc_z⁄e_t
 *
z⁄e
, *
±r
, 
size_t
 
size
) {

177 i‡(
	`ivßŒoc
(
	`tsdn_„tch
(), 
±r
) != 0) {

178  
	`je_ªÆloc
(
±r
, 
size
);

181  
	`ªÆloc
(
±r
, 
size
);

182 
	}
}

185 
	$z⁄e_memÆign
(
mÆloc_z⁄e_t
 *
z⁄e
, 
size_t
 
Æignmít
, size_à
size
) {

186 *
ªt
 = 
NULL
;

188 
	`je_posix_memÆign
(&
ªt
, 
Æignmít
, 
size
);

190  
ªt
;

191 
	}
}

194 
	$z⁄e_‰ì_deföôe_size
(
mÆloc_z⁄e_t
 *
z⁄e
, *
±r
, 
size_t
 
size
) {

195 
size_t
 
Æloc_size
;

197 
Æloc_size
 = 
	`ivßŒoc
(
	`tsdn_„tch
(), 
±r
);

198 i‡(
Æloc_size
 != 0) {

199 
	`as£π
(
Æloc_size
 =
size
);

200 
	`je_‰ì
(
±r
);

204 
	`‰ì
(
±r
);

205 
	}
}

208 
	$z⁄e_de°roy
(
mÆloc_z⁄e_t
 *
z⁄e
) {

210 
	`nŸ_ªached
();

211 
	}
}

214 
	$z⁄e_b©ch_mÆloc
(
_mÆloc_z⁄e_t
 *
z⁄e
, 
size_t
 
size
, **
ªsu…s
,

215 
num_ªque°ed
) {

216 
i
;

218 
i
 = 0; i < 
num_ªque°ed
; i++) {

219 
ªsu…s
[
i
] = 
	`je_mÆloc
(
size
);

220 i‡(!
ªsu…s
[
i
])

224  
i
;

225 
	}
}

228 
	$z⁄e_b©ch_‰ì
(
_mÆloc_z⁄e_t
 *
z⁄e
, **
to_be_‰ìd
,

229 
num_to_be_‰ìd
) {

230 
i
;

232 
i
 = 0; i < 
num_to_be_‰ìd
; i++) {

233 
	`z⁄e_‰ì
(
z⁄e
, 
to_be_‰ìd
[
i
]);

234 
to_be_‰ìd
[
i
] = 
NULL
;

236 
	}
}

238 
size_t


239 
	$z⁄e_¥essuª_ªlõf
(
_mÆloc_z⁄e_t
 *
z⁄e
, 
size_t
 
gﬂl
) {

241 
	}
}

243 
size_t


244 
	$z⁄e_good_size
(
mÆloc_z⁄e_t
 *
z⁄e
, 
size_t
 
size
) {

245 i‡(
size
 == 0) {

246 
size
 = 1;

248  
	`sz_s2u
(
size
);

249 
	}
}

251 
kîn_ªtu∫_t


252 
	$z⁄e_íumî©‹
(
èsk_t
 
èsk
, *
d©a
, 
ty≥_mask
,

253 
vm_addªss_t
 
z⁄e_addªss
, 
mem‹y_ªadî_t
 
ªadî
,

254 
vm_ønge_ªc‹dî_t
 
ªc‹dî
) {

255  
KERN_SUCCESS
;

256 
	}
}

258 
boﬁón_t


259 
	$z⁄e_check
(
mÆloc_z⁄e_t
 *
z⁄e
) {

260  
åue
;

261 
	}
}

264 
	$z⁄e_¥öt
(
mÆloc_z⁄e_t
 *
z⁄e
, 
boﬁón_t
 
vîbo£
) {

265 
	}
}

268 
	$z⁄e_log
(
mÆloc_z⁄e_t
 *
z⁄e
, *
addªss
) {

269 
	}
}

272 
	$z⁄e_f‹˚_lock
(
mÆloc_z⁄e_t
 *
z⁄e
) {

273 i‡(
i°hªaded
) {

278 
	`as£π
(
z⁄e_f‹˚_lock_pid
 == -1);

279 
z⁄e_f‹˚_lock_pid
 = 
	`gëpid
();

280 
	`jemÆloc_¥ef‹k
();

282 
	}
}

285 
	$z⁄e_f‹˚_u∆ock
(
mÆloc_z⁄e_t
 *
z⁄e
) {

298 i‡(
i°hªaded
) {

299 
	`as£π
(
z⁄e_f‹˚_lock_pid
 != -1);

300 i‡(
	`gëpid
(Ë=
z⁄e_f‹˚_lock_pid
) {

301 
	`jemÆloc_po°f‹k_∑ª¡
();

303 
	`jemÆloc_po°f‹k_chûd
();

305 
z⁄e_f‹˚_lock_pid
 = -1;

307 
	}
}

310 
	$z⁄e_°©i°ics
(
mÆloc_z⁄e_t
 *
z⁄e
, 
mÆloc_°©i°ics_t
 *
°©s
) {

312 
°©s
->
blocks_ö_u£
 = 0;

313 
°©s
->
size_ö_u£
 = 0;

314 
°©s
->
max_size_ö_u£
 = 0;

315 
°©s
->
size_Æloˇãd
 = 0;

316 
	}
}

318 
boﬁón_t


319 
	$z⁄e_locked
(
mÆloc_z⁄e_t
 *
z⁄e
) {

321  
Ál£
;

322 
	}
}

325 
	$z⁄e_ªöô_lock
(
mÆloc_z⁄e_t
 *
z⁄e
) {

328 
	`z⁄e_f‹˚_u∆ock
(
z⁄e
);

329 
	}
}

332 
	$z⁄e_öô
() {

333 
jemÆloc_z⁄e
.
size
 = 
z⁄e_size
;

334 
jemÆloc_z⁄e
.
mÆloc
 = 
z⁄e_mÆloc
;

335 
jemÆloc_z⁄e
.
ˇŒoc
 = 
z⁄e_ˇŒoc
;

336 
jemÆloc_z⁄e
.
vÆloc
 = 
z⁄e_vÆloc
;

337 
jemÆloc_z⁄e
.
‰ì
 = 
z⁄e_‰ì
;

338 
jemÆloc_z⁄e
.
ªÆloc
 = 
z⁄e_ªÆloc
;

339 
jemÆloc_z⁄e
.
de°roy
 = 
z⁄e_de°roy
;

340 
jemÆloc_z⁄e
.
z⁄e_«me
 = "jemalloc_zone";

341 
jemÆloc_z⁄e
.
b©ch_mÆloc
 = 
z⁄e_b©ch_mÆloc
;

342 
jemÆloc_z⁄e
.
b©ch_‰ì
 = 
z⁄e_b©ch_‰ì
;

343 
jemÆloc_z⁄e
.
öåo•e˘
 = &
jemÆloc_z⁄e_öåo•e˘
;

344 
jemÆloc_z⁄e
.
vîsi⁄
 = 9;

345 
jemÆloc_z⁄e
.
memÆign
 = 
z⁄e_memÆign
;

346 
jemÆloc_z⁄e
.
‰ì_deföôe_size
 = 
z⁄e_‰ì_deföôe_size
;

347 
jemÆloc_z⁄e
.
¥essuª_ªlõf
 = 
z⁄e_¥essuª_ªlõf
;

349 
jemÆloc_z⁄e_öåo•e˘
.
íumî©‹
 = 
z⁄e_íumî©‹
;

350 
jemÆloc_z⁄e_öåo•e˘
.
good_size
 = 
z⁄e_good_size
;

351 
jemÆloc_z⁄e_öåo•e˘
.
check
 = 
z⁄e_check
;

352 
jemÆloc_z⁄e_öåo•e˘
.
¥öt
 = 
z⁄e_¥öt
;

353 
jemÆloc_z⁄e_öåo•e˘
.
log
 = 
z⁄e_log
;

354 
jemÆloc_z⁄e_öåo•e˘
.
f‹˚_lock
 = 
z⁄e_f‹˚_lock
;

355 
jemÆloc_z⁄e_öåo•e˘
.
f‹˚_u∆ock
 = 
z⁄e_f‹˚_u∆ock
;

356 
jemÆloc_z⁄e_öåo•e˘
.
°©i°ics
 = 
z⁄e_°©i°ics
;

357 
jemÆloc_z⁄e_öåo•e˘
.
z⁄e_locked
 = zone_locked;

358 
jemÆloc_z⁄e_öåo•e˘
.
íabÀ_disch¨ge_checkög
 = 
NULL
;

359 
jemÆloc_z⁄e_öåo•e˘
.
dißbÀ_disch¨ge_checkög
 = 
NULL
;

360 
jemÆloc_z⁄e_öåo•e˘
.
disch¨ge
 = 
NULL
;

361 #ifde‡
__BLOCKS__


362 
jemÆloc_z⁄e_öåo•e˘
.
íumî©e_disch¨ged_poöãrs
 = 
NULL
;

364 
jemÆloc_z⁄e_öåo•e˘
.
íumî©e_u«vaûabÀ_wôhout_blocks
 = 
NULL
;

366 
jemÆloc_z⁄e_öåo•e˘
.
ªöô_lock
 = 
z⁄e_ªöô_lock
;

367 
	}
}

369 
mÆloc_z⁄e_t
 *

370 
	$z⁄e_deÁu…_gë
() {

371 
mÆloc_z⁄e_t
 **
z⁄es
 = 
NULL
;

372 
num_z⁄es
 = 0;

383 i‡(
KERN_SUCCESS
 !
	`mÆloc_gë_Æl_z⁄es
(0, 
NULL
,

384 (
vm_addªss_t
**)&
z⁄es
, &
num_z⁄es
)) {

389 
num_z⁄es
 = 0;

392 i‡(
num_z⁄es
) {

393  
z⁄es
[0];

396  
	`mÆloc_deÁu…_z⁄e
();

397 
	}
}

401 
	$z⁄e_¥omŸe
() {

402 
mÆloc_z⁄e_t
 *
z⁄e
;

413 
	`mÆloc_z⁄e_uƒegi°î
(
deÁu…_z⁄e
);

414 
	`mÆloc_z⁄e_ªgi°î
(
deÁu…_z⁄e
);

427 i‡(
purgóbÀ_z⁄e
 !
NULL
) {

428 
	`mÆloc_z⁄e_uƒegi°î
(
purgóbÀ_z⁄e
);

429 
	`mÆloc_z⁄e_ªgi°î
(
purgóbÀ_z⁄e
);

432 
z⁄e
 = 
	`z⁄e_deÁu…_gë
();

433 } 
z⁄e
 !&
jemÆloc_z⁄e
);

434 
	}
}

436 
	$JEMALLOC_ATTR
(
c⁄°ru˘‹
)

438 
	$z⁄e_ªgi°î
() {

443 
deÁu…_z⁄e
 = 
	`z⁄e_deÁu…_gë
();

444 i‡(!
deÁu…_z⁄e
->
z⁄e_«me
 || 
	`°rcmp
(default_zone->zone_name,

460 
purgóbÀ_z⁄e
 = (
mÆloc_deÁu…_purgóbÀ_z⁄e
 =
NULL
) ? NULL :

461 
	`mÆloc_deÁu…_purgóbÀ_z⁄e
();

464 
	`z⁄e_öô
();

465 
	`mÆloc_z⁄e_ªgi°î
(&
jemÆloc_z⁄e
);

468 
	`z⁄e_¥omŸe
();

469 
	}
}

	@test/include/test/SFMT-alti.h

52 #i‚de‡
SFMT_ALTI_H


53 
	#SFMT_ALTI_H


	)

63 
JEMALLOC_ALWAYS_INLINE


64 
ve˘‹
 
	$vec_ªcursi⁄
(
ve˘‹
 
a
,

65 
ve˘‹
 
b
,

66 
ve˘‹
 
c
,

67 
ve˘‹
 
d
) {

69 c⁄° 
ve˘‹
 
¶1
 = 
ALTI_SL1
;

70 c⁄° 
ve˘‹
 
§1
 = 
ALTI_SR1
;

71 #ifde‡
ONLY64


72 c⁄° 
ve˘‹
 
mask
 = 
ALTI_MSK64
;

73 c⁄° 
ve˘‹
 
≥rm_¶
 = 
ALTI_SL2_PERM64
;

74 c⁄° 
ve˘‹
 
≥rm_§
 = 
ALTI_SR2_PERM64
;

76 c⁄° 
ve˘‹
 
mask
 = 
ALTI_MSK
;

77 c⁄° 
ve˘‹
 
≥rm_¶
 = 
ALTI_SL2_PERM
;

78 c⁄° 
ve˘‹
 
≥rm_§
 = 
ALTI_SR2_PERM
;

80 
ve˘‹
 
v
, 
w
, 
x
, 
y
, 
z
;

81 
x
 = 
	`vec_≥rm
(
a
, (
ve˘‹
 )
≥rm_¶
,Öerm_sl);

82 
v
 = 
a
;

83 
y
 = 
	`vec_§
(
b
, 
§1
);

84 
z
 = 
	`vec_≥rm
(
c
, (
ve˘‹
 )
≥rm_§
,Öerm_sr);

85 
w
 = 
	`vec_¶
(
d
, 
¶1
);

86 
z
 = 
	`vec_x‹
(z, 
w
);

87 
y
 = 
	`vec_™d
(y, 
mask
);

88 
v
 = 
	`vec_x‹
(v, 
x
);

89 
z
 = 
	`vec_x‹
(z, 
y
);

90 
z
 = 
	`vec_x‹
(z, 
v
);

91  
z
;

92 
	}
}

98 
ölöe
 
	$gí_ønd_Æl
(
sfmt_t
 *
˘x
) {

99 
i
;

100 
ve˘‹
 
r
, 
r1
, 
r2
;

102 
r1
 = 
˘x
->
sfmt
[
N
 - 2].
s
;

103 
r2
 = 
˘x
->
sfmt
[
N
 - 1].
s
;

104 
i
 = 0; i < 
N
 - 
POS1
; i++) {

105 
r
 = 
	`vec_ªcursi⁄
(
˘x
->
sfmt
[
i
].
s
, ctx->sfmt[ò+ 
POS1
].s, 
r1
, 
r2
);

106 
˘x
->
sfmt
[
i
].
s
 = 
r
;

107 
r1
 = 
r2
;

108 
r2
 = 
r
;

110 ; 
i
 < 
N
; i++) {

111 
r
 = 
	`vec_ªcursi⁄
(
˘x
->
sfmt
[
i
].
s
, ctx->sfmt[ò+ 
POS1
 - 
N
].s, 
r1
, 
r2
);

112 
˘x
->
sfmt
[
i
].
s
 = 
r
;

113 
r1
 = 
r2
;

114 
r2
 = 
r
;

116 
	}
}

125 
ölöe
 
	$gí_ønd_¨øy
(
sfmt_t
 *
˘x
, 
w128_t
 *
¨øy
, 
size
) {

126 
i
, 
j
;

127 
ve˘‹
 
r
, 
r1
, 
r2
;

129 
r1
 = 
˘x
->
sfmt
[
N
 - 2].
s
;

130 
r2
 = 
˘x
->
sfmt
[
N
 - 1].
s
;

131 
i
 = 0; i < 
N
 - 
POS1
; i++) {

132 
r
 = 
	`vec_ªcursi⁄
(
˘x
->
sfmt
[
i
].
s
, ctx->sfmt[ò+ 
POS1
].s, 
r1
, 
r2
);

133 
¨øy
[
i
].
s
 = 
r
;

134 
r1
 = 
r2
;

135 
r2
 = 
r
;

137 ; 
i
 < 
N
; i++) {

138 
r
 = 
	`vec_ªcursi⁄
(
˘x
->
sfmt
[
i
].
s
, 
¨øy
[ò+ 
POS1
 - 
N
].s, 
r1
, 
r2
);

139 
¨øy
[
i
].
s
 = 
r
;

140 
r1
 = 
r2
;

141 
r2
 = 
r
;

144 ; 
i
 < 
size
 - 
N
; i++) {

145 
r
 = 
	`vec_ªcursi⁄
(
¨øy
[
i
 - 
N
].
s
,áºay[ò+ 
POS1
 - N].s, 
r1
, 
r2
);

146 
¨øy
[
i
].
s
 = 
r
;

147 
r1
 = 
r2
;

148 
r2
 = 
r
;

150 
j
 = 0; j < 2 * 
N
 - 
size
; j++) {

151 
˘x
->
sfmt
[
j
].
s
 = 
¨øy
[j + 
size
 - 
N
].s;

153 ; 
i
 < 
size
; i++) {

154 
r
 = 
	`vec_ªcursi⁄
(
¨øy
[
i
 - 
N
].
s
,áºay[ò+ 
POS1
 - N].s, 
r1
, 
r2
);

155 
¨øy
[
i
].
s
 = 
r
;

156 
˘x
->
sfmt
[
j
++].
s
 = 
r
;

157 
r1
 = 
r2
;

158 
r2
 = 
r
;

160 
	}
}

162 #i‚de‡
ONLY64


163 #i‡
deföed
(
__APPLE__
)

164 
	#ALTI_SWAP
 (
ve˘‹
 ) \

165 (4, 5, 6, 7, 0, 1, 2, 3, 12, 13, 14, 15, 8, 9, 10, 11)

	)

167 
	#ALTI_SWAP
 {4, 5, 6, 7, 0, 1, 2, 3, 12, 13, 14, 15, 8, 9, 10, 11}

	)

176 
ölöe
 
	$sw≠
(
w128_t
 *
¨øy
, 
size
) {

177 
i
;

178 c⁄° 
ve˘‹
 
≥rm
 = 
ALTI_SWAP
;

180 
i
 = 0; i < 
size
; i++) {

181 
¨øy
[
i
].
s
 = 
	`vec_≥rm
◊ºay[i].s, (
ve˘‹
 )
≥rm
,Öerm);

183 
	}
}

	@test/include/test/SFMT-params.h

36 #i‚de‡
SFMT_PARAMS_H


37 
	#SFMT_PARAMS_H


	)

39 #i‡!
deföed
(
MEXP
)

40 #ifde‡
__GNUC__


43 
	#MEXP
 19937

	)

53 
	#N
 (
MEXP
 / 128 + 1)

	)

56 
	#N32
 (
N
 * 4)

	)

59 
	#N64
 (
N
 * 2)

	)

102 #i‡
MEXP
 == 607

103 
	~"ã°/SFMT-∑øms607.h
"

104 #ñi‡
MEXP
 == 1279

105 
	~"ã°/SFMT-∑øms1279.h
"

106 #ñi‡
MEXP
 == 2281

107 
	~"ã°/SFMT-∑øms2281.h
"

108 #ñi‡
MEXP
 == 4253

109 
	~"ã°/SFMT-∑øms4253.h
"

110 #ñi‡
MEXP
 == 11213

111 
	~"ã°/SFMT-∑øms11213.h
"

112 #ñi‡
MEXP
 == 19937

113 
	~"ã°/SFMT-∑øms19937.h
"

114 #ñi‡
MEXP
 == 44497

115 
	~"ã°/SFMT-∑øms44497.h
"

116 #ñi‡
MEXP
 == 86243

117 
	~"ã°/SFMT-∑øms86243.h
"

118 #ñi‡
MEXP
 == 132049

119 
	~"ã°/SFMT-∑øms132049.h
"

120 #ñi‡
MEXP
 == 216091

121 
	~"ã°/SFMT-∑øms216091.h
"

123 #ifde‡
__GNUC__


125 #unde‡
MEXP


127 #unde‡
MEXP


	@test/include/test/SFMT-params11213.h

36 #i‚de‡
SFMT_PARAMS11213_H


37 
	#SFMT_PARAMS11213_H


	)

39 
	#POS1
 68

	)

40 
	#SL1
 14

	)

41 
	#SL2
 3

	)

42 
	#SR1
 7

	)

43 
	#SR2
 3

	)

44 
	#MSK1
 0xeffff7fbU

	)

45 
	#MSK2
 0xfffff„fU

	)

46 
	#MSK3
 0xdfdfbfffU

	)

47 
	#MSK4
 0x7fffdbfdU

	)

48 
	#PARITY1
 0x00000001U

	)

49 
	#PARITY2
 0x00000000U

	)

50 
	#PARITY3
 0xe8148000U

	)

51 
	#PARITY4
 0xd0c7aÁ3U

	)

55 #i‡
deföed
(
__APPLE__
)

56 
	#ALTI_SL1
 (
ve˘‹
 )(
SL1
, SL1, SL1, SL1)

	)

57 
	#ALTI_SR1
 (
ve˘‹
 )(
SR1
, SR1, SR1, SR1)

	)

58 
	#ALTI_MSK
 (
ve˘‹
 )(
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
)

	)

59 
	#ALTI_MSK64
 \

60 (
ve˘‹
 )(
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
)

	)

61 
	#ALTI_SL2_PERM
 \

62 (
ve˘‹
 )(3,21,21,21,7,0,1,2,11,4,5,6,15,8,9,10)

	)

63 
	#ALTI_SL2_PERM64
 \

64 (
ve˘‹
 )(3,4,5,6,7,29,29,29,11,12,13,14,15,0,1,2)

	)

65 
	#ALTI_SR2_PERM
 \

66 (
ve˘‹
 )(5,6,7,0,9,10,11,4,13,14,15,8,19,19,19,12)

	)

67 
	#ALTI_SR2_PERM64
 \

68 (
ve˘‹
 )(13,14,15,0,1,2,3,4,19,19,19,8,9,10,11,12)

	)

70 
	#ALTI_SL1
 {
SL1
, SL1, SL1, SL1}

	)

71 
	#ALTI_SR1
 {
SR1
, SR1, SR1, SR1}

	)

72 
	#ALTI_MSK
 {
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
}

	)

73 
	#ALTI_MSK64
 {
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
}

	)

74 
	#ALTI_SL2_PERM
 {3,21,21,21,7,0,1,2,11,4,5,6,15,8,9,10}

	)

75 
	#ALTI_SL2_PERM64
 {3,4,5,6,7,29,29,29,11,12,13,14,15,0,1,2}

	)

76 
	#ALTI_SR2_PERM
 {5,6,7,0,9,10,11,4,13,14,15,8,19,19,19,12}

	)

77 
	#ALTI_SR2_PERM64
 {13,14,15,0,1,2,3,4,19,19,19,8,9,10,11,12}

	)

79 
	#IDSTR
 "SFMT-11213:68-14-3-7-3:effff7fb-fffff„f-dfdfbfff-7fffdbfd"

	)

	@test/include/test/SFMT-params1279.h

36 #i‚de‡
SFMT_PARAMS1279_H


37 
	#SFMT_PARAMS1279_H


	)

39 
	#POS1
 7

	)

40 
	#SL1
 14

	)

41 
	#SL2
 3

	)

42 
	#SR1
 5

	)

43 
	#SR2
 1

	)

44 
	#MSK1
 0xf7„fffdU

	)

45 
	#MSK2
 0x7„fcfffU

	)

46 
	#MSK3
 0xaff3ef3fU

	)

47 
	#MSK4
 0xb5ffff7fU

	)

48 
	#PARITY1
 0x00000001U

	)

49 
	#PARITY2
 0x00000000U

	)

50 
	#PARITY3
 0x00000000U

	)

51 
	#PARITY4
 0x20000000U

	)

55 #i‡
deföed
(
__APPLE__
)

56 
	#ALTI_SL1
 (
ve˘‹
 )(
SL1
, SL1, SL1, SL1)

	)

57 
	#ALTI_SR1
 (
ve˘‹
 )(
SR1
, SR1, SR1, SR1)

	)

58 
	#ALTI_MSK
 (
ve˘‹
 )(
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
)

	)

59 
	#ALTI_MSK64
 \

60 (
ve˘‹
 )(
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
)

	)

61 
	#ALTI_SL2_PERM
 \

62 (
ve˘‹
 )(3,21,21,21,7,0,1,2,11,4,5,6,15,8,9,10)

	)

63 
	#ALTI_SL2_PERM64
 \

64 (
ve˘‹
 )(3,4,5,6,7,29,29,29,11,12,13,14,15,0,1,2)

	)

65 
	#ALTI_SR2_PERM
 \

66 (
ve˘‹
 )(7,0,1,2,11,4,5,6,15,8,9,10,17,12,13,14)

	)

67 
	#ALTI_SR2_PERM64
 \

68 (
ve˘‹
 )(15,0,1,2,3,4,5,6,17,8,9,10,11,12,13,14)

	)

70 
	#ALTI_SL1
 {
SL1
, SL1, SL1, SL1}

	)

71 
	#ALTI_SR1
 {
SR1
, SR1, SR1, SR1}

	)

72 
	#ALTI_MSK
 {
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
}

	)

73 
	#ALTI_MSK64
 {
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
}

	)

74 
	#ALTI_SL2_PERM
 {3,21,21,21,7,0,1,2,11,4,5,6,15,8,9,10}

	)

75 
	#ALTI_SL2_PERM64
 {3,4,5,6,7,29,29,29,11,12,13,14,15,0,1,2}

	)

76 
	#ALTI_SR2_PERM
 {7,0,1,2,11,4,5,6,15,8,9,10,17,12,13,14}

	)

77 
	#ALTI_SR2_PERM64
 {15,0,1,2,3,4,5,6,17,8,9,10,11,12,13,14}

	)

79 
	#IDSTR
 "SFMT-1279:7-14-3-5-1:f7„fffd-7„fcfff-aff3ef3f-b5ffff7f"

	)

	@test/include/test/SFMT-params132049.h

36 #i‚de‡
SFMT_PARAMS132049_H


37 
	#SFMT_PARAMS132049_H


	)

39 
	#POS1
 110

	)

40 
	#SL1
 19

	)

41 
	#SL2
 1

	)

42 
	#SR1
 21

	)

43 
	#SR2
 1

	)

44 
	#MSK1
 0xffffbb5fU

	)

45 
	#MSK2
 0xfb6ebf95U

	)

46 
	#MSK3
 0xff„ffÁU

	)

47 
	#MSK4
 0xcff77fffU

	)

48 
	#PARITY1
 0x00000001U

	)

49 
	#PARITY2
 0x00000000U

	)

50 
	#PARITY3
 0xcb520000U

	)

51 
	#PARITY4
 0xc7e91c7dU

	)

55 #i‡
deföed
(
__APPLE__
)

56 
	#ALTI_SL1
 (
ve˘‹
 )(
SL1
, SL1, SL1, SL1)

	)

57 
	#ALTI_SR1
 (
ve˘‹
 )(
SR1
, SR1, SR1, SR1)

	)

58 
	#ALTI_MSK
 (
ve˘‹
 )(
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
)

	)

59 
	#ALTI_MSK64
 \

60 (
ve˘‹
 )(
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
)

	)

61 
	#ALTI_SL2_PERM
 \

62 (
ve˘‹
 )(1,2,3,23,5,6,7,0,9,10,11,4,13,14,15,8)

	)

63 
	#ALTI_SL2_PERM64
 \

64 (
ve˘‹
 )(1,2,3,4,5,6,7,31,9,10,11,12,13,14,15,0)

	)

65 
	#ALTI_SR2_PERM
 \

66 (
ve˘‹
 )(7,0,1,2,11,4,5,6,15,8,9,10,17,12,13,14)

	)

67 
	#ALTI_SR2_PERM64
 \

68 (
ve˘‹
 )(15,0,1,2,3,4,5,6,17,8,9,10,11,12,13,14)

	)

70 
	#ALTI_SL1
 {
SL1
, SL1, SL1, SL1}

	)

71 
	#ALTI_SR1
 {
SR1
, SR1, SR1, SR1}

	)

72 
	#ALTI_MSK
 {
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
}

	)

73 
	#ALTI_MSK64
 {
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
}

	)

74 
	#ALTI_SL2_PERM
 {1,2,3,23,5,6,7,0,9,10,11,4,13,14,15,8}

	)

75 
	#ALTI_SL2_PERM64
 {1,2,3,4,5,6,7,31,9,10,11,12,13,14,15,0}

	)

76 
	#ALTI_SR2_PERM
 {7,0,1,2,11,4,5,6,15,8,9,10,17,12,13,14}

	)

77 
	#ALTI_SR2_PERM64
 {15,0,1,2,3,4,5,6,17,8,9,10,11,12,13,14}

	)

79 
	#IDSTR
 "SFMT-132049:110-19-1-21-1:ffffbb5f-fb6ebf95-ff„ffÁ-cff77fff"

	)

	@test/include/test/SFMT-params19937.h

36 #i‚de‡
SFMT_PARAMS19937_H


37 
	#SFMT_PARAMS19937_H


	)

39 
	#POS1
 122

	)

40 
	#SL1
 18

	)

41 
	#SL2
 1

	)

42 
	#SR1
 11

	)

43 
	#SR2
 1

	)

44 
	#MSK1
 0xdffff„fU

	)

45 
	#MSK2
 0xdd„cb7fU

	)

46 
	#MSK3
 0xbfÁffffU

	)

47 
	#MSK4
 0xbffffff6U

	)

48 
	#PARITY1
 0x00000001U

	)

49 
	#PARITY2
 0x00000000U

	)

50 
	#PARITY3
 0x00000000U

	)

51 
	#PARITY4
 0x13c9e684U

	)

55 #i‡
deföed
(
__APPLE__
)

56 
	#ALTI_SL1
 (
ve˘‹
 )(
SL1
, SL1, SL1, SL1)

	)

57 
	#ALTI_SR1
 (
ve˘‹
 )(
SR1
, SR1, SR1, SR1)

	)

58 
	#ALTI_MSK
 (
ve˘‹
 )(
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
)

	)

59 
	#ALTI_MSK64
 \

60 (
ve˘‹
 )(
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
)

	)

61 
	#ALTI_SL2_PERM
 \

62 (
ve˘‹
 )(1,2,3,23,5,6,7,0,9,10,11,4,13,14,15,8)

	)

63 
	#ALTI_SL2_PERM64
 \

64 (
ve˘‹
 )(1,2,3,4,5,6,7,31,9,10,11,12,13,14,15,0)

	)

65 
	#ALTI_SR2_PERM
 \

66 (
ve˘‹
 )(7,0,1,2,11,4,5,6,15,8,9,10,17,12,13,14)

	)

67 
	#ALTI_SR2_PERM64
 \

68 (
ve˘‹
 )(15,0,1,2,3,4,5,6,17,8,9,10,11,12,13,14)

	)

70 
	#ALTI_SL1
 {
SL1
, SL1, SL1, SL1}

	)

71 
	#ALTI_SR1
 {
SR1
, SR1, SR1, SR1}

	)

72 
	#ALTI_MSK
 {
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
}

	)

73 
	#ALTI_MSK64
 {
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
}

	)

74 
	#ALTI_SL2_PERM
 {1,2,3,23,5,6,7,0,9,10,11,4,13,14,15,8}

	)

75 
	#ALTI_SL2_PERM64
 {1,2,3,4,5,6,7,31,9,10,11,12,13,14,15,0}

	)

76 
	#ALTI_SR2_PERM
 {7,0,1,2,11,4,5,6,15,8,9,10,17,12,13,14}

	)

77 
	#ALTI_SR2_PERM64
 {15,0,1,2,3,4,5,6,17,8,9,10,11,12,13,14}

	)

79 
	#IDSTR
 "SFMT-19937:122-18-1-11-1:dffff„f-dd„cb7f-bfÁffff-bffffff6"

	)

	@test/include/test/SFMT-params216091.h

36 #i‚de‡
SFMT_PARAMS216091_H


37 
	#SFMT_PARAMS216091_H


	)

39 
	#POS1
 627

	)

40 
	#SL1
 11

	)

41 
	#SL2
 3

	)

42 
	#SR1
 10

	)

43 
	#SR2
 1

	)

44 
	#MSK1
 0xbff7bff7U

	)

45 
	#MSK2
 0xbfffffffU

	)

46 
	#MSK3
 0xbfffÁ7fU

	)

47 
	#MSK4
 0xffddfbfbU

	)

48 
	#PARITY1
 0xf8000001U

	)

49 
	#PARITY2
 0x89e80709U

	)

50 
	#PARITY3
 0x3bd2b64bU

	)

51 
	#PARITY4
 0x0c64b1e4U

	)

55 #i‡
deföed
(
__APPLE__
)

56 
	#ALTI_SL1
 (
ve˘‹
 )(
SL1
, SL1, SL1, SL1)

	)

57 
	#ALTI_SR1
 (
ve˘‹
 )(
SR1
, SR1, SR1, SR1)

	)

58 
	#ALTI_MSK
 (
ve˘‹
 )(
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
)

	)

59 
	#ALTI_MSK64
 \

60 (
ve˘‹
 )(
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
)

	)

61 
	#ALTI_SL2_PERM
 \

62 (
ve˘‹
 )(3,21,21,21,7,0,1,2,11,4,5,6,15,8,9,10)

	)

63 
	#ALTI_SL2_PERM64
 \

64 (
ve˘‹
 )(3,4,5,6,7,29,29,29,11,12,13,14,15,0,1,2)

	)

65 
	#ALTI_SR2_PERM
 \

66 (
ve˘‹
 )(7,0,1,2,11,4,5,6,15,8,9,10,17,12,13,14)

	)

67 
	#ALTI_SR2_PERM64
 \

68 (
ve˘‹
 )(15,0,1,2,3,4,5,6,17,8,9,10,11,12,13,14)

	)

70 
	#ALTI_SL1
 {
SL1
, SL1, SL1, SL1}

	)

71 
	#ALTI_SR1
 {
SR1
, SR1, SR1, SR1}

	)

72 
	#ALTI_MSK
 {
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
}

	)

73 
	#ALTI_MSK64
 {
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
}

	)

74 
	#ALTI_SL2_PERM
 {3,21,21,21,7,0,1,2,11,4,5,6,15,8,9,10}

	)

75 
	#ALTI_SL2_PERM64
 {3,4,5,6,7,29,29,29,11,12,13,14,15,0,1,2}

	)

76 
	#ALTI_SR2_PERM
 {7,0,1,2,11,4,5,6,15,8,9,10,17,12,13,14}

	)

77 
	#ALTI_SR2_PERM64
 {15,0,1,2,3,4,5,6,17,8,9,10,11,12,13,14}

	)

79 
	#IDSTR
 "SFMT-216091:627-11-3-10-1:bff7bff7-bfffffff-bfffÁ7f-ffddfbfb"

	)

	@test/include/test/SFMT-params2281.h

36 #i‚de‡
SFMT_PARAMS2281_H


37 
	#SFMT_PARAMS2281_H


	)

39 
	#POS1
 12

	)

40 
	#SL1
 19

	)

41 
	#SL2
 1

	)

42 
	#SR1
 5

	)

43 
	#SR2
 1

	)

44 
	#MSK1
 0xbff7ffbfU

	)

45 
	#MSK2
 0xfdffff„U

	)

46 
	#MSK3
 0xf7f„f7fU

	)

47 
	#MSK4
 0xf2f7cbbfU

	)

48 
	#PARITY1
 0x00000001U

	)

49 
	#PARITY2
 0x00000000U

	)

50 
	#PARITY3
 0x00000000U

	)

51 
	#PARITY4
 0x41dÁ600U

	)

55 #i‡
deföed
(
__APPLE__
)

56 
	#ALTI_SL1
 (
ve˘‹
 )(
SL1
, SL1, SL1, SL1)

	)

57 
	#ALTI_SR1
 (
ve˘‹
 )(
SR1
, SR1, SR1, SR1)

	)

58 
	#ALTI_MSK
 (
ve˘‹
 )(
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
)

	)

59 
	#ALTI_MSK64
 \

60 (
ve˘‹
 )(
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
)

	)

61 
	#ALTI_SL2_PERM
 \

62 (
ve˘‹
 )(1,2,3,23,5,6,7,0,9,10,11,4,13,14,15,8)

	)

63 
	#ALTI_SL2_PERM64
 \

64 (
ve˘‹
 )(1,2,3,4,5,6,7,31,9,10,11,12,13,14,15,0)

	)

65 
	#ALTI_SR2_PERM
 \

66 (
ve˘‹
 )(7,0,1,2,11,4,5,6,15,8,9,10,17,12,13,14)

	)

67 
	#ALTI_SR2_PERM64
 \

68 (
ve˘‹
 )(15,0,1,2,3,4,5,6,17,8,9,10,11,12,13,14)

	)

70 
	#ALTI_SL1
 {
SL1
, SL1, SL1, SL1}

	)

71 
	#ALTI_SR1
 {
SR1
, SR1, SR1, SR1}

	)

72 
	#ALTI_MSK
 {
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
}

	)

73 
	#ALTI_MSK64
 {
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
}

	)

74 
	#ALTI_SL2_PERM
 {1,2,3,23,5,6,7,0,9,10,11,4,13,14,15,8}

	)

75 
	#ALTI_SL2_PERM64
 {1,2,3,4,5,6,7,31,9,10,11,12,13,14,15,0}

	)

76 
	#ALTI_SR2_PERM
 {7,0,1,2,11,4,5,6,15,8,9,10,17,12,13,14}

	)

77 
	#ALTI_SR2_PERM64
 {15,0,1,2,3,4,5,6,17,8,9,10,11,12,13,14}

	)

79 
	#IDSTR
 "SFMT-2281:12-19-1-5-1:bff7ffbf-fdffff„-f7f„f7f-f2f7cbbf"

	)

	@test/include/test/SFMT-params4253.h

36 #i‚de‡
SFMT_PARAMS4253_H


37 
	#SFMT_PARAMS4253_H


	)

39 
	#POS1
 17

	)

40 
	#SL1
 20

	)

41 
	#SL2
 1

	)

42 
	#SR1
 7

	)

43 
	#SR2
 1

	)

44 
	#MSK1
 0x9f7bffffU

	)

45 
	#MSK2
 0x9fffff5fU

	)

46 
	#MSK3
 0x3efffffbU

	)

47 
	#MSK4
 0xfffff7bbU

	)

48 
	#PARITY1
 0xa8000001U

	)

49 
	#PARITY2
 0xaf5390a3U

	)

50 
	#PARITY3
 0xb740b3f8U

	)

51 
	#PARITY4
 0x6c11486dU

	)

55 #i‡
deföed
(
__APPLE__
)

56 
	#ALTI_SL1
 (
ve˘‹
 )(
SL1
, SL1, SL1, SL1)

	)

57 
	#ALTI_SR1
 (
ve˘‹
 )(
SR1
, SR1, SR1, SR1)

	)

58 
	#ALTI_MSK
 (
ve˘‹
 )(
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
)

	)

59 
	#ALTI_MSK64
 \

60 (
ve˘‹
 )(
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
)

	)

61 
	#ALTI_SL2_PERM
 \

62 (
ve˘‹
 )(1,2,3,23,5,6,7,0,9,10,11,4,13,14,15,8)

	)

63 
	#ALTI_SL2_PERM64
 \

64 (
ve˘‹
 )(1,2,3,4,5,6,7,31,9,10,11,12,13,14,15,0)

	)

65 
	#ALTI_SR2_PERM
 \

66 (
ve˘‹
 )(7,0,1,2,11,4,5,6,15,8,9,10,17,12,13,14)

	)

67 
	#ALTI_SR2_PERM64
 \

68 (
ve˘‹
 )(15,0,1,2,3,4,5,6,17,8,9,10,11,12,13,14)

	)

70 
	#ALTI_SL1
 {
SL1
, SL1, SL1, SL1}

	)

71 
	#ALTI_SR1
 {
SR1
, SR1, SR1, SR1}

	)

72 
	#ALTI_MSK
 {
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
}

	)

73 
	#ALTI_MSK64
 {
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
}

	)

74 
	#ALTI_SL2_PERM
 {1,2,3,23,5,6,7,0,9,10,11,4,13,14,15,8}

	)

75 
	#ALTI_SL2_PERM64
 {1,2,3,4,5,6,7,31,9,10,11,12,13,14,15,0}

	)

76 
	#ALTI_SR2_PERM
 {7,0,1,2,11,4,5,6,15,8,9,10,17,12,13,14}

	)

77 
	#ALTI_SR2_PERM64
 {15,0,1,2,3,4,5,6,17,8,9,10,11,12,13,14}

	)

79 
	#IDSTR
 "SFMT-4253:17-20-1-7-1:9f7bffff-9fffff5f-3efffffb-fffff7bb"

	)

	@test/include/test/SFMT-params44497.h

36 #i‚de‡
SFMT_PARAMS44497_H


37 
	#SFMT_PARAMS44497_H


	)

39 
	#POS1
 330

	)

40 
	#SL1
 5

	)

41 
	#SL2
 3

	)

42 
	#SR1
 9

	)

43 
	#SR2
 3

	)

44 
	#MSK1
 0xeffffffbU

	)

45 
	#MSK2
 0xdfbebfffU

	)

46 
	#MSK3
 0xbfbf7befU

	)

47 
	#MSK4
 0x9ffd7bffU

	)

48 
	#PARITY1
 0x00000001U

	)

49 
	#PARITY2
 0x00000000U

	)

50 
	#PARITY3
 0xa3ac4000U

	)

51 
	#PARITY4
 0xecc1327aU

	)

55 #i‡
deföed
(
__APPLE__
)

56 
	#ALTI_SL1
 (
ve˘‹
 )(
SL1
, SL1, SL1, SL1)

	)

57 
	#ALTI_SR1
 (
ve˘‹
 )(
SR1
, SR1, SR1, SR1)

	)

58 
	#ALTI_MSK
 (
ve˘‹
 )(
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
)

	)

59 
	#ALTI_MSK64
 \

60 (
ve˘‹
 )(
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
)

	)

61 
	#ALTI_SL2_PERM
 \

62 (
ve˘‹
 )(3,21,21,21,7,0,1,2,11,4,5,6,15,8,9,10)

	)

63 
	#ALTI_SL2_PERM64
 \

64 (
ve˘‹
 )(3,4,5,6,7,29,29,29,11,12,13,14,15,0,1,2)

	)

65 
	#ALTI_SR2_PERM
 \

66 (
ve˘‹
 )(5,6,7,0,9,10,11,4,13,14,15,8,19,19,19,12)

	)

67 
	#ALTI_SR2_PERM64
 \

68 (
ve˘‹
 )(13,14,15,0,1,2,3,4,19,19,19,8,9,10,11,12)

	)

70 
	#ALTI_SL1
 {
SL1
, SL1, SL1, SL1}

	)

71 
	#ALTI_SR1
 {
SR1
, SR1, SR1, SR1}

	)

72 
	#ALTI_MSK
 {
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
}

	)

73 
	#ALTI_MSK64
 {
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
}

	)

74 
	#ALTI_SL2_PERM
 {3,21,21,21,7,0,1,2,11,4,5,6,15,8,9,10}

	)

75 
	#ALTI_SL2_PERM64
 {3,4,5,6,7,29,29,29,11,12,13,14,15,0,1,2}

	)

76 
	#ALTI_SR2_PERM
 {5,6,7,0,9,10,11,4,13,14,15,8,19,19,19,12}

	)

77 
	#ALTI_SR2_PERM64
 {13,14,15,0,1,2,3,4,19,19,19,8,9,10,11,12}

	)

79 
	#IDSTR
 "SFMT-44497:330-5-3-9-3:effffffb-dfbebfff-bfbf7bef-9ffd7bff"

	)

	@test/include/test/SFMT-params607.h

36 #i‚de‡
SFMT_PARAMS607_H


37 
	#SFMT_PARAMS607_H


	)

39 
	#POS1
 2

	)

40 
	#SL1
 15

	)

41 
	#SL2
 3

	)

42 
	#SR1
 13

	)

43 
	#SR2
 3

	)

44 
	#MSK1
 0xfdff37ffU

	)

45 
	#MSK2
 0xef7f3f7dU

	)

46 
	#MSK3
 0xff777b7dU

	)

47 
	#MSK4
 0x7ff7fb2fU

	)

48 
	#PARITY1
 0x00000001U

	)

49 
	#PARITY2
 0x00000000U

	)

50 
	#PARITY3
 0x00000000U

	)

51 
	#PARITY4
 0x5986f054U

	)

55 #i‡
deföed
(
__APPLE__
)

56 
	#ALTI_SL1
 (
ve˘‹
 )(
SL1
, SL1, SL1, SL1)

	)

57 
	#ALTI_SR1
 (
ve˘‹
 )(
SR1
, SR1, SR1, SR1)

	)

58 
	#ALTI_MSK
 (
ve˘‹
 )(
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
)

	)

59 
	#ALTI_MSK64
 \

60 (
ve˘‹
 )(
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
)

	)

61 
	#ALTI_SL2_PERM
 \

62 (
ve˘‹
 )(3,21,21,21,7,0,1,2,11,4,5,6,15,8,9,10)

	)

63 
	#ALTI_SL2_PERM64
 \

64 (
ve˘‹
 )(3,4,5,6,7,29,29,29,11,12,13,14,15,0,1,2)

	)

65 
	#ALTI_SR2_PERM
 \

66 (
ve˘‹
 )(5,6,7,0,9,10,11,4,13,14,15,8,19,19,19,12)

	)

67 
	#ALTI_SR2_PERM64
 \

68 (
ve˘‹
 )(13,14,15,0,1,2,3,4,19,19,19,8,9,10,11,12)

	)

70 
	#ALTI_SL1
 {
SL1
, SL1, SL1, SL1}

	)

71 
	#ALTI_SR1
 {
SR1
, SR1, SR1, SR1}

	)

72 
	#ALTI_MSK
 {
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
}

	)

73 
	#ALTI_MSK64
 {
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
}

	)

74 
	#ALTI_SL2_PERM
 {3,21,21,21,7,0,1,2,11,4,5,6,15,8,9,10}

	)

75 
	#ALTI_SL2_PERM64
 {3,4,5,6,7,29,29,29,11,12,13,14,15,0,1,2}

	)

76 
	#ALTI_SR2_PERM
 {5,6,7,0,9,10,11,4,13,14,15,8,19,19,19,12}

	)

77 
	#ALTI_SR2_PERM64
 {13,14,15,0,1,2,3,4,19,19,19,8,9,10,11,12}

	)

79 
	#IDSTR
 "SFMT-607:2-15-3-13-3:fdff37ff-ef7f3f7d-ff777b7d-7ff7fb2f"

	)

	@test/include/test/SFMT-params86243.h

36 #i‚de‡
SFMT_PARAMS86243_H


37 
	#SFMT_PARAMS86243_H


	)

39 
	#POS1
 366

	)

40 
	#SL1
 6

	)

41 
	#SL2
 7

	)

42 
	#SR1
 19

	)

43 
	#SR2
 1

	)

44 
	#MSK1
 0xfdbffbffU

	)

45 
	#MSK2
 0xbff7ff3fU

	)

46 
	#MSK3
 0xfd77efffU

	)

47 
	#MSK4
 0xbf9ff3ffU

	)

48 
	#PARITY1
 0x00000001U

	)

49 
	#PARITY2
 0x00000000U

	)

50 
	#PARITY3
 0x00000000U

	)

51 
	#PARITY4
 0xe9528d85U

	)

55 #i‡
deföed
(
__APPLE__
)

56 
	#ALTI_SL1
 (
ve˘‹
 )(
SL1
, SL1, SL1, SL1)

	)

57 
	#ALTI_SR1
 (
ve˘‹
 )(
SR1
, SR1, SR1, SR1)

	)

58 
	#ALTI_MSK
 (
ve˘‹
 )(
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
)

	)

59 
	#ALTI_MSK64
 \

60 (
ve˘‹
 )(
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
)

	)

61 
	#ALTI_SL2_PERM
 \

62 (
ve˘‹
 )(25,25,25,25,3,25,25,25,7,0,1,2,11,4,5,6)

	)

63 
	#ALTI_SL2_PERM64
 \

64 (
ve˘‹
 )(7,25,25,25,25,25,25,25,15,0,1,2,3,4,5,6)

	)

65 
	#ALTI_SR2_PERM
 \

66 (
ve˘‹
 )(7,0,1,2,11,4,5,6,15,8,9,10,17,12,13,14)

	)

67 
	#ALTI_SR2_PERM64
 \

68 (
ve˘‹
 )(15,0,1,2,3,4,5,6,17,8,9,10,11,12,13,14)

	)

70 
	#ALTI_SL1
 {
SL1
, SL1, SL1, SL1}

	)

71 
	#ALTI_SR1
 {
SR1
, SR1, SR1, SR1}

	)

72 
	#ALTI_MSK
 {
MSK1
, 
MSK2
, 
MSK3
, 
MSK4
}

	)

73 
	#ALTI_MSK64
 {
MSK2
, 
MSK1
, 
MSK4
, 
MSK3
}

	)

74 
	#ALTI_SL2_PERM
 {25,25,25,25,3,25,25,25,7,0,1,2,11,4,5,6}

	)

75 
	#ALTI_SL2_PERM64
 {7,25,25,25,25,25,25,25,15,0,1,2,3,4,5,6}

	)

76 
	#ALTI_SR2_PERM
 {7,0,1,2,11,4,5,6,15,8,9,10,17,12,13,14}

	)

77 
	#ALTI_SR2_PERM64
 {15,0,1,2,3,4,5,6,17,8,9,10,11,12,13,14}

	)

79 
	#IDSTR
 "SFMT-86243:366-6-7-19-1:fdbffbff-bff7ff3f-fd77efff-bf9ff3ff"

	)

	@test/include/test/SFMT-sse2.h

51 #i‚de‡
SFMT_SSE2_H


52 
	#SFMT_SSE2_H


	)

63 
JEMALLOC_ALWAYS_INLINE
 
__m128i
 
	$mm_ªcursi⁄
(
__m128i
 *
a
, __m128ò*
b
,

64 
__m128i
 
c
, __m128ò
d
, __m128ò
mask
) {

65 
__m128i
 
v
, 
x
, 
y
, 
z
;

67 
x
 = 
	`_mm_lﬂd_si128
(
a
);

68 
y
 = 
	`_mm_§li_ïi32
(*
b
, 
SR1
);

69 
z
 = 
	`_mm_§li_si128
(
c
, 
SR2
);

70 
v
 = 
	`_mm_¶li_ïi32
(
d
, 
SL1
);

71 
z
 = 
	`_mm_x‹_si128
(z, 
x
);

72 
z
 = 
	`_mm_x‹_si128
(z, 
v
);

73 
x
 = 
	`_mm_¶li_si128
(x, 
SL2
);

74 
y
 = 
	`_mm_™d_si128
(y, 
mask
);

75 
z
 = 
	`_mm_x‹_si128
(z, 
x
);

76 
z
 = 
	`_mm_x‹_si128
(z, 
y
);

77  
z
;

78 
	}
}

84 
ölöe
 
	$gí_ønd_Æl
(
sfmt_t
 *
˘x
) {

85 
i
;

86 
__m128i
 
r
, 
r1
, 
r2
, 
mask
;

87 
mask
 = 
	`_mm_£t_ïi32
(
MSK4
, 
MSK3
, 
MSK2
, 
MSK1
);

89 
r1
 = 
	`_mm_lﬂd_si128
(&
˘x
->
sfmt
[
N
 - 2].
si
);

90 
r2
 = 
	`_mm_lﬂd_si128
(&
˘x
->
sfmt
[
N
 - 1].
si
);

91 
i
 = 0; i < 
N
 - 
POS1
; i++) {

92 
r
 = 
	`mm_ªcursi⁄
(&
˘x
->
sfmt
[
i
].
si
, &˘x->sfmt[ò+ 
POS1
].si, 
r1
, 
r2
,

93 
mask
);

94 
	`_mm_°‹e_si128
(&
˘x
->
sfmt
[
i
].
si
, 
r
);

95 
r1
 = 
r2
;

96 
r2
 = 
r
;

98 ; 
i
 < 
N
; i++) {

99 
r
 = 
	`mm_ªcursi⁄
(&
˘x
->
sfmt
[
i
].
si
, &˘x->sfmt[ò+ 
POS1
 - 
N
].si, 
r1
, 
r2
,

100 
mask
);

101 
	`_mm_°‹e_si128
(&
˘x
->
sfmt
[
i
].
si
, 
r
);

102 
r1
 = 
r2
;

103 
r2
 = 
r
;

105 
	}
}

114 
ölöe
 
	$gí_ønd_¨øy
(
sfmt_t
 *
˘x
, 
w128_t
 *
¨øy
, 
size
) {

115 
i
, 
j
;

116 
__m128i
 
r
, 
r1
, 
r2
, 
mask
;

117 
mask
 = 
	`_mm_£t_ïi32
(
MSK4
, 
MSK3
, 
MSK2
, 
MSK1
);

119 
r1
 = 
	`_mm_lﬂd_si128
(&
˘x
->
sfmt
[
N
 - 2].
si
);

120 
r2
 = 
	`_mm_lﬂd_si128
(&
˘x
->
sfmt
[
N
 - 1].
si
);

121 
i
 = 0; i < 
N
 - 
POS1
; i++) {

122 
r
 = 
	`mm_ªcursi⁄
(&
˘x
->
sfmt
[
i
].
si
, &˘x->sfmt[ò+ 
POS1
].si, 
r1
, 
r2
,

123 
mask
);

124 
	`_mm_°‹e_si128
(&
¨øy
[
i
].
si
, 
r
);

125 
r1
 = 
r2
;

126 
r2
 = 
r
;

128 ; 
i
 < 
N
; i++) {

129 
r
 = 
	`mm_ªcursi⁄
(&
˘x
->
sfmt
[
i
].
si
, &
¨øy
[ò+ 
POS1
 - 
N
].si, 
r1
, 
r2
,

130 
mask
);

131 
	`_mm_°‹e_si128
(&
¨øy
[
i
].
si
, 
r
);

132 
r1
 = 
r2
;

133 
r2
 = 
r
;

136 ; 
i
 < 
size
 - 
N
; i++) {

137 
r
 = 
	`mm_ªcursi⁄
(&
¨øy
[
i
 - 
N
].
si
, &¨øy[ò+ 
POS1
 - N].si, 
r1
, 
r2
,

138 
mask
);

139 
	`_mm_°‹e_si128
(&
¨øy
[
i
].
si
, 
r
);

140 
r1
 = 
r2
;

141 
r2
 = 
r
;

143 
j
 = 0; j < 2 * 
N
 - 
size
; j++) {

144 
r
 = 
	`_mm_lﬂd_si128
(&
¨øy
[
j
 + 
size
 - 
N
].
si
);

145 
	`_mm_°‹e_si128
(&
˘x
->
sfmt
[
j
].
si
, 
r
);

147 ; 
i
 < 
size
; i++) {

148 
r
 = 
	`mm_ªcursi⁄
(&
¨øy
[
i
 - 
N
].
si
, &¨øy[ò+ 
POS1
 - N].si, 
r1
, 
r2
,

149 
mask
);

150 
	`_mm_°‹e_si128
(&
¨øy
[
i
].
si
, 
r
);

151 
	`_mm_°‹e_si128
(&
˘x
->
sfmt
[
j
++].
si
, 
r
);

152 
r1
 = 
r2
;

153 
r2
 = 
r
;

155 
	}
}

	@test/include/test/SFMT.h

66 #i‚de‡
SFMT_H


67 
	#SFMT_H


	)

69 
sfmt_s
 
	tsfmt_t
;

71 
uöt32_t
 
gí_ønd32
(
sfmt_t
 *
˘x
);

72 
uöt32_t
 
gí_ønd32_ønge
(
sfmt_t
 *
˘x
, uöt32_à
limô
);

73 
uöt64_t
 
gí_ønd64
(
sfmt_t
 *
˘x
);

74 
uöt64_t
 
gí_ønd64_ønge
(
sfmt_t
 *
˘x
, uöt64_à
limô
);

75 
fûl_¨øy32
(
sfmt_t
 *
˘x
, 
uöt32_t
 *
¨øy
, 
size
);

76 
fûl_¨øy64
(
sfmt_t
 *
˘x
, 
uöt64_t
 *
¨øy
, 
size
);

77 
sfmt_t
 *
öô_gí_ønd
(
uöt32_t
 
£ed
);

78 
sfmt_t
 *
öô_by_¨øy
(
uöt32_t
 *
öô_key
, 
key_Àngth
);

79 
föi_gí_ønd
(
sfmt_t
 *
˘x
);

80 c⁄° *
gë_id°rög
();

81 
gë_mö_¨øy_size32
();

82 
gë_mö_¨øy_size64
();

86 
ölöe
 
	$to_ªÆ1
(
uöt32_t
 
v
) {

87  
v
 * (1.0/4294967295.0);

89 
	}
}

92 
ölöe
 
	$gíønd_ªÆ1
(
sfmt_t
 *
˘x
) {

93  
	`to_ªÆ1
(
	`gí_ønd32
(
˘x
));

94 
	}
}

97 
ölöe
 
	$to_ªÆ2
(
uöt32_t
 
v
) {

98  
v
 * (1.0/4294967296.0);

100 
	}
}

103 
ölöe
 
	$gíønd_ªÆ2
(
sfmt_t
 *
˘x
) {

104  
	`to_ªÆ2
(
	`gí_ønd32
(
˘x
));

105 
	}
}

108 
ölöe
 
	$to_ªÆ3
(
uöt32_t
 
v
) {

109  ((()
v
) + 0.5)*(1.0/4294967296.0);

111 
	}
}

114 
ölöe
 
	$gíønd_ªÆ3
(
sfmt_t
 *
˘x
) {

115  
	`to_ªÆ3
(
	`gí_ønd32
(
˘x
));

116 
	}
}

120 
ölöe
 
	$to_ªs53
(
uöt64_t
 
v
) {

121  
v
 * (1.0/18446744073709551616.0L);

122 
	}
}

126 
ölöe
 
	$to_ªs53_mix
(
uöt32_t
 
x
, uöt32_à
y
) {

127  
	`to_ªs53
(
x
 | ((
uöt64_t
)
y
 << 32));

128 
	}
}

132 
ölöe
 
	$gíønd_ªs53
(
sfmt_t
 *
˘x
) {

133  
	`to_ªs53
(
	`gí_ønd64
(
˘x
));

134 
	}
}

139 
ölöe
 
	$gíønd_ªs53_mix
(
sfmt_t
 *
˘x
) {

140 
uöt32_t
 
x
, 
y
;

142 
x
 = 
	`gí_ønd32
(
˘x
);

143 
y
 = 
	`gí_ønd32
(
˘x
);

144  
	`to_ªs53_mix
(
x
, 
y
);

145 
	}
}

	@test/include/test/btalloc.h

2 *
bèŒoc
(
size_t
 
size
, 
bôs
);

4 
	#bèŒoc_n_¥Ÿo
(
n
) \

5 *
bèŒoc_
##
	`n
(
size_t
 
size
, 
bôs
);

	)

6 
	$bèŒoc_n_¥Ÿo
(0)

7 
	$bèŒoc_n_¥Ÿo
(1)

9 
	#bèŒoc_n_gí
(
n
) \

11 
bèŒoc_
##
	`n
(
size_t
 
size
, 
bôs
) { \

12 *
p
; \

14 i‡(
bôs
 == 0) { \

15 
p
 = 
	`mÆlocx
(
size
, 0); \

17 
bôs
 & 0x1U) { \

19 
p
 = (
	`bèŒoc_0
(
size
, 
bôs
 >> 1)); \

22 
p
 = (
	`bèŒoc_1
(
size
, 
bôs
 >> 1)); \

24 : 
	`nŸ_ªached
(); \

28 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure"); \

29  
p
; \

30 
	}

	)
}

	@test/include/test/extent_hooks.h

6 *
exã¡_Æloc_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
√w_addr
,

7 
size_t
 
size
, size_à
Æignmít
, 
boﬁ
 *
zîo
, boﬁ *
commô
,

8 
¨ía_öd
);

9 
boﬁ
 
exã¡_dÆloc_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
,

10 
size_t
 
size
, 
boﬁ
 
commôãd
, 
¨ía_öd
);

11 
exã¡_de°roy_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
,

12 
size_t
 
size
, 
boﬁ
 
commôãd
, 
¨ía_öd
);

13 
boﬁ
 
exã¡_commô_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
,

14 
size_t
 
size
, size_à
off£t
, size_à
Àngth
, 
¨ía_öd
);

15 
boﬁ
 
exã¡_decommô_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
,

16 
size_t
 
size
, size_à
off£t
, size_à
Àngth
, 
¨ía_öd
);

17 
boﬁ
 
exã¡_purge_œzy_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
,

18 
size_t
 
size
, size_à
off£t
, size_à
Àngth
, 
¨ía_öd
);

19 
boﬁ
 
exã¡_purge_f‹˚d_hook
(
exã¡_hooks_t
 *
exã¡_hooks
,

20 *
addr
, 
size_t
 
size
, size_à
off£t
, size_à
Àngth
, 
¨ía_öd
);

21 
boﬁ
 
exã¡_•lô_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
,

22 
size_t
 
size
, size_à
size_a
, size_à
size_b
, 
boﬁ
 
commôãd
,

23 
¨ía_öd
);

24 
boﬁ
 
exã¡_mîge_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr_a
,

25 
size_t
 
size_a
, *
addr_b
, size_à
size_b
, 
boﬁ
 
commôãd
,

26 
¨ía_öd
);

28 
exã¡_hooks_t
 *
	gdeÁu…_hooks
;

29 
exã¡_hooks_t
 
	ghooks
 = {

30 
exã¡_Æloc_hook
,

31 
exã¡_dÆloc_hook
,

32 
exã¡_de°roy_hook
,

33 
exã¡_commô_hook
,

34 
exã¡_decommô_hook
,

35 
exã¡_purge_œzy_hook
,

36 
exã¡_purge_f‹˚d_hook
,

37 
exã¡_•lô_hook
,

38 
exã¡_mîge_hook


42 
boﬁ
 
	gåy_Æloc
 = 
åue
;

43 
boﬁ
 
	gåy_dÆloc
 = 
åue
;

44 
boﬁ
 
	gåy_de°roy
 = 
åue
;

45 
boﬁ
 
	gåy_commô
 = 
åue
;

46 
boﬁ
 
	gåy_decommô
 = 
åue
;

47 
boﬁ
 
	gåy_purge_œzy
 = 
åue
;

48 
boﬁ
 
	gåy_purge_f‹˚d
 = 
åue
;

49 
boﬁ
 
	gåy_•lô
 = 
åue
;

50 
boﬁ
 
	gåy_mîge
 = 
åue
;

53 
boﬁ
 
	gˇŒed_Æloc
;

54 
boﬁ
 
	gˇŒed_dÆloc
;

55 
boﬁ
 
	gˇŒed_de°roy
;

56 
boﬁ
 
	gˇŒed_commô
;

57 
boﬁ
 
	gˇŒed_decommô
;

58 
boﬁ
 
	gˇŒed_purge_œzy
;

59 
boﬁ
 
	gˇŒed_purge_f‹˚d
;

60 
boﬁ
 
	gˇŒed_•lô
;

61 
boﬁ
 
	gˇŒed_mîge
;

64 
boﬁ
 
	gdid_Æloc
;

65 
boﬁ
 
	gdid_dÆloc
;

66 
boﬁ
 
	gdid_de°roy
;

67 
boﬁ
 
	gdid_commô
;

68 
boﬁ
 
	gdid_decommô
;

69 
boﬁ
 
	gdid_purge_œzy
;

70 
boﬁ
 
	gdid_purge_f‹˚d
;

71 
boﬁ
 
	gdid_•lô
;

72 
boﬁ
 
	gdid_mîge
;

75 
	#TRACE_HOOK
(
fmt
, ...Ë
	`mÆloc_¥ötf
(fmt, 
__VA_ARGS__
)

	)

77 
	#TRACE_HOOK
(
fmt
, ...)

	)

81 
	$exã¡_Æloc_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
√w_addr
, 
size_t
 
size
,

82 
size_t
 
Æignmít
, 
boﬁ
 *
zîo
, boﬁ *
commô
, 
¨ía_öd
) {

83 *
ªt
;

85 
	`TRACE_HOOK
("%s(extent_hooks=%p,Çew_addr=%p, size=%zu,álignment=%zu, "

86 "*zîo=%s, *commô=%s,áª«_öd=%u)\n", 
__func__
, 
exã¡_hooks
,

87 
√w_addr
, 
size
, 
Æignmít
, *
zîo
 ? "åue" : "Ál£", *
commô
 ?

88 "åue" : "Ál£", 
¨ía_öd
);

89 
	`as£π_±r_eq
(
exã¡_hooks
, &
hooks
,

91 
	`as£π_±r_eq
(
exã¡_hooks
->
Æloc
, 
exã¡_Æloc_hook
,

93 
ˇŒed_Æloc
 = 
åue
;

94 i‡(!
åy_Æloc
) {

95  
NULL
;

97 
ªt
 = 
deÁu…_hooks
->
	`Æloc
(deÁu…_hooks, 
√w_addr
, 
size
, 
Æignmít
,

98 
zîo
, 
commô
, 0);

99 
did_Æloc
 = (
ªt
 !
NULL
);

100  
ªt
;

101 
	}
}

103 
boﬁ


104 
	$exã¡_dÆloc_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
, 
size_t
 
size
,

105 
boﬁ
 
commôãd
, 
¨ía_öd
) {

106 
boﬁ
 
îr
;

108 
	`TRACE_HOOK
("%s(extent_hooks=%p,áddr=%p, size=%zu, committed=%s, "

109 "¨ía_öd=%u)\n", 
__func__
, 
exã¡_hooks
, 
addr
, 
size
, 
commôãd
 ?

110 "åue" : "Ál£", 
¨ía_öd
);

111 
	`as£π_±r_eq
(
exã¡_hooks
, &
hooks
,

113 
	`as£π_±r_eq
(
exã¡_hooks
->
dÆloc
, 
exã¡_dÆloc_hook
,

115 
ˇŒed_dÆloc
 = 
åue
;

116 i‡(!
åy_dÆloc
) {

117  
åue
;

119 
îr
 = 
deÁu…_hooks
->
	`dÆloc
(deÁu…_hooks, 
addr
, 
size
, 
commôãd
, 0);

120 
did_dÆloc
 = !
îr
;

121  
îr
;

122 
	}
}

125 
	$exã¡_de°roy_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
, 
size_t
 
size
,

126 
boﬁ
 
commôãd
, 
¨ía_öd
) {

127 
	`TRACE_HOOK
("%s(extent_hooks=%p,áddr=%p, size=%zu, committed=%s, "

128 "¨ía_öd=%u)\n", 
__func__
, 
exã¡_hooks
, 
addr
, 
size
, 
commôãd
 ?

129 "åue" : "Ál£", 
¨ía_öd
);

130 
	`as£π_±r_eq
(
exã¡_hooks
, &
hooks
,

132 
	`as£π_±r_eq
(
exã¡_hooks
->
de°roy
, 
exã¡_de°roy_hook
,

134 
ˇŒed_de°roy
 = 
åue
;

135 i‡(!
åy_de°roy
) {

138 
deÁu…_hooks
->
	`de°roy
(deÁu…_hooks, 
addr
, 
size
, 
commôãd
, 0);

139 
did_de°roy
 = 
åue
;

140 
	}
}

142 
boﬁ


143 
	$exã¡_commô_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
, 
size_t
 
size
,

144 
size_t
 
off£t
, size_à
Àngth
, 
¨ía_öd
) {

145 
boﬁ
 
îr
;

147 
	`TRACE_HOOK
("%s(extent_hooks=%p,áddr=%p, size=%zu, offset=%zu, "

148 "Àngth=%zu,áª«_öd=%u)\n", 
__func__
, 
exã¡_hooks
, 
addr
, 
size
,

149 
off£t
, 
Àngth
, 
¨ía_öd
);

150 
	`as£π_±r_eq
(
exã¡_hooks
, &
hooks
,

152 
	`as£π_±r_eq
(
exã¡_hooks
->
commô
, 
exã¡_commô_hook
,

154 
ˇŒed_commô
 = 
åue
;

155 i‡(!
åy_commô
) {

156  
åue
;

158 
îr
 = 
deÁu…_hooks
->
	`commô
(deÁu…_hooks, 
addr
, 
size
, 
off£t
, 
Àngth
,

160 
did_commô
 = !
îr
;

161  
îr
;

162 
	}
}

164 
boﬁ


165 
	$exã¡_decommô_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
, 
size_t
 
size
,

166 
size_t
 
off£t
, size_à
Àngth
, 
¨ía_öd
) {

167 
boﬁ
 
îr
;

169 
	`TRACE_HOOK
("%s(extent_hooks=%p,áddr=%p, size=%zu, offset=%zu, "

170 "Àngth=%zu,áª«_öd=%u)\n", 
__func__
, 
exã¡_hooks
, 
addr
, 
size
,

171 
off£t
, 
Àngth
, 
¨ía_öd
);

172 
	`as£π_±r_eq
(
exã¡_hooks
, &
hooks
,

174 
	`as£π_±r_eq
(
exã¡_hooks
->
decommô
, 
exã¡_decommô_hook
,

176 
ˇŒed_decommô
 = 
åue
;

177 i‡(!
åy_decommô
) {

178  
åue
;

180 
îr
 = 
deÁu…_hooks
->
	`decommô
(deÁu…_hooks, 
addr
, 
size
, 
off£t
, 
Àngth
,

182 
did_decommô
 = !
îr
;

183  
îr
;

184 
	}
}

186 
boﬁ


187 
	$exã¡_purge_œzy_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
, 
size_t
 
size
,

188 
size_t
 
off£t
, size_à
Àngth
, 
¨ía_öd
) {

189 
boﬁ
 
îr
;

191 
	`TRACE_HOOK
("%s(extent_hooks=%p,áddr=%p, size=%zu, offset=%zu, "

192 "Àngth=%zuáª«_öd=%u)\n", 
__func__
, 
exã¡_hooks
, 
addr
, 
size
,

193 
off£t
, 
Àngth
, 
¨ía_öd
);

194 
	`as£π_±r_eq
(
exã¡_hooks
, &
hooks
,

196 
	`as£π_±r_eq
(
exã¡_hooks
->
purge_œzy
, 
exã¡_purge_œzy_hook
,

198 
ˇŒed_purge_œzy
 = 
åue
;

199 i‡(!
åy_purge_œzy
) {

200  
åue
;

202 
îr
 = 
deÁu…_hooks
->
purge_œzy
 =
NULL
 ||

203 
deÁu…_hooks
->
	`purge_œzy
(deÁu…_hooks, 
addr
, 
size
, 
off£t
, 
Àngth
,

205 
did_purge_œzy
 = !
îr
;

206  
îr
;

207 
	}
}

209 
boﬁ


210 
	$exã¡_purge_f‹˚d_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
, 
size_t
 
size
,

211 
size_t
 
off£t
, size_à
Àngth
, 
¨ía_öd
) {

212 
boﬁ
 
îr
;

214 
	`TRACE_HOOK
("%s(extent_hooks=%p,áddr=%p, size=%zu, offset=%zu, "

215 "Àngth=%zuáª«_öd=%u)\n", 
__func__
, 
exã¡_hooks
, 
addr
, 
size
,

216 
off£t
, 
Àngth
, 
¨ía_öd
);

217 
	`as£π_±r_eq
(
exã¡_hooks
, &
hooks
,

219 
	`as£π_±r_eq
(
exã¡_hooks
->
purge_f‹˚d
, 
exã¡_purge_f‹˚d_hook
,

221 
ˇŒed_purge_f‹˚d
 = 
åue
;

222 i‡(!
åy_purge_f‹˚d
) {

223  
åue
;

225 
îr
 = 
deÁu…_hooks
->
purge_f‹˚d
 =
NULL
 ||

226 
deÁu…_hooks
->
	`purge_f‹˚d
(deÁu…_hooks, 
addr
, 
size
, 
off£t
,

227 
Àngth
, 0);

228 
did_purge_f‹˚d
 = !
îr
;

229  
îr
;

230 
	}
}

232 
boﬁ


233 
	$exã¡_•lô_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
, 
size_t
 
size
,

234 
size_t
 
size_a
, size_à
size_b
, 
boﬁ
 
commôãd
, 
¨ía_öd
) {

235 
boﬁ
 
îr
;

237 
	`TRACE_HOOK
("%s(extent_hooks=%p,áddr=%p, size=%zu, size_a=%zu, "

238 "size_b=%zu, commôãd=%s,áª«_öd=%u)\n", 
__func__
, 
exã¡_hooks
,

239 
addr
, 
size
, 
size_a
, 
size_b
, 
commôãd
 ? "true" : "false",

240 
¨ía_öd
);

241 
	`as£π_±r_eq
(
exã¡_hooks
, &
hooks
,

243 
	`as£π_±r_eq
(
exã¡_hooks
->
•lô
, 
exã¡_•lô_hook
,

245 
ˇŒed_•lô
 = 
åue
;

246 i‡(!
åy_•lô
) {

247  
åue
;

249 
îr
 = (
deÁu…_hooks
->
•lô
 =
NULL
 ||

250 
deÁu…_hooks
->
	`•lô
(deÁu…_hooks, 
addr
, 
size
, 
size_a
, 
size_b
,

251 
commôãd
, 0));

252 
did_•lô
 = !
îr
;

253  
îr
;

254 
	}
}

256 
boﬁ


257 
	$exã¡_mîge_hook
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr_a
, 
size_t
 
size_a
,

258 *
addr_b
, 
size_t
 
size_b
, 
boﬁ
 
commôãd
, 
¨ía_öd
) {

259 
boﬁ
 
îr
;

261 
	`TRACE_HOOK
("%s(extent_hooks=%p,áddr_a=%p, size_a=%zu,áddr_b=%p "

262 "size_b=%zu, commôãd=%s,áª«_öd=%u)\n", 
__func__
, 
exã¡_hooks
,

263 
addr_a
, 
size_a
, 
addr_b
, 
size_b
, 
commôãd
 ? "true" : "false",

264 
¨ía_öd
);

265 
	`as£π_±r_eq
(
exã¡_hooks
, &
hooks
,

267 
	`as£π_±r_eq
(
exã¡_hooks
->
mîge
, 
exã¡_mîge_hook
,

269 
	`as£π_±r_eq
((*)((
uöçå_t
)
addr_a
 + 
size_a
), 
addr_b
,

271 
ˇŒed_mîge
 = 
åue
;

272 i‡(!
åy_mîge
) {

273  
åue
;

275 
îr
 = (
deÁu…_hooks
->
mîge
 =
NULL
 ||

276 
deÁu…_hooks
->
	`mîge
(deÁu…_hooks, 
addr_a
, 
size_a
, 
addr_b
, 
size_b
,

277 
commôãd
, 0));

278 
did_mîge
 = !
îr
;

279  
îr
;

280 
	}
}

283 
	$exã¡_hooks_¥ï
() {

284 
size_t
 
sz
;

286 
sz
 = (
deÁu…_hooks
);

287 
	`as£π_d_eq
(
	`mÆl˘l
("¨ía.0.exã¡_hooks", (*)&
deÁu…_hooks
, &
sz
,

288 
NULL
, 0), 0, "Unexpected mallctl()Érror");

289 
	}
}

	@test/include/test/jemalloc_test.h

1 #ifde‡
__˝lu•lus


5 
	~<limôs.h
>

6 #i‚de‡
SIZE_T_MAX


7 
	#SIZE_T_MAX
 
SIZE_MAX


	)

9 
	~<°dlib.h
>

10 
	~<°d¨g.h
>

11 
	~<°dboﬁ.h
>

12 
	~<î∫o.h
>

13 
	~<m©h.h
>

14 
	~<°rög.h
>

15 #ifde‡
_WIN32


16 
	~"msvc_com∑t/°rögs.h
"

19 #ifde‡
_WIN32


20 
	~<wödows.h
>

21 
	~"msvc_com∑t/wödows_exåa.h
"

23 
	~<±hªad.h
>

26 
	~"ã°/jemÆloc_ã°_defs.h
"

28 #ifde‡
JEMALLOC_OSSPIN


29 
	~<libkîn/OSAtomic.h
>

32 #i‡
deföed
(
HAVE_ALTIVEC
Ë&& !deföed(
__APPLE__
)

33 
	~<Ætivec.h
>

35 #ifde‡
HAVE_SSE2


36 
	~<emmöåö.h
>

43 #ifde‡
JEMALLOC_UNIT_TEST


44 
	#JEMALLOC_JET


	)

45 
	#JEMALLOC_MANGLE


	)

46 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

47 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

55 #ñi‡
deföed
(
JEMALLOC_INTEGRATION_TEST
) || \

56 
deföed
(
JEMALLOC_INTEGRATION_CPP_TEST
)

57 
	#JEMALLOC_MANGLE


	)

58 
	~"jemÆloc/jemÆloc.h
"

59 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_defs.h
"

60 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ma¸os.h
"

62 c⁄° 
boﬁ
 
c⁄fig_debug
 =

63 #ifde‡
JEMALLOC_DEBUG


64 
åue


66 
Ál£


70 
	#JEMALLOC_N
(
n
Ë
je_
##
	)
n

71 
	~"jemÆloc/öã∫Æ/¥iv©e_«me•a˚.h
"

72 
	~"jemÆloc/öã∫Æ/hooks.h
"

75 
	~"jemÆloc/öã∫Æ/as£π.h
"

76 
	~"jemÆloc/öã∫Æ/mÆloc_io.h
"

77 
	~"jemÆloc/öã∫Æ/n°ime.h
"

78 
	~"jemÆloc/öã∫Æ/utû.h
"

81 
	~"jemÆloc/öã∫Æ/qr.h
"

82 
	~"jemÆloc/öã∫Æ/ql.h
"

91 #ñi‡
deföed
(
JEMALLOC_STRESS_TEST
)

92 
	~"jemÆloc/jemÆloc.h
"

94 
	~"jemÆloc/jemÆloc_¥Ÿos_jë.h
"

96 
	#JEMALLOC_JET


	)

97 
	~"jemÆloc/öã∫Æ/jemÆloc_¥ómbÀ.h
"

98 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_ö˛udes.h
"

99 
	~"jemÆloc/öã∫Æ/public_u¬ame•a˚.h
"

100 #unde‡
JEMALLOC_JET


102 
	~"jemÆloc/jemÆloc_ª«me.h
"

103 
	#JEMALLOC_MANGLE


	)

104 #ifde‡
JEMALLOC_STRESS_TESTLIB


105 
	~"jemÆloc/jemÆloc_m™gÀ_jë.h
"

107 
	~"jemÆloc/jemÆloc_m™gÀ.h
"

123 
	~"ã°/bèŒoc.h
"

124 
	~"ã°/m©h.h
"

125 
	~"ã°/mtx.h
"

126 
	~"ã°/mq.h
"

127 
	~"ã°/ã°.h
"

128 
	~"ã°/timî.h
"

129 
	~"ã°/thd.h
"

130 
	#MEXP
 19937

	)

131 
	~"ã°/SFMT.h
"

138 #unde‡
as£π


139 #unde‡
nŸ_ªached


140 #unde‡
nŸ_im∂emíãd


141 #unde‡
as£π_nŸ_im∂emíãd


143 
	#as£π
(
e
) do { \

144 i‡(!(
e
)) { \

145 
	`mÆloc_¥ötf
( \

147 
__FILE__
, 
__LINE__
, #e); \

148 
	`ab‹t
(); \

150 } 0)

	)

152 
	#nŸ_ªached
() do { \

153 
	`mÆloc_¥ötf
( \

155 
__FILE__
, 
__LINE__
); \

156 
	`ab‹t
(); \

157 } 0)

	)

159 
	#nŸ_im∂emíãd
() do { \

160 
	`mÆloc_¥ötf
("<jemalloc>: %s:%d: Not implemented\n", \

161 
__FILE__
, 
__LINE__
); \

162 
	`ab‹t
(); \

163 } 0)

	)

165 
	#as£π_nŸ_im∂emíãd
(
e
) do { \

166 i‡(!(
e
)) { \

167 
	`nŸ_im∂emíãd
(); \

169 } 0)

	)

171 #ifde‡
__˝lu•lus


	@test/include/test/jemalloc_test_defs.h

2 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_defs.h
"

3 
	~"jemÆloc/öã∫Æ/jemÆloc_öã∫Æ_de˛s.h
"

	@test/include/test/math.h

9 
ölöe
 

10 
	$ _gamma
(
x
) {

11 
f
, 
z
;

13 
	`as£π
(
x
 > 0.0);

15 i‡(
x
 < 7.0) {

16 
f
 = 1.0;

17 
z
 = 
x
;

18 
z
 < 7.0) {

19 
f
 *
z
;

20 
z
 += 1.0;

22 
x
 = 
z
;

23 
f
 = -
	`log
(f);

25 
f
 = 0.0;

28 
z
 = 1.0 / (
x
 * x);

30  
f
 + (
x
-0.5Ë* 
	`log
(x) - x + 0.918938533204673 +

31 (((-0.000595238095238 * 
z
 + 0.000793650793651) * z -

32 0.002777777777778Ë* 
z
 + 0.083333333333333Ë/ 
x
;

33 
	}
}

44 
ölöe
 

45 
	$i_gamma
(
x
, 
p
, 
 _gamma_p
) {

46 
acu
, 
Á˘‹
, 
oÊo
, 
gö
, 
ãrm
, 
∫
, 
a
, 
b
, 
™
, 
dif
;

47 
≤
[6];

48 
i
;

50 
	`as£π
(
p
 > 0.0);

51 
	`as£π
(
x
 >= 0.0);

53 i‡(
x
 == 0.0) {

57 
acu
 = 1.0e-10;

58 
oÊo
 = 1.0e30;

59 
gö
 = 0.0;

60 
Á˘‹
 = 
	`exp
(
p
 * 
	`log
(
x
Ë- x - 
 _gamma_p
);

62 i‡(
x
 <1.0 || x < 
p
) {

64 
gö
 = 1.0;

65 
ãrm
 = 1.0;

66 
∫
 = 
p
;

68 
åue
) {

69 
∫
 += 1.0;

70 
ãrm
 *
x
 / 
∫
;

71 
gö
 +
ãrm
;

72 i‡(
ãrm
 <
acu
) {

73 
gö
 *
Á˘‹
 / 
p
;

74  
gö
;

79 
a
 = 1.0 - 
p
;

80 
b
 = 
a
 + 
x
 + 1.0;

81 
ãrm
 = 0.0;

82 
≤
[0] = 1.0;

83 
≤
[1] = 
x
;

84 
≤
[2] = 
x
 + 1.0;

85 
≤
[3] = 
x
 * 
b
;

86 
gö
 = 
≤
[2] /Ön[3];

88 
åue
) {

89 
a
 += 1.0;

90 
b
 += 2.0;

91 
ãrm
 += 1.0;

92 
™
 = 
a
 * 
ãrm
;

93 
i
 = 0; i < 2; i++) {

94 
≤
[
i
+4] = 
b
 *Ön[i+2] - 
™
 *Ön[i];

96 i‡(
≤
[5] != 0.0) {

97 
∫
 = 
≤
[4] /Ön[5];

98 
dif
 = 
	`Ábs
(
gö
 - 
∫
);

99 i‡(
dif
 <
acu
 && di‡<acu * 
∫
) {

100 
gö
 = 1.0 - 
Á˘‹
 * gin;

101  
gö
;

103 
gö
 = 
∫
;

105 
i
 = 0; i < 4; i++) {

106 
≤
[
i
] =Ön[i+2];

109 i‡(
	`Ábs
(
≤
[4]Ë>
oÊo
) {

110 
i
 = 0; i < 4; i++) {

111 
≤
[
i
] /
oÊo
;

116 
	}
}

128 
ölöe
 

129 
	$±_n‹m
(
p
) {

130 
q
, 
r
, 
ªt
;

132 
	`as£π
(
p
 > 0.0 &&Ö < 1.0);

134 
q
 = 
p
 - 0.5;

135 i‡(
	`Ábs
(
q
) <= 0.425) {

137 
r
 = 0.180625 - 
q
 * q;

138  
q
 * (((((((2.5090809287301226727e3 * 
r
 +

139 3.3430575583588128105e4Ë* 
r
 + 6.7265770927008700853e4) *Ñ

140 + 4.5921953931549871457e4Ë* 
r
 + 1.3731693765509461125e4) *

141 
r
 + 1.9715909503065514427e3) *Ñ + 1.3314166789178437745e2)

142 * 
r
 + 3.3871328727963666080e0) /

143 (((((((5.2264952788528545610e3 * 
r
 +

144 2.8729085735721942674e4Ë* 
r
 + 3.9307895800092710610e4) *Ñ

145 + 2.1213794301586595867e4Ë* 
r
 + 5.3941960214247511077e3) *

146 
r
 + 6.8718700749205790830e2) *Ñ + 4.2313330701600911252e1)

147 * 
r
 + 1.0);

149 i‡(
q
 < 0.0) {

150 
r
 = 
p
;

152 
r
 = 1.0 - 
p
;

154 
	`as£π
(
r
 > 0.0);

156 
r
 = 
	`sqπ
(-
	`log
(r));

157 i‡(
r
 <= 5.0) {

159 
r
 -= 1.6;

160 
ªt
 = ((((((((7.74545014278341407640e-4 * 
r
 +

161 2.27238449892691845833e-2Ë* 
r
 +

162 2.41780725177450611770e-1Ë* 
r
 +

163 1.27045825245236838258e0Ë* 
r
 +

164 3.64784832476320460504e0Ë* 
r
 +

165 5.76949722146069140550e0Ë* 
r
 +

166 4.63033784615654529590e0Ë* 
r
 +

168 (((((((1.05075007164441684324e-9 * 
r
 +

169 5.47593808499534494600e-4Ë* 
r
 +

171 * 
r
 + 1.48103976427480074590e-1) *Ñ +

172 6.89767334985100004550e-1Ë* 
r
 +

173 1.67638483018380384940e0Ë* 
r
 +

174 2.05319162663775882187e0Ë* 
r
 + 1.0));

177 
r
 -= 5.0;

178 
ªt
 = ((((((((2.01033439929228813265e-7 * 
r
 +

179 2.71155556874348757815e-5Ë* 
r
 +

180 1.24266094738807843860e-3Ë* 
r
 +

181 2.65321895265761230930e-2Ë* 
r
 +

182 2.96560571828504891230e-1Ë* 
r
 +

183 1.78482653991729133580e0Ë* 
r
 +

184 5.46378491116411436990e0Ë* 
r
 +

186 (((((((2.04426310338993978564e-15 * 
r
 +

187 1.42151175831644588870e-7Ë* 
r
 +

188 1.84631831751005468180e-5Ë* 
r
 +

189 7.86869131145613259100e-4Ë* 
r
 +

190 1.48753612908506148525e-2Ë* 
r
 +

191 1.36929880922735805310e-1Ë* 
r
 +

193 * 
r
 + 1.0));

195 i‡(
q
 < 0.0) {

196 
ªt
 = -ret;

198  
ªt
;

200 
	}
}

216 
ölöe
 

217 
	$±_chi2
(
p
, 
df
, 
 _gamma_df_2
) {

218 
e
, 
Ø
, 
xx
, 
c
, 
ch
, 
a
, 
q
, 
p1
, 
p2
, 
t
, 
x
, 
b
, 
s1
, 
s2
, 
s3
, 
s4
, 
s5
, 
s6
;

219 
i
;

221 
	`as£π
(
p
 >= 0.0 &&Ö < 1.0);

222 
	`as£π
(
df
 > 0.0);

224 
e
 = 5.0e-7;

225 
Ø
 = 0.6931471805;

227 
xx
 = 0.5 * 
df
;

228 
c
 = 
xx
 - 1.0;

230 i‡(
df
 < -1.24 * 
	`log
(
p
)) {

232 
ch
 = 
	`pow
(
p
 * 
xx
 * 
	`exp
(
 _gamma_df_2
 + xx * 
Ø
), 1.0 / xx);

233 i‡(
ch
 - 
e
 < 0.0) {

234  
ch
;

237 i‡(
df
 > 0.32) {

238 
x
 = 
	`±_n‹m
(
p
);

243 
p1
 = 0.222222 / 
df
;

244 
ch
 = 
df
 * 
	`pow
(
x
 * 
	`sqπ
(
p1
) + 1.0 -Ö1, 3.0);

246 i‡(
ch
 > 2.2 * 
df
 + 6.0) {

247 
ch
 = -2.0 * (
	`log
(1.0 - 
p
Ë- 
c
 *Üog(0.5 * ch) +

248 
 _gamma_df_2
);

251 
ch
 = 0.4;

252 
a
 = 
	`log
(1.0 - 
p
);

253 
åue
) {

254 
q
 = 
ch
;

255 
p1
 = 1.0 + 
ch
 * (4.67 + ch);

256 
p2
 = 
ch
 * (6.73 + ch * (6.66 + ch));

257 
t
 = -0.5 + (4.67 + 2.0 * 
ch
Ë/ 
p1
 - (6.73 + ch

258 * (13.32 + 3.0 * 
ch
)Ë/ 
p2
;

259 
ch
 -(1.0 - 
	`exp
(
a
 + 
 _gamma_df_2
 + 0.5 * ch +

260 
c
 * 
Ø
Ë* 
p2
 / 
p1
Ë/ 
t
;

261 i‡(
	`Ábs
(
q
 / 
ch
 - 1.0) - 0.01 <= 0.0) {

268 
i
 = 0; i < 20; i++) {

270 
q
 = 
ch
;

271 
p1
 = 0.5 * 
ch
;

272 i‡(
p1
 < 0.0) {

275 
p2
 = 
p
 - 
	`i_gamma
(
p1
, 
xx
, 
 _gamma_df_2
);

276 
t
 = 
p2
 * 
	`exp
(
xx
 * 
Ø
 + 
 _gamma_df_2
 + 
p1
 - 
c
 * 
	`log
(
ch
));

277 
b
 = 
t
 / 
ch
;

278 
a
 = 0.5 * 
t
 - 
b
 * 
c
;

279 
s1
 = (210.0 + 
a
 * (140.0 +á * (105.0 +á * (84.0 +á * (70.0 +

280 60.0 * 
a
))))) / 420.0;

281 
s2
 = (420.0 + 
a
 * (735.0 +á * (966.0 +á * (1141.0 + 1278.0 *

282 
a
)))) / 2520.0;

283 
s3
 = (210.0 + 
a
 * (462.0 +á * (707.0 + 932.0 *á))) / 2520.0;

284 
s4
 = (252.0 + 
a
 * (672.0 + 1182.0 *áË+ 
c
 * (294.0 +á *

285 (889.0 + 1740.0 * 
a
))) / 5040.0;

286 
s5
 = (84.0 + 264.0 * 
a
 + 
c
 * (175.0 + 606.0 *á)) / 2520.0;

287 
s6
 = (120.0 + 
c
 * (346.0 + 127.0 * c)) / 5040.0;

288 
ch
 +
t
 * (1.0 + 0.5 *Å * 
s1
 - 
b
 * 
c
 * (s1 - b * (
s2
 - b * (
s3


289 - 
b
 * (
s4
 - b * (
s5
 - b * 
s6
))))));

290 i‡(
	`Ábs
(
q
 / 
ch
 - 1.0Ë<
e
) {

295  
ch
;

296 
	}
}

303 
ölöe
 

304 
	$±_gamma
(
p
, 
sh≠e
, 
sˇÀ
, 
 _gamma_sh≠e
) {

305  
	`±_chi2
(
p
, 
sh≠e
 * 2.0, 
 _gamma_sh≠e
Ë* 0.5 * 
sˇÀ
;

306 
	}
}

	@test/include/test/mq.h

1 
mq_«no¶ìp
(
ns
);

29 
	#mq_msg
(
a_mq_msg_ty≥
Ë
	`ql_ñm
◊_mq_msg_ty≥)

	)

31 
	#mq_gí
(
a_©å
, 
a_¥efix
, 
a_mq_ty≥
, 
a_mq_msg_ty≥
, 
a_fõld
) \

33 
mtx_t
 
lock
; \

34 
	`ql_hód
(
a_mq_msg_ty≥
Ë
msgs
; \

35 
cou¡
; \

36 } 
	ta_mq_ty≥
; \

37 
a_©å
 
boﬁ
 \

38 
a_¥efix
##
	`öô
(
a_mq_ty≥
 *
mq
) { \

40 i‡(
	`mtx_öô
(&
mq
->
lock
)) { \

41  
åue
; \

43 
	`ql_√w
(&
mq
->
msgs
); \

44 
mq
->
cou¡
 = 0; \

45  
Ál£
; \

47 
a_©å
 \

48 
a_¥efix
##
	`föi
(
a_mq_ty≥
 *
mq
) { \

49 
	`mtx_föi
(&
mq
->
lock
); \

51 
a_©å
 \

52 
a_¥efix
##
	`cou¡
(
a_mq_ty≥
 *
mq
) { \

53 
cou¡
; \

55 
	`mtx_lock
(&
mq
->
lock
); \

56 
cou¡
 = 
mq
->count; \

57 
	`mtx_u∆ock
(&
mq
->
lock
); \

58  
cou¡
; \

60 
a_©å
 
a_mq_msg_ty≥
 * \

61 
a_¥efix
##
	`åygë
(
a_mq_ty≥
 *
mq
) { \

62 
a_mq_msg_ty≥
 *
msg
; \

64 
	`mtx_lock
(&
mq
->
lock
); \

65 
msg
 = 
	`ql_fú°
(&
mq
->
msgs
); \

66 i‡(
msg
 !
NULL
) { \

67 
	`ql_hód_ªmove
(&
mq
->
msgs
, 
a_mq_msg_ty≥
, 
a_fõld
); \

68 
mq
->
cou¡
--; \

70 
	`mtx_u∆ock
(&
mq
->
lock
); \

71  
msg
; \

73 
a_©å
 
a_mq_msg_ty≥
 * \

74 
a_¥efix
##
	`gë
(
a_mq_ty≥
 *
mq
) { \

75 
a_mq_msg_ty≥
 *
msg
; \

76 
ns
; \

78 
msg
 = 
a_¥efix
##
	`åygë
(
mq
); \

79 i‡(
msg
 !
NULL
) { \

80  
msg
; \

83 
ns
 = 1; \

84 
åue
) { \

85 
	`mq_«no¶ìp
(
ns
); \

86 
msg
 = 
a_¥efix
##
	`åygë
(
mq
); \

87 i‡(
msg
 !
NULL
) { \

88  
msg
; \

90 i‡(
ns
 < 1000*1000*1000) { \

92 
ns
 <<= 1; \

93 i‡(
ns
 > 1000*1000*1000) { \

94 
ns
 = 1000*1000*1000; \

99 
a_©å
 \

100 
a_¥efix
##
	`put
(
a_mq_ty≥
 *
mq
, 
a_mq_msg_ty≥
 *
msg
) { \

102 
	`mtx_lock
(&
mq
->
lock
); \

103 
	`ql_ñm_√w
(
msg
, 
a_fõld
); \

104 
	`ql_èû_ö£π
(&
mq
->
msgs
, 
msg
, 
a_fõld
); \

105 
mq
->
cou¡
++; \

106 
	`mtx_u∆ock
(&
mq
->
lock
); \

107 }

	)

	@test/include/test/mtx.h

9 #ifde‡
_WIN32


10 
CRITICAL_SECTION
 
	mlock
;

11 #ñi‡(
deföed
(
JEMALLOC_OS_UNFAIR_LOCK
))

12 
os_unÁú_lock
 
	mlock
;

13 #ñi‡(
deföed
(
JEMALLOC_OSSPIN
))

14 
OSSpöLock
 
	mlock
;

16 
±hªad_muãx_t
 
	mlock
;

18 } 
	tmtx_t
;

20 
boﬁ
 
mtx_öô
(
mtx_t
 *
mtx
);

21 
mtx_föi
(
mtx_t
 *
mtx
);

22 
mtx_lock
(
mtx_t
 *
mtx
);

23 
mtx_u∆ock
(
mtx_t
 *
mtx
);

	@test/include/test/test.h

1 
	#ASSERT_BUFSIZE
 256

	)

3 
	#as£π_cmp
(
t
, 
a
, 
b
, 
cmp
, 
√g_cmp
, 
¥i
, ...) do { \

4 
t
 
a_
 = (
a
); \

5 
t
 
b_
 = (
b
); \

6 i‡(!(
a_
 
cmp
 
b_
)) { \

7 
¥efix
[
ASSERT_BUFSIZE
]; \

8 
mesßge
[
ASSERT_BUFSIZE
]; \

9 
	`mÆloc_¢¥ötf
(
¥efix
, (prefix), \

12 "%" 
¥i
 " " #neg_cmp " %"Öri ": ", \

13 
__func__
, 
__FILE__
, 
__LINE__
, \

14 #a, #b, 
a_
, 
b_
); \

15 
	`mÆloc_¢¥ötf
(
mesßge
, (mesßge), 
__VA_ARGS__
); \

16 
	`p_ã°_Áû
(
¥efix
, 
mesßge
); \

18 } 0)

	)

20 
	#as£π_±r_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(*,á, b, ==, \

21 !=, "p", 
__VA_ARGS__
)

	)

22 
	#as£π_±r_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(*,á, b, !=, \

23 ==, "p", 
__VA_ARGS__
)

	)

24 
	#as£π_±r_nuŒ
(
a
, ...Ë
	`as£π_cmp
(*,á, 
NULL
, ==, \

25 !=, "p", 
__VA_ARGS__
)

	)

26 
	#as£π_±r_nŸ_nuŒ
(
a
, ...Ë
	`as£π_cmp
(*,á, 
NULL
, !=, \

27 ==, "p", 
__VA_ARGS__
)

	)

29 
	#as£π_c_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, ==, !=, "c", 
__VA_ARGS__
)

	)

30 
	#as£π_c_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, !=, ==, "c", 
__VA_ARGS__
)

	)

31 
	#as£π_c_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, <, >=, "c", 
__VA_ARGS__
)

	)

32 
	#as£π_c_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, <=, >, "c", 
__VA_ARGS__
)

	)

33 
	#as£π_c_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, >=, <, "c", 
__VA_ARGS__
)

	)

34 
	#as£π_c_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, >, <=, "c", 
__VA_ARGS__
)

	)

36 
	#as£π_x_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, ==, !=, "#x", 
__VA_ARGS__
)

	)

37 
	#as£π_x_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, !=, ==, "#x", 
__VA_ARGS__
)

	)

38 
	#as£π_x_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, <, >=, "#x", 
__VA_ARGS__
)

	)

39 
	#as£π_x_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, <=, >, "#x", 
__VA_ARGS__
)

	)

40 
	#as£π_x_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, >=, <, "#x", 
__VA_ARGS__
)

	)

41 
	#as£π_x_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, >, <=, "#x", 
__VA_ARGS__
)

	)

43 
	#as£π_d_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, ==, !=, "d", 
__VA_ARGS__
)

	)

44 
	#as£π_d_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, !=, ==, "d", 
__VA_ARGS__
)

	)

45 
	#as£π_d_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, <, >=, "d", 
__VA_ARGS__
)

	)

46 
	#as£π_d_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, <=, >, "d", 
__VA_ARGS__
)

	)

47 
	#as£π_d_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, >=, <, "d", 
__VA_ARGS__
)

	)

48 
	#as£π_d_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, >, <=, "d", 
__VA_ARGS__
)

	)

50 
	#as£π_u_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, ==, !=, "u", 
__VA_ARGS__
)

	)

51 
	#as£π_u_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, !=, ==, "u", 
__VA_ARGS__
)

	)

52 
	#as£π_u_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, <, >=, "u", 
__VA_ARGS__
)

	)

53 
	#as£π_u_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, <=, >, "u", 
__VA_ARGS__
)

	)

54 
	#as£π_u_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, >=, <, "u", 
__VA_ARGS__
)

	)

55 
	#as£π_u_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, >, <=, "u", 
__VA_ARGS__
)

	)

57 
	#as£π_ld_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, ==, \

58 !=, "ld", 
__VA_ARGS__
)

	)

59 
	#as£π_ld_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, !=, \

60 ==, "ld", 
__VA_ARGS__
)

	)

61 
	#as£π_ld_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, <, \

62 >=, "ld", 
__VA_ARGS__
)

	)

63 
	#as£π_ld_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, <=, \

64 >, "ld", 
__VA_ARGS__
)

	)

65 
	#as£π_ld_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, >=, \

66 <, "ld", 
__VA_ARGS__
)

	)

67 
	#as£π_ld_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, >, \

68 <=, "ld", 
__VA_ARGS__
)

	)

70 
	#as£π_lu_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(, \

71 
a
, 
b
, ==, !=, "lu", 
__VA_ARGS__
)

	)

72 
	#as£π_lu_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(, \

73 
a
, 
b
, !=, ==, "lu", 
__VA_ARGS__
)

	)

74 
	#as£π_lu_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(, \

75 
a
, 
b
, <, >=, "lu", 
__VA_ARGS__
)

	)

76 
	#as£π_lu_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(, \

77 
a
, 
b
, <=, >, "lu", 
__VA_ARGS__
)

	)

78 
	#as£π_lu_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(, \

79 
a
, 
b
, >=, <, "lu", 
__VA_ARGS__
)

	)

80 
	#as£π_lu_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(, \

81 
a
, 
b
, >, <=, "lu", 
__VA_ARGS__
)

	)

83 
	#as£π_qd_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, ==, \

84 !=, "qd", 
__VA_ARGS__
)

	)

85 
	#as£π_qd_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, !=, \

86 ==, "qd", 
__VA_ARGS__
)

	)

87 
	#as£π_qd_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, <, \

88 >=, "qd", 
__VA_ARGS__
)

	)

89 
	#as£π_qd_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, <=, \

90 >, "qd", 
__VA_ARGS__
)

	)

91 
	#as£π_qd_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, >=, \

92 <, "qd", 
__VA_ARGS__
)

	)

93 
	#as£π_qd_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(,á, b, >, \

94 <=, "qd", 
__VA_ARGS__
)

	)

96 
	#as£π_qu_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(, \

97 
a
, 
b
, ==, !=, "qu", 
__VA_ARGS__
)

	)

98 
	#as£π_qu_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(, \

99 
a
, 
b
, !=, ==, "qu", 
__VA_ARGS__
)

	)

100 
	#as£π_qu_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(, \

101 
a
, 
b
, <, >=, "qu", 
__VA_ARGS__
)

	)

102 
	#as£π_qu_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(, \

103 
a
, 
b
, <=, >, "qu", 
__VA_ARGS__
)

	)

104 
	#as£π_qu_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(, \

105 
a
, 
b
, >=, <, "qu", 
__VA_ARGS__
)

	)

106 
	#as£π_qu_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(, \

107 
a
, 
b
, >, <=, "qu", 
__VA_ARGS__
)

	)

109 
	#as£π_jd_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(
ötmax_t
,á, b, ==, \

110 !=, "jd", 
__VA_ARGS__
)

	)

111 
	#as£π_jd_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(
ötmax_t
,á, b, !=, \

112 ==, "jd", 
__VA_ARGS__
)

	)

113 
	#as£π_jd_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(
ötmax_t
,á, b, <, \

114 >=, "jd", 
__VA_ARGS__
)

	)

115 
	#as£π_jd_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(
ötmax_t
,á, b, <=, \

116 >, "jd", 
__VA_ARGS__
)

	)

117 
	#as£π_jd_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(
ötmax_t
,á, b, >=, \

118 <, "jd", 
__VA_ARGS__
)

	)

119 
	#as£π_jd_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(
ötmax_t
,á, b, >, \

120 <=, "jd", 
__VA_ARGS__
)

	)

122 
	#as£π_ju_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uötmax_t
,á, b, ==, \

123 !=, "ju", 
__VA_ARGS__
)

	)

124 
	#as£π_ju_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uötmax_t
,á, b, !=, \

125 ==, "ju", 
__VA_ARGS__
)

	)

126 
	#as£π_ju_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uötmax_t
,á, b, <, \

127 >=, "ju", 
__VA_ARGS__
)

	)

128 
	#as£π_ju_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uötmax_t
,á, b, <=, \

129 >, "ju", 
__VA_ARGS__
)

	)

130 
	#as£π_ju_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uötmax_t
,á, b, >=, \

131 <, "ju", 
__VA_ARGS__
)

	)

132 
	#as£π_ju_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uötmax_t
,á, b, >, \

133 <=, "ju", 
__VA_ARGS__
)

	)

135 
	#as£π_zd_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(
ssize_t
,á, b, ==, \

136 !=, "zd", 
__VA_ARGS__
)

	)

137 
	#as£π_zd_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(
ssize_t
,á, b, !=, \

138 ==, "zd", 
__VA_ARGS__
)

	)

139 
	#as£π_zd_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(
ssize_t
,á, b, <, \

140 >=, "zd", 
__VA_ARGS__
)

	)

141 
	#as£π_zd_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(
ssize_t
,á, b, <=, \

142 >, "zd", 
__VA_ARGS__
)

	)

143 
	#as£π_zd_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(
ssize_t
,á, b, >=, \

144 <, "zd", 
__VA_ARGS__
)

	)

145 
	#as£π_zd_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(
ssize_t
,á, b, >, \

146 <=, "zd", 
__VA_ARGS__
)

	)

148 
	#as£π_zu_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(
size_t
,á, b, ==, \

149 !=, "zu", 
__VA_ARGS__
)

	)

150 
	#as£π_zu_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(
size_t
,á, b, !=, \

151 ==, "zu", 
__VA_ARGS__
)

	)

152 
	#as£π_zu_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(
size_t
,á, b, <, \

153 >=, "zu", 
__VA_ARGS__
)

	)

154 
	#as£π_zu_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(
size_t
,á, b, <=, \

155 >, "zu", 
__VA_ARGS__
)

	)

156 
	#as£π_zu_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(
size_t
,á, b, >=, \

157 <, "zu", 
__VA_ARGS__
)

	)

158 
	#as£π_zu_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(
size_t
,á, b, >, \

159 <=, "zu", 
__VA_ARGS__
)

	)

161 
	#as£π_d32_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(
öt32_t
,á, b, ==, \

162 !=, 
FMTd32
, 
__VA_ARGS__
)

	)

163 
	#as£π_d32_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(
öt32_t
,á, b, !=, \

164 ==, 
FMTd32
, 
__VA_ARGS__
)

	)

165 
	#as£π_d32_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(
öt32_t
,á, b, <, \

166 >=, 
FMTd32
, 
__VA_ARGS__
)

	)

167 
	#as£π_d32_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(
öt32_t
,á, b, <=, \

168 >, 
FMTd32
, 
__VA_ARGS__
)

	)

169 
	#as£π_d32_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(
öt32_t
,á, b, >=, \

170 <, 
FMTd32
, 
__VA_ARGS__
)

	)

171 
	#as£π_d32_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(
öt32_t
,á, b, >, \

172 <=, 
FMTd32
, 
__VA_ARGS__
)

	)

174 
	#as£π_u32_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uöt32_t
,á, b, ==, \

175 !=, 
FMTu32
, 
__VA_ARGS__
)

	)

176 
	#as£π_u32_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uöt32_t
,á, b, !=, \

177 ==, 
FMTu32
, 
__VA_ARGS__
)

	)

178 
	#as£π_u32_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uöt32_t
,á, b, <, \

179 >=, 
FMTu32
, 
__VA_ARGS__
)

	)

180 
	#as£π_u32_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uöt32_t
,á, b, <=, \

181 >, 
FMTu32
, 
__VA_ARGS__
)

	)

182 
	#as£π_u32_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uöt32_t
,á, b, >=, \

183 <, 
FMTu32
, 
__VA_ARGS__
)

	)

184 
	#as£π_u32_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uöt32_t
,á, b, >, \

185 <=, 
FMTu32
, 
__VA_ARGS__
)

	)

187 
	#as£π_d64_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(
öt64_t
,á, b, ==, \

188 !=, 
FMTd64
, 
__VA_ARGS__
)

	)

189 
	#as£π_d64_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(
öt64_t
,á, b, !=, \

190 ==, 
FMTd64
, 
__VA_ARGS__
)

	)

191 
	#as£π_d64_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(
öt64_t
,á, b, <, \

192 >=, 
FMTd64
, 
__VA_ARGS__
)

	)

193 
	#as£π_d64_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(
öt64_t
,á, b, <=, \

194 >, 
FMTd64
, 
__VA_ARGS__
)

	)

195 
	#as£π_d64_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(
öt64_t
,á, b, >=, \

196 <, 
FMTd64
, 
__VA_ARGS__
)

	)

197 
	#as£π_d64_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(
öt64_t
,á, b, >, \

198 <=, 
FMTd64
, 
__VA_ARGS__
)

	)

200 
	#as£π_u64_eq
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uöt64_t
,á, b, ==, \

201 !=, 
FMTu64
, 
__VA_ARGS__
)

	)

202 
	#as£π_u64_√
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uöt64_t
,á, b, !=, \

203 ==, 
FMTu64
, 
__VA_ARGS__
)

	)

204 
	#as£π_u64_…
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uöt64_t
,á, b, <, \

205 >=, 
FMTu64
, 
__VA_ARGS__
)

	)

206 
	#as£π_u64_À
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uöt64_t
,á, b, <=, \

207 >, 
FMTu64
, 
__VA_ARGS__
)

	)

208 
	#as£π_u64_ge
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uöt64_t
,á, b, >=, \

209 <, 
FMTu64
, 
__VA_ARGS__
)

	)

210 
	#as£π_u64_gt
(
a
, 
b
, ...Ë
	`as£π_cmp
(
uöt64_t
,á, b, >, \

211 <=, 
FMTu64
, 
__VA_ARGS__
)

	)

213 
	#as£π_b_eq
(
a
, 
b
, ...) do { \

214 
boﬁ
 
a_
 = (
a
); \

215 
boﬁ
 
b_
 = (
b
); \

216 i‡(!(
a_
 =
b_
)) { \

217 
¥efix
[
ASSERT_BUFSIZE
]; \

218 
mesßge
[
ASSERT_BUFSIZE
]; \

219 
	`mÆloc_¢¥ötf
(
¥efix
, (prefix), \

222 
__func__
, 
__FILE__
, 
__LINE__
, \

223 #a, #b, 
a_
 ? "true" : "false", \

224 
b_
 ? "true" : "false"); \

225 
	`mÆloc_¢¥ötf
(
mesßge
, (mesßge), 
__VA_ARGS__
); \

226 
	`p_ã°_Áû
(
¥efix
, 
mesßge
); \

228 } 0)

	)

229 
	#as£π_b_√
(
a
, 
b
, ...) do { \

230 
boﬁ
 
a_
 = (
a
); \

231 
boﬁ
 
b_
 = (
b
); \

232 i‡(!(
a_
 !
b_
)) { \

233 
¥efix
[
ASSERT_BUFSIZE
]; \

234 
mesßge
[
ASSERT_BUFSIZE
]; \

235 
	`mÆloc_¢¥ötf
(
¥efix
, (prefix), \

238 
__func__
, 
__FILE__
, 
__LINE__
, \

239 #a, #b, 
a_
 ? "true" : "false", \

240 
b_
 ? "true" : "false"); \

241 
	`mÆloc_¢¥ötf
(
mesßge
, (mesßge), 
__VA_ARGS__
); \

242 
	`p_ã°_Áû
(
¥efix
, 
mesßge
); \

244 } 0)

	)

245 
	#as£π_åue
(
a
, ...Ë
	`as£π_b_eq
◊, 
åue
, 
__VA_ARGS__
)

	)

246 
	#as£π_Ál£
(
a
, ...Ë
	`as£π_b_eq
◊, 
Ál£
, 
__VA_ARGS__
)

	)

248 
	#as£π_°r_eq
(
a
, 
b
, ...) do { \

249 i‡(
	`°rcmp
((
a
), (
b
))) { \

250 
¥efix
[
ASSERT_BUFSIZE
]; \

251 
mesßge
[
ASSERT_BUFSIZE
]; \

252 
	`mÆloc_¢¥ötf
(
¥efix
, (prefix), \

256 
__func__
, 
__FILE__
, 
__LINE__
, #a, #b, 
a
, 
b
); \

257 
	`mÆloc_¢¥ötf
(
mesßge
, (mesßge), 
__VA_ARGS__
); \

258 
	`p_ã°_Áû
(
¥efix
, 
mesßge
); \

260 } 0)

	)

261 
	#as£π_°r_√
(
a
, 
b
, ...) do { \

262 i‡(!
	`°rcmp
((
a
), (
b
))) { \

263 
¥efix
[
ASSERT_BUFSIZE
]; \

264 
mesßge
[
ASSERT_BUFSIZE
]; \

265 
	`mÆloc_¢¥ötf
(
¥efix
, (prefix), \

269 
__func__
, 
__FILE__
, 
__LINE__
, #a, #b, 
a
, 
b
); \

270 
	`mÆloc_¢¥ötf
(
mesßge
, (mesßge), 
__VA_ARGS__
); \

271 
	`p_ã°_Áû
(
¥efix
, 
mesßge
); \

273 } 0)

	)

275 
	#as£π_nŸ_ªached
(...) do { \

276 
¥efix
[
ASSERT_BUFSIZE
]; \

277 
mesßge
[
ASSERT_BUFSIZE
]; \

278 
	`mÆloc_¢¥ötf
(
¥efix
, (prefix), \

280 
__func__
, 
__FILE__
, 
__LINE__
); \

281 
	`mÆloc_¢¥ötf
(
mesßge
, (mesßge), 
__VA_ARGS__
); \

282 
	`p_ã°_Áû
(
¥efix
, 
mesßge
); \

283 } 0)

	)

290 
	mã°_°©us_∑ss
 = 0,

291 
	mã°_°©us_skù
 = 1,

292 
	mã°_°©us_Áû
 = 2,

294 
	mã°_°©us_cou¡
 = 3

295 } 
	tã°_°©us_t
;

297 (
	tã°_t
)();

299 
	#TEST_BEGIN
(
f
) \

301 
	`f
() { \

302 
	`p_ã°_öô
(#f);

	)

304 
	#TEST_END
 \

305 
œbñ_ã°_íd
; \

306 
œbñ_ã°_íd
: \

307 
	`p_ã°_föi
(); \

308 
	}

	)
}

310 
	#ã°
(...) \

311 
	`p_ã°
(
__VA_ARGS__
, 
NULL
)

	)

313 
	#ã°_no_ªíå™cy
(...) \

314 
	`p_ã°_no_ªíå™cy
(
__VA_ARGS__
, 
NULL
)

	)

316 
	#ã°_no_mÆloc_öô
(...) \

317 
	`p_ã°_no_mÆloc_öô
(
__VA_ARGS__
, 
NULL
)

	)

319 
	#ã°_skù_if
(
e
) do { \

320 i‡(
e
) { \

321 
	`ã°_skù
("%s:%s:%d: Test skipped: (%s)", \

322 
__func__
, 
__FILE__
, 
__LINE__
, #e); \

323 
œbñ_ã°_íd
; \

325 } 0)

	)

327 
boﬁ
 
ã°_is_ªíå™t
();

329 
	$ã°_skù
(c⁄° *
f‹m©
, ...Ë
	`JEMALLOC_FORMAT_PRINTF
(1, 2);

330 
	$ã°_Áû
(c⁄° *
f‹m©
, ...Ë
	`JEMALLOC_FORMAT_PRINTF
(1, 2);

333 
ã°_°©us_t
 
	`p_ã°
(
ã°_t
 *
t
, ...);

334 
ã°_°©us_t
 
	`p_ã°_no_ªíå™cy
(
ã°_t
 *
t
, ...);

335 
ã°_°©us_t
 
	`p_ã°_no_mÆloc_öô
(
ã°_t
 *
t
, ...);

336 
	`p_ã°_öô
(c⁄° *
«me
);

337 
	`p_ã°_föi
();

338 
	`p_ã°_Áû
(c⁄° *
¥efix
, c⁄° *
mesßge
);

	@test/include/test/thd.h

2 #ifde‡
_WIN32


3 
HANDLE
 
	tthd_t
;

5 
±hªad_t
 
	tthd_t
;

8 
thd_¸óã
(
thd_t
 *
thd
, *(*
¥oc
)(*), *
¨g
);

9 
thd_joö
(
thd_t
 
thd
, **
ªt
);

	@test/include/test/timer.h

4 
n°ime_t
 
	mt0
;

5 
n°ime_t
 
	mt1
;

6 } 
	ttimedñè_t
;

8 
timî_°¨t
(
timedñè_t
 *
timî
);

9 
timî_°›
(
timedñè_t
 *
timî
);

10 
uöt64_t
 
timî_u£c
(c⁄° 
timedñè_t
 *
timî
);

11 
timî_øtio
(
timedñè_t
 *
a
,Åimedñè_à*
b
, *
buf
, 
size_t
 
buÊí
);

	@test/integration/MALLOCX_ARENA.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	#NTHREADS
 10

	)

5 
boﬁ
 
	ghave_dss
 =

6 #ifde‡
JEMALLOC_DSS


7 
åue


9 
Ál£


14 
	$thd_°¨t
(*
¨g
) {

15 
thªad_öd
 = ()(
uöçå_t
)
¨g
;

16 
¨ía_öd
;

17 *
p
;

18 
size_t
 
sz
;

20 
sz
 = (
¨ía_öd
);

21 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.¸óã", (*)&
¨ía_öd
, &
sz
, 
NULL
, 0),

24 i‡(
thªad_öd
 % 4 != 3) {

25 
size_t
 
mib
[3];

26 
size_t
 
mibÀn
 = (
mib
) / (size_t);

27 c⁄° *
dss_¥ecs
[] = {"disabled", "primary", "secondary"};

28 
¥ec_öd
 = 
thªad_öd
 %

29 ((
dss_¥ecs
)/(*));

30 c⁄° *
dss
 = 
dss_¥ecs
[
¥ec_öd
];

31 
ex≥˘ed_îr
 = (
have_dss
 || 
¥ec_öd
 =0Ë? 0 : 
EFAULT
;

32 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.dss", 
mib
, &
mibÀn
), 0,

34 
mib
[1] = 
¨ía_öd
;

35 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, (*)&
dss
,

36 (c⁄° *)), 
ex≥˘ed_îr
,

40 
p
 = 
	`mÆlocx
(1, 
	`MALLOCX_ARENA
(
¨ía_öd
));

41 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

42 
	`dÆlocx
(
p
, 0);

44  
NULL
;

45 
	}
}

47 
	$TEST_BEGIN
(
ã°_MALLOCX_ARENA
) {

48 
thd_t
 
thds
[
NTHREADS
];

49 
i
;

51 
i
 = 0; i < 
NTHREADS
; i++) {

52 
	`thd_¸óã
(&
thds
[
i
], 
thd_°¨t
,

53 (*)(
uöçå_t
)
i
);

56 
i
 = 0; i < 
NTHREADS
; i++) {

57 
	`thd_joö
(
thds
[
i
], 
NULL
);

59 
	}
}

60 
TEST_END


63 
	$maö
() {

64  
	`ã°
(

65 
ã°_MALLOCX_ARENA
);

66 
	}
}

	@test/integration/aligned_alloc.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	#MAXALIGN
 (((
size_t
)1Ë<< 23)

	)

11 
	$purge
() {

12 
	`as£π_d_eq
(
	`mÆl˘l
("¨ía.0.purge", 
NULL
, NULL, NULL, 0), 0,

14 
	}
}

16 
	$TEST_BEGIN
(
ã°_Æignmít_îr‹s
) {

17 
size_t
 
Æignmít
;

18 *
p
;

20 
Æignmít
 = 0;

21 
	`£t_î∫o
(0);

22 
p
 = 
	`Æig√d_Æloc
(
Æignmít
, 1);

23 
	`as£π_Ál£
(
p
 !
NULL
 || 
	`gë_î∫o
(Ë!
EINVAL
,

24 "Ex≥˘edÉº‹ f‹ invÆidálignmíà%zu", 
Æignmít
);

26 
Æignmít
 = (
size_t
);álignmíà< 
MAXALIGN
;

27 
Æignmít
 <<= 1) {

28 
	`£t_î∫o
(0);

29 
p
 = 
	`Æig√d_Æloc
(
Æignmít
 + 1, 1);

30 
	`as£π_Ál£
(
p
 !
NULL
 || 
	`gë_î∫o
(Ë!
EINVAL
,

32 
Æignmít
 + 1);

34 
	}
}

35 
TEST_END


37 
	$TEST_BEGIN
(
ã°_oom_îr‹s
) {

38 
size_t
 
Æignmít
, 
size
;

39 *
p
;

41 #i‡
LG_SIZEOF_PTR
 == 3

42 
Æignmít
 = 
	`UINT64_C
(0x8000000000000000);

43 
size
 = 
	`UINT64_C
(0x8000000000000000);

45 
Æignmít
 = 0x80000000LU;

46 
size
 = 0x80000000LU;

48 
	`£t_î∫o
(0);

49 
p
 = 
	`Æig√d_Æloc
(
Æignmít
, 
size
);

50 
	`as£π_Ál£
(
p
 !
NULL
 || 
	`gë_î∫o
(Ë!
ENOMEM
,

52 
Æignmít
, 
size
);

54 #i‡
LG_SIZEOF_PTR
 == 3

55 
Æignmít
 = 
	`UINT64_C
(0x4000000000000000);

56 
size
 = 
	`UINT64_C
(0xc000000000000001);

58 
Æignmít
 = 0x40000000LU;

59 
size
 = 0xc0000001LU;

61 
	`£t_î∫o
(0);

62 
p
 = 
	`Æig√d_Æloc
(
Æignmít
, 
size
);

63 
	`as£π_Ál£
(
p
 !
NULL
 || 
	`gë_î∫o
(Ë!
ENOMEM
,

65 
Æignmít
, 
size
);

67 
Æignmít
 = 0x10LU;

68 #i‡
LG_SIZEOF_PTR
 == 3

69 
size
 = 
	`UINT64_C
(0xfffffffffffffff0);

71 
size
 = 0xfffffff0LU;

73 
	`£t_î∫o
(0);

74 
p
 = 
	`Æig√d_Æloc
(
Æignmít
, 
size
);

75 
	`as£π_Ál£
(
p
 !
NULL
 || 
	`gë_î∫o
(Ë!
ENOMEM
,

77 
Æignmít
, 
size
);

78 
	}
}

79 
TEST_END


81 
	$TEST_BEGIN
(
ã°_Æignmít_™d_size
) {

82 
	#NITER
 4

	)

83 
size_t
 
Æignmít
, 
size
, 
tŸÆ
;

84 
i
;

85 *
ps
[
NITER
];

87 
i
 = 0; i < 
NITER
; i++) {

88 
ps
[
i
] = 
NULL
;

91 
Æignmít
 = 8;

92 
Æignmít
 <
MAXALIGN
;

93 
Æignmít
 <<= 1) {

94 
tŸÆ
 = 0;

95 
size
 = 1;

96 
size
 < 3 * 
Æignmít
 && size < (1U << 31);

97 
size
 +(
Æignmít
 >> (
LG_SIZEOF_PTR
-1)) - 1) {

98 
i
 = 0; i < 
NITER
; i++) {

99 
ps
[
i
] = 
	`Æig√d_Æloc
(
Æignmít
, 
size
);

100 i‡(
ps
[
i
] =
NULL
) {

101 
buf
[
BUFERROR_BUF
];

103 
	`bu„º‹
(
	`gë_î∫o
(), 
buf
, (buf));

104 
	`ã°_Áû
(

107 
Æignmít
, 
size
, size, 
buf
);

109 
tŸÆ
 +
	`mÆloc_ußbÀ_size
(
ps
[
i
]);

110 i‡(
tŸÆ
 >(
MAXALIGN
 << 1)) {

114 
i
 = 0; i < 
NITER
; i++) {

115 i‡(
ps
[
i
] !
NULL
) {

116 
	`‰ì
(
ps
[
i
]);

117 
ps
[
i
] = 
NULL
;

121 
	`purge
();

123 #unde‡
NITER


124 
	}
}

125 
TEST_END


128 
	$maö
() {

129  
	`ã°
(

130 
ã°_Æignmít_îr‹s
,

131 
ã°_oom_îr‹s
,

132 
ã°_Æignmít_™d_size
);

133 
	}
}

	@test/integration/allocated.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 c⁄° 
boﬁ
 
	gc⁄fig_°©s
 =

4 #ifde‡
JEMALLOC_STATS


5 
åue


7 
Ál£


12 
	$thd_°¨t
(*
¨g
) {

13 
îr
;

14 *
p
;

15 
uöt64_t
 
a0
, 
a1
, 
d0
, 
d1
;

16 
uöt64_t
 *
≠0
, *
≠1
, *
dp0
, *
dp1
;

17 
size_t
 
sz
, 
usize
;

19 
sz
 = (
a0
);

20 i‡((
îr
 = 
	`mÆl˘l
("thªad.Æloˇãd", (*)&
a0
, &
sz
, 
NULL
, 0))) {

21 i‡(
îr
 =
ENOENT
) {

22 
œbñ_ENOENT
;

24 
	`ã°_Áû
("%s(): Eº‹ i¿mÆl˘l(): %s", 
__func__
,

25 
	`°ªº‹
(
îr
));

27 
sz
 = (
≠0
);

28 i‡((
îr
 = 
	`mÆl˘l
("thªad.Æloˇãdp", (*)&
≠0
, &
sz
, 
NULL
, 0))) {

29 i‡(
îr
 =
ENOENT
) {

30 
œbñ_ENOENT
;

32 
	`ã°_Áû
("%s(): Eº‹ i¿mÆl˘l(): %s", 
__func__
,

33 
	`°ªº‹
(
îr
));

35 
	`as£π_u64_eq
(*
≠0
, 
a0
,

39 
sz
 = (
d0
);

40 i‡((
îr
 = 
	`mÆl˘l
("thªad.dóŒoˇãd", (*)&
d0
, &
sz
, 
NULL
, 0))) {

41 i‡(
îr
 =
ENOENT
) {

42 
œbñ_ENOENT
;

44 
	`ã°_Áû
("%s(): Eº‹ i¿mÆl˘l(): %s", 
__func__
,

45 
	`°ªº‹
(
îr
));

47 
sz
 = (
dp0
);

48 i‡((
îr
 = 
	`mÆl˘l
("thªad.dóŒoˇãdp", (*)&
dp0
, &
sz
, 
NULL
,

50 i‡(
îr
 =
ENOENT
) {

51 
œbñ_ENOENT
;

53 
	`ã°_Áû
("%s(): Eº‹ i¿mÆl˘l(): %s", 
__func__
,

54 
	`°ªº‹
(
îr
));

56 
	`as£π_u64_eq
(*
dp0
, 
d0
,

60 
p
 = 
	`mÆloc
(1);

61 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected malloc()Érror");

63 
sz
 = (
a1
);

64 
	`mÆl˘l
("thªad.Æloˇãd", (*)&
a1
, &
sz
, 
NULL
, 0);

65 
sz
 = (
≠1
);

66 
	`mÆl˘l
("thªad.Æloˇãdp", (*)&
≠1
, &
sz
, 
NULL
, 0);

67 
	`as£π_u64_eq
(*
≠1
, 
a1
,

70 
	`as£π_±r_eq
(
≠0
, 
≠1
,

73 
usize
 = 
	`mÆloc_ußbÀ_size
(
p
);

74 
	`as£π_u64_À
(
a0
 + 
usize
, 
a1
,

78 
	`‰ì
(
p
);

80 
sz
 = (
d1
);

81 
	`mÆl˘l
("thªad.dóŒoˇãd", (*)&
d1
, &
sz
, 
NULL
, 0);

82 
sz
 = (
dp1
);

83 
	`mÆl˘l
("thªad.dóŒoˇãdp", (*)&
dp1
, &
sz
, 
NULL
, 0);

84 
	`as£π_u64_eq
(*
dp1
, 
d1
,

87 
	`as£π_±r_eq
(
dp0
, 
dp1
,

90 
	`as£π_u64_À
(
d0
 + 
usize
, 
d1
,

94  
NULL
;

95 
œbñ_ENOENT
:

96 
	`as£π_Ál£
(
c⁄fig_°©s
,

98 
	`ã°_skù
("\"thread.allocated\" mallctlÇotávailable");

99  
NULL
;

100 
	}
}

102 
	$TEST_BEGIN
(
ã°_maö_thªad
) {

103 
	`thd_°¨t
(
NULL
);

104 
	}
}

105 
TEST_END


107 
	$TEST_BEGIN
(
ã°_subthªad
) {

108 
thd_t
 
thd
;

110 
	`thd_¸óã
(&
thd
, 
thd_°¨t
, 
NULL
);

111 
	`thd_joö
(
thd
, 
NULL
);

112 
	}
}

113 
TEST_END


116 
	$maö
() {

118  
	`ã°
(

119 
ã°_maö_thªad
,

120 
ã°_subthªad
,

121 
ã°_maö_thªad
,

122 
ã°_subthªad
,

123 
ã°_maö_thªad
);

124 
	}
}

	@test/integration/cpp/basic.cpp

1 
	~<mem‹y
>

2 
	~"ã°/jemÆloc_ã°.h
"

4 
	$TEST_BEGIN
(
ã°_basic
) {

5 autÿ
foo
 = 
√w
 (4);

6 
	`as£π_±r_nŸ_nuŒ
(
foo
, "UnexpectedÇew[] failure");

7 
dñëe
 
foo
;

9 
foo
 = 
nuŒ±r
;

10 
dñëe
 
foo
;

12 autÿ
b¨
 = 
√w
 ;

13 
	`as£π_±r_nŸ_nuŒ
(
b¨
, "UnexpectedÇew failure");

14 
dñëe
 
b¨
;

16 
b¨
 = 
nuŒ±r
;

17 
dñëe
 
b¨
;

18 
	}
}

19 
TEST_END


22 
	$maö
() {

23  
	`ã°
(

24 
ã°_basic
);

25 
	}
}

	@test/integration/extent.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"ã°/exã¡_hooks.h
"

5 
boﬁ


6 
	$check_background_thªad_íabÀd
() {

7 
boﬁ
 
íabÀd
;

8 
size_t
 
sz
 = (
boﬁ
);

9 
ªt
 = 
	`mÆl˘l
("background_thªad", (*)&
íabÀd
, &
sz
, 
NULL
,0);

10 i‡(
ªt
 =
ENOENT
) {

11  
Ál£
;

13 
	`as£π_d_eq
(
ªt
, 0, "Unexpected mallctlÉrror");

14  
íabÀd
;

15 
	}
}

18 
	$ã°_exã¡_body
(
¨ía_öd
) {

19 *
p
;

20 
size_t
 
œrge0
, 
œrge1
, 
œrge2
, 
sz
;

21 
size_t
 
purge_mib
[3];

22 
size_t
 
purge_mibÀn
;

23 
Êags
;

24 
boﬁ
 
xÆlocx_suc˚ss_a
, 
xÆlocx_suc˚ss_b
, 
xÆlocx_suc˚ss_c
;

26 
Êags
 = 
	`MALLOCX_ARENA
(
¨ía_öd
Ë| 
MALLOCX_TCACHE_NONE
;

29 
sz
 = (
size_t
);

30 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.Àxã¡.0.size", (*)&
œrge0
, &
sz
, 
NULL
,

32 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.Àxã¡.1.size", (*)&
œrge1
, &
sz
, 
NULL
,

34 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.Àxã¡.2.size", (*)&
œrge2
, &
sz
, 
NULL
,

38 
purge_mibÀn
 = (
purge_mib
)/(
size_t
);

39 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.purge", 
purge_mib
, &
purge_mibÀn
),

41 
purge_mib
[1] = (
size_t
)
¨ía_öd
;

42 
ˇŒed_Æloc
 = 
Ál£
;

43 
åy_Æloc
 = 
åue
;

44 
åy_dÆloc
 = 
Ál£
;

45 
åy_decommô
 = 
Ál£
;

46 
p
 = 
	`mÆlocx
(
œrge0
 * 2, 
Êags
);

47 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

48 
	`as£π_åue
(
ˇŒed_Æloc
, "Expectedálloc call");

49 
ˇŒed_dÆloc
 = 
Ál£
;

50 
ˇŒed_decommô
 = 
Ál£
;

51 
did_purge_œzy
 = 
Ál£
;

52 
did_purge_f‹˚d
 = 
Ál£
;

53 
ˇŒed_•lô
 = 
Ál£
;

54 
xÆlocx_suc˚ss_a
 = (
	`xÆlocx
(
p
, 
œrge0
, 0, 
Êags
) ==Üarge0);

55 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
purge_mib
, 
purge_mibÀn
, 
NULL
, NULL, NULL, 0),

56 0, "U√x≥˘edáª«.%u.purgêîr‹", 
¨ía_öd
);

57 i‡(
xÆlocx_suc˚ss_a
) {

58 
	`as£π_åue
(
ˇŒed_dÆloc
, "Expected dalloc call");

59 
	`as£π_åue
(
ˇŒed_decommô
, "Expected decommit call");

60 
	`as£π_åue
(
did_purge_œzy
 || 
did_purge_f‹˚d
,

63 
	`as£π_åue
(
ˇŒed_•lô
, "Expected split call");

64 
	`dÆlocx
(
p
, 
Êags
);

65 
åy_dÆloc
 = 
åue
;

68 
åy_dÆloc
 = 
Ál£
;

69 
åy_decommô
 = 
åue
;

70 
p
 = 
	`mÆlocx
(
œrge0
 * 2, 
Êags
);

71 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

72 
did_decommô
 = 
Ál£
;

73 
did_commô
 = 
Ál£
;

74 
ˇŒed_•lô
 = 
Ál£
;

75 
did_•lô
 = 
Ál£
;

76 
did_mîge
 = 
Ál£
;

77 
xÆlocx_suc˚ss_b
 = (
	`xÆlocx
(
p
, 
œrge0
, 0, 
Êags
) ==Üarge0);

78 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
purge_mib
, 
purge_mibÀn
, 
NULL
, NULL, NULL, 0),

79 0, "U√x≥˘edáª«.%u.purgêîr‹", 
¨ía_öd
);

80 i‡(
xÆlocx_suc˚ss_b
) {

81 
	`as£π_åue
(
did_•lô
, "Expected split");

83 
xÆlocx_suc˚ss_c
 = (
	`xÆlocx
(
p
, 
œrge0
 * 2, 0, 
Êags
) ==Üarge0 * 2);

84 i‡(
did_•lô
) {

85 
	`as£π_b_eq
(
did_decommô
, 
did_commô
,

88 i‡(
xÆlocx_suc˚ss_b
 && 
xÆlocx_suc˚ss_c
) {

89 
	`as£π_åue
(
did_mîge
, "Expected merge");

91 
	`dÆlocx
(
p
, 
Êags
);

92 
åy_dÆloc
 = 
åue
;

93 
åy_decommô
 = 
Ál£
;

96 
p
 = 
	`mÆlocx
(42, 
Êags
);

97 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

98 
	`dÆlocx
(
p
, 
Êags
);

99 
	}
}

102 
	$ã°_m™uÆ_hook_body
() {

103 
¨ía_öd
;

104 
size_t
 
ﬁd_size
, 
√w_size
, 
sz
;

105 
size_t
 
hooks_mib
[3];

106 
size_t
 
hooks_mibÀn
;

107 
exã¡_hooks_t
 *
√w_hooks
, *
ﬁd_hooks
;

109 
	`exã¡_hooks_¥ï
();

111 
sz
 = ();

112 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.¸óã", (*)&
¨ía_öd
, &
sz
, 
NULL
, 0),

116 
hooks_mibÀn
 = (
hooks_mib
)/(
size_t
);

117 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.exã¡_hooks", 
hooks_mib
,

118 &
hooks_mibÀn
), 0, "Unexpected mallctlnametomib() failure");

119 
hooks_mib
[1] = (
size_t
)
¨ía_öd
;

120 
ﬁd_size
 = (
exã¡_hooks_t
 *);

121 
√w_hooks
 = &
hooks
;

122 
√w_size
 = (
exã¡_hooks_t
 *);

123 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
hooks_mib
, 
hooks_mibÀn
, (*)&
ﬁd_hooks
,

124 &
ﬁd_size
, (*)&
√w_hooks
, 
√w_size
), 0,

126 
	`as£π_±r_√
(
ﬁd_hooks
->
Æloc
, 
exã¡_Æloc_hook
,

128 
	`as£π_±r_√
(
ﬁd_hooks
->
dÆloc
, 
exã¡_dÆloc_hook
,

130 
	`as£π_±r_√
(
ﬁd_hooks
->
commô
, 
exã¡_commô_hook
,

132 
	`as£π_±r_√
(
ﬁd_hooks
->
decommô
, 
exã¡_decommô_hook
,

134 
	`as£π_±r_√
(
ﬁd_hooks
->
purge_œzy
, 
exã¡_purge_œzy_hook
,

136 
	`as£π_±r_√
(
ﬁd_hooks
->
purge_f‹˚d
, 
exã¡_purge_f‹˚d_hook
,

138 
	`as£π_±r_√
(
ﬁd_hooks
->
•lô
, 
exã¡_•lô_hook
,

140 
	`as£π_±r_√
(
ﬁd_hooks
->
mîge
, 
exã¡_mîge_hook
,

143 i‡(!
	`check_background_thªad_íabÀd
()) {

144 
	`ã°_exã¡_body
(
¨ía_öd
);

148 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
hooks_mib
, 
hooks_mibÀn
, 
NULL
, NULL,

149 (*)&
ﬁd_hooks
, 
√w_size
), 0, "UnexpectedÉxtent_hooksÉrror");

150 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
hooks_mib
, 
hooks_mibÀn
, (*)&
ﬁd_hooks
,

151 &
ﬁd_size
, 
NULL
, 0), 0, "UnexpectedÉxtent_hooksÉrror");

152 
	`as£π_±r_eq
(
ﬁd_hooks
, 
deÁu…_hooks
, "UnexpectedÉxtent_hooksÉrror");

153 
	`as£π_±r_eq
(
ﬁd_hooks
->
Æloc
, 
deÁu…_hooks
->alloc,

155 
	`as£π_±r_eq
(
ﬁd_hooks
->
dÆloc
, 
deÁu…_hooks
->dalloc,

157 
	`as£π_±r_eq
(
ﬁd_hooks
->
commô
, 
deÁu…_hooks
->commit,

159 
	`as£π_±r_eq
(
ﬁd_hooks
->
decommô
, 
deÁu…_hooks
->decommit,

161 
	`as£π_±r_eq
(
ﬁd_hooks
->
purge_œzy
, 
deÁu…_hooks
->purge_lazy,

163 
	`as£π_±r_eq
(
ﬁd_hooks
->
purge_f‹˚d
, 
deÁu…_hooks
->purge_forced,

165 
	`as£π_±r_eq
(
ﬁd_hooks
->
•lô
, 
deÁu…_hooks
->split,

167 
	`as£π_±r_eq
(
ﬁd_hooks
->
mîge
, 
deÁu…_hooks
->merge,

169 
	}
}

171 
	$TEST_BEGIN
(
ã°_exã¡_m™uÆ_hook
) {

172 
	`ã°_m™uÆ_hook_body
();

175 
åy_•lô
 = 
Ál£
;

176 
	`ã°_m™uÆ_hook_body
();

177 
åy_mîge
 = 
Ál£
;

178 
	`ã°_m™uÆ_hook_body
();

179 
åy_purge_œzy
 = 
Ál£
;

180 
åy_purge_f‹˚d
 = 
Ál£
;

181 
	`ã°_m™uÆ_hook_body
();

183 
åy_•lô
 = 
åy_mîge
 = 
åy_purge_œzy
 = 
åy_purge_f‹˚d
 = 
åue
;

184 
	}
}

185 
TEST_END


187 
	$TEST_BEGIN
(
ã°_exã¡_auto_hook
) {

188 
¨ía_öd
;

189 
size_t
 
√w_size
, 
sz
;

190 
exã¡_hooks_t
 *
√w_hooks
;

192 
	`exã¡_hooks_¥ï
();

194 
sz
 = ();

195 
√w_hooks
 = &
hooks
;

196 
√w_size
 = (
exã¡_hooks_t
 *);

197 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.¸óã", (*)&
¨ía_öd
, &
sz
,

198 (*)&
√w_hooks
, 
√w_size
), 0, "Unexpected mallctl() failure");

200 
	`ã°_skù_if
(
	`check_background_thªad_íabÀd
());

201 
	`ã°_exã¡_body
(
¨ía_öd
);

202 
	}
}

203 
TEST_END


206 
	$maö
() {

207  
	`ã°
(

208 
ã°_exã¡_m™uÆ_hook
,

209 
ã°_exã¡_auto_hook
);

210 
	}
}

	@test/integration/mallocx.c

1 
	~"ã°/jemÆloc_ã°.h
"

4 
	$gë_nsizes_im∂
(c⁄° *
cmd
) {

5 
ªt
;

6 
size_t
 
z
;

8 
z
 = ();

9 
	`as£π_d_eq
(
	`mÆl˘l
(
cmd
, (*)&
ªt
, &
z
, 
NULL
, 0), 0,

10 "U√x≥˘ed mÆl˘l(\"%s\", ...ËÁûuª", 
cmd
);

12  
ªt
;

13 
	}
}

16 
	$gë_∆¨ge
() {

17  
	`gë_nsizes_im∂
("arenas.nlextents");

18 
	}
}

20 
size_t


21 
	$gë_size_im∂
(c⁄° *
cmd
, 
size_t
 
öd
) {

22 
size_t
 
ªt
;

23 
size_t
 
z
;

24 
size_t
 
mib
[4];

25 
size_t
 
mibÀn
 = 4;

27 
z
 = (
size_t
);

28 
	`as£π_d_eq
(
	`mÆl˘ amëomib
(
cmd
, 
mib
, &
mibÀn
),

29 0, "U√x≥˘ed mÆl˘ amëomib(\"%s\", ...ËÁûuª", 
cmd
);

30 
mib
[2] = 
öd
;

31 
z
 = (
size_t
);

32 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
ªt
, &
z
, 
NULL
, 0),

33 0, "U√x≥˘ed mÆl˘lbymib([\"%s\", %zu], ...ËÁûuª", 
cmd
, 
öd
);

35  
ªt
;

36 
	}
}

38 
size_t


39 
	$gë_œrge_size
(
size_t
 
öd
) {

40  
	`gë_size_im∂
("¨ías.Àxã¡.0.size", 
öd
);

41 
	}
}

49 
	$purge
() {

50 
	`as£π_d_eq
(
	`mÆl˘l
("¨ía.0.purge", 
NULL
, NULL, NULL, 0), 0,

52 
	}
}

54 
	$TEST_BEGIN
(
ã°_ovîÊow
) {

55 
size_t
 
œrgemax
;

57 
œrgemax
 = 
	`gë_œrge_size
(
	`gë_∆¨ge
()-1);

59 
	`as£π_±r_nuŒ
(
	`mÆlocx
(
œrgemax
+1, 0),

60 "Ex≥˘ed OOM f‹ mÆlocx(size=%#zx, 0)", 
œrgemax
+1);

62 
	`as£π_±r_nuŒ
(
	`mÆlocx
(
	`ZU
(
PTRDIFF_MAX
)+1, 0),

63 "Ex≥˘ed OOM f‹ mÆlocx(size=%#zx, 0)", 
	`ZU
(
PTRDIFF_MAX
)+1);

65 
	`as£π_±r_nuŒ
(
	`mÆlocx
(
SIZE_T_MAX
, 0),

66 "Ex≥˘ed OOM f‹ mÆlocx(size=%#zx, 0)", 
SIZE_T_MAX
);

68 
	`as£π_±r_nuŒ
(
	`mÆlocx
(1, 
	`MALLOCX_ALIGN
(
	`ZU
(
PTRDIFF_MAX
)+1)),

70 
	`ZU
(
PTRDIFF_MAX
)+1);

71 
	}
}

72 
TEST_END


74 
	$TEST_BEGIN
(
ã°_oom
) {

75 
size_t
 
œrgemax
;

76 
boﬁ
 
oom
;

77 *
±rs
[3];

78 
i
;

84 
œrgemax
 = 
	`gë_œrge_size
(
	`gë_∆¨ge
()-1);

85 
oom
 = 
Ál£
;

86 
i
 = 0; i < (
±rs
) / (*); i++) {

87 
±rs
[
i
] = 
	`mÆlocx
(
œrgemax
, 0);

88 i‡(
±rs
[
i
] =
NULL
) {

89 
oom
 = 
åue
;

92 
	`as£π_åue
(
oom
,

94 
œrgemax
);

95 
i
 = 0; i < (
±rs
) / (*); i++) {

96 i‡(
±rs
[
i
] !
NULL
) {

97 
	`dÆlocx
(
±rs
[
i
], 0);

100 
	`purge
();

102 #i‡
LG_SIZEOF_PTR
 == 3

103 
	`as£π_±r_nuŒ
(
	`mÆlocx
(0x8000000000000000ULL,

104 
	`MALLOCX_ALIGN
(0x8000000000000000ULL)),

106 
	`as£π_±r_nuŒ
(
	`mÆlocx
(0x8000000000000000ULL,

107 
	`MALLOCX_ALIGN
(0x80000000)),

110 
	`as£π_±r_nuŒ
(
	`mÆlocx
(0x80000000UL, 
	`MALLOCX_ALIGN
(0x80000000UL)),

113 
	}
}

114 
TEST_END


116 
	$TEST_BEGIN
(
ã°_basic
) {

117 
	#MAXSZ
 (((
size_t
)1Ë<< 23)

	)

118 
size_t
 
sz
;

120 
sz
 = 1; sz < 
MAXSZ
; sz = 
	`«Œocx
(sz, 0) + 1) {

121 
size_t
 
nsz
, 
rsz
;

122 *
p
;

123 
nsz
 = 
	`«Œocx
(
sz
, 0);

124 
	`as£π_zu_√
(
nsz
, 0, "UnexpectedÇallocx()Érror");

125 
p
 = 
	`mÆlocx
(
sz
, 0);

126 
	`as£π_±r_nŸ_nuŒ
(
p
,

127 "U√x≥˘ed mÆlocx(size=%zx, fœgs=0Ëîr‹", 
sz
);

128 
rsz
 = 
	`ßŒocx
(
p
, 0);

129 
	`as£π_zu_ge
(
rsz
, 
sz
, "Real size smallerÅhanÉxpected");

130 
	`as£π_zu_eq
(
nsz
, 
rsz
, "nallocx()/sallocx() size mismatch");

131 
	`dÆlocx
(
p
, 0);

133 
p
 = 
	`mÆlocx
(
sz
, 0);

134 
	`as£π_±r_nŸ_nuŒ
(
p
,

135 "U√x≥˘ed mÆlocx(size=%zx, fœgs=0Ëîr‹", 
sz
);

136 
	`dÆlocx
(
p
, 0);

138 
nsz
 = 
	`«Œocx
(
sz
, 
MALLOCX_ZERO
);

139 
	`as£π_zu_√
(
nsz
, 0, "UnexpectedÇallocx()Érror");

140 
p
 = 
	`mÆlocx
(
sz
, 
MALLOCX_ZERO
);

141 
	`as£π_±r_nŸ_nuŒ
(
p
,

143 
nsz
);

144 
rsz
 = 
	`ßŒocx
(
p
, 0);

145 
	`as£π_zu_eq
(
nsz
, 
rsz
, "nallocx()/sallocx()Ñsize mismatch");

146 
	`dÆlocx
(
p
, 0);

147 
	`purge
();

149 #unde‡
MAXSZ


150 
	}
}

151 
TEST_END


153 
	$TEST_BEGIN
(
ã°_Æignmít_™d_size
) {

154 
	#MAXALIGN
 (((
size_t
)1Ë<< 23)

	)

155 
	#NITER
 4

	)

156 
size_t
 
nsz
, 
rsz
, 
sz
, 
Æignmít
, 
tŸÆ
;

157 
i
;

158 *
ps
[
NITER
];

160 
i
 = 0; i < 
NITER
; i++) {

161 
ps
[
i
] = 
NULL
;

164 
Æignmít
 = 8;

165 
Æignmít
 <
MAXALIGN
;

166 
Æignmít
 <<= 1) {

167 
tŸÆ
 = 0;

168 
sz
 = 1;

169 
sz
 < 3 * 
Æignmít
 && sz < (1U << 31);

170 
sz
 +(
Æignmít
 >> (
LG_SIZEOF_PTR
-1)) - 1) {

171 
i
 = 0; i < 
NITER
; i++) {

172 
nsz
 = 
	`«Œocx
(
sz
, 
	`MALLOCX_ALIGN
(
Æignmít
) |

173 
MALLOCX_ZERO
);

174 
	`as£π_zu_√
(
nsz
, 0,

176 "size=%zu (%#zx)", 
Æignmít
, 
sz
, sz);

177 
ps
[
i
] = 
	`mÆlocx
(
sz
, 
	`MALLOCX_ALIGN
(
Æignmít
) |

178 
MALLOCX_ZERO
);

179 
	`as£π_±r_nŸ_nuŒ
(
ps
[
i
],

181 "size=%zu (%#zx)", 
Æignmít
, 
sz
, sz);

182 
rsz
 = 
	`ßŒocx
(
ps
[
i
], 0);

183 
	`as£π_zu_ge
(
rsz
, 
sz
,

185 "Æignmít=%zu, size=%zu", 
Æignmít
, 
sz
);

186 
	`as£π_zu_eq
(
nsz
, 
rsz
,

188 "Æignmít=%zu, size=%zu", 
Æignmít
, 
sz
);

189 
	`as£π_±r_nuŒ
(

190 (*)((
uöçå_t
)
ps
[
i
] & (
Æignmít
-1)),

192 "álignmít=%zu, size=%zu", 
ps
[
i
],

193 
Æignmít
, 
sz
);

194 
tŸÆ
 +
rsz
;

195 i‡(
tŸÆ
 >(
MAXALIGN
 << 1)) {

199 
i
 = 0; i < 
NITER
; i++) {

200 i‡(
ps
[
i
] !
NULL
) {

201 
	`dÆlocx
(
ps
[
i
], 0);

202 
ps
[
i
] = 
NULL
;

206 
	`purge
();

208 #unde‡
MAXALIGN


209 #unde‡
NITER


210 
	}
}

211 
TEST_END


214 
	$maö
() {

215  
	`ã°
(

216 
ã°_ovîÊow
,

217 
ã°_oom
,

218 
ã°_basic
,

219 
ã°_Æignmít_™d_size
);

220 
	}
}

	@test/integration/overflow.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	$TEST_BEGIN
(
ã°_ovîÊow
) {

4 
∆exã¡s
;

5 
size_t
 
mib
[4];

6 
size_t
 
sz
, 
mibÀn
, 
max_size_˛ass
;

7 *
p
;

9 
sz
 = ();

10 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.∆exã¡s", (*)&
∆exã¡s
, &
sz
, 
NULL
,

13 
mibÀn
 = (
mib
Ë/ (
size_t
);

14 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ías.Àxã¡.0.size", 
mib
, &
mibÀn
), 0,

16 
mib
[2] = 
∆exã¡s
 - 1;

18 
sz
 = (
size_t
);

19 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
max_size_˛ass
, &
sz
,

20 
NULL
, 0), 0, "Unexpected mallctlbymib()Érror");

22 
	`as£π_±r_nuŒ
(
	`mÆloc
(
max_size_˛ass
 + 1),

24 
	`as£π_±r_nuŒ
(
	`mÆloc
(
SIZE_T_MAX
),

27 
	`as£π_±r_nuŒ
(
	`ˇŒoc
(1, 
max_size_˛ass
 + 1),

29 
	`as£π_±r_nuŒ
(
	`ˇŒoc
(1, 
SIZE_T_MAX
),

32 
p
 = 
	`mÆloc
(1);

33 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected malloc() OOM");

34 
	`as£π_±r_nuŒ
(
	`ªÆloc
(
p
, 
max_size_˛ass
 + 1),

36 
	`as£π_±r_nuŒ
(
	`ªÆloc
(
p
, 
SIZE_T_MAX
),

38 
	`‰ì
(
p
);

39 
	}
}

40 
TEST_END


43 
	$maö
() {

44  
	`ã°
(

45 
ã°_ovîÊow
);

46 
	}
}

	@test/integration/posix_memalign.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	#MAXALIGN
 (((
size_t
)1Ë<< 23)

	)

11 
	$purge
() {

12 
	`as£π_d_eq
(
	`mÆl˘l
("¨ía.0.purge", 
NULL
, NULL, NULL, 0), 0,

14 
	}
}

16 
	$TEST_BEGIN
(
ã°_Æignmít_îr‹s
) {

17 
size_t
 
Æignmít
;

18 *
p
;

20 
Æignmít
 = 0;álignment < (*);álignment++) {

21 
	`as£π_d_eq
(
	`posix_memÆign
(&
p
, 
Æignmít
, 1), 
EINVAL
,

23 
Æignmít
);

26 
Æignmít
 = (
size_t
);álignmíà< 
MAXALIGN
;

27 
Æignmít
 <<= 1) {

28 
	`as£π_d_√
(
	`posix_memÆign
(&
p
, 
Æignmít
 + 1, 1), 0,

30 
Æignmít
 + 1);

32 
	}
}

33 
TEST_END


35 
	$TEST_BEGIN
(
ã°_oom_îr‹s
) {

36 
size_t
 
Æignmít
, 
size
;

37 *
p
;

39 #i‡
LG_SIZEOF_PTR
 == 3

40 
Æignmít
 = 
	`UINT64_C
(0x8000000000000000);

41 
size
 = 
	`UINT64_C
(0x8000000000000000);

43 
Æignmít
 = 0x80000000LU;

44 
size
 = 0x80000000LU;

46 
	`as£π_d_√
(
	`posix_memÆign
(&
p
, 
Æignmít
, 
size
), 0,

48 
Æignmít
, 
size
);

50 #i‡
LG_SIZEOF_PTR
 == 3

51 
Æignmít
 = 
	`UINT64_C
(0x4000000000000000);

52 
size
 = 
	`UINT64_C
(0xc000000000000001);

54 
Æignmít
 = 0x40000000LU;

55 
size
 = 0xc0000001LU;

57 
	`as£π_d_√
(
	`posix_memÆign
(&
p
, 
Æignmít
, 
size
), 0,

59 
Æignmít
, 
size
);

61 
Æignmít
 = 0x10LU;

62 #i‡
LG_SIZEOF_PTR
 == 3

63 
size
 = 
	`UINT64_C
(0xfffffffffffffff0);

65 
size
 = 0xfffffff0LU;

67 
	`as£π_d_√
(
	`posix_memÆign
(&
p
, 
Æignmít
, 
size
), 0,

69 
Æignmít
, 
size
);

70 
	}
}

71 
TEST_END


73 
	$TEST_BEGIN
(
ã°_Æignmít_™d_size
) {

74 
	#NITER
 4

	)

75 
size_t
 
Æignmít
, 
size
, 
tŸÆ
;

76 
i
;

77 
îr
;

78 *
ps
[
NITER
];

80 
i
 = 0; i < 
NITER
; i++) {

81 
ps
[
i
] = 
NULL
;

84 
Æignmít
 = 8;

85 
Æignmít
 <
MAXALIGN
;

86 
Æignmít
 <<= 1) {

87 
tŸÆ
 = 0;

88 
size
 = 1;

89 
size
 < 3 * 
Æignmít
 && size < (1U << 31);

90 
size
 +(
Æignmít
 >> (
LG_SIZEOF_PTR
-1)) - 1) {

91 
i
 = 0; i < 
NITER
; i++) {

92 
îr
 = 
	`posix_memÆign
(&
ps
[
i
],

93 
Æignmít
, 
size
);

94 i‡(
îr
) {

95 
buf
[
BUFERROR_BUF
];

97 
	`bu„º‹
(
	`gë_î∫o
(), 
buf
, (buf));

98 
	`ã°_Áû
(

101 
Æignmít
, 
size
, size, 
buf
);

103 
tŸÆ
 +
	`mÆloc_ußbÀ_size
(
ps
[
i
]);

104 i‡(
tŸÆ
 >(
MAXALIGN
 << 1)) {

108 
i
 = 0; i < 
NITER
; i++) {

109 i‡(
ps
[
i
] !
NULL
) {

110 
	`‰ì
(
ps
[
i
]);

111 
ps
[
i
] = 
NULL
;

115 
	`purge
();

117 #unde‡
NITER


118 
	}
}

119 
TEST_END


122 
	$maö
() {

123  
	`ã°
(

124 
ã°_Æignmít_îr‹s
,

125 
ã°_oom_îr‹s
,

126 
ã°_Æignmít_™d_size
);

127 
	}
}

	@test/integration/rallocx.c

1 
	~"ã°/jemÆloc_ã°.h
"

4 
	$gë_nsizes_im∂
(c⁄° *
cmd
) {

5 
ªt
;

6 
size_t
 
z
;

8 
z
 = ();

9 
	`as£π_d_eq
(
	`mÆl˘l
(
cmd
, (*)&
ªt
, &
z
, 
NULL
, 0), 0,

10 "U√x≥˘ed mÆl˘l(\"%s\", ...ËÁûuª", 
cmd
);

12  
ªt
;

13 
	}
}

16 
	$gë_∆¨ge
() {

17  
	`gë_nsizes_im∂
("arenas.nlextents");

18 
	}
}

20 
size_t


21 
	$gë_size_im∂
(c⁄° *
cmd
, 
size_t
 
öd
) {

22 
size_t
 
ªt
;

23 
size_t
 
z
;

24 
size_t
 
mib
[4];

25 
size_t
 
mibÀn
 = 4;

27 
z
 = (
size_t
);

28 
	`as£π_d_eq
(
	`mÆl˘ amëomib
(
cmd
, 
mib
, &
mibÀn
),

29 0, "U√x≥˘ed mÆl˘ amëomib(\"%s\", ...ËÁûuª", 
cmd
);

30 
mib
[2] = 
öd
;

31 
z
 = (
size_t
);

32 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
ªt
, &
z
, 
NULL
, 0),

33 0, "U√x≥˘ed mÆl˘lbymib([\"%s\", %zu], ...ËÁûuª", 
cmd
, 
öd
);

35  
ªt
;

36 
	}
}

38 
size_t


39 
	$gë_œrge_size
(
size_t
 
öd
) {

40  
	`gë_size_im∂
("¨ías.Àxã¡.0.size", 
öd
);

41 
	}
}

43 
	$TEST_BEGIN
(
ã°_grow_™d_shrök
) {

44 *
p
, *
q
;

45 
size_t
 
tsz
;

46 
	#NCYCLES
 3

	)

47 
i
, 
j
;

48 
	#NSZS
 1024

	)

49 
size_t
 
szs
[
NSZS
];

50 
	#MAXSZ
 
	`ZU
(12 * 1024 * 1024)

	)

52 
p
 = 
	`mÆlocx
(1, 0);

53 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

54 
szs
[0] = 
	`ßŒocx
(
p
, 0);

56 
i
 = 0; i < 
NCYCLES
; i++) {

57 
j
 = 1; j < 
NSZS
 && 
szs
[j-1] < 
MAXSZ
; j++) {

58 
q
 = 
	`øŒocx
(
p
, 
szs
[
j
-1]+1, 0);

59 
	`as£π_±r_nŸ_nuŒ
(
q
,

61 
szs
[
j
-1], szs[j-1]+1);

62 
szs
[
j
] = 
	`ßŒocx
(
q
, 0);

63 
	`as£π_zu_√
(
szs
[
j
], szs[j-1]+1,

64 "Ex≥˘ed sizêtÿbê©Üó°: %zu", 
szs
[
j
-1]+1);

65 
p
 = 
q
;

68 
j
--; j > 0; j--) {

69 
q
 = 
	`øŒocx
(
p
, 
szs
[
j
-1], 0);

70 
	`as£π_±r_nŸ_nuŒ
(
q
,

72 
szs
[
j
], szs[j-1]);

73 
tsz
 = 
	`ßŒocx
(
q
, 0);

74 
	`as£π_zu_eq
(
tsz
, 
szs
[
j
-1],

75 "Ex≥˘ed size=%zu, gŸ size=%zu", 
szs
[
j
-1], 
tsz
);

76 
p
 = 
q
;

80 
	`dÆlocx
(
p
, 0);

81 #unde‡
MAXSZ


82 #unde‡
NSZS


83 #unde‡
NCYCLES


84 
	}
}

85 
TEST_END


87 
boﬁ


88 
	$vÆid©e_fûl
(c⁄° *
p
, 
uöt8_t
 
c
, 
size_t
 
off£t
, size_à
Àn
) {

89 
boﬁ
 
ªt
 = 
Ál£
;

90 c⁄° 
uöt8_t
 *
buf
 = (c⁄° uöt8_à*)
p
;

91 
size_t
 
i
;

93 
i
 = 0; i < 
Àn
; i++) {

94 
uöt8_t
 
b
 = 
buf
[
off£t
+
i
];

95 i‡(
b
 !
c
) {

96 
	`ã°_Áû
("Allocationát %p (len=%zu) contains %#x "

97 "øthîÅh™ %#xáàoff£à%zu", 
p
, 
Àn
, 
b
, 
c
,

98 
off£t
+
i
);

99 
ªt
 = 
åue
;

103  
ªt
;

104 
	}
}

106 
	$TEST_BEGIN
(
ã°_zîo
) {

107 *
p
, *
q
;

108 
size_t
 
psz
, 
qsz
, 
i
, 
j
;

109 
size_t
 
°¨t_sizes
[] = {1, 3*1024, 63*1024, 4095*1024};

110 
	#FILL_BYTE
 0xØU

	)

111 
	#RANGE
 2048

	)

113 
i
 = 0; i < (
°¨t_sizes
)/(
size_t
); i++) {

114 
size_t
 
°¨t_size
 = 
°¨t_sizes
[
i
];

115 
p
 = 
	`mÆlocx
(
°¨t_size
, 
MALLOCX_ZERO
);

116 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

117 
psz
 = 
	`ßŒocx
(
p
, 0);

119 
	`as£π_Ál£
(
	`vÆid©e_fûl
(
p
, 0, 0, 
psz
),

121 
	`mem£t
(
p
, 
FILL_BYTE
, 
psz
);

122 
	`as£π_Ál£
(
	`vÆid©e_fûl
(
p
, 
FILL_BYTE
, 0, 
psz
),

125 
j
 = 1; j < 
RANGE
; j++) {

126 
q
 = 
	`øŒocx
(
p
, 
°¨t_size
+
j
, 
MALLOCX_ZERO
);

127 
	`as£π_±r_nŸ_nuŒ
(
q
, "UnexpectedÑallocx()Érror");

128 
qsz
 = 
	`ßŒocx
(
q
, 0);

129 i‡(
q
 !
p
 || 
qsz
 !
psz
) {

130 
	`as£π_Ál£
(
	`vÆid©e_fûl
(
q
, 
FILL_BYTE
, 0,

131 
psz
), "Expected filled memory");

132 
	`as£π_Ál£
(
	`vÆid©e_fûl
(
q
, 0, 
psz
, 
qsz
-psz),

135 i‡(
psz
 !
qsz
) {

136 
	`mem£t
((*)((
uöçå_t
)
q
+
psz
), 
FILL_BYTE
,

137 
qsz
-
psz
);

138 
psz
 = 
qsz
;

140 
p
 = 
q
;

142 
	`as£π_Ál£
(
	`vÆid©e_fûl
(
p
, 
FILL_BYTE
, 0, 
psz
),

144 
	`dÆlocx
(
p
, 0);

146 #unde‡
FILL_BYTE


147 
	}
}

148 
TEST_END


150 
	$TEST_BEGIN
(
ã°_Æign
) {

151 *
p
, *
q
;

152 
size_t
 
Æign
;

153 
	#MAX_ALIGN
 (
	`ZU
(1Ë<< 25)

	)

155 
Æign
 = 
	`ZU
(1);

156 
p
 = 
	`mÆlocx
(1, 
	`MALLOCX_ALIGN
(
Æign
));

157 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

159 
Æign
 <<1;álig¿<
MAX_ALIGN
;álign <<= 1) {

160 
q
 = 
	`øŒocx
(
p
, 1, 
	`MALLOCX_ALIGN
(
Æign
));

161 
	`as£π_±r_nŸ_nuŒ
(
q
,

162 "U√x≥˘edÑÆlocx(Ëîr‹ f‹álign=%zu", 
Æign
);

163 
	`as£π_±r_nuŒ
(

164 (*)((
uöçå_t
)
q
 & (
Æign
-1)),

166 
q
, 
Æign
);

167 
p
 = 
q
;

169 
	`dÆlocx
(
p
, 0);

170 #unde‡
MAX_ALIGN


171 
	}
}

172 
TEST_END


174 
	$TEST_BEGIN
(
ã°_lg_Æign_™d_zîo
) {

175 *
p
, *
q
;

176 
lg_Æign
;

177 
size_t
 
sz
;

178 
	#MAX_LG_ALIGN
 25

	)

179 
	#MAX_VALIDATE
 (
	`ZU
(1Ë<< 22)

	)

181 
lg_Æign
 = 0;

182 
p
 = 
	`mÆlocx
(1, 
	`MALLOCX_LG_ALIGN
(
lg_Æign
)|
MALLOCX_ZERO
);

183 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

185 
lg_Æign
++;Üg_Æig¿<
MAX_LG_ALIGN
;Üg_align++) {

186 
q
 = 
	`øŒocx
(
p
, 1, 
	`MALLOCX_LG_ALIGN
(
lg_Æign
)|
MALLOCX_ZERO
);

187 
	`as£π_±r_nŸ_nuŒ
(
q
,

188 "U√x≥˘edÑÆlocx(Ëîr‹ f‹Üg_Æign=%u", 
lg_Æign
);

189 
	`as£π_±r_nuŒ
(

190 (*)((
uöçå_t
)
q
 & ((
	`ZU
(1Ë<< 
lg_Æign
)-1)),

191 "%∞öadequ©ñyálig√d f‹Üg_Æign=%u", 
q
, 
lg_Æign
);

192 
sz
 = 
	`ßŒocx
(
q
, 0);

193 i‡((
sz
 << 1Ë<
MAX_VALIDATE
) {

194 
	`as£π_Ál£
(
	`vÆid©e_fûl
(
q
, 0, 0, 
sz
),

197 
	`as£π_Ál£
(
	`vÆid©e_fûl
(
q
, 0, 0, 
MAX_VALIDATE
),

199 
	`as£π_Ál£
(
	`vÆid©e_fûl
(

200 (*)((
uöçå_t
)
q
+
sz
-
MAX_VALIDATE
),

201 0, 0, 
MAX_VALIDATE
), "Expected zeroed memory");

203 
p
 = 
q
;

205 
	`dÆlocx
(
p
, 0);

206 #unde‡
MAX_VALIDATE


207 #unde‡
MAX_LG_ALIGN


208 
	}
}

209 
TEST_END


211 
	$TEST_BEGIN
(
ã°_ovîÊow
) {

212 
size_t
 
œrgemax
;

213 *
p
;

215 
œrgemax
 = 
	`gë_œrge_size
(
	`gë_∆¨ge
()-1);

217 
p
 = 
	`mÆlocx
(1, 0);

218 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

220 
	`as£π_±r_nuŒ
(
	`øŒocx
(
p
, 
œrgemax
+1, 0),

221 "Ex≥˘ed OOM f‹ÑÆlocx’, size=%#zx, 0)", 
œrgemax
+1);

223 
	`as£π_±r_nuŒ
(
	`øŒocx
(
p
, 
	`ZU
(
PTRDIFF_MAX
)+1, 0),

224 "Ex≥˘ed OOM f‹ÑÆlocx’, size=%#zx, 0)", 
	`ZU
(
PTRDIFF_MAX
)+1);

226 
	`as£π_±r_nuŒ
(
	`øŒocx
(
p
, 
SIZE_T_MAX
, 0),

227 "Ex≥˘ed OOM f‹ÑÆlocx’, size=%#zx, 0)", 
SIZE_T_MAX
);

229 
	`as£π_±r_nuŒ
(
	`øŒocx
(
p
, 1, 
	`MALLOCX_ALIGN
(
	`ZU
(
PTRDIFF_MAX
)+1)),

231 
	`ZU
(
PTRDIFF_MAX
)+1);

233 
	`dÆlocx
(
p
, 0);

234 
	}
}

235 
TEST_END


238 
	$maö
() {

239  
	`ã°
(

240 
ã°_grow_™d_shrök
,

241 
ã°_zîo
,

242 
ã°_Æign
,

243 
ã°_lg_Æign_™d_zîo
,

244 
ã°_ovîÊow
);

245 
	}
}

	@test/integration/sdallocx.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	#MAXALIGN
 (((
size_t
)1Ë<< 22)

	)

4 
	#NITER
 3

	)

6 
	$TEST_BEGIN
(
ã°_basic
) {

7 *
±r
 = 
	`mÆlocx
(64, 0);

8 
	`sdÆlocx
(
±r
, 64, 0);

9 
	}
}

10 
TEST_END


12 
	$TEST_BEGIN
(
ã°_Æignmít_™d_size
) {

13 
size_t
 
nsz
, 
sz
, 
Æignmít
, 
tŸÆ
;

14 
i
;

15 *
ps
[
NITER
];

17 
i
 = 0; i < 
NITER
; i++) {

18 
ps
[
i
] = 
NULL
;

21 
Æignmít
 = 8;

22 
Æignmít
 <
MAXALIGN
;

23 
Æignmít
 <<= 1) {

24 
tŸÆ
 = 0;

25 
sz
 = 1;

26 
sz
 < 3 * 
Æignmít
 && sz < (1U << 31);

27 
sz
 +(
Æignmít
 >> (
LG_SIZEOF_PTR
-1)) - 1) {

28 
i
 = 0; i < 
NITER
; i++) {

29 
nsz
 = 
	`«Œocx
(
sz
, 
	`MALLOCX_ALIGN
(
Æignmít
) |

30 
MALLOCX_ZERO
);

31 
ps
[
i
] = 
	`mÆlocx
(
sz
, 
	`MALLOCX_ALIGN
(
Æignmít
) |

32 
MALLOCX_ZERO
);

33 
tŸÆ
 +
nsz
;

34 i‡(
tŸÆ
 >(
MAXALIGN
 << 1)) {

38 
i
 = 0; i < 
NITER
; i++) {

39 i‡(
ps
[
i
] !
NULL
) {

40 
	`sdÆlocx
(
ps
[
i
], 
sz
,

41 
	`MALLOCX_ALIGN
(
Æignmít
));

42 
ps
[
i
] = 
NULL
;

47 
	}
}

48 
TEST_END


51 
	$maö
() {

52  
	`ã°_no_ªíå™cy
(

53 
ã°_basic
,

54 
ã°_Æignmít_™d_size
);

55 
	}
}

	@test/integration/thread_arena.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	#NTHREADS
 10

	)

6 
	$thd_°¨t
(*
¨g
) {

7 
maö_¨ía_öd
 = *(*)
¨g
;

8 *
p
;

9 
¨ía_öd
;

10 
size_t
 
size
;

11 
îr
;

13 
p
 = 
	`mÆloc
(1);

14 
	`as£π_±r_nŸ_nuŒ
(
p
, "Error in malloc()");

15 
	`‰ì
(
p
);

17 
size
 = (
¨ía_öd
);

18 i‡((
îr
 = 
	`mÆl˘l
("thªad.¨ía", (*)&
¨ía_öd
, &
size
,

19 (*)&
maö_¨ía_öd
, (main_arena_ind)))) {

20 
buf
[
BUFERROR_BUF
];

22 
	`bu„º‹
(
îr
, 
buf
, (buf));

23 
	`ã°_Áû
("Eº‹ i¿mÆl˘l(): %s", 
buf
);

26 
size
 = (
¨ía_öd
);

27 i‡((
îr
 = 
	`mÆl˘l
("thªad.¨ía", (*)&
¨ía_öd
, &
size
, 
NULL
,

29 
buf
[
BUFERROR_BUF
];

31 
	`bu„º‹
(
îr
, 
buf
, (buf));

32 
	`ã°_Áû
("Eº‹ i¿mÆl˘l(): %s", 
buf
);

34 
	`as£π_u_eq
(
¨ía_öd
, 
maö_¨ía_öd
,

37  
NULL
;

38 
	}
}

41 
	$mÆl˘l_Áûuª
(
îr
) {

42 
buf
[
BUFERROR_BUF
];

44 
	`bu„º‹
(
îr
, 
buf
, (buf));

45 
	`ã°_Áû
("Eº‹ i¿mÆl˘l(): %s", 
buf
);

46 
	}
}

48 
	$TEST_BEGIN
(
ã°_thªad_¨ía
) {

49 *
p
;

50 
îr
;

51 
thd_t
 
thds
[
NTHREADS
];

52 
i
;

54 
p
 = 
	`mÆloc
(1);

55 
	`as£π_±r_nŸ_nuŒ
(
p
, "Error in malloc()");

57 
¨ía_öd
, 
ﬁd_¨ía_öd
;

58 
size_t
 
sz
 = ();

59 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.¸óã", (*)&
¨ía_öd
, &
sz
, 
NULL
, 0),

62 
size_t
 
size
 = (
¨ía_öd
);

63 i‡((
îr
 = 
	`mÆl˘l
("thªad.¨ía", (*)&
ﬁd_¨ía_öd
, &
size
,

64 (*)&
¨ía_öd
, (arena_ind))) != 0) {

65 
	`mÆl˘l_Áûuª
(
îr
);

68 
i
 = 0; i < 
NTHREADS
; i++) {

69 
	`thd_¸óã
(&
thds
[
i
], 
thd_°¨t
,

70 (*)&
¨ía_öd
);

73 
i
 = 0; i < 
NTHREADS
; i++) {

74 
öçå_t
 
joö_ªt
;

75 
	`thd_joö
(
thds
[
i
], (*)&
joö_ªt
);

76 
	`as£π_zd_eq
(
joö_ªt
, 0, "UnexpectedÅhread joinÉrror");

78 
	`‰ì
(
p
);

79 
	}
}

80 
TEST_END


83 
	$maö
() {

84  
	`ã°
(

85 
ã°_thªad_¨ía
);

86 
	}
}

	@test/integration/thread_tcache_enabled.c

1 
	~"ã°/jemÆloc_ã°.h
"

4 
	$thd_°¨t
(*
¨g
) {

5 
boﬁ
 
e0
, 
e1
;

6 
size_t
 
sz
 = (
boﬁ
);

7 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.tˇche.íabÀd", (*)&
e0
, &
sz
, 
NULL
,

10 i‡(
e0
) {

11 
e1
 = 
Ál£
;

12 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.tˇche.íabÀd", (*)&
e0
, &
sz
,

13 (*)&
e1
, 
sz
), 0, "Unexpected mallctl()Érror");

14 
	`as£π_åue
(
e0
, "tcache should beÉnabled");

17 
e1
 = 
åue
;

18 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.tˇche.íabÀd", (*)&
e0
, &
sz
,

19 (*)&
e1
, 
sz
), 0, "Unexpected mallctl()Érror");

20 
	`as£π_Ál£
(
e0
, "tcache should be disabled");

22 
e1
 = 
åue
;

23 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.tˇche.íabÀd", (*)&
e0
, &
sz
,

24 (*)&
e1
, 
sz
), 0, "Unexpected mallctl()Érror");

25 
	`as£π_åue
(
e0
, "tcache should beÉnabled");

27 
e1
 = 
Ál£
;

28 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.tˇche.íabÀd", (*)&
e0
, &
sz
,

29 (*)&
e1
, 
sz
), 0, "Unexpected mallctl()Érror");

30 
	`as£π_åue
(
e0
, "tcache should beÉnabled");

32 
e1
 = 
Ál£
;

33 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.tˇche.íabÀd", (*)&
e0
, &
sz
,

34 (*)&
e1
, 
sz
), 0, "Unexpected mallctl()Érror");

35 
	`as£π_Ál£
(
e0
, "tcache should be disabled");

37 
	`‰ì
(
	`mÆloc
(1));

38 
e1
 = 
åue
;

39 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.tˇche.íabÀd", (*)&
e0
, &
sz
,

40 (*)&
e1
, 
sz
), 0, "Unexpected mallctl()Érror");

41 
	`as£π_Ál£
(
e0
, "tcache should be disabled");

43 
	`‰ì
(
	`mÆloc
(1));

44 
e1
 = 
åue
;

45 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.tˇche.íabÀd", (*)&
e0
, &
sz
,

46 (*)&
e1
, 
sz
), 0, "Unexpected mallctl()Érror");

47 
	`as£π_åue
(
e0
, "tcache should beÉnabled");

49 
	`‰ì
(
	`mÆloc
(1));

50 
e1
 = 
Ál£
;

51 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.tˇche.íabÀd", (*)&
e0
, &
sz
,

52 (*)&
e1
, 
sz
), 0, "Unexpected mallctl()Érror");

53 
	`as£π_åue
(
e0
, "tcache should beÉnabled");

55 
	`‰ì
(
	`mÆloc
(1));

56 
e1
 = 
Ál£
;

57 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.tˇche.íabÀd", (*)&
e0
, &
sz
,

58 (*)&
e1
, 
sz
), 0, "Unexpected mallctl()Érror");

59 
	`as£π_Ál£
(
e0
, "tcache should be disabled");

61 
	`‰ì
(
	`mÆloc
(1));

62  
NULL
;

63 
	`ã°_skù
("\"thread.tcache.enabled\" mallctlÇotávailable");

64  
NULL
;

65 
	}
}

67 
	$TEST_BEGIN
(
ã°_maö_thªad
) {

68 
	`thd_°¨t
(
NULL
);

69 
	}
}

70 
TEST_END


72 
	$TEST_BEGIN
(
ã°_subthªad
) {

73 
thd_t
 
thd
;

75 
	`thd_¸óã
(&
thd
, 
thd_°¨t
, 
NULL
);

76 
	`thd_joö
(
thd
, 
NULL
);

77 
	}
}

78 
TEST_END


81 
	$maö
() {

83  
	`ã°
(

84 
ã°_maö_thªad
,

85 
ã°_subthªad
,

86 
ã°_maö_thªad
,

87 
ã°_subthªad
,

88 
ã°_maö_thªad
);

89 
	}
}

	@test/integration/xallocx.c

1 
	~"ã°/jemÆloc_ã°.h
"

9 
	$¨ía_öd
() {

10 
öd
 = 0;

12 i‡(
öd
 == 0) {

13 
size_t
 
sz
 = (
öd
);

14 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.¸óã", (*)&
öd
, &
sz
, 
NULL
,

18  
öd
;

19 
	}
}

21 
	$TEST_BEGIN
(
ã°_ßme_size
) {

22 *
p
;

23 
size_t
 
sz
, 
tsz
;

25 
p
 = 
	`mÆlocx
(42, 0);

26 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

27 
sz
 = 
	`ßŒocx
(
p
, 0);

29 
tsz
 = 
	`xÆlocx
(
p
, 
sz
, 0, 0);

30 
	`as£π_zu_eq
(
tsz
, 
sz
, "Unexpected size change: %zu --> %zu", sz,Åsz);

32 
	`dÆlocx
(
p
, 0);

33 
	}
}

34 
TEST_END


36 
	$TEST_BEGIN
(
ã°_exåa_no_move
) {

37 *
p
;

38 
size_t
 
sz
, 
tsz
;

40 
p
 = 
	`mÆlocx
(42, 0);

41 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

42 
sz
 = 
	`ßŒocx
(
p
, 0);

44 
tsz
 = 
	`xÆlocx
(
p
, 
sz
, sz-42, 0);

45 
	`as£π_zu_eq
(
tsz
, 
sz
, "Unexpected size change: %zu --> %zu", sz,Åsz);

47 
	`dÆlocx
(
p
, 0);

48 
	}
}

49 
TEST_END


51 
	$TEST_BEGIN
(
ã°_no_move_Áû
) {

52 *
p
;

53 
size_t
 
sz
, 
tsz
;

55 
p
 = 
	`mÆlocx
(42, 0);

56 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

57 
sz
 = 
	`ßŒocx
(
p
, 0);

59 
tsz
 = 
	`xÆlocx
(
p
, 
sz
 + 5, 0, 0);

60 
	`as£π_zu_eq
(
tsz
, 
sz
, "Unexpected size change: %zu --> %zu", sz,Åsz);

62 
	`dÆlocx
(
p
, 0);

63 
	}
}

64 
TEST_END


67 
	$gë_nsizes_im∂
(c⁄° *
cmd
) {

68 
ªt
;

69 
size_t
 
z
;

71 
z
 = ();

72 
	`as£π_d_eq
(
	`mÆl˘l
(
cmd
, (*)&
ªt
, &
z
, 
NULL
, 0), 0,

73 "U√x≥˘ed mÆl˘l(\"%s\", ...ËÁûuª", 
cmd
);

75  
ªt
;

76 
	}
}

79 
	$gë_nsmÆl
() {

80  
	`gë_nsizes_im∂
("arenas.nbins");

81 
	}
}

84 
	$gë_∆¨ge
() {

85  
	`gë_nsizes_im∂
("arenas.nlextents");

86 
	}
}

88 
size_t


89 
	$gë_size_im∂
(c⁄° *
cmd
, 
size_t
 
öd
) {

90 
size_t
 
ªt
;

91 
size_t
 
z
;

92 
size_t
 
mib
[4];

93 
size_t
 
mibÀn
 = 4;

95 
z
 = (
size_t
);

96 
	`as£π_d_eq
(
	`mÆl˘ amëomib
(
cmd
, 
mib
, &
mibÀn
),

97 0, "U√x≥˘ed mÆl˘ amëomib(\"%s\", ...ËÁûuª", 
cmd
);

98 
mib
[2] = 
öd
;

99 
z
 = (
size_t
);

100 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
ªt
, &
z
, 
NULL
, 0),

101 0, "U√x≥˘ed mÆl˘lbymib([\"%s\", %zu], ...ËÁûuª", 
cmd
, 
öd
);

103  
ªt
;

104 
	}
}

106 
size_t


107 
	$gë_smÆl_size
(
size_t
 
öd
) {

108  
	`gë_size_im∂
("¨ías.bö.0.size", 
öd
);

109 
	}
}

111 
size_t


112 
	$gë_œrge_size
(
size_t
 
öd
) {

113  
	`gë_size_im∂
("¨ías.Àxã¡.0.size", 
öd
);

114 
	}
}

116 
	$TEST_BEGIN
(
ã°_size
) {

117 
size_t
 
smÆl0
, 
œrgemax
;

118 *
p
;

121 
smÆl0
 = 
	`gë_smÆl_size
(0);

122 
œrgemax
 = 
	`gë_œrge_size
(
	`gë_∆¨ge
()-1);

124 
p
 = 
	`mÆlocx
(
smÆl0
, 0);

125 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

128 
	`as£π_zu_eq
(
	`xÆlocx
(
p
, 1, 0, 0), 
smÆl0
,

132 
	`as£π_zu_À
(
	`xÆlocx
(
p
, 
œrgemax
, 0, 0),Üargemax,

136 
	`as£π_zu_À
(
	`xÆlocx
(
p
, 
œrgemax
+1, 0, 0),Üargemax,

138 
	`as£π_zu_À
(
	`xÆlocx
(
p
, 
SIZE_T_MAX
, 0, 0), 
œrgemax
,

141 
	`dÆlocx
(
p
, 0);

142 
	}
}

143 
TEST_END


145 
	$TEST_BEGIN
(
ã°_size_exåa_ovîÊow
) {

146 
size_t
 
smÆl0
, 
œrgemax
;

147 *
p
;

150 
smÆl0
 = 
	`gë_smÆl_size
(0);

151 
œrgemax
 = 
	`gë_œrge_size
(
	`gë_∆¨ge
()-1);

153 
p
 = 
	`mÆlocx
(
smÆl0
, 0);

154 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

157 
	`as£π_zu_À
(
	`xÆlocx
(
p
, 
œrgemax
-1, 2, 0),Üargemax,

159 
	`as£π_zu_À
(
	`xÆlocx
(
p
, 
œrgemax
, 1, 0),Üargemax,

163 
	`as£π_zu_À
(
	`xÆlocx
(
p
, 
œrgemax
+1, 2, 0),Üargemax,

165 
	`as£π_zu_À
(
	`xÆlocx
(
p
, 
œrgemax
+2, 3, 0),Üargemax,

167 
	`as£π_zu_À
(
	`xÆlocx
(
p
, 
SIZE_T_MAX
-2, 2, 0), 
œrgemax
,

169 
	`as£π_zu_À
(
	`xÆlocx
(
p
, 
SIZE_T_MAX
-1, 1, 0), 
œrgemax
,

172 
	`dÆlocx
(
p
, 0);

173 
	}
}

174 
TEST_END


176 
	$TEST_BEGIN
(
ã°_exåa_smÆl
) {

177 
size_t
 
smÆl0
, 
smÆl1
, 
œrgemax
;

178 *
p
;

181 
smÆl0
 = 
	`gë_smÆl_size
(0);

182 
smÆl1
 = 
	`gë_smÆl_size
(1);

183 
œrgemax
 = 
	`gë_œrge_size
(
	`gë_∆¨ge
()-1);

185 
p
 = 
	`mÆlocx
(
smÆl0
, 0);

186 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

188 
	`as£π_zu_eq
(
	`xÆlocx
(
p
, 
smÆl1
, 0, 0), 
smÆl0
,

191 
	`as£π_zu_eq
(
	`xÆlocx
(
p
, 
smÆl1
, 0, 0), 
smÆl0
,

194 
	`as£π_zu_eq
(
	`xÆlocx
(
p
, 
smÆl0
, 
smÆl1
 - small0, 0), small0,

198 
	`as£π_zu_eq
(
	`xÆlocx
(
p
, 
smÆl0
, 
œrgemax
 - small0 + 1, 0), small0,

200 
	`as£π_zu_eq
(
	`xÆlocx
(
p
, 
smÆl0
, 
SIZE_T_MAX
 - small0, 0), small0,

203 
	`dÆlocx
(
p
, 0);

204 
	}
}

205 
TEST_END


207 
	$TEST_BEGIN
(
ã°_exåa_œrge
) {

208 
Êags
 = 
	`MALLOCX_ARENA
(
	`¨ía_öd
());

209 
size_t
 
smÆlmax
, 
œrge1
, 
œrge2
, 
œrge3
, 
œrgemax
;

210 *
p
;

213 
smÆlmax
 = 
	`gë_smÆl_size
(
	`gë_nsmÆl
()-1);

214 
œrge1
 = 
	`gë_œrge_size
(1);

215 
œrge2
 = 
	`gë_œrge_size
(2);

216 
œrge3
 = 
	`gë_œrge_size
(3);

217 
œrgemax
 = 
	`gë_œrge_size
(
	`gë_∆¨ge
()-1);

219 
p
 = 
	`mÆlocx
(
œrge3
, 
Êags
);

220 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

222 
	`as£π_zu_eq
(
	`xÆlocx
(
p
, 
œrge3
, 0, 
Êags
),Üarge3,

225 
	`as£π_zu_ge
(
	`xÆlocx
(
p
, 
œrge1
, 0, 
Êags
),Üarge1,

227 
	`as£π_zu_ge
(
	`xÆlocx
(
p
, 
smÆlmax
, 0, 
Êags
), 
œrge1
,

230 i‡(
	`xÆlocx
(
p
, 
œrge3
, 0, 
Êags
) !=Üarge3) {

231 
p
 = 
	`øŒocx
’, 
œrge3
, 
Êags
);

232 
	`as£π_±r_nŸ_nuŒ
(
p
, "UnexpectedÑallocx() failure");

235 
	`as£π_zu_eq
(
	`xÆlocx
(
p
, 
œrge1
, 
œrge3
 -Ü¨ge1, 
Êags
),Üarge3,

237 
	`as£π_zu_eq
(
	`xÆlocx
(
p
, 
œrge2
, 
œrge3
 -Ü¨ge2, 
Êags
),Üarge3,

239 
	`as£π_zu_ge
(
	`xÆlocx
(
p
, 
œrge1
, 
œrge2
 -Ü¨ge1, 
Êags
),Üarge2,

241 
	`as£π_zu_ge
(
	`xÆlocx
(
p
, 
smÆlmax
, 
œrge1
 - smÆlmax, 
Êags
),Üarge1,

244 
	`as£π_zu_ge
(
	`xÆlocx
(
p
, 
œrge1
, 0, 
Êags
),Üarge1,

247 
	`as£π_zu_À
(
	`xÆlocx
(
p
, 
œrge3
, 0, 
Êags
),Üarge3,

249 
	`as£π_zu_À
(
	`xÆlocx
(
p
, 
œrgemax
+1, 0, 
Êags
), 
œrge3
,

252 
	`as£π_zu_ge
(
	`xÆlocx
(
p
, 
œrge1
, 0, 
Êags
),Üarge1,

255 
	`as£π_zu_À
(
	`xÆlocx
(
p
, 
œrge1
, 
SIZE_T_MAX
 -Ü¨ge1, 
Êags
), 
œrgemax
,

258 
	`as£π_zu_ge
(
	`xÆlocx
(
p
, 
œrge1
, 0, 
Êags
),Üarge1,

261 
	`as£π_zu_À
(
	`xÆlocx
(
p
, 
œrge1
, 
œrge3
 -Ü¨ge1, 
Êags
),Üarge3,

264 i‡(
	`xÆlocx
(
p
, 
œrge3
, 0, 
Êags
) !=Üarge3) {

265 
p
 = 
	`øŒocx
’, 
œrge3
, 
Êags
);

266 
	`as£π_±r_nŸ_nuŒ
(
p
, "UnexpectedÑallocx() failure");

269 
	`as£π_zu_À
(
	`xÆlocx
(
p
, 
œrge3
, 
œrgemax
 -Ü¨ge3 + 1, 
Êags
),Üargemax,

272 
	`dÆlocx
(
p
, 
Êags
);

273 
	}
}

274 
TEST_END


277 
	$¥öt_fûÀd_exã¡s
(c⁄° *
p
, 
uöt8_t
 
c
, 
size_t
 
Àn
) {

278 c⁄° 
uöt8_t
 *
pc
 = (c⁄° uöt8_à*)
p
;

279 
size_t
 
i
, 
ønge0
;

280 
uöt8_t
 
c0
;

282 
	`mÆloc_¥ötf
("Ö=%p, c=%#x,Üí=%zu:", 
p
, 
c
, 
Àn
);

283 
ønge0
 = 0;

284 
c0
 = 
pc
[0];

285 
i
 = 0; i < 
Àn
; i++) {

286 i‡(
pc
[
i
] !
c0
) {

287 
	`mÆloc_¥ötf
(" %#x[%zu..%zu)", 
c0
, 
ønge0
, 
i
);

288 
ønge0
 = 
i
;

289 
c0
 = 
pc
[
i
];

292 
	`mÆloc_¥ötf
(" %#x[%zu..%zu)\n", 
c0
, 
ønge0
, 
i
);

293 
	}
}

295 
boﬁ


296 
	$vÆid©e_fûl
(c⁄° *
p
, 
uöt8_t
 
c
, 
size_t
 
off£t
, size_à
Àn
) {

297 c⁄° 
uöt8_t
 *
pc
 = (c⁄° uöt8_à*)
p
;

298 
boﬁ
 
îr
;

299 
size_t
 
i
;

301 
i
 = 
off£t
, 
îr
 = 
Ál£
; i < off£t+
Àn
; i++) {

302 i‡(
pc
[
i
] !
c
) {

303 
îr
 = 
åue
;

307 i‡(
îr
) {

308 
	`¥öt_fûÀd_exã¡s
(
p
, 
c
, 
off£t
 + 
Àn
);

311  
îr
;

312 
	}
}

315 
	$ã°_zîo
(
size_t
 
szmö
, size_à
szmax
) {

316 
Êags
 = 
	`MALLOCX_ARENA
(
	`¨ía_öd
()Ë| 
MALLOCX_ZERO
;

317 
size_t
 
sz
, 
nsz
;

318 *
p
;

319 
	#FILL_BYTE
 0x7aU

	)

321 
sz
 = 
szmax
;

322 
p
 = 
	`mÆlocx
(
sz
, 
Êags
);

323 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx()Érror");

324 
	`as£π_Ál£
(
	`vÆid©e_fûl
(
p
, 0x00, 0, 
sz
), "MemoryÇot filled: sz=%zu",

325 
sz
);

331 
	`mem£t
(
p
, 
FILL_BYTE
, 
sz
);

332 
	`as£π_Ál£
(
	`vÆid©e_fûl
(
p
, 
FILL_BYTE
, 0, 
sz
),

333 "Mem‹yÇŸ fûÀd: sz=%zu", 
sz
);

336 
sz
 = 
szmö
;

337 i‡(
	`xÆlocx
(
p
, 
sz
, 0, 
Êags
) != sz) {

338 
p
 = 
	`øŒocx
’, 
sz
, 
Êags
);

339 
	`as£π_±r_nŸ_nuŒ
(
p
, "UnexpectedÑallocx() failure");

341 
	`as£π_Ál£
(
	`vÆid©e_fûl
(
p
, 
FILL_BYTE
, 0, 
sz
),

342 "Mem‹yÇŸ fûÀd: sz=%zu", 
sz
);

344 
sz
 = 
szmö
; sz < 
szmax
; sz = 
nsz
) {

345 
nsz
 = 
	`«Œocx
(
sz
+1, 
Êags
);

346 i‡(
	`xÆlocx
(
p
, 
sz
+1, 0, 
Êags
Ë!
nsz
) {

347 
p
 = 
	`øŒocx
’, 
sz
+1, 
Êags
);

348 
	`as£π_±r_nŸ_nuŒ
(
p
, "UnexpectedÑallocx() failure");

350 
	`as£π_Ál£
(
	`vÆid©e_fûl
(
p
, 
FILL_BYTE
, 0, 
sz
),

351 "Mem‹yÇŸ fûÀd: sz=%zu", 
sz
);

352 
	`as£π_Ál£
(
	`vÆid©e_fûl
(
p
, 0x00, 
sz
, 
nsz
-sz),

353 "Mem‹yÇŸ fûÀd: sz=%zu,Çsz-sz=%zu", 
sz
, 
nsz
-sz);

354 
	`mem£t
((*)((
uöçå_t
)
p
 + 
sz
), 
FILL_BYTE
, 
nsz
-sz);

355 
	`as£π_Ál£
(
	`vÆid©e_fûl
(
p
, 
FILL_BYTE
, 0, 
nsz
),

356 "Mem‹yÇŸ fûÀd:Çsz=%zu", 
nsz
);

359 
	`dÆlocx
(
p
, 
Êags
);

360 
	}
}

362 
	$TEST_BEGIN
(
ã°_zîo_œrge
) {

363 
size_t
 
œrge0
, 
œrge1
;

366 
œrge0
 = 
	`gë_œrge_size
(0);

367 
œrge1
 = 
	`gë_œrge_size
(1);

369 
	`ã°_zîo
(
œrge1
, 
œrge0
 * 2);

370 
	}
}

371 
TEST_END


374 
	$maö
() {

375  
	`ã°
(

376 
ã°_ßme_size
,

377 
ã°_exåa_no_move
,

378 
ã°_no_move_Áû
,

379 
ã°_size
,

380 
ã°_size_exåa_ovîÊow
,

381 
ã°_exåa_smÆl
,

382 
ã°_exåa_œrge
,

383 
ã°_zîo_œrge
);

384 
	}
}

	@test/src/SFMT.c

48 
	#SFMT_C_


	)

49 
	~"ã°/jemÆloc_ã°.h
"

50 
	~"ã°/SFMT-∑øms.h
"

52 #i‡
deföed
(
JEMALLOC_BIG_ENDIAN
Ë&& !deföed(
BIG_ENDIAN64
)

53 
	#BIG_ENDIAN64
 1

	)

55 #i‡
deföed
(
__BIG_ENDIAN__
Ë&& !deföed(
__amd64
Ë&& !deföed(
BIG_ENDIAN64
)

56 
	#BIG_ENDIAN64
 1

	)

58 #i‡
deföed
(
HAVE_ALTIVEC
Ë&& !deföed(
BIG_ENDIAN64
)

59 
	#BIG_ENDIAN64
 1

	)

61 #i‡
deföed
(
ONLY64
Ë&& !deföed(
BIG_ENDIAN64
)

62 #i‡
deföed
(
__GNUC__
)

65 #unde‡
ONLY64


70 #i‡
deföed
(
HAVE_ALTIVEC
)

72 
	uW128_T
 {

73 
ve˘‹
 
	ms
;

74 
uöt32_t
 
	mu
[4];

77 
W128_T
 
	tw128_t
;

79 #ñi‡
deföed
(
HAVE_SSE2
)

81 
	uW128_T
 {

82 
__m128i
 
	msi
;

83 
uöt32_t
 
	mu
[4];

86 
W128_T
 
	tw128_t
;

91 
	sW128_T
 {

92 
uöt32_t
 
	mu
[4];

95 
W128_T
 
	tw128_t
;

99 
	ssfmt_s
 {

101 
w128_t
 
	msfmt
[
N
];

103 
	midx
;

106 
	möôülized
;

115 
uöt32_t
 
	g∑rôy
[4] = {
PARITY1
, 
PARITY2
, 
PARITY3
, 
PARITY4
};

120 
ölöe
 
idxof
(
i
);

121 #i‡(!
deföed
(
HAVE_ALTIVEC
)Ë&& (!deföed(
HAVE_SSE2
))

122 
ölöe
 
rshi·128
(
w128_t
 *
out
, w128_àc⁄° *
ö
, 
shi·
);

123 
ölöe
 
lshi·128
(
w128_t
 *
out
, w128_àc⁄° *
ö
, 
shi·
);

125 
ölöe
 
gí_ønd_Æl
(
sfmt_t
 *
˘x
);

126 
ölöe
 
gí_ønd_¨øy
(
sfmt_t
 *
˘x
, 
w128_t
 *
¨øy
, 
size
);

127 
ölöe
 
uöt32_t
 
func1
(uöt32_à
x
);

128 
ölöe
 
uöt32_t
 
func2
(uöt32_à
x
);

129 
≥riod_˚πifiˇti⁄
(
sfmt_t
 *
˘x
);

130 #i‡
deföed
(
BIG_ENDIAN64
Ë&& !deföed(
ONLY64
)

131 
ölöe
 
sw≠
(
w128_t
 *
¨øy
, 
size
);

134 #i‡
deföed
(
HAVE_ALTIVEC
)

135 
	~"ã°/SFMT-Æti.h
"

136 #ñi‡
deföed
(
HAVE_SSE2
)

137 
	~"ã°/SFMT-s£2.h
"

144 #ifde‡
ONLY64


145 
ölöe
 
	$idxof
(
i
) {

146  
i
 ^ 1;

147 
	}
}

149 
ölöe
 
	$idxof
(
i
) {

150  
i
;

151 
	}
}

161 #i‡(!
deföed
(
HAVE_ALTIVEC
)Ë&& (!deföed(
HAVE_SSE2
))

162 #ifde‡
ONLY64


163 
ölöe
 
	$rshi·128
(
w128_t
 *
out
, w128_àc⁄° *
ö
, 
shi·
) {

164 
uöt64_t
 
th
, 
é
, 
oh
, 
ﬁ
;

166 
th
 = ((
uöt64_t
)
ö
->
u
[2] << 32) | ((uint64_t)in->u[3]);

167 
é
 = ((
uöt64_t
)
ö
->
u
[0] << 32) | ((uint64_t)in->u[1]);

169 
oh
 = 
th
 >> (
shi·
 * 8);

170 
ﬁ
 = 
é
 >> (
shi·
 * 8);

171 
ﬁ
 |
th
 << (64 - 
shi·
 * 8);

172 
out
->
u
[0] = (
uöt32_t
)(
ﬁ
 >> 32);

173 
out
->
u
[1] = (
uöt32_t
)
ﬁ
;

174 
out
->
u
[2] = (
uöt32_t
)(
oh
 >> 32);

175 
out
->
u
[3] = (
uöt32_t
)
oh
;

176 
	}
}

178 
ölöe
 
	$rshi·128
(
w128_t
 *
out
, w128_àc⁄° *
ö
, 
shi·
) {

179 
uöt64_t
 
th
, 
é
, 
oh
, 
ﬁ
;

181 
th
 = ((
uöt64_t
)
ö
->
u
[3] << 32) | ((uint64_t)in->u[2]);

182 
é
 = ((
uöt64_t
)
ö
->
u
[1] << 32) | ((uint64_t)in->u[0]);

184 
oh
 = 
th
 >> (
shi·
 * 8);

185 
ﬁ
 = 
é
 >> (
shi·
 * 8);

186 
ﬁ
 |
th
 << (64 - 
shi·
 * 8);

187 
out
->
u
[1] = (
uöt32_t
)(
ﬁ
 >> 32);

188 
out
->
u
[0] = (
uöt32_t
)
ﬁ
;

189 
out
->
u
[3] = (
uöt32_t
)(
oh
 >> 32);

190 
out
->
u
[2] = (
uöt32_t
)
oh
;

191 
	}
}

201 #ifde‡
ONLY64


202 
ölöe
 
	$lshi·128
(
w128_t
 *
out
, w128_àc⁄° *
ö
, 
shi·
) {

203 
uöt64_t
 
th
, 
é
, 
oh
, 
ﬁ
;

205 
th
 = ((
uöt64_t
)
ö
->
u
[2] << 32) | ((uint64_t)in->u[3]);

206 
é
 = ((
uöt64_t
)
ö
->
u
[0] << 32) | ((uint64_t)in->u[1]);

208 
oh
 = 
th
 << (
shi·
 * 8);

209 
ﬁ
 = 
é
 << (
shi·
 * 8);

210 
oh
 |
é
 >> (64 - 
shi·
 * 8);

211 
out
->
u
[0] = (
uöt32_t
)(
ﬁ
 >> 32);

212 
out
->
u
[1] = (
uöt32_t
)
ﬁ
;

213 
out
->
u
[2] = (
uöt32_t
)(
oh
 >> 32);

214 
out
->
u
[3] = (
uöt32_t
)
oh
;

215 
	}
}

217 
ölöe
 
	$lshi·128
(
w128_t
 *
out
, w128_àc⁄° *
ö
, 
shi·
) {

218 
uöt64_t
 
th
, 
é
, 
oh
, 
ﬁ
;

220 
th
 = ((
uöt64_t
)
ö
->
u
[3] << 32) | ((uint64_t)in->u[2]);

221 
é
 = ((
uöt64_t
)
ö
->
u
[1] << 32) | ((uint64_t)in->u[0]);

223 
oh
 = 
th
 << (
shi·
 * 8);

224 
ﬁ
 = 
é
 << (
shi·
 * 8);

225 
oh
 |
é
 >> (64 - 
shi·
 * 8);

226 
out
->
u
[1] = (
uöt32_t
)(
ﬁ
 >> 32);

227 
out
->
u
[0] = (
uöt32_t
)
ﬁ
;

228 
out
->
u
[3] = (
uöt32_t
)(
oh
 >> 32);

229 
out
->
u
[2] = (
uöt32_t
)
oh
;

230 
	}
}

242 #i‡(!
deföed
(
HAVE_ALTIVEC
)Ë&& (!deföed(
HAVE_SSE2
))

243 #ifde‡
ONLY64


244 
ölöe
 
	$do_ªcursi⁄
(
w128_t
 *
r
, w128_à*
a
, w128_à*
b
, w128_à*
c
,

245 
w128_t
 *
d
) {

246 
w128_t
 
x
;

247 
w128_t
 
y
;

249 
	`lshi·128
(&
x
, 
a
, 
SL2
);

250 
	`rshi·128
(&
y
, 
c
, 
SR2
);

251 
r
->
u
[0] = 
a
->u[0] ^ 
x
.u[0] ^ ((
b
->u[0] >> 
SR1
Ë& 
MSK2
Ë^ 
y
.u[0]

252 ^ (
d
->
u
[0] << 
SL1
);

253 
r
->
u
[1] = 
a
->u[1] ^ 
x
.u[1] ^ ((
b
->u[1] >> 
SR1
Ë& 
MSK1
Ë^ 
y
.u[1]

254 ^ (
d
->
u
[1] << 
SL1
);

255 
r
->
u
[2] = 
a
->u[2] ^ 
x
.u[2] ^ ((
b
->u[2] >> 
SR1
Ë& 
MSK4
Ë^ 
y
.u[2]

256 ^ (
d
->
u
[2] << 
SL1
);

257 
r
->
u
[3] = 
a
->u[3] ^ 
x
.u[3] ^ ((
b
->u[3] >> 
SR1
Ë& 
MSK3
Ë^ 
y
.u[3]

258 ^ (
d
->
u
[3] << 
SL1
);

259 
	}
}

261 
ölöe
 
	$do_ªcursi⁄
(
w128_t
 *
r
, w128_à*
a
, w128_à*
b
, w128_à*
c
,

262 
w128_t
 *
d
) {

263 
w128_t
 
x
;

264 
w128_t
 
y
;

266 
	`lshi·128
(&
x
, 
a
, 
SL2
);

267 
	`rshi·128
(&
y
, 
c
, 
SR2
);

268 
r
->
u
[0] = 
a
->u[0] ^ 
x
.u[0] ^ ((
b
->u[0] >> 
SR1
Ë& 
MSK1
Ë^ 
y
.u[0]

269 ^ (
d
->
u
[0] << 
SL1
);

270 
r
->
u
[1] = 
a
->u[1] ^ 
x
.u[1] ^ ((
b
->u[1] >> 
SR1
Ë& 
MSK2
Ë^ 
y
.u[1]

271 ^ (
d
->
u
[1] << 
SL1
);

272 
r
->
u
[2] = 
a
->u[2] ^ 
x
.u[2] ^ ((
b
->u[2] >> 
SR1
Ë& 
MSK3
Ë^ 
y
.u[2]

273 ^ (
d
->
u
[2] << 
SL1
);

274 
r
->
u
[3] = 
a
->u[3] ^ 
x
.u[3] ^ ((
b
->u[3] >> 
SR1
Ë& 
MSK4
Ë^ 
y
.u[3]

275 ^ (
d
->
u
[3] << 
SL1
);

276 
	}
}

280 #i‡(!
deföed
(
HAVE_ALTIVEC
)Ë&& (!deföed(
HAVE_SSE2
))

285 
ölöe
 
	$gí_ønd_Æl
(
sfmt_t
 *
˘x
) {

286 
i
;

287 
w128_t
 *
r1
, *
r2
;

289 
r1
 = &
˘x
->
sfmt
[
N
 - 2];

290 
r2
 = &
˘x
->
sfmt
[
N
 - 1];

291 
i
 = 0; i < 
N
 - 
POS1
; i++) {

292 
	`do_ªcursi⁄
(&
˘x
->
sfmt
[
i
], &˘x->sfmt[i], &˘x->sfmt[ò+ 
POS1
], 
r1
,

293 
r2
);

294 
r1
 = 
r2
;

295 
r2
 = &
˘x
->
sfmt
[
i
];

297 ; 
i
 < 
N
; i++) {

298 
	`do_ªcursi⁄
(&
˘x
->
sfmt
[
i
], &˘x->sfmt[i], &˘x->sfmt[ò+ 
POS1
 - 
N
], 
r1
,

299 
r2
);

300 
r1
 = 
r2
;

301 
r2
 = &
˘x
->
sfmt
[
i
];

303 
	}
}

312 
ölöe
 
	$gí_ønd_¨øy
(
sfmt_t
 *
˘x
, 
w128_t
 *
¨øy
, 
size
) {

313 
i
, 
j
;

314 
w128_t
 *
r1
, *
r2
;

316 
r1
 = &
˘x
->
sfmt
[
N
 - 2];

317 
r2
 = &
˘x
->
sfmt
[
N
 - 1];

318 
i
 = 0; i < 
N
 - 
POS1
; i++) {

319 
	`do_ªcursi⁄
(&
¨øy
[
i
], &
˘x
->
sfmt
[i], &˘x->sfmt[ò+ 
POS1
], 
r1
, 
r2
);

320 
r1
 = 
r2
;

321 
r2
 = &
¨øy
[
i
];

323 ; 
i
 < 
N
; i++) {

324 
	`do_ªcursi⁄
(&
¨øy
[
i
], &
˘x
->
sfmt
[i], &¨øy[ò+ 
POS1
 - 
N
], 
r1
, 
r2
);

325 
r1
 = 
r2
;

326 
r2
 = &
¨øy
[
i
];

328 ; 
i
 < 
size
 - 
N
; i++) {

329 
	`do_ªcursi⁄
(&
¨øy
[
i
], &¨øy[ò- 
N
], &¨øy[ò+ 
POS1
 - N], 
r1
, 
r2
);

330 
r1
 = 
r2
;

331 
r2
 = &
¨øy
[
i
];

333 
j
 = 0; j < 2 * 
N
 - 
size
; j++) {

334 
˘x
->
sfmt
[
j
] = 
¨øy
[j + 
size
 - 
N
];

336 ; 
i
 < 
size
; i++, 
j
++) {

337 
	`do_ªcursi⁄
(&
¨øy
[
i
], &¨øy[ò- 
N
], &¨øy[ò+ 
POS1
 - N], 
r1
, 
r2
);

338 
r1
 = 
r2
;

339 
r2
 = &
¨øy
[
i
];

340 
˘x
->
sfmt
[
j
] = 
¨øy
[
i
];

342 
	}
}

345 #i‡
deföed
(
BIG_ENDIAN64
Ë&& !deföed(
ONLY64
Ë&& !deföed(
HAVE_ALTIVEC
)

346 
ölöe
 
	$sw≠
(
w128_t
 *
¨øy
, 
size
) {

347 
i
;

348 
uöt32_t
 
x
, 
y
;

350 
i
 = 0; i < 
size
; i++) {

351 
x
 = 
¨øy
[
i
].
u
[0];

352 
y
 = 
¨øy
[
i
].
u
[2];

353 
¨øy
[
i
].
u
[0] =árray[i].u[1];

354 
¨øy
[
i
].
u
[2] =árray[i].u[3];

355 
¨øy
[
i
].
u
[1] = 
x
;

356 
¨øy
[
i
].
u
[3] = 
y
;

358 
	}
}

366 
uöt32_t
 
	$func1
(
uöt32_t
 
x
) {

367  (
x
 ^ (x >> 27)Ë* (
uöt32_t
)1664525UL;

368 
	}
}

376 
uöt32_t
 
	$func2
(
uöt32_t
 
x
) {

377  (
x
 ^ (x >> 27)Ë* (
uöt32_t
)1566083941UL;

378 
	}
}

383 
	$≥riod_˚πifiˇti⁄
(
sfmt_t
 *
˘x
) {

384 
ö√r
 = 0;

385 
i
, 
j
;

386 
uöt32_t
 
w‹k
;

387 
uöt32_t
 *
psfmt32
 = &
˘x
->
sfmt
[0].
u
[0];

389 
i
 = 0; i < 4; i++)

390 
ö√r
 ^
psfmt32
[
	`idxof
(
i
)] & 
∑rôy
[i];

391 
i
 = 16; i > 0; i >>= 1)

392 
ö√r
 ^ö√∏>> 
i
;

393 
ö√r
 &= 1;

395 i‡(
ö√r
 == 1) {

399 
i
 = 0; i < 4; i++) {

400 
w‹k
 = 1;

401 
j
 = 0; j < 32; j++) {

402 i‡((
w‹k
 & 
∑rôy
[
i
]) != 0) {

403 
psfmt32
[
	`idxof
(
i
)] ^
w‹k
;

406 
w‹k
 = work << 1;

409 
	}
}

419 c⁄° *
	$gë_id°rög
() {

420  
IDSTR
;

421 
	}
}

428 
	$gë_mö_¨øy_size32
() {

429  
N32
;

430 
	}
}

437 
	$gë_mö_¨øy_size64
() {

438  
N64
;

439 
	}
}

441 #i‚de‡
ONLY64


447 
uöt32_t
 
	$gí_ønd32
(
sfmt_t
 *
˘x
) {

448 
uöt32_t
 
r
;

449 
uöt32_t
 *
psfmt32
 = &
˘x
->
sfmt
[0].
u
[0];

451 
	`as£π
(
˘x
->
öôülized
);

452 i‡(
˘x
->
idx
 >
N32
) {

453 
	`gí_ønd_Æl
(
˘x
);

454 
˘x
->
idx
 = 0;

456 
r
 = 
psfmt32
[
˘x
->
idx
++];

457  
r
;

458 
	}
}

461 
uöt32_t
 
	$gí_ønd32_ønge
(
sfmt_t
 *
˘x
, 
uöt32_t
 
limô
) {

462 
uöt32_t
 
ªt
, 
above
;

464 
above
 = 0xffffffffU - (0xffffffffU % 
limô
);

466 
ªt
 = 
	`gí_ønd32
(
˘x
);

467 i‡(
ªt
 < 
above
) {

468 
ªt
 %
limô
;

472  
ªt
;

473 
	}
}

482 
uöt64_t
 
	$gí_ønd64
(
sfmt_t
 *
˘x
) {

483 #i‡
	`deföed
(
BIG_ENDIAN64
Ë&& !deföed(
ONLY64
)

484 
uöt32_t
 
r1
, 
r2
;

485 
uöt32_t
 *
psfmt32
 = &
˘x
->
sfmt
[0].
u
[0];

487 
uöt64_t
 
r
;

488 
uöt64_t
 *
psfmt64
 = (uöt64_à*)&
˘x
->
sfmt
[0].
u
[0];

491 
	`as£π
(
˘x
->
öôülized
);

492 
	`as£π
(
˘x
->
idx
 % 2 == 0);

494 i‡(
˘x
->
idx
 >
N32
) {

495 
	`gí_ønd_Æl
(
˘x
);

496 
˘x
->
idx
 = 0;

498 #i‡
	`deföed
(
BIG_ENDIAN64
Ë&& !deföed(
ONLY64
)

499 
r1
 = 
psfmt32
[
˘x
->
idx
];

500 
r2
 = 
psfmt32
[
˘x
->
idx
 + 1];

501 
˘x
->
idx
 += 2;

502  ((
uöt64_t
)
r2
 << 32Ë| 
r1
;

504 
r
 = 
psfmt64
[
˘x
->
idx
 / 2];

505 
˘x
->
idx
 += 2;

506  
r
;

508 
	}
}

511 
uöt64_t
 
	$gí_ønd64_ønge
(
sfmt_t
 *
˘x
, 
uöt64_t
 
limô
) {

512 
uöt64_t
 
ªt
, 
above
;

514 
above
 = 
	`KQU
(0xffffffffffffffffË- (KQU(0xffffffffffffffffË% 
limô
);

516 
ªt
 = 
	`gí_ønd64
(
˘x
);

517 i‡(
ªt
 < 
above
) {

518 
ªt
 %
limô
;

522  
ªt
;

523 
	}
}

525 #i‚de‡
ONLY64


551 
	$fûl_¨øy32
(
sfmt_t
 *
˘x
, 
uöt32_t
 *
¨øy
, 
size
) {

552 
	`as£π
(
˘x
->
öôülized
);

553 
	`as£π
(
˘x
->
idx
 =
N32
);

554 
	`as£π
(
size
 % 4 == 0);

555 
	`as£π
(
size
 >
N32
);

557 
	`gí_ønd_¨øy
(
˘x
, (
w128_t
 *)
¨øy
, 
size
 / 4);

558 
˘x
->
idx
 = 
N32
;

559 
	}
}

587 
	$fûl_¨øy64
(
sfmt_t
 *
˘x
, 
uöt64_t
 *
¨øy
, 
size
) {

588 
	`as£π
(
˘x
->
öôülized
);

589 
	`as£π
(
˘x
->
idx
 =
N32
);

590 
	`as£π
(
size
 % 2 == 0);

591 
	`as£π
(
size
 >
N64
);

593 
	`gí_ønd_¨øy
(
˘x
, (
w128_t
 *)
¨øy
, 
size
 / 2);

594 
˘x
->
idx
 = 
N32
;

596 #i‡
	`deföed
(
BIG_ENDIAN64
Ë&& !deföed(
ONLY64
)

597 
	`sw≠
((
w128_t
 *)
¨øy
, 
size
 /2);

599 
	}
}

607 
sfmt_t
 *
	$öô_gí_ønd
(
uöt32_t
 
£ed
) {

608 *
p
;

609 
sfmt_t
 *
˘x
;

610 
i
;

611 
uöt32_t
 *
psfmt32
;

613 i‡(
	`posix_memÆign
(&
p
, (
w128_t
), (
sfmt_t
)) != 0) {

614  
NULL
;

616 
˘x
 = (
sfmt_t
 *)
p
;

617 
psfmt32
 = &
˘x
->
sfmt
[0].
u
[0];

619 
psfmt32
[
	`idxof
(0)] = 
£ed
;

620 
i
 = 1; i < 
N32
; i++) {

621 
psfmt32
[
	`idxof
(
i
)] = 1812433253UL * (psfmt32[idxof(i - 1)]

622 ^ (
psfmt32
[
	`idxof
(
i
 - 1)] >> 30))

623 + 
i
;

625 
˘x
->
idx
 = 
N32
;

626 
	`≥riod_˚πifiˇti⁄
(
˘x
);

627 
˘x
->
öôülized
 = 1;

629  
˘x
;

630 
	}
}

638 
sfmt_t
 *
	$öô_by_¨øy
(
uöt32_t
 *
öô_key
, 
key_Àngth
) {

639 *
p
;

640 
sfmt_t
 *
˘x
;

641 
i
, 
j
, 
cou¡
;

642 
uöt32_t
 
r
;

643 
œg
;

644 
mid
;

645 
size
 = 
N
 * 4;

646 
uöt32_t
 *
psfmt32
;

648 i‡(
	`posix_memÆign
(&
p
, (
w128_t
), (
sfmt_t
)) != 0) {

649  
NULL
;

651 
˘x
 = (
sfmt_t
 *)
p
;

652 
psfmt32
 = &
˘x
->
sfmt
[0].
u
[0];

654 i‡(
size
 >= 623) {

655 
œg
 = 11;

656 } i‡(
size
 >= 68) {

657 
œg
 = 7;

658 } i‡(
size
 >= 39) {

659 
œg
 = 5;

661 
œg
 = 3;

663 
mid
 = (
size
 - 
œg
) / 2;

665 
	`mem£t
(
˘x
->
sfmt
, 0x8b, (ctx->sfmt));

666 i‡(
key_Àngth
 + 1 > 
N32
) {

667 
cou¡
 = 
key_Àngth
 + 1;

669 
cou¡
 = 
N32
;

671 
r
 = 
	`func1
(
psfmt32
[
	`idxof
(0)] ^Ösfmt32[idxof(
mid
)]

672 ^ 
psfmt32
[
	`idxof
(
N32
 - 1)]);

673 
psfmt32
[
	`idxof
(
mid
)] +
r
;

674 
r
 +
key_Àngth
;

675 
psfmt32
[
	`idxof
(
mid
 + 
œg
)] +
r
;

676 
psfmt32
[
	`idxof
(0)] = 
r
;

678 
cou¡
--;

679 
i
 = 1, 
j
 = 0; (j < 
cou¡
Ë&& (j < 
key_Àngth
); j++) {

680 
r
 = 
	`func1
(
psfmt32
[
	`idxof
(
i
)] ^Ösfmt32[idxof((ò+ 
mid
Ë% 
N32
)]

681 ^ 
psfmt32
[
	`idxof
((
i
 + 
N32
 - 1) % N32)]);

682 
psfmt32
[
	`idxof
((
i
 + 
mid
Ë% 
N32
)] +
r
;

683 
r
 +
öô_key
[
j
] + 
i
;

684 
psfmt32
[
	`idxof
((
i
 + 
mid
 + 
œg
Ë% 
N32
)] +
r
;

685 
psfmt32
[
	`idxof
(
i
)] = 
r
;

686 
i
 = (ò+ 1Ë% 
N32
;

688 ; 
j
 < 
cou¡
; j++) {

689 
r
 = 
	`func1
(
psfmt32
[
	`idxof
(
i
)] ^Ösfmt32[idxof((ò+ 
mid
Ë% 
N32
)]

690 ^ 
psfmt32
[
	`idxof
((
i
 + 
N32
 - 1) % N32)]);

691 
psfmt32
[
	`idxof
((
i
 + 
mid
Ë% 
N32
)] +
r
;

692 
r
 +
i
;

693 
psfmt32
[
	`idxof
((
i
 + 
mid
 + 
œg
Ë% 
N32
)] +
r
;

694 
psfmt32
[
	`idxof
(
i
)] = 
r
;

695 
i
 = (ò+ 1Ë% 
N32
;

697 
j
 = 0; j < 
N32
; j++) {

698 
r
 = 
	`func2
(
psfmt32
[
	`idxof
(
i
)] +Ösfmt32[idxof((ò+ 
mid
Ë% 
N32
)]

699 + 
psfmt32
[
	`idxof
((
i
 + 
N32
 - 1) % N32)]);

700 
psfmt32
[
	`idxof
((
i
 + 
mid
Ë% 
N32
)] ^
r
;

701 
r
 -
i
;

702 
psfmt32
[
	`idxof
((
i
 + 
mid
 + 
œg
Ë% 
N32
)] ^
r
;

703 
psfmt32
[
	`idxof
(
i
)] = 
r
;

704 
i
 = (ò+ 1Ë% 
N32
;

707 
˘x
->
idx
 = 
N32
;

708 
	`≥riod_˚πifiˇti⁄
(
˘x
);

709 
˘x
->
öôülized
 = 1;

711  
˘x
;

712 
	}
}

714 
	$föi_gí_ønd
(
sfmt_t
 *
˘x
) {

715 
	`as£π
(
˘x
 !
NULL
);

717 
˘x
->
öôülized
 = 0;

718 
	`‰ì
(
˘x
);

719 
	}
}

	@test/src/btalloc.c

1 
	~"ã°/jemÆloc_ã°.h
"

4 
	$bèŒoc
(
size_t
 
size
, 
bôs
) {

5  
	`bèŒoc_0
(
size
, 
bôs
);

6 
	}
}

	@test/src/btalloc_0.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
bèŒoc_n_gí
(0)

	@test/src/btalloc_1.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
bèŒoc_n_gí
(1)

	@test/src/math.c

1 
	#MATH_C_


	)

2 
	~"ã°/jemÆloc_ã°.h
"

	@test/src/mq.c

1 
	~"ã°/jemÆloc_ã°.h
"

8 
	$mq_«no¶ìp
(
ns
) {

9 
	`as£π
(
ns
 <= 1000*1000*1000);

11 #ifde‡
_WIN32


12 
	`SÀï
(
ns
 / 1000);

15 
time•ec
 
timeout
;

17 i‡(
ns
 < 1000*1000*1000) {

18 
timeout
.
tv_£c
 = 0;

19 
timeout
.
tv_n£c
 = 
ns
;

21 
timeout
.
tv_£c
 = 1;

22 
timeout
.
tv_n£c
 = 0;

24 
	`«no¶ìp
(&
timeout
, 
NULL
);

27 
	}
}

	@test/src/mtx.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 #i‚de‡
_CRT_SPINCOUNT


4 
	#_CRT_SPINCOUNT
 4000

	)

7 
boﬁ


8 
	$mtx_öô
(
mtx_t
 *
mtx
) {

9 #ifde‡
_WIN32


10 i‡(!
	`InôülizeCrôiˇlSe˘i⁄AndSpöCou¡
(&
mtx
->
lock
,

11 
_CRT_SPINCOUNT
)) {

12  
åue
;

14 #ñi‡(
	`deföed
(
JEMALLOC_OS_UNFAIR_LOCK
))

15 
mtx
->
lock
 = 
OS_UNFAIR_LOCK_INIT
;

16 #ñi‡(
	`deföed
(
JEMALLOC_OSSPIN
))

17 
mtx
->
lock
 = 0;

19 
±hªad_muãx©å_t
 
©å
;

21 i‡(
	`±hªad_muãx©å_öô
(&
©å
) != 0) {

22  
åue
;

24 
	`±hªad_muãx©å_£ây≥
(&
©å
, 
PTHREAD_MUTEX_DEFAULT
);

25 i‡(
	`±hªad_muãx_öô
(&
mtx
->
lock
, &
©å
) != 0) {

26 
	`±hªad_muãx©å_de°roy
(&
©å
);

27  
åue
;

29 
	`±hªad_muãx©å_de°roy
(&
©å
);

31  
Ál£
;

32 
	}
}

35 
	$mtx_föi
(
mtx_t
 *
mtx
) {

36 #ifde‡
_WIN32


37 #ñi‡(
	`deföed
(
JEMALLOC_OS_UNFAIR_LOCK
))

38 #ñi‡(
	`deföed
(
JEMALLOC_OSSPIN
))

40 
	`±hªad_muãx_de°roy
(&
mtx
->
lock
);

42 
	}
}

45 
	$mtx_lock
(
mtx_t
 *
mtx
) {

46 #ifde‡
_WIN32


47 
	`E¡îCrôiˇlSe˘i⁄
(&
mtx
->
lock
);

48 #ñi‡(
	`deföed
(
JEMALLOC_OS_UNFAIR_LOCK
))

49 
	`os_unÁú_lock_lock
(&
mtx
->
lock
);

50 #ñi‡(
	`deföed
(
JEMALLOC_OSSPIN
))

51 
	`OSSpöLockLock
(&
mtx
->
lock
);

53 
	`±hªad_muãx_lock
(&
mtx
->
lock
);

55 
	}
}

58 
	$mtx_u∆ock
(
mtx_t
 *
mtx
) {

59 #ifde‡
_WIN32


60 
	`LóveCrôiˇlSe˘i⁄
(&
mtx
->
lock
);

61 #ñi‡(
	`deföed
(
JEMALLOC_OS_UNFAIR_LOCK
))

62 
	`os_unÁú_lock_u∆ock
(&
mtx
->
lock
);

63 #ñi‡(
	`deföed
(
JEMALLOC_OSSPIN
))

64 
	`OSSpöLockU∆ock
(&
mtx
->
lock
);

66 
	`±hªad_muãx_u∆ock
(&
mtx
->
lock
);

68 
	}
}

	@test/src/test.c

1 
	~"ã°/jemÆloc_ã°.h
"

5 
	gã°_cou¡
 = 0;

6 
ã°_°©us_t
 
	gã°_cou¡s
[
ã°_°©us_cou¡
] = {0, 0, 0};

7 
ã°_°©us_t
 
	gã°_°©us
 = 
ã°_°©us_∑ss
;

8 c⁄° * 
	gã°_«me
 = "";

12 
	#NUM_REENTRANT_ALLOCS
 20

	)

14 
	mn⁄_ªíå™t
 = 0,

15 
	mlibc_ªíå™t
 = 1,

16 
	m¨ía_√w_ªíå™t
 = 2

17 } 
	tªíå™cy_t
;

18 
ªíå™cy_t
 
	gªíå™cy
;

20 
boﬁ
 
	glibc_hook_øn
 = 
Ál£
;

21 
boﬁ
 
	g¨ía_√w_hook_øn
 = 
Ál£
;

24 
	$ªíå™cy_t_°r
(
ªíå™cy_t
 
r
) {

25 
r
) {

26 
n⁄_ªíå™t
:

28 
libc_ªíå™t
:

30 
¨ía_√w_ªíå™t
:

33 
	`uƒóchabÀ
();

35 
	}
}

38 
do_hook
(
boﬁ
 *
hook_øn
, (**
hook
)()) {

39 *
hook_øn
 = 
åue
;

40 *
hook
 = 
NULL
;

42 
size_t
 
Æloc_size
 = 1;

43 
i
 = 0; i < 
NUM_REENTRANT_ALLOCS
; i++) {

44 
	`‰ì
(
	`mÆloc
(
Æloc_size
));

45 
Æloc_size
 *= 2;

47 
	}
}

50 
	$libc_ªíå™cy_hook
() {

51 
	`do_hook
(&
libc_hook_øn
, &
hooks_libc_hook
);

52 
	}
}

55 
	$¨ía_√w_ªíå™cy_hook
() {

56 
	`do_hook
(&
¨ía_√w_hook_øn
, &
hooks_¨ía_√w_hook
);

57 
	}
}

60 
boﬁ


61 
	$ã°_is_ªíå™t
() {

62  
ªíå™cy
 !
n⁄_ªíå™t
;

63 
	}
}

65 
	$JEMALLOC_FORMAT_PRINTF
(1, 2)

67 
	$ã°_skù
(c⁄° *
f‹m©
, ...) {

68 
va_li°
 
≠
;

70 
	`va_°¨t
(
≠
, 
f‹m©
);

71 
	`mÆloc_v˝rötf
(
NULL
, NULL, 
f‹m©
, 
≠
);

72 
	`va_íd
(
≠
);

73 
	`mÆloc_¥ötf
("\n");

74 
ã°_°©us
 = 
ã°_°©us_skù
;

75 
	}
}

77 
	$JEMALLOC_FORMAT_PRINTF
(1, 2)

79 
	$ã°_Áû
(c⁄° *
f‹m©
, ...) {

80 
va_li°
 
≠
;

82 
	`va_°¨t
(
≠
, 
f‹m©
);

83 
	`mÆloc_v˝rötf
(
NULL
, NULL, 
f‹m©
, 
≠
);

84 
	`va_íd
(
≠
);

85 
	`mÆloc_¥ötf
("\n");

86 
ã°_°©us
 = 
ã°_°©us_Áû
;

87 
	}
}

90 
	$ã°_°©us_°rög
(
ã°_°©us_t
 
ã°_°©us
) {

91 
ã°_°©us
) {

92 
ã°_°©us_∑ss
:  "pass";

93 
ã°_°©us_skù
:  "skip";

94 
ã°_°©us_Áû
:  "fail";

95 : 
	`nŸ_ªached
();

97 
	}
}

100 
	$p_ã°_öô
(c⁄° *
«me
) {

101 
ã°_cou¡
++;

102 
ã°_°©us
 = 
ã°_°©us_∑ss
;

103 
ã°_«me
 = 
«me
;

104 
	}
}

107 
	$p_ã°_föi
() {

108 
ã°_cou¡s
[
ã°_°©us
]++;

109 
	`mÆloc_¥ötf
("%†(%s): %s\n", 
ã°_«me
, 
	`ªíå™cy_t_°r
(
ªíå™cy
),

110 
	`ã°_°©us_°rög
(
ã°_°©us
));

111 
	}
}

113 
ã°_°©us_t


114 
	$p_ã°_im∂
(
boﬁ
 
do_mÆloc_öô
, boﬁ 
do_ªíå™t
, 
ã°_t
 *
t
, 
va_li°
 
≠
) {

115 
ã°_°©us_t
 
ªt
;

117 i‡(
do_mÆloc_öô
) {

124 i‡(
	`«Œocx
(1, 0) == 0) {

125 
	`mÆloc_¥ötf
("InitializationÉrror");

126  
ã°_°©us_Áû
;

130 
ªt
 = 
ã°_°©us_∑ss
;

131 ; 
t
 !
NULL
;Å = 
	`va_¨g
(
≠
, 
ã°_t
 *)) {

133 
ªíå™cy
 = 
n⁄_ªíå™t
;

134 
hooks_¨ía_√w_hook
 = 
hooks_libc_hook
 = 
NULL
;

135 
	`t
();

136 i‡(
ã°_°©us
 > 
ªt
) {

137 
ªt
 = 
ã°_°©us
;

140 i‡(
do_ªíå™t
) {

141 
ªíå™cy
 = 
libc_ªíå™t
;

142 
hooks_¨ía_√w_hook
 = 
NULL
;

143 
hooks_libc_hook
 = &
libc_ªíå™cy_hook
;

144 
	`t
();

145 i‡(
ã°_°©us
 > 
ªt
) {

146 
ªt
 = 
ã°_°©us
;

149 
ªíå™cy
 = 
¨ía_√w_ªíå™t
;

150 
hooks_libc_hook
 = 
NULL
;

151 
hooks_¨ía_√w_hook
 = &
¨ía_√w_ªíå™cy_hook
;

152 
	`t
();

153 i‡(
ã°_°©us
 > 
ªt
) {

154 
ªt
 = 
ã°_°©us
;

159 
	`mÆloc_¥ötf
("--- %s: %u/%u, %s: %u/%u, %s: %u/%u ---\n",

160 
	`ã°_°©us_°rög
(
ã°_°©us_∑ss
),

161 
ã°_cou¡s
[
ã°_°©us_∑ss
], 
ã°_cou¡
,

162 
	`ã°_°©us_°rög
(
ã°_°©us_skù
),

163 
ã°_cou¡s
[
ã°_°©us_skù
], 
ã°_cou¡
,

164 
	`ã°_°©us_°rög
(
ã°_°©us_Áû
),

165 
ã°_cou¡s
[
ã°_°©us_Áû
], 
ã°_cou¡
);

167  
ªt
;

168 
	}
}

170 
ã°_°©us_t


171 
	$p_ã°
(
ã°_t
 *
t
, ...) {

172 
ã°_°©us_t
 
ªt
;

173 
va_li°
 
≠
;

175 
ªt
 = 
ã°_°©us_∑ss
;

176 
	`va_°¨t
(
≠
, 
t
);

177 
ªt
 = 
	`p_ã°_im∂
(
åue
,Årue, 
t
, 
≠
);

178 
	`va_íd
(
≠
);

180  
ªt
;

181 
	}
}

183 
ã°_°©us_t


184 
	$p_ã°_no_ªíå™cy
(
ã°_t
 *
t
, ...) {

185 
ã°_°©us_t
 
ªt
;

186 
va_li°
 
≠
;

188 
ªt
 = 
ã°_°©us_∑ss
;

189 
	`va_°¨t
(
≠
, 
t
);

190 
ªt
 = 
	`p_ã°_im∂
(
åue
, 
Ál£
, 
t
, 
≠
);

191 
	`va_íd
(
≠
);

193  
ªt
;

194 
	}
}

196 
ã°_°©us_t


197 
	$p_ã°_no_mÆloc_öô
(
ã°_t
 *
t
, ...) {

198 
ã°_°©us_t
 
ªt
;

199 
va_li°
 
≠
;

201 
ªt
 = 
ã°_°©us_∑ss
;

202 
	`va_°¨t
(
≠
, 
t
);

207 
ªt
 = 
	`p_ã°_im∂
(
Ál£
, fÆ£, 
t
, 
≠
);

208 
	`va_íd
(
≠
);

210  
ªt
;

211 
	}
}

214 
	$p_ã°_Áû
(c⁄° *
¥efix
, c⁄° *
mesßge
) {

215 
	`mÆloc_˝rötf
(
NULL
, NULL, "%s%s\n", 
¥efix
, 
mesßge
);

216 
ã°_°©us
 = 
ã°_°©us_Áû
;

217 
	}
}

	@test/src/thd.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 #ifde‡
_WIN32


5 
	$thd_¸óã
(
thd_t
 *
thd
, *(*
¥oc
)(*), *
¨g
) {

6 
LPTHREAD_START_ROUTINE
 
routöe
 = (LPTHREAD_START_ROUTINE)
¥oc
;

7 *
thd
 = 
	`Cª©eThªad
(
NULL
, 0, 
routöe
, 
¨g
, 0, NULL);

8 i‡(*
thd
 =
NULL
) {

9 
	`ã°_Áû
("Error in CreateThread()\n");

11 
	}
}

14 
	$thd_joö
(
thd_t
 
thd
, **
ªt
) {

15 i‡(
	`WaôF‹SögÀObje˘
(
thd
, 
INFINITE
Ë=
WAIT_OBJECT_0
 && 
ªt
) {

16 
DWORD
 
exô_code
;

17 
	`GëExôCodeThªad
(
thd
, (
LPDWORD
Ë&
exô_code
);

18 *
ªt
 = (*)(
uöçå_t
)
exô_code
;

20 
	}
}

24 
	$thd_¸óã
(
thd_t
 *
thd
, *(*
¥oc
)(*), *
¨g
) {

25 i‡(
	`±hªad_¸óã
(
thd
, 
NULL
, 
¥oc
, 
¨g
) != 0) {

26 
	`ã°_Áû
("Error inÖthread_create()\n");

28 
	}
}

31 
	$thd_joö
(
thd_t
 
thd
, **
ªt
) {

32 
	`±hªad_joö
(
thd
, 
ªt
);

33 
	}
}

	@test/src/timer.c

1 
	~"ã°/jemÆloc_ã°.h
"

4 
	$timî_°¨t
(
timedñè_t
 *
timî
) {

5 
	`n°ime_öô
(&
timî
->
t0
, 0);

6 
	`n°ime_upd©e
(&
timî
->
t0
);

7 
	}
}

10 
	$timî_°›
(
timedñè_t
 *
timî
) {

11 
	`n°ime_c›y
(&
timî
->
t1
, &timî->
t0
);

12 
	`n°ime_upd©e
(&
timî
->
t1
);

13 
	}
}

15 
uöt64_t


16 
	$timî_u£c
(c⁄° 
timedñè_t
 *
timî
) {

17 
n°ime_t
 
dñè
;

19 
	`n°ime_c›y
(&
dñè
, &
timî
->
t1
);

20 
	`n°ime_subåa˘
(&
dñè
, &
timî
->
t0
);

21  
	`n°ime_ns
(&
dñè
) / 1000;

22 
	}
}

25 
	$timî_øtio
(
timedñè_t
 *
a
,Åimedñè_à*
b
, *
buf
, 
size_t
 
buÊí
) {

26 
uöt64_t
 
t0
 = 
	`timî_u£c
(
a
);

27 
uöt64_t
 
t1
 = 
	`timî_u£c
(
b
);

28 
uöt64_t
 
mu…
;

29 
size_t
 
i
 = 0;

30 
size_t
 
j
, 
n
;

33 
n
 = 
	`mÆloc_¢¥ötf
(&
buf
[
i
], 
buÊí
-i, "%"
FMTu64
, 
t0
 / 
t1
);

34 
i
 +
n
;

35 i‡(
i
 >
buÊí
) {

38 
mu…
 = 1;

39 
j
 = 0; j < 
n
; j++) {

40 
mu…
 *= 10;

44 
n
 = 
	`mÆloc_¢¥ötf
(&
buf
[
i
], 
buÊí
-i, ".");

45 
i
 +
n
;

48 
i
 < 
buÊí
-1) {

49 
uöt64_t
 
round
 = (
i
+1 =
buÊí
-1 && ((
t0
 * 
mu…
 * 10 / 
t1
) % 10

51 
n
 = 
	`mÆloc_¢¥ötf
(&
buf
[
i
], 
buÊí
-i,

52 "%"
FMTu64
, (
t0
 * 
mu…
 / 
t1
Ë% 10 + 
round
);

53 
i
 +
n
;

54 
mu…
 *= 10;

56 
	}
}

	@test/stress/microbench.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
ölöe
 

4 
	$time_func
(
timedñè_t
 *
timî
, 
uöt64_t
 
nw¨mup
, uöt64_à
nôî
,

5 (*
func
)()) {

6 
uöt64_t
 
i
;

8 
i
 = 0; i < 
nw¨mup
; i++) {

9 
	`func
();

11 
	`timî_°¨t
(
timî
);

12 
i
 = 0; i < 
nôî
; i++) {

13 
	`func
();

15 
	`timî_°›
(
timî
);

16 
	}
}

19 
com∑ª_funcs
(
uöt64_t
 
nw¨mup
, uöt64_à
nôî
, c⁄° *
«me_a
,

20 (*
func_a
), c⁄° *
«me_b
, (*
func_b
)) {

21 
timedñè_t
 
timî_a
, 
timî_b
;

22 
øtio_buf
[6];

23 *
p
;

25 
p
 = 
	`mÆlocx
(1, 0);

26 i‡(
p
 =
NULL
) {

27 
	`ã°_Áû
("Unexpected mallocx() failure");

31 
	`time_func
(&
timî_a
, 
nw¨mup
, 
nôî
, 
func_a
);

32 
	`time_func
(&
timî_b
, 
nw¨mup
, 
nôî
, 
func_b
);

34 
	`timî_øtio
(&
timî_a
, &
timî_b
, 
øtio_buf
, (ratio_buf));

35 
	`mÆloc_¥ötf
("%"
FMTu64
" iterations, %s=%"FMTu64"us, "

36 "%s=%"
FMTu64
"us,Ñatio=1:%s\n",

37 
nôî
, 
«me_a
, 
	`timî_u£c
(&
timî_a
), 
«me_b
,Åimî_u£c(&
timî_b
),

38 
øtio_buf
);

40 
	`dÆlocx
(
p
, 0);

41 
	}
}

44 
	$mÆloc_‰ì
() {

46 *
p
 = 
	`mÆloc
(1);

47 i‡(
p
 =
NULL
) {

48 
	`ã°_Áû
("Unexpected malloc() failure");

51 
	`‰ì
(
p
);

52 
	}
}

55 
	$mÆlocx_‰ì
() {

56 *
p
 = 
	`mÆlocx
(1, 0);

57 i‡(
p
 =
NULL
) {

58 
	`ã°_Áû
("Unexpected mallocx() failure");

61 
	`‰ì
(
p
);

62 
	}
}

64 
	$TEST_BEGIN
(
ã°_mÆloc_vs_mÆlocx
) {

65 
	`com∑ª_funcs
(10*1000*1000, 100*1000*1000, "malloc",

66 
mÆloc_‰ì
, "mÆlocx", 
mÆlocx_‰ì
);

67 
	}
}

68 
TEST_END


71 
	$mÆloc_dÆlocx
() {

72 *
p
 = 
	`mÆloc
(1);

73 i‡(
p
 =
NULL
) {

74 
	`ã°_Áû
("Unexpected malloc() failure");

77 
	`dÆlocx
(
p
, 0);

78 
	}
}

81 
	$mÆloc_sdÆlocx
() {

82 *
p
 = 
	`mÆloc
(1);

83 i‡(
p
 =
NULL
) {

84 
	`ã°_Áû
("Unexpected malloc() failure");

87 
	`sdÆlocx
(
p
, 1, 0);

88 
	}
}

90 
	$TEST_BEGIN
(
ã°_‰ì_vs_dÆlocx
) {

91 
	`com∑ª_funcs
(10*1000*1000, 100*1000*1000, "‰ì", 
mÆloc_‰ì
,

92 "dÆlocx", 
mÆloc_dÆlocx
);

93 
	}
}

94 
TEST_END


96 
	$TEST_BEGIN
(
ã°_dÆlocx_vs_sdÆlocx
) {

97 
	`com∑ª_funcs
(10*1000*1000, 100*1000*1000, "dÆlocx", 
mÆloc_dÆlocx
,

98 "sdÆlocx", 
mÆloc_sdÆlocx
);

99 
	}
}

100 
TEST_END


103 
	$mÆloc_mus_‰ì
() {

104 *
p
;

106 
p
 = 
	`mÆloc
(1);

107 i‡(
p
 =
NULL
) {

108 
	`ã°_Áû
("Unexpected malloc() failure");

111 
	`mÆloc_ußbÀ_size
(
p
);

112 
	`‰ì
(
p
);

113 
	}
}

116 
	$mÆloc_ßŒocx_‰ì
() {

117 *
p
;

119 
p
 = 
	`mÆloc
(1);

120 i‡(
p
 =
NULL
) {

121 
	`ã°_Áû
("Unexpected malloc() failure");

124 i‡(
	`ßŒocx
(
p
, 0) < 1) {

125 
	`ã°_Áû
("Unexpected sallocx() failure");

127 
	`‰ì
(
p
);

128 
	}
}

130 
	$TEST_BEGIN
(
ã°_mus_vs_ßŒocx
) {

131 
	`com∑ª_funcs
(10*1000*1000, 100*1000*1000, "malloc_usable_size",

132 
mÆloc_mus_‰ì
, "ßŒocx", 
mÆloc_ßŒocx_‰ì
);

133 
	}
}

134 
TEST_END


137 
	$mÆloc_«Œocx_‰ì
() {

138 *
p
;

140 
p
 = 
	`mÆloc
(1);

141 i‡(
p
 =
NULL
) {

142 
	`ã°_Áû
("Unexpected malloc() failure");

145 i‡(
	`«Œocx
(1, 0) < 1) {

146 
	`ã°_Áû
("UnexpectedÇallocx() failure");

148 
	`‰ì
(
p
);

149 
	}
}

151 
	$TEST_BEGIN
(
ã°_ßŒocx_vs_«Œocx
) {

152 
	`com∑ª_funcs
(10*1000*1000, 100*1000*1000, "sallocx",

153 
mÆloc_ßŒocx_‰ì
, "«Œocx", 
mÆloc_«Œocx_‰ì
);

154 
	}
}

155 
TEST_END


158 
	$maö
() {

159  
	`ã°_no_ªíå™cy
(

160 
ã°_mÆloc_vs_mÆlocx
,

161 
ã°_‰ì_vs_dÆlocx
,

162 
ã°_dÆlocx_vs_sdÆlocx
,

163 
ã°_mus_vs_ßŒocx
,

164 
ã°_ßŒocx_vs_«Œocx
);

165 
	}
}

	@test/unit/SFMT.c

36 
	~"ã°/jemÆloc_ã°.h
"

38 
	#BLOCK_SIZE
 10000

	)

39 
	#BLOCK_SIZE64
 (
BLOCK_SIZE
 / 2)

	)

40 
	#COUNT_1
 1000

	)

41 
	#COUNT_2
 700

	)

43 c⁄° 
uöt32_t
 
	göô_gí_ønd_32_ex≥˘ed
[] = {

245 c⁄° 
uöt32_t
 
	göô_by_¨øy_32_ex≥˘ed
[] = {

447 c⁄° 
uöt64_t
 
	göô_gí_ønd_64_ex≥˘ed
[] = {

448 
KQU
(16924766246869039260), KQU( 8201438687333352714),

449 
KQU
( 2265290287015001750), KQU(18397264611805473832),

450 
KQU
( 3375255223302384358), KQU( 6345559975416828796),

451 
KQU
(18229739242790328073), KQU( 7596792742098800905),

452 
KQU
( 255338647169685981), KQU( 2052747240048610300),

453 
KQU
(18328151576097299343), KQU(12472905421133796567),

454 
KQU
(11315245349717600863), KQU(16594110197775871209),

455 
KQU
(15708751964632456450), KQU(10452031272054632535),

456 
KQU
(11097646720811454386), KQU( 4556090668445745441),

457 
KQU
(17116187693090663106), KQU(14931526836144510645),

458 
KQU
( 9190752218020552591), KQU( 9625800285771901401),

459 
KQU
(13995141077659972832), KQU( 5194209094927829625),

460 
KQU
( 4156788379151063303), KQU( 8523452593770139494),

461 
KQU
(14082382103049296727), KQU( 2462601863986088483),

462 
KQU
( 3030583461592840678), KQU( 5221622077872827681),

463 
KQU
( 3084210671228981236), KQU(13956758381389953823),

464 
KQU
(13503889856213423831), KQU(15696904024189836170),

465 
KQU
( 4612584152877036206), KQU( 6231135538447867881),

466 
KQU
(10172457294158869468), KQU( 6452258628466708150),

467 
KQU
(14044432824917330221), KQU( 370168364480044279),

468 
KQU
(10102144686427193359), KQU( 667870489994776076),

469 
KQU
( 2732271956925885858), KQU(18027788905977284151),

470 
KQU
(15009842788582923859), KQU( 7136357960180199542),

471 
KQU
(15901736243475578127), KQU(16951293785352615701),

472 
KQU
(10551492125243691632), KQU(17668869969146434804),

473 
KQU
(13646002971174390445), KQU( 9804471050759613248),

474 
KQU
( 5511670439655935493), KQU(18103342091070400926),

475 
KQU
(17224512747665137533), KQU(15534627482992618168),

476 
KQU
( 1423813266186582647), KQU(15821176807932930024),

477 
KQU
( 30323369733607156), KQU(11599382494723479403),

478 
KQU
( 653856076586810062), KQU( 3176437395144899659),

479 
KQU
(14028076268147963917), KQU(16156398271809666195),

480 
KQU
( 3166955484848201676), KQU( 5746805620136919390),

481 
KQU
(17297845208891256593), KQU(11691653183226428483),

482 
KQU
(17900026146506981577), KQU(15387382115755971042),

483 
KQU
(16923567681040845943), KQU( 8039057517199388606),

484 
KQU
(11748409241468629263), KQU( 794358245539076095),

485 
KQU
(13438501964693401242), KQU(14036803236515618962),

486 
KQU
( 5252311215205424721), KQU(17806589612915509081),

487 
KQU
( 6802767092397596006), KQU(14212120431184557140),

488 
KQU
( 1072951366761385712), KQU(13098491780722836296),

489 
KQU
( 9466676828710797353), KQU(12673056849042830081),

490 
KQU
(12763726623645357580), KQU(16468961652999309493),

491 
KQU
(15305979875636438926), KQU(17444713151223449734),

492 
KQU
( 5692214267627883674), KQU(13049589139196151505),

493 
KQU
( 880115207831670745), KQU( 1776529075789695498),

494 
KQU
(16695225897801466485), KQU(10666901778795346845),

495 
KQU
( 6164389346722833869), KQU( 2863817793264300475),

496 
KQU
( 9464049921886304754), KQU( 3993566636740015468),

497 
KQU
( 9983749692528514136), KQU(16375286075057755211),

498 
KQU
(16042643417005440820), KQU(11445419662923489877),

499 
KQU
( 7999038846885158836), KQU( 6721913661721511535),

500 
KQU
( 5363052654139357320), KQU( 1817788761173584205),

501 
KQU
(13290974386445856444), KQU( 4650350818937984680),

502 
KQU
( 8219183528102484836), KQU( 1569862923500819899),

503 
KQU
( 4189359732136641860), KQU(14202822961683148583),

504 
KQU
( 4457498315309429058), KQU(13089067387019074834),

505 
KQU
(11075517153328927293), KQU(10277016248336668389),

506 
KQU
( 7070509725324401122), KQU(17808892017780289380),

507 
KQU
(13143367339909287349), KQU( 1377743745360085151),

508 
KQU
( 5749341807421286485), KQU(14832814616770931325),

509 
KQU
( 7688820635324359492), KQU(10960474011539770045),

510 
KQU
( 81970066653179790), KQU(12619476072607878022),

511 
KQU
( 4419566616271201744), KQU(15147917311750568503),

512 
KQU
( 5549739182852706345), KQU( 7308198397975204770),

513 
KQU
(13580425496671289278), KQU(17070764785210130301),

514 
KQU
( 8202832846285604405), KQU( 6873046287640887249),

515 
KQU
( 6927424434308206114), KQU( 6139014645937224874),

516 
KQU
(10290373645978487639), KQU(15904261291701523804),

517 
KQU
( 9628743442057826883), KQU(18383429096255546714),

518 
KQU
( 4977413265753686967), KQU( 7714317492425012869),

519 
KQU
( 9025232586309926193), KQU(14627338359776709107),

520 
KQU
(14759849896467790763), KQU(10931129435864423252),

521 
KQU
( 4588456988775014359), KQU(10699388531797056724),

522 
KQU
( 468652268869238792), KQU( 5755943035328078086),

523 
KQU
( 2102437379988580216), KQU( 9986312786506674028),

524 
KQU
( 2654207180040945604), KQU( 8726634790559960062),

525 
KQU
( 100497234871808137), KQU( 2800137176951425819),

526 
KQU
( 6076627612918553487), KQU( 5780186919186152796),

527 
KQU
( 8179183595769929098), KQU( 6009426283716221169),

528 
KQU
( 2796662551397449358), KQU( 1756961367041986764),

529 
KQU
( 6972897917355606205), KQU(14524774345368968243),

530 
KQU
( 2773529684745706940), KQU( 4853632376213075959),

531 
KQU
( 4198177923731358102), KQU( 8271224913084139776),

532 
KQU
( 2741753121611092226), KQU(16782366145996731181),

533 
KQU
(15426125238972640790), KQU(13595497100671260342),

534 
KQU
( 3173531022836259898), KQU( 6573264560319511662),

535 
KQU
(18041111951511157441), KQU( 2351433581833135952),

536 
KQU
( 3113255578908173487), KQU( 1739371330877858784),

537 
KQU
(16046126562789165480), KQU( 8072101652214192925),

538 
KQU
(15267091584090664910), KQU( 9309579200403648940),

539 
KQU
( 5218892439752408722), KQU(14492477246004337115),

540 
KQU
(17431037586679770619), KQU( 7385248135963250480),

541 
KQU
( 9580144956565560660), KQU( 4919546228040008720),

542 
KQU
(15261542469145035584), KQU(18233297270822253102),

543 
KQU
( 5453248417992302857), KQU( 9309519155931460285),

544 
KQU
(10342813012345291756), KQU(15676085186784762381),

545 
KQU
(15912092950691300645), KQU( 9371053121499003195),

546 
KQU
( 9897186478226866746), KQU(14061858287188196327),

547 
KQU
( 122575971620788119), KQU(12146750969116317754),

548 
KQU
( 4438317272813245201), KQU( 8332576791009527119),

549 
KQU
(13907785691786542057), KQU(10374194887283287467),

550 
KQU
( 2098798755649059566), KQU( 3416235197748288894),

551 
KQU
( 8688269957320773484), KQU( 7503964602397371571),

552 
KQU
(16724977015147478236), KQU( 9461512855439858184),

553 
KQU
(13259049744534534727), KQU( 3583094952542899294),

554 
KQU
( 8764245731305528292), KQU(13240823595462088985),

555 
KQU
(13716141617617910448), KQU(18114969519935960955),

556 
KQU
( 2297553615798302206), KQU( 4585521442944663362),

557 
KQU
(17776858680630198686), KQU( 4685873229192163363),

558 
KQU
( 152558080671135627), KQU(15424900540842670088),

559 
KQU
(13229630297130024108), KQU(17530268788245718717),

560 
KQU
(16675633913065714144), KQU( 3158912717897568068),

561 
KQU
(15399132185380087288), KQU( 7401418744515677872),

562 
KQU
(13135412922344398535), KQU( 6385314346100509511),

563 
KQU
(13962867001134161139), KQU(10272780155442671999),

564 
KQU
(12894856086597769142), KQU(13340877795287554994),

565 
KQU
(12913630602094607396), KQU(12543167911119793857),

566 
KQU
(17343570372251873096), KQU(10959487764494150545),

567 
KQU
( 6966737953093821128), KQU(13780699135496988601),

568 
KQU
( 4405070719380142046), KQU(14923788365607284982),

569 
KQU
( 2869487678905148380), KQU( 6416272754197188403),

570 
KQU
(15017380475943612591), KQU( 1995636220918429487),

571 
KQU
( 3402016804620122716), KQU(15800188663407057080),

572 
KQU
(11362369990390932882), KQU(15262183501637986147),

573 
KQU
(10239175385387371494), KQU( 9352042420365748334),

574 
KQU
( 1682457034285119875), KQU( 1724710651376289644),

575 
KQU
( 2038157098893817966), KQU( 9897825558324608773),

576 
KQU
( 1477666236519164736), KQU(16835397314511233640),

577 
KQU
(10370866327005346508), KQU(10157504370660621982),

578 
KQU
(12113904045335882069), KQU(13326444439742783008),

579 
KQU
(11302769043000765804), KQU(13594979923955228484),

580 
KQU
(11779351762613475968), KQU( 3786101619539298383),

581 
KQU
( 8021122969180846063), KQU(15745904401162500495),

582 
KQU
(10762168465993897267), KQU(13552058957896319026),

583 
KQU
(11200228655252462013), KQU( 5035370357337441226),

584 
KQU
( 7593918984545500013), KQU( 5418554918361528700),

585 
KQU
( 4858270799405446371), KQU( 9974659566876282544),

586 
KQU
(18227595922273957859), KQU( 2772778443635656220),

587 
KQU
(14285143053182085385), KQU( 9939700992429600469),

588 
KQU
(12756185904545598068), KQU( 2020783375367345262),

589 
KQU
( 57026775058331227), KQU( 950827867930065454),

590 
KQU
( 6602279670145371217), KQU( 2291171535443566929),

591 
KQU
( 5832380724425010313), KQU( 1220343904715982285),

592 
KQU
(17045542598598037633), KQU(15460481779702820971),

593 
KQU
(13948388779949365130), KQU(13975040175430829518),

594 
KQU
(17477538238425541763), KQU(11104663041851745725),

595 
KQU
(15860992957141157587), KQU(14529434633012950138),

596 
KQU
( 2504838019075394203), KQU( 7512113882611121886),

597 
KQU
( 4859973559980886617), KQU( 1258601555703250219),

598 
KQU
(15594548157514316394), KQU( 4516730171963773048),

599 
KQU
(11380103193905031983), KQU( 6809282239982353344),

600 
KQU
(18045256930420065002), KQU( 2453702683108791859),

601 
KQU
( 977214582986981460), KQU( 2006410402232713466),

602 
KQU
( 6192236267216378358), KQU( 3429468402195675253),

603 
KQU
(18146933153017348921), KQU(17369978576367231139),

604 
KQU
( 1246940717230386603), KQU(11335758870083327110),

605 
KQU
(14166488801730353682), KQU( 9008573127269635732),

606 
KQU
(10776025389820643815), KQU(15087605441903942962),

607 
KQU
( 1359542462712147922), KQU(13898874411226454206),

608 
KQU
(17911176066536804411), KQU( 9435590428600085274),

609 
KQU
( 294488509967864007), KQU( 8890111397567922046),

610 
KQU
( 7987823476034328778), KQU(13263827582440967651),

611 
KQU
( 7503774813106751573), KQU(14974747296185646837),

612 
KQU
( 8504765037032103375), KQU(17340303357444536213),

613 
KQU
( 7704610912964485743), KQU( 8107533670327205061),

614 
KQU
( 9062969835083315985), KQU(16968963142126734184),

615 
KQU
(12958041214190810180), KQU( 2720170147759570200),

616 
KQU
( 2986358963942189566), KQU(14884226322219356580),

617 
KQU
( 286224325144368520), KQU(11313800433154279797),

618 
KQU
(18366849528439673248), KQU(17899725929482368789),

619 
KQU
( 3730004284609106799), KQU( 1654474302052767205),

620 
KQU
( 5006698007047077032), KQU( 8196893913601182838),

621 
KQU
(15214541774425211640), KQU(17391346045606626073),

622 
KQU
( 8369003584076969089), KQU( 3939046733368550293),

623 
KQU
(10178639720308707785), KQU( 2180248669304388697),

624 
KQU
( 62894391300126322), KQU( 9205708961736223191),

625 
KQU
( 6837431058165360438), KQU( 3150743890848308214),

626 
KQU
(17849330658111464583), KQU(12214815643135450865),

627 
KQU
(13410713840519603402), KQU( 3200778126692046802),

628 
KQU
(13354780043041779313), KQU( 800850022756886036),

629 
KQU
(15660052933953067433), KQU( 6572823544154375676),

630 
KQU
(11030281857015819266), KQU(12682241941471433835),

631 
KQU
(11654136407300274693), KQU( 4517795492388641109),

632 
KQU
( 9757017371504524244), KQU(17833043400781889277),

633 
KQU
(12685085201747792227), KQU(10408057728835019573),

634 
KQU
( 98370418513455221), KQU( 6732663555696848598),

635 
KQU
(13248530959948529780), KQU( 3530441401230622826),

636 
KQU
(18188251992895660615), KQU( 1847918354186383756),

637 
KQU
( 1127392190402660921), KQU(11293734643143819463),

638 
KQU
( 3015506344578682982), KQU(13852645444071153329),

639 
KQU
( 2121359659091349142), KQU( 1294604376116677694),

640 
KQU
( 5616576231286352318), KQU( 7112502442954235625),

641 
KQU
(11676228199551561689), KQU(12925182803007305359),

642 
KQU
( 7852375518160493082), KQU( 1136513130539296154),

643 
KQU
( 5636923900916593195), KQU( 3221077517612607747),

644 
KQU
(17784790465798152513), KQU( 3554210049056995938),

645 
KQU
(17476839685878225874), KQU( 3206836372585575732),

646 
KQU
( 2765333945644823430), KQU(10080070903718799528),

647 
KQU
( 5412370818878286353), KQU( 9689685887726257728),

648 
KQU
( 8236117509123533998), KQU( 1951139137165040214),

649 
KQU
( 4492205209227980349), KQU(16541291230861602967),

650 
KQU
( 1424371548301437940), KQU( 9117562079669206794),

651 
KQU
(14374681563251691625), KQU(13873164030199921303),

652 
KQU
( 6680317946770936731), KQU(15586334026918276214),

653 
KQU
(10896213950976109802), KQU( 9506261949596413689),

654 
KQU
( 9903949574308040616), KQU( 6038397344557204470),

655 
KQU
( 174601465422373648), KQU(15946141191338238030),

656 
KQU
(17142225620992044937), KQU( 7552030283784477064),

657 
KQU
( 2947372384532947997), KQU( 510797021688197711),

658 
KQU
( 4962499439249363461), KQU( 23770320158385357),

659 
KQU
( 959774499105138124), KQU( 1468396011518788276),

660 
KQU
( 2015698006852312308), KQU( 4149400718489980136),

661 
KQU
( 5992916099522371188), KQU(10819182935265531076),

662 
KQU
(16189787999192351131), KQU( 342833961790261950),

663 
KQU
(12470830319550495336), KQU(18128495041912812501),

664 
KQU
( 1193600899723524337), KQU( 9056793666590079770),

665 
KQU
( 2154021227041669041), KQU( 4963570213951235735),

666 
KQU
( 4865075960209211409), KQU( 2097724599039942963),

667 
KQU
( 2024080278583179845), KQU(11527054549196576736),

668 
KQU
(10650256084182390252), KQU( 4808408648695766755),

669 
KQU
( 1642839215013788844), KQU(10607187948250398390),

670 
KQU
( 7076868166085913508), KQU( 730522571106887032),

671 
KQU
(12500579240208524895), KQU( 4484390097311355324),

672 
KQU
(15145801330700623870), KQU( 8055827661392944028),

673 
KQU
( 5865092976832712268), KQU(15159212508053625143),

674 
KQU
( 3560964582876483341), KQU( 4070052741344438280),

675 
KQU
( 6032585709886855634), KQU(15643262320904604873),

676 
KQU
( 2565119772293371111), KQU( 318314293065348260),

677 
KQU
(15047458749141511872), KQU( 7772788389811528730),

678 
KQU
( 7081187494343801976), KQU( 6465136009467253947),

679 
KQU
(10425940692543362069), KQU( 554608190318339115),

680 
KQU
(14796699860302125214), KQU( 1638153134431111443),

681 
KQU
(10336967447052276248), KQU( 8412308070396592958),

682 
KQU
( 4004557277152051226), KQU( 8143598997278774834),

683 
KQU
(16413323996508783221), KQU(13139418758033994949),

684 
KQU
( 9772709138335006667), KQU( 2818167159287157659),

685 
KQU
(17091740573832523669), KQU(14629199013130751608),

686 
KQU
(18268322711500338185), KQU( 8290963415675493063),

687 
KQU
( 8830864907452542588), KQU( 1614839084637494849),

688 
KQU
(14855358500870422231), KQU( 3472996748392519937),

689 
KQU
(15317151166268877716), KQU( 5825895018698400362),

690 
KQU
(16730208429367544129), KQU(10481156578141202800),

691 
KQU
( 4746166512382823750), KQU(12720876014472464998),

692 
KQU
( 8825177124486735972), KQU(13733447296837467838),

693 
KQU
( 6412293741681359625), KQU( 8313213138756135033),

694 
KQU
(11421481194803712517), KQU( 7997007691544174032),

695 
KQU
( 6812963847917605930), KQU( 9683091901227558641),

696 
KQU
(14703594165860324713), KQU( 1775476144519618309),

697 
KQU
( 2724283288516469519), KQU( 717642555185856868),

698 
KQU
( 8736402192215092346), KQU(11878800336431381021),

699 
KQU
( 4348816066017061293), KQU( 6115112756583631307),

700 
KQU
( 9176597239667142976), KQU(12615622714894259204),

701 
KQU
(10283406711301385987), KQU( 5111762509485379420),

702 
KQU
( 3118290051198688449), KQU( 7345123071632232145),

703 
KQU
( 9176423451688682359), KQU( 4843865456157868971),

704 
KQU
(12008036363752566088), KQU(12058837181919397720),

705 
KQU
( 2145073958457347366), KQU( 1526504881672818067),

706 
KQU
( 3488830105567134848), KQU(13208362960674805143),

707 
KQU
( 4077549672899572192), KQU( 7770995684693818365),

708 
KQU
( 1398532341546313593), KQU(12711859908703927840),

709 
KQU
( 1417561172594446813), KQU(17045191024194170604),

710 
KQU
( 4101933177604931713), KQU(14708428834203480320),

711 
KQU
(17447509264469407724), KQU(14314821973983434255),

712 
KQU
(17990472271061617265), KQU( 5087756685841673942),

713 
KQU
(12797820586893859939), KQU( 1778128952671092879),

714 
KQU
( 3535918530508665898), KQU( 9035729701042481301),

715 
KQU
(14808661568277079962), KQU(14587345077537747914),

716 
KQU
(11920080002323122708), KQU( 6426515805197278753),

717 
KQU
( 3295612216725984831), KQU(11040722532100876120),

718 
KQU
(12305952936387598754), KQU(16097391899742004253),

719 
KQU
( 4908537335606182208), KQU(12446674552196795504),

720 
KQU
(16010497855816895177), KQU( 9194378874788615551),

721 
KQU
( 3382957529567613384), KQU( 5154647600754974077),

722 
KQU
( 9801822865328396141), KQU( 9023662173919288143),

723 
KQU
(17623115353825147868), KQU( 8238115767443015816),

724 
KQU
(15811444159859002560), KQU( 9085612528904059661),

725 
KQU
( 6888601089398614254), KQU( 258252992894160189),

726 
KQU
( 6704363880792428622), KQU( 6114966032147235763),

727 
KQU
(11075393882690261875), KQU( 8797664238933620407),

728 
KQU
( 5901892006476726920), KQU( 5309780159285518958),

729 
KQU
(14940808387240817367), KQU(14642032021449656698),

730 
KQU
( 9808256672068504139), KQU( 3670135111380607658),

731 
KQU
(11211211097845960152), KQU( 1474304506716695808),

732 
KQU
(15843166204506876239), KQU( 7661051252471780561),

733 
KQU
(10170905502249418476), KQU( 7801416045582028589),

734 
KQU
( 2763981484737053050), KQU( 9491377905499253054),

735 
KQU
(16201395896336915095), KQU( 9256513756442782198),

736 
KQU
( 5411283157972456034), KQU( 5059433122288321676),

737 
KQU
( 4327408006721123357), KQU( 9278544078834433377),

738 
KQU
( 7601527110882281612), KQU(11848295896975505251),

739 
KQU
(12096998801094735560), KQU(14773480339823506413),

740 
KQU
(15586227433895802149), KQU(12786541257830242872),

741 
KQU
( 6904692985140503067), KQU( 5309011515263103959),

742 
KQU
(12105257191179371066), KQU(14654380212442225037),

743 
KQU
( 2556774974190695009), KQU( 4461297399927600261),

744 
KQU
(14888225660915118646), KQU(14915459341148291824),

745 
KQU
( 2738802166252327631), KQU( 6047155789239131512),

746 
KQU
(12920545353217010338), KQU(10697617257007840205),

747 
KQU
( 2751585253158203504), KQU(13252729159780047496),

748 
KQU
(14700326134672815469), KQU(14082527904374600529),

749 
KQU
(16852962273496542070), KQU(17446675504235853907),

750 
KQU
(15019600398527572311), KQU(12312781346344081551),

751 
KQU
(14524667935039810450), KQU( 5634005663377195738),

752 
KQU
(11375574739525000569), KQU( 2423665396433260040),

753 
KQU
( 5222836914796015410), KQU( 4397666386492647387),

754 
KQU
( 4619294441691707638), KQU( 665088602354770716),

755 
KQU
(13246495665281593610), KQU( 6564144270549729409),

756 
KQU
(10223216188145661688), KQU( 3961556907299230585),

757 
KQU
(11543262515492439914), KQU(16118031437285993790),

758 
KQU
( 7143417964520166465), KQU(13295053515909486772),

759 
KQU
( 40434666004899675), KQU(17127804194038347164),

760 
KQU
( 8599165966560586269), KQU( 8214016749011284903),

761 
KQU
(13725130352140465239), KQU( 5467254474431726291),

762 
KQU
( 7748584297438219877), KQU(16933551114829772472),

763 
KQU
( 2169618439506799400), KQU( 2169787627665113463),

764 
KQU
(17314493571267943764), KQU(18053575102911354912),

765 
KQU
(11928303275378476973), KQU(11593850925061715550),

766 
KQU
(17782269923473589362), KQU( 3280235307704747039),

767 
KQU
( 6145343578598685149), KQU(17080117031114086090),

768 
KQU
(18066839902983594755), KQU( 6517508430331020706),

769 
KQU
( 8092908893950411541), KQU(12558378233386153732),

770 
KQU
( 4476532167973132976), KQU(16081642430367025016),

771 
KQU
( 4233154094369139361), KQU( 8693630486693161027),

772 
KQU
(11244959343027742285), KQU(12273503967768513508),

773 
KQU
(14108978636385284876), KQU( 7242414665378826984),

774 
KQU
( 6561316938846562432), KQU( 8601038474994665795),

775 
KQU
(17532942353612365904), KQU(17940076637020912186),

776 
KQU
( 7340260368823171304), KQU( 7061807613916067905),

777 
KQU
(10561734935039519326), KQU(17990796503724650862),

778 
KQU
( 6208732943911827159), KQU( 359077562804090617),

779 
KQU
(14177751537784403113), KQU(10659599444915362902),

780 
KQU
(15081727220615085833), KQU(13417573895659757486),

781 
KQU
(15513842342017811524), KQU(11814141516204288231),

782 
KQU
( 1827312513875101814), KQU( 2804611699894603103),

783 
KQU
(17116500469975602763), KQU(12270191815211952087),

784 
KQU
(12256358467786024988), KQU(18435021722453971267),

785 
KQU
( 671330264390865618), KQU( 476504300460286050),

786 
KQU
(16465470901027093441), KQU( 4047724406247136402),

787 
KQU
( 1322305451411883346), KQU( 1388308688834322280),

788 
KQU
( 7303989085269758176), KQU( 9323792664765233642),

789 
KQU
( 4542762575316368936), KQU(17342696132794337618),

790 
KQU
( 4588025054768498379), KQU(13415475057390330804),

791 
KQU
(17880279491733405570), KQU(10610553400618620353),

792 
KQU
( 3180842072658960139), KQU(13002966655454270120),

793 
KQU
( 1665301181064982826), KQU( 7083673946791258979),

794 
KQU
( 190522247122496820), KQU(17388280237250677740),

795 
KQU
( 8430770379923642945), KQU(12987180971921668584),

796 
KQU
( 2311086108365390642), KQU( 2870984383579822345),

797 
KQU
(14014682609164653318), KQU(14467187293062251484),

798 
KQU
( 192186361147413298), KQU(15171951713531796524),

799 
KQU
( 9900305495015948728), KQU(17958004775615466344),

800 
KQU
(14346380954498606514), KQU(18040047357617407096),

801 
KQU
( 5035237584833424532), KQU(15089555460613972287),

802 
KQU
( 4131411873749729831), KQU( 1329013581168250330),

803 
KQU
(10095353333051193949), KQU(10749518561022462716),

804 
KQU
( 9050611429810755847), KQU(15022028840236655649),

805 
KQU
( 8775554279239748298), KQU(13105754025489230502),

806 
KQU
(15471300118574167585), KQU( 89864764002355628),

807 
KQU
( 8776416323420466637), KQU( 5280258630612040891),

808 
KQU
( 2719174488591862912), KQU( 7599309137399661994),

809 
KQU
(15012887256778039979), KQU(14062981725630928925),

810 
KQU
(12038536286991689603), KQU( 7089756544681775245),

811 
KQU
(10376661532744718039), KQU( 1265198725901533130),

812 
KQU
(13807996727081142408), KQU( 2935019626765036403),

813 
KQU
( 7651672460680700141), KQU( 3644093016200370795),

814 
KQU
( 2840982578090080674), KQU(17956262740157449201),

815 
KQU
(18267979450492880548), KQU(11799503659796848070),

816 
KQU
( 9942537025669672388), KQU(11886606816406990297),

817 
KQU
( 5488594946437447576), KQU( 7226714353282744302),

818 
KQU
( 3784851653123877043), KQU( 878018453244803041),

819 
KQU
(12110022586268616085), KQU( 734072179404675123),

820 
KQU
(11869573627998248542), KQU( 469150421297783998),

821 
KQU
( 260151124912803804), KQU(11639179410120968649),

822 
KQU
( 9318165193840846253), KQU(12795671722734758075),

823 
KQU
(15318410297267253933), KQU( 691524703570062620),

824 
KQU
( 5837129010576994601), KQU(15045963859726941052),

825 
KQU
( 5850056944932238169), KQU(12017434144750943807),

826 
KQU
( 7447139064928956574), KQU( 3101711812658245019),

827 
KQU
(16052940704474982954), KQU(18195745945986994042),

828 
KQU
( 8932252132785575659), KQU(13390817488106794834),

829 
KQU
(11582771836502517453), KQU( 4964411326683611686),

830 
KQU
( 2195093981702694011), KQU(14145229538389675669),

831 
KQU
(16459605532062271798), KQU( 866316924816482864),

832 
KQU
( 4593041209937286377), KQU( 8415491391910972138),

833 
KQU
( 4171236715600528969), KQU(16637569303336782889),

834 
KQU
( 2002011073439212680), KQU(17695124661097601411),

835 
KQU
( 4627687053598611702), KQU( 7895831936020190403),

836 
KQU
( 8455951300917267802), KQU( 2923861649108534854),

837 
KQU
( 8344557563927786255), KQU( 6408671940373352556),

838 
KQU
(12210227354536675772), KQU(14294804157294222295),

839 
KQU
(10103022425071085127), KQU(10092959489504123771),

840 
KQU
( 6554774405376736268), KQU(12629917718410641774),

841 
KQU
( 6260933257596067126), KQU( 2460827021439369673),

842 
KQU
( 2541962996717103668), KQU( 597377203127351475),

843 
KQU
( 5316984203117315309), KQU( 4811211393563241961),

844 
KQU
(13119698597255811641), KQU( 8048691512862388981),

845 
KQU
(10216818971194073842), KQU( 4612229970165291764),

846 
KQU
(10000980798419974770), KQU( 6877640812402540687),

847 
KQU
( 1488727563290436992), KQU( 2227774069895697318),

848 
KQU
(11237754507523316593), KQU(13478948605382290972),

849 
KQU
( 1963583846976858124), KQU( 5512309205269276457),

850 
KQU
( 3972770164717652347), KQU( 3841751276198975037),

851 
KQU
(10283343042181903117), KQU( 8564001259792872199),

852 
KQU
(16472187244722489221), KQU( 8953493499268945921),

853 
KQU
( 3518747340357279580), KQU( 4003157546223963073),

854 
KQU
( 3270305958289814590), KQU( 3966704458129482496),

855 
KQU
( 8122141865926661939), KQU(14627734748099506653),

856 
KQU
(13064426990862560568), KQU( 2414079187889870829),

857 
KQU
( 5378461209354225306), KQU(10841985740128255566),

858 
KQU
( 538582442885401738), KQU( 7535089183482905946),

859 
KQU
(16117559957598879095), KQU( 8477890721414539741),

860 
KQU
( 1459127491209533386), KQU(17035126360733620462),

861 
KQU
( 8517668552872379126), KQU(10292151468337355014),

862 
KQU
(17081267732745344157), KQU(13751455337946087178),

863 
KQU
(14026945459523832966), KQU( 6653278775061723516),

864 
KQU
(10619085543856390441), KQU( 2196343631481122885),

865 
KQU
(10045966074702826136), KQU(10082317330452718282),

866 
KQU
( 5920859259504831242), KQU( 9951879073426540617),

867 
KQU
( 7074696649151414158), KQU(15808193543879464318),

868 
KQU
( 7385247772746953374), KQU( 3192003544283864292),

869 
KQU
(18153684490917593847), KQU(12423498260668568905),

870 
KQU
(10957758099756378169), KQU(11488762179911016040),

871 
KQU
( 2099931186465333782), KQU(11180979581250294432),

872 
KQU
( 8098916250668367933), KQU( 3529200436790763465),

873 
KQU
(12988418908674681745), KQU( 6147567275954808580),

874 
KQU
( 3207503344604030989), KQU(10761592604898615360),

875 
KQU
( 229854861031893504), KQU( 8809853962667144291),

876 
KQU
(13957364469005693860), KQU( 7634287665224495886),

877 
KQU
(12353487366976556874), KQU( 1134423796317152034),

878 
KQU
( 2088992471334107068), KQU( 7393372127190799698),

879 
KQU
( 1845367839871058391), KQU( 207922563987322884),

880 
KQU
(11960870813159944976), KQU(12182120053317317363),

881 
KQU
(17307358132571709283), KQU(13871081155552824936),

882 
KQU
(18304446751741566262), KQU( 7178705220184302849),

883 
KQU
(10929605677758824425), KQU(16446976977835806844),

884 
KQU
(13723874412159769044), KQU( 6942854352100915216),

885 
KQU
( 1726308474365729390), KQU( 2150078766445323155),

886 
KQU
(15345558947919656626), KQU(12145453828874527201),

887 
KQU
( 2054448620739726849), KQU( 2740102003352628137),

888 
KQU
(11294462163577610655), KQU( 756164283387413743),

889 
KQU
(17841144758438810880), KQU(10802406021185415861),

890 
KQU
( 8716455530476737846), KQU( 6321788834517649606),

891 
KQU
(14681322910577468426), KQU(17330043563884336387),

892 
KQU
(12701802180050071614), KQU(14695105111079727151),

893 
KQU
( 5112098511654172830), KQU( 4957505496794139973),

894 
KQU
( 8270979451952045982), KQU(12307685939199120969),

895 
KQU
(12425799408953443032), KQU( 8376410143634796588),

896 
KQU
(16621778679680060464), KQU( 3580497854566660073),

897 
KQU
( 1122515747803382416), KQU( 857664980960597599),

898 
KQU
( 6343640119895925918), KQU(12878473260854462891),

899 
KQU
(10036813920765722626), KQU(14451335468363173812),

900 
KQU
( 5476809692401102807), KQU(16442255173514366342),

901 
KQU
(13060203194757167104), KQU(14354124071243177715),

902 
KQU
(15961249405696125227), KQU(13703893649690872584),

903 
KQU
( 363907326340340064), KQU( 6247455540491754842),

904 
KQU
(12242249332757832361), KQU( 156065475679796717),

905 
KQU
( 9351116235749732355), KQU( 4590350628677701405),

906 
KQU
( 1671195940982350389), KQU(13501398458898451905),

907 
KQU
( 6526341991225002255), KQU( 1689782913778157592),

908 
KQU
( 7439222350869010334), KQU(13975150263226478308),

909 
KQU
(11411961169932682710), KQU(17204271834833847277),

910 
KQU
( 541534742544435367), KQU( 6591191931218949684),

911 
KQU
( 2645454775478232486), KQU( 4322857481256485321),

912 
KQU
( 8477416487553065110), KQU(12902505428548435048),

913 
KQU
( 971445777981341415), KQU(14995104682744976712),

914 
KQU
( 4243341648807158063), KQU( 8695061252721927661),

915 
KQU
( 5028202003270177222), KQU( 2289257340915567840),

916 
KQU
(13870416345121866007), KQU(13994481698072092233),

917 
KQU
( 6912785400753196481), KQU( 2278309315841980139),

918 
KQU
( 4329765449648304839), KQU( 5963108095785485298),

919 
KQU
( 4880024847478722478), KQU(16015608779890240947),

920 
KQU
( 1866679034261393544), KQU( 914821179919731519),

921 
KQU
( 9643404035648760131), KQU( 2418114953615593915),

922 
KQU
( 944756836073702374), KQU(15186388048737296834),

923 
KQU
( 7723355336128442206), KQU( 7500747479679599691),

924 
KQU
(18013961306453293634), KQU( 2315274808095756456),

925 
KQU
(13655308255424029566), KQU(17203800273561677098),

926 
KQU
( 1382158694422087756), KQU( 5090390250309588976),

927 
KQU
( 517170818384213989), KQU( 1612709252627729621),

928 
KQU
( 1330118955572449606), KQU( 300922478056709885),

929 
KQU
(18115693291289091987), KQU(13491407109725238321),

930 
KQU
(15293714633593827320), KQU( 5151539373053314504),

931 
KQU
( 5951523243743139207), KQU(14459112015249527975),

932 
KQU
( 5456113959000700739), KQU( 3877918438464873016),

933 
KQU
(12534071654260163555), KQU(15871678376893555041),

934 
KQU
(11005484805712025549), KQU(16353066973143374252),

935 
KQU
( 4358331472063256685), KQU( 8268349332210859288),

936 
KQU
(12485161590939658075), KQU(13955993592854471343),

937 
KQU
( 5911446886848367039), KQU(14925834086813706974),

938 
KQU
( 6590362597857994805), KQU( 1280544923533661875),

939 
KQU
( 1637756018947988164), KQU( 4734090064512686329),

940 
KQU
(16693705263131485912), KQU( 6834882340494360958),

941 
KQU
( 8120732176159658505), KQU( 2244371958905329346),

942 
KQU
(10447499707729734021), KQU( 7318742361446942194),

943 
KQU
( 8032857516355555296), KQU(14023605983059313116),

944 
KQU
( 1032336061815461376), KQU( 9840995337876562612),

945 
KQU
( 9869256223029203587), KQU(12227975697177267636),

946 
KQU
(12728115115844186033), KQU( 7752058479783205470),

947 
KQU
( 729733219713393087), KQU(12954017801239007622)

949 c⁄° 
uöt64_t
 
	göô_by_¨øy_64_ex≥˘ed
[] = {

950 
KQU
( 2100341266307895239), KQU( 8344256300489757943),

951 
KQU
(15687933285484243894), KQU( 8268620370277076319),

952 
KQU
(12371852309826545459), KQU( 8800491541730110238),

953 
KQU
(18113268950100835773), KQU( 2886823658884438119),

954 
KQU
( 3293667307248180724), KQU( 9307928143300172731),

955 
KQU
( 7688082017574293629), KQU( 900986224735166665),

956 
KQU
( 9977972710722265039), KQU( 6008205004994830552),

957 
KQU
( 546909104521689292), KQU( 7428471521869107594),

958 
KQU
(14777563419314721179), KQU(16116143076567350053),

959 
KQU
( 5322685342003142329), KQU( 4200427048445863473),

960 
KQU
( 4693092150132559146), KQU(13671425863759338582),

961 
KQU
( 6747117460737639916), KQU( 4732666080236551150),

962 
KQU
( 5912839950611941263), KQU( 3903717554504704909),

963 
KQU
( 2615667650256786818), KQU(10844129913887006352),

964 
KQU
(13786467861810997820), KQU(14267853002994021570),

965 
KQU
(13767807302847237439), KQU(16407963253707224617),

966 
KQU
( 4802498363698583497), KQU( 2523802839317209764),

967 
KQU
( 3822579397797475589), KQU( 8950320572212130610),

968 
KQU
( 3745623504978342534), KQU(16092609066068482806),

969 
KQU
( 9817016950274642398), KQU(10591660660323829098),

970 
KQU
(11751606650792815920), KQU( 5122873818577122211),

971 
KQU
(17209553764913936624), KQU( 6249057709284380343),

972 
KQU
(15088791264695071830), KQU(15344673071709851930),

973 
KQU
( 4345751415293646084), KQU( 2542865750703067928),

974 
KQU
(13520525127852368784), KQU(18294188662880997241),

975 
KQU
( 3871781938044881523), KQU( 2873487268122812184),

976 
KQU
(15099676759482679005), KQU(15442599127239350490),

977 
KQU
( 6311893274367710888), KQU( 3286118760484672933),

978 
KQU
( 4146067961333542189), KQU(13303942567897208770),

979 
KQU
( 8196013722255630418), KQU( 4437815439340979989),

980 
KQU
(15433791533450605135), KQU( 4254828956815687049),

981 
KQU
( 1310903207708286015), KQU(10529182764462398549),

982 
KQU
(14900231311660638810), KQU( 9727017277104609793),

983 
KQU
( 1821308310948199033), KQU(11628861435066772084),

984 
KQU
( 9469019138491546924), KQU( 3145812670532604988),

985 
KQU
( 9938468915045491919), KQU( 1562447430672662142),

986 
KQU
(13963995266697989134), KQU( 3356884357625028695),

987 
KQU
( 4499850304584309747), KQU( 8456825817023658122),

988 
KQU
(10859039922814285279), KQU( 8099512337972526555),

989 
KQU
( 348006375109672149), KQU(11919893998241688603),

990 
KQU
( 1104199577402948826), KQU(16689191854356060289),

991 
KQU
(10992552041730168078), KQU( 7243733172705465836),

992 
KQU
( 5668075606180319560), KQU(18182847037333286970),

993 
KQU
( 4290215357664631322), KQU( 4061414220791828613),

994 
KQU
(13006291061652989604), KQU( 7140491178917128798),

995 
KQU
(12703446217663283481), KQU( 5500220597564558267),

996 
KQU
(10330551509971296358), KQU(15958554768648714492),

997 
KQU
( 5174555954515360045), KQU( 1731318837687577735),

998 
KQU
( 3557700801048354857), KQU(13764012341928616198),

999 
KQU
(13115166194379119043), KQU( 7989321021560255519),

1000 
KQU
( 2103584280905877040), KQU( 9230788662155228488),

1001 
KQU
(16396629323325547654), KQU( 657926409811318051),

1002 
KQU
(15046700264391400727), KQU( 5120132858771880830),

1003 
KQU
( 7934160097989028561), KQU( 6963121488531976245),

1004 
KQU
(17412329602621742089), KQU(15144843053931774092),

1005 
KQU
(17204176651763054532), KQU(13166595387554065870),

1006 
KQU
( 8590377810513960213), KQU( 5834365135373991938),

1007 
KQU
( 7640913007182226243), KQU( 3479394703859418425),

1008 
KQU
(16402784452644521040), KQU( 4993979809687083980),

1009 
KQU
(13254522168097688865), KQU(15643659095244365219),

1010 
KQU
( 5881437660538424982), KQU(11174892200618987379),

1011 
KQU
( 254409966159711077), KQU(17158413043140549909),

1012 
KQU
( 3638048789290376272), KQU( 1376816930299489190),

1013 
KQU
( 4622462095217761923), KQU(15086407973010263515),

1014 
KQU
(13253971772784692238), KQU( 5270549043541649236),

1015 
KQU
(11182714186805411604), KQU(12283846437495577140),

1016 
KQU
( 5297647149908953219), KQU(10047451738316836654),

1017 
KQU
( 4938228100367874746), KQU(12328523025304077923),

1018 
KQU
( 3601049438595312361), KQU( 9313624118352733770),

1019 
KQU
(13322966086117661798), KQU(16660005705644029394),

1020 
KQU
(11337677526988872373), KQU(13869299102574417795),

1021 
KQU
(15642043183045645437), KQU( 3021755569085880019),

1022 
KQU
( 4979741767761188161), KQU(13679979092079279587),

1023 
KQU
( 3344685842861071743), KQU(13947960059899588104),

1024 
KQU
( 305806934293368007), KQU( 5749173929201650029),

1025 
KQU
(11123724852118844098), KQU(15128987688788879802),

1026 
KQU
(15251651211024665009), KQU( 7689925933816577776),

1027 
KQU
(16732804392695859449), KQU(17087345401014078468),

1028 
KQU
(14315108589159048871), KQU( 4820700266619778917),

1029 
KQU
(16709637539357958441), KQU( 4936227875177351374),

1030 
KQU
( 2137907697912987247), KQU(11628565601408395420),

1031 
KQU
( 2333250549241556786), KQU( 5711200379577778637),

1032 
KQU
( 5170680131529031729), KQU(12620392043061335164),

1033 
KQU
( 95363390101096078), KQU( 5487981914081709462),

1034 
KQU
( 1763109823981838620), KQU( 3395861271473224396),

1035 
KQU
( 1300496844282213595), KQU( 6894316212820232902),

1036 
KQU
(10673859651135576674), KQU( 5911839658857903252),

1037 
KQU
(17407110743387299102), KQU( 8257427154623140385),

1038 
KQU
(11389003026741800267), KQU( 4070043211095013717),

1039 
KQU
(11663806997145259025), KQU(15265598950648798210),

1040 
KQU
( 630585789434030934), KQU( 3524446529213587334),

1041 
KQU
( 7186424168495184211), KQU(10806585451386379021),

1042 
KQU
(11120017753500499273), KQU( 1586837651387701301),

1043 
KQU
(17530454400954415544), KQU( 9991670045077880430),

1044 
KQU
( 7550997268990730180), KQU( 8640249196597379304),

1045 
KQU
( 3522203892786893823), KQU(10401116549878854788),

1046 
KQU
(13690285544733124852), KQU( 8295785675455774586),

1047 
KQU
(15535716172155117603), KQU( 3112108583723722511),

1048 
KQU
(17633179955339271113), KQU(18154208056063759375),

1049 
KQU
( 1866409236285815666), KQU(13326075895396412882),

1050 
KQU
( 8756261842948020025), KQU( 6281852999868439131),

1051 
KQU
(15087653361275292858), KQU(10333923911152949397),

1052 
KQU
( 5265567645757408500), KQU(12728041843210352184),

1053 
KQU
( 6347959327507828759), KQU( 154112802625564758),

1054 
KQU
(18235228308679780218), KQU( 3253805274673352418),

1055 
KQU
( 4849171610689031197), KQU(17948529398340432518),

1056 
KQU
(13803510475637409167), KQU(13506570190409883095),

1057 
KQU
(15870801273282960805), KQU( 8451286481299170773),

1058 
KQU
( 9562190620034457541), KQU( 8518905387449138364),

1059 
KQU
(12681306401363385655), KQU( 3788073690559762558),

1060 
KQU
( 5256820289573487769), KQU( 2752021372314875467),

1061 
KQU
( 6354035166862520716), KQU( 4328956378309739069),

1062 
KQU
( 449087441228269600), KQU( 5533508742653090868),

1063 
KQU
( 1260389420404746988), KQU(18175394473289055097),

1064 
KQU
( 1535467109660399420), KQU( 8818894282874061442),

1065 
KQU
(12140873243824811213), KQU(15031386653823014946),

1066 
KQU
( 1286028221456149232), KQU( 6329608889367858784),

1067 
KQU
( 9419654354945132725), KQU( 6094576547061672379),

1068 
KQU
(17706217251847450255), KQU( 1733495073065878126),

1069 
KQU
(16918923754607552663), KQU( 8881949849954945044),

1070 
KQU
(12938977706896313891), KQU(14043628638299793407),

1071 
KQU
(18393874581723718233), KQU( 6886318534846892044),

1072 
KQU
(14577870878038334081), KQU(13541558383439414119),

1073 
KQU
(13570472158807588273), KQU(18300760537910283361),

1074 
KQU
( 818368572800609205), KQU( 1417000585112573219),

1075 
KQU
(12337533143867683655), KQU(12433180994702314480),

1076 
KQU
( 778190005829189083), KQU(13667356216206524711),

1077 
KQU
( 9866149895295225230), KQU(11043240490417111999),

1078 
KQU
( 1123933826541378598), KQU( 6469631933605123610),

1079 
KQU
(14508554074431980040), KQU(13918931242962026714),

1080 
KQU
( 2870785929342348285), KQU(14786362626740736974),

1081 
KQU
(13176680060902695786), KQU( 9591778613541679456),

1082 
KQU
( 9097662885117436706), KQU( 749262234240924947),

1083 
KQU
( 1944844067793307093), KQU( 4339214904577487742),

1084 
KQU
( 8009584152961946551), KQU(16073159501225501777),

1085 
KQU
( 3335870590499306217), KQU(17088312653151202847),

1086 
KQU
( 3108893142681931848), KQU(16636841767202792021),

1087 
KQU
(10423316431118400637), KQU( 8008357368674443506),

1088 
KQU
(11340015231914677875), KQU(17687896501594936090),

1089 
KQU
(15173627921763199958), KQU( 542569482243721959),

1090 
KQU
(15071714982769812975), KQU( 4466624872151386956),

1091 
KQU
( 1901780715602332461), KQU( 9822227742154351098),

1092 
KQU
( 1479332892928648780), KQU( 6981611948382474400),

1093 
KQU
( 7620824924456077376), KQU(14095973329429406782),

1094 
KQU
( 7902744005696185404), KQU(15830577219375036920),

1095 
KQU
(10287076667317764416), KQU(12334872764071724025),

1096 
KQU
( 4419302088133544331), KQU(14455842851266090520),

1097 
KQU
(12488077416504654222), KQU( 7953892017701886766),

1098 
KQU
( 6331484925529519007), KQU( 4902145853785030022),

1099 
KQU
(17010159216096443073), KQU(11945354668653886087),

1100 
KQU
(15112022728645230829), KQU(17363484484522986742),

1101 
KQU
( 4423497825896692887), KQU( 8155489510809067471),

1102 
KQU
( 258966605622576285), KQU( 5462958075742020534),

1103 
KQU
( 6763710214913276228), KQU( 2368935183451109054),

1104 
KQU
(14209506165246453811), KQU( 2646257040978514881),

1105 
KQU
( 3776001911922207672), KQU( 1419304601390147631),

1106 
KQU
(14987366598022458284), KQU( 3977770701065815721),

1107 
KQU
( 730820417451838898), KQU( 3982991703612885327),

1108 
KQU
( 2803544519671388477), KQU(17067667221114424649),

1109 
KQU
( 2922555119737867166), KQU( 1989477584121460932),

1110 
KQU
(15020387605892337354), KQU( 9293277796427533547),

1111 
KQU
(10722181424063557247), KQU(16704542332047511651),

1112 
KQU
( 5008286236142089514), KQU(16174732308747382540),

1113 
KQU
(17597019485798338402), KQU(13081745199110622093),

1114 
KQU
( 8850305883842258115), KQU(12723629125624589005),

1115 
KQU
( 8140566453402805978), KQU(15356684607680935061),

1116 
KQU
(14222190387342648650), KQU(11134610460665975178),

1117 
KQU
( 1259799058620984266), KQU(13281656268025610041),

1118 
KQU
( 298262561068153992), KQU(12277871700239212922),

1119 
KQU
(13911297774719779438), KQU(16556727962761474934),

1120 
KQU
(17903010316654728010), KQU( 9682617699648434744),

1121 
KQU
(14757681836838592850), KQU( 1327242446558524473),

1122 
KQU
(11126645098780572792), KQU( 1883602329313221774),

1123 
KQU
( 2543897783922776873), KQU(15029168513767772842),

1124 
KQU
(12710270651039129878), KQU(16118202956069604504),

1125 
KQU
(15010759372168680524), KQU( 2296827082251923948),

1126 
KQU
(10793729742623518101), KQU(13829764151845413046),

1127 
KQU
(17769301223184451213), KQU( 3118268169210783372),

1128 
KQU
(17626204544105123127), KQU( 7416718488974352644),

1129 
KQU
(10450751996212925994), KQU( 9352529519128770586),

1130 
KQU
( 259347569641110140), KQU( 8048588892269692697),

1131 
KQU
( 1774414152306494058), KQU(10669548347214355622),

1132 
KQU
(13061992253816795081), KQU(18432677803063861659),

1133 
KQU
( 8879191055593984333), KQU(12433753195199268041),

1134 
KQU
(14919392415439730602), KQU( 6612848378595332963),

1135 
KQU
( 6320986812036143628), KQU(10465592420226092859),

1136 
KQU
( 4196009278962570808), KQU( 3747816564473572224),

1137 
KQU
(17941203486133732898), KQU( 2350310037040505198),

1138 
KQU
( 5811779859134370113), KQU(10492109599506195126),

1139 
KQU
( 7699650690179541274), KQU( 1954338494306022961),

1140 
KQU
(14095816969027231152), KQU( 5841346919964852061),

1141 
KQU
(14945969510148214735), KQU( 3680200305887550992),

1142 
KQU
( 6218047466131695792), KQU( 8242165745175775096),

1143 
KQU
(11021371934053307357), KQU( 1265099502753169797),

1144 
KQU
( 4644347436111321718), KQU( 3609296916782832859),

1145 
KQU
( 8109807992218521571), KQU(18387884215648662020),

1146 
KQU
(14656324896296392902), KQU(17386819091238216751),

1147 
KQU
(17788300878582317152), KQU( 7919446259742399591),

1148 
KQU
( 4466613134576358004), KQU(12928181023667938509),

1149 
KQU
(13147446154454932030), KQU(16552129038252734620),

1150 
KQU
( 8395299403738822450), KQU(11313817655275361164),

1151 
KQU
( 434258809499511718), KQU( 2074882104954788676),

1152 
KQU
( 7929892178759395518), KQU( 9006461629105745388),

1153 
KQU
( 5176475650000323086), KQU(11128357033468341069),

1154 
KQU
(12026158851559118955), KQU(14699716249471156500),

1155 
KQU
( 448982497120206757), KQU( 4156475356685519900),

1156 
KQU
( 6063816103417215727), KQU(10073289387954971479),

1157 
KQU
( 8174466846138590962), KQU( 2675777452363449006),

1158 
KQU
( 9090685420572474281), KQU( 6659652652765562060),

1159 
KQU
(12923120304018106621), KQU(11117480560334526775),

1160 
KQU
( 937910473424587511), KQU( 1838692113502346645),

1161 
KQU
(11133914074648726180), KQU( 7922600945143884053),

1162 
KQU
(13435287702700959550), KQU( 5287964921251123332),

1163 
KQU
(11354875374575318947), KQU(17955724760748238133),

1164 
KQU
(13728617396297106512), KQU( 4107449660118101255),

1165 
KQU
( 1210269794886589623), KQU(11408687205733456282),

1166 
KQU
( 4538354710392677887), KQU(13566803319341319267),

1167 
KQU
(17870798107734050771), KQU( 3354318982568089135),

1168 
KQU
( 9034450839405133651), KQU(13087431795753424314),

1169 
KQU
( 950333102820688239), KQU( 1968360654535604116),

1170 
KQU
(16840551645563314995), KQU( 8867501803892924995),

1171 
KQU
(11395388644490626845), KQU( 1529815836300732204),

1172 
KQU
(13330848522996608842), KQU( 1813432878817504265),

1173 
KQU
( 2336867432693429560), KQU(15192805445973385902),

1174 
KQU
( 2528593071076407877), KQU( 128459777936689248),

1175 
KQU
( 9976345382867214866), KQU( 6208885766767996043),

1176 
KQU
(14982349522273141706), KQU( 3099654362410737822),

1177 
KQU
(13776700761947297661), KQU( 8806185470684925550),

1178 
KQU
( 8151717890410585321), KQU( 640860591588072925),

1179 
KQU
(14592096303937307465), KQU( 9056472419613564846),

1180 
KQU
(14861544647742266352), KQU(12703771500398470216),

1181 
KQU
( 3142372800384138465), KQU( 6201105606917248196),

1182 
KQU
(18337516409359270184), KQU(15042268695665115339),

1183 
KQU
(15188246541383283846), KQU(12800028693090114519),

1184 
KQU
( 5992859621101493472), KQU(18278043971816803521),

1185 
KQU
( 9002773075219424560), KQU( 7325707116943598353),

1186 
KQU
( 7930571931248040822), KQU( 5645275869617023448),

1187 
KQU
( 7266107455295958487), KQU( 4363664528273524411),

1188 
KQU
(14313875763787479809), KQU(17059695613553486802),

1189 
KQU
( 9247761425889940932), KQU(13704726459237593128),

1190 
KQU
( 2701312427328909832), KQU(17235532008287243115),

1191 
KQU
(14093147761491729538), KQU( 6247352273768386516),

1192 
KQU
( 8268710048153268415), KQU( 7985295214477182083),

1193 
KQU
(15624495190888896807), KQU( 3772753430045262788),

1194 
KQU
( 9133991620474991698), KQU( 5665791943316256028),

1195 
KQU
( 7551996832462193473), KQU(13163729206798953877),

1196 
KQU
( 9263532074153846374), KQU( 1015460703698618353),

1197 
KQU
(17929874696989519390), KQU(18257884721466153847),

1198 
KQU
(16271867543011222991), KQU( 3905971519021791941),

1199 
KQU
(16814488397137052085), KQU( 1321197685504621613),

1200 
KQU
( 2870359191894002181), KQU(14317282970323395450),

1201 
KQU
(13663920845511074366), KQU( 2052463995796539594),

1202 
KQU
(14126345686431444337), KQU( 1727572121947022534),

1203 
KQU
(17793552254485594241), KQU( 6738857418849205750),

1204 
KQU
( 1282987123157442952), KQU(16655480021581159251),

1205 
KQU
( 6784587032080183866), KQU(14726758805359965162),

1206 
KQU
( 7577995933961987349), KQU(12539609320311114036),

1207 
KQU
(10789773033385439494), KQU( 8517001497411158227),

1208 
KQU
(10075543932136339710), KQU(14838152340938811081),

1209 
KQU
( 9560840631794044194), KQU(17445736541454117475),

1210 
KQU
(10633026464336393186), KQU(15705729708242246293),

1211 
KQU
( 1117517596891411098), KQU( 4305657943415886942),

1212 
KQU
( 4948856840533979263), KQU(16071681989041789593),

1213 
KQU
(13723031429272486527), KQU( 7639567622306509462),

1214 
KQU
(12670424537483090390), KQU( 9715223453097197134),

1215 
KQU
( 5457173389992686394), KQU( 289857129276135145),

1216 
KQU
(17048610270521972512), KQU( 692768013309835485),

1217 
KQU
(14823232360546632057), KQU(18218002361317895936),

1218 
KQU
( 3281724260212650204), KQU(16453957266549513795),

1219 
KQU
( 8592711109774511881), KQU( 929825123473369579),

1220 
KQU
(15966784769764367791), KQU( 9627344291450607588),

1221 
KQU
(10849555504977813287), KQU( 9234566913936339275),

1222 
KQU
( 6413807690366911210), KQU(10862389016184219267),

1223 
KQU
(13842504799335374048), KQU( 1531994113376881174),

1224 
KQU
( 2081314867544364459), KQU(16430628791616959932),

1225 
KQU
( 8314714038654394368), KQU( 9155473892098431813),

1226 
KQU
(12577843786670475704), KQU( 4399161106452401017),

1227 
KQU
( 1668083091682623186), KQU( 1741383777203714216),

1228 
KQU
( 2162597285417794374), KQU(15841980159165218736),

1229 
KQU
( 1971354603551467079), KQU( 1206714764913205968),

1230 
KQU
( 4790860439591272330), KQU(14699375615594055799),

1231 
KQU
( 8374423871657449988), KQU(10950685736472937738),

1232 
KQU
( 697344331343267176), KQU(10084998763118059810),

1233 
KQU
(12897369539795983124), KQU(12351260292144383605),

1234 
KQU
( 1268810970176811234), KQU( 7406287800414582768),

1235 
KQU
( 516169557043807831), KQU( 5077568278710520380),

1236 
KQU
( 3828791738309039304), KQU( 7721974069946943610),

1237 
KQU
( 3534670260981096460), KQU( 4865792189600584891),

1238 
KQU
(16892578493734337298), KQU( 9161499464278042590),

1239 
KQU
(11976149624067055931), KQU(13219479887277343990),

1240 
KQU
(14161556738111500680), KQU(14670715255011223056),

1241 
KQU
( 4671205678403576558), KQU(12633022931454259781),

1242 
KQU
(14821376219869187646), KQU( 751181776484317028),

1243 
KQU
( 2192211308839047070), KQU(11787306362361245189),

1244 
KQU
(10672375120744095707), KQU( 4601972328345244467),

1245 
KQU
(15457217788831125879), KQU( 8464345256775460809),

1246 
KQU
(10191938789487159478), KQU( 6184348739615197613),

1247 
KQU
(11425436778806882100), KQU( 2739227089124319793),

1248 
KQU
( 461464518456000551), KQU( 4689850170029177442),

1249 
KQU
( 6120307814374078625), KQU(11153579230681708671),

1250 
KQU
( 7891721473905347926), KQU(10281646937824872400),

1251 
KQU
( 3026099648191332248), KQU( 8666750296953273818),

1252 
KQU
(14978499698844363232), KQU(13303395102890132065),

1253 
KQU
( 8182358205292864080), KQU(10560547713972971291),

1254 
KQU
(11981635489418959093), KQU( 3134621354935288409),

1255 
KQU
(11580681977404383968), KQU(14205530317404088650),

1256 
KQU
( 5997789011854923157), KQU(13659151593432238041),

1257 
KQU
(11664332114338865086), KQU( 7490351383220929386),

1258 
KQU
( 7189290499881530378), KQU(15039262734271020220),

1259 
KQU
( 2057217285976980055), KQU( 555570804905355739),

1260 
KQU
(11235311968348555110), KQU(13824557146269603217),

1261 
KQU
(16906788840653099693), KQU( 7222878245455661677),

1262 
KQU
( 5245139444332423756), KQU( 4723748462805674292),

1263 
KQU
(12216509815698568612), KQU(17402362976648951187),

1264 
KQU
(17389614836810366768), KQU( 4880936484146667711),

1265 
KQU
( 9085007839292639880), KQU(13837353458498535449),

1266 
KQU
(11914419854360366677), KQU(16595890135313864103),

1267 
KQU
( 6313969847197627222), KQU(18296909792163910431),

1268 
KQU
(10041780113382084042), KQU( 2499478551172884794),

1269 
KQU
(11057894246241189489), KQU( 9742243032389068555),

1270 
KQU
(12838934582673196228), KQU(13437023235248490367),

1271 
KQU
(13372420669446163240), KQU( 6752564244716909224),

1272 
KQU
( 7157333073400313737), KQU(12230281516370654308),

1273 
KQU
( 1182884552219419117), KQU( 2955125381312499218),

1274 
KQU
(10308827097079443249), KQU( 1337648572986534958),

1275 
KQU
(16378788590020343939), KQU( 108619126514420935),

1276 
KQU
( 3990981009621629188), KQU( 5460953070230946410),

1277 
KQU
( 9703328329366531883), KQU(13166631489188077236),

1278 
KQU
( 1104768831213675170), KQU( 3447930458553877908),

1279 
KQU
( 8067172487769945676), KQU( 5445802098190775347),

1280 
KQU
( 3244840981648973873), KQU(17314668322981950060),

1281 
KQU
( 5006812527827763807), KQU(18158695070225526260),

1282 
KQU
( 2824536478852417853), KQU(13974775809127519886),

1283 
KQU
( 9814362769074067392), KQU(17276205156374862128),

1284 
KQU
(11361680725379306967), KQU( 3422581970382012542),

1285 
KQU
(11003189603753241266), KQU(11194292945277862261),

1286 
KQU
( 6839623313908521348), KQU(11935326462707324634),

1287 
KQU
( 1611456788685878444), KQU(13112620989475558907),

1288 
KQU
( 517659108904450427), KQU(13558114318574407624),

1289 
KQU
(15699089742731633077), KQU( 4988979278862685458),

1290 
KQU
( 8111373583056521297), KQU( 3891258746615399627),

1291 
KQU
( 8137298251469718086), KQU(12748663295624701649),

1292 
KQU
( 4389835683495292062), KQU( 5775217872128831729),

1293 
KQU
( 9462091896405534927), KQU( 8498124108820263989),

1294 
KQU
( 8059131278842839525), KQU(10503167994254090892),

1295 
KQU
(11613153541070396656), KQU(18069248738504647790),

1296 
KQU
( 570657419109768508), KQU( 3950574167771159665),

1297 
KQU
( 5514655599604313077), KQU( 2908460854428484165),

1298 
KQU
(10777722615935663114), KQU(12007363304839279486),

1299 
KQU
( 9800646187569484767), KQU( 8795423564889864287),

1300 
KQU
(14257396680131028419), KQU( 6405465117315096498),

1301 
KQU
( 7939411072208774878), KQU(17577572378528990006),

1302 
KQU
(14785873806715994850), KQU(16770572680854747390),

1303 
KQU
(18127549474419396481), KQU(11637013449455757750),

1304 
KQU
(14371851933996761086), KQU( 3601181063650110280),

1305 
KQU
( 4126442845019316144), KQU(10198287239244320669),

1306 
KQU
(18000169628555379659), KQU(18392482400739978269),

1307 
KQU
( 6219919037686919957), KQU( 3610085377719446052),

1308 
KQU
( 2513925039981776336), KQU(16679413537926716955),

1309 
KQU
(12903302131714909434), KQU( 5581145789762985009),

1310 
KQU
(12325955044293303233), KQU(17216111180742141204),

1311 
KQU
( 6321919595276545740), KQU( 3507521147216174501),

1312 
KQU
( 9659194593319481840), KQU(11473976005975358326),

1313 
KQU
(14742730101435987026), KQU( 492845897709954780),

1314 
KQU
(16976371186162599676), KQU(17712703422837648655),

1315 
KQU
( 9881254778587061697), KQU( 8413223156302299551),

1316 
KQU
( 1563841828254089168), KQU( 9996032758786671975),

1317 
KQU
( 138877700583772667), KQU(13003043368574995989),

1318 
KQU
( 4390573668650456587), KQU( 8610287390568126755),

1319 
KQU
(15126904974266642199), KQU( 6703637238986057662),

1320 
KQU
( 2873075592956810157), KQU( 6035080933946049418),

1321 
KQU
(13382846581202353014), KQU( 7303971031814642463),

1322 
KQU
(18418024405307444267), KQU( 5847096731675404647),

1323 
KQU
( 4035880699639842500), KQU(11525348625112218478),

1324 
KQU
( 3041162365459574102), KQU( 2604734487727986558),

1325 
KQU
(15526341771636983145), KQU(14556052310697370254),

1326 
KQU
(12997787077930808155), KQU( 9601806501755554499),

1327 
KQU
(11349677952521423389), KQU(14956777807644899350),

1328 
KQU
(16559736957742852721), KQU(12360828274778140726),

1329 
KQU
( 6685373272009662513), KQU(16932258748055324130),

1330 
KQU
(15918051131954158508), KQU( 1692312913140790144),

1331 
KQU
( 546653826801637367), KQU( 5341587076045986652),

1332 
KQU
(14975057236342585662), KQU(12374976357340622412),

1333 
KQU
(10328833995181940552), KQU(12831807101710443149),

1334 
KQU
(10548514914382545716), KQU( 2217806727199715993),

1335 
KQU
(12627067369242845138), KQU( 4598965364035438158),

1336 
KQU
( 150923352751318171), KQU(14274109544442257283),

1337 
KQU
( 4696661475093863031), KQU( 1505764114384654516),

1338 
KQU
(10699185831891495147), KQU( 2392353847713620519),

1339 
KQU
( 3652870166711788383), KQU( 8640653276221911108),

1340 
KQU
( 3894077592275889704), KQU( 4918592872135964845),

1341 
KQU
(16379121273281400789), KQU(12058465483591683656),

1342 
KQU
(11250106829302924945), KQU( 1147537556296983005),

1343 
KQU
( 6376342756004613268), KQU(14967128191709280506),

1344 
KQU
(18007449949790627628), KQU( 9497178279316537841),

1345 
KQU
( 7920174844809394893), KQU(10037752595255719907),

1346 
KQU
(15875342784985217697), KQU(15311615921712850696),

1347 
KQU
( 9552902652110992950), KQU(14054979450099721140),

1348 
KQU
( 5998709773566417349), KQU(18027910339276320187),

1349 
KQU
( 8223099053868585554), KQU( 7842270354824999767),

1350 
KQU
( 4896315688770080292), KQU(12969320296569787895),

1351 
KQU
( 2674321489185759961), KQU( 4053615936864718439),

1352 
KQU
(11349775270588617578), KQU( 4743019256284553975),

1353 
KQU
( 5602100217469723769), KQU(14398995691411527813),

1354 
KQU
( 7412170493796825470), KQU( 836262406131744846),

1355 
KQU
( 8231086633845153022), KQU( 5161377920438552287),

1356 
KQU
( 8828731196169924949), KQU(16211142246465502680),

1357 
KQU
( 3307990879253687818), KQU( 5193405406899782022),

1358 
KQU
( 8510842117467566693), KQU( 6070955181022405365),

1359 
KQU
(14482950231361409799), KQU(12585159371331138077),

1360 
KQU
( 3511537678933588148), KQU( 2041849474531116417),

1361 
KQU
(10944936685095345792), KQU(18303116923079107729),

1362 
KQU
( 2720566371239725320), KQU( 4958672473562397622),

1363 
KQU
( 3032326668253243412), KQU(13689418691726908338),

1364 
KQU
( 1895205511728843996), KQU( 8146303515271990527),

1365 
KQU
(16507343500056113480), KQU( 473996939105902919),

1366 
KQU
( 9897686885246881481), KQU(14606433762712790575),

1367 
KQU
( 6732796251605566368), KQU( 1399778120855368916),

1368 
KQU
( 935023885182833777), KQU(16066282816186753477),

1369 
KQU
( 7291270991820612055), KQU(17530230393129853844),

1370 
KQU
(10223493623477451366), KQU(15841725630495676683),

1371 
KQU
(17379567246435515824), KQU( 8588251429375561971),

1372 
KQU
(18339511210887206423), KQU(17349587430725976100),

1373 
KQU
(12244876521394838088), KQU( 6382187714147161259),

1374 
KQU
(12335807181848950831), KQU(16948885622305460665),

1375 
KQU
(13755097796371520506), KQU(14806740373324947801),

1376 
KQU
( 4828699633859287703), KQU( 8209879281452301604),

1377 
KQU
(12435716669553736437), KQU(13970976859588452131),

1378 
KQU
( 6233960842566773148), KQU(12507096267900505759),

1379 
KQU
( 1198713114381279421), KQU(14989862731124149015),

1380 
KQU
(15932189508707978949), KQU( 2526406641432708722),

1381 
KQU
( 29187427817271982), KQU( 1499802773054556353),

1382 
KQU
(10816638187021897173), KQU( 5436139270839738132),

1383 
KQU
( 6659882287036010082), KQU( 2154048955317173697),

1384 
KQU
(10887317019333757642), KQU(16281091802634424955),

1385 
KQU
(10754549879915384901), KQU(10760611745769249815),

1386 
KQU
( 2161505946972504002), KQU( 5243132808986265107),

1387 
KQU
(10129852179873415416), KQU( 710339480008649081),

1388 
KQU
( 7802129453068808528), KQU(17967213567178907213),

1389 
KQU
(15730859124668605599), KQU(13058356168962376502),

1390 
KQU
( 3701224985413645909), KQU(14464065869149109264),

1391 
KQU
( 9959272418844311646), KQU(10157426099515958752),

1392 
KQU
(14013736814538268528), KQU(17797456992065653951),

1393 
KQU
(17418878140257344806), KQU(15457429073540561521),

1394 
KQU
( 2184426881360949378), KQU( 2062193041154712416),

1395 
KQU
( 8553463347406931661), KQU( 4913057625202871854),

1396 
KQU
( 2668943682126618425), KQU(17064444737891172288),

1397 
KQU
( 4997115903913298637), KQU(12019402608892327416),

1398 
KQU
(17603584559765897352), KQU(11367529582073647975),

1399 
KQU
( 8211476043518436050), KQU( 8676849804070323674),

1400 
KQU
(18431829230394475730), KQU(10490177861361247904),

1401 
KQU
( 9508720602025651349), KQU( 7409627448555722700),

1402 
KQU
( 5804047018862729008), KQU(11943858176893142594),

1403 
KQU
(11908095418933847092), KQU( 5415449345715887652),

1404 
KQU
( 1554022699166156407), KQU( 9073322106406017161),

1405 
KQU
( 7080630967969047082), KQU(18049736940860732943),

1406 
KQU
(12748714242594196794), KQU( 1226992415735156741),

1407 
KQU
(17900981019609531193), KQU(11720739744008710999),

1408 
KQU
( 3006400683394775434), KQU(11347974011751996028),

1409 
KQU
( 3316999628257954608), KQU( 8384484563557639101),

1410 
KQU
(18117794685961729767), KQU( 1900145025596618194),

1411 
KQU
(17459527840632892676), KQU( 5634784101865710994),

1412 
KQU
( 7918619300292897158), KQU( 3146577625026301350),

1413 
KQU
( 9955212856499068767), KQU( 1873995843681746975),

1414 
KQU
( 1561487759967972194), KQU( 8322718804375878474),

1415 
KQU
(11300284215327028366), KQU( 4667391032508998982),

1416 
KQU
( 9820104494306625580), KQU(17922397968599970610),

1417 
KQU
( 1784690461886786712), KQU(14940365084341346821),

1418 
KQU
( 5348719575594186181), KQU(10720419084507855261),

1419 
KQU
(14210394354145143274), KQU( 2426468692164000131),

1420 
KQU
(16271062114607059202), KQU(14851904092357070247),

1421 
KQU
( 6524493015693121897), KQU( 9825473835127138531),

1422 
KQU
(14222500616268569578), KQU(15521484052007487468),

1423 
KQU
(14462579404124614699), KQU(11012375590820665520),

1424 
KQU
(11625327350536084927), KQU(14452017765243785417),

1425 
KQU
( 9989342263518766305), KQU( 3640105471101803790),

1426 
KQU
( 4749866455897513242), KQU(13963064946736312044),

1427 
KQU
(10007416591973223791), KQU(18314132234717431115),

1428 
KQU
( 3286596588617483450), KQU( 7726163455370818765),

1429 
KQU
( 7575454721115379328), KQU( 5308331576437663422),

1430 
KQU
(18288821894903530934), KQU( 8028405805410554106),

1431 
KQU
(15744019832103296628), KQU( 149765559630932100),

1432 
KQU
( 6137705557200071977), KQU(14513416315434803615),

1433 
KQU
(11665702820128984473), KQU( 218926670505601386),

1434 
KQU
( 6868675028717769519), KQU(15282016569441512302),

1435 
KQU
( 5707000497782960236), KQU( 6671120586555079567),

1436 
KQU
( 2194098052618985448), KQU(16849577895477330978),

1437 
KQU
(12957148471017466283), KQU( 1997805535404859393),

1438 
KQU
( 1180721060263860490), KQU(13206391310193756958),

1439 
KQU
(12980208674461861797), KQU( 3825967775058875366),

1440 
KQU
(17543433670782042631), KQU( 1518339070120322730),

1441 
KQU
(16344584340890991669), KQU( 2611327165318529819),

1442 
KQU
(11265022723283422529), KQU( 4001552800373196817),

1443 
KQU
(14509595890079346161), KQU( 3528717165416234562),

1444 
KQU
(18153222571501914072), KQU( 9387182977209744425),

1445 
KQU
(10064342315985580021), KQU(11373678413215253977),

1446 
KQU
( 2308457853228798099), KQU( 9729042942839545302),

1447 
KQU
( 7833785471140127746), KQU( 6351049900319844436),

1448 
KQU
(14454610627133496067), KQU(12533175683634819111),

1449 
KQU
(15570163926716513029), KQU(13356980519185762498)

1452 
	$TEST_BEGIN
(
ã°_gí_ønd_32
) {

1453 
uöt32_t
 
¨øy32
[
BLOCK_SIZE
] 
	`JEMALLOC_ATTR
(
	`Æig√d
(16));

1454 
uöt32_t
 
¨øy32_2
[
BLOCK_SIZE
] 
	`JEMALLOC_ATTR
(
	`Æig√d
(16));

1455 
i
;

1456 
uöt32_t
 
r32
;

1457 
sfmt_t
 *
˘x
;

1459 
	`as£π_d_À
(
	`gë_mö_¨øy_size32
(), 
BLOCK_SIZE
,

1461 
˘x
 = 
	`öô_gí_ønd
(1234);

1462 
	`fûl_¨øy32
(
˘x
, 
¨øy32
, 
BLOCK_SIZE
);

1463 
	`fûl_¨øy32
(
˘x
, 
¨øy32_2
, 
BLOCK_SIZE
);

1464 
	`föi_gí_ønd
(
˘x
);

1466 
˘x
 = 
	`öô_gí_ønd
(1234);

1467 
i
 = 0; i < 
BLOCK_SIZE
; i++) {

1468 i‡(
i
 < 
COUNT_1
) {

1469 
	`as£π_u32_eq
(
¨øy32
[
i
], 
öô_gí_ønd_32_ex≥˘ed
[i],

1470 "Ouçuàmism©ch f‹ i=%d", 
i
);

1472 
r32
 = 
	`gí_ønd32
(
˘x
);

1473 
	`as£π_u32_eq
(
r32
, 
¨øy32
[
i
],

1474 "Mism©cháà¨øy32[%d]=%x, gí=%x", 
i
, 
¨øy32
[i], 
r32
);

1476 
i
 = 0; i < 
COUNT_2
; i++) {

1477 
r32
 = 
	`gí_ønd32
(
˘x
);

1478 
	`as£π_u32_eq
(
r32
, 
¨øy32_2
[
i
],

1479 "Mism©cháà¨øy32_2[%d]=%x, gí=%x", 
i
, 
¨øy32_2
[i],

1480 
r32
);

1482 
	`föi_gí_ønd
(
˘x
);

1483 
	}
}

1484 
TEST_END


1486 
	$TEST_BEGIN
(
ã°_by_¨øy_32
) {

1487 
uöt32_t
 
¨øy32
[
BLOCK_SIZE
] 
	`JEMALLOC_ATTR
(
	`Æig√d
(16));

1488 
uöt32_t
 
¨øy32_2
[
BLOCK_SIZE
] 
	`JEMALLOC_ATTR
(
	`Æig√d
(16));

1489 
i
;

1490 
uöt32_t
 
öi
[4] = {0x1234, 0x5678, 0x9abc, 0xdef0};

1491 
uöt32_t
 
r32
;

1492 
sfmt_t
 *
˘x
;

1494 
	`as£π_d_À
(
	`gë_mö_¨øy_size32
(), 
BLOCK_SIZE
,

1496 
˘x
 = 
	`öô_by_¨øy
(
öi
, 4);

1497 
	`fûl_¨øy32
(
˘x
, 
¨øy32
, 
BLOCK_SIZE
);

1498 
	`fûl_¨øy32
(
˘x
, 
¨øy32_2
, 
BLOCK_SIZE
);

1499 
	`föi_gí_ønd
(
˘x
);

1501 
˘x
 = 
	`öô_by_¨øy
(
öi
, 4);

1502 
i
 = 0; i < 
BLOCK_SIZE
; i++) {

1503 i‡(
i
 < 
COUNT_1
) {

1504 
	`as£π_u32_eq
(
¨øy32
[
i
], 
öô_by_¨øy_32_ex≥˘ed
[i],

1505 "Ouçuàmism©ch f‹ i=%d", 
i
);

1507 
r32
 = 
	`gí_ønd32
(
˘x
);

1508 
	`as£π_u32_eq
(
r32
, 
¨øy32
[
i
],

1509 "Mism©cháà¨øy32[%d]=%x, gí=%x", 
i
, 
¨øy32
[i], 
r32
);

1511 
i
 = 0; i < 
COUNT_2
; i++) {

1512 
r32
 = 
	`gí_ønd32
(
˘x
);

1513 
	`as£π_u32_eq
(
r32
, 
¨øy32_2
[
i
],

1514 "Mism©cháà¨øy32_2[%d]=%x, gí=%x", 
i
, 
¨øy32_2
[i],

1515 
r32
);

1517 
	`föi_gí_ønd
(
˘x
);

1518 
	}
}

1519 
TEST_END


1521 
	$TEST_BEGIN
(
ã°_gí_ønd_64
) {

1522 
uöt64_t
 
¨øy64
[
BLOCK_SIZE64
] 
	`JEMALLOC_ATTR
(
	`Æig√d
(16));

1523 
uöt64_t
 
¨øy64_2
[
BLOCK_SIZE64
] 
	`JEMALLOC_ATTR
(
	`Æig√d
(16));

1524 
i
;

1525 
uöt64_t
 
r
;

1526 
sfmt_t
 *
˘x
;

1528 
	`as£π_d_À
(
	`gë_mö_¨øy_size64
(), 
BLOCK_SIZE64
,

1530 
˘x
 = 
	`öô_gí_ønd
(4321);

1531 
	`fûl_¨øy64
(
˘x
, 
¨øy64
, 
BLOCK_SIZE64
);

1532 
	`fûl_¨øy64
(
˘x
, 
¨øy64_2
, 
BLOCK_SIZE64
);

1533 
	`föi_gí_ønd
(
˘x
);

1535 
˘x
 = 
	`öô_gí_ønd
(4321);

1536 
i
 = 0; i < 
BLOCK_SIZE64
; i++) {

1537 i‡(
i
 < 
COUNT_1
) {

1538 
	`as£π_u64_eq
(
¨øy64
[
i
], 
öô_gí_ønd_64_ex≥˘ed
[i],

1539 "Ouçuàmism©ch f‹ i=%d", 
i
);

1541 
r
 = 
	`gí_ønd64
(
˘x
);

1542 
	`as£π_u64_eq
(
r
, 
¨øy64
[
i
],

1543 "Mism©cháà¨øy64[%d]=%"
FMTx64
", gí=%"FMTx64, 
i
,

1544 
¨øy64
[
i
], 
r
);

1546 
i
 = 0; i < 
COUNT_2
; i++) {

1547 
r
 = 
	`gí_ønd64
(
˘x
);

1548 
	`as£π_u64_eq
(
r
, 
¨øy64_2
[
i
],

1549 "Mism©cháà¨øy64_2[%d]=%"
FMTx64
" gí=%"FMTx64"", 
i
,

1550 
¨øy64_2
[
i
], 
r
);

1552 
	`föi_gí_ønd
(
˘x
);

1553 
	}
}

1554 
TEST_END


1556 
	$TEST_BEGIN
(
ã°_by_¨øy_64
) {

1557 
uöt64_t
 
¨øy64
[
BLOCK_SIZE64
] 
	`JEMALLOC_ATTR
(
	`Æig√d
(16));

1558 
uöt64_t
 
¨øy64_2
[
BLOCK_SIZE64
] 
	`JEMALLOC_ATTR
(
	`Æig√d
(16));

1559 
i
;

1560 
uöt64_t
 
r
;

1561 
uöt32_t
 
öi
[] = {5, 4, 3, 2, 1};

1562 
sfmt_t
 *
˘x
;

1564 
	`as£π_d_À
(
	`gë_mö_¨øy_size64
(), 
BLOCK_SIZE64
,

1566 
˘x
 = 
	`öô_by_¨øy
(
öi
, 5);

1567 
	`fûl_¨øy64
(
˘x
, 
¨øy64
, 
BLOCK_SIZE64
);

1568 
	`fûl_¨øy64
(
˘x
, 
¨øy64_2
, 
BLOCK_SIZE64
);

1569 
	`föi_gí_ønd
(
˘x
);

1571 
˘x
 = 
	`öô_by_¨øy
(
öi
, 5);

1572 
i
 = 0; i < 
BLOCK_SIZE64
; i++) {

1573 i‡(
i
 < 
COUNT_1
) {

1574 
	`as£π_u64_eq
(
¨øy64
[
i
], 
öô_by_¨øy_64_ex≥˘ed
[i],

1575 "Ouçuàmism©ch f‹ i=%d", 
i
);

1577 
r
 = 
	`gí_ønd64
(
˘x
);

1578 
	`as£π_u64_eq
(
r
, 
¨øy64
[
i
],

1579 "Mism©cháà¨øy64[%d]=%"
FMTx64
" gí=%"FMTx64, 
i
,

1580 
¨øy64
[
i
], 
r
);

1582 
i
 = 0; i < 
COUNT_2
; i++) {

1583 
r
 = 
	`gí_ønd64
(
˘x
);

1584 
	`as£π_u64_eq
(
r
, 
¨øy64_2
[
i
],

1585 "Mism©cháà¨øy64_2[%d]=%"
FMTx64
" gí=%"FMTx64, 
i
,

1586 
¨øy64_2
[
i
], 
r
);

1588 
	`föi_gí_ønd
(
˘x
);

1589 
	}
}

1590 
TEST_END


1593 
	$maö
() {

1594  
	`ã°
(

1595 
ã°_gí_ønd_32
,

1596 
ã°_by_¨øy_32
,

1597 
ã°_gí_ønd_64
,

1598 
ã°_by_¨øy_64
);

1599 
	}
}

	@test/unit/a0.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	$TEST_BEGIN
(
ã°_a0
) {

4 *
p
;

6 
p
 = 
	`a0mÆloc
(1);

7 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpectedá0malloc()Érror");

8 
	`a0dÆloc
(
p
);

9 
	}
}

10 
TEST_END


13 
	$maö
() {

14  
	`ã°_no_mÆloc_öô
(

15 
ã°_a0
);

16 
	}
}

	@test/unit/arena_reset.c

1 #i‚de‡
ARENA_RESET_PROF_C_


2 
	~"ã°/jemÆloc_ã°.h
"

5 
	~"jemÆloc/öã∫Æ/exã¡_mm≠.h
"

6 
	~"jemÆloc/öã∫Æ/πªe.h
"

8 
	~"ã°/exã¡_hooks.h
"

11 
	$gë_nsizes_im∂
(c⁄° *
cmd
) {

12 
ªt
;

13 
size_t
 
z
;

15 
z
 = ();

16 
	`as£π_d_eq
(
	`mÆl˘l
(
cmd
, (*)&
ªt
, &
z
, 
NULL
, 0), 0,

17 "U√x≥˘ed mÆl˘l(\"%s\", ...ËÁûuª", 
cmd
);

19  
ªt
;

20 
	}
}

23 
	$gë_nsmÆl
() {

24  
	`gë_nsizes_im∂
("arenas.nbins");

25 
	}
}

28 
	$gë_∆¨ge
() {

29  
	`gë_nsizes_im∂
("arenas.nlextents");

30 
	}
}

32 
size_t


33 
	$gë_size_im∂
(c⁄° *
cmd
, 
size_t
 
öd
) {

34 
size_t
 
ªt
;

35 
size_t
 
z
;

36 
size_t
 
mib
[4];

37 
size_t
 
mibÀn
 = 4;

39 
z
 = (
size_t
);

40 
	`as£π_d_eq
(
	`mÆl˘ amëomib
(
cmd
, 
mib
, &
mibÀn
),

41 0, "U√x≥˘ed mÆl˘ amëomib(\"%s\", ...ËÁûuª", 
cmd
);

42 
mib
[2] = 
öd
;

43 
z
 = (
size_t
);

44 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
ªt
, &
z
, 
NULL
, 0),

45 0, "U√x≥˘ed mÆl˘lbymib([\"%s\", %zu], ...ËÁûuª", 
cmd
, 
öd
);

47  
ªt
;

48 
	}
}

50 
size_t


51 
	$gë_smÆl_size
(
size_t
 
öd
) {

52  
	`gë_size_im∂
("¨ías.bö.0.size", 
öd
);

53 
	}
}

55 
size_t


56 
	$gë_œrge_size
(
size_t
 
öd
) {

57  
	`gë_size_im∂
("¨ías.Àxã¡.0.size", 
öd
);

58 
	}
}

61 
size_t


62 
	$vßŒoc
(
tsdn_t
 *
tsdn
, c⁄° *
±r
) {

63 
πªe_˘x_t
 
πªe_˘x_ÁŒback
;

64 
πªe_˘x_t
 *
πªe_˘x
 = 
	`tsdn_πªe_˘x
(
tsdn
, &
πªe_˘x_ÁŒback
);

66 
exã¡_t
 *
exã¡
;

67 
szöd_t
 
szöd
;

68 i‡(
	`πªe_exã¡_szöd_ªad
(
tsdn
, &
exã¡s_πªe
, 
πªe_˘x
,

69 (
uöçå_t
)
±r
, 
Ál£
, &
exã¡
, &
szöd
)) {

73 i‡(
exã¡
 =
NULL
) {

76 i‡(
	`exã¡_°©e_gë
(
exã¡
Ë!
exã¡_°©e_a˘ive
) {

80 i‡(
szöd
 =
NSIZES
) {

84  
	`sz_ödex2size
(
szöd
);

85 
	}
}

88 
	$do_¨ía_¸óã
(
exã¡_hooks_t
 *
h
) {

89 
¨ía_öd
;

90 
size_t
 
sz
 = ();

91 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.¸óã", (*)&
¨ía_öd
, &
sz
,

92 (*)(
h
 !
NULL
 ? &h : NULL), (h != NULL ? (h) : 0)), 0,

94  
¨ía_öd
;

95 
	}
}

98 
	$do_¨ía_ª£t_¥e
(
¨ía_öd
, ***
±rs
, *
≈ås
) {

99 
	#NLARGE
 32

	)

100 
nsmÆl
, 
∆¨ge
, 
i
;

101 
size_t
 
sz
;

102 
Êags
;

103 
tsdn_t
 *
tsdn
;

105 
Êags
 = 
	`MALLOCX_ARENA
(
¨ía_öd
Ë| 
MALLOCX_TCACHE_NONE
;

107 
nsmÆl
 = 
	`gë_nsmÆl
();

108 
∆¨ge
 = 
	`gë_∆¨ge
(Ë> 
NLARGE
 ? NLARGE : get_nlarge();

109 *
≈ås
 = 
nsmÆl
 + 
∆¨ge
;

110 *
±rs
 = (**)
	`mÆloc
(*
≈ås
 * (*));

111 
	`as£π_±r_nŸ_nuŒ
(*
±rs
, "Unexpected malloc() failure");

114 
i
 = 0; i < 
nsmÆl
; i++) {

115 
sz
 = 
	`gë_smÆl_size
(
i
);

116 (*
±rs
)[
i
] = 
	`mÆlocx
(
sz
, 
Êags
);

117 
	`as£π_±r_nŸ_nuŒ
((*
±rs
)[
i
],

118 "U√x≥˘ed mÆlocx(%zu, %#xËÁûuª", 
sz
, 
Êags
);

120 
i
 = 0; i < 
∆¨ge
; i++) {

121 
sz
 = 
	`gë_œrge_size
(
i
);

122 (*
±rs
)[
nsmÆl
 + 
i
] = 
	`mÆlocx
(
sz
, 
Êags
);

123 
	`as£π_±r_nŸ_nuŒ
((*
±rs
)[
i
],

124 "U√x≥˘ed mÆlocx(%zu, %#xËÁûuª", 
sz
, 
Êags
);

127 
tsdn
 = 
	`tsdn_„tch
();

130 
i
 = 0; i < *
≈ås
; i++) {

131 
	`as£π_zu_gt
(
	`ivßŒoc
(
tsdn
, (*
±rs
)[
i
]), 0,

134 
	}
}

137 
	$do_¨ía_ª£t_po°
(**
±rs
, 
≈ås
, 
¨ía_öd
) {

138 
tsdn_t
 *
tsdn
;

139 
i
;

141 
tsdn
 = 
	`tsdn_„tch
();

143 i‡(
have_background_thªad
) {

144 
	`mÆloc_muãx_lock
(
tsdn
,

145 &
background_thªad_öfo
[
¨ía_öd
 % 
n˝us
].
mtx
);

148 
i
 = 0; i < 
≈ås
; i++) {

149 
	`as£π_zu_eq
(
	`vßŒoc
(
tsdn
, 
±rs
[
i
]), 0,

152 i‡(
have_background_thªad
) {

153 
	`mÆloc_muãx_u∆ock
(
tsdn
,

154 &
background_thªad_öfo
[
¨ía_öd
 % 
n˝us
].
mtx
);

157 
	`‰ì
(
±rs
);

158 
	}
}

161 
	$do_¨ía_ª£t_de°roy
(c⁄° *
«me
, 
¨ía_öd
) {

162 
size_t
 
mib
[3];

163 
size_t
 
mibÀn
;

165 
mibÀn
 = (
mib
)/(
size_t
);

166 
	`as£π_d_eq
(
	`mÆl˘ amëomib
(
«me
, 
mib
, &
mibÀn
), 0,

168 
mib
[1] = (
size_t
)
¨ía_öd
;

169 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, NULL, 0), 0,

171 
	}
}

174 
	$do_¨ía_ª£t
(
¨ía_öd
) {

175 
	`do_¨ía_ª£t_de°roy
("¨ía.0.ª£t", 
¨ía_öd
);

176 
	}
}

179 
	$do_¨ía_de°roy
(
¨ía_öd
) {

180 
	`do_¨ía_ª£t_de°roy
("¨ía.0.de°roy", 
¨ía_öd
);

181 
	}
}

183 
	$TEST_BEGIN
(
ã°_¨ía_ª£t
) {

184 
¨ía_öd
;

185 **
±rs
;

186 
≈ås
;

188 
¨ía_öd
 = 
	`do_¨ía_¸óã
(
NULL
);

189 
	`do_¨ía_ª£t_¥e
(
¨ía_öd
, &
±rs
, &
≈ås
);

190 
	`do_¨ía_ª£t
(
¨ía_öd
);

191 
	`do_¨ía_ª£t_po°
(
±rs
, 
≈ås
, 
¨ía_öd
);

192 
	}
}

193 
TEST_END


195 
boﬁ


196 
	$¨ía_i_öôülized
(
¨ía_öd
, 
boﬁ
 
ª‰esh
) {

197 
boﬁ
 
öôülized
;

198 
size_t
 
mib
[3];

199 
size_t
 
mibÀn
, 
sz
;

201 i‡(
ª‰esh
) {

202 
uöt64_t
 
ïoch
 = 1;

203 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", 
NULL
, NULL, (*)&
ïoch
,

204 (
ïoch
)), 0, "Unexpected mallctl() failure");

207 
mibÀn
 = (
mib
)/(
size_t
);

208 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.öôülized", 
mib
, &
mibÀn
), 0,

210 
mib
[1] = (
size_t
)
¨ía_öd
;

211 
sz
 = (
öôülized
);

212 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
öôülized
, &
sz
, 
NULL
,

215  
öôülized
;

216 
	}
}

218 
	$TEST_BEGIN
(
ã°_¨ía_de°roy_öôül
) {

219 
	`as£π_Ál£
(
	`¨ía_i_öôülized
(
MALLCTL_ARENAS_DESTROYED
, 
Ál£
),

221 
	}
}

222 
TEST_END


224 
	$TEST_BEGIN
(
ã°_¨ía_de°roy_hooks_deÁu…
) {

225 
¨ía_öd
, 
¨ía_öd_™Ÿhî
, 
¨ía_öd_¥ev
;

226 **
±rs
;

227 
≈ås
;

229 
¨ía_öd
 = 
	`do_¨ía_¸óã
(
NULL
);

230 
	`do_¨ía_ª£t_¥e
(
¨ía_öd
, &
±rs
, &
≈ås
);

232 
	`as£π_Ál£
(
	`¨ía_i_öôülized
(
¨ía_öd
, 
Ál£
),

234 
	`as£π_åue
(
	`¨ía_i_öôülized
(
¨ía_öd
, 
åue
),

241 
¨ía_öd_™Ÿhî
 = 
	`do_¨ía_¸óã
(
NULL
);

243 
	`do_¨ía_de°roy
(
¨ía_öd
);

245 
	`as£π_Ál£
(
	`¨ía_i_öôülized
(
¨ía_öd
, 
åue
),

247 
	`as£π_åue
(
	`¨ía_i_öôülized
(
MALLCTL_ARENAS_DESTROYED
, 
Ál£
),

250 
	`do_¨ía_ª£t_po°
(
±rs
, 
≈ås
, 
¨ía_öd
);

252 
¨ía_öd_¥ev
 = 
¨ía_öd
;

253 
¨ía_öd
 = 
	`do_¨ía_¸óã
(
NULL
);

254 
	`do_¨ía_ª£t_¥e
(
¨ía_öd
, &
±rs
, &
≈ås
);

255 
	`as£π_u_eq
(
¨ía_öd
, 
¨ía_öd_¥ev
,

257 
	`do_¨ía_de°roy
(
¨ía_öd
);

258 
	`do_¨ía_ª£t_po°
(
±rs
, 
≈ås
, 
¨ía_öd
);

260 
	`do_¨ía_de°roy
(
¨ía_öd_™Ÿhî
);

261 
	}
}

262 
TEST_END


268 
boﬁ


269 
	$exã¡_dÆloc_unm≠
(
exã¡_hooks_t
 *
exã¡_hooks
, *
addr
, 
size_t
 
size
,

270 
boﬁ
 
commôãd
, 
¨ía_öd
) {

271 
	`TRACE_HOOK
("%s(extent_hooks=%p,áddr=%p, size=%zu, committed=%s, "

272 "¨ía_öd=%u)\n", 
__func__
, 
exã¡_hooks
, 
addr
, 
size
, 
commôãd
 ?

273 "åue" : "Ál£", 
¨ía_öd
);

274 
	`as£π_±r_eq
(
exã¡_hooks
, &
hooks
,

276 
	`as£π_±r_eq
(
exã¡_hooks
->
dÆloc
, 
exã¡_dÆloc_unm≠
,

278 
ˇŒed_dÆloc
 = 
åue
;

279 i‡(!
åy_dÆloc
) {

280  
åue
;

282 
	`∑ges_unm≠
(
addr
, 
size
);

283 
did_dÆloc
 = 
åue
;

284  
Ál£
;

285 
	}
}

287 
exã¡_hooks_t
 
	ghooks_‹ig
;

289 
exã¡_hooks_t
 
	ghooks_unm≠
 = {

290 
exã¡_Æloc_hook
,

291 
exã¡_dÆloc_unm≠
,

292 
exã¡_de°roy_hook
,

293 
exã¡_commô_hook
,

294 
exã¡_decommô_hook
,

295 
exã¡_purge_œzy_hook
,

296 
exã¡_purge_f‹˚d_hook
,

297 
exã¡_•lô_hook
,

298 
exã¡_mîge_hook


301 
	$TEST_BEGIN
(
ã°_¨ía_de°roy_hooks_unm≠
) {

302 
¨ía_öd
;

303 **
±rs
;

304 
≈ås
;

306 
	`exã¡_hooks_¥ï
();

307 
åy_decommô
 = 
Ál£
;

308 
	`mem˝y
(&
hooks_‹ig
, &
hooks
, (
exã¡_hooks_t
));

309 
	`mem˝y
(&
hooks
, &
hooks_unm≠
, (
exã¡_hooks_t
));

311 
did_Æloc
 = 
Ál£
;

312 
¨ía_öd
 = 
	`do_¨ía_¸óã
(&
hooks
);

313 
	`do_¨ía_ª£t_¥e
(
¨ía_öd
, &
±rs
, &
≈ås
);

315 
	`as£π_åue
(
did_Æloc
, "Expectedálloc");

317 
	`as£π_Ál£
(
	`¨ía_i_öôülized
(
¨ía_öd
, 
Ál£
),

319 
	`as£π_åue
(
	`¨ía_i_öôülized
(
¨ía_öd
, 
åue
),

322 
did_dÆloc
 = 
Ál£
;

323 
	`do_¨ía_de°roy
(
¨ía_öd
);

324 
	`as£π_åue
(
did_dÆloc
, "Expected dalloc");

326 
	`as£π_Ál£
(
	`¨ía_i_öôülized
(
¨ía_öd
, 
åue
),

328 
	`as£π_åue
(
	`¨ía_i_öôülized
(
MALLCTL_ARENAS_DESTROYED
, 
Ál£
),

331 
	`do_¨ía_ª£t_po°
(
±rs
, 
≈ås
, 
¨ía_öd
);

333 
	`mem˝y
(&
hooks
, &
hooks_‹ig
, (
exã¡_hooks_t
));

334 
	}
}

335 
TEST_END


338 
	$maö
() {

339  
	`ã°
(

340 
ã°_¨ía_ª£t
,

341 
ã°_¨ía_de°roy_öôül
,

342 
ã°_¨ía_de°roy_hooks_deÁu…
,

343 
ã°_¨ía_de°roy_hooks_unm≠
);

344 
	}
}

	@test/unit/arena_reset_prof.c

1 
	~"ã°/jemÆloc_ã°.h
"

2 
	#ARENA_RESET_PROF_C_


	)

4 
	~"¨ía_ª£t.c
"

	@test/unit/atomic.c

1 
	~"ã°/jemÆloc_ã°.h
"

9 
	#as£π_p_eq
 
as£π_±r_eq


	)

18 
	#DO_TESTS
(
t
, 
è
, 
vÆ1
, 
vÆ2
, 
vÆ3
) do { \

19 
t
 
vÆ
; \

20 
t
 
ex≥˘ed
; \

21 
boﬁ
 
suc˚ss
; \

23 
©omic_
##
è
##
_t
 
©om
 = 
	`ATOMIC_INIT
(
vÆ1
); \

26 
vÆ
 = 
©omic_lﬂd_
##
	`è
(&
©om
, 
ATOMIC_RELAXED
); \

27 
as£π_
##
è
##
	`_eq
(
vÆ1
, 
vÆ
, "Load or init failed"); \

30 
©omic_°‹e_
##
	`è
(&
©om
, 
vÆ1
, 
ATOMIC_RELAXED
); \

31 
©omic_°‹e_
##
	`è
(&
©om
, 
vÆ2
, 
ATOMIC_RELAXED
); \

32 
vÆ
 = 
©omic_lﬂd_
##
	`è
(&
©om
, 
ATOMIC_RELAXED
); \

33 
as£π_
##
è
##
	`_eq
(
vÆ2
, 
vÆ
, "Store failed"); \

36 
©omic_°‹e_
##
	`è
(&
©om
, 
vÆ1
, 
ATOMIC_RELAXED
); \

37 
vÆ
 = 
©omic_exch™ge_
##
	`è
(&
©om
, 
vÆ2
, 
ATOMIC_RELAXED
); \

38 
as£π_
##
è
##
	`_eq
(
vÆ1
, 
vÆ
, "ExchangeÑeturned invalid value"); \

39 
vÆ
 = 
©omic_lﬂd_
##
	`è
(&
©om
, 
ATOMIC_RELAXED
); \

40 
as£π_
##
è
##
	`_eq
(
vÆ2
, 
vÆ
, "Exchange store invalid value"); \

46 
©omic_°‹e_
##
	`è
(&
©om
, 
vÆ1
, 
ATOMIC_RELAXED
); \

47 
suc˚ss
 = 
Ál£
; \

48 
i
 = 0; i < 10 && !
suc˚ss
; i++) { \

49 
ex≥˘ed
 = 
vÆ2
; \

50 
suc˚ss
 = 
©omic_com∑ª_exch™ge_wók_
##
	`è
(&
©om
, \

51 &
ex≥˘ed
, 
vÆ3
, 
ATOMIC_RELAXED
, ATOMIC_RELAXED); \

52 
as£π_
##
è
##
	`_eq
(
vÆ1
, 
ex≥˘ed
, \

55 
	`as£π_b_eq
(
vÆ1
 =
vÆ2
, 
suc˚ss
, \

57 
vÆ
 = 
©omic_lﬂd_
##
	`è
(&
©om
, 
ATOMIC_RELAXED
); \

58 i‡(
suc˚ss
) { \

59 
as£π_
##
è
##
	`_eq
(
vÆ3
, 
vÆ
, \

62 
as£π_
##
è
##
	`_eq
(
vÆ1
, 
vÆ
, \

67 
©omic_°‹e_
##
	`è
(&
©om
, 
vÆ1
, 
ATOMIC_RELAXED
); \

68 
ex≥˘ed
 = 
vÆ2
; \

69 
suc˚ss
 = 
©omic_com∑ª_exch™ge_°r⁄g_
##
	`è
(&
©om
, &
ex≥˘ed
, \

70 
vÆ3
, 
ATOMIC_RELAXED
, ATOMIC_RELAXED); \

71 
	`as£π_b_eq
(
vÆ1
 =
vÆ2
, 
suc˚ss
, \

73 
vÆ
 = 
©omic_lﬂd_
##
	`è
(&
©om
, 
ATOMIC_RELAXED
); \

74 i‡(
suc˚ss
) { \

75 
as£π_
##
è
##
	`_eq
(
vÆ3
, 
vÆ
, \

78 
as£π_
##
è
##
	`_eq
(
vÆ1
, 
vÆ
, \

83 } 0)

	)

85 
	#DO_INTEGER_TESTS
(
t
, 
è
, 
vÆ1
, 
vÆ2
) do { \

86 
©omic_
##
è
##
_t
 
©om
; \

87 
t
 
vÆ
; \

90 
©omic_°‹e_
##
	`è
(&
©om
, 
vÆ1
, 
ATOMIC_RELAXED
); \

91 
vÆ
 = 
©omic_„tch_add_
##
	`è
(&
©om
, 
vÆ2
, 
ATOMIC_RELAXED
); \

92 
as£π_
##
è
##
	`_eq
(
vÆ1
, 
vÆ
, \

94 
vÆ
 = 
©omic_lﬂd_
##
	`è
(&
©om
, 
ATOMIC_RELAXED
); \

95 
as£π_
##
è
##
	`_eq
(
vÆ1
 + 
vÆ2
, 
vÆ
, \

99 
©omic_°‹e_
##
	`è
(&
©om
, 
vÆ1
, 
ATOMIC_RELAXED
); \

100 
vÆ
 = 
©omic_„tch_sub_
##
	`è
(&
©om
, 
vÆ2
, 
ATOMIC_RELAXED
); \

101 
as£π_
##
è
##
	`_eq
(
vÆ1
, 
vÆ
, \

103 
vÆ
 = 
©omic_lﬂd_
##
	`è
(&
©om
, 
ATOMIC_RELAXED
); \

104 
as£π_
##
è
##
	`_eq
(
vÆ1
 - 
vÆ2
, 
vÆ
, \

108 
©omic_°‹e_
##
	`è
(&
©om
, 
vÆ1
, 
ATOMIC_RELAXED
); \

109 
vÆ
 = 
©omic_„tch_™d_
##
	`è
(&
©om
, 
vÆ2
, 
ATOMIC_RELAXED
); \

110 
as£π_
##
è
##
	`_eq
(
vÆ1
, 
vÆ
, \

112 
vÆ
 = 
©omic_lﬂd_
##
	`è
(&
©om
, 
ATOMIC_RELAXED
); \

113 
as£π_
##
è
##
	`_eq
(
vÆ1
 & 
vÆ2
, 
vÆ
, \

117 
©omic_°‹e_
##
	`è
(&
©om
, 
vÆ1
, 
ATOMIC_RELAXED
); \

118 
vÆ
 = 
©omic_„tch_‹_
##
	`è
(&
©om
, 
vÆ2
, 
ATOMIC_RELAXED
); \

119 
as£π_
##
è
##
	`_eq
(
vÆ1
, 
vÆ
, \

121 
vÆ
 = 
©omic_lﬂd_
##
	`è
(&
©om
, 
ATOMIC_RELAXED
); \

122 
as£π_
##
è
##
	`_eq
(
vÆ1
 | 
vÆ2
, 
vÆ
, \

126 
©omic_°‹e_
##
	`è
(&
©om
, 
vÆ1
, 
ATOMIC_RELAXED
); \

127 
vÆ
 = 
©omic_„tch_x‹_
##
	`è
(&
©om
, 
vÆ2
, 
ATOMIC_RELAXED
); \

128 
as£π_
##
è
##
	`_eq
(
vÆ1
, 
vÆ
, \

130 
vÆ
 = 
©omic_lﬂd_
##
	`è
(&
©om
, 
ATOMIC_RELAXED
); \

131 
as£π_
##
è
##
	`_eq
(
vÆ1
 ^ 
vÆ2
, 
vÆ
, \

133 } 0)

	)

135 
	#TEST_STRUCT
(
t
, 
è
) \

137 
t
 
vÆ1
; \

138 
t
 
vÆ2
; \

139 
t
 
vÆ3
; \

140 } 
	tè
##
	t_ã°_t
;

	)

142 
	#TEST_CASES
(
t
) { \

143 {(
t
)-1, (t)-1, (t)-2}, \

144 {(
t
)-1, (t) 0, (t)-2}, \

145 {(
t
)-1, (t) 1, (t)-2}, \

147 {(
t
) 0, (t)-1, (t)-2}, \

148 {(
t
) 0, (t) 0, (t)-2}, \

149 {(
t
) 0, (t) 1, (t)-2}, \

151 {(
t
) 1, (t)-1, (t)-2}, \

152 {(
t
) 1, (t) 0, (t)-2}, \

153 {(
t
) 1, (t) 1, (t)-2}, \

155 {(
t
)0, (t)-(1 << 22), (t)-2}, \

156 {(
t
)0, (t)(1 << 22), (t)-2}, \

157 {(
t
)(1 << 22), (t)-(1 << 22), (t)-2}, \

158 {(
t
)(1 << 22), (t)(1 << 22), (t)-2} \

159 }

	)

161 
	#TEST_BODY
(
t
, 
è
) do { \

162 c⁄° 
è
##
_ã°_t
 
ã°s
[] = 
	`TEST_CASES
(
t
); \

163 
i
 = 0; i < (
ã°s
)/(tests[0]); i++) { \

164 
è
##
_ã°_t
 
ã°
 = 
ã°s
[
i
]; \

165 
	`DO_TESTS
(
t
, 
è
, 
ã°
.
vÆ1
,Åe°.
vÆ2
,Åe°.
vÆ3
); \

167 } 0)

	)

169 
	#INTEGER_TEST_BODY
(
t
, 
è
) do { \

170 c⁄° 
è
##
_ã°_t
 
ã°s
[] = 
	`TEST_CASES
(
t
); \

171 
i
 = 0; i < (
ã°s
)/(tests[0]); i++) { \

172 
è
##
_ã°_t
 
ã°
 = 
ã°s
[
i
]; \

173 
	`DO_TESTS
(
t
, 
è
, 
ã°
.
vÆ1
,Åe°.
vÆ2
,Åe°.
vÆ3
); \

174 
	`DO_INTEGER_TESTS
(
t
, 
è
, 
ã°
.
vÆ1
,Åe°.
vÆ2
); \

176 } 0)

	)

178 
TEST_STRUCT
(
uöt64_t
, 
u64
);

179 
	$TEST_BEGIN
(
ã°_©omic_u64
) {

180 #i‡!(
LG_SIZEOF_PTR
 =3 || 
LG_SIZEOF_INT
 == 3)

181 
	`ã°_skù
("64-bitátomic operationsÇot supported");

183 
	`INTEGER_TEST_BODY
(
uöt64_t
, 
u64
);

185 
	}
}

186 
TEST_END


189 
TEST_STRUCT
(
uöt32_t
, 
u32
);

190 
	$TEST_BEGIN
(
ã°_©omic_u32
) {

191 
	`INTEGER_TEST_BODY
(
uöt32_t
, 
u32
);

192 
	}
}

193 
TEST_END


195 
TEST_STRUCT
(*, 
p
);

196 
	$TEST_BEGIN
(
ã°_©omic_p
) {

197 
	`TEST_BODY
(*, 
p
);

198 
	}
}

199 
TEST_END


201 
TEST_STRUCT
(
size_t
, 
zu
);

202 
	$TEST_BEGIN
(
ã°_©omic_zu
) {

203 
	`INTEGER_TEST_BODY
(
size_t
, 
zu
);

204 
	}
}

205 
TEST_END


207 
TEST_STRUCT
(
ssize_t
, 
zd
);

208 
	$TEST_BEGIN
(
ã°_©omic_zd
) {

209 
	`INTEGER_TEST_BODY
(
ssize_t
, 
zd
);

210 
	}
}

211 
TEST_END


214 
TEST_STRUCT
(, 
u
);

215 
	$TEST_BEGIN
(
ã°_©omic_u
) {

216 
	`INTEGER_TEST_BODY
(, 
u
);

217 
	}
}

218 
TEST_END


221 
	$maö
() {

222  
	`ã°
(

223 
ã°_©omic_u64
,

224 
ã°_©omic_u32
,

225 
ã°_©omic_p
,

226 
ã°_©omic_zu
,

227 
ã°_©omic_zd
,

228 
ã°_©omic_u
);

229 
	}
}

	@test/unit/background_thread.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/utû.h
"

6 
	$ã°_swôch_background_thªad_˘l
(
boﬁ
 
√w_vÆ
) {

7 
boﬁ
 
e0
, 
e1
;

8 
size_t
 
sz
 = (
boﬁ
);

10 
e1
 = 
√w_vÆ
;

11 
	`as£π_d_eq
(
	`mÆl˘l
("background_thªad", (*)&
e0
, &
sz
,

12 &
e1
, 
sz
), 0, "Unexpected mallctl() failure");

13 
	`as£π_b_eq
(
e0
, !
e1
,

14 "background_thªad should bê%d bef‹e.\n", !
e1
);

15 i‡(
e1
) {

16 
	`as£π_zu_gt
(
n_background_thªads
, 0,

19 
	`as£π_zu_eq
(
n_background_thªads
, 0,

22 
	}
}

25 
	$ã°_ª≥©_background_thªad_˘l
(
boﬁ
 
bef‹e
) {

26 
boﬁ
 
e0
, 
e1
;

27 
size_t
 
sz
 = (
boﬁ
);

29 
e1
 = 
bef‹e
;

30 
	`as£π_d_eq
(
	`mÆl˘l
("background_thªad", (*)&
e0
, &
sz
,

31 &
e1
, 
sz
), 0, "Unexpected mallctl() failure");

32 
	`as£π_b_eq
(
e0
, 
bef‹e
,

33 "background_thªad should bê%d.\n", 
bef‹e
);

34 i‡(
e1
) {

35 
	`as£π_zu_gt
(
n_background_thªads
, 0,

38 
	`as£π_zu_eq
(
n_background_thªads
, 0,

41 
	}
}

43 
	$TEST_BEGIN
(
ã°_background_thªad_˘l
) {

44 
	`ã°_skù_if
(!
have_background_thªad
);

46 
boﬁ
 
e0
, 
e1
;

47 
size_t
 
sz
 = (
boﬁ
);

49 
	`as£π_d_eq
(
	`mÆl˘l
("›t.background_thªad", (*)&
e0
, &
sz
,

50 
NULL
, 0), 0, "Unexpected mallctl() failure");

51 
	`as£π_d_eq
(
	`mÆl˘l
("background_thªad", (*)&
e1
, &
sz
,

52 
NULL
, 0), 0, "Unexpected mallctl() failure");

53 
	`as£π_b_eq
(
e0
, 
e1
,

55 i‡(
e0
) {

56 
	`ã°_swôch_background_thªad_˘l
(
Ál£
);

58 
	`as£π_zu_eq
(
n_background_thªads
, 0,

61 
i
 = 0; i < 4; i++) {

62 
	`ã°_swôch_background_thªad_˘l
(
åue
);

63 
	`ã°_ª≥©_background_thªad_˘l
(
åue
);

64 
	`ã°_ª≥©_background_thªad_˘l
(
åue
);

66 
	`ã°_swôch_background_thªad_˘l
(
Ál£
);

67 
	`ã°_ª≥©_background_thªad_˘l
(
Ál£
);

68 
	`ã°_ª≥©_background_thªad_˘l
(
Ál£
);

70 
	}
}

71 
TEST_END


73 
	$TEST_BEGIN
(
ã°_background_thªad_ru¬ög
) {

74 
	`ã°_skù_if
(!
have_background_thªad
);

75 
	`ã°_skù_if
(!
c⁄fig_°©s
);

77 #i‡
	`deföed
(
JEMALLOC_BACKGROUND_THREAD
)

78 
tsd_t
 *
tsd
 = 
	`tsd_„tch
();

79 
background_thªad_öfo_t
 *
öfo
 = &
background_thªad_öfo
[0];

81 
	`ã°_ª≥©_background_thªad_˘l
(
Ál£
);

82 
	`ã°_swôch_background_thªad_˘l
(
åue
);

83 
	`as£π_b_eq
(
öfo
->
°©e
, 
background_thªad_°¨ãd
,

86 
n°ime_t
 
°¨t
, 
now
;

87 
	`n°ime_öô
(&
°¨t
, 0);

88 
	`n°ime_upd©e
(&
°¨t
);

90 
boﬁ
 
øn
 = 
Ál£
;

91 
åue
) {

92 
	`mÆloc_muãx_lock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

93 i‡(
öfo
->
tŸ_n_runs
 > 0) {

94 
øn
 = 
åue
;

96 
	`mÆloc_muãx_u∆ock
(
	`tsd_tsdn
(
tsd
), &
öfo
->
mtx
);

97 i‡(
øn
) {

101 
	`n°ime_öô
(&
now
, 0);

102 
	`n°ime_upd©e
(&
now
);

103 
	`n°ime_subåa˘
(&
now
, &
°¨t
);

104 
	`as£π_u64_…
(
	`n°ime_£c
(&
now
), 1000,

106 
	`¶ìp
(1);

108 
	`ã°_swôch_background_thªad_˘l
(
Ál£
);

110 
	}
}

111 
TEST_END


114 
	$maö
() {

116  
	`ã°_no_ªíå™cy
(

117 
ã°_background_thªad_˘l
,

118 
ã°_background_thªad_ru¬ög
);

119 
	}
}

	@test/unit/background_thread_enable.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 c⁄° *
	gmÆloc_c⁄f
 = "background_thread:false,narenas:1";

5 
	$TEST_BEGIN
(
ã°_de„ºed
) {

6 
	`ã°_skù_if
(!
have_background_thªad
);

8 
id
;

9 
size_t
 
sz_u
 = ();

18 
i
 = 0; i < 10 * 
n˝us
; i++) {

19 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.¸óã", &
id
, &
sz_u
, 
NULL
, 0), 0,

23 
boﬁ
 
íabÀ
 = 
åue
;

24 
size_t
 
sz_b
 = (
boﬁ
);

25 
	`as£π_d_eq
(
	`mÆl˘l
("background_thªad", 
NULL
, NULL, &
íabÀ
, 
sz_b
), 0,

27 
	}
}

28 
TEST_END


31 
	$maö
() {

32  
	`ã°_no_ªíå™cy
(

33 
ã°_de„ºed
);

34 
	}
}

	@test/unit/base.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"ã°/exã¡_hooks.h
"

5 
exã¡_hooks_t
 
	ghooks_nuŒ
 = {

6 
exã¡_Æloc_hook
,

7 
NULL
,

8 
NULL
,

9 
NULL
,

10 
NULL
,

11 
NULL
,

12 
NULL
,

13 
NULL
,

14 
NULL


17 
exã¡_hooks_t
 
	ghooks_nŸ_nuŒ
 = {

18 
exã¡_Æloc_hook
,

19 
exã¡_dÆloc_hook
,

20 
exã¡_de°roy_hook
,

21 
NULL
,

22 
exã¡_decommô_hook
,

23 
exã¡_purge_œzy_hook
,

24 
exã¡_purge_f‹˚d_hook
,

25 
NULL
,

26 
NULL


29 
	$TEST_BEGIN
(
ã°_ba£_hooks_deÁu…
) {

30 
ba£_t
 *
ba£
;

31 
size_t
 
Æloˇãd0
, 
Æloˇãd1
, 
ªsidít
, 
m≠≥d
, 
n_thp
;

33 
tsdn_t
 *
tsdn
 = 
	`tsd_tsdn
(
	`tsd_„tch
());

34 
ba£
 = 
	`ba£_√w
(
tsdn
, 0, (
exã¡_hooks_t
 *)&
exã¡_hooks_deÁu…
);

36 i‡(
c⁄fig_°©s
) {

37 
	`ba£_°©s_gë
(
tsdn
, 
ba£
, &
Æloˇãd0
, &
ªsidít
, &
m≠≥d
,

38 &
n_thp
);

39 
	`as£π_zu_ge
(
Æloˇãd0
, (
ba£_t
),

41 i‡(
›t_mëad©a_thp
 =
mëad©a_thp_Æways
) {

42 
	`as£π_zu_gt
(
n_thp
, 0,

47 
	`as£π_±r_nŸ_nuŒ
(
	`ba£_Æloc
(
tsdn
, 
ba£
, 42, 1),

50 i‡(
c⁄fig_°©s
) {

51 
	`ba£_°©s_gë
(
tsdn
, 
ba£
, &
Æloˇãd1
, &
ªsidít
, &
m≠≥d
,

52 &
n_thp
);

53 
	`as£π_zu_ge
(
Æloˇãd1
 - 
Æloˇãd0
, 42,

57 
	`ba£_dñëe
(
tsdn
, 
ba£
);

58 
	}
}

59 
TEST_END


61 
	$TEST_BEGIN
(
ã°_ba£_hooks_nuŒ
) {

62 
exã¡_hooks_t
 
hooks_‹ig
;

63 
ba£_t
 *
ba£
;

64 
size_t
 
Æloˇãd0
, 
Æloˇãd1
, 
ªsidít
, 
m≠≥d
, 
n_thp
;

66 
	`exã¡_hooks_¥ï
();

67 
åy_dÆloc
 = 
Ál£
;

68 
åy_de°roy
 = 
åue
;

69 
åy_decommô
 = 
Ál£
;

70 
åy_purge_œzy
 = 
Ál£
;

71 
åy_purge_f‹˚d
 = 
Ál£
;

72 
	`mem˝y
(&
hooks_‹ig
, &
hooks
, (
exã¡_hooks_t
));

73 
	`mem˝y
(&
hooks
, &
hooks_nuŒ
, (
exã¡_hooks_t
));

75 
tsdn_t
 *
tsdn
 = 
	`tsd_tsdn
(
	`tsd_„tch
());

76 
ba£
 = 
	`ba£_√w
(
tsdn
, 0, &
hooks
);

77 
	`as£π_±r_nŸ_nuŒ
(
ba£
, "Unexpected base_new() failure");

79 i‡(
c⁄fig_°©s
) {

80 
	`ba£_°©s_gë
(
tsdn
, 
ba£
, &
Æloˇãd0
, &
ªsidít
, &
m≠≥d
,

81 &
n_thp
);

82 
	`as£π_zu_ge
(
Æloˇãd0
, (
ba£_t
),

84 i‡(
›t_mëad©a_thp
 =
mëad©a_thp_Æways
) {

85 
	`as£π_zu_gt
(
n_thp
, 0,

90 
	`as£π_±r_nŸ_nuŒ
(
	`ba£_Æloc
(
tsdn
, 
ba£
, 42, 1),

93 i‡(
c⁄fig_°©s
) {

94 
	`ba£_°©s_gë
(
tsdn
, 
ba£
, &
Æloˇãd1
, &
ªsidít
, &
m≠≥d
,

95 &
n_thp
);

96 
	`as£π_zu_ge
(
Æloˇãd1
 - 
Æloˇãd0
, 42,

100 
	`ba£_dñëe
(
tsdn
, 
ba£
);

102 
	`mem˝y
(&
hooks
, &
hooks_‹ig
, (
exã¡_hooks_t
));

103 
	}
}

104 
TEST_END


106 
	$TEST_BEGIN
(
ã°_ba£_hooks_nŸ_nuŒ
) {

107 
exã¡_hooks_t
 
hooks_‹ig
;

108 
ba£_t
 *
ba£
;

109 *
p
, *
q
, *
r
, *
r_exp
;

111 
	`exã¡_hooks_¥ï
();

112 
åy_dÆloc
 = 
Ál£
;

113 
åy_de°roy
 = 
åue
;

114 
åy_decommô
 = 
Ál£
;

115 
åy_purge_œzy
 = 
Ál£
;

116 
åy_purge_f‹˚d
 = 
Ál£
;

117 
	`mem˝y
(&
hooks_‹ig
, &
hooks
, (
exã¡_hooks_t
));

118 
	`mem˝y
(&
hooks
, &
hooks_nŸ_nuŒ
, (
exã¡_hooks_t
));

120 
tsdn_t
 *
tsdn
 = 
	`tsd_tsdn
(
	`tsd_„tch
());

121 
did_Æloc
 = 
Ál£
;

122 
ba£
 = 
	`ba£_√w
(
tsdn
, 0, &
hooks
);

123 
	`as£π_±r_nŸ_nuŒ
(
ba£
, "Unexpected base_new() failure");

124 
	`as£π_åue
(
did_Æloc
, "Expectedálloc");

131 c⁄° 
size_t
 
Æignmíts
[] = {

133 
QUANTUM
,

134 
QUANTUM
 << 1,

135 
CACHELINE
,

136 
CACHELINE
 << 1,

138 
i
;

140 
i
 = 0; i < (
Æignmíts
Ë/ (
size_t
); i++) {

141 
size_t
 
Æignmít
 = 
Æignmíts
[
i
];

142 
size_t
 
Æign_˚û
 = 
	`ALIGNMENT_CEILING
(
Æignmít
,

143 
QUANTUM
);

144 
p
 = 
	`ba£_Æloc
(
tsdn
, 
ba£
, 1, 
Æignmít
);

145 
	`as£π_±r_nŸ_nuŒ
(
p
,

147 
	`as£π_±r_eq
(
p
,

148 (*)(
	`ALIGNMENT_CEILING
((
uöçå_t
)
p
,

149 
Æignmít
)), "Expected quantumálignment");

150 
q
 = 
	`ba£_Æloc
(
tsdn
, 
ba£
, 
Æignmít
,álignment);

151 
	`as£π_±r_nŸ_nuŒ
(
q
,

153 
	`as£π_±r_eq
((*)((
uöçå_t
)
p
 + 
Æign_˚û
), 
q
,

155 
Æign_˚û
);

156 
r
 = 
	`ba£_Æloc
(
tsdn
, 
ba£
, 1, 
Æignmít
);

157 
	`as£π_±r_nŸ_nuŒ
(
r
,

159 
	`as£π_±r_eq
((*)((
uöçå_t
)
q
 + 
Æign_˚û
), 
r
,

161 
Æign_˚û
);

170 
	`as£π_zu_ge
(
	`exã¡_bsize_gë
(&
ba£
->
blocks
->
exã¡
), 
QUANTUM
,

173 
	`exã¡_bsize_gë
(&
ba£
->
blocks
->
exã¡
Ë> 
QUANTUM
) {

174 
p
 = 
	`ba£_Æloc
(
tsdn
, 
ba£
, 
QUANTUM
, QUANTUM);

175 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected base_alloc() failure");

177 
r_exp
 = 
	`exã¡_addr_gë
(&
ba£
->
blocks
->
exã¡
);

178 
	`as£π_zu_eq
(
ba£
->
exã¡_¢_√xt
, 1, "OneÉxtant blockÉxpected");

179 
q
 = 
	`ba£_Æloc
(
tsdn
, 
ba£
, 
QUANTUM
 + 1, QUANTUM);

180 
	`as£π_±r_nŸ_nuŒ
(
q
, "Unexpected base_alloc() failure");

181 
	`as£π_±r_√
(
q
, 
r_exp
, "Expectedállocation fromÇew block");

182 
	`as£π_zu_eq
(
ba£
->
exã¡_¢_√xt
, 2, "TwoÉxtant blocksÉxpected");

183 
r
 = 
	`ba£_Æloc
(
tsdn
, 
ba£
, 
QUANTUM
, QUANTUM);

184 
	`as£π_±r_nŸ_nuŒ
(
r
, "Unexpected base_alloc() failure");

185 
	`as£π_±r_eq
(
r
, 
r_exp
, "Expectedállocation from first block");

186 
	`as£π_zu_eq
(
ba£
->
exã¡_¢_√xt
, 2, "TwoÉxtant blocksÉxpected");

192 c⁄° 
size_t
 
Æignmíts
[] = {

193 
HUGEPAGE
,

194 
HUGEPAGE
 << 1

196 
i
;

198 
i
 = 0; i < (
Æignmíts
Ë/ (
size_t
); i++) {

199 
size_t
 
Æignmít
 = 
Æignmíts
[
i
];

200 
p
 = 
	`ba£_Æloc
(
tsdn
, 
ba£
, 
QUANTUM
, 
Æignmít
);

201 
	`as£π_±r_nŸ_nuŒ
(
p
,

203 
	`as£π_±r_eq
(
p
,

204 (*)(
	`ALIGNMENT_CEILING
((
uöçå_t
)
p
,

205 
Æignmít
)), "Expected %zu-byteálignment",

206 
Æignmít
);

210 
ˇŒed_dÆloc
 = 
ˇŒed_de°roy
 = 
ˇŒed_decommô
 = 
ˇŒed_purge_œzy
 =

211 
ˇŒed_purge_f‹˚d
 = 
Ál£
;

212 
	`ba£_dñëe
(
tsdn
, 
ba£
);

213 
	`as£π_åue
(
ˇŒed_dÆloc
, "Expected dalloc call");

214 
	`as£π_åue
(!
ˇŒed_de°roy
, "Unexpected destroy call");

215 
	`as£π_åue
(
ˇŒed_decommô
, "Expected decommit call");

216 
	`as£π_åue
(
ˇŒed_purge_œzy
, "ExpectedÖurge_lazy call");

217 
	`as£π_åue
(
ˇŒed_purge_f‹˚d
, "ExpectedÖurge_forced call");

219 
åy_dÆloc
 = 
åue
;

220 
åy_de°roy
 = 
åue
;

221 
åy_decommô
 = 
åue
;

222 
åy_purge_œzy
 = 
åue
;

223 
åy_purge_f‹˚d
 = 
åue
;

224 
	`mem˝y
(&
hooks
, &
hooks_‹ig
, (
exã¡_hooks_t
));

225 
	}
}

226 
TEST_END


229 
	$maö
() {

230  
	`ã°
(

231 
ã°_ba£_hooks_deÁu…
,

232 
ã°_ba£_hooks_nuŒ
,

233 
ã°_ba£_hooks_nŸ_nuŒ
);

234 
	}
}

	@test/unit/bit_util.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/bô_utû.h
"

5 
	#TEST_POW2_CEIL
(
t
, 
suf
, 
¥i
) do { \

6 
i
, 
pow2
; \

7 
t
 
x
; \

9 
as£π_
##
suf
##
	`_eq
(
pow2_˚û_
##
	`suf
(0), 0, "UnexpectedÑesult"); \

11 
i
 = 0; i < (
t
) * 8; i++) { \

12 
as£π_
##
suf
##
	`_eq
(
pow2_˚û_
##
	`suf
(((
t
)1Ë<< 
i
), ((t)1) \

13 << 
i
, "UnexpectedÑesult"); \

16 
i
 = 2; i < (
t
) * 8; i++) { \

17 
as£π_
##
suf
##
	`_eq
(
pow2_˚û_
##
	`suf
((((
t
)1Ë<< 
i
) - 1), \

18 ((
t
)1Ë<< 
i
, "UnexpectedÑesult"); \

21 
i
 = 0; i < (
t
) * 8 - 1; i++) { \

22 
as£π_
##
suf
##
	`_eq
(
pow2_˚û_
##
	`suf
((((
t
)1Ë<< 
i
) + 1), \

23 ((
t
)1Ë<< (
i
+1), "UnexpectedÑesult"); \

26 
pow2
 = 1;Öow2 < 25;Öow2++) { \

27 
x
 = (((
t
)1Ë<< (
pow2
-1)) + 1; x <= ((t)1) <<Öow2; \

28 
x
++) { \

29 
as£π_
##
suf
##
	`_eq
(
pow2_˚û_
##
	`suf
(
x
), \

30 ((
t
)1Ë<< 
pow2
, \

31 "U√x≥˘edÑesu…, x=%"
¥i
, 
x
); \

34 } 0)

	)

36 
	$TEST_BEGIN
(
ã°_pow2_˚û_u64
) {

37 
	`TEST_POW2_CEIL
(
uöt64_t
, 
u64
, 
FMTu64
);

38 
	}
}

39 
TEST_END


41 
	$TEST_BEGIN
(
ã°_pow2_˚û_u32
) {

42 
	`TEST_POW2_CEIL
(
uöt32_t
, 
u32
, 
FMTu32
);

43 
	}
}

44 
TEST_END


46 
	$TEST_BEGIN
(
ã°_pow2_˚û_zu
) {

47 
	`TEST_POW2_CEIL
(
size_t
, 
zu
, "zu");

48 
	}
}

49 
TEST_END


52 
	$maö
() {

53  
	`ã°
(

54 
ã°_pow2_˚û_u64
,

55 
ã°_pow2_˚û_u32
,

56 
ã°_pow2_˚û_zu
);

57 
	}
}

	@test/unit/bitmap.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	#NBITS_TAB
 \

4 
	`NB
( 1) \

5 
	`NB
( 2) \

6 
	`NB
( 3) \

7 
	`NB
( 4) \

8 
	`NB
( 5) \

9 
	`NB
( 6) \

10 
	`NB
( 7) \

11 
	`NB
( 8) \

12 
	`NB
( 9) \

13 
	`NB
(10) \

14 
	`NB
(11) \

15 
	`NB
(12) \

16 
	`NB
(13) \

17 
	`NB
(14) \

18 
	`NB
(15) \

19 
	`NB
(16) \

20 
	`NB
(17) \

21 
	`NB
(18) \

22 
	`NB
(19) \

23 
	`NB
(20) \

24 
	`NB
(21) \

25 
	`NB
(22) \

26 
	`NB
(23) \

27 
	`NB
(24) \

28 
	`NB
(25) \

29 
	`NB
(26) \

30 
	`NB
(27) \

31 
	`NB
(28) \

32 
	`NB
(29) \

33 
	`NB
(30) \

34 
	`NB
(31) \

35 
	`NB
(32) \

37 
	`NB
(33) \

38 
	`NB
(34) \

39 
	`NB
(35) \

40 
	`NB
(36) \

41 
	`NB
(37) \

42 
	`NB
(38) \

43 
	`NB
(39) \

44 
	`NB
(40) \

45 
	`NB
(41) \

46 
	`NB
(42) \

47 
	`NB
(43) \

48 
	`NB
(44) \

49 
	`NB
(45) \

50 
	`NB
(46) \

51 
	`NB
(47) \

52 
	`NB
(48) \

53 
	`NB
(49) \

54 
	`NB
(50) \

55 
	`NB
(51) \

56 
	`NB
(52) \

57 
	`NB
(53) \

58 
	`NB
(54) \

59 
	`NB
(55) \

60 
	`NB
(56) \

61 
	`NB
(57) \

62 
	`NB
(58) \

63 
	`NB
(59) \

64 
	`NB
(60) \

65 
	`NB
(61) \

66 
	`NB
(62) \

67 
	`NB
(63) \

68 
	`NB
(64) \

69 
	`NB
(65) \

71 
	`NB
(126) \

72 
	`NB
(127) \

73 
	`NB
(128) \

74 
	`NB
(129) \

75 
	`NB
(130) \

77 
	`NB
(254) \

78 
	`NB
(255) \

79 
	`NB
(256) \

80 
	`NB
(257) \

81 
	`NB
(258) \

83 
	`NB
(510) \

84 
	`NB
(511) \

85 
	`NB
(512) \

86 
	`NB
(513) \

87 
	`NB
(514) \

89 
	`NB
(1024) \

90 
	`NB
(2048) \

91 
	`NB
(4096) \

92 
	`NB
(8192) \

93 
	`NB
(16384) \

94 

	)

96 
	$ã°_bôm≠_öôülizî_body
(c⁄° 
bôm≠_öfo_t
 *
böfo
, 
size_t
 
nbôs
) {

97 
bôm≠_öfo_t
 
böfo_dyn
;

98 
	`bôm≠_öfo_öô
(&
böfo_dyn
, 
nbôs
);

100 
	`as£π_zu_eq
(
	`bôm≠_size
(
böfo
), bôm≠_size(&
böfo_dyn
),

102 "nbôs=%zu", 
nbôs
);

103 
	`as£π_zu_eq
(
böfo
->
nbôs
, 
böfo_dyn
.nbits,

105 "nbôs=%zu", 
nbôs
);

106 #ifde‡
BITMAP_USE_TREE


107 
	`as£π_u_eq
(
böfo
->
∆evñs
, 
böfo_dyn
.nlevels,

109 "nbôs=%zu", 
nbôs
);

111 
i
;

113 
i
 = 0; i < 
böfo
->
∆evñs
; i++) {

114 
	`as£π_zu_eq
(
böfo
->
Àvñs
[
i
].
group_off£t
,

115 
böfo_dyn
.
Àvñs
[
i
].
group_off£t
,

117 "öôüliz©i⁄,Çbôs=%zu,Üevñ=%u", 
nbôs
, 
i
);

121 
	`as£π_zu_eq
(
böfo
->
ngroups
, 
böfo_dyn
.ngroups,

124 
	}
}

126 
	$TEST_BEGIN
(
ã°_bôm≠_öôülizî
) {

127 
	#NB
(
nbôs
) { \

128 i‡(
nbôs
 <
BITMAP_MAXBITS
) { \

129 
bôm≠_öfo_t
 
böfo
 = \

130 
	`BITMAP_INFO_INITIALIZER
(
nbôs
); \

131 
	`ã°_bôm≠_öôülizî_body
(&
böfo
, 
nbôs
); \

133 }

	)

134 
NBITS_TAB


135 #unde‡
NB


136 
	}
}

137 
TEST_END


139 
size_t


140 
	$ã°_bôm≠_size_body
(c⁄° 
bôm≠_öfo_t
 *
böfo
, 
size_t
 
nbôs
,

141 
size_t
 
¥ev_size
) {

142 
size_t
 
size
 = 
	`bôm≠_size
(
böfo
);

143 
	`as£π_zu_ge
(
size
, (
nbôs
 >> 3),

145 
	`as£π_zu_ge
(
size
, 
¥ev_size
, "Bitmap size is smallerÅhanÉxpected");

146  
size
;

147 
	}
}

149 
	$TEST_BEGIN
(
ã°_bôm≠_size
) {

150 
size_t
 
nbôs
, 
¥ev_size
;

152 
¥ev_size
 = 0;

153 
nbôs
 = 1;Çbô†<
BITMAP_MAXBITS
;Çbits++) {

154 
bôm≠_öfo_t
 
böfo
;

155 
	`bôm≠_öfo_öô
(&
böfo
, 
nbôs
);

156 
¥ev_size
 = 
	`ã°_bôm≠_size_body
(&
böfo
, 
nbôs
,Örev_size);

158 
	#NB
(
nbôs
) { \

159 
bôm≠_öfo_t
 
böfo
 = 
	`BITMAP_INFO_INITIALIZER
(
nbôs
); \

160 
¥ev_size
 = 
	`ã°_bôm≠_size_body
(&
böfo
, 
nbôs
, \

161 
¥ev_size
); \

162 }

	)

163 
¥ev_size
 = 0;

164 
NBITS_TAB


165 #unde‡
NB


166 
	}
}

167 
TEST_END


170 
	$ã°_bôm≠_öô_body
(c⁄° 
bôm≠_öfo_t
 *
böfo
, 
size_t
 
nbôs
) {

171 
size_t
 
i
;

172 
bôm≠_t
 *
bôm≠
 = (bôm≠_à*)
	`mÆloc
(
	`bôm≠_size
(
böfo
));

173 
	`as£π_±r_nŸ_nuŒ
(
bôm≠
, "Unexpected malloc() failure");

175 
	`bôm≠_öô
(
bôm≠
, 
böfo
, 
Ál£
);

176 
i
 = 0; i < 
nbôs
; i++) {

177 
	`as£π_Ál£
(
	`bôm≠_gë
(
bôm≠
, 
böfo
, 
i
),

181 
	`bôm≠_öô
(
bôm≠
, 
böfo
, 
åue
);

182 
i
 = 0; i < 
nbôs
; i++) {

183 
	`as£π_åue
(
	`bôm≠_gë
(
bôm≠
, 
böfo
, 
i
), "Bit should be set");

186 
	`‰ì
(
bôm≠
);

187 
	}
}

189 
	$TEST_BEGIN
(
ã°_bôm≠_öô
) {

190 
size_t
 
nbôs
;

192 
nbôs
 = 1;Çbô†<
BITMAP_MAXBITS
;Çbits++) {

193 
bôm≠_öfo_t
 
böfo
;

194 
	`bôm≠_öfo_öô
(&
böfo
, 
nbôs
);

195 
	`ã°_bôm≠_öô_body
(&
böfo
, 
nbôs
);

197 
	#NB
(
nbôs
) { \

198 
bôm≠_öfo_t
 
böfo
 = 
	`BITMAP_INFO_INITIALIZER
(
nbôs
); \

199 
	`ã°_bôm≠_öô_body
(&
böfo
, 
nbôs
); \

200 }

	)

201 
NBITS_TAB


202 #unde‡
NB


203 
	}
}

204 
TEST_END


207 
	$ã°_bôm≠_£t_body
(c⁄° 
bôm≠_öfo_t
 *
böfo
, 
size_t
 
nbôs
) {

208 
size_t
 
i
;

209 
bôm≠_t
 *
bôm≠
 = (bôm≠_à*)
	`mÆloc
(
	`bôm≠_size
(
böfo
));

210 
	`as£π_±r_nŸ_nuŒ
(
bôm≠
, "Unexpected malloc() failure");

211 
	`bôm≠_öô
(
bôm≠
, 
böfo
, 
Ál£
);

213 
i
 = 0; i < 
nbôs
; i++) {

214 
	`bôm≠_£t
(
bôm≠
, 
böfo
, 
i
);

216 
	`as£π_åue
(
	`bôm≠_fuŒ
(
bôm≠
, 
böfo
), "All bits should be set");

217 
	`‰ì
(
bôm≠
);

218 
	}
}

220 
	$TEST_BEGIN
(
ã°_bôm≠_£t
) {

221 
size_t
 
nbôs
;

223 
nbôs
 = 1;Çbô†<
BITMAP_MAXBITS
;Çbits++) {

224 
bôm≠_öfo_t
 
böfo
;

225 
	`bôm≠_öfo_öô
(&
böfo
, 
nbôs
);

226 
	`ã°_bôm≠_£t_body
(&
böfo
, 
nbôs
);

228 
	#NB
(
nbôs
) { \

229 
bôm≠_öfo_t
 
böfo
 = 
	`BITMAP_INFO_INITIALIZER
(
nbôs
); \

230 
	`ã°_bôm≠_£t_body
(&
böfo
, 
nbôs
); \

231 }

	)

232 
NBITS_TAB


233 #unde‡
NB


234 
	}
}

235 
TEST_END


238 
	$ã°_bôm≠_un£t_body
(c⁄° 
bôm≠_öfo_t
 *
böfo
, 
size_t
 
nbôs
) {

239 
size_t
 
i
;

240 
bôm≠_t
 *
bôm≠
 = (bôm≠_à*)
	`mÆloc
(
	`bôm≠_size
(
böfo
));

241 
	`as£π_±r_nŸ_nuŒ
(
bôm≠
, "Unexpected malloc() failure");

242 
	`bôm≠_öô
(
bôm≠
, 
böfo
, 
Ál£
);

244 
i
 = 0; i < 
nbôs
; i++) {

245 
	`bôm≠_£t
(
bôm≠
, 
böfo
, 
i
);

247 
	`as£π_åue
(
	`bôm≠_fuŒ
(
bôm≠
, 
böfo
), "All bits should be set");

248 
i
 = 0; i < 
nbôs
; i++) {

249 
	`bôm≠_un£t
(
bôm≠
, 
böfo
, 
i
);

251 
i
 = 0; i < 
nbôs
; i++) {

252 
	`bôm≠_£t
(
bôm≠
, 
böfo
, 
i
);

254 
	`as£π_åue
(
	`bôm≠_fuŒ
(
bôm≠
, 
böfo
), "All bits should be set");

255 
	`‰ì
(
bôm≠
);

256 
	}
}

258 
	$TEST_BEGIN
(
ã°_bôm≠_un£t
) {

259 
size_t
 
nbôs
;

261 
nbôs
 = 1;Çbô†<
BITMAP_MAXBITS
;Çbits++) {

262 
bôm≠_öfo_t
 
böfo
;

263 
	`bôm≠_öfo_öô
(&
böfo
, 
nbôs
);

264 
	`ã°_bôm≠_un£t_body
(&
böfo
, 
nbôs
);

266 
	#NB
(
nbôs
) { \

267 
bôm≠_öfo_t
 
böfo
 = 
	`BITMAP_INFO_INITIALIZER
(
nbôs
); \

268 
	`ã°_bôm≠_un£t_body
(&
böfo
, 
nbôs
); \

269 }

	)

270 
NBITS_TAB


271 #unde‡
NB


272 
	}
}

273 
TEST_END


276 
	$ã°_bôm≠_xfu_body
(c⁄° 
bôm≠_öfo_t
 *
böfo
, 
size_t
 
nbôs
) {

277 
bôm≠_t
 *
bôm≠
 = (bôm≠_à*)
	`mÆloc
(
	`bôm≠_size
(
böfo
));

278 
	`as£π_±r_nŸ_nuŒ
(
bôm≠
, "Unexpected malloc() failure");

279 
	`bôm≠_öô
(
bôm≠
, 
böfo
, 
Ál£
);

282 
size_t
 
i
 = 0; i < 
nbôs
; i++) {

283 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 0), 
i
,

286 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, (
i
 > 0) ? i-1 : i), i,

289 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 
i
), i,

292 
	`as£π_zu_eq
(
	`bôm≠_sfu
(
bôm≠
, 
böfo
), 
i
,

296 
	`as£π_åue
(
	`bôm≠_fuŒ
(
bôm≠
, 
böfo
), "All bits should be set");

302 
size_t
 
i
 = 
nbôs
 - 1; i <Çbits; i--) {

303 
	`bôm≠_un£t
(
bôm≠
, 
böfo
, 
i
);

304 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 0), 
i
,

306 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, (
i
 > 0) ? i-1 : i), i,

308 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 
i
), i,

310 
	`as£π_zu_eq
(
	`bôm≠_sfu
(
bôm≠
, 
böfo
), 
i
,

312 
	`bôm≠_un£t
(
bôm≠
, 
böfo
, 
i
);

314 
	`as£π_Ál£
(
	`bôm≠_gë
(
bôm≠
, 
böfo
, 0), "Bit should be unset");

320 
size_t
 
i
 = 1; i < 
nbôs
; i++) {

321 
	`bôm≠_£t
(
bôm≠
, 
böfo
, 
i
 - 1);

322 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 0), 
i
,

325 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, (
i
 > 0) ? i-1 : i), i,

328 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 
i
), i,

331 
	`as£π_zu_eq
(
	`bôm≠_sfu
(
bôm≠
, 
böfo
), 
i
,

334 
	`bôm≠_un£t
(
bôm≠
, 
böfo
, 
i
);

336 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 0), 
nbôs
 - 1,

338 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, (
nbôs
 > 1) ?Çbits-2 :Çbits-1),

339 
nbôs
 - 1, "First unset bit should beÅheÜast bit");

340 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 
nbôs
 - 1),Çbits - 1,

342 
	`as£π_zu_eq
(
	`bôm≠_sfu
(
bôm≠
, 
böfo
), 
nbôs
 - 1,

344 
	`as£π_åue
(
	`bôm≠_fuŒ
(
bôm≠
, 
böfo
), "All bits should be set");

350 i‡(
nbôs
 >= 3) {

351 
size_t
 
i
 = 0; i < 
nbôs
-2; i++) {

352 
	`bôm≠_un£t
(
bôm≠
, 
böfo
, 
i
);

353 
	`bôm≠_un£t
(
bôm≠
, 
böfo
, 
i
+2);

354 i‡(
i
 > 0) {

355 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 
i
-1), i,

358 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 
i
), i,

360 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 
i
+1), i+2,

362 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 
i
+2), i+2,

364 i‡(
i
 + 3 < 
nbôs
) {

365 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 
i
+3),

366 
nbôs
, "Unexpected first unset bit");

368 
	`as£π_zu_eq
(
	`bôm≠_sfu
(
bôm≠
, 
böfo
), 
i
,

370 
	`as£π_zu_eq
(
	`bôm≠_sfu
(
bôm≠
, 
böfo
), 
i
+2,

380 i‡(
nbôs
 >= 3) {

381 
	`bôm≠_un£t
(
bôm≠
, 
böfo
, 
nbôs
-1);

382 
size_t
 
i
 = 0; i < 
nbôs
-1; i++) {

383 
	`bôm≠_un£t
(
bôm≠
, 
böfo
, 
i
);

384 i‡(
i
 > 0) {

385 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 
i
-1), i,

388 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 
i
), i,

390 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 
i
+1), 
nbôs
-1,

392 
	`as£π_zu_eq
(
	`bôm≠_ffu
(
bôm≠
, 
böfo
, 
nbôs
-1),

393 
nbôs
-1, "Unexpected first unset bit");

395 
	`as£π_zu_eq
(
	`bôm≠_sfu
(
bôm≠
, 
böfo
), 
i
,

398 
	`as£π_zu_eq
(
	`bôm≠_sfu
(
bôm≠
, 
böfo
), 
nbôs
-1,

402 
	`‰ì
(
bôm≠
);

403 
	}
}

405 
	$TEST_BEGIN
(
ã°_bôm≠_xfu
) {

406 
size_t
 
nbôs
;

408 
nbôs
 = 1;Çbô†<
BITMAP_MAXBITS
;Çbits++) {

409 
bôm≠_öfo_t
 
böfo
;

410 
	`bôm≠_öfo_öô
(&
böfo
, 
nbôs
);

411 
	`ã°_bôm≠_xfu_body
(&
böfo
, 
nbôs
);

413 
	#NB
(
nbôs
) { \

414 
bôm≠_öfo_t
 
böfo
 = 
	`BITMAP_INFO_INITIALIZER
(
nbôs
); \

415 
	`ã°_bôm≠_xfu_body
(&
böfo
, 
nbôs
); \

416 }

	)

417 
NBITS_TAB


418 #unde‡
NB


419 
	}
}

420 
TEST_END


423 
	$maö
() {

424  
	`ã°
(

425 
ã°_bôm≠_öôülizî
,

426 
ã°_bôm≠_size
,

427 
ã°_bôm≠_öô
,

428 
ã°_bôm≠_£t
,

429 
ã°_bôm≠_un£t
,

430 
ã°_bôm≠_xfu
);

431 
	}
}

	@test/unit/ckh.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	$TEST_BEGIN
(
ã°_√w_dñëe
) {

4 
tsd_t
 *
tsd
;

5 
ckh_t
 
ckh
;

7 
tsd
 = 
	`tsd_„tch
();

9 
	`as£π_Ál£
(
	`ckh_√w
(
tsd
, &
ckh
, 2, 
ckh_°rög_hash
,

10 
ckh_°rög_keycomp
), "Unexpected ckh_new()Érror");

11 
	`ckh_dñëe
(
tsd
, &
ckh
);

13 
	`as£π_Ál£
(
	`ckh_√w
(
tsd
, &
ckh
, 3, 
ckh_poöãr_hash
,

14 
ckh_poöãr_keycomp
), "Unexpected ckh_new()Érror");

15 
	`ckh_dñëe
(
tsd
, &
ckh
);

16 
	}
}

17 
TEST_END


19 
	$TEST_BEGIN
(
ã°_cou¡_ö£π_£¨ch_ªmove
) {

20 
tsd_t
 *
tsd
;

21 
ckh_t
 
ckh
;

22 c⁄° *
°rs
[] = {

28 c⁄° *
missög
 = "A stringÇot inÅhe hashÅable.";

29 
size_t
 
i
;

31 
tsd
 = 
	`tsd_„tch
();

33 
	`as£π_Ál£
(
	`ckh_√w
(
tsd
, &
ckh
, 2, 
ckh_°rög_hash
,

34 
ckh_°rög_keycomp
), "Unexpected ckh_new()Érror");

35 
	`as£π_zu_eq
(
	`ckh_cou¡
(&
ckh
), 0,

36 "ckh_cou¡(ËshouldÑëu∫ %zu, buàôÑëu∫ed %zu", 
	`ZU
(0),

37 
	`ckh_cou¡
(&
ckh
));

40 
i
 = 0; i < (
°rs
)/(const *); i++) {

41 
	`ckh_ö£π
(
tsd
, &
ckh
, 
°rs
[
i
], strs[i]);

42 
	`as£π_zu_eq
(
	`ckh_cou¡
(&
ckh
), 
i
+1,

43 "ckh_cou¡(ËshouldÑëu∫ %zu, buàôÑëu∫ed %zu", 
i
+1,

44 
	`ckh_cou¡
(&
ckh
));

48 
i
 = 0; i < (
°rs
)/(const *); i++) {

50 *
p
;

51 c⁄° *
s
;

52 } 
k
, 
v
;

53 **
kp
, **
vp
;

54 c⁄° *
ks
, *
vs
;

56 
kp
 = (
i
 & 1Ë? &
k
.
p
 : 
NULL
;

57 
vp
 = (
i
 & 2Ë? &
v
.
p
 : 
NULL
;

58 
k
.
p
 = 
NULL
;

59 
v
.
p
 = 
NULL
;

60 
	`as£π_Ál£
(
	`ckh_£¨ch
(&
ckh
, 
°rs
[
i
], 
kp
, 
vp
),

63 
ks
 = (
i
 & 1Ë? 
°rs
[i] : (c⁄° *)
NULL
;

64 
vs
 = (
i
 & 2Ë? 
°rs
[i] : (c⁄° *)
NULL
;

65 
	`as£π_±r_eq
((*)
ks
, (*)
k
.
s
, "Key mismatch, i=%zu",

66 
i
);

67 
	`as£π_±r_eq
((*)
vs
, (*)
v
.
s
, "Value mismatch, i=%zu",

68 
i
);

70 
	`as£π_åue
(
	`ckh_£¨ch
(&
ckh
, 
missög
, 
NULL
, NULL),

74 
i
 = 0; i < (
°rs
)/(const *); i++) {

76 *
p
;

77 c⁄° *
s
;

78 } 
k
, 
v
;

79 **
kp
, **
vp
;

80 c⁄° *
ks
, *
vs
;

82 
kp
 = (
i
 & 1Ë? &
k
.
p
 : 
NULL
;

83 
vp
 = (
i
 & 2Ë? &
v
.
p
 : 
NULL
;

84 
k
.
p
 = 
NULL
;

85 
v
.
p
 = 
NULL
;

86 
	`as£π_Ál£
(
	`ckh_ªmove
(
tsd
, &
ckh
, 
°rs
[
i
], 
kp
, 
vp
),

89 
ks
 = (
i
 & 1Ë? 
°rs
[i] : (c⁄° *)
NULL
;

90 
vs
 = (
i
 & 2Ë? 
°rs
[i] : (c⁄° *)
NULL
;

91 
	`as£π_±r_eq
((*)
ks
, (*)
k
.
s
, "Key mismatch, i=%zu",

92 
i
);

93 
	`as£π_±r_eq
((*)
vs
, (*)
v
.
s
, "Value mismatch, i=%zu",

94 
i
);

95 
	`as£π_zu_eq
(
	`ckh_cou¡
(&
ckh
),

96 (
°rs
)/(c⁄° *Ë- 
i
 - 1,

98 (
°rs
)/(c⁄° *Ë- 
i
 - 1,

99 
	`ckh_cou¡
(&
ckh
));

102 
	`ckh_dñëe
(
tsd
, &
ckh
);

103 
	}
}

104 
TEST_END


106 
	$TEST_BEGIN
(
ã°_ö£π_ôî_ªmove
) {

107 
	#NITEMS
 
	`ZU
(1000)

	)

108 
tsd_t
 *
tsd
;

109 
ckh_t
 
ckh
;

110 **
p
[
NITEMS
];

111 *
q
, *
r
;

112 
size_t
 
i
;

114 
tsd
 = 
	`tsd_„tch
();

116 
	`as£π_Ál£
(
	`ckh_√w
(
tsd
, &
ckh
, 2, 
ckh_poöãr_hash
,

117 
ckh_poöãr_keycomp
), "Unexpected ckh_new()Érror");

119 
i
 = 0; i < 
NITEMS
; i++) {

120 
p
[
i
] = 
	`mÆlocx
(i+1, 0);

121 
	`as£π_±r_nŸ_nuŒ
(
p
[
i
], "Unexpected mallocx() failure");

124 
i
 = 0; i < 
NITEMS
; i++) {

125 
size_t
 
j
;

127 
j
 = 
i
; j < 
NITEMS
; j++) {

128 
	`as£π_Ál£
(
	`ckh_ö£π
(
tsd
, &
ckh
, 
p
[
j
],Ö[j]),

130 
	`as£π_Ál£
(
	`ckh_£¨ch
(&
ckh
, 
p
[
j
], &
q
, &
r
),

132 
	`as£π_±r_eq
(
p
[
j
], 
q
, "KeyÖointer mismatch");

133 
	`as£π_±r_eq
(
p
[
j
], 
r
, "ValueÖointer mismatch");

136 
	`as£π_zu_eq
(
	`ckh_cou¡
(&
ckh
), 
NITEMS
,

138 
NITEMS
, 
	`ckh_cou¡
(&
ckh
));

140 
j
 = 
i
 + 1; j < 
NITEMS
; j++) {

141 
	`as£π_Ál£
(
	`ckh_£¨ch
(&
ckh
, 
p
[
j
], 
NULL
, NULL),

143 
	`as£π_Ál£
(
	`ckh_ªmove
(
tsd
, &
ckh
, 
p
[
j
], &
q
, &
r
),

145 
	`as£π_±r_eq
(
p
[
j
], 
q
, "KeyÖointer mismatch");

146 
	`as£π_±r_eq
(
p
[
j
], 
r
, "ValueÖointer mismatch");

147 
	`as£π_åue
(
	`ckh_£¨ch
(&
ckh
, 
p
[
j
], 
NULL
, NULL),

149 
	`as£π_åue
(
	`ckh_ªmove
(
tsd
, &
ckh
, 
p
[
j
], &
q
, &
r
),

154 
boﬁ
 
£í
[
NITEMS
];

155 
size_t
 
èböd
;

157 
	`mem£t
(
£í
, 0, (seen));

159 
èböd
 = 0; !
	`ckh_ôî
(&
ckh
, &èböd, &
q
, &
r
);) {

160 
size_t
 
k
;

162 
	`as£π_±r_eq
(
q
, 
r
, "Keyánd valÇotÉqual");

164 
k
 = 0; k < 
NITEMS
; k++) {

165 i‡(
p
[
k
] =
q
) {

166 
	`as£π_Ál£
(
£í
[
k
],

167 "Iãm %zuáÃódy sìn", 
k
);

168 
£í
[
k
] = 
åue
;

174 
j
 = 0; j < 
i
 + 1; j++) {

175 
	`as£π_åue
(
£í
[
j
], "Item %zuÇot seen", j);

177 ; 
j
 < 
NITEMS
; j++) {

178 
	`as£π_Ál£
(
£í
[
j
], "Item %zu seen", j);

183 
i
 = 0; i < 
NITEMS
; i++) {

184 
	`as£π_Ál£
(
	`ckh_£¨ch
(&
ckh
, 
p
[
i
], 
NULL
, NULL),

186 
	`as£π_Ál£
(
	`ckh_ªmove
(
tsd
, &
ckh
, 
p
[
i
], &
q
, &
r
),

188 
	`as£π_±r_eq
(
p
[
i
], 
q
, "KeyÖointer mismatch");

189 
	`as£π_±r_eq
(
p
[
i
], 
r
, "ValueÖointer mismatch");

190 
	`as£π_åue
(
	`ckh_£¨ch
(&
ckh
, 
p
[
i
], 
NULL
, NULL),

192 
	`as£π_åue
(
	`ckh_ªmove
(
tsd
, &
ckh
, 
p
[
i
], &
q
, &
r
),

194 
	`dÆlocx
(
p
[
i
], 0);

197 
	`as£π_zu_eq
(
	`ckh_cou¡
(&
ckh
), 0,

199 
	`ZU
(0), 
	`ckh_cou¡
(&
ckh
));

200 
	`ckh_dñëe
(
tsd
, &
ckh
);

201 #unde‡
NITEMS


202 
	}
}

203 
TEST_END


206 
	$maö
() {

207  
	`ã°
(

208 
ã°_√w_dñëe
,

209 
ã°_cou¡_ö£π_£¨ch_ªmove
,

210 
ã°_ö£π_ôî_ªmove
);

211 
	}
}

	@test/unit/decay.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/tickî.h
"

5 
n°ime_m⁄Ÿ⁄ic_t
 *
	gn°ime_m⁄Ÿ⁄ic_‹ig
;

6 
n°ime_upd©e_t
 *
	gn°ime_upd©e_‹ig
;

8 
	gnupd©es_mock
;

9 
n°ime_t
 
	gtime_mock
;

10 
boﬁ
 
	gm⁄Ÿ⁄ic_mock
;

12 
boﬁ


13 
	$check_background_thªad_íabÀd
() {

14 
boﬁ
 
íabÀd
;

15 
size_t
 
sz
 = (
boﬁ
);

16 
ªt
 = 
	`mÆl˘l
("background_thªad", (*)&
íabÀd
, &
sz
, 
NULL
,0);

17 i‡(
ªt
 =
ENOENT
) {

18  
Ál£
;

20 
	`as£π_d_eq
(
ªt
, 0, "Unexpected mallctlÉrror");

21  
íabÀd
;

22 
	}
}

24 
boﬁ


25 
	$n°ime_m⁄Ÿ⁄ic_mock
() {

26  
m⁄Ÿ⁄ic_mock
;

27 
	}
}

29 
boﬁ


30 
	$n°ime_upd©e_mock
(
n°ime_t
 *
time
) {

31 
nupd©es_mock
++;

32 i‡(
m⁄Ÿ⁄ic_mock
) {

33 
	`n°ime_c›y
(
time
, &
time_mock
);

35  !
m⁄Ÿ⁄ic_mock
;

36 
	}
}

39 
	$do_¨ía_¸óã
(
ssize_t
 
dúty_deˇy_ms
, ssize_à
muzzy_deˇy_ms
) {

40 
¨ía_öd
;

41 
size_t
 
sz
 = ();

42 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.¸óã", (*)&
¨ía_öd
, &
sz
, 
NULL
, 0),

44 
size_t
 
mib
[3];

45 
size_t
 
mibÀn
 = (
mib
)/(size_t);

47 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.dúty_deˇy_ms", 
mib
, &
mibÀn
),

49 
mib
[1] = (
size_t
)
¨ía_öd
;

50 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL,

51 (*)&
dúty_deˇy_ms
, (dirty_decay_ms)), 0,

54 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.muzzy_deˇy_ms", 
mib
, &
mibÀn
),

56 
mib
[1] = (
size_t
)
¨ía_öd
;

57 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL,

58 (*)&
muzzy_deˇy_ms
, (muzzy_decay_ms)), 0,

61  
¨ía_öd
;

62 
	}
}

65 
	$do_¨ía_de°roy
(
¨ía_öd
) {

66 
size_t
 
mib
[3];

67 
size_t
 
mibÀn
 = (
mib
)/(size_t);

68 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.de°roy", 
mib
, &
mibÀn
), 0,

70 
mib
[1] = (
size_t
)
¨ía_öd
;

71 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, NULL, 0), 0,

73 
	}
}

76 
	$do_ïoch
() {

77 
uöt64_t
 
ïoch
 = 1;

78 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", 
NULL
, NULL, (*)&
ïoch
, (epoch)),

80 
	}
}

83 
	$do_purge
(
¨ía_öd
) {

84 
size_t
 
mib
[3];

85 
size_t
 
mibÀn
 = (
mib
)/(size_t);

86 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.purge", 
mib
, &
mibÀn
), 0,

88 
mib
[1] = (
size_t
)
¨ía_öd
;

89 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, NULL, 0), 0,

91 
	}
}

94 
	$do_deˇy
(
¨ía_öd
) {

95 
size_t
 
mib
[3];

96 
size_t
 
mibÀn
 = (
mib
)/(size_t);

97 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.deˇy", 
mib
, &
mibÀn
), 0,

99 
mib
[1] = (
size_t
)
¨ía_öd
;

100 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, NULL, 0), 0,

102 
	}
}

104 
uöt64_t


105 
	$gë_¨ía_≈urge_im∂
(c⁄° *
mib«me
, 
¨ía_öd
) {

106 
size_t
 
mib
[4];

107 
size_t
 
mibÀn
 = (
mib
)/(size_t);

108 
	`as£π_d_eq
(
	`mÆl˘ amëomib
(
mib«me
, 
mib
, &
mibÀn
), 0,

110 
mib
[2] = (
size_t
)
¨ía_öd
;

111 
uöt64_t
 
≈urge
 = 0;

112 
size_t
 
sz
 = (
≈urge
);

113 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
≈urge
, &
sz
, 
NULL
, 0),

114 
c⁄fig_°©s
 ? 0 : 
ENOENT
, "Unexpected mallctlbymib() failure");

115  
≈urge
;

116 
	}
}

118 
uöt64_t


119 
	$gë_¨ía_dúty_≈urge
(
¨ía_öd
) {

120 
	`do_ïoch
();

121  
	`gë_¨ía_≈urge_im∂
("°©s.¨ías.0.dúty_≈urge", 
¨ía_öd
);

122 
	}
}

124 
uöt64_t


125 
	$gë_¨ía_muzzy_≈urge
(
¨ía_öd
) {

126 
	`do_ïoch
();

127  
	`gë_¨ía_≈urge_im∂
("°©s.¨ías.0.muzzy_≈urge", 
¨ía_öd
);

128 
	}
}

130 
uöt64_t


131 
	$gë_¨ía_≈urge
(
¨ía_öd
) {

132 
	`do_ïoch
();

133  
	`gë_¨ía_≈urge_im∂
("°©s.¨ías.0.dúty_≈urge", 
¨ía_öd
) +

134 
	`gë_¨ía_≈urge_im∂
("°©s.¨ías.0.muzzy_≈urge", 
¨ía_öd
);

135 
	}
}

137 
size_t


138 
	$gë_¨ía_pdúty
(
¨ía_öd
) {

139 
	`do_ïoch
();

140 
size_t
 
mib
[4];

141 
size_t
 
mibÀn
 = (
mib
)/(size_t);

142 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("°©s.¨ías.0.pdúty", 
mib
, &
mibÀn
), 0,

144 
mib
[2] = (
size_t
)
¨ía_öd
;

145 
size_t
 
pdúty
;

146 
size_t
 
sz
 = (
pdúty
);

147 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
pdúty
, &
sz
, 
NULL
, 0), 0,

149  
pdúty
;

150 
	}
}

152 
size_t


153 
	$gë_¨ía_pmuzzy
(
¨ía_öd
) {

154 
	`do_ïoch
();

155 
size_t
 
mib
[4];

156 
size_t
 
mibÀn
 = (
mib
)/(size_t);

157 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("°©s.¨ías.0.pmuzzy", 
mib
, &
mibÀn
), 0,

159 
mib
[2] = (
size_t
)
¨ía_öd
;

160 
size_t
 
pmuzzy
;

161 
size_t
 
sz
 = (
pmuzzy
);

162 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
pmuzzy
, &
sz
, 
NULL
, 0), 0,

164  
pmuzzy
;

165 
	}
}

168 
	$do_mÆlocx
(
size_t
 
size
, 
Êags
) {

169 *
p
 = 
	`mÆlocx
(
size
, 
Êags
);

170 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

171  
p
;

172 
	}
}

175 
	$gíî©e_dúty
(
¨ía_öd
, 
size_t
 
size
) {

176 
Êags
 = 
	`MALLOCX_ARENA
(
¨ía_öd
Ë| 
MALLOCX_TCACHE_NONE
;

177 *
p
 = 
	`do_mÆlocx
(
size
, 
Êags
);

178 
	`dÆlocx
(
p
, 
Êags
);

179 
	}
}

181 
	$TEST_BEGIN
(
ã°_deˇy_ticks
) {

182 
	`ã°_skù_if
(
	`check_background_thªad_íabÀd
());

184 
tickî_t
 *
deˇy_tickî
;

185 
tick0
, 
tick1
, 
¨ía_öd
;

186 
size_t
 
sz
, 
œrge0
;

187 *
p
;

189 
sz
 = (
size_t
);

190 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.Àxã¡.0.size", (*)&
œrge0
, &
sz
, 
NULL
,

194 
¨ía_öd
 = 
	`do_¨ía_¸óã
(0, 0);

197 
ﬁd_¨ía_öd
;

198 
size_t
 
sz_¨ía_öd
 = (
ﬁd_¨ía_öd
);

199 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.¨ía", (*)&
ﬁd_¨ía_öd
,

200 &
sz_¨ía_öd
, (*)&
¨ía_öd
, (arena_ind)), 0,

202 
deˇy_tickî
 = 
	`deˇy_tickî_gë
(
	`tsd_„tch
(), 
¨ía_öd
);

203 
	`as£π_±r_nŸ_nuŒ
(
deˇy_tickî
,

213 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

214 
p
 = 
	`mÆloc
(
œrge0
);

215 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected malloc() failure");

216 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

217 
	`as£π_u32_√
(
tick1
, 
tick0
, "ExpectedÅickerÅoÅick during malloc()");

219 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

220 
	`‰ì
(
p
);

221 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

222 
	`as£π_u32_√
(
tick1
, 
tick0
, "ExpectedÅickerÅoÅick during free()");

225 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

226 
p
 = 
	`ˇŒoc
(1, 
œrge0
);

227 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected calloc() failure");

228 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

229 
	`as£π_u32_√
(
tick1
, 
tick0
, "ExpectedÅickerÅoÅick during calloc()");

230 
	`‰ì
(
p
);

233 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

234 
	`as£π_d_eq
(
	`posix_memÆign
(&
p
, (
size_t
), 
œrge0
), 0,

236 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

237 
	`as£π_u32_√
(
tick1
, 
tick0
,

239 
	`‰ì
(
p
);

242 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

243 
p
 = 
	`Æig√d_Æloc
((
size_t
), 
œrge0
);

244 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpectedáligned_alloc() failure");

245 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

246 
	`as£π_u32_√
(
tick1
, 
tick0
,

248 
	`‰ì
(
p
);

252 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

253 
p
 = 
	`ªÆloc
(
NULL
, 
œrge0
);

254 
	`as£π_±r_nŸ_nuŒ
(
p
, "UnexpectedÑealloc() failure");

255 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

256 
	`as£π_u32_√
(
tick1
, 
tick0
, "ExpectedÅickerÅoÅick duringÑealloc()");

258 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

259 
p
 = 
	`ªÆloc
’, 
œrge0
);

260 
	`as£π_±r_nŸ_nuŒ
(
p
, "UnexpectedÑealloc() failure");

261 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

262 
	`as£π_u32_√
(
tick1
, 
tick0
, "ExpectedÅickerÅoÅick duringÑealloc()");

264 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

265 
	`ªÆloc
(
p
, 0);

266 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

267 
	`as£π_u32_√
(
tick1
, 
tick0
, "ExpectedÅickerÅoÅick duringÑealloc()");

274 
i
;

275 
size_t
 
Ælocx_sizes
[2];

276 
Ælocx_sizes
[0] = 
œrge0
;

277 
Ælocx_sizes
[1] = 1;

279 
i
 = 0; i < (
Ælocx_sizes
Ë/ (
size_t
); i++) {

280 
sz
 = 
Ælocx_sizes
[
i
];

283 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

284 
p
 = 
	`mÆlocx
(
sz
, 
MALLOCX_TCACHE_NONE
);

285 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

286 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

287 
	`as£π_u32_√
(
tick1
, 
tick0
,

289 
sz
);

291 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

292 
p
 = 
	`øŒocx
’, 
sz
, 
MALLOCX_TCACHE_NONE
);

293 
	`as£π_±r_nŸ_nuŒ
(
p
, "UnexpectedÑallocx() failure");

294 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

295 
	`as£π_u32_√
(
tick1
, 
tick0
,

297 
sz
);

299 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

300 
	`xÆlocx
(
p
, 
sz
, 0, 
MALLOCX_TCACHE_NONE
);

301 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

302 
	`as£π_u32_√
(
tick1
, 
tick0
,

304 
sz
);

306 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

307 
	`dÆlocx
(
p
, 
MALLOCX_TCACHE_NONE
);

308 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

309 
	`as£π_u32_√
(
tick1
, 
tick0
,

311 
sz
);

313 
p
 = 
	`mÆlocx
(
sz
, 
MALLOCX_TCACHE_NONE
);

314 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

315 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

316 
	`sdÆlocx
(
p
, 
sz
, 
MALLOCX_TCACHE_NONE
);

317 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

318 
	`as£π_u32_√
(
tick1
, 
tick0
,

320 "(sz=%zu)", 
sz
);

328 
tˇche_öd
, 
i
;

329 
size_t
 
tˇche_sizes
[2];

330 
tˇche_sizes
[0] = 
œrge0
;

331 
tˇche_sizes
[1] = 1;

333 
size_t
 
tˇche_max
, 
sz_tˇche_max
;

334 
sz_tˇche_max
 = (
tˇche_max
);

335 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.tˇche_max", (*)&
tˇche_max
,

336 &
sz_tˇche_max
, 
NULL
, 0), 0, "Unexpected mallctl() failure");

338 
sz
 = ();

339 
	`as£π_d_eq
(
	`mÆl˘l
("tˇche.¸óã", (*)&
tˇche_öd
, &
sz
,

340 
NULL
, 0), 0, "Unexpected mallctl failure");

342 
i
 = 0; i < (
tˇche_sizes
Ë/ (
size_t
); i++) {

343 
sz
 = 
tˇche_sizes
[
i
];

346 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

347 
p
 = 
	`mÆlocx
(
sz
, 
	`MALLOCX_TCACHE
(
tˇche_öd
));

348 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

349 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

350 
	`as£π_u32_√
(
tick1
, 
tick0
,

352 "(sz=%zu)", 
sz
);

354 
	`dÆlocx
(
p
, 
	`MALLOCX_TCACHE
(
tˇche_öd
));

355 
tick0
 = 
	`tickî_ªad
(
deˇy_tickî
);

356 
	`as£π_d_eq
(
	`mÆl˘l
("tˇche.Êush", 
NULL
, NULL,

357 (*)&
tˇche_öd
, ()), 0,

359 
tick1
 = 
	`tickî_ªad
(
deˇy_tickî
);

362 i‡(
sz
 <
tˇche_max
) {

363 
	`as£π_u32_√
(
tick1
, 
tick0
,

365 "Êush (sz=%zu)", 
sz
);

367 
	`as£π_u32_eq
(
tick1
, 
tick0
,

369 "Êush (sz=%zu)", 
sz
);

372 
	}
}

373 
TEST_END


376 
	$deˇy_tickî_hñ≥r
(
¨ía_öd
, 
Êags
, 
boﬁ
 
dúty
, 
ssize_t
 
dt
,

377 
uöt64_t
 
dúty_≈urge0
, uöt64_à
muzzy_≈urge0
, 
boﬁ
 
ãrmö©e_aßp
) {

378 
	#NINTERVALS
 101

	)

379 
n°ime_t
 
time
, 
upd©e_öãrvÆ
, 
deˇy_ms
, 
dódlöe
;

381 
	`n°ime_öô
(&
time
, 0);

382 
	`n°ime_upd©e
(&
time
);

384 
	`n°ime_öô2
(&
deˇy_ms
, 
dt
, 0);

385 
	`n°ime_c›y
(&
dódlöe
, &
time
);

386 
	`n°ime_add
(&
dódlöe
, &
deˇy_ms
);

388 
	`n°ime_öô2
(&
upd©e_öãrvÆ
, 
dt
, 0);

389 
	`n°ime_idivide
(&
upd©e_öãrvÆ
, 
NINTERVALS
);

396 *
p
 = 
	`do_mÆlocx
(1, 
Êags
);

397 
uöt64_t
 
dúty_≈urge1
, 
muzzy_≈urge1
;

399 
i
 = 0; i < 
DECAY_NTICKS_PER_UPDATE
 / 2;

400 
i
++) {

401 *
q
 = 
	`do_mÆlocx
(1, 
Êags
);

402 
	`dÆlocx
(
q
, 
Êags
);

404 
dúty_≈urge1
 = 
	`gë_¨ía_dúty_≈urge
(
¨ía_öd
);

405 
muzzy_≈urge1
 = 
	`gë_¨ía_muzzy_≈urge
(
¨ía_öd
);

407 
	`n°ime_add
(&
time_mock
, &
upd©e_öãrvÆ
);

408 
	`n°ime_upd©e
(&
time
);

409 } 
	`n°ime_com∑ª
(&
time
, &
dódlöe
Ë<0 && ((
dúty_≈urge1
 ==

410 
dúty_≈urge0
 && 
muzzy_≈urge1
 =
muzzy_≈urge0
) ||

411 !
ãrmö©e_aßp
));

412 
	`dÆlocx
(
p
, 
Êags
);

414 i‡(
c⁄fig_°©s
) {

415 
	`as£π_u64_gt
(
dúty_≈urge1
 + 
muzzy_≈urge1
, 
dúty_≈urge0
 +

416 
muzzy_≈urge0
, "ExpectedÖurgingÅo occur");

418 #unde‡
NINTERVALS


419 
	}
}

421 
	$TEST_BEGIN
(
ã°_deˇy_tickî
) {

422 
	`ã°_skù_if
(
	`check_background_thªad_íabÀd
());

423 
	#NPS
 2048

	)

424 
ssize_t
 
ddt
 = 
›t_dúty_deˇy_ms
;

425 
ssize_t
 
mdt
 = 
›t_muzzy_deˇy_ms
;

426 
¨ía_öd
 = 
	`do_¨ía_¸óã
(
ddt
, 
mdt
);

427 
Êags
 = (
	`MALLOCX_ARENA
(
¨ía_öd
Ë| 
MALLOCX_TCACHE_NONE
);

428 *
ps
[
NPS
];

429 
size_t
 
œrge
;

438 
size_t
 
tˇche_max
;

439 
size_t
 
sz
 = (size_t);

440 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.tˇche_max", (*)&
tˇche_max
, &
sz
, 
NULL
,

442 
œrge
 = 
	`«Œocx
(
tˇche_max
 + 1, 
Êags
);

444 
	`do_purge
(
¨ía_öd
);

445 
uöt64_t
 
dúty_≈urge0
 = 
	`gë_¨ía_dúty_≈urge
(
¨ía_öd
);

446 
uöt64_t
 
muzzy_≈urge0
 = 
	`gë_¨ía_muzzy_≈urge
(
¨ía_öd
);

448 
i
 = 0; i < 
NPS
; i++) {

449 
ps
[
i
] = 
	`do_mÆlocx
(
œrge
, 
Êags
);

452 
nupd©es_mock
 = 0;

453 
	`n°ime_öô
(&
time_mock
, 0);

454 
	`n°ime_upd©e
(&
time_mock
);

455 
m⁄Ÿ⁄ic_mock
 = 
åue
;

457 
n°ime_m⁄Ÿ⁄ic_‹ig
 = 
n°ime_m⁄Ÿ⁄ic
;

458 
n°ime_upd©e_‹ig
 = 
n°ime_upd©e
;

459 
n°ime_m⁄Ÿ⁄ic
 = 
n°ime_m⁄Ÿ⁄ic_mock
;

460 
n°ime_upd©e
 = 
n°ime_upd©e_mock
;

462 
i
 = 0; i < 
NPS
; i += 2) {

463 
	`dÆlocx
(
ps
[
i
], 
Êags
);

464 
nupd©es0
 = 
nupd©es_mock
;

465 
	`do_deˇy
(
¨ía_öd
);

466 
	`as£π_u_gt
(
nupd©es_mock
, 
nupd©es0
,

470 
	`deˇy_tickî_hñ≥r
(
¨ía_öd
, 
Êags
, 
åue
, 
ddt
, 
dúty_≈urge0
,

471 
muzzy_≈urge0
, 
åue
);

472 
	`deˇy_tickî_hñ≥r
(
¨ía_öd
, 
Êags
, 
Ál£
, 
ddt
+
mdt
, 
dúty_≈urge0
,

473 
muzzy_≈urge0
, 
Ál£
);

475 
	`do_¨ía_de°roy
(
¨ía_öd
);

477 
n°ime_m⁄Ÿ⁄ic
 = 
n°ime_m⁄Ÿ⁄ic_‹ig
;

478 
n°ime_upd©e
 = 
n°ime_upd©e_‹ig
;

479 #unde‡
NPS


480 
	}
}

481 
TEST_END


483 
	$TEST_BEGIN
(
ã°_deˇy_n⁄m⁄Ÿ⁄ic
) {

484 
	`ã°_skù_if
(
	`check_background_thªad_íabÀd
());

485 
	#NPS
 (
SMOOTHSTEP_NSTEPS
 + 1)

	)

486 
Êags
 = (
	`MALLOCX_ARENA
(0Ë| 
MALLOCX_TCACHE_NONE
);

487 *
ps
[
NPS
];

488 
uöt64_t
 
≈urge0
 = 0;

489 
uöt64_t
 
≈urge1
 = 0;

490 
size_t
 
sz
, 
œrge0
;

491 
i
, 
nupd©es0
;

493 
sz
 = (
size_t
);

494 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.Àxã¡.0.size", (*)&
œrge0
, &
sz
, 
NULL
,

497 
	`as£π_d_eq
(
	`mÆl˘l
("¨ía.0.purge", 
NULL
, NULL, NULL, 0), 0,

499 
	`do_ïoch
();

500 
sz
 = (
uöt64_t
);

501 
≈urge0
 = 
	`gë_¨ía_≈urge
(0);

503 
nupd©es_mock
 = 0;

504 
	`n°ime_öô
(&
time_mock
, 0);

505 
	`n°ime_upd©e
(&
time_mock
);

506 
m⁄Ÿ⁄ic_mock
 = 
Ál£
;

508 
n°ime_m⁄Ÿ⁄ic_‹ig
 = 
n°ime_m⁄Ÿ⁄ic
;

509 
n°ime_upd©e_‹ig
 = 
n°ime_upd©e
;

510 
n°ime_m⁄Ÿ⁄ic
 = 
n°ime_m⁄Ÿ⁄ic_mock
;

511 
n°ime_upd©e
 = 
n°ime_upd©e_mock
;

513 
i
 = 0; i < 
NPS
; i++) {

514 
ps
[
i
] = 
	`mÆlocx
(
œrge0
, 
Êags
);

515 
	`as£π_±r_nŸ_nuŒ
(
ps
[
i
], "Unexpected mallocx() failure");

518 
i
 = 0; i < 
NPS
; i++) {

519 
	`dÆlocx
(
ps
[
i
], 
Êags
);

520 
nupd©es0
 = 
nupd©es_mock
;

521 
	`as£π_d_eq
(
	`mÆl˘l
("¨ía.0.deˇy", 
NULL
, NULL, NULL, 0), 0,

523 
	`as£π_u_gt
(
nupd©es_mock
, 
nupd©es0
,

527 
	`do_ïoch
();

528 
sz
 = (
uöt64_t
);

529 
≈urge1
 = 
	`gë_¨ía_≈urge
(0);

531 i‡(
c⁄fig_°©s
) {

532 
	`as£π_u64_eq
(
≈urge0
, 
≈urge1
, "UnexpectedÖurging occurred");

535 
n°ime_m⁄Ÿ⁄ic
 = 
n°ime_m⁄Ÿ⁄ic_‹ig
;

536 
n°ime_upd©e
 = 
n°ime_upd©e_‹ig
;

537 #unde‡
NPS


538 
	}
}

539 
TEST_END


541 
	$TEST_BEGIN
(
ã°_deˇy_now
) {

542 
	`ã°_skù_if
(
	`check_background_thªad_íabÀd
());

544 
¨ía_öd
 = 
	`do_¨ía_¸óã
(0, 0);

545 
	`as£π_zu_eq
(
	`gë_¨ía_pdúty
(
¨ía_öd
), 0, "Unexpected dirtyÖages");

546 
	`as£π_zu_eq
(
	`gë_¨ía_pmuzzy
(
¨ía_öd
), 0, "Unexpected muzzyÖages");

547 
size_t
 
sizes
[] = {16, 
PAGE
<<2, 
HUGEPAGE
<<2};

549 
i
 = 0; i < (
sizes
)/(
size_t
); i++) {

550 
size_t
 
size
 = 
sizes
[
i
];

551 
	`gíî©e_dúty
(
¨ía_öd
, 
size
);

552 
	`as£π_zu_eq
(
	`gë_¨ía_pdúty
(
¨ía_öd
), 0,

554 
	`as£π_zu_eq
(
	`gë_¨ía_pmuzzy
(
¨ía_öd
), 0,

557 
	`do_¨ía_de°roy
(
¨ía_öd
);

558 
	}
}

559 
TEST_END


561 
	$TEST_BEGIN
(
ã°_deˇy_√vî
) {

562 
	`ã°_skù_if
(
	`check_background_thªad_íabÀd
());

564 
¨ía_öd
 = 
	`do_¨ía_¸óã
(-1, -1);

565 
Êags
 = 
	`MALLOCX_ARENA
(
¨ía_öd
Ë| 
MALLOCX_TCACHE_NONE
;

566 
	`as£π_zu_eq
(
	`gë_¨ía_pdúty
(
¨ía_öd
), 0, "Unexpected dirtyÖages");

567 
	`as£π_zu_eq
(
	`gë_¨ía_pmuzzy
(
¨ía_öd
), 0, "Unexpected muzzyÖages");

568 
size_t
 
sizes
[] = {16, 
PAGE
<<2, 
HUGEPAGE
<<2};

569 *
±rs
[(
sizes
)/(
size_t
)];

570 
i
 = 0; i < (
sizes
)/(
size_t
); i++) {

571 
±rs
[
i
] = 
	`do_mÆlocx
(
sizes
[i], 
Êags
);

574 
size_t
 
pdúty_¥ev
 = 
	`gë_¨ía_pdúty
(
¨ía_öd
);

575 
size_t
 
pmuzzy_¥ev
 = 
	`gë_¨ía_pmuzzy
(
¨ía_öd
);

576 
	`as£π_zu_eq
(
pdúty_¥ev
, 0, "Unexpected dirtyÖages");

577 
	`as£π_zu_eq
(
pmuzzy_¥ev
, 0, "Unexpected muzzyÖages");

578 
i
 = 0; i < (
sizes
)/(
size_t
); i++) {

579 
	`dÆlocx
(
±rs
[
i
], 
Êags
);

580 
size_t
 
pdúty
 = 
	`gë_¨ía_pdúty
(
¨ía_öd
);

581 
size_t
 
pmuzzy
 = 
	`gë_¨ía_pmuzzy
(
¨ía_öd
);

582 
	`as£π_zu_gt
(
pdúty
, 
pdúty_¥ev
,

584 
	`as£π_zu_eq
(
pmuzzy
, 0, "Unexpected muzzyÖages");

585 
pdúty_¥ev
 = 
pdúty
;

587 
	`do_¨ía_de°roy
(
¨ía_öd
);

588 
	}
}

589 
TEST_END


592 
	$maö
() {

593  
	`ã°
(

594 
ã°_deˇy_ticks
,

595 
ã°_deˇy_tickî
,

596 
ã°_deˇy_n⁄m⁄Ÿ⁄ic
,

597 
ã°_deˇy_now
,

598 
ã°_deˇy_√vî
);

599 
	}
}

	@test/unit/div.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/div.h
"

5 
	$TEST_BEGIN
(
ã°_div_exhau°ive
) {

6 
size_t
 
divis‹
 = 2; divisor < 1000 * 1000; ++divisor) {

7 
div_öfo_t
 
div_öfo
;

8 
	`div_öô
(&
div_öfo
, 
divis‹
);

9 
size_t
 
max
 = 1000 * 
divis‹
;

10 i‡(
max
 < 1000 * 1000) {

11 
max
 = 1000 * 1000;

13 
size_t
 
dividíd
 = 0; dividíd < 1000 * 
divis‹
;

14 
dividíd
 +
divis‹
) {

15 
size_t
 
quŸõ¡
 = 
	`div_compuã
(

16 &
div_öfo
, 
dividíd
);

17 
	`as£π_zu_eq
(
dividíd
, 
quŸõ¡
 * 
divis‹
,

19 "gŸ quŸõ¡ %zu", 
divis‹
, 
dividíd
, 
quŸõ¡
);

22 
	}
}

23 
TEST_END


26 
	$maö
() {

27  
	`ã°_no_ªíå™cy
(

28 
ã°_div_exhau°ive
);

29 
	}
}

	@test/unit/extent_quantize.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	$TEST_BEGIN
(
ã°_smÆl_exã¡_size
) {

4 
nbös
, 
i
;

5 
size_t
 
sz
, 
exã¡_size
;

6 
size_t
 
mib
[4];

7 
size_t
 
mibÀn
 = (
mib
) / (size_t);

14 
sz
 = ();

15 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.nbös", (*)&
nbös
, &
sz
, 
NULL
, 0), 0,

18 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ías.bö.0.¶ab_size", 
mib
, &
mibÀn
), 0,

20 
i
 = 0; i < 
nbös
; i++) {

21 
mib
[2] = 
i
;

22 
sz
 = (
size_t
);

23 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
exã¡_size
, &
sz
,

24 
NULL
, 0), 0, "Unexpected mallctlbymib failure");

25 
	`as£π_zu_eq
(
exã¡_size
,

26 
	`exã¡_size_qu™tize_Êo‹
(
exã¡_size
),

28 "”xã¡_size=%zu)", 
exã¡_size
);

29 
	`as£π_zu_eq
(
exã¡_size
,

30 
	`exã¡_size_qu™tize_˚û
(
exã¡_size
),

32 "”xã¡_size=%zu)", 
exã¡_size
);

34 
	}
}

35 
TEST_END


37 
	$TEST_BEGIN
(
ã°_œrge_exã¡_size
) {

38 
boﬁ
 
ˇche_oblivious
;

39 
∆exã¡s
, 
i
;

40 
size_t
 
sz
, 
exã¡_size_¥ev
, 
˚û_¥ev
;

41 
size_t
 
mib
[4];

42 
size_t
 
mibÀn
 = (
mib
) / (size_t);

49 
sz
 = (
boﬁ
);

50 
	`as£π_d_eq
(
	`mÆl˘l
("c⁄fig.ˇche_oblivious", (*)&
ˇche_oblivious
,

51 &
sz
, 
NULL
, 0), 0, "Unexpected mallctl failure");

53 
sz
 = ();

54 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.∆exã¡s", (*)&
∆exã¡s
, &
sz
, 
NULL
,

57 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ías.Àxã¡.0.size", 
mib
, &
mibÀn
), 0,

59 
i
 = 0; i < 
∆exã¡s
; i++) {

60 
size_t
 
Àxã¡_size
, 
exã¡_size
, 
Êo‹
, 
˚û
;

62 
mib
[2] = 
i
;

63 
sz
 = (
size_t
);

64 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
Àxã¡_size
,

65 &
sz
, 
NULL
, 0), 0, "Unexpected mallctlbymib failure");

66 
exã¡_size
 = 
ˇche_oblivious
 ? 
Àxã¡_size
 + 
PAGE
 :

67 
Àxã¡_size
;

68 
Êo‹
 = 
	`exã¡_size_qu™tize_Êo‹
(
exã¡_size
);

69 
˚û
 = 
	`exã¡_size_qu™tize_˚û
(
exã¡_size
);

71 
	`as£π_zu_eq
(
exã¡_size
, 
Êo‹
,

73 "÷exã¡_size=%zu,Éxã¡_size=%zu)", 
Àxã¡_size
,

74 
exã¡_size
);

75 
	`as£π_zu_eq
(
exã¡_size
, 
˚û
,

77 "÷exã¡_size=%zu,Éxã¡_size=%zu)", 
Àxã¡_size
,

78 
exã¡_size
);

80 i‡(
i
 > 0) {

81 
	`as£π_zu_eq
(
exã¡_size_¥ev
,

82 
	`exã¡_size_qu™tize_Êo‹
(
exã¡_size
 - 
PAGE
),

84 i‡(
exã¡_size_¥ev
 < 
˚û_¥ev
) {

85 
	`as£π_zu_eq
(
˚û_¥ev
, 
exã¡_size
,

88 "exã¡_size=%zu)", 
exã¡_size_¥ev
,

89 
˚û_¥ev
, 
exã¡_size
);

92 i‡(
i
 + 1 < 
∆exã¡s
) {

93 
exã¡_size_¥ev
 = 
Êo‹
;

94 
˚û_¥ev
 = 
	`exã¡_size_qu™tize_˚û
(
exã¡_size
 +

95 
PAGE
);

98 
	}
}

99 
TEST_END


101 
	$TEST_BEGIN
(
ã°_m⁄Ÿ⁄ic
) {

102 
	#SZ_MAX
 
	`ZU
(4 * 1024 * 1024)

	)

103 
i
;

104 
size_t
 
Êo‹_¥ev
, 
˚û_¥ev
;

106 
Êo‹_¥ev
 = 0;

107 
˚û_¥ev
 = 0;

108 
i
 = 1; i <
SZ_MAX
 >> 
LG_PAGE
; i++) {

109 
size_t
 
exã¡_size
, 
Êo‹
, 
˚û
;

111 
exã¡_size
 = 
i
 << 
LG_PAGE
;

112 
Êo‹
 = 
	`exã¡_size_qu™tize_Êo‹
(
exã¡_size
);

113 
˚û
 = 
	`exã¡_size_qu™tize_˚û
(
exã¡_size
);

115 
	`as£π_zu_À
(
Êo‹
, 
exã¡_size
,

117 
Êo‹
, 
exã¡_size
, 
˚û
);

118 
	`as£π_zu_ge
(
˚û
, 
exã¡_size
,

120 "˚û=%zu)", 
Êo‹
, 
exã¡_size
, 
˚û
);

122 
	`as£π_zu_À
(
Êo‹_¥ev
, 
Êo‹
, "Floor should be monotonic "

124 
Êo‹_¥ev
, 
Êo‹
, 
exã¡_size
, 
˚û
);

125 
	`as£π_zu_À
(
˚û_¥ev
, 
˚û
, "Ceiling should be monotonic "

127 
Êo‹
, 
exã¡_size
, 
˚û_¥ev
, 
˚û
);

129 
Êo‹_¥ev
 = 
Êo‹
;

130 
˚û_¥ev
 = 
˚û
;

132 
	}
}

133 
TEST_END


136 
	$maö
() {

137  
	`ã°
(

138 
ã°_smÆl_exã¡_size
,

139 
ã°_œrge_exã¡_size
,

140 
ã°_m⁄Ÿ⁄ic
);

141 
	}
}

	@test/unit/fork.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 #i‚de‡
_WIN32


4 
	~<sys/waô.h
>

7 #i‚de‡
_WIN32


9 
	$waô_f‹_chûd_exô
(
pid
) {

10 
°©us
;

11 
åue
) {

12 i‡(
	`waôpid
(
pid
, &
°©us
, 0) == -1) {

13 
	`ã°_Áû
("Unexpected waitpid() failure.");

15 i‡(
	`WIFSIGNALED
(
°©us
)) {

16 
	`ã°_Áû
("Unexpected childÅermination dueÅo "

17 "sig«»%d", 
	`WTERMSIG
(
°©us
));

20 i‡(
	`WIFEXITED
(
°©us
)) {

21 i‡(
	`WEXITSTATUS
(
°©us
) != 0) {

22 
	`ã°_Áû
("Unexpected childÉxit value %d",

23 
	`WEXITSTATUS
(
°©us
));

28 
	}
}

31 
	$TEST_BEGIN
(
ã°_f‹k
) {

32 #i‚de‡
_WIN32


33 *
p
;

34 
pid_t
 
pid
;

37 
¨ía_öd
;

38 
size_t
 
sz
 = ();

39 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.¸óã", (*)&
¨ía_öd
, &
sz
, 
NULL
, 0),

43 
ﬁd_¨ía_öd
;

44 
sz
 = (
ﬁd_¨ía_öd
);

45 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.¨ía", (*)&
ﬁd_¨ía_öd
, &
sz
,

46 (*)&
¨ía_öd
, (arena_ind)), 0,

49 
p
 = 
	`mÆloc
(1);

50 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected malloc() failure");

52 
pid
 = 
	`f‹k
();

54 
	`‰ì
(
p
);

56 
p
 = 
	`mÆloc
(64);

57 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected malloc() failure");

58 
	`‰ì
(
p
);

60 i‡(
pid
 == -1) {

62 
	`ã°_Áû
("Unexpected fork() failure");

63 } i‡(
pid
 == 0) {

65 
	`_exô
(0);

67 
	`waô_f‹_chûd_exô
(
pid
);

70 
	`ã°_skù
("fork(2) is irrelevantÅo Windows");

72 
	}
}

73 
	gTEST_END


75 #i‚de‡
_WIN32


77 
	$do_f‹k_thd
(*
¨g
) {

78 
	`mÆloc
(1);

79 
pid
 = 
	`f‹k
();

80 i‡(
pid
 == -1) {

82 
	`ã°_Áû
("Unexpected fork() failure");

83 } i‡(
pid
 == 0) {

85 *
¨gs
[] = {"åue", 
NULL
};

86 
	`execvp
(
¨gs
[0],árgs);

87 
	`ã°_Áû
("Exec failed");

90 
	`waô_f‹_chûd_exô
(
pid
);

92  
NULL
;

93 
	}
}

96 #i‚de‡
_WIN32


98 
	$do_ã°_f‹k_mu…ôhªaded
() {

99 
thd_t
 
chûd
;

100 
	`thd_¸óã
(&
chûd
, 
do_f‹k_thd
, 
NULL
);

101 
	`do_f‹k_thd
(
NULL
);

102 
	`thd_joö
(
chûd
, 
NULL
);

103 
	}
}

106 
	$TEST_BEGIN
(
ã°_f‹k_mu…ôhªaded
) {

107 #i‚de‡
_WIN32


117 
i
 = 0; i < 100; i++) {

118 
pid
 = 
	`f‹k
();

119 i‡(
pid
 == -1) {

121 
	`ã°_Áû
("Unexpected fork() failure,");

122 } i‡(
pid
 == 0) {

124 
	`do_ã°_f‹k_mu…ôhªaded
();

125 
	`_exô
(0);

127 
	`waô_f‹_chûd_exô
(
pid
);

131 
	`ã°_skù
("fork(2) is irrelevantÅo Windows");

133 
	}
}

134 
TEST_END


137 
	$maö
() {

138  
	`ã°_no_ªíå™cy
(

139 
ã°_f‹k
,

140 
ã°_f‹k_mu…ôhªaded
);

141 
	}
}

	@test/unit/hash.c

30 
	~"ã°/jemÆloc_ã°.h
"

31 
	~"jemÆloc/öã∫Æ/hash.h
"

34 
	mhash_v¨ü¡_x86_32
,

35 
	mhash_v¨ü¡_x86_128
,

36 
	mhash_v¨ü¡_x64_128


37 } 
	thash_v¨ü¡_t
;

40 
	$hash_v¨ü¡_bôs
(
hash_v¨ü¡_t
 
v¨ü¡
) {

41 
v¨ü¡
) {

42 
hash_v¨ü¡_x86_32
:  32;

43 
hash_v¨ü¡_x86_128
:  128;

44 
hash_v¨ü¡_x64_128
:  128;

45 : 
	`nŸ_ªached
();

47 
	}
}

50 
	$hash_v¨ü¡_°rög
(
hash_v¨ü¡_t
 
v¨ü¡
) {

51 
v¨ü¡
) {

52 
hash_v¨ü¡_x86_32
:  "hash_x86_32";

53 
hash_v¨ü¡_x86_128
:  "hash_x86_128";

54 
hash_v¨ü¡_x64_128
:  "hash_x64_128";

55 : 
	`nŸ_ªached
();

57 
	}
}

59 
	#KEY_SIZE
 256

	)

61 
	$hash_v¨ü¡_vîify_key
(
hash_v¨ü¡_t
 
v¨ü¡
, 
uöt8_t
 *
key
) {

62 c⁄° 
hashbyãs
 = 
	`hash_v¨ü¡_bôs
(
v¨ü¡
) / 8;

63 c⁄° 
hashes_size
 = 
hashbyãs
 * 256;

64 
	`VARIABLE_ARRAY
(
uöt8_t
, 
hashes
, 
hashes_size
);

65 
	`VARIABLE_ARRAY
(
uöt8_t
, 
föÆ
, 
hashbyãs
);

66 
i
;

67 
uöt32_t
 
compuãd
, 
ex≥˘ed
;

69 
	`mem£t
(
key
, 0, 
KEY_SIZE
);

70 
	`mem£t
(
hashes
, 0, 
hashes_size
);

71 
	`mem£t
(
föÆ
, 0, 
hashbyãs
);

77 
i
 = 0; i < 256; i++) {

78 
key
[
i
] = (
uöt8_t
)i;

79 
v¨ü¡
) {

80 
hash_v¨ü¡_x86_32
: {

81 
uöt32_t
 
out
;

82 
out
 = 
	`hash_x86_32
(
key
, 
i
, 256-i);

83 
	`mem˝y
(&
hashes
[
i
*
hashbyãs
], &
out
, hashbytes);

85 } 
hash_v¨ü¡_x86_128
: {

86 
uöt64_t
 
out
[2];

87 
	`hash_x86_128
(
key
, 
i
, 256-i, 
out
);

88 
	`mem˝y
(&
hashes
[
i
*
hashbyãs
], 
out
, hashbytes);

90 } 
hash_v¨ü¡_x64_128
: {

91 
uöt64_t
 
out
[2];

92 
	`hash_x64_128
(
key
, 
i
, 256-i, 
out
);

93 
	`mem˝y
(&
hashes
[
i
*
hashbyãs
], 
out
, hashbytes);

95 } : 
	`nŸ_ªached
();

100 
v¨ü¡
) {

101 
hash_v¨ü¡_x86_32
: {

102 
uöt32_t
 
out
 = 
	`hash_x86_32
(
hashes
, 
hashes_size
, 0);

103 
	`mem˝y
(
föÆ
, &
out
, (out));

105 } 
hash_v¨ü¡_x86_128
: {

106 
uöt64_t
 
out
[2];

107 
	`hash_x86_128
(
hashes
, 
hashes_size
, 0, 
out
);

108 
	`mem˝y
(
föÆ
, 
out
, (out));

110 } 
hash_v¨ü¡_x64_128
: {

111 
uöt64_t
 
out
[2];

112 
	`hash_x64_128
(
hashes
, 
hashes_size
, 0, 
out
);

113 
	`mem˝y
(
föÆ
, 
out
, (out));

115 } : 
	`nŸ_ªached
();

118 
compuãd
 = (
föÆ
[0] << 0) | (final[1] << 8) | (final[2] << 16) |

119 (
föÆ
[3] << 24);

121 
v¨ü¡
) {

122 #ifde‡
JEMALLOC_BIG_ENDIAN


123 
hash_v¨ü¡_x86_32
: 
ex≥˘ed
 = 0x6213303eU; ;

124 
hash_v¨ü¡_x86_128
: 
ex≥˘ed
 = 0x266820caU; ;

125 
hash_v¨ü¡_x64_128
: 
ex≥˘ed
 = 0xcc622b6fU; ;

127 
hash_v¨ü¡_x86_32
: 
ex≥˘ed
 = 0xb0f57ee3U; ;

128 
hash_v¨ü¡_x86_128
: 
ex≥˘ed
 = 0xb3ece62aU; ;

129 
hash_v¨ü¡_x64_128
: 
ex≥˘ed
 = 0x6384ba69U; ;

131 : 
	`nŸ_ªached
();

134 
	`as£π_u32_eq
(
compuãd
, 
ex≥˘ed
,

136 
	`hash_v¨ü¡_°rög
(
v¨ü¡
), 
ex≥˘ed
, 
compuãd
);

137 
	}
}

140 
	$hash_v¨ü¡_vîify
(
hash_v¨ü¡_t
 
v¨ü¡
) {

141 
	#MAX_ALIGN
 16

	)

142 
uöt8_t
 
key
[
KEY_SIZE
 + (
MAX_ALIGN
 - 1)];

143 
i
;

145 
i
 = 0; i < 
MAX_ALIGN
; i++) {

146 
	`hash_v¨ü¡_vîify_key
(
v¨ü¡
, &
key
[
i
]);

148 #unde‡
MAX_ALIGN


149 
	}
}

150 #unde‡
KEY_SIZE


152 
	$TEST_BEGIN
(
ã°_hash_x86_32
) {

153 
	`hash_v¨ü¡_vîify
(
hash_v¨ü¡_x86_32
);

154 
	}
}

155 
TEST_END


157 
	$TEST_BEGIN
(
ã°_hash_x86_128
) {

158 
	`hash_v¨ü¡_vîify
(
hash_v¨ü¡_x86_128
);

159 
	}
}

160 
TEST_END


162 
	$TEST_BEGIN
(
ã°_hash_x64_128
) {

163 
	`hash_v¨ü¡_vîify
(
hash_v¨ü¡_x64_128
);

164 
	}
}

165 
TEST_END


168 
	$maö
() {

169  
	`ã°
(

170 
ã°_hash_x86_32
,

171 
ã°_hash_x86_128
,

172 
ã°_hash_x64_128
);

173 
	}
}

	@test/unit/hooks.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
boﬁ
 
	ghook_ˇŒed
 = 
Ál£
;

6 
	$hook
() {

7 
hook_ˇŒed
 = 
åue
;

8 
	}
}

11 
	$func_to_hook
(
¨g1
, 
¨g2
) {

12  
¨g1
 + 
¨g2
;

13 
	}
}

15 
	#func_to_hook
 
	`JEMALLOC_HOOK
(
func_to_hook
, 
hooks_libc_hook
)

	)

17 
	$TEST_BEGIN
(
unhooked_ˇŒ
) {

18 
hooks_libc_hook
 = 
NULL
;

19 
hook_ˇŒed
 = 
Ál£
;

20 
	`as£π_d_eq
(3, 
	`func_to_hook
(1, 2), "Hooking changedÑeturn value.");

21 
	`as£π_Ál£
(
hook_ˇŒed
, "Nulling out hook didn'tÅake.");

22 
	}
}

23 
TEST_END


25 
	$TEST_BEGIN
(
hooked_ˇŒ
) {

26 
hooks_libc_hook
 = &
hook
;

27 
hook_ˇŒed
 = 
Ál£
;

28 
	`as£π_d_eq
(3, 
	`func_to_hook
(1, 2), "Hooking changedÑeturn value.");

29 
	`as£π_åue
(
hook_ˇŒed
, "Hook should haveÉxecuted.");

30 
	}
}

31 
TEST_END


34 
	$maö
() {

35  
	`ã°
(

36 
unhooked_ˇŒ
,

37 
hooked_ˇŒ
);

38 
	}
}

	@test/unit/junk.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/utû.h
"

5 
¨ía_dÆloc_junk_smÆl_t
 *
	g¨ía_dÆloc_junk_smÆl_‹ig
;

6 
œrge_dÆloc_junk_t
 *
	gœrge_dÆloc_junk_‹ig
;

7 
œrge_dÆloc_maybe_junk_t
 *
	gœrge_dÆloc_maybe_junk_‹ig
;

8 *
	gw©ch_f‹_junkög
;

9 
boﬁ
 
	gßw_junkög
;

12 
	$w©ch_junkög
(*
p
) {

13 
w©ch_f‹_junkög
 = 
p
;

14 
ßw_junkög
 = 
Ál£
;

15 
	}
}

18 
	$¨ía_dÆloc_junk_smÆl_öãr˚±
(*
±r
, c⁄° 
bö_öfo_t
 *
bö_öfo
) {

19 
size_t
 
i
;

21 
	`¨ía_dÆloc_junk_smÆl_‹ig
(
±r
, 
bö_öfo
);

22 
i
 = 0; i < 
bö_öfo
->
ªg_size
; i++) {

23 
	`as£π_u_eq
(((
uöt8_t
 *)
±r
)[
i
], 
JEMALLOC_FREE_JUNK
,

25 
i
, 
bö_öfo
->
ªg_size
);

27 i‡(
±r
 =
w©ch_f‹_junkög
) {

28 
ßw_junkög
 = 
åue
;

30 
	}
}

33 
	$œrge_dÆloc_junk_öãr˚±
(*
±r
, 
size_t
 
usize
) {

34 
size_t
 
i
;

36 
	`œrge_dÆloc_junk_‹ig
(
±r
, 
usize
);

37 
i
 = 0; i < 
usize
; i++) {

38 
	`as£π_u_eq
(((
uöt8_t
 *)
±r
)[
i
], 
JEMALLOC_FREE_JUNK
,

40 
i
, 
usize
);

42 i‡(
±r
 =
w©ch_f‹_junkög
) {

43 
ßw_junkög
 = 
åue
;

45 
	}
}

48 
	$œrge_dÆloc_maybe_junk_öãr˚±
(*
±r
, 
size_t
 
usize
) {

49 
	`œrge_dÆloc_maybe_junk_‹ig
(
±r
, 
usize
);

50 i‡(
±r
 =
w©ch_f‹_junkög
) {

51 
ßw_junkög
 = 
åue
;

53 
	}
}

56 
	$ã°_junk
(
size_t
 
sz_mö
, size_à
sz_max
) {

57 
uöt8_t
 *
s
;

58 
size_t
 
sz_¥ev
, 
sz
, 
i
;

60 i‡(
›t_junk_‰ì
) {

61 
¨ía_dÆloc_junk_smÆl_‹ig
 = 
¨ía_dÆloc_junk_smÆl
;

62 
¨ía_dÆloc_junk_smÆl
 = 
¨ía_dÆloc_junk_smÆl_öãr˚±
;

63 
œrge_dÆloc_junk_‹ig
 = 
œrge_dÆloc_junk
;

64 
œrge_dÆloc_junk
 = 
œrge_dÆloc_junk_öãr˚±
;

65 
œrge_dÆloc_maybe_junk_‹ig
 = 
œrge_dÆloc_maybe_junk
;

66 
œrge_dÆloc_maybe_junk
 = 
œrge_dÆloc_maybe_junk_öãr˚±
;

69 
sz_¥ev
 = 0;

70 
s
 = (
uöt8_t
 *)
	`mÆlocx
(
sz_mö
, 0);

71 
	`as£π_±r_nŸ_nuŒ
((*)
s
, "Unexpected mallocx() failure");

73 
sz
 = 
	`ßŒocx
(
s
, 0); sz <
sz_max
;

74 
sz_¥ev
 = 
sz
, sz = 
	`ßŒocx
(
s
, 0)) {

75 i‡(
sz_¥ev
 > 0) {

76 
	`as£π_u_eq
(
s
[0], 'a',

78 
	`ZU
(0), 
sz_¥ev
);

79 
	`as£π_u_eq
(
s
[
sz_¥ev
-1], 'a',

81 
sz_¥ev
-1, sz_prev);

84 
i
 = 
sz_¥ev
; i < 
sz
; i++) {

85 i‡(
›t_junk_Æloc
) {

86 
	`as£π_u_eq
(
s
[
i
], 
JEMALLOC_ALLOC_JUNK
,

88 "junk-fûÀd", 
i
, 
sz
);

90 
s
[
i
] = 'a';

93 i‡(
	`xÆlocx
(
s
, 
sz
+1, 0, 0) == sz) {

94 
uöt8_t
 *
t
;

95 
	`w©ch_junkög
(
s
);

96 
t
 = (
uöt8_t
 *)
	`øŒocx
(
s
, 
sz
+1, 0);

97 
	`as£π_±r_nŸ_nuŒ
((*)
t
,

99 
	`as£π_zu_ge
(
	`ßŒocx
(
t
, 0), 
sz
+1,

101 i‡(!
	`background_thªad_íabÀd
()) {

102 
	`as£π_±r_√
(
s
, 
t
,

104 
	`as£π_åue
(!
›t_junk_‰ì
 || 
ßw_junkög
,

106 "junk-fûÀd", 
sz
);

108 
s
 = 
t
;

112 
	`w©ch_junkög
(
s
);

113 
	`dÆlocx
(
s
, 0);

114 
	`as£π_åue
(!
›t_junk_‰ì
 || 
ßw_junkög
,

115 "Ex≥˘edÑegi⁄ o‡sizê%zuÅÿbêjunk-fûÀd", 
sz
);

117 i‡(
›t_junk_‰ì
) {

118 
¨ía_dÆloc_junk_smÆl
 = 
¨ía_dÆloc_junk_smÆl_‹ig
;

119 
œrge_dÆloc_junk
 = 
œrge_dÆloc_junk_‹ig
;

120 
œrge_dÆloc_maybe_junk
 = 
œrge_dÆloc_maybe_junk_‹ig
;

122 
	}
}

124 
	$TEST_BEGIN
(
ã°_junk_smÆl
) {

125 
	`ã°_skù_if
(!
c⁄fig_fûl
);

126 
	`ã°_junk
(1, 
SMALL_MAXCLASS
-1);

127 
	}
}

128 
TEST_END


130 
	$TEST_BEGIN
(
ã°_junk_œrge
) {

131 
	`ã°_skù_if
(!
c⁄fig_fûl
);

132 
	`ã°_junk
(
SMALL_MAXCLASS
+1, (1U << (
LG_LARGE_MINCLASS
+1)));

133 
	}
}

134 
TEST_END


137 
	$maö
() {

138  
	`ã°
(

139 
ã°_junk_smÆl
,

140 
ã°_junk_œrge
);

141 
	}
}

	@test/unit/junk_alloc.c

1 
	~"junk.c
"

	@test/unit/junk_free.c

1 
	~"junk.c
"

	@test/unit/log.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/log.h
"

6 
	$ex≥˘_no_loggög
(c⁄° *
«mes
) {

7 
log_v¨_t
 
log_l1
 = 
	`LOG_VAR_INIT
("l1");

8 
log_v¨_t
 
log_l2
 = 
	`LOG_VAR_INIT
("l2");

9 
log_v¨_t
 
log_l2_a
 = 
	`LOG_VAR_INIT
("l2.a");

11 
	`°r˝y
(
log_v¨_«mes
, 
«mes
);

13 
cou¡
 = 0;

15 
i
 = 0; i < 10; i++) {

16 
	`log_do_begö
(
log_l1
)

17 
cou¡
++;

18 
	`log_do_íd
(
log_l1
)

20 
	`log_do_begö
(
log_l2
)

21 
cou¡
++;

22 
	`log_do_íd
(
log_l2
)

24 
	`log_do_begö
(
log_l2_a
)

25 
cou¡
++;

26 
	`log_do_íd
(
log_l2_a
)

28 
	`as£π_d_eq
(
cou¡
, 0, "DisabledÜoggingÇot ignored!");

29 
	}
}

31 
	$TEST_BEGIN
(
ã°_log_dißbÀd
) {

32 
	`ã°_skù_if
(!
c⁄fig_log
);

33 
	`©omic_°‹e_b
(&
log_öô_d⁄e
, 
åue
, 
ATOMIC_RELAXED
);

34 
	`ex≥˘_no_loggög
("");

35 
	`ex≥˘_no_loggög
("abc");

36 
	`ex≥˘_no_loggög
("a.b.c");

37 
	`ex≥˘_no_loggög
("l12");

38 
	`ex≥˘_no_loggög
("l123|a456|b789");

39 
	`ex≥˘_no_loggög
("|||");

40 
	}
}

41 
TEST_END


43 
	$TEST_BEGIN
(
ã°_log_íabÀd_dúe˘
) {

44 
	`ã°_skù_if
(!
c⁄fig_log
);

45 
	`©omic_°‹e_b
(&
log_öô_d⁄e
, 
åue
, 
ATOMIC_RELAXED
);

46 
log_v¨_t
 
log_l1
 = 
	`LOG_VAR_INIT
("l1");

47 
log_v¨_t
 
log_l1_a
 = 
	`LOG_VAR_INIT
("l1.a");

48 
log_v¨_t
 
log_l2
 = 
	`LOG_VAR_INIT
("l2");

50 
cou¡
;

52 
cou¡
 = 0;

53 
	`°r˝y
(
log_v¨_«mes
, "l1");

54 
i
 = 0; i < 10; i++) {

55 
	`log_do_begö
(
log_l1
)

56 
cou¡
++;

57 
	`log_do_íd
(
log_l1
)

59 
	`as£π_d_eq
(
cou¡
, 10, "Mis-logged!");

61 
cou¡
 = 0;

62 
	`°r˝y
(
log_v¨_«mes
, "l1.a");

63 
i
 = 0; i < 10; i++) {

64 
	`log_do_begö
(
log_l1_a
)

65 
cou¡
++;

66 
	`log_do_íd
(
log_l1_a
)

68 
	`as£π_d_eq
(
cou¡
, 10, "Mis-logged!");

70 
cou¡
 = 0;

71 
	`°r˝y
(
log_v¨_«mes
, "l1.a|abc|l2|def");

72 
i
 = 0; i < 10; i++) {

73 
	`log_do_begö
(
log_l1_a
)

74 
cou¡
++;

75 
	`log_do_íd
(
log_l1_a
)

77 
	`log_do_begö
(
log_l2
)

78 
cou¡
++;

79 
	`log_do_íd
(
log_l2
)

81 
	`as£π_d_eq
(
cou¡
, 20, "Mis-logged!");

82 
	}
}

83 
TEST_END


85 
	$TEST_BEGIN
(
ã°_log_íabÀd_ödúe˘
) {

86 
	`ã°_skù_if
(!
c⁄fig_log
);

87 
	`©omic_°‹e_b
(&
log_öô_d⁄e
, 
åue
, 
ATOMIC_RELAXED
);

88 
	`°r˝y
(
log_v¨_«mes
, "l0|l1|abc|l2.b|def");

91 
log_v¨_t
 
log_l1
 = 
	`LOG_VAR_INIT
("l1");

93 
log_v¨_t
 
log_l1a
 = 
	`LOG_VAR_INIT
("l1a");

95 
log_v¨_t
 
log_l1_a
 = 
	`LOG_VAR_INIT
("l1.a");

97 
log_v¨_t
 
log_l2_a
 = 
	`LOG_VAR_INIT
("l2.a");

99 
log_v¨_t
 
log_l2_b_a
 = 
	`LOG_VAR_INIT
("l2.b.a");

101 
log_v¨_t
 
log_l2_b_b
 = 
	`LOG_VAR_INIT
("l2.b.b");

104 
cou¡
 = 0;

105 
i
 = 0; i < 10; i++) {

106 
	`log_do_begö
(
log_l1
)

107 
cou¡
++;

108 
	`log_do_íd
(
log_l1
)

110 
	`log_do_begö
(
log_l1a
)

111 
cou¡
++;

112 
	`log_do_íd
(
log_l1a
)

114 
	`log_do_begö
(
log_l1_a
)

115 
cou¡
++;

116 
	`log_do_íd
(
log_l1_a
)

118 
	`log_do_begö
(
log_l2_a
)

119 
cou¡
++;

120 
	`log_do_íd
(
log_l2_a
)

122 
	`log_do_begö
(
log_l2_b_a
)

123 
cou¡
++;

124 
	`log_do_íd
(
log_l2_b_a
)

126 
	`log_do_begö
(
log_l2_b_b
)

127 
cou¡
++;

128 
	`log_do_íd
(
log_l2_b_b
)

131 
	`as£π_d_eq
(
cou¡
, 40, "Mis-logged!");

132 
	}
}

133 
TEST_END


135 
	$TEST_BEGIN
(
ã°_log_íabÀd_globÆ
) {

136 
	`ã°_skù_if
(!
c⁄fig_log
);

137 
	`©omic_°‹e_b
(&
log_öô_d⁄e
, 
åue
, 
ATOMIC_RELAXED
);

138 
	`°r˝y
(
log_v¨_«mes
, "abc|.|def");

140 
log_v¨_t
 
log_l1
 = 
	`LOG_VAR_INIT
("l1");

141 
log_v¨_t
 
log_l2_a_a
 = 
	`LOG_VAR_INIT
("l2.a.a");

143 
cou¡
 = 0;

144 
i
 = 0; i < 10; i++) {

145 
	`log_do_begö
(
log_l1
)

146 
cou¡
++;

147 
	`log_do_íd
(
log_l1
)

149 
	`log_do_begö
(
log_l2_a_a
)

150 
cou¡
++;

151 
	`log_do_íd
(
log_l2_a_a
)

153 
	`as£π_d_eq
(
cou¡
, 20, "Mis-logged!");

154 
	}
}

155 
TEST_END


157 
	$TEST_BEGIN
(
ã°_logs_if_no_öô
) {

158 
	`ã°_skù_if
(!
c⁄fig_log
);

159 
	`©omic_°‹e_b
(&
log_öô_d⁄e
, 
Ál£
, 
ATOMIC_RELAXED
);

161 
log_v¨_t
 
l
 = 
	`LOG_VAR_INIT
("definitely.not.enabled");

163 
cou¡
 = 0;

164 
i
 = 0; i < 10; i++) {

165 
	`log_do_begö
(
l
)

166 
cou¡
++;

167 
	`log_do_íd
(
l
)

169 
	`as£π_d_eq
(
cou¡
, 0, "Logging shouldn't happen ifÇot initialized.");

170 
	}
}

171 
TEST_END


177 
	$TEST_BEGIN
(
ã°_log_⁄ly_f‹m©_°rög
) {

178 i‡(
Ál£
) {

179 
	`LOG
("log_str", "Noárguments followÅhis format string.");

181 
	}
}

182 
TEST_END


185 
	$maö
() {

186  
	`ã°
(

187 
ã°_log_dißbÀd
,

188 
ã°_log_íabÀd_dúe˘
,

189 
ã°_log_íabÀd_ödúe˘
,

190 
ã°_log_íabÀd_globÆ
,

191 
ã°_logs_if_no_öô
,

192 
ã°_log_⁄ly_f‹m©_°rög
);

193 
	}
}

	@test/unit/mallctl.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/utû.h
"

5 
	$TEST_BEGIN
(
ã°_mÆl˘l_îr‹s
) {

6 
uöt64_t
 
ïoch
;

7 
size_t
 
sz
;

9 
	`as£π_d_eq
(
	`mÆl˘l
("no_such_«me", 
NULL
, NULL, NULL, 0), 
ENOENT
,

12 
	`as£π_d_eq
(
	`mÆl˘l
("vîsi⁄", 
NULL
, NULL, "0.0.0", 
	`°æí
("0.0.0")),

13 
EPERM
, "mallctl() shouldÑeturn EPERM onáttemptÅo write "

16 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", 
NULL
, NULL, (*)&
ïoch
,

17 (
ïoch
)-1), 
EINVAL
,

19 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", 
NULL
, NULL, (*)&
ïoch
,

20 (
ïoch
)+1), 
EINVAL
,

23 
sz
 = (
ïoch
)-1;

24 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", (*)&
ïoch
, &
sz
, 
NULL
, 0), 
EINVAL
,

26 
sz
 = (
ïoch
)+1;

27 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", (*)&
ïoch
, &
sz
, 
NULL
, 0), 
EINVAL
,

29 
	}
}

30 
TEST_END


32 
	$TEST_BEGIN
(
ã°_mÆl˘ amëomib_îr‹s
) {

33 
size_t
 
mib
[1];

34 
size_t
 
mibÀn
;

36 
mibÀn
 = (
mib
)/(
size_t
);

37 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("no_such_«me", 
mib
, &
mibÀn
), 
ENOENT
,

39 
	}
}

40 
TEST_END


42 
	$TEST_BEGIN
(
ã°_mÆl˘lbymib_îr‹s
) {

43 
uöt64_t
 
ïoch
;

44 
size_t
 
sz
;

45 
size_t
 
mib
[1];

46 
size_t
 
mibÀn
;

48 
mibÀn
 = (
mib
)/(
size_t
);

49 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("vîsi⁄", 
mib
, &
mibÀn
), 0,

52 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, "0.0.0",

53 
	`°æí
("0.0.0")), 
EPERM
, "mallctl() shouldÑeturn EPERM on "

56 
mibÀn
 = (
mib
)/(
size_t
);

57 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("ïoch", 
mib
, &
mibÀn
), 0,

60 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, (*)&
ïoch
,

61 (
ïoch
)-1), 
EINVAL
,

63 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, (*)&
ïoch
,

64 (
ïoch
)+1), 
EINVAL
,

67 
sz
 = (
ïoch
)-1;

68 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
ïoch
, &
sz
, 
NULL
, 0),

69 
EINVAL
,

71 
sz
 = (
ïoch
)+1;

72 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
ïoch
, &
sz
, 
NULL
, 0),

73 
EINVAL
,

75 
	}
}

76 
TEST_END


78 
	$TEST_BEGIN
(
ã°_mÆl˘l_ªad_wrôe
) {

79 
uöt64_t
 
ﬁd_ïoch
, 
√w_ïoch
;

80 
size_t
 
sz
 = (
ﬁd_ïoch
);

83 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", 
NULL
, NULL, NULL, 0), 0,

85 
	`as£π_zu_eq
(
sz
, (
ﬁd_ïoch
), "Unexpected output size");

88 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", (*)&
ﬁd_ïoch
, &
sz
, 
NULL
, 0), 0,

90 
	`as£π_zu_eq
(
sz
, (
ﬁd_ïoch
), "Unexpected output size");

93 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", 
NULL
, NULL, (*)&
√w_ïoch
,

94 (
√w_ïoch
)), 0, "Unexpected mallctl() failure");

95 
	`as£π_zu_eq
(
sz
, (
ﬁd_ïoch
), "Unexpected output size");

98 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", (*)&
ﬁd_ïoch
, &
sz
,

99 (*)&
√w_ïoch
, (new_epoch)), 0,

101 
	`as£π_zu_eq
(
sz
, (
ﬁd_ïoch
), "Unexpected output size");

102 
	}
}

103 
TEST_END


105 
	$TEST_BEGIN
(
ã°_mÆl˘ amëomib_sh‹t_mib
) {

106 
size_t
 
mib
[4];

107 
size_t
 
mibÀn
;

109 
mibÀn
 = 3;

110 
mib
[3] = 42;

111 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ías.bö.0.ƒegs", 
mib
, &
mibÀn
), 0,

113 
	`as£π_zu_eq
(
mibÀn
, 3, "Unexpected mib outputÜength");

114 
	`as£π_zu_eq
(
mib
[3], 42,

116 
	}
}

117 
TEST_END


119 
	$TEST_BEGIN
(
ã°_mÆl˘l_c⁄fig
) {

120 
	#TEST_MALLCTL_CONFIG
(
c⁄fig
, 
t
) do { \

121 
t
 
ﬁdvÆ
; \

122 
size_t
 
sz
 = (
ﬁdvÆ
); \

123 
	`as£π_d_eq
(
	`mÆl˘l
("c⁄fig."#c⁄fig, (*)&
ﬁdvÆ
, &
sz
, \

124 
NULL
, 0), 0, "Unexpected mallctl() failure"); \

125 
	`as£π_b_eq
(
ﬁdvÆ
, 
c⁄fig_
##
c⁄fig
, "Incorrect config value"); \

126 
	`as£π_zu_eq
(
sz
, (
ﬁdvÆ
), "Unexpected output size"); \

127 } 0)

	)

129 
	`TEST_MALLCTL_CONFIG
(
ˇche_oblivious
, 
boﬁ
);

130 
	`TEST_MALLCTL_CONFIG
(
debug
, 
boﬁ
);

131 
	`TEST_MALLCTL_CONFIG
(
fûl
, 
boﬁ
);

132 
	`TEST_MALLCTL_CONFIG
(
œzy_lock
, 
boﬁ
);

133 
	`TEST_MALLCTL_CONFIG
(
mÆloc_c⁄f
, const *);

134 
	`TEST_MALLCTL_CONFIG
(
¥of
, 
boﬁ
);

135 
	`TEST_MALLCTL_CONFIG
(
¥of_libgcc
, 
boﬁ
);

136 
	`TEST_MALLCTL_CONFIG
(
¥of_libunwöd
, 
boﬁ
);

137 
	`TEST_MALLCTL_CONFIG
(
°©s
, 
boﬁ
);

138 
	`TEST_MALLCTL_CONFIG
(
uåa˚
, 
boﬁ
);

139 
	`TEST_MALLCTL_CONFIG
(
xmÆloc
, 
boﬁ
);

141 #unde‡
TEST_MALLCTL_CONFIG


142 
	}
}

143 
TEST_END


145 
	$TEST_BEGIN
(
ã°_mÆl˘l_›t
) {

146 
boﬁ
 
c⁄fig_Æways
 = 
åue
;

148 
	#TEST_MALLCTL_OPT
(
t
, 
›t
, 
c⁄fig
) do { \

149 
t
 
ﬁdvÆ
; \

150 
size_t
 
sz
 = (
ﬁdvÆ
); \

151 
ex≥˘ed
 = 
c⁄fig_
##
c⁄fig
 ? 0 : 
ENOENT
; \

152 
ªsu…
 = 
	`mÆl˘l
("›t."#›t, (*)&
ﬁdvÆ
, &
sz
, 
NULL
, \

154 
	`as£π_d_eq
(
ªsu…
, 
ex≥˘ed
, \

156 
	`as£π_zu_eq
(
sz
, (
ﬁdvÆ
), "Unexpected output size"); \

157 } 0)

	)

159 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
ab‹t
, 
Æways
);

160 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
ab‹t_c⁄f
, 
Æways
);

161 
	`TEST_MALLCTL_OPT
(c⁄° *, 
mëad©a_thp
, 
Æways
);

162 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
ªèö
, 
Æways
);

163 
	`TEST_MALLCTL_OPT
(c⁄° *, 
dss
, 
Æways
);

164 
	`TEST_MALLCTL_OPT
(, 
«ª«s
, 
Æways
);

165 
	`TEST_MALLCTL_OPT
(c⁄° *, 
≥r˝u_¨ía
, 
Æways
);

166 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
background_thªad
, 
Æways
);

167 
	`TEST_MALLCTL_OPT
(
ssize_t
, 
dúty_deˇy_ms
, 
Æways
);

168 
	`TEST_MALLCTL_OPT
(
ssize_t
, 
muzzy_deˇy_ms
, 
Æways
);

169 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
°©s_¥öt
, 
Æways
);

170 
	`TEST_MALLCTL_OPT
(c⁄° *, 
junk
, 
fûl
);

171 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
zîo
, 
fûl
);

172 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
uåa˚
, utrace);

173 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
xmÆloc
, xmalloc);

174 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
tˇche
, 
Æways
);

175 
	`TEST_MALLCTL_OPT
(
size_t
, 
lg_exã¡_max_a˘ive_fô
, 
Æways
);

176 
	`TEST_MALLCTL_OPT
(
size_t
, 
lg_tˇche_max
, 
Æways
);

177 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
¥of
,Örof);

178 
	`TEST_MALLCTL_OPT
(c⁄° *, 
¥of_¥efix
, 
¥of
);

179 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
¥of_a˘ive
, 
¥of
);

180 
	`TEST_MALLCTL_OPT
(
ssize_t
, 
lg_¥of_ßm∂e
, 
¥of
);

181 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
¥of_accum
, 
¥of
);

182 
	`TEST_MALLCTL_OPT
(
ssize_t
, 
lg_¥of_öãrvÆ
, 
¥of
);

183 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
¥of_gdump
, 
¥of
);

184 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
¥of_föÆ
, 
¥of
);

185 
	`TEST_MALLCTL_OPT
(
boﬁ
, 
¥of_Àak
, 
¥of
);

187 #unde‡
TEST_MALLCTL_OPT


188 
	}
}

189 
TEST_END


191 
	$TEST_BEGIN
(
ã°_m™∑ge_exam∂e
) {

192 
nbös
, 
i
;

193 
size_t
 
mib
[4];

194 
size_t
 
Àn
, 
mibÀn
;

196 
Àn
 = (
nbös
);

197 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.nbös", (*)&
nbös
, &
Àn
, 
NULL
, 0), 0,

200 
mibÀn
 = 4;

201 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ías.bö.0.size", 
mib
, &
mibÀn
), 0,

203 
i
 = 0; i < 
nbös
; i++) {

204 
size_t
 
bö_size
;

206 
mib
[2] = 
i
;

207 
Àn
 = (
bö_size
);

208 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
bö_size
, &
Àn
,

209 
NULL
, 0), 0, "Unexpected mallctlbymib() failure");

212 
	}
}

213 
TEST_END


215 
	$TEST_BEGIN
(
ã°_tˇche_n⁄e
) {

216 
	`ã°_skù_if
(!
›t_tˇche
);

219 *
p0
 = 
	`mÆlocx
(42, 0);

220 
	`as£π_±r_nŸ_nuŒ
(
p0
, "Unexpected mallocx() failure");

221 *
q
 = 
	`mÆlocx
(42, 0);

222 
	`as£π_±r_nŸ_nuŒ
(
q
, "Unexpected mallocx() failure");

225 
	`dÆlocx
(
p0
, 0);

226 
	`dÆlocx
(
q
, 
MALLOCX_TCACHE_NONE
);

229 *
p1
 = 
	`mÆlocx
(42, 0);

230 
	`as£π_±r_nŸ_nuŒ
(
p1
, "Unexpected mallocx() failure");

231 
	`as£π_±r_eq
(
p0
, 
p1
, "ExpectedÅcacheÅoállocate cachedÑegion");

234 
	`dÆlocx
(
p1
, 
MALLOCX_TCACHE_NONE
);

235 
	}
}

236 
TEST_END


238 
	$TEST_BEGIN
(
ã°_tˇche
) {

239 
	#NTCACHES
 10

	)

240 
tis
[
NTCACHES
];

241 *
ps
[
NTCACHES
];

242 *
qs
[
NTCACHES
];

243 
i
;

244 
size_t
 
sz
, 
psz
, 
qsz
;

246 
psz
 = 42;

247 
qsz
 = 
	`«Œocx
(
psz
, 0) + 1;

250 
i
 = 0; i < 
NTCACHES
; i++) {

251 
sz
 = ();

252 
	`as£π_d_eq
(
	`mÆl˘l
("tˇche.¸óã", (*)&
tis
[
i
], &
sz
, 
NULL
,

253 0), 0, "U√x≥˘ed mÆl˘l(ËÁûuª, i=%u", 
i
);

257 
i
 = 0; i < 
NTCACHES
; i++) {

258 
	`as£π_d_eq
(
	`mÆl˘l
("tˇche.de°roy", 
NULL
, NULL,

259 (*)&
tis
[
i
], ()), 0,

260 "U√x≥˘ed mÆl˘l(ËÁûuª, i=%u", 
i
);

262 
i
 = 0; i < 
NTCACHES
; i++) {

263 
sz
 = ();

264 
	`as£π_d_eq
(
	`mÆl˘l
("tˇche.¸óã", (*)&
tis
[
i
], &
sz
, 
NULL
,

265 0), 0, "U√x≥˘ed mÆl˘l(ËÁûuª, i=%u", 
i
);

269 
i
 = 0; i < 
NTCACHES
; i++) {

270 
	`as£π_d_eq
(
	`mÆl˘l
("tˇche.Êush", 
NULL
, NULL, (*)&
tis
[
i
],

272 
i
);

276 
i
 = 0; i < 
NTCACHES
; i++) {

277 
ps
[
i
] = 
	`mÆlocx
(
psz
, 
	`MALLOCX_TCACHE
(
tis
[i]));

278 
	`as£π_±r_nŸ_nuŒ
(
ps
[
i
], "Unexpected mallocx() failure, i=%u",

279 
i
);

280 
	`dÆlocx
(
ps
[
i
], 
	`MALLOCX_TCACHE
(
tis
[i]));

282 
qs
[
i
] = 
	`mÆlocx
(
qsz
, 
	`MALLOCX_TCACHE
(
tis
[i]));

283 
	`as£π_±r_nŸ_nuŒ
(
qs
[
i
], "Unexpected mallocx() failure, i=%u",

284 
i
);

285 
	`dÆlocx
(
qs
[
i
], 
	`MALLOCX_TCACHE
(
tis
[i]));

289 
i
 = 0; i < 
NTCACHES
; i++) {

290 *
p0
 = 
ps
[
i
];

291 
ps
[
i
] = 
	`mÆlocx
(
psz
, 
	`MALLOCX_TCACHE
(
tis
[i]));

292 
	`as£π_±r_nŸ_nuŒ
(
ps
[
i
], "Unexpected mallocx() failure, i=%u",

293 
i
);

294 
	`as£π_±r_eq
(
ps
[
i
], 
p0
,

295 "Ex≥˘ed mÆlocx(ËtÿÆloˇã cachedÑegi⁄, i=%u", 
i
);

299 
i
 = 0; i < 
NTCACHES
; i++) {

300 *
q0
 = 
qs
[
i
];

301 
qs
[
i
] = 
	`øŒocx
(
ps
[i], 
qsz
, 
	`MALLOCX_TCACHE
(
tis
[i]));

302 
	`as£π_±r_nŸ_nuŒ
(
qs
[
i
], "UnexpectedÑallocx() failure, i=%u",

303 
i
);

304 
	`as£π_±r_eq
(
qs
[
i
], 
q0
,

305 "Ex≥˘edÑÆlocx(ËtÿÆloˇã cachedÑegi⁄, i=%u", 
i
);

307 i‡(
qs
[
i
] =
NULL
) {

308 
qs
[
i
] = 
ps
[i];

311 
i
 = 0; i < 
NTCACHES
; i++) {

312 
	`dÆlocx
(
qs
[
i
], 
	`MALLOCX_TCACHE
(
tis
[i]));

316 
i
 = 0; i < 
NTCACHES
/2; i++) {

317 
	`as£π_d_eq
(
	`mÆl˘l
("tˇche.Êush", 
NULL
, NULL, (*)&
tis
[
i
],

319 
i
);

323 
i
 = 0; i < 
NTCACHES
; i++) {

324 
	`as£π_d_eq
(
	`mÆl˘l
("tˇche.de°roy", 
NULL
, NULL,

325 (*)&
tis
[
i
], ()), 0,

326 "U√x≥˘ed mÆl˘l(ËÁûuª, i=%u", 
i
);

328 
	}
}

329 
TEST_END


331 
	$TEST_BEGIN
(
ã°_thªad_¨ía
) {

332 
ﬁd_¨ía_öd
, 
√w_¨ía_öd
, 
«ª«s
;

334 c⁄° *
›a
;

335 
size_t
 
sz
 = (
›a
);

336 
	`as£π_d_eq
(
	`mÆl˘l
("›t.≥r˝u_¨ía", &
›a
, &
sz
, 
NULL
, 0), 0,

339 
sz
 = ();

340 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.«ª«s", (*)&
«ª«s
, &
sz
, 
NULL
, 0),

342 
	`as£π_u_eq
(
«ª«s
, 
›t_«ª«s
, "Number ofárenas incorrect");

344 i‡(
	`°rcmp
(
›a
, "disabled") == 0) {

345 
√w_¨ía_öd
 = 
«ª«s
 - 1;

346 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.¨ía", (*)&
ﬁd_¨ía_öd
, &
sz
,

347 (*)&
√w_¨ía_öd
, ()), 0,

349 
√w_¨ía_öd
 = 0;

350 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.¨ía", (*)&
ﬁd_¨ía_öd
, &
sz
,

351 (*)&
√w_¨ía_öd
, ()), 0,

354 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.¨ía", (*)&
ﬁd_¨ía_öd
, &
sz
,

355 
NULL
, 0), 0, "Unexpected mallctl() failure");

356 
√w_¨ía_öd
 = 
	`≥r˝u_¨ía_öd_limô
(
›t_≥r˝u_¨ía
) - 1;

357 i‡(
ﬁd_¨ía_öd
 !
√w_¨ía_öd
) {

358 
	`as£π_d_eq
(
	`mÆl˘l
("thread.arena",

359 (*)&
ﬁd_¨ía_öd
, &
sz
, (*)&
√w_¨ía_öd
,

360 ()), 
EPERM
, "thread.arena ctl "

364 
	}
}

365 
TEST_END


367 
	$TEST_BEGIN
(
ã°_¨ía_i_öôülized
) {

368 
«ª«s
, 
i
;

369 
size_t
 
sz
;

370 
size_t
 
mib
[3];

371 
size_t
 
mibÀn
 = (
mib
) / (size_t);

372 
boﬁ
 
öôülized
;

374 
sz
 = (
«ª«s
);

375 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.«ª«s", (*)&
«ª«s
, &
sz
, 
NULL
, 0),

378 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.öôülized", 
mib
, &
mibÀn
), 0,

380 
i
 = 0; i < 
«ª«s
; i++) {

381 
mib
[1] = 
i
;

382 
sz
 = (
öôülized
);

383 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, &
öôülized
, &
sz
, 
NULL
,

387 
mib
[1] = 
MALLCTL_ARENAS_ALL
;

388 
sz
 = (
öôülized
);

389 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, &
öôülized
, &
sz
, 
NULL
, 0), 0,

391 
	`as£π_åue
(
öôülized
,

395 
sz
 = (
öôülized
);

396 
	`as£π_d_eq
(
	`mÆl˘l
(

397 "¨ía." 
	`STRINGIFY
(
MALLCTL_ARENAS_ALL
) ".initialized",

398 (*)&
öôülized
, &
sz
, 
NULL
, 0), 0,

400 
	`as£π_åue
(
öôülized
,

402 
	}
}

403 
TEST_END


405 
	$TEST_BEGIN
(
ã°_¨ía_i_dúty_deˇy_ms
) {

406 
ssize_t
 
dúty_deˇy_ms
, 
‹ig_dúty_deˇy_ms
, 
¥ev_dúty_deˇy_ms
;

407 
size_t
 
sz
 = (
ssize_t
);

409 
	`as£π_d_eq
(
	`mÆl˘l
("arena.0.dirty_decay_ms",

410 (*)&
‹ig_dúty_deˇy_ms
, &
sz
, 
NULL
, 0), 0,

413 
dúty_deˇy_ms
 = -2;

414 
	`as£π_d_eq
(
	`mÆl˘l
("¨ía.0.dúty_deˇy_ms", 
NULL
, NULL,

415 (*)&
dúty_deˇy_ms
, (
ssize_t
)), 
EFAULT
,

418 
dúty_deˇy_ms
 = 0x7fffffff;

419 
	`as£π_d_eq
(
	`mÆl˘l
("¨ía.0.dúty_deˇy_ms", 
NULL
, NULL,

420 (*)&
dúty_deˇy_ms
, (
ssize_t
)), 0,

423 
¥ev_dúty_deˇy_ms
 = 
dúty_deˇy_ms
, dirty_decay_ms = -1;

424 
dúty_deˇy_ms
 < 20; 
¥ev_dúty_deˇy_ms
 = dirty_decay_ms,

425 
dúty_deˇy_ms
++) {

426 
ssize_t
 
ﬁd_dúty_deˇy_ms
;

428 
	`as£π_d_eq
(
	`mÆl˘l
("arena.0.dirty_decay_ms",

429 (*)&
ﬁd_dúty_deˇy_ms
, &
sz
, (*)&
dúty_deˇy_ms
,

430 (
ssize_t
)), 0, "Unexpected mallctl() failure");

431 
	`as£π_zd_eq
(
ﬁd_dúty_deˇy_ms
, 
¥ev_dúty_deˇy_ms
,

434 
	}
}

435 
TEST_END


437 
	$TEST_BEGIN
(
ã°_¨ía_i_muzzy_deˇy_ms
) {

438 
ssize_t
 
muzzy_deˇy_ms
, 
‹ig_muzzy_deˇy_ms
, 
¥ev_muzzy_deˇy_ms
;

439 
size_t
 
sz
 = (
ssize_t
);

441 
	`as£π_d_eq
(
	`mÆl˘l
("arena.0.muzzy_decay_ms",

442 (*)&
‹ig_muzzy_deˇy_ms
, &
sz
, 
NULL
, 0), 0,

445 
muzzy_deˇy_ms
 = -2;

446 
	`as£π_d_eq
(
	`mÆl˘l
("¨ía.0.muzzy_deˇy_ms", 
NULL
, NULL,

447 (*)&
muzzy_deˇy_ms
, (
ssize_t
)), 
EFAULT
,

450 
muzzy_deˇy_ms
 = 0x7fffffff;

451 
	`as£π_d_eq
(
	`mÆl˘l
("¨ía.0.muzzy_deˇy_ms", 
NULL
, NULL,

452 (*)&
muzzy_deˇy_ms
, (
ssize_t
)), 0,

455 
¥ev_muzzy_deˇy_ms
 = 
muzzy_deˇy_ms
, muzzy_decay_ms = -1;

456 
muzzy_deˇy_ms
 < 20; 
¥ev_muzzy_deˇy_ms
 = muzzy_decay_ms,

457 
muzzy_deˇy_ms
++) {

458 
ssize_t
 
ﬁd_muzzy_deˇy_ms
;

460 
	`as£π_d_eq
(
	`mÆl˘l
("arena.0.muzzy_decay_ms",

461 (*)&
ﬁd_muzzy_deˇy_ms
, &
sz
, (*)&
muzzy_deˇy_ms
,

462 (
ssize_t
)), 0, "Unexpected mallctl() failure");

463 
	`as£π_zd_eq
(
ﬁd_muzzy_deˇy_ms
, 
¥ev_muzzy_deˇy_ms
,

466 
	}
}

467 
TEST_END


469 
	$TEST_BEGIN
(
ã°_¨ía_i_purge
) {

470 
«ª«s
;

471 
size_t
 
sz
 = ();

472 
size_t
 
mib
[3];

473 
size_t
 
mibÀn
 = 3;

475 
	`as£π_d_eq
(
	`mÆl˘l
("¨ía.0.purge", 
NULL
, NULL, NULL, 0), 0,

478 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.«ª«s", (*)&
«ª«s
, &
sz
, 
NULL
, 0),

480 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.purge", 
mib
, &
mibÀn
), 0,

482 
mib
[1] = 
«ª«s
;

483 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, NULL, 0), 0,

486 
mib
[1] = 
MALLCTL_ARENAS_ALL
;

487 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, NULL, 0), 0,

489 
	}
}

490 
TEST_END


492 
	$TEST_BEGIN
(
ã°_¨ía_i_deˇy
) {

493 
«ª«s
;

494 
size_t
 
sz
 = ();

495 
size_t
 
mib
[3];

496 
size_t
 
mibÀn
 = 3;

498 
	`as£π_d_eq
(
	`mÆl˘l
("¨ía.0.deˇy", 
NULL
, NULL, NULL, 0), 0,

501 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.«ª«s", (*)&
«ª«s
, &
sz
, 
NULL
, 0),

503 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.deˇy", 
mib
, &
mibÀn
), 0,

505 
mib
[1] = 
«ª«s
;

506 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, NULL, 0), 0,

509 
mib
[1] = 
MALLCTL_ARENAS_ALL
;

510 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, NULL, 0), 0,

512 
	}
}

513 
TEST_END


515 
	$TEST_BEGIN
(
ã°_¨ía_i_dss
) {

516 c⁄° *
dss_¥ec_ﬁd
, *
dss_¥ec_√w
;

517 
size_t
 
sz
 = (
dss_¥ec_ﬁd
);

518 
size_t
 
mib
[3];

519 
size_t
 
mibÀn
;

521 
mibÀn
 = (
mib
)/(
size_t
);

522 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.dss", 
mib
, &
mibÀn
), 0,

525 
dss_¥ec_√w
 = "disabled";

526 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
dss_¥ec_ﬁd
, &
sz
,

527 (*)&
dss_¥ec_√w
, (dss_prec_new)), 0,

529 
	`as£π_°r_√
(
dss_¥ec_ﬁd
, "primary",

532 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
dss_¥ec_√w
, &
sz
,

533 (*)&
dss_¥ec_ﬁd
, (dss_prec_old)), 0,

536 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
dss_¥ec_ﬁd
, &
sz
, 
NULL
,

538 
	`as£π_°r_√
(
dss_¥ec_ﬁd
, "primary",

541 
mib
[1] = 
	`«ª«s_tŸÆ_gë
();

542 
dss_¥ec_√w
 = "disabled";

543 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
dss_¥ec_ﬁd
, &
sz
,

544 (*)&
dss_¥ec_√w
, (dss_prec_new)), 0,

546 
	`as£π_°r_√
(
dss_¥ec_ﬁd
, "primary",

549 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
dss_¥ec_√w
, &
sz
,

550 (*)&
dss_¥ec_ﬁd
, (
dss_¥ec_√w
)), 0,

553 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
dss_¥ec_ﬁd
, &
sz
, 
NULL
,

555 
	`as£π_°r_√
(
dss_¥ec_ﬁd
, "primary",

557 
	}
}

558 
TEST_END


560 
	$TEST_BEGIN
(
ã°_¨ía_i_ªèö_grow_limô
) {

561 
size_t
 
ﬁd_limô
, 
√w_limô
, 
deÁu…_limô
;

562 
size_t
 
mib
[3];

563 
size_t
 
mibÀn
;

565 
boﬁ
 
ªèö_íabÀd
;

566 
size_t
 
sz
 = (
ªèö_íabÀd
);

567 
	`as£π_d_eq
(
	`mÆl˘l
("›t.ªèö", &
ªèö_íabÀd
, &
sz
, 
NULL
, 0),

569 
	`ã°_skù_if
(!
ªèö_íabÀd
);

571 
sz
 = (
deÁu…_limô
);

572 
mibÀn
 = (
mib
)/(
size_t
);

573 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.ªèö_grow_limô", 
mib
, &
mibÀn
),

576 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, &
deÁu…_limô
, &
sz
, 
NULL
, 0), 0,

578 
	`as£π_zu_eq
(
deÁu…_limô
, 
	`sz_pöd2sz
(
EXTENT_GROW_MAX_PIND
),

581 
√w_limô
 = 
PAGE
 - 1;

582 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, &
√w_limô
,

583 (
√w_limô
)), 
EFAULT
, "Unexpected mallctl() success");

585 
√w_limô
 = 
PAGE
 + 1;

586 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, &
√w_limô
,

587 (
√w_limô
)), 0, "Unexpected mallctl() failure");

588 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, &
ﬁd_limô
, &
sz
, 
NULL
, 0), 0,

590 
	`as£π_zu_eq
(
ﬁd_limô
, 
PAGE
,

594 
√w_limô
 = 
	`sz_pöd2sz
(10) - 1;

595 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, &
√w_limô
,

596 (
√w_limô
)), 0, "Unexpected mallctl() failure");

597 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, &
ﬁd_limô
, &
sz
, 
NULL
, 0), 0,

599 
	`as£π_zu_eq
(
ﬁd_limô
, 
	`sz_pöd2sz
(9),

603 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, &
deÁu…_limô
,

604 (
deÁu…_limô
)), 0, "Unexpected mallctl() failure");

605 
	}
}

606 
TEST_END


608 
	$TEST_BEGIN
(
ã°_¨ías_dúty_deˇy_ms
) {

609 
ssize_t
 
dúty_deˇy_ms
, 
‹ig_dúty_deˇy_ms
, 
¥ev_dúty_deˇy_ms
;

610 
size_t
 
sz
 = (
ssize_t
);

612 
	`as£π_d_eq
(
	`mÆl˘l
("arenas.dirty_decay_ms",

613 (*)&
‹ig_dúty_deˇy_ms
, &
sz
, 
NULL
, 0), 0,

616 
dúty_deˇy_ms
 = -2;

617 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.dúty_deˇy_ms", 
NULL
, NULL,

618 (*)&
dúty_deˇy_ms
, (
ssize_t
)), 
EFAULT
,

621 
dúty_deˇy_ms
 = 0x7fffffff;

622 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.dúty_deˇy_ms", 
NULL
, NULL,

623 (*)&
dúty_deˇy_ms
, (
ssize_t
)), 0,

626 
¥ev_dúty_deˇy_ms
 = 
dúty_deˇy_ms
, dirty_decay_ms = -1;

627 
dúty_deˇy_ms
 < 20; 
¥ev_dúty_deˇy_ms
 = dirty_decay_ms,

628 
dúty_deˇy_ms
++) {

629 
ssize_t
 
ﬁd_dúty_deˇy_ms
;

631 
	`as£π_d_eq
(
	`mÆl˘l
("arenas.dirty_decay_ms",

632 (*)&
ﬁd_dúty_deˇy_ms
, &
sz
, (*)&
dúty_deˇy_ms
,

633 (
ssize_t
)), 0, "Unexpected mallctl() failure");

634 
	`as£π_zd_eq
(
ﬁd_dúty_deˇy_ms
, 
¥ev_dúty_deˇy_ms
,

637 
	}
}

638 
TEST_END


640 
	$TEST_BEGIN
(
ã°_¨ías_muzzy_deˇy_ms
) {

641 
ssize_t
 
muzzy_deˇy_ms
, 
‹ig_muzzy_deˇy_ms
, 
¥ev_muzzy_deˇy_ms
;

642 
size_t
 
sz
 = (
ssize_t
);

644 
	`as£π_d_eq
(
	`mÆl˘l
("arenas.muzzy_decay_ms",

645 (*)&
‹ig_muzzy_deˇy_ms
, &
sz
, 
NULL
, 0), 0,

648 
muzzy_deˇy_ms
 = -2;

649 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.muzzy_deˇy_ms", 
NULL
, NULL,

650 (*)&
muzzy_deˇy_ms
, (
ssize_t
)), 
EFAULT
,

653 
muzzy_deˇy_ms
 = 0x7fffffff;

654 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.muzzy_deˇy_ms", 
NULL
, NULL,

655 (*)&
muzzy_deˇy_ms
, (
ssize_t
)), 0,

658 
¥ev_muzzy_deˇy_ms
 = 
muzzy_deˇy_ms
, muzzy_decay_ms = -1;

659 
muzzy_deˇy_ms
 < 20; 
¥ev_muzzy_deˇy_ms
 = muzzy_decay_ms,

660 
muzzy_deˇy_ms
++) {

661 
ssize_t
 
ﬁd_muzzy_deˇy_ms
;

663 
	`as£π_d_eq
(
	`mÆl˘l
("arenas.muzzy_decay_ms",

664 (*)&
ﬁd_muzzy_deˇy_ms
, &
sz
, (*)&
muzzy_deˇy_ms
,

665 (
ssize_t
)), 0, "Unexpected mallctl() failure");

666 
	`as£π_zd_eq
(
ﬁd_muzzy_deˇy_ms
, 
¥ev_muzzy_deˇy_ms
,

669 
	}
}

670 
TEST_END


672 
	$TEST_BEGIN
(
ã°_¨ías_c⁄°™ts
) {

673 
	#TEST_ARENAS_CONSTANT
(
t
, 
«me
, 
ex≥˘ed
) do { \

674 
t
 
«me
; \

675 
size_t
 
sz
 = (
t
); \

676 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías."#«me, (*)&
«me
, &
sz
, 
NULL
, \

678 
	`as£π_zu_eq
(
«me
, 
ex≥˘ed
, "Incorrect "#name" size"); \

679 } 0)

	)

681 
	`TEST_ARENAS_CONSTANT
(
size_t
, 
qu™tum
, 
QUANTUM
);

682 
	`TEST_ARENAS_CONSTANT
(
size_t
, 
∑ge
, 
PAGE
);

683 
	`TEST_ARENAS_CONSTANT
(, 
nbös
, 
NBINS
);

684 
	`TEST_ARENAS_CONSTANT
(, 
∆exã¡s
, 
NSIZES
 - 
NBINS
);

686 #unde‡
TEST_ARENAS_CONSTANT


687 
	}
}

688 
TEST_END


690 
	$TEST_BEGIN
(
ã°_¨ías_bö_c⁄°™ts
) {

691 
	#TEST_ARENAS_BIN_CONSTANT
(
t
, 
«me
, 
ex≥˘ed
) do { \

692 
t
 
«me
; \

693 
size_t
 
sz
 = (
t
); \

694 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.bö.0."#«me, (*)&
«me
, &
sz
, \

695 
NULL
, 0), 0, "Unexpected mallctl() failure"); \

696 
	`as£π_zu_eq
(
«me
, 
ex≥˘ed
, "Incorrect "#name" size"); \

697 } 0)

	)

699 
	`TEST_ARENAS_BIN_CONSTANT
(
size_t
, 
size
, 
bö_öfos
[0].
ªg_size
);

700 
	`TEST_ARENAS_BIN_CONSTANT
(
uöt32_t
, 
ƒegs
, 
bö_öfos
[0].nregs);

701 
	`TEST_ARENAS_BIN_CONSTANT
(
size_t
, 
¶ab_size
,

702 
bö_öfos
[0].
¶ab_size
);

704 #unde‡
TEST_ARENAS_BIN_CONSTANT


705 
	}
}

706 
TEST_END


708 
	$TEST_BEGIN
(
ã°_¨ías_Àxã¡_c⁄°™ts
) {

709 
	#TEST_ARENAS_LEXTENT_CONSTANT
(
t
, 
«me
, 
ex≥˘ed
) do { \

710 
t
 
«me
; \

711 
size_t
 
sz
 = (
t
); \

712 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.Àxã¡.0."#«me, (*)&
«me
, \

713 &
sz
, 
NULL
, 0), 0, "Unexpected mallctl() failure"); \

714 
	`as£π_zu_eq
(
«me
, 
ex≥˘ed
, "Incorrect "#name" size"); \

715 } 0)

	)

717 
	`TEST_ARENAS_LEXTENT_CONSTANT
(
size_t
, 
size
, 
LARGE_MINCLASS
);

719 #unde‡
TEST_ARENAS_LEXTENT_CONSTANT


720 
	}
}

721 
TEST_END


723 
	$TEST_BEGIN
(
ã°_¨ías_¸óã
) {

724 
«ª«s_bef‹e
, 
¨ía
, 
«ª«s_a·î
;

725 
size_t
 
sz
 = ();

727 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.«ª«s", (*)&
«ª«s_bef‹e
, &
sz
,

728 
NULL
, 0), 0, "Unexpected mallctl() failure");

729 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.¸óã", (*)&
¨ía
, &
sz
, 
NULL
, 0), 0,

731 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.«ª«s", (*)&
«ª«s_a·î
, &
sz
, 
NULL
,

734 
	`as£π_u_eq
(
«ª«s_bef‹e
+1, 
«ª«s_a·î
,

736 
	`as£π_u_eq
(
¨ía
, 
«ª«s_a·î
-1, "Unexpectedárena index");

737 
	}
}

738 
TEST_END


740 
	$TEST_BEGIN
(
ã°_°©s_¨ías
) {

741 
	#TEST_STATS_ARENAS
(
t
, 
«me
) do { \

742 
t
 
«me
; \

743 
size_t
 
sz
 = (
t
); \

744 
	`as£π_d_eq
(
	`mÆl˘l
("°©s.¨ías.0."#«me, (*)&
«me
, &
sz
, \

745 
NULL
, 0), 0, "Unexpected mallctl() failure"); \

746 } 0)

	)

748 
	`TEST_STATS_ARENAS
(, 
¡hªads
);

749 
	`TEST_STATS_ARENAS
(c⁄° *, 
dss
);

750 
	`TEST_STATS_ARENAS
(
ssize_t
, 
dúty_deˇy_ms
);

751 
	`TEST_STATS_ARENAS
(
ssize_t
, 
muzzy_deˇy_ms
);

752 
	`TEST_STATS_ARENAS
(
size_t
, 
∑˘ive
);

753 
	`TEST_STATS_ARENAS
(
size_t
, 
pdúty
);

755 #unde‡
TEST_STATS_ARENAS


756 
	}
}

757 
TEST_END


760 
	$maö
() {

761  
	`ã°
(

762 
ã°_mÆl˘l_îr‹s
,

763 
ã°_mÆl˘ amëomib_îr‹s
,

764 
ã°_mÆl˘lbymib_îr‹s
,

765 
ã°_mÆl˘l_ªad_wrôe
,

766 
ã°_mÆl˘ amëomib_sh‹t_mib
,

767 
ã°_mÆl˘l_c⁄fig
,

768 
ã°_mÆl˘l_›t
,

769 
ã°_m™∑ge_exam∂e
,

770 
ã°_tˇche_n⁄e
,

771 
ã°_tˇche
,

772 
ã°_thªad_¨ía
,

773 
ã°_¨ía_i_öôülized
,

774 
ã°_¨ía_i_dúty_deˇy_ms
,

775 
ã°_¨ía_i_muzzy_deˇy_ms
,

776 
ã°_¨ía_i_purge
,

777 
ã°_¨ía_i_deˇy
,

778 
ã°_¨ía_i_dss
,

779 
ã°_¨ía_i_ªèö_grow_limô
,

780 
ã°_¨ías_dúty_deˇy_ms
,

781 
ã°_¨ías_muzzy_deˇy_ms
,

782 
ã°_¨ías_c⁄°™ts
,

783 
ã°_¨ías_bö_c⁄°™ts
,

784 
ã°_¨ías_Àxã¡_c⁄°™ts
,

785 
ã°_¨ías_¸óã
,

786 
ã°_°©s_¨ías
);

787 
	}
}

	@test/unit/malloc_io.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	$TEST_BEGIN
(
ã°_mÆloc_°πoumax_no_íd±r
) {

4 
îr
;

6 
	`£t_î∫o
(0);

7 
	`as£π_ju_eq
(
	`mÆloc_°πoumax
("0", 
NULL
, 0), 0, "UnexpectedÑesult");

8 
îr
 = 
	`gë_î∫o
();

9 
	`as£π_d_eq
(
îr
, 0, "Unexpected failure");

10 
	}
}

11 
TEST_END


13 
	$TEST_BEGIN
(
ã°_mÆloc_°πoumax
) {

14 
	sã°_s
 {

15 c⁄° *
öput
;

16 c⁄° *
ex≥˘ed_ªmaödî
;

17 
ba£
;

18 
ex≥˘ed_î∫o
;

19 c⁄° *
ex≥˘ed_î∫o_«me
;

20 
uötmax_t
 
ex≥˘ed_x
;

22 
	#ERR
(
e
Ëe, #e

	)

23 
	#KUMAX
(
x
Ë((
uötmax_t
)x##
ULL
)

	)

24 
	#KSMAX
(
x
Ë((
uötmax_t
)(
ötmax_t
)x##
LL
)

	)

25 
ã°_s
 
ã°s
[] = {

26 {"0", "0", -1, 
	`ERR
(
EINVAL
), 
UINTMAX_MAX
},

27 {"0", "0", 1, 
	`ERR
(
EINVAL
), 
UINTMAX_MAX
},

28 {"0", "0", 37, 
	`ERR
(
EINVAL
), 
UINTMAX_MAX
},

30 {"", "", 0, 
	`ERR
(
EINVAL
), 
UINTMAX_MAX
},

31 {"+", "+", 0, 
	`ERR
(
EINVAL
), 
UINTMAX_MAX
},

32 {"++3", "++3", 0, 
	`ERR
(
EINVAL
), 
UINTMAX_MAX
},

33 {"-", "-", 0, 
	`ERR
(
EINVAL
), 
UINTMAX_MAX
},

35 {"42", "", 0, 
	`ERR
(0), 
	`KUMAX
(42)},

36 {"+42", "", 0, 
	`ERR
(0), 
	`KUMAX
(42)},

37 {"-42", "", 0, 
	`ERR
(0), 
	`KSMAX
(-42)},

38 {"042", "", 0, 
	`ERR
(0), 
	`KUMAX
(042)},

39 {"+042", "", 0, 
	`ERR
(0), 
	`KUMAX
(042)},

40 {"-042", "", 0, 
	`ERR
(0), 
	`KSMAX
(-042)},

41 {"0x42", "", 0, 
	`ERR
(0), 
	`KUMAX
(0x42)},

42 {"+0x42", "", 0, 
	`ERR
(0), 
	`KUMAX
(0x42)},

43 {"-0x42", "", 0, 
	`ERR
(0), 
	`KSMAX
(-0x42)},

45 {"0", "", 0, 
	`ERR
(0), 
	`KUMAX
(0)},

46 {"1", "", 0, 
	`ERR
(0), 
	`KUMAX
(1)},

48 {"42", "", 0, 
	`ERR
(0), 
	`KUMAX
(42)},

49 {" 42", "", 0, 
	`ERR
(0), 
	`KUMAX
(42)},

50 {"42 ", " ", 0, 
	`ERR
(0), 
	`KUMAX
(42)},

51 {"0x", "x", 0, 
	`ERR
(0), 
	`KUMAX
(0)},

52 {"42x", "x", 0, 
	`ERR
(0), 
	`KUMAX
(42)},

54 {"07", "", 0, 
	`ERR
(0), 
	`KUMAX
(7)},

55 {"010", "", 0, 
	`ERR
(0), 
	`KUMAX
(8)},

56 {"08", "8", 0, 
	`ERR
(0), 
	`KUMAX
(0)},

57 {"0_", "_", 0, 
	`ERR
(0), 
	`KUMAX
(0)},

59 {"0x", "x", 0, 
	`ERR
(0), 
	`KUMAX
(0)},

60 {"0X", "X", 0, 
	`ERR
(0), 
	`KUMAX
(0)},

61 {"0xg", "xg", 0, 
	`ERR
(0), 
	`KUMAX
(0)},

62 {"0XA", "", 0, 
	`ERR
(0), 
	`KUMAX
(10)},

64 {"010", "", 10, 
	`ERR
(0), 
	`KUMAX
(10)},

65 {"0x3", "x3", 10, 
	`ERR
(0), 
	`KUMAX
(0)},

67 {"12", "2", 2, 
	`ERR
(0), 
	`KUMAX
(1)},

68 {"78", "8", 8, 
	`ERR
(0), 
	`KUMAX
(7)},

69 {"9a", "a", 10, 
	`ERR
(0), 
	`KUMAX
(9)},

70 {"9A", "A", 10, 
	`ERR
(0), 
	`KUMAX
(9)},

71 {"fg", "g", 16, 
	`ERR
(0), 
	`KUMAX
(15)},

72 {"FG", "G", 16, 
	`ERR
(0), 
	`KUMAX
(15)},

73 {"0xfg", "g", 16, 
	`ERR
(0), 
	`KUMAX
(15)},

74 {"0XFG", "G", 16, 
	`ERR
(0), 
	`KUMAX
(15)},

75 {"z_", "_", 36, 
	`ERR
(0), 
	`KUMAX
(35)},

76 {"Z_", "_", 36, 
	`ERR
(0), 
	`KUMAX
(35)}

78 #unde‡
ERR


79 #unde‡
KUMAX


80 #unde‡
KSMAX


81 
i
;

83 
i
 = 0; i < (
ã°s
)/(
ã°_s
); i++) {

84 
ã°_s
 *
ã°
 = &
ã°s
[
i
];

85 
îr
;

86 
uötmax_t
 
ªsu…
;

87 *
ªmaödî
;

89 
	`£t_î∫o
(0);

90 
ªsu…
 = 
	`mÆloc_°πoumax
(
ã°
->
öput
, &
ªmaödî
,Åe°->
ba£
);

91 
îr
 = 
	`gë_î∫o
();

92 
	`as£π_d_eq
(
îr
, 
ã°
->
ex≥˘ed_î∫o
,

94 
ã°
->
ex≥˘ed_î∫o_«me
,Åe°->
öput
,Åe°->
ba£
);

95 
	`as£π_°r_eq
(
ªmaödî
, 
ã°
->
ex≥˘ed_ªmaödî
,

97 
ã°
->
öput
,Åe°->
ba£
);

98 i‡(
îr
 == 0) {

99 
	`as£π_ju_eq
(
ªsu…
, 
ã°
->
ex≥˘ed_x
,

101 
ã°
->
öput
,Åe°->
ba£
);

104 
	}
}

105 
TEST_END


107 
	$TEST_BEGIN
(
ã°_mÆloc_¢¥ötf_åunˇãd
) {

108 
	#BUFLEN
 15

	)

109 
buf
[
BUFLEN
];

110 
size_t
 
ªsu…
;

111 
size_t
 
Àn
;

112 
	#TEST
(
ex≥˘ed_°r_u¡runˇãd
, ...) do { \

113 
ªsu…
 = 
	`mÆloc_¢¥ötf
(
buf
, 
Àn
, 
__VA_ARGS__
); \

114 
	`as£π_d_eq
(
	`°∫cmp
(
buf
, 
ex≥˘ed_°r_u¡runˇãd
, 
Àn
-1), 0, \

116 
buf
, 
ex≥˘ed_°r_u¡runˇãd
); \

117 
	`as£π_zu_eq
(
ªsu…
, 
	`°æí
(
ex≥˘ed_°r_u¡runˇãd
), \

119 } 0)

	)

121 
Àn
 = 1;Üí < 
BUFLEN
;Üen++) {

122 
	`TEST
("012346789", "012346789");

123 
	`TEST
("a0123b", "a%sb", "0123");

124 
	`TEST
("a01234567", "a%s%s", "0123", "4567");

125 
	`TEST
("a0123 ", "a%-6s", "0123");

126 
	`TEST
("a 0123", "a%6s", "0123");

127 
	`TEST
("a 012", "a%6.3s", "0123");

128 
	`TEST
("a 012", "a%*.*s", 6, 3, "0123");

129 
	`TEST
("a 123b", "a% db", 123);

130 
	`TEST
("a123b", "a%-db", 123);

131 
	`TEST
("a-123b", "a%-db", -123);

132 
	`TEST
("a+123b", "a%+db", 123);

134 #unde‡
BUFLEN


135 #unde‡
TEST


136 
	}
}

137 
TEST_END


139 
	$TEST_BEGIN
(
ã°_mÆloc_¢¥ötf
) {

140 
	#BUFLEN
 128

	)

141 
buf
[
BUFLEN
];

142 
size_t
 
ªsu…
;

143 
	#TEST
(
ex≥˘ed_°r
, ...) do { \

144 
ªsu…
 = 
	`mÆloc_¢¥ötf
(
buf
, (buf), 
__VA_ARGS__
); \

145 
	`as£π_°r_eq
(
buf
, 
ex≥˘ed_°r
, "Unexpected output"); \

146 
	`as£π_zu_eq
(
ªsu…
, 
	`°æí
(
ex≥˘ed_°r
), "UnexpectedÑesult");\

147 } 0)

	)

149 
	`TEST
("hello", "hello");

151 
	`TEST
("50%, 100%", "50%%, %d%%", 100);

153 
	`TEST
("a0123b", "a%sb", "0123");

155 
	`TEST
("a 0123b", "a%5sb", "0123");

156 
	`TEST
("a 0123b", "a%*sb", 5, "0123");

158 
	`TEST
("a0123 b", "a%-5sb", "0123");

159 
	`TEST
("a0123b", "a%*sb", -1, "0123");

160 
	`TEST
("a0123 b", "a%*sb", -5, "0123");

161 
	`TEST
("a0123 b", "a%-*sb", -5, "0123");

163 
	`TEST
("a012b", "a%.3sb", "0123");

164 
	`TEST
("a012b", "a%.*sb", 3, "0123");

165 
	`TEST
("a0123b", "a%.*sb", -3, "0123");

167 
	`TEST
("a 012b", "a%5.3sb", "0123");

168 
	`TEST
("a 012b", "a%5.*sb", 3, "0123");

169 
	`TEST
("a 012b", "a%*.3sb", 5, "0123");

170 
	`TEST
("a 012b", "a%*.*sb", 5, 3, "0123");

171 
	`TEST
("a 0123b", "a%*.*sb", 5, -3, "0123");

173 
	`TEST
("_abcd_", "_%x_", 0xabcd);

174 
	`TEST
("_0xabcd_", "_%#x_", 0xabcd);

175 
	`TEST
("_1234_", "_%o_", 01234);

176 
	`TEST
("_01234_", "_%#o_", 01234);

177 
	`TEST
("_1234_", "_%u_", 1234);

179 
	`TEST
("_1234_", "_%d_", 1234);

180 
	`TEST
("_ 1234_", "_% d_", 1234);

181 
	`TEST
("_+1234_", "_%+d_", 1234);

182 
	`TEST
("_-1234_", "_%d_", -1234);

183 
	`TEST
("_-1234_", "_% d_", -1234);

184 
	`TEST
("_-1234_", "_%+d_", -1234);

186 
	`TEST
("_-1234_", "_%d_", -1234);

187 
	`TEST
("_1234_", "_%d_", 1234);

188 
	`TEST
("_-1234_", "_%i_", -1234);

189 
	`TEST
("_1234_", "_%i_", 1234);

190 
	`TEST
("_01234_", "_%#o_", 01234);

191 
	`TEST
("_1234_", "_%u_", 1234);

192 
	`TEST
("_0x1234abc_", "_%#x_", 0x1234abc);

193 
	`TEST
("_0X1234ABC_", "_%#X_", 0x1234abc);

194 
	`TEST
("_c_", "_%c_", 'c');

195 
	`TEST
("_string_", "_%s_", "string");

196 
	`TEST
("_0x42_", "_%p_", ((*)0x42));

198 
	`TEST
("_-1234_", "_%ld_", (()-1234));

199 
	`TEST
("_1234_", "_%ld_", (()1234));

200 
	`TEST
("_-1234_", "_%li_", (()-1234));

201 
	`TEST
("_1234_", "_%li_", (()1234));

202 
	`TEST
("_01234_", "_%#lo_", (()01234));

203 
	`TEST
("_1234_", "_%lu_", (()1234));

204 
	`TEST
("_0x1234abc_", "_%#lx_", (()0x1234abc));

205 
	`TEST
("_0X1234ABC_", "_%#lX_", (()0x1234ABC));

207 
	`TEST
("_-1234_", "_%lld_", (()-1234));

208 
	`TEST
("_1234_", "_%lld_", (()1234));

209 
	`TEST
("_-1234_", "_%lli_", (()-1234));

210 
	`TEST
("_1234_", "_%lli_", (()1234));

211 
	`TEST
("_01234_", "_%#llo_", (()01234));

212 
	`TEST
("_1234_", "_%llu_", (()1234));

213 
	`TEST
("_0x1234abc_", "_%#llx_", (()0x1234abc));

214 
	`TEST
("_0X1234ABC_", "_%#llX_", (()0x1234ABC));

216 
	`TEST
("_-1234_", "_%qd_", (()-1234));

217 
	`TEST
("_1234_", "_%qd_", (()1234));

218 
	`TEST
("_-1234_", "_%qi_", (()-1234));

219 
	`TEST
("_1234_", "_%qi_", (()1234));

220 
	`TEST
("_01234_", "_%#qo_", (()01234));

221 
	`TEST
("_1234_", "_%qu_", (()1234));

222 
	`TEST
("_0x1234abc_", "_%#qx_", (()0x1234abc));

223 
	`TEST
("_0X1234ABC_", "_%#qX_", (()0x1234ABC));

225 
	`TEST
("_-1234_", "_%jd_", ((
ötmax_t
)-1234));

226 
	`TEST
("_1234_", "_%jd_", ((
ötmax_t
)1234));

227 
	`TEST
("_-1234_", "_%ji_", ((
ötmax_t
)-1234));

228 
	`TEST
("_1234_", "_%ji_", ((
ötmax_t
)1234));

229 
	`TEST
("_01234_", "_%#jo_", ((
ötmax_t
)01234));

230 
	`TEST
("_1234_", "_%ju_", ((
ötmax_t
)1234));

231 
	`TEST
("_0x1234abc_", "_%#jx_", ((
ötmax_t
)0x1234abc));

232 
	`TEST
("_0X1234ABC_", "_%#jX_", ((
ötmax_t
)0x1234ABC));

234 
	`TEST
("_1234_", "_%td_", ((
±rdiff_t
)1234));

235 
	`TEST
("_-1234_", "_%td_", ((
±rdiff_t
)-1234));

236 
	`TEST
("_1234_", "_%ti_", ((
±rdiff_t
)1234));

237 
	`TEST
("_-1234_", "_%ti_", ((
±rdiff_t
)-1234));

239 
	`TEST
("_-1234_", "_%zd_", ((
ssize_t
)-1234));

240 
	`TEST
("_1234_", "_%zd_", ((
ssize_t
)1234));

241 
	`TEST
("_-1234_", "_%zi_", ((
ssize_t
)-1234));

242 
	`TEST
("_1234_", "_%zi_", ((
ssize_t
)1234));

243 
	`TEST
("_01234_", "_%#zo_", ((
ssize_t
)01234));

244 
	`TEST
("_1234_", "_%zu_", ((
ssize_t
)1234));

245 
	`TEST
("_0x1234abc_", "_%#zx_", ((
ssize_t
)0x1234abc));

246 
	`TEST
("_0X1234ABC_", "_%#zX_", ((
ssize_t
)0x1234ABC));

247 #unde‡
BUFLEN


248 
	}
}

249 
TEST_END


252 
	$maö
() {

253  
	`ã°
(

254 
ã°_mÆloc_°πoumax_no_íd±r
,

255 
ã°_mÆloc_°πoumax
,

256 
ã°_mÆloc_¢¥ötf_åunˇãd
,

257 
ã°_mÆloc_¢¥ötf
);

258 
	}
}

	@test/unit/math.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	#MAX_REL_ERR
 1.0e-9

	)

4 
	#MAX_ABS_ERR
 1.0e-9

	)

6 
	~<Êﬂt.h
>

8 #ifde‡
__PGI


9 #unde‡
INFINITY


12 #i‚de‡
INFINITY


13 
	#INFINITY
 (
DBL_MAX
 + DBL_MAX)

	)

16 
boﬁ


17 
	$doubÀ_eq_ªl
(
a
, 
b
, 
max_ªl_îr
, 
max_abs_îr
) {

18 
ªl_îr
;

20 i‡(
	`Ábs
(
a
 - 
b
Ë< 
max_abs_îr
) {

21  
åue
;

23 
ªl_îr
 = (
	`Ábs
(
b
Ë> fabs(
a
)) ? fabs((a-b)/b) : fabs((a-b)/a);

24  (
ªl_îr
 < 
max_ªl_îr
);

25 
	}
}

27 
uöt64_t


28 
	$Á˘‹ül
(
x
) {

29 
uöt64_t
 
ªt
 = 1;

30 
i
;

32 
i
 = 2; i <
x
; i++) {

33 
ªt
 *(
uöt64_t
)
i
;

36  
ªt
;

37 
	}
}

39 
	$TEST_BEGIN
(
ã°_ _gamma_Á˘‹ül
) {

40 
x
;

43 
x
 = 1; x <= 21; x++) {

44 
	`as£π_åue
(
	`doubÀ_eq_ªl
(
	`exp
(
	` _gamma
(
x
)),

45 ()
	`Á˘‹ül
(
x
-1), 
MAX_REL_ERR
, 
MAX_ABS_ERR
),

46 "Inc‹ª˘ fa˘‹ü»ªsu… f‹ x=%u", 
x
);

48 
	}
}

49 
TEST_END


52 c⁄° 
	g _gamma_misc_ex≥˘ed
[] = {

53 
INFINITY
,

190 
	$TEST_BEGIN
(
ã°_ _gamma_misc
) {

191 
i
;

193 
i
 = 1; i < (
 _gamma_misc_ex≥˘ed
)/(); i++) {

194 
x
 = ()
i
 * 0.25;

195 
	`as£π_åue
(
	`doubÀ_eq_ªl
(
	` _gamma
(
x
),

196 
 _gamma_misc_ex≥˘ed
[
i
], 
MAX_REL_ERR
, 
MAX_ABS_ERR
),

197 "Inc‹ª˘Ün_gamm®ªsu… f‹ i=%u", 
i
);

199 
	}
}

200 
TEST_END


203 c⁄° 
	g±_n‹m_ex≥˘ed
[] = {

204 -
INFINITY
,

240 
	$TEST_BEGIN
(
ã°_±_n‹m
) {

241 
i
;

243 
i
 = 1; i < (
±_n‹m_ex≥˘ed
)/(); i++) {

244 
p
 = ()
i
 * 0.01;

245 
	`as£π_åue
(
	`doubÀ_eq_ªl
(
	`±_n‹m
(
p
), 
±_n‹m_ex≥˘ed
[
i
],

246 
MAX_REL_ERR
, 
MAX_ABS_ERR
),

247 "Inc‹ª˘Öt_n‹mÑesu… f‹ i=%u", 
i
);

249 
	}
}

250 
TEST_END


256 c⁄° 
	g±_chi2_df
[] = {0.1, 1.1, 10.1, 100.1, 1000.1};

257 c⁄° 
	g±_chi2_ex≥˘ed
[] = {

289 
	$TEST_BEGIN
(
ã°_±_chi2
) {

290 
i
, 
j
;

291 
e
 = 0;

293 
i
 = 0; i < (
±_chi2_df
)/(); i++) {

294 
df
 = 
±_chi2_df
[
i
];

295 
 _gamma_df
 = 
	` _gamma
(
df
 * 0.5);

296 
j
 = 1; j < 100; j += 7) {

297 
p
 = ()
j
 * 0.01;

298 
	`as£π_åue
(
	`doubÀ_eq_ªl
(
	`±_chi2
(
p
, 
df
, 
 _gamma_df
),

299 
±_chi2_ex≥˘ed
[
e
], 
MAX_REL_ERR
, 
MAX_ABS_ERR
),

300 "Inc‹ª˘Öt_chi2Ñesu… f‹ i=%u, j=%u", 
i
, 
j
);

301 
e
++;

304 
	}
}

305 
TEST_END


311 c⁄° 
	g±_gamma_sh≠e
[] = {0.5, 1.0, 1.5, 2.0, 2.5, 3.0};

312 c⁄° 
	g±_gamma_ex≥˘ed
[] = {

350 
	$TEST_BEGIN
(
ã°_±_gamma_sh≠e
) {

351 
i
, 
j
;

352 
e
 = 0;

354 
i
 = 0; i < (
±_gamma_sh≠e
)/(); i++) {

355 
sh≠e
 = 
±_gamma_sh≠e
[
i
];

356 
 _gamma_sh≠e
 = 
	` _gamma
(
sh≠e
);

357 
j
 = 1; j < 100; j += 7) {

358 
p
 = ()
j
 * 0.01;

359 
	`as£π_åue
(
	`doubÀ_eq_ªl
(
	`±_gamma
(
p
, 
sh≠e
, 1.0,

360 
 _gamma_sh≠e
), 
±_gamma_ex≥˘ed
[
e
], 
MAX_REL_ERR
,

361 
MAX_ABS_ERR
),

362 "Inc‹ª˘Öt_gamm®ªsu… f‹ i=%u, j=%u", 
i
, 
j
);

363 
e
++;

366 
	}
}

367 
TEST_END


369 
	$TEST_BEGIN
(
ã°_±_gamma_sˇÀ
) {

370 
sh≠e
 = 1.0;

371 
 _gamma_sh≠e
 = 
	` _gamma
(
sh≠e
);

373 
	`as£π_åue
(
	`doubÀ_eq_ªl
(

374 
	`±_gamma
(0.5, 
sh≠e
, 1.0, 
 _gamma_sh≠e
) * 10.0,

375 
	`±_gamma
(0.5, 
sh≠e
, 10.0, 
 _gamma_sh≠e
), 
MAX_REL_ERR
,

376 
MAX_ABS_ERR
),

378 
	}
}

379 
TEST_END


382 
	$maö
() {

383  
	`ã°
(

384 
ã°_ _gamma_Á˘‹ül
,

385 
ã°_ _gamma_misc
,

386 
ã°_±_n‹m
,

387 
ã°_±_chi2
,

388 
ã°_±_gamma_sh≠e
,

389 
ã°_±_gamma_sˇÀ
);

390 
	}
}

	@test/unit/mq.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	#NSENDERS
 3

	)

4 
	#NMSGS
 100000

	)

6 
mq_msg_s
 
	tmq_msg_t
;

7 
	smq_msg_s
 {

8 
mq_msg
(
mq_msg_t
Ë
	mlök
;

10 
	$mq_gí
(, 
mq_
, 
mq_t
, 
mq_msg_t
, 
lök
)

12 
	$TEST_BEGIN
(
ã°_mq_basic
) {

13 
mq_t
 
mq
;

14 
mq_msg_t
 
msg
;

16 
	`as£π_Ál£
(
	`mq_öô
(&
mq
), "Unexpected mq_init() failure");

17 
	`as£π_u_eq
(
	`mq_cou¡
(&
mq
), 0, "mq should beÉmpty");

18 
	`as£π_±r_nuŒ
(
	`mq_åygë
(&
mq
),

21 
	`mq_put
(&
mq
, &
msg
);

22 
	`as£π_u_eq
(
	`mq_cou¡
(&
mq
), 1, "mq should contain one message");

23 
	`as£π_±r_eq
(
	`mq_åygë
(&
mq
), &
msg
, "mq_tryget() shouldÑeturn msg");

25 
	`mq_put
(&
mq
, &
msg
);

26 
	`as£π_±r_eq
(
	`mq_gë
(&
mq
), &
msg
, "mq_get() shouldÑeturn msg");

28 
	`mq_föi
(&
mq
);

29 
	}
}

30 
TEST_END


33 
	$thd_ª˚ivî_°¨t
(*
¨g
) {

34 
mq_t
 *
mq
 = (mq_à*)
¨g
;

35 
i
;

37 
i
 = 0; i < (
NSENDERS
 * 
NMSGS
); i++) {

38 
mq_msg_t
 *
msg
 = 
	`mq_gë
(
mq
);

39 
	`as£π_±r_nŸ_nuŒ
(
msg
, "mq_get() shouldÇeverÑeturn NULL");

40 
	`dÆlocx
(
msg
, 0);

42  
NULL
;

43 
	}
}

46 
	$thd_£ndî_°¨t
(*
¨g
) {

47 
mq_t
 *
mq
 = (mq_à*)
¨g
;

48 
i
;

50 
i
 = 0; i < 
NMSGS
; i++) {

51 
mq_msg_t
 *
msg
;

52 *
p
;

53 
p
 = 
	`mÆlocx
((
mq_msg_t
), 0);

54 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

55 
msg
 = (
mq_msg_t
 *)
p
;

56 
	`mq_put
(
mq
, 
msg
);

58  
NULL
;

59 
	}
}

61 
	$TEST_BEGIN
(
ã°_mq_thªaded
) {

62 
mq_t
 
mq
;

63 
thd_t
 
ª˚ivî
;

64 
thd_t
 
£ndîs
[
NSENDERS
];

65 
i
;

67 
	`as£π_Ál£
(
	`mq_öô
(&
mq
), "Unexpected mq_init() failure");

69 
	`thd_¸óã
(&
ª˚ivî
, 
thd_ª˚ivî_°¨t
, (*)&
mq
);

70 
i
 = 0; i < 
NSENDERS
; i++) {

71 
	`thd_¸óã
(&
£ndîs
[
i
], 
thd_£ndî_°¨t
, (*)&
mq
);

74 
	`thd_joö
(
ª˚ivî
, 
NULL
);

75 
i
 = 0; i < 
NSENDERS
; i++) {

76 
	`thd_joö
(
£ndîs
[
i
], 
NULL
);

79 
	`mq_föi
(&
mq
);

80 
	}
}

81 
TEST_END


84 
	$maö
() {

85  
	`ã°
(

86 
ã°_mq_basic
,

87 
ã°_mq_thªaded
);

88 
	}
}

	@test/unit/mtx.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	#NTHREADS
 2

	)

4 
	#NINCRS
 2000000

	)

6 
	$TEST_BEGIN
(
ã°_mtx_basic
) {

7 
mtx_t
 
mtx
;

9 
	`as£π_Ál£
(
	`mtx_öô
(&
mtx
), "Unexpected mtx_init() failure");

10 
	`mtx_lock
(&
mtx
);

11 
	`mtx_u∆ock
(&
mtx
);

12 
	`mtx_föi
(&
mtx
);

13 
	}
}

14 
TEST_END


17 
mtx_t
 
	mmtx
;

18 
	mx
;

19 } 
	tthd_°¨t_¨g_t
;

22 
	$thd_°¨t
(*
v¨g
) {

23 
thd_°¨t_¨g_t
 *
¨g
 = (thd_°¨t_¨g_à*)
v¨g
;

24 
i
;

26 
i
 = 0; i < 
NINCRS
; i++) {

27 
	`mtx_lock
(&
¨g
->
mtx
);

28 
¨g
->
x
++;

29 
	`mtx_u∆ock
(&
¨g
->
mtx
);

31  
NULL
;

32 
	}
}

34 
	$TEST_BEGIN
(
ã°_mtx_ø˚
) {

35 
thd_°¨t_¨g_t
 
¨g
;

36 
thd_t
 
thds
[
NTHREADS
];

37 
i
;

39 
	`as£π_Ál£
(
	`mtx_öô
(&
¨g
.
mtx
), "Unexpected mtx_init() failure");

40 
¨g
.
x
 = 0;

41 
i
 = 0; i < 
NTHREADS
; i++) {

42 
	`thd_¸óã
(&
thds
[
i
], 
thd_°¨t
, (*)&
¨g
);

44 
i
 = 0; i < 
NTHREADS
; i++) {

45 
	`thd_joö
(
thds
[
i
], 
NULL
);

47 
	`as£π_u_eq
(
¨g
.
x
, 
NTHREADS
 * 
NINCRS
,

49 
	}
}

50 
TEST_END


53 
	$maö
() {

54  
	`ã°
(

55 
ã°_mtx_basic
,

56 
ã°_mtx_ø˚
);

57 
	}
}

	@test/unit/nstime.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	#BILLION
 
	`UINT64_C
(1000000000)

	)

5 
	$TEST_BEGIN
(
ã°_n°ime_öô
) {

6 
n°ime_t
 
n°
;

8 
	`n°ime_öô
(&
n°
, 42000000043);

9 
	`as£π_u64_eq
(
	`n°ime_ns
(&
n°
), 42000000043, "ns incorrectlyÑead");

10 
	`as£π_u64_eq
(
	`n°ime_£c
(&
n°
), 42, "sec incorrectlyÑead");

11 
	`as£π_u64_eq
(
	`n°ime_n£c
(&
n°
), 43, "nsec incorrectlyÑead");

12 
	}
}

13 
TEST_END


15 
	$TEST_BEGIN
(
ã°_n°ime_öô2
) {

16 
n°ime_t
 
n°
;

18 
	`n°ime_öô2
(&
n°
, 42, 43);

19 
	`as£π_u64_eq
(
	`n°ime_£c
(&
n°
), 42, "sec incorrectlyÑead");

20 
	`as£π_u64_eq
(
	`n°ime_n£c
(&
n°
), 43, "nsec incorrectlyÑead");

21 
	}
}

22 
TEST_END


24 
	$TEST_BEGIN
(
ã°_n°ime_c›y
) {

25 
n°ime_t
 
n°a
, 
n°b
;

27 
	`n°ime_öô2
(&
n°a
, 42, 43);

28 
	`n°ime_öô
(&
n°b
, 0);

29 
	`n°ime_c›y
(&
n°b
, &
n°a
);

30 
	`as£π_u64_eq
(
	`n°ime_£c
(&
n°b
), 42, "sec incorrectly copied");

31 
	`as£π_u64_eq
(
	`n°ime_n£c
(&
n°b
), 43, "nsec incorrectly copied");

32 
	}
}

33 
TEST_END


35 
	$TEST_BEGIN
(
ã°_n°ime_com∑ª
) {

36 
n°ime_t
 
n°a
, 
n°b
;

38 
	`n°ime_öô2
(&
n°a
, 42, 43);

39 
	`n°ime_c›y
(&
n°b
, &
n°a
);

40 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 0, "Times should beÉqual");

41 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°b
, &
n°a
), 0, "Times should beÉqual");

43 
	`n°ime_öô2
(&
n°b
, 42, 42);

44 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 1,

46 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°b
, &
n°a
), -1,

49 
	`n°ime_öô2
(&
n°b
, 42, 44);

50 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), -1,

52 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°b
, &
n°a
), 1,

55 
	`n°ime_öô2
(&
n°b
, 41, 
BILLION
 - 1);

56 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 1,

58 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°b
, &
n°a
), -1,

61 
	`n°ime_öô2
(&
n°b
, 43, 0);

62 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), -1,

64 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°b
, &
n°a
), 1,

66 
	}
}

67 
TEST_END


69 
	$TEST_BEGIN
(
ã°_n°ime_add
) {

70 
n°ime_t
 
n°a
, 
n°b
;

72 
	`n°ime_öô2
(&
n°a
, 42, 43);

73 
	`n°ime_c›y
(&
n°b
, &
n°a
);

74 
	`n°ime_add
(&
n°a
, &
n°b
);

75 
	`n°ime_öô2
(&
n°b
, 84, 86);

76 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 0,

79 
	`n°ime_öô2
(&
n°a
, 42, 
BILLION
 - 1);

80 
	`n°ime_c›y
(&
n°b
, &
n°a
);

81 
	`n°ime_add
(&
n°a
, &
n°b
);

82 
	`n°ime_öô2
(&
n°b
, 85, 
BILLION
 - 2);

83 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 0,

85 
	}
}

86 
TEST_END


88 
	$TEST_BEGIN
(
ã°_n°ime_üdd
) {

89 
n°ime_t
 
n°a
, 
n°b
;

91 
	`n°ime_öô2
(&
n°a
, 42, 
BILLION
 - 1);

92 
	`n°ime_üdd
(&
n°a
, 1);

93 
	`n°ime_öô2
(&
n°b
, 43, 0);

94 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 0,

97 
	`n°ime_öô2
(&
n°a
, 42, 1);

98 
	`n°ime_üdd
(&
n°a
, 
BILLION
 + 1);

99 
	`n°ime_öô2
(&
n°b
, 43, 2);

100 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 0,

102 
	}
}

103 
TEST_END


105 
	$TEST_BEGIN
(
ã°_n°ime_subåa˘
) {

106 
n°ime_t
 
n°a
, 
n°b
;

108 
	`n°ime_öô2
(&
n°a
, 42, 43);

109 
	`n°ime_c›y
(&
n°b
, &
n°a
);

110 
	`n°ime_subåa˘
(&
n°a
, &
n°b
);

111 
	`n°ime_öô
(&
n°b
, 0);

112 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 0,

115 
	`n°ime_öô2
(&
n°a
, 42, 43);

116 
	`n°ime_öô2
(&
n°b
, 41, 44);

117 
	`n°ime_subåa˘
(&
n°a
, &
n°b
);

118 
	`n°ime_öô2
(&
n°b
, 0, 
BILLION
 - 1);

119 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 0,

121 
	}
}

122 
TEST_END


124 
	$TEST_BEGIN
(
ã°_n°ime_isubåa˘
) {

125 
n°ime_t
 
n°a
, 
n°b
;

127 
	`n°ime_öô2
(&
n°a
, 42, 43);

128 
	`n°ime_isubåa˘
(&
n°a
, 42*
BILLION
 + 43);

129 
	`n°ime_öô
(&
n°b
, 0);

130 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 0,

133 
	`n°ime_öô2
(&
n°a
, 42, 43);

134 
	`n°ime_isubåa˘
(&
n°a
, 41*
BILLION
 + 44);

135 
	`n°ime_öô2
(&
n°b
, 0, 
BILLION
 - 1);

136 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 0,

138 
	}
}

139 
TEST_END


141 
	$TEST_BEGIN
(
ã°_n°ime_imu…ùly
) {

142 
n°ime_t
 
n°a
, 
n°b
;

144 
	`n°ime_öô2
(&
n°a
, 42, 43);

145 
	`n°ime_imu…ùly
(&
n°a
, 10);

146 
	`n°ime_öô2
(&
n°b
, 420, 430);

147 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 0,

150 
	`n°ime_öô2
(&
n°a
, 42, 666666666);

151 
	`n°ime_imu…ùly
(&
n°a
, 3);

152 
	`n°ime_öô2
(&
n°b
, 127, 999999998);

153 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 0,

155 
	}
}

156 
TEST_END


158 
	$TEST_BEGIN
(
ã°_n°ime_idivide
) {

159 
n°ime_t
 
n°a
, 
n°b
;

161 
	`n°ime_öô2
(&
n°a
, 42, 43);

162 
	`n°ime_c›y
(&
n°b
, &
n°a
);

163 
	`n°ime_imu…ùly
(&
n°a
, 10);

164 
	`n°ime_idivide
(&
n°a
, 10);

165 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 0,

168 
	`n°ime_öô2
(&
n°a
, 42, 666666666);

169 
	`n°ime_c›y
(&
n°b
, &
n°a
);

170 
	`n°ime_imu…ùly
(&
n°a
, 3);

171 
	`n°ime_idivide
(&
n°a
, 3);

172 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°a
, &
n°b
), 0,

174 
	}
}

175 
TEST_END


177 
	$TEST_BEGIN
(
ã°_n°ime_divide
) {

178 
n°ime_t
 
n°a
, 
n°b
, 
n°c
;

180 
	`n°ime_öô2
(&
n°a
, 42, 43);

181 
	`n°ime_c›y
(&
n°b
, &
n°a
);

182 
	`n°ime_imu…ùly
(&
n°a
, 10);

183 
	`as£π_u64_eq
(
	`n°ime_divide
(&
n°a
, &
n°b
), 10,

186 
	`n°ime_öô2
(&
n°a
, 42, 43);

187 
	`n°ime_c›y
(&
n°b
, &
n°a
);

188 
	`n°ime_imu…ùly
(&
n°a
, 10);

189 
	`n°ime_öô
(&
n°c
, 1);

190 
	`n°ime_add
(&
n°a
, &
n°c
);

191 
	`as£π_u64_eq
(
	`n°ime_divide
(&
n°a
, &
n°b
), 10,

194 
	`n°ime_öô2
(&
n°a
, 42, 43);

195 
	`n°ime_c›y
(&
n°b
, &
n°a
);

196 
	`n°ime_imu…ùly
(&
n°a
, 10);

197 
	`n°ime_öô
(&
n°c
, 1);

198 
	`n°ime_subåa˘
(&
n°a
, &
n°c
);

199 
	`as£π_u64_eq
(
	`n°ime_divide
(&
n°a
, &
n°b
), 9,

201 
	}
}

202 
TEST_END


204 
	$TEST_BEGIN
(
ã°_n°ime_m⁄Ÿ⁄ic
) {

205 
	`n°ime_m⁄Ÿ⁄ic
();

206 
	}
}

207 
TEST_END


209 
	$TEST_BEGIN
(
ã°_n°ime_upd©e
) {

210 
n°ime_t
 
n°
;

212 
	`n°ime_öô
(&
n°
, 0);

214 
	`as£π_Ál£
(
	`n°ime_upd©e
(&
n°
), "BasicÅime update failed.");

218 
n°ime_t
 
addíd
;

219 
	`n°ime_öô2
(&
addíd
, 631152000, 0);

220 
	`n°ime_add
(&
n°
, &
addíd
);

223 
n°ime_t
 
n°0
;

224 
	`n°ime_c›y
(&
n°0
, &
n°
);

225 
	`as£π_åue
(
	`n°ime_upd©e
(&
n°
),

227 
	`as£π_d_eq
(
	`n°ime_com∑ª
(&
n°
, &
n°0
), 0,

230 
	}
}

231 
TEST_END


234 
	$maö
() {

235  
	`ã°
(

236 
ã°_n°ime_öô
,

237 
ã°_n°ime_öô2
,

238 
ã°_n°ime_c›y
,

239 
ã°_n°ime_com∑ª
,

240 
ã°_n°ime_add
,

241 
ã°_n°ime_üdd
,

242 
ã°_n°ime_subåa˘
,

243 
ã°_n°ime_isubåa˘
,

244 
ã°_n°ime_imu…ùly
,

245 
ã°_n°ime_idivide
,

246 
ã°_n°ime_divide
,

247 
ã°_n°ime_m⁄Ÿ⁄ic
,

248 
ã°_n°ime_upd©e
);

249 
	}
}

	@test/unit/pack.c

1 
	~"ã°/jemÆloc_ã°.h
"

6 #i‡
LG_PAGE
 <= 14

7 
	#SZ
 (
	`ZU
(1Ë<< (
LG_PAGE
 - 2))

	)

9 
	#SZ
 
	`ZU
(4096)

	)

17 
	#NSLABS
 8

	)

20 
	$bööd_compuã
() {

21 
size_t
 
sz
;

22 
nbös
, 
i
;

24 
sz
 = (
nbös
);

25 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.nbös", (*)&
nbös
, &
sz
, 
NULL
, 0), 0,

28 
i
 = 0; i < 
nbös
; i++) {

29 
size_t
 
mib
[4];

30 
size_t
 
mibÀn
 = (
mib
)/(size_t);

31 
size_t
 
size
;

33 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ías.bö.0.size", 
mib
,

34 &
mibÀn
), 0, "Unexpected mallctlnametomb failure");

35 
mib
[2] = (
size_t
)
i
;

37 
sz
 = (
size
);

38 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
size
, &
sz
, 
NULL
,

40 i‡(
size
 =
SZ
) {

41  
i
;

45 
	`ã°_Áû
("UnableÅo computeÇregs_per_run");

47 
	}
}

49 
size_t


50 
	$ƒegs_≥r_run_compuã
() {

51 
uöt32_t
 
ƒegs
;

52 
size_t
 
sz
;

53 
bööd
 = 
	`bööd_compuã
();

54 
size_t
 
mib
[4];

55 
size_t
 
mibÀn
 = (
mib
)/(size_t);

57 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ías.bö.0.ƒegs", 
mib
, &
mibÀn
), 0,

59 
mib
[2] = (
size_t
)
bööd
;

60 
sz
 = (
ƒegs
);

61 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
ƒegs
, &
sz
, 
NULL
,

63  
ƒegs
;

64 
	}
}

67 
	$¨ías_¸óã_mÆl˘l
() {

68 
¨ía_öd
;

69 
size_t
 
sz
;

71 
sz
 = (
¨ía_öd
);

72 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.¸óã", (*)&
¨ía_öd
, &
sz
, 
NULL
, 0),

75  
¨ía_öd
;

76 
	}
}

79 
	$¨ía_ª£t_mÆl˘l
(
¨ía_öd
) {

80 
size_t
 
mib
[3];

81 
size_t
 
mibÀn
 = (
mib
)/(size_t);

83 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.ª£t", 
mib
, &
mibÀn
), 0,

85 
mib
[1] = (
size_t
)
¨ía_öd
;

86 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, NULL, 0), 0,

88 
	}
}

90 
	$TEST_BEGIN
(
ã°_∑ck
) {

91 
boﬁ
 
¥of_íabÀd
;

92 
size_t
 
sz
 = (
¥of_íabÀd
);

93 i‡(
	`mÆl˘l
("›t.¥of", (*)&
¥of_íabÀd
, &
sz
, 
NULL
, 0) == 0) {

94 
	`ã°_skù_if
(
¥of_íabÀd
);

97 
¨ía_öd
 = 
	`¨ías_¸óã_mÆl˘l
();

98 
size_t
 
ƒegs_≥r_run
 = 
	`ƒegs_≥r_run_compuã
();

99 
size_t
 
ƒegs
 = 
ƒegs_≥r_run
 * 
NSLABS
;

100 
	`VARIABLE_ARRAY
(*, 
±rs
, 
ƒegs
);

101 
size_t
 
i
, 
j
, 
off£t
;

104 
i
 = 
off£t
 = 0; i < 
NSLABS
; i++) {

105 
j
 = 0; j < 
ƒegs_≥r_run
; j++) {

106 *
p
 = 
	`mÆlocx
(
SZ
, 
	`MALLOCX_ARENA
(
¨ía_öd
) |

107 
MALLOCX_TCACHE_NONE
);

108 
	`as£π_±r_nŸ_nuŒ
(
p
,

111 
SZ
, 
¨ía_öd
, 
i
, 
j
);

112 
±rs
[(
i
 * 
ƒegs_≥r_run
Ë+ 
j
] = 
p
;

121 
off£t
 = 0;

122 
i
 = 
off£t
 = 0;

123 
i
 < 
NSLABS
;

124 
i
++, 
off£t
 = (off£à+ 1Ë% 
ƒegs_≥r_run
) {

125 
j
 = 0; j < 
ƒegs_≥r_run
; j++) {

126 *
p
 = 
±rs
[(
i
 * 
ƒegs_≥r_run
Ë+ 
j
];

127 i‡(
off£t
 =
j
) {

130 
	`dÆlocx
(
p
, 
	`MALLOCX_ARENA
(
¨ía_öd
) |

131 
MALLOCX_TCACHE_NONE
);

139 
off£t
 = 0;

140 
i
 = 
off£t
 = 0;

141 
i
 < 
NSLABS
;

142 
i
++, 
off£t
 = (off£à+ 1Ë% 
ƒegs_≥r_run
) {

143 
j
 = 0; j < 
ƒegs_≥r_run
; j++) {

144 *
p
;

146 i‡(
off£t
 =
j
) {

149 
p
 = 
	`mÆlocx
(
SZ
, 
	`MALLOCX_ARENA
(
¨ía_öd
) |

150 
MALLOCX_TCACHE_NONE
);

151 
	`as£π_±r_eq
(
p
, 
±rs
[(
i
 * 
ƒegs_≥r_run
Ë+ 
j
],

153 
i
, 
j
);

158 
	`¨ía_ª£t_mÆl˘l
(
¨ía_öd
);

159 
	}
}

160 
TEST_END


163 
	$maö
() {

164  
	`ã°
(

165 
ã°_∑ck
);

166 
	}
}

	@test/unit/pages.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	$TEST_BEGIN
(
ã°_∑ges_huge
) {

4 
size_t
 
Æloc_size
;

5 
boﬁ
 
commô
;

6 *
∑ges
, *
hugïage
;

8 
Æloc_size
 = 
HUGEPAGE
 * 2 - 
PAGE
;

9 
commô
 = 
åue
;

10 
∑ges
 = 
	`∑ges_m≠
(
NULL
, 
Æloc_size
, 
PAGE
, &
commô
);

11 
	`as£π_±r_nŸ_nuŒ
(
∑ges
, "UnexpectedÖages_map()Érror");

13 i‡(
thp_°©e_madvi£
) {

14 
hugïage
 = (*)(
	`ALIGNMENT_CEILING
((
uöçå_t
)
∑ges
, 
HUGEPAGE
));

15 
	`as£π_b_√
(
	`∑ges_huge
(
hugïage
, 
HUGEPAGE
), 
have_madvi£_huge
,

17 
	`as£π_Ál£
(
	`∑ges_nohuge
(
hugïage
, 
HUGEPAGE
),

21 
	`∑ges_unm≠
(
∑ges
, 
Æloc_size
);

22 
	}
}

23 
TEST_END


26 
	$maö
() {

27  
	`ã°
(

28 
ã°_∑ges_huge
);

29 
	}
}

	@test/unit/ph.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/ph.h
"

5 
node_s
 
	tnode_t
;

7 
	snode_s
 {

8 
	#NODE_MAGIC
 0x9823af7e

	)

9 
uöt32_t
 
	mmagic
;

10 
phn
(
node_t
Ë
	mlök
;

11 
uöt64_t
 
	mkey
;

15 
	$node_cmp
(c⁄° 
node_t
 *
a
, c⁄°Çode_à*
b
) {

16 
ªt
;

18 
ªt
 = (
a
->
key
 > 
b
->key) - (a->key < b->key);

19 i‡(
ªt
 == 0) {

24 
ªt
 = (((
uöçå_t
)
a
Ë> ((uöçå_t)
b
))

25 - (((
uöçå_t
)
a
Ë< ((uöçå_t)
b
));

27  
ªt
;

28 
	}
}

31 
	$node_cmp_magic
(c⁄° 
node_t
 *
a
, c⁄°Çode_à*
b
) {

33 
	`as£π_u32_eq
(
a
->
magic
, 
NODE_MAGIC
, "Bad magic");

34 
	`as£π_u32_eq
(
b
->
magic
, 
NODE_MAGIC
, "Bad magic");

36  
	`node_cmp
(
a
, 
b
);

37 
	}
}

39 
	$ph
(
	tnode_t
Ë
	thóp_t
;

40 
	`ph_gí
(, 
hóp_
, 
hóp_t
, 
node_t
, 
lök
, 
node_cmp_magic
);

43 
	$node_¥öt
(c⁄° 
node_t
 *
node
, 
dïth
) {

44 
i
;

45 
node_t
 *
À·mo°_chûd
, *
siblög
;

47 
i
 = 0; i < 
dïth
; i++) {

48 
	`mÆloc_¥ötf
("\t");

50 
	`mÆloc_¥ötf
("%2"
FMTu64
"\n", 
node
->
key
);

52 
À·mo°_chûd
 = 
	`phn_lchûd_gë
(
node_t
, 
lök
, 
node
);

53 i‡(
À·mo°_chûd
 =
NULL
) {

56 
	`node_¥öt
(
À·mo°_chûd
, 
dïth
 + 1);

58 
siblög
 = 
	`phn_√xt_gë
(
node_t
, 
lök
, 
À·mo°_chûd
); sibling !=

59 
NULL
; 
siblög
 = 
	`phn_√xt_gë
(
node_t
, 
lök
, sibling)) {

60 
	`node_¥öt
(
siblög
, 
dïth
 + 1);

62 
	}
}

65 
	$hóp_¥öt
(c⁄° 
hóp_t
 *
hóp
) {

66 
node_t
 *
auxñm
;

68 
	`mÆloc_¥ötf
("vvv hó∞%∞vvv\n", 
hóp
);

69 i‡(
hóp
->
ph_roŸ
 =
NULL
) {

70 
œbñ_ªtu∫
;

73 
	`node_¥öt
(
hóp
->
ph_roŸ
, 0);

75 
auxñm
 = 
	`phn_√xt_gë
(
node_t
, 
lök
, 
hóp
->
ph_roŸ
);áuxñm !
NULL
;

76 
auxñm
 = 
	`phn_√xt_gë
(
node_t
, 
lök
,áuxelm)) {

77 
	`as£π_±r_eq
(
	`phn_√xt_gë
(
node_t
, 
lök
, 
	`phn_¥ev_gë
(node_t,

78 
lök
, 
auxñm
)),áuxelm,

80 
	`node_¥öt
(
auxñm
, 0);

83 
œbñ_ªtu∫
:

84 
	`mÆloc_¥ötf
("^^^ hó∞%∞^^^\n", 
hóp
);

85 
	}
}

88 
	$node_vÆid©e
(c⁄° 
node_t
 *
node
, c⁄°Çode_à*
∑ª¡
) {

89 
¬odes
 = 1;

90 
node_t
 *
À·mo°_chûd
, *
siblög
;

92 i‡(
∑ª¡
 !
NULL
) {

93 
	`as£π_d_ge
(
	`node_cmp_magic
(
node
, 
∑ª¡
), 0,

97 
À·mo°_chûd
 = 
	`phn_lchûd_gë
(
node_t
, 
lök
, 
node
);

98 i‡(
À·mo°_chûd
 =
NULL
) {

99  
¬odes
;

101 
	`as£π_±r_eq
((*)
	`phn_¥ev_gë
(
node_t
, 
lök
, 
À·mo°_chûd
),

102 (*)
node
, "Leftmost child doesÇotÜinkÅoÇode");

103 
¬odes
 +
	`node_vÆid©e
(
À·mo°_chûd
, 
node
);

105 
siblög
 = 
	`phn_√xt_gë
(
node_t
, 
lök
, 
À·mo°_chûd
); sibling !=

106 
NULL
; 
siblög
 = 
	`phn_√xt_gë
(
node_t
, 
lök
, sibling)) {

107 
	`as£π_±r_eq
(
	`phn_√xt_gë
(
node_t
, 
lök
, 
	`phn_¥ev_gë
(node_t,

108 
lök
, 
siblög
)), sibling,

110 
¬odes
 +
	`node_vÆid©e
(
siblög
, 
node
);

112  
¬odes
;

113 
	}
}

116 
	$hóp_vÆid©e
(c⁄° 
hóp_t
 *
hóp
) {

117 
¬odes
 = 0;

118 
node_t
 *
auxñm
;

120 i‡(
hóp
->
ph_roŸ
 =
NULL
) {

121 
œbñ_ªtu∫
;

124 
¬odes
 +
	`node_vÆid©e
(
hóp
->
ph_roŸ
, 
NULL
);

126 
auxñm
 = 
	`phn_√xt_gë
(
node_t
, 
lök
, 
hóp
->
ph_roŸ
);áuxñm !
NULL
;

127 
auxñm
 = 
	`phn_√xt_gë
(
node_t
, 
lök
,áuxelm)) {

128 
	`as£π_±r_eq
(
	`phn_√xt_gë
(
node_t
, 
lök
, 
	`phn_¥ev_gë
(node_t,

129 
lök
, 
auxñm
)),áuxelm,

131 
¬odes
 +
	`node_vÆid©e
(
auxñm
, 
NULL
);

134 
œbñ_ªtu∫
:

135 i‡(
Ál£
) {

136 
	`hóp_¥öt
(
hóp
);

138  
¬odes
;

139 
	}
}

141 
	$TEST_BEGIN
(
ã°_ph_em±y
) {

142 
hóp_t
 
hóp
;

144 
	`hóp_√w
(&
hóp
);

145 
	`as£π_åue
(
	`hóp_em±y
(&
hóp
), "Heap should beÉmpty");

146 
	`as£π_±r_nuŒ
(
	`hóp_fú°
(&
hóp
), "UnexpectedÇode");

147 
	`as£π_±r_nuŒ
(
	`hóp_™y
(&
hóp
), "UnexpectedÇode");

148 
	}
}

149 
TEST_END


152 
	$node_ªmove
(
hóp_t
 *
hóp
, 
node_t
 *
node
) {

153 
	`hóp_ªmove
(
hóp
, 
node
);

155 
node
->
magic
 = 0;

156 
	}
}

158 
node_t
 *

159 
	$node_ªmove_fú°
(
hóp_t
 *
hóp
) {

160 
node_t
 *
node
 = 
	`hóp_ªmove_fú°
(
hóp
);

161 
node
->
magic
 = 0;

162  
node
;

163 
	}
}

165 
node_t
 *

166 
	$node_ªmove_™y
(
hóp_t
 *
hóp
) {

167 
node_t
 *
node
 = 
	`hóp_ªmove_™y
(
hóp
);

168 
node
->
magic
 = 0;

169  
node
;

170 
	}
}

172 
	$TEST_BEGIN
(
ã°_ph_øndom
) {

173 
	#NNODES
 25

	)

174 
	#NBAGS
 250

	)

175 
	#SEED
 42

	)

176 
sfmt_t
 *
sfmt
;

177 
uöt64_t
 
bag
[
NNODES
];

178 
hóp_t
 
hóp
;

179 
node_t
 
nodes
[
NNODES
];

180 
i
, 
j
, 
k
;

182 
sfmt
 = 
	`öô_gí_ønd
(
SEED
);

183 
i
 = 0; i < 
NBAGS
; i++) {

184 
i
) {

187 
j
 = 0; j < 
NNODES
; j++) {

188 
bag
[
j
] = j;

193 
j
 = 0; j < 
NNODES
; j++) {

194 
bag
[
j
] = 
NNODES
 - j - 1;

198 
j
 = 0; j < 
NNODES
; j++) {

199 
bag
[
j
] = 
	`gí_ønd64_ønge
(
sfmt
, 
NNODES
);

203 
j
 = 1; j <
NNODES
; j++) {

205 
	`hóp_√w
(&
hóp
);

206 
	`as£π_u_eq
(
	`hóp_vÆid©e
(&
hóp
), 0,

208 
k
 = 0; k < 
j
; k++) {

209 
nodes
[
k
].
magic
 = 
NODE_MAGIC
;

210 
nodes
[
k
].
key
 = 
bag
[k];

214 
k
 = 0; k < 
j
; k++) {

215 
	`hóp_ö£π
(&
hóp
, &
nodes
[
k
]);

216 i‡(
i
 % 13 == 12) {

217 
	`as£π_±r_nŸ_nuŒ
(
	`hóp_™y
(&
hóp
),

220 
	`as£π_±r_nŸ_nuŒ
(
	`hóp_fú°
(&
hóp
),

223 
	`as£π_u_eq
(
	`hóp_vÆid©e
(&
hóp
), 
k
 + 1,

227 
	`as£π_Ál£
(
	`hóp_em±y
(&
hóp
),

231 
i
 % 6) {

233 
k
 = 0; k < 
j
; k++) {

234 
	`as£π_u_eq
(
	`hóp_vÆid©e
(&
hóp
), 
j
 - 
k
,

236 
	`node_ªmove
(&
hóp
, &
nodes
[
k
]);

237 
	`as£π_u_eq
(
	`hóp_vÆid©e
(&
hóp
), 
j
 - 
k


242 
k
 = 
j
; k > 0; k--) {

243 
	`node_ªmove
(&
hóp
, &
nodes
[
k
-1]);

244 
	`as£π_u_eq
(
	`hóp_vÆid©e
(&
hóp
), 
k
 - 1,

249 
node_t
 *
¥ev
 = 
NULL
;

250 
k
 = 0; k < 
j
; k++) {

251 
node_t
 *
node
 = 
	`node_ªmove_fú°
(&
hóp
);

252 
	`as£π_u_eq
(
	`hóp_vÆid©e
(&
hóp
), 
j
 - 
k


254 i‡(
¥ev
 !
NULL
) {

255 
	`as£π_d_ge
(
	`node_cmp
(
node
,

256 
¥ev
), 0,

259 
¥ev
 = 
node
;

263 
node_t
 *
¥ev
 = 
NULL
;

264 
k
 = 0; k < 
j
; k++) {

265 
node_t
 *
node
 = 
	`hóp_fú°
(&
hóp
);

266 
	`as£π_u_eq
(
	`hóp_vÆid©e
(&
hóp
), 
j
 - 
k
,

268 i‡(
¥ev
 !
NULL
) {

269 
	`as£π_d_ge
(
	`node_cmp
(
node
,

270 
¥ev
), 0,

273 
	`node_ªmove
(&
hóp
, 
node
);

274 
	`as£π_u_eq
(
	`hóp_vÆid©e
(&
hóp
), 
j
 - 
k


276 
¥ev
 = 
node
;

280 
k
 = 0; k < 
j
; k++) {

281 
	`node_ªmove_™y
(&
hóp
);

282 
	`as£π_u_eq
(
	`hóp_vÆid©e
(&
hóp
), 
j
 - 
k


287 
k
 = 0; k < 
j
; k++) {

288 
node_t
 *
node
 = 
	`hóp_™y
(&
hóp
);

289 
	`as£π_u_eq
(
	`hóp_vÆid©e
(&
hóp
), 
j
 - 
k
,

291 
	`node_ªmove
(&
hóp
, 
node
);

292 
	`as£π_u_eq
(
	`hóp_vÆid©e
(&
hóp
), 
j
 - 
k


297 
	`nŸ_ªached
();

300 
	`as£π_±r_nuŒ
(
	`hóp_fú°
(&
hóp
),

302 
	`as£π_±r_nuŒ
(
	`hóp_™y
(&
hóp
),

304 
	`as£π_åue
(
	`hóp_em±y
(&
hóp
), "Heap should beÉmpty");

307 
	`föi_gí_ønd
(
sfmt
);

308 #unde‡
NNODES


309 #unde‡
SEED


310 
	}
}

311 
TEST_END


314 
	$maö
() {

315  
	`ã°
(

316 
ã°_ph_em±y
,

317 
ã°_ph_øndom
);

318 
	}
}

	@test/unit/prng.c

1 
	~"ã°/jemÆloc_ã°.h
"

4 
	$ã°_¥ng_lg_ønge_u32
(
boﬁ
 
©omic
) {

5 
©omic_u32_t
 
ß
, 
sb
;

6 
uöt32_t
 
ø
, 
rb
;

7 
lg_ønge
;

9 
	`©omic_°‹e_u32
(&
ß
, 42, 
ATOMIC_RELAXED
);

10 
ø
 = 
	`¥ng_lg_ønge_u32
(&
ß
, 32, 
©omic
);

11 
	`©omic_°‹e_u32
(&
ß
, 42, 
ATOMIC_RELAXED
);

12 
rb
 = 
	`¥ng_lg_ønge_u32
(&
ß
, 32, 
©omic
);

13 
	`as£π_u32_eq
(
ø
, 
rb
,

16 
	`©omic_°‹e_u32
(&
sb
, 42, 
ATOMIC_RELAXED
);

17 
rb
 = 
	`¥ng_lg_ønge_u32
(&
sb
, 32, 
©omic
);

18 
	`as£π_u32_eq
(
ø
, 
rb
,

21 
	`©omic_°‹e_u32
(&
ß
, 42, 
ATOMIC_RELAXED
);

22 
ø
 = 
	`¥ng_lg_ønge_u32
(&
ß
, 32, 
©omic
);

23 
rb
 = 
	`¥ng_lg_ønge_u32
(&
ß
, 32, 
©omic
);

24 
	`as£π_u32_√
(
ø
, 
rb
,

27 
	`©omic_°‹e_u32
(&
ß
, 42, 
ATOMIC_RELAXED
);

28 
ø
 = 
	`¥ng_lg_ønge_u32
(&
ß
, 32, 
©omic
);

29 
lg_ønge
 = 31;Üg_range > 0;Üg_range--) {

30 
	`©omic_°‹e_u32
(&
sb
, 42, 
ATOMIC_RELAXED
);

31 
rb
 = 
	`¥ng_lg_ønge_u32
(&
sb
, 
lg_ønge
, 
©omic
);

32 
	`as£π_u32_eq
((
rb
 & (
	`UINT32_C
(0xffffffffË<< 
lg_ønge
)),

33 0, "High ordî bô†should bê0,Üg_ønge=%u", 
lg_ønge
);

34 
	`as£π_u32_eq
(
rb
, (
ø
 >> (32 - 
lg_ønge
)),

36 "lg_ønge=%u", 
lg_ønge
);

38 
	}
}

41 
	$ã°_¥ng_lg_ønge_u64
() {

42 
uöt64_t
 
ß
, 
sb
, 
ø
, 
rb
;

43 
lg_ønge
;

45 
ß
 = 42;

46 
ø
 = 
	`¥ng_lg_ønge_u64
(&
ß
, 64);

47 
ß
 = 42;

48 
rb
 = 
	`¥ng_lg_ønge_u64
(&
ß
, 64);

49 
	`as£π_u64_eq
(
ø
, 
rb
,

52 
sb
 = 42;

53 
rb
 = 
	`¥ng_lg_ønge_u64
(&
sb
, 64);

54 
	`as£π_u64_eq
(
ø
, 
rb
,

57 
ß
 = 42;

58 
ø
 = 
	`¥ng_lg_ønge_u64
(&
ß
, 64);

59 
rb
 = 
	`¥ng_lg_ønge_u64
(&
ß
, 64);

60 
	`as£π_u64_√
(
ø
, 
rb
,

63 
ß
 = 42;

64 
ø
 = 
	`¥ng_lg_ønge_u64
(&
ß
, 64);

65 
lg_ønge
 = 63;Üg_range > 0;Üg_range--) {

66 
sb
 = 42;

67 
rb
 = 
	`¥ng_lg_ønge_u64
(&
sb
, 
lg_ønge
);

68 
	`as£π_u64_eq
((
rb
 & (
	`UINT64_C
(0xffffffffffffffffË<< 
lg_ønge
)),

69 0, "High ordî bô†should bê0,Üg_ønge=%u", 
lg_ønge
);

70 
	`as£π_u64_eq
(
rb
, (
ø
 >> (64 - 
lg_ønge
)),

72 "lg_ønge=%u", 
lg_ønge
);

74 
	}
}

77 
	$ã°_¥ng_lg_ønge_zu
(
boﬁ
 
©omic
) {

78 
©omic_zu_t
 
ß
, 
sb
;

79 
size_t
 
ø
, 
rb
;

80 
lg_ønge
;

82 
	`©omic_°‹e_zu
(&
ß
, 42, 
ATOMIC_RELAXED
);

83 
ø
 = 
	`¥ng_lg_ønge_zu
(&
ß
, 
	`ZU
(1Ë<< (3 + 
LG_SIZEOF_PTR
), 
©omic
);

84 
	`©omic_°‹e_zu
(&
ß
, 42, 
ATOMIC_RELAXED
);

85 
rb
 = 
	`¥ng_lg_ønge_zu
(&
ß
, 
	`ZU
(1Ë<< (3 + 
LG_SIZEOF_PTR
), 
©omic
);

86 
	`as£π_zu_eq
(
ø
, 
rb
,

89 
	`©omic_°‹e_zu
(&
sb
, 42, 
ATOMIC_RELAXED
);

90 
rb
 = 
	`¥ng_lg_ønge_zu
(&
sb
, 
	`ZU
(1Ë<< (3 + 
LG_SIZEOF_PTR
), 
©omic
);

91 
	`as£π_zu_eq
(
ø
, 
rb
,

94 
	`©omic_°‹e_zu
(&
ß
, 42, 
ATOMIC_RELAXED
);

95 
ø
 = 
	`¥ng_lg_ønge_zu
(&
ß
, 
	`ZU
(1Ë<< (3 + 
LG_SIZEOF_PTR
), 
©omic
);

96 
rb
 = 
	`¥ng_lg_ønge_zu
(&
ß
, 
	`ZU
(1Ë<< (3 + 
LG_SIZEOF_PTR
), 
©omic
);

97 
	`as£π_zu_√
(
ø
, 
rb
,

100 
	`©omic_°‹e_zu
(&
ß
, 42, 
ATOMIC_RELAXED
);

101 
ø
 = 
	`¥ng_lg_ønge_zu
(&
ß
, 
	`ZU
(1Ë<< (3 + 
LG_SIZEOF_PTR
), 
©omic
);

102 
lg_ønge
 = (
	`ZU
(1Ë<< (3 + 
LG_SIZEOF_PTR
)) - 1;Üg_range > 0;

103 
lg_ønge
--) {

104 
	`©omic_°‹e_zu
(&
sb
, 42, 
ATOMIC_RELAXED
);

105 
rb
 = 
	`¥ng_lg_ønge_zu
(&
sb
, 
lg_ønge
, 
©omic
);

106 
	`as£π_zu_eq
((
rb
 & (
SIZE_T_MAX
 << 
lg_ønge
)),

107 0, "High ordî bô†should bê0,Üg_ønge=%u", 
lg_ønge
);

108 
	`as£π_zu_eq
(
rb
, (
ø
 >> ((
	`ZU
(1Ë<< (3 + 
LG_SIZEOF_PTR
)) -

109 
lg_ønge
)), "Expected high order bits of full-width "

110 "ªsu…,Üg_ønge=%u", 
lg_ønge
);

112 
	}
}

114 
	$TEST_BEGIN
(
ã°_¥ng_lg_ønge_u32_n⁄©omic
) {

115 
	`ã°_¥ng_lg_ønge_u32
(
Ál£
);

116 
	}
}

117 
TEST_END


119 
	$TEST_BEGIN
(
ã°_¥ng_lg_ønge_u32_©omic
) {

120 
	`ã°_¥ng_lg_ønge_u32
(
åue
);

121 
	}
}

122 
TEST_END


124 
	$TEST_BEGIN
(
ã°_¥ng_lg_ønge_u64_n⁄©omic
) {

125 
	`ã°_¥ng_lg_ønge_u64
();

126 
	}
}

127 
TEST_END


129 
	$TEST_BEGIN
(
ã°_¥ng_lg_ønge_zu_n⁄©omic
) {

130 
	`ã°_¥ng_lg_ønge_zu
(
Ál£
);

131 
	}
}

132 
TEST_END


134 
	$TEST_BEGIN
(
ã°_¥ng_lg_ønge_zu_©omic
) {

135 
	`ã°_¥ng_lg_ønge_zu
(
åue
);

136 
	}
}

137 
TEST_END


140 
	$ã°_¥ng_ønge_u32
(
boﬁ
 
©omic
) {

141 
uöt32_t
 
ønge
;

142 
	#MAX_RANGE
 10000000

	)

143 
	#RANGE_STEP
 97

	)

144 
	#NREPS
 10

	)

146 
ønge
 = 2;Ñ™gê< 
MAX_RANGE
;Ñ™gê+
RANGE_STEP
) {

147 
©omic_u32_t
 
s
;

148 
ªp
;

150 
	`©omic_°‹e_u32
(&
s
, 
ønge
, 
ATOMIC_RELAXED
);

151 
ªp
 = 0;Ñï < 
NREPS
;Ñep++) {

152 
uöt32_t
 
r
 = 
	`¥ng_ønge_u32
(&
s
, 
ønge
, 
©omic
);

154 
	`as£π_u32_…
(
r
, 
ønge
, "Out ofÑange");

157 
	}
}

160 
	$ã°_¥ng_ønge_u64
() {

161 
uöt64_t
 
ønge
;

162 
	#MAX_RANGE
 10000000

	)

163 
	#RANGE_STEP
 97

	)

164 
	#NREPS
 10

	)

166 
ønge
 = 2;Ñ™gê< 
MAX_RANGE
;Ñ™gê+
RANGE_STEP
) {

167 
uöt64_t
 
s
;

168 
ªp
;

170 
s
 = 
ønge
;

171 
ªp
 = 0;Ñï < 
NREPS
;Ñep++) {

172 
uöt64_t
 
r
 = 
	`¥ng_ønge_u64
(&
s
, 
ønge
);

174 
	`as£π_u64_…
(
r
, 
ønge
, "Out ofÑange");

177 
	}
}

180 
	$ã°_¥ng_ønge_zu
(
boﬁ
 
©omic
) {

181 
size_t
 
ønge
;

182 
	#MAX_RANGE
 10000000

	)

183 
	#RANGE_STEP
 97

	)

184 
	#NREPS
 10

	)

186 
ønge
 = 2;Ñ™gê< 
MAX_RANGE
;Ñ™gê+
RANGE_STEP
) {

187 
©omic_zu_t
 
s
;

188 
ªp
;

190 
	`©omic_°‹e_zu
(&
s
, 
ønge
, 
ATOMIC_RELAXED
);

191 
ªp
 = 0;Ñï < 
NREPS
;Ñep++) {

192 
size_t
 
r
 = 
	`¥ng_ønge_zu
(&
s
, 
ønge
, 
©omic
);

194 
	`as£π_zu_…
(
r
, 
ønge
, "Out ofÑange");

197 
	}
}

199 
	$TEST_BEGIN
(
ã°_¥ng_ønge_u32_n⁄©omic
) {

200 
	`ã°_¥ng_ønge_u32
(
Ál£
);

201 
	}
}

202 
TEST_END


204 
	$TEST_BEGIN
(
ã°_¥ng_ønge_u32_©omic
) {

205 
	`ã°_¥ng_ønge_u32
(
åue
);

206 
	}
}

207 
TEST_END


209 
	$TEST_BEGIN
(
ã°_¥ng_ønge_u64_n⁄©omic
) {

210 
	`ã°_¥ng_ønge_u64
();

211 
	}
}

212 
TEST_END


214 
	$TEST_BEGIN
(
ã°_¥ng_ønge_zu_n⁄©omic
) {

215 
	`ã°_¥ng_ønge_zu
(
Ál£
);

216 
	}
}

217 
TEST_END


219 
	$TEST_BEGIN
(
ã°_¥ng_ønge_zu_©omic
) {

220 
	`ã°_¥ng_ønge_zu
(
åue
);

221 
	}
}

222 
TEST_END


225 
	$maö
() {

226  
	`ã°
(

227 
ã°_¥ng_lg_ønge_u32_n⁄©omic
,

228 
ã°_¥ng_lg_ønge_u32_©omic
,

229 
ã°_¥ng_lg_ønge_u64_n⁄©omic
,

230 
ã°_¥ng_lg_ønge_zu_n⁄©omic
,

231 
ã°_¥ng_lg_ønge_zu_©omic
,

232 
ã°_¥ng_ønge_u32_n⁄©omic
,

233 
ã°_¥ng_ønge_u32_©omic
,

234 
ã°_¥ng_ønge_u64_n⁄©omic
,

235 
ã°_¥ng_ønge_zu_n⁄©omic
,

236 
ã°_¥ng_ønge_zu_©omic
);

237 
	}
}

	@test/unit/prof_accum.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	#NTHREADS
 4

	)

4 
	#NALLOCS_PER_THREAD
 50

	)

5 
	#DUMP_INTERVAL
 1

	)

6 
	#BT_COUNT_CHECK_INTERVAL
 5

	)

9 
	$¥of_dump_›í_öãr˚±
(
boﬁ
 
¥›ag©e_îr
, c⁄° *
fûíame
) {

10 
fd
;

12 
fd
 = 
	`›í
("/dev/nuŒ", 
O_WRONLY
);

13 
	`as£π_d_√
(
fd
, -1, "Unexpected open() failure");

15  
fd
;

16 
	}
}

19 
	$Æloc_‰om_≥rmuãd_backåa˚
(
thd_öd
, 
ôî©i⁄
) {

20  
	`bèŒoc
(1, 
thd_öd
*
NALLOCS_PER_THREAD
 + 
ôî©i⁄
);

21 
	}
}

24 
	$thd_°¨t
(*
v¨g
) {

25 
thd_öd
 = *(*)
v¨g
;

26 
size_t
 
bt_cou¡_¥ev
, 
bt_cou¡
;

27 
i_¥ev
, 
i
;

29 
i_¥ev
 = 0;

30 
bt_cou¡_¥ev
 = 0;

31 
i
 = 0; i < 
NALLOCS_PER_THREAD
; i++) {

32 *
p
 = 
	`Æloc_‰om_≥rmuãd_backåa˚
(
thd_öd
, 
i
);

33 
	`dÆlocx
(
p
, 0);

34 i‡(
i
 % 
DUMP_INTERVAL
 == 0) {

35 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.dump", 
NULL
, NULL, NULL, 0),

39 i‡(
i
 % 
BT_COUNT_CHECK_INTERVAL
 == 0 ||

40 
i
+1 =
NALLOCS_PER_THREAD
) {

41 
bt_cou¡
 = 
	`¥of_bt_cou¡
();

42 
	`as£π_zu_À
(
bt_cou¡_¥ev
+(
i
-
i_¥ev
), 
bt_cou¡
,

44 
i_¥ev
 = 
i
;

45 
bt_cou¡_¥ev
 = 
bt_cou¡
;

49  
NULL
;

50 
	}
}

52 
	$TEST_BEGIN
(
ã°_idump
) {

53 
boﬁ
 
a˘ive
;

54 
thd_t
 
thds
[
NTHREADS
];

55 
thd_¨gs
[
NTHREADS
];

56 
i
;

58 
	`ã°_skù_if
(!
c⁄fig_¥of
);

60 
a˘ive
 = 
åue
;

61 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.a˘ive", 
NULL
, NULL, (*)&
a˘ive
,

62 (
a˘ive
)), 0,

65 
¥of_dump_›í
 = 
¥of_dump_›í_öãr˚±
;

67 
i
 = 0; i < 
NTHREADS
; i++) {

68 
thd_¨gs
[
i
] = i;

69 
	`thd_¸óã
(&
thds
[
i
], 
thd_°¨t
, (*)&
thd_¨gs
[i]);

71 
i
 = 0; i < 
NTHREADS
; i++) {

72 
	`thd_joö
(
thds
[
i
], 
NULL
);

74 
	}
}

75 
TEST_END


78 
	$maö
() {

79  
	`ã°_no_ªíå™cy
(

80 
ã°_idump
);

81 
	}
}

	@test/unit/prof_active.c

1 
	~"ã°/jemÆloc_ã°.h
"

4 
	$mÆl˘l_boﬁ_gë
(c⁄° *
«me
, 
boﬁ
 
ex≥˘ed
, c⁄° *
func
, 
löe
) {

5 
boﬁ
 
ﬁd
;

6 
size_t
 
sz
;

8 
sz
 = (
ﬁd
);

9 
	`as£π_d_eq
(
	`mÆl˘l
(
«me
, (*)&
ﬁd
, &
sz
, 
NULL
, 0), 0,

10 "%s():%d: U√x≥˘ed mÆl˘»ÁûuªÑódög %s", 
func
, 
löe
, 
«me
);

11 
	`as£π_b_eq
(
ﬁd
, 
ex≥˘ed
, "%s():%d: U√x≥˘ed %†vÆue", 
func
, 
löe
,

12 
«me
);

13 
	}
}

16 
	$mÆl˘l_boﬁ_£t
(c⁄° *
«me
, 
boﬁ
 
ﬁd_ex≥˘ed
, boﬁ 
vÆ_√w
,

17 c⁄° *
func
, 
löe
) {

18 
boﬁ
 
ﬁd
;

19 
size_t
 
sz
;

21 
sz
 = (
ﬁd
);

22 
	`as£π_d_eq
(
	`mÆl˘l
(
«me
, (*)&
ﬁd
, &
sz
, (*)&
vÆ_√w
,

23 (
vÆ_√w
)), 0,

24 "%s():%d: U√x≥˘ed mÆl˘»ÁûuªÑódög/wrôög %s", 
func
,

25 
löe
, 
«me
);

26 
	`as£π_b_eq
(
ﬁd
, 
ﬁd_ex≥˘ed
, "%s():%d: U√x≥˘ed %†vÆue", 
func
,

27 
löe
, 
«me
);

28 
	}
}

31 
	$mÆl˘l_¥of_a˘ive_gë_im∂
(
boﬁ
 
¥of_a˘ive_ﬁd_ex≥˘ed
, c⁄° *
func
,

32 
löe
) {

33 
	`mÆl˘l_boﬁ_gë
("¥of.a˘ive", 
¥of_a˘ive_ﬁd_ex≥˘ed
, 
func
, 
löe
);

34 
	}
}

35 
	#mÆl˘l_¥of_a˘ive_gë
(
a
) \

36 
	`mÆl˘l_¥of_a˘ive_gë_im∂
(
a
, 
__func__
, 
__LINE__
)

	)

39 
	$mÆl˘l_¥of_a˘ive_£t_im∂
(
boﬁ
 
¥of_a˘ive_ﬁd_ex≥˘ed
,

40 
boﬁ
 
¥of_a˘ive_√w
, c⁄° *
func
, 
löe
) {

41 
	`mÆl˘l_boﬁ_£t
("¥of.a˘ive", 
¥of_a˘ive_ﬁd_ex≥˘ed
,

42 
¥of_a˘ive_√w
, 
func
, 
löe
);

43 
	}
}

44 
	#mÆl˘l_¥of_a˘ive_£t
(
a
, 
b
) \

45 
	`mÆl˘l_¥of_a˘ive_£t_im∂
(
a
, 
b
, 
__func__
, 
__LINE__
)

	)

48 
	$mÆl˘l_thªad_¥of_a˘ive_gë_im∂
(
boﬁ
 
thªad_¥of_a˘ive_ﬁd_ex≥˘ed
,

49 c⁄° *
func
, 
löe
) {

50 
	`mÆl˘l_boﬁ_gë
("thªad.¥of.a˘ive", 
thªad_¥of_a˘ive_ﬁd_ex≥˘ed
,

51 
func
, 
löe
);

52 
	}
}

53 
	#mÆl˘l_thªad_¥of_a˘ive_gë
(
a
) \

54 
	`mÆl˘l_thªad_¥of_a˘ive_gë_im∂
(
a
, 
__func__
, 
__LINE__
)

	)

57 
	$mÆl˘l_thªad_¥of_a˘ive_£t_im∂
(
boﬁ
 
thªad_¥of_a˘ive_ﬁd_ex≥˘ed
,

58 
boﬁ
 
thªad_¥of_a˘ive_√w
, c⁄° *
func
, 
löe
) {

59 
	`mÆl˘l_boﬁ_£t
("thªad.¥of.a˘ive", 
thªad_¥of_a˘ive_ﬁd_ex≥˘ed
,

60 
thªad_¥of_a˘ive_√w
, 
func
, 
löe
);

61 
	}
}

62 
	#mÆl˘l_thªad_¥of_a˘ive_£t
(
a
, 
b
) \

63 
	`mÆl˘l_thªad_¥of_a˘ive_£t_im∂
(
a
, 
b
, 
__func__
, 
__LINE__
)

	)

66 
	$¥of_ßm∂ög_¥obe_im∂
(
boﬁ
 
ex≥˘_ßm∂e
, c⁄° *
func
, 
löe
) {

67 *
p
;

68 
size_t
 
ex≥˘ed_backåa˚s
 = 
ex≥˘_ßm∂e
 ? 1 : 0;

70 
	`as£π_zu_eq
(
	`¥of_bt_cou¡
(), 0, "%s():%d: Ex≥˘ed 0 backåa˚s", 
func
,

71 
löe
);

72 
p
 = 
	`mÆlocx
(1, 0);

73 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

74 
	`as£π_zu_eq
(
	`¥of_bt_cou¡
(), 
ex≥˘ed_backåa˚s
,

75 "%s():%d: U√x≥˘ed backåa˚ cou¡", 
func
, 
löe
);

76 
	`dÆlocx
(
p
, 0);

77 
	}
}

78 
	#¥of_ßm∂ög_¥obe
(
a
) \

79 
	`¥of_ßm∂ög_¥obe_im∂
(
a
, 
__func__
, 
__LINE__
)

	)

81 
	$TEST_BEGIN
(
ã°_¥of_a˘ive
) {

82 
	`ã°_skù_if
(!
c⁄fig_¥of
);

84 
	`mÆl˘l_¥of_a˘ive_gë
(
åue
);

85 
	`mÆl˘l_thªad_¥of_a˘ive_gë
(
Ál£
);

87 
	`mÆl˘l_¥of_a˘ive_£t
(
åue
,Årue);

88 
	`mÆl˘l_thªad_¥of_a˘ive_£t
(
Ál£
, false);

90 
	`¥of_ßm∂ög_¥obe
(
Ál£
);

92 
	`mÆl˘l_¥of_a˘ive_£t
(
åue
, 
Ál£
);

93 
	`mÆl˘l_thªad_¥of_a˘ive_£t
(
Ál£
, false);

95 
	`¥of_ßm∂ög_¥obe
(
Ál£
);

97 
	`mÆl˘l_¥of_a˘ive_£t
(
Ál£
, false);

98 
	`mÆl˘l_thªad_¥of_a˘ive_£t
(
Ál£
, 
åue
);

100 
	`¥of_ßm∂ög_¥obe
(
Ál£
);

102 
	`mÆl˘l_¥of_a˘ive_£t
(
Ál£
, 
åue
);

103 
	`mÆl˘l_thªad_¥of_a˘ive_£t
(
åue
,Årue);

105 
	`¥of_ßm∂ög_¥obe
(
åue
);

108 
	`mÆl˘l_¥of_a˘ive_£t
(
åue
,Årue);

109 
	`mÆl˘l_thªad_¥of_a˘ive_£t
(
åue
, 
Ál£
);

110 
	}
}

111 
TEST_END


114 
	$maö
() {

115  
	`ã°_no_ªíå™cy
(

116 
ã°_¥of_a˘ive
);

117 
	}
}

	@test/unit/prof_gdump.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
boﬁ
 
	gdid_¥of_dump_›í
;

6 
	$¥of_dump_›í_öãr˚±
(
boﬁ
 
¥›ag©e_îr
, c⁄° *
fûíame
) {

7 
fd
;

9 
did_¥of_dump_›í
 = 
åue
;

11 
fd
 = 
	`›í
("/dev/nuŒ", 
O_WRONLY
);

12 
	`as£π_d_√
(
fd
, -1, "Unexpected open() failure");

14  
fd
;

15 
	}
}

17 
	$TEST_BEGIN
(
ã°_gdump
) {

18 
boﬁ
 
a˘ive
, 
gdump
, 
gdump_ﬁd
;

19 *
p
, *
q
, *
r
, *
s
;

20 
size_t
 
sz
;

22 
	`ã°_skù_if
(!
c⁄fig_¥of
);

24 
a˘ive
 = 
åue
;

25 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.a˘ive", 
NULL
, NULL, (*)&
a˘ive
,

26 (
a˘ive
)), 0,

29 
¥of_dump_›í
 = 
¥of_dump_›í_öãr˚±
;

31 
did_¥of_dump_›í
 = 
Ál£
;

32 
p
 = 
	`mÆlocx
((1U << 
LG_LARGE_MINCLASS
), 0);

33 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

34 
	`as£π_åue
(
did_¥of_dump_›í
, "ExpectedáÖrofile dump");

36 
did_¥of_dump_›í
 = 
Ál£
;

37 
q
 = 
	`mÆlocx
((1U << 
LG_LARGE_MINCLASS
), 0);

38 
	`as£π_±r_nŸ_nuŒ
(
q
, "Unexpected mallocx() failure");

39 
	`as£π_åue
(
did_¥of_dump_›í
, "ExpectedáÖrofile dump");

41 
gdump
 = 
Ál£
;

42 
sz
 = (
gdump_ﬁd
);

43 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.gdump", (*)&
gdump_ﬁd
, &
sz
,

44 (*)&
gdump
, (gdump)), 0,

46 
	`as£π
(
gdump_ﬁd
);

47 
did_¥of_dump_›í
 = 
Ál£
;

48 
r
 = 
	`mÆlocx
((1U << 
LG_LARGE_MINCLASS
), 0);

49 
	`as£π_±r_nŸ_nuŒ
(
q
, "Unexpected mallocx() failure");

50 
	`as£π_Ál£
(
did_¥of_dump_›í
, "UnexpectedÖrofile dump");

52 
gdump
 = 
åue
;

53 
sz
 = (
gdump_ﬁd
);

54 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.gdump", (*)&
gdump_ﬁd
, &
sz
,

55 (*)&
gdump
, (gdump)), 0,

57 
	`as£π
(!
gdump_ﬁd
);

58 
did_¥of_dump_›í
 = 
Ál£
;

59 
s
 = 
	`mÆlocx
((1U << 
LG_LARGE_MINCLASS
), 0);

60 
	`as£π_±r_nŸ_nuŒ
(
q
, "Unexpected mallocx() failure");

61 
	`as£π_åue
(
did_¥of_dump_›í
, "ExpectedáÖrofile dump");

63 
	`dÆlocx
(
p
, 0);

64 
	`dÆlocx
(
q
, 0);

65 
	`dÆlocx
(
r
, 0);

66 
	`dÆlocx
(
s
, 0);

67 
	}
}

68 
TEST_END


71 
	$maö
() {

72  
	`ã°_no_ªíå™cy
(

73 
ã°_gdump
);

74 
	}
}

	@test/unit/prof_idump.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
boﬁ
 
	gdid_¥of_dump_›í
;

6 
	$¥of_dump_›í_öãr˚±
(
boﬁ
 
¥›ag©e_îr
, c⁄° *
fûíame
) {

7 
fd
;

9 
did_¥of_dump_›í
 = 
åue
;

11 
fd
 = 
	`›í
("/dev/nuŒ", 
O_WRONLY
);

12 
	`as£π_d_√
(
fd
, -1, "Unexpected open() failure");

14  
fd
;

15 
	}
}

17 
	$TEST_BEGIN
(
ã°_idump
) {

18 
boﬁ
 
a˘ive
;

19 *
p
;

21 
	`ã°_skù_if
(!
c⁄fig_¥of
);

23 
a˘ive
 = 
åue
;

24 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.a˘ive", 
NULL
, NULL, (*)&
a˘ive
,

25 (
a˘ive
)), 0,

28 
¥of_dump_›í
 = 
¥of_dump_›í_öãr˚±
;

30 
did_¥of_dump_›í
 = 
Ál£
;

31 
p
 = 
	`mÆlocx
(1, 0);

32 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

33 
	`dÆlocx
(
p
, 0);

34 
	`as£π_åue
(
did_¥of_dump_›í
, "ExpectedáÖrofile dump");

35 
	}
}

36 
TEST_END


39 
	$maö
() {

40  
	`ã°
(

41 
ã°_idump
);

42 
	}
}

	@test/unit/prof_reset.c

1 
	~"ã°/jemÆloc_ã°.h
"

4 
	$¥of_dump_›í_öãr˚±
(
boﬁ
 
¥›ag©e_îr
, c⁄° *
fûíame
) {

5 
fd
;

7 
fd
 = 
	`›í
("/dev/nuŒ", 
O_WRONLY
);

8 
	`as£π_d_√
(
fd
, -1, "Unexpected open() failure");

10  
fd
;

11 
	}
}

14 
	$£t_¥of_a˘ive
(
boﬁ
 
a˘ive
) {

15 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.a˘ive", 
NULL
, NULL, (*)&
a˘ive
,

16 (
a˘ive
)), 0, "Unexpected mallctl failure");

17 
	}
}

19 
size_t


20 
	$gë_lg_¥of_ßm∂e
() {

21 
size_t
 
lg_¥of_ßm∂e
;

22 
size_t
 
sz
 = (size_t);

24 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.lg_ßm∂e", (*)&
lg_¥of_ßm∂e
, &
sz
,

25 
NULL
, 0), 0,

27  
lg_¥of_ßm∂e
;

28 
	}
}

31 
	$do_¥of_ª£t
(
size_t
 
lg_¥of_ßm∂e
) {

32 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.ª£t", 
NULL
, NULL,

33 (*)&
lg_¥of_ßm∂e
, (
size_t
)), 0,

35 
	`as£π_zu_eq
(
lg_¥of_ßm∂e
, 
	`gë_lg_¥of_ßm∂e
(),

37 
	}
}

39 
	$TEST_BEGIN
(
ã°_¥of_ª£t_basic
) {

40 
size_t
 
lg_¥of_ßm∂e_‹ig
, 
lg_¥of_ßm∂e
, 
lg_¥of_ßm∂e_√xt
;

41 
size_t
 
sz
;

42 
i
;

44 
	`ã°_skù_if
(!
c⁄fig_¥of
);

46 
sz
 = (
size_t
);

47 
	`as£π_d_eq
(
	`mÆl˘l
("›t.lg_¥of_ßm∂e", (*)&
lg_¥of_ßm∂e_‹ig
,

48 &
sz
, 
NULL
, 0), 0,

50 
	`as£π_zu_eq
(
lg_¥of_ßm∂e_‹ig
, 0,

52 
lg_¥of_ßm∂e
 = 
	`gë_lg_¥of_ßm∂e
();

53 
	`as£π_zu_eq
(
lg_¥of_ßm∂e_‹ig
, 
lg_¥of_ßm∂e
,

58 
i
 = 0; i < 2; i++) {

59 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.ª£t", 
NULL
, NULL, NULL, 0), 0,

61 
lg_¥of_ßm∂e
 = 
	`gë_lg_¥of_ßm∂e
();

62 
	`as£π_zu_eq
(
lg_¥of_ßm∂e_‹ig
, 
lg_¥of_ßm∂e
,

67 
lg_¥of_ßm∂e_√xt
 = 1;

68 
i
 = 0; i < 2; i++) {

69 
	`do_¥of_ª£t
(
lg_¥of_ßm∂e_√xt
);

70 
lg_¥of_ßm∂e
 = 
	`gë_lg_¥of_ßm∂e
();

71 
	`as£π_zu_eq
(
lg_¥of_ßm∂e
, 
lg_¥of_ßm∂e_√xt
,

73 
lg_¥of_ßm∂e_√xt
 = 
lg_¥of_ßm∂e_‹ig
;

77 
lg_¥of_ßm∂e
 = 
	`gë_lg_¥of_ßm∂e
();

78 
	`as£π_zu_eq
(
lg_¥of_ßm∂e_‹ig
, 
lg_¥of_ßm∂e
,

81 
	}
}

82 
TEST_END


84 
boﬁ
 
	g¥of_dump_hódî_öãr˚±ed
 = 
Ál£
;

85 
¥of_˙t_t
 
	g˙t_Æl_c›y
 = {0, 0, 0, 0};

86 
boﬁ


87 
	$¥of_dump_hódî_öãr˚±
(
tsdn_t
 *
tsdn
, 
boﬁ
 
¥›ag©e_îr
,

88 c⁄° 
¥of_˙t_t
 *
˙t_Æl
) {

89 
¥of_dump_hódî_öãr˚±ed
 = 
åue
;

90 
	`mem˝y
(&
˙t_Æl_c›y
, 
˙t_Æl
, (
¥of_˙t_t
));

92  
Ál£
;

93 
	}
}

95 
	$TEST_BEGIN
(
ã°_¥of_ª£t_˛ónup
) {

96 *
p
;

97 
¥of_dump_hódî_t
 *
¥of_dump_hódî_‹ig
;

99 
	`ã°_skù_if
(!
c⁄fig_¥of
);

101 
	`£t_¥of_a˘ive
(
åue
);

103 
	`as£π_zu_eq
(
	`¥of_bt_cou¡
(), 0, "Expected 0 backtraces");

104 
p
 = 
	`mÆlocx
(1, 0);

105 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

106 
	`as£π_zu_eq
(
	`¥of_bt_cou¡
(), 1, "Expected 1 backtrace");

108 
¥of_dump_hódî_‹ig
 = 
¥of_dump_hódî
;

109 
¥of_dump_hódî
 = 
¥of_dump_hódî_öãr˚±
;

110 
	`as£π_Ál£
(
¥of_dump_hódî_öãr˚±ed
, "Unexpected intercept");

112 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.dump", 
NULL
, NULL, NULL, 0),

114 
	`as£π_åue
(
¥of_dump_hódî_öãr˚±ed
, "Expected intercept");

115 
	`as£π_u64_eq
(
˙t_Æl_c›y
.
curobjs
, 1, "Expected 1állocation");

117 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.ª£t", 
NULL
, NULL, NULL, 0), 0,

119 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.dump", 
NULL
, NULL, NULL, 0),

121 
	`as£π_u64_eq
(
˙t_Æl_c›y
.
curobjs
, 0, "Expected 0állocations");

122 
	`as£π_zu_eq
(
	`¥of_bt_cou¡
(), 1, "Expected 1 backtrace");

124 
¥of_dump_hódî
 = 
¥of_dump_hódî_‹ig
;

126 
	`dÆlocx
(
p
, 0);

127 
	`as£π_zu_eq
(
	`¥of_bt_cou¡
(), 0, "Expected 0 backtraces");

129 
	`£t_¥of_a˘ive
(
Ál£
);

130 
	}
}

131 
	gTEST_END


133 
	#NTHREADS
 4

	)

134 
	#NALLOCS_PER_THREAD
 (1U << 13)

	)

135 
	#OBJ_RING_BUF_COUNT
 1531

	)

136 
	#RESET_INTERVAL
 (1U << 10)

	)

137 
	#DUMP_INTERVAL
 3677

	)

139 
	$thd_°¨t
(*
v¨g
) {

140 
thd_öd
 = *(*)
v¨g
;

141 
i
;

142 *
objs
[
OBJ_RING_BUF_COUNT
];

144 
	`mem£t
(
objs
, 0, (objs));

146 
i
 = 0; i < 
NALLOCS_PER_THREAD
; i++) {

147 i‡(
i
 % 
RESET_INTERVAL
 == 0) {

148 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.ª£t", 
NULL
, NULL, NULL, 0),

153 i‡(
i
 % 
DUMP_INTERVAL
 == 0) {

154 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.dump", 
NULL
, NULL, NULL, 0),

159 **
µ
 = &
objs
[
i
 % 
OBJ_RING_BUF_COUNT
];

160 i‡(*
µ
 !
NULL
) {

161 
	`dÆlocx
(*
µ
, 0);

162 *
µ
 = 
NULL
;

164 *
µ
 = 
	`bèŒoc
(1, 
thd_öd
*
NALLOCS_PER_THREAD
 + 
i
);

165 
	`as£π_±r_nŸ_nuŒ
(*
µ
,

171 
i
 = 0; i < 
OBJ_RING_BUF_COUNT
; i++) {

172 **
µ
 = &
objs
[
i
 % 
OBJ_RING_BUF_COUNT
];

173 i‡(*
µ
 !
NULL
) {

174 
	`dÆlocx
(*
µ
, 0);

175 *
µ
 = 
NULL
;

179  
NULL
;

180 
	}
}

182 
	$TEST_BEGIN
(
ã°_¥of_ª£t
) {

183 
size_t
 
lg_¥of_ßm∂e_‹ig
;

184 
thd_t
 
thds
[
NTHREADS
];

185 
thd_¨gs
[
NTHREADS
];

186 
i
;

187 
size_t
 
bt_cou¡
, 
td©a_cou¡
;

189 
	`ã°_skù_if
(!
c⁄fig_¥of
);

191 
bt_cou¡
 = 
	`¥of_bt_cou¡
();

192 
	`as£π_zu_eq
(
bt_cou¡
, 0,

194 
td©a_cou¡
 = 
	`¥of_td©a_cou¡
();

196 
lg_¥of_ßm∂e_‹ig
 = 
	`gë_lg_¥of_ßm∂e
();

197 
	`do_¥of_ª£t
(5);

199 
	`£t_¥of_a˘ive
(
åue
);

201 
i
 = 0; i < 
NTHREADS
; i++) {

202 
thd_¨gs
[
i
] = i;

203 
	`thd_¸óã
(&
thds
[
i
], 
thd_°¨t
, (*)&
thd_¨gs
[i]);

205 
i
 = 0; i < 
NTHREADS
; i++) {

206 
	`thd_joö
(
thds
[
i
], 
NULL
);

209 
	`as£π_zu_eq
(
	`¥of_bt_cou¡
(), 
bt_cou¡
,

211 
	`as£π_zu_eq
(
	`¥of_td©a_cou¡
(), 
td©a_cou¡
,

214 
	`£t_¥of_a˘ive
(
Ál£
);

216 
	`do_¥of_ª£t
(
lg_¥of_ßm∂e_‹ig
);

217 
	}
}

218 
	gTEST_END


219 #unde‡
NTHREADS


220 #unde‡
NALLOCS_PER_THREAD


221 #unde‡
OBJ_RING_BUF_COUNT


222 #unde‡
RESET_INTERVAL


223 #unde‡
DUMP_INTERVAL


226 
	#NITER
 10

	)

227 
	$TEST_BEGIN
(
ã°_xÆlocx
) {

228 
size_t
 
lg_¥of_ßm∂e_‹ig
;

229 
i
;

230 *
±rs
[
NITER
];

232 
	`ã°_skù_if
(!
c⁄fig_¥of
);

234 
lg_¥of_ßm∂e_‹ig
 = 
	`gë_lg_¥of_ßm∂e
();

235 
	`£t_¥of_a˘ive
(
åue
);

238 
	`do_¥of_ª£t
(0);

240 
i
 = 0; i < 
NITER
; i++) {

241 *
p
;

242 
size_t
 
sz
, 
nsz
;

245 
	`do_¥of_ª£t
(0);

248 
p
 = 
±rs
[
i
] = 
	`mÆlocx
(1, 0);

249 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

252 
	`do_¥of_ª£t
(0);

255 
sz
 = 
	`ßŒocx
(
p
, 0);

256 
	`as£π_zu_eq
(
	`xÆlocx
(
p
, 
sz
, 0, 0), sz,

260 
nsz
 = 
	`«Œocx
(
sz
+1, 0);

261 
	`as£π_zu_eq
(
	`xÆlocx
(
p
, 
nsz
, 0, 0), 
sz
,

265 
i
 = 0; i < 
NITER
; i++) {

267 
	`dÆlocx
(
±rs
[
i
], 0);

270 
	`£t_¥of_a˘ive
(
Ál£
);

271 
	`do_¥of_ª£t
(
lg_¥of_ßm∂e_‹ig
);

272 
	}
}

273 
	gTEST_END


274 #unde‡
NITER


277 
	$maö
() {

279 
¥of_dump_›í
 = 
¥of_dump_›í_öãr˚±
;

281  
	`ã°_no_ªíå™cy
(

282 
ã°_¥of_ª£t_basic
,

283 
ã°_¥of_ª£t_˛ónup
,

284 
ã°_¥of_ª£t
,

285 
ã°_xÆlocx
);

286 
	}
}

	@test/unit/prof_tctx.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	$TEST_BEGIN
(
ã°_¥of_ªÆloc
) {

4 
tsdn_t
 *
tsdn
;

5 
Êags
;

6 *
p
, *
q
;

7 
¥of_t˘x_t
 *
t˘x_p
, *
t˘x_q
;

8 
uöt64_t
 
curobjs_0
, 
curobjs_1
, 
curobjs_2
, 
curobjs_3
;

10 
	`ã°_skù_if
(!
c⁄fig_¥of
);

12 
tsdn
 = 
	`tsdn_„tch
();

13 
Êags
 = 
MALLOCX_TCACHE_NONE
;

15 
	`¥of_˙t_Æl
(&
curobjs_0
, 
NULL
, NULL, NULL);

16 
p
 = 
	`mÆlocx
(1024, 
Êags
);

17 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

18 
t˘x_p
 = 
	`¥of_t˘x_gë
(
tsdn
, 
p
, 
NULL
);

19 
	`as£π_±r_√
(
t˘x_p
, (
¥of_t˘x_t
 *)(
uöçå_t
)1U,

21 
	`¥of_˙t_Æl
(&
curobjs_1
, 
NULL
, NULL, NULL);

22 
	`as£π_u64_eq
(
curobjs_0
 + 1, 
curobjs_1
,

25 
q
 = 
	`øŒocx
(
p
, 2048, 
Êags
);

26 
	`as£π_±r_√
(
p
, 
q
, "Expected move");

27 
	`as£π_±r_nŸ_nuŒ
(
p
, "UnexpectedÑmallocx() failure");

28 
t˘x_q
 = 
	`¥of_t˘x_gë
(
tsdn
, 
q
, 
NULL
);

29 
	`as£π_±r_√
(
t˘x_q
, (
¥of_t˘x_t
 *)(
uöçå_t
)1U,

31 
	`¥of_˙t_Æl
(&
curobjs_2
, 
NULL
, NULL, NULL);

32 
	`as£π_u64_eq
(
curobjs_1
, 
curobjs_2
,

35 
	`dÆlocx
(
q
, 
Êags
);

36 
	`¥of_˙t_Æl
(&
curobjs_3
, 
NULL
, NULL, NULL);

37 
	`as£π_u64_eq
(
curobjs_0
, 
curobjs_3
,

39 
	}
}

40 
TEST_END


43 
	$maö
() {

44  
	`ã°_no_ªíå™cy
(

45 
ã°_¥of_ªÆloc
);

46 
	}
}

	@test/unit/prof_thread_name.c

1 
	~"ã°/jemÆloc_ã°.h
"

4 
	$mÆl˘l_thªad_«me_gë_im∂
(c⁄° *
thªad_«me_ex≥˘ed
, c⁄° *
func
,

5 
löe
) {

6 c⁄° *
thªad_«me_ﬁd
;

7 
size_t
 
sz
;

9 
sz
 = (
thªad_«me_ﬁd
);

10 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.¥of.«me", (*)&
thªad_«me_ﬁd
, &
sz
,

11 
NULL
, 0), 0,

13 
func
, 
löe
);

14 
	`as£π_°r_eq
(
thªad_«me_ﬁd
, 
thªad_«me_ex≥˘ed
,

15 "%s():%d: U√x≥˘edÅhªad.¥of.«mêvÆue", 
func
, 
löe
);

16 
	}
}

17 
	#mÆl˘l_thªad_«me_gë
(
a
) \

18 
	`mÆl˘l_thªad_«me_gë_im∂
(
a
, 
__func__
, 
__LINE__
)

	)

21 
	$mÆl˘l_thªad_«me_£t_im∂
(c⁄° *
thªad_«me
, c⁄° *
func
,

22 
löe
) {

23 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.¥of.«me", 
NULL
, NULL,

24 (*)&
thªad_«me
, (thread_name)), 0,

26 
func
, 
löe
);

27 
	`mÆl˘l_thªad_«me_gë_im∂
(
thªad_«me
, 
func
, 
löe
);

28 
	}
}

29 
	#mÆl˘l_thªad_«me_£t
(
a
) \

30 
	`mÆl˘l_thªad_«me_£t_im∂
(
a
, 
__func__
, 
__LINE__
)

	)

32 
	$TEST_BEGIN
(
ã°_¥of_thªad_«me_vÆid©i⁄
) {

33 c⁄° *
thªad_«me
;

35 
	`ã°_skù_if
(!
c⁄fig_¥of
);

37 
	`mÆl˘l_thªad_«me_gë
("");

38 
	`mÆl˘l_thªad_«me_£t
("hiÅhere");

41 
thªad_«me
 = 
NULL
;

42 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.¥of.«me", 
NULL
, NULL,

43 (*)&
thªad_«me
, —hªad_«me)), 
EFAULT
,

45 
thªad_«me
);

48 
thªad_«me
 = "hi\nthere";

49 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.¥of.«me", 
NULL
, NULL,

50 (*)&
thªad_«me
, —hªad_«me)), 
EFAULT
,

52 
thªad_«me
);

56 c⁄° *
thªad_«me_ﬁd
;

57 
size_t
 
sz
;

59 
sz
 = (
thªad_«me_ﬁd
);

60 
	`as£π_d_eq
(
	`mÆl˘l
("thread.prof.name",

61 (*)&
thªad_«me_ﬁd
, &
sz
, (*)&
thªad_«me
,

62 (
thªad_«me
)), 
EPERM
,

64 "thªad.¥of.«me", 
thªad_«me
);

67 
	`mÆl˘l_thªad_«me_£t
("");

68 
	}
}

69 
	gTEST_END


71 
	#NTHREADS
 4

	)

72 
	#NRESET
 25

	)

74 
	$thd_°¨t
(*
v¨g
) {

75 
thd_öd
 = *(*)
v¨g
;

76 
thªad_«me
[16] = "";

77 
i
;

79 
	`mÆloc_¢¥ötf
(
thªad_«me
, —hªad_«me), "thªad %u", 
thd_öd
);

81 
	`mÆl˘l_thªad_«me_gë
("");

82 
	`mÆl˘l_thªad_«me_£t
(
thªad_«me
);

84 
i
 = 0; i < 
NRESET
; i++) {

85 
	`as£π_d_eq
(
	`mÆl˘l
("¥of.ª£t", 
NULL
, NULL, NULL, 0), 0,

87 
	`mÆl˘l_thªad_«me_gë
(
thªad_«me
);

90 
	`mÆl˘l_thªad_«me_£t
(
thªad_«me
);

91 
	`mÆl˘l_thªad_«me_£t
("");

93  
NULL
;

94 
	}
}

96 
	$TEST_BEGIN
(
ã°_¥of_thªad_«me_thªaded
) {

97 
thd_t
 
thds
[
NTHREADS
];

98 
thd_¨gs
[
NTHREADS
];

99 
i
;

101 
	`ã°_skù_if
(!
c⁄fig_¥of
);

103 
i
 = 0; i < 
NTHREADS
; i++) {

104 
thd_¨gs
[
i
] = i;

105 
	`thd_¸óã
(&
thds
[
i
], 
thd_°¨t
, (*)&
thd_¨gs
[i]);

107 
i
 = 0; i < 
NTHREADS
; i++) {

108 
	`thd_joö
(
thds
[
i
], 
NULL
);

110 
	}
}

111 
	gTEST_END


112 #unde‡
NTHREADS


113 #unde‡
NRESET


116 
	$maö
() {

117  
	`ã°
(

118 
ã°_¥of_thªad_«me_vÆid©i⁄
,

119 
ã°_¥of_thªad_«me_thªaded
);

120 
	}
}

	@test/unit/ql.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/ql.h
"

6 
	#NENTRIES
 9

	)

8 
li°_s
 
	tli°_t
;

9 
	$ql_hód
(
	tli°_t
Ë
	tli°_hód_t
;

11 
	sli°_s
 {

12 
	`ql_ñm
(
li°_t
Ë
lök
;

13 
id
;

17 
	$ã°_em±y_li°
(
li°_hód_t
 *
hód
) {

18 
li°_t
 *
t
;

19 
i
;

21 
	`as£π_±r_nuŒ
(
	`ql_fú°
(
hód
), "UnexpectedÉlement forÉmptyÜist");

22 
	`as£π_±r_nuŒ
(
	`ql_œ°
(
hód
, 
lök
),

25 
i
 = 0;

26 
	`ql_f‹óch
(
t
, 
hód
, 
lök
) {

27 
i
++;

29 
	`as£π_u_eq
(
i
, 0, "UnexpectedÉlement forÉmptyÜist");

31 
i
 = 0;

32 
	`ql_ªvî£_f‹óch
(
t
, 
hód
, 
lök
) {

33 
i
++;

35 
	`as£π_u_eq
(
i
, 0, "UnexpectedÉlement forÉmptyÜist");

36 
	}
}

38 
	$TEST_BEGIN
(
ã°_ql_em±y
) {

39 
li°_hód_t
 
hód
;

41 
	`ql_√w
(&
hód
);

42 
	`ã°_em±y_li°
(&
hód
);

43 
	}
}

44 
TEST_END


47 
	$öô_íåõs
(
li°_t
 *
íåõs
, 
√¡rõs
) {

48 
i
;

50 
i
 = 0; i < 
√¡rõs
; i++) {

51 
íåõs
[
i
].
id
 = 'a' + i;

52 
	`ql_ñm_√w
(&
íåõs
[
i
], 
lök
);

54 
	}
}

57 
	$ã°_íåõs_li°
(
li°_hód_t
 *
hód
, 
li°_t
 *
íåõs
, 
√¡rõs
) {

58 
li°_t
 *
t
;

59 
i
;

61 
	`as£π_c_eq
(
	`ql_fú°
(
hód
)->
id
, 
íåõs
[0].id, "Element id mismatch");

62 
	`as£π_c_eq
(
	`ql_œ°
(
hód
, 
lök
)->
id
, 
íåõs
[
√¡rõs
-1].id,

65 
i
 = 0;

66 
	`ql_f‹óch
(
t
, 
hód
, 
lök
) {

67 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[
i
].id, "Element id mismatch");

68 
i
++;

71 
i
 = 0;

72 
	`ql_ªvî£_f‹óch
(
t
, 
hód
, 
lök
) {

73 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[
√¡rõs
-
i
-1].id,

75 
i
++;

78 
i
 = 0; i < 
√¡rõs
-1; i++) {

79 
t
 = 
	`ql_√xt
(
hód
, &
íåõs
[
i
], 
lök
);

80 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[
i
+1].id, "Element id mismatch");

82 
	`as£π_±r_nuŒ
(
	`ql_√xt
(
hód
, &
íåõs
[
√¡rõs
-1], 
lök
),

85 
	`as£π_±r_nuŒ
(
	`ql_¥ev
(
hód
, &
íåõs
[0], 
lök
), "UnexpectedÉlement");

86 
i
 = 1; i < 
√¡rõs
; i++) {

87 
t
 = 
	`ql_¥ev
(
hód
, &
íåõs
[
i
], 
lök
);

88 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[
i
-1].id, "Element id mismatch");

90 
	}
}

92 
	$TEST_BEGIN
(
ã°_ql_èû_ö£π
) {

93 
li°_hód_t
 
hód
;

94 
li°_t
 
íåõs
[
NENTRIES
];

95 
i
;

97 
	`ql_√w
(&
hód
);

98 
	`öô_íåõs
(
íåõs
, ”¡rõs)/(
li°_t
));

99 
i
 = 0; i < 
NENTRIES
; i++) {

100 
	`ql_èû_ö£π
(&
hód
, &
íåõs
[
i
], 
lök
);

103 
	`ã°_íåõs_li°
(&
hód
, 
íåõs
, 
NENTRIES
);

104 
	}
}

105 
TEST_END


107 
	$TEST_BEGIN
(
ã°_ql_èû_ªmove
) {

108 
li°_hód_t
 
hód
;

109 
li°_t
 
íåõs
[
NENTRIES
];

110 
i
;

112 
	`ql_√w
(&
hód
);

113 
	`öô_íåõs
(
íåõs
, ”¡rõs)/(
li°_t
));

114 
i
 = 0; i < 
NENTRIES
; i++) {

115 
	`ql_èû_ö£π
(&
hód
, &
íåõs
[
i
], 
lök
);

118 
i
 = 0; i < 
NENTRIES
; i++) {

119 
	`ã°_íåõs_li°
(&
hód
, 
íåõs
, 
NENTRIES
-
i
);

120 
	`ql_èû_ªmove
(&
hód
, 
li°_t
, 
lök
);

122 
	`ã°_em±y_li°
(&
hód
);

123 
	}
}

124 
TEST_END


126 
	$TEST_BEGIN
(
ã°_ql_hód_ö£π
) {

127 
li°_hód_t
 
hód
;

128 
li°_t
 
íåõs
[
NENTRIES
];

129 
i
;

131 
	`ql_√w
(&
hód
);

132 
	`öô_íåõs
(
íåõs
, ”¡rõs)/(
li°_t
));

133 
i
 = 0; i < 
NENTRIES
; i++) {

134 
	`ql_hód_ö£π
(&
hód
, &
íåõs
[
NENTRIES
-
i
-1], 
lök
);

137 
	`ã°_íåõs_li°
(&
hód
, 
íåõs
, 
NENTRIES
);

138 
	}
}

139 
TEST_END


141 
	$TEST_BEGIN
(
ã°_ql_hód_ªmove
) {

142 
li°_hód_t
 
hód
;

143 
li°_t
 
íåõs
[
NENTRIES
];

144 
i
;

146 
	`ql_√w
(&
hód
);

147 
	`öô_íåõs
(
íåõs
, ”¡rõs)/(
li°_t
));

148 
i
 = 0; i < 
NENTRIES
; i++) {

149 
	`ql_hód_ö£π
(&
hód
, &
íåõs
[
NENTRIES
-
i
-1], 
lök
);

152 
i
 = 0; i < 
NENTRIES
; i++) {

153 
	`ã°_íåõs_li°
(&
hód
, &
íåõs
[
i
], 
NENTRIES
-i);

154 
	`ql_hód_ªmove
(&
hód
, 
li°_t
, 
lök
);

156 
	`ã°_em±y_li°
(&
hód
);

157 
	}
}

158 
TEST_END


160 
	$TEST_BEGIN
(
ã°_ql_ö£π
) {

161 
li°_hód_t
 
hód
;

162 
li°_t
 
íåõs
[8];

163 
li°_t
 *
a
, *
b
, *
c
, *
d
, *
e
, *
f
, *
g
, *
h
;

165 
	`ql_√w
(&
hód
);

166 
	`öô_íåõs
(
íåõs
, ”¡rõs)/(
li°_t
));

167 
a
 = &
íåõs
[0];

168 
b
 = &
íåõs
[1];

169 
c
 = &
íåõs
[2];

170 
d
 = &
íåõs
[3];

171 
e
 = &
íåõs
[4];

172 
f
 = &
íåõs
[5];

173 
g
 = &
íåõs
[6];

174 
h
 = &
íåõs
[7];

182 
	`ql_èû_ö£π
(&
hód
, 
f
, 
lök
);

183 
	`ql_bef‹e_ö£π
(&
hód
, 
f
, 
b
, 
lök
);

184 
	`ql_bef‹e_ö£π
(&
hód
, 
f
, 
c
, 
lök
);

185 
	`ql_a·î_ö£π
(
f
, 
h
, 
lök
);

186 
	`ql_a·î_ö£π
(
f
, 
g
, 
lök
);

187 
	`ql_bef‹e_ö£π
(&
hód
, 
b
, 
a
, 
lök
);

188 
	`ql_a·î_ö£π
(
c
, 
d
, 
lök
);

189 
	`ql_bef‹e_ö£π
(&
hód
, 
f
, 
e
, 
lök
);

191 
	`ã°_íåõs_li°
(&
hód
, 
íåõs
, ”¡rõs)/(
li°_t
));

192 
	}
}

193 
TEST_END


196 
	$maö
() {

197  
	`ã°
(

198 
ã°_ql_em±y
,

199 
ã°_ql_èû_ö£π
,

200 
ã°_ql_èû_ªmove
,

201 
ã°_ql_hód_ö£π
,

202 
ã°_ql_hód_ªmove
,

203 
ã°_ql_ö£π
);

204 
	}
}

	@test/unit/qr.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/qr.h
"

6 
	#NENTRIES
 9

	)

8 
	#SPLIT_INDEX
 5

	)

10 
rög_s
 
	trög_t
;

12 
	srög_s
 {

13 
qr
(
rög_t
Ë
	mlök
;

14 
	mid
;

18 
	$öô_íåõs
(
rög_t
 *
íåõs
) {

19 
i
;

21 
i
 = 0; i < 
NENTRIES
; i++) {

22 
	`qr_√w
(&
íåõs
[
i
], 
lök
);

23 
íåõs
[
i
].
id
 = 'a' + i;

25 
	}
}

28 
	$ã°_ödïídít_íåõs
(
rög_t
 *
íåõs
) {

29 
rög_t
 *
t
;

30 
i
, 
j
;

32 
i
 = 0; i < 
NENTRIES
; i++) {

33 
j
 = 0;

34 
	`qr_f‹óch
(
t
, &
íåõs
[
i
], 
lök
) {

35 
j
++;

37 
	`as£π_u_eq
(
j
, 1,

41 
i
 = 0; i < 
NENTRIES
; i++) {

42 
j
 = 0;

43 
	`qr_ªvî£_f‹óch
(
t
, &
íåõs
[
i
], 
lök
) {

44 
j
++;

46 
	`as£π_u_eq
(
j
, 1,

50 
i
 = 0; i < 
NENTRIES
; i++) {

51 
t
 = 
	`qr_√xt
(&
íåõs
[
i
], 
lök
);

52 
	`as£π_±r_eq
(
t
, &
íåõs
[
i
],

56 
i
 = 0; i < 
NENTRIES
; i++) {

57 
t
 = 
	`qr_¥ev
(&
íåõs
[
i
], 
lök
);

58 
	`as£π_±r_eq
(
t
, &
íåõs
[
i
],

62 
	}
}

64 
	$TEST_BEGIN
(
ã°_qr_⁄e
) {

65 
rög_t
 
íåõs
[
NENTRIES
];

67 
	`öô_íåõs
(
íåõs
);

68 
	`ã°_ödïídít_íåõs
(
íåõs
);

69 
	}
}

70 
TEST_END


73 
	$ã°_íåõs_rög
(
rög_t
 *
íåõs
) {

74 
rög_t
 *
t
;

75 
i
, 
j
;

77 
i
 = 0; i < 
NENTRIES
; i++) {

78 
j
 = 0;

79 
	`qr_f‹óch
(
t
, &
íåõs
[
i
], 
lök
) {

80 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[(
i
+
j
Ë% 
NENTRIES
].id,

82 
j
++;

85 
i
 = 0; i < 
NENTRIES
; i++) {

86 
j
 = 0;

87 
	`qr_ªvî£_f‹óch
(
t
, &
íåõs
[
i
], 
lök
) {

88 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[(
NENTRIES
+
i
-
j
-1) %

89 
NENTRIES
].
id
, "Element id mismatch");

90 
j
++;

93 
i
 = 0; i < 
NENTRIES
; i++) {

94 
t
 = 
	`qr_√xt
(&
íåõs
[
i
], 
lök
);

95 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[(
i
+1Ë% 
NENTRIES
].id,

98 
i
 = 0; i < 
NENTRIES
; i++) {

99 
t
 = 
	`qr_¥ev
(&
íåõs
[
i
], 
lök
);

100 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[(
NENTRIES
+
i
-1) % NENTRIES].id,

103 
	}
}

105 
	$TEST_BEGIN
(
ã°_qr_a·î_ö£π
) {

106 
rög_t
 
íåõs
[
NENTRIES
];

107 
i
;

109 
	`öô_íåõs
(
íåõs
);

110 
i
 = 1; i < 
NENTRIES
; i++) {

111 
	`qr_a·î_ö£π
(&
íåõs
[
i
 - 1], &íåõs[i], 
lök
);

113 
	`ã°_íåõs_rög
(
íåõs
);

114 
	}
}

115 
TEST_END


117 
	$TEST_BEGIN
(
ã°_qr_ªmove
) {

118 
rög_t
 
íåõs
[
NENTRIES
];

119 
rög_t
 *
t
;

120 
i
, 
j
;

122 
	`öô_íåõs
(
íåõs
);

123 
i
 = 1; i < 
NENTRIES
; i++) {

124 
	`qr_a·î_ö£π
(&
íåõs
[
i
 - 1], &íåõs[i], 
lök
);

127 
i
 = 0; i < 
NENTRIES
; i++) {

128 
j
 = 0;

129 
	`qr_f‹óch
(
t
, &
íåõs
[
i
], 
lök
) {

130 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[
i
+
j
].id,

132 
j
++;

134 
j
 = 0;

135 
	`qr_ªvî£_f‹óch
(
t
, &
íåõs
[
i
], 
lök
) {

136 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[
NENTRIES
 - 1 - 
j
].id,

138 
j
++;

140 
	`qr_ªmove
(&
íåõs
[
i
], 
lök
);

142 
	`ã°_ödïídít_íåõs
(
íåõs
);

143 
	}
}

144 
TEST_END


146 
	$TEST_BEGIN
(
ã°_qr_bef‹e_ö£π
) {

147 
rög_t
 
íåõs
[
NENTRIES
];

148 
rög_t
 *
t
;

149 
i
, 
j
;

151 
	`öô_íåõs
(
íåõs
);

152 
i
 = 1; i < 
NENTRIES
; i++) {

153 
	`qr_bef‹e_ö£π
(&
íåõs
[
i
 - 1], &íåõs[i], 
lök
);

155 
i
 = 0; i < 
NENTRIES
; i++) {

156 
j
 = 0;

157 
	`qr_f‹óch
(
t
, &
íåõs
[
i
], 
lök
) {

158 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[(
NENTRIES
+
i
-
j
) %

159 
NENTRIES
].
id
, "Element id mismatch");

160 
j
++;

163 
i
 = 0; i < 
NENTRIES
; i++) {

164 
j
 = 0;

165 
	`qr_ªvî£_f‹óch
(
t
, &
íåõs
[
i
], 
lök
) {

166 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[(
i
+
j
+1Ë% 
NENTRIES
].id,

168 
j
++;

171 
i
 = 0; i < 
NENTRIES
; i++) {

172 
t
 = 
	`qr_√xt
(&
íåõs
[
i
], 
lök
);

173 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[(
NENTRIES
+
i
-1) % NENTRIES].id,

176 
i
 = 0; i < 
NENTRIES
; i++) {

177 
t
 = 
	`qr_¥ev
(&
íåõs
[
i
], 
lök
);

178 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[(
i
+1Ë% 
NENTRIES
].id,

181 
	}
}

182 
TEST_END


185 
	$ã°_•lô_íåõs
(
rög_t
 *
íåõs
) {

186 
rög_t
 *
t
;

187 
i
, 
j
;

189 
i
 = 0; i < 
NENTRIES
; i++) {

190 
j
 = 0;

191 
	`qr_f‹óch
(
t
, &
íåõs
[
i
], 
lök
) {

192 i‡(
i
 < 
SPLIT_INDEX
) {

193 
	`as£π_c_eq
(
t
->
id
,

194 
íåõs
[(
i
+
j
Ë% 
SPLIT_INDEX
].
id
,

197 
	`as£π_c_eq
(
t
->
id
, 
íåõs
[(
i
+
j
-
SPLIT_INDEX
) %

198 (
NENTRIES
-
SPLIT_INDEX
Ë+ SPLIT_INDEX].
id
,

201 
j
++;

204 
	}
}

206 
	$TEST_BEGIN
(
ã°_qr_mñd_•lô
) {

207 
rög_t
 
íåõs
[
NENTRIES
];

208 
i
;

210 
	`öô_íåõs
(
íåõs
);

211 
i
 = 1; i < 
NENTRIES
; i++) {

212 
	`qr_a·î_ö£π
(&
íåõs
[
i
 - 1], &íåõs[i], 
lök
);

215 
	`qr_•lô
(&
íåõs
[0], &íåõs[
SPLIT_INDEX
], 
rög_t
, 
lök
);

216 
	`ã°_•lô_íåõs
(
íåõs
);

218 
	`qr_mñd
(&
íåõs
[0], &íåõs[
SPLIT_INDEX
], 
rög_t
, 
lök
);

219 
	`ã°_íåõs_rög
(
íåõs
);

221 
	`qr_mñd
(&
íåõs
[0], &íåõs[
SPLIT_INDEX
], 
rög_t
, 
lök
);

222 
	`ã°_•lô_íåõs
(
íåõs
);

224 
	`qr_•lô
(&
íåõs
[0], &íåõs[
SPLIT_INDEX
], 
rög_t
, 
lök
);

225 
	`ã°_íåõs_rög
(
íåõs
);

227 
	`qr_•lô
(&
íåõs
[0], &íåõs[0], 
rög_t
, 
lök
);

228 
	`ã°_íåõs_rög
(
íåõs
);

230 
	`qr_mñd
(&
íåõs
[0], &íåõs[0], 
rög_t
, 
lök
);

231 
	`ã°_íåõs_rög
(
íåõs
);

232 
	}
}

233 
TEST_END


236 
	$maö
() {

237  
	`ã°
(

238 
ã°_qr_⁄e
,

239 
ã°_qr_a·î_ö£π
,

240 
ã°_qr_ªmove
,

241 
ã°_qr_bef‹e_ö£π
,

242 
ã°_qr_mñd_•lô
);

243 
	}
}

	@test/unit/rb.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/rb.h
"

5 
	#rbä_bœck_height
(
a_ty≥
, 
a_fõld
, 
a_rbt
, 
r_height
) do { \

6 
a_ty≥
 *
rbp_bh_t
; \

7 
rbp_bh_t
 = (
a_rbt
)->
rbt_roŸ
, (
r_height
) = 0;Ñbp_bh_t != \

8 
NULL
; 
rbp_bh_t
 = 
	`rbä_À·_gë
(
a_ty≥
, 
a_fõld
, \

9 
rbp_bh_t
)) { \

10 i‡(!
	`rbä_ªd_gë
(
a_ty≥
, 
a_fõld
, 
rbp_bh_t
)) { \

11 (
r_height
)++; \

14 } 0)

	)

16 
node_s
 
	tnode_t
;

18 
	snode_s
 {

19 
	#NODE_MAGIC
 0x9823af7e

	)

20 
uöt32_t
 
	mmagic
;

21 
rb_node
(
node_t
Ë
	mlök
;

22 
uöt64_t
 
	mkey
;

26 
	$node_cmp
(c⁄° 
node_t
 *
a
, c⁄°Çode_à*
b
) {

27 
ªt
;

29 
	`as£π_u32_eq
(
a
->
magic
, 
NODE_MAGIC
, "Bad magic");

30 
	`as£π_u32_eq
(
b
->
magic
, 
NODE_MAGIC
, "Bad magic");

32 
ªt
 = (
a
->
key
 > 
b
->key) - (a->key < b->key);

33 i‡(
ªt
 == 0) {

38 
ªt
 = (((
uöçå_t
)
a
Ë> ((uöçå_t)
b
))

39 - (((
uöçå_t
)
a
Ë< ((uöçå_t)
b
));

41  
ªt
;

42 
	}
}

44 
	$rb_åì
(
	tnode_t
Ë
	tåì_t
;

45 
	`rb_gí
(, 
åì_
, 
åì_t
, 
node_t
, 
lök
, 
node_cmp
);

47 
	$TEST_BEGIN
(
ã°_rb_em±y
) {

48 
åì_t
 
åì
;

49 
node_t
 
key
;

51 
	`åì_√w
(&
åì
);

53 
	`as£π_åue
(
	`åì_em±y
(&
åì
), "Tree should beÉmpty");

54 
	`as£π_±r_nuŒ
(
	`åì_fú°
(&
åì
), "UnexpectedÇode");

55 
	`as£π_±r_nuŒ
(
	`åì_œ°
(&
åì
), "UnexpectedÇode");

57 
key
.key = 0;

58 
key
.
magic
 = 
NODE_MAGIC
;

59 
	`as£π_±r_nuŒ
(
	`åì_£¨ch
(&
åì
, &
key
), "UnexpectedÇode");

61 
key
.key = 0;

62 
key
.
magic
 = 
NODE_MAGIC
;

63 
	`as£π_±r_nuŒ
(
	`åì_n£¨ch
(&
åì
, &
key
), "UnexpectedÇode");

65 
key
.key = 0;

66 
key
.
magic
 = 
NODE_MAGIC
;

67 
	`as£π_±r_nuŒ
(
	`åì_p£¨ch
(&
åì
, &
key
), "UnexpectedÇode");

68 
	}
}

69 
TEST_END


72 
	$åì_ªcur£
(
node_t
 *
node
, 
bœck_height
, 
bœck_dïth
) {

73 
ªt
 = 0;

74 
node_t
 *
À·_node
;

75 
node_t
 *
right_node
;

77 i‡(
node
 =
NULL
) {

78  
ªt
;

81 
À·_node
 = 
	`rbä_À·_gë
(
node_t
, 
lök
, 
node
);

82 
right_node
 = 
	`rbä_right_gë
(
node_t
, 
lök
, 
node
);

84 i‡(!
	`rbä_ªd_gë
(
node_t
, 
lök
, 
node
)) {

85 
bœck_dïth
++;

89 i‡(
	`rbä_ªd_gë
(
node_t
, 
lök
, 
node
)) {

90 i‡(
À·_node
 !
NULL
) {

91 
	`as£π_Ál£
(
	`rbä_ªd_gë
(
node_t
, 
lök
, 
À·_node
),

94 i‡(
right_node
 !
NULL
) {

95 
	`as£π_Ál£
(
	`rbä_ªd_gë
(
node_t
, 
lök
, 
right_node
),

101 
	`as£π_u32_eq
(
node
->
magic
, 
NODE_MAGIC
, "Bad magic");

104 i‡(
À·_node
 !
NULL
) {

105 
ªt
 +
	`åì_ªcur£
(
À·_node
, 
bœck_height
, 
bœck_dïth
);

107 
ªt
 +(
bœck_dïth
 !
bœck_height
);

111 i‡(
right_node
 !
NULL
) {

112 
ªt
 +
	`åì_ªcur£
(
right_node
, 
bœck_height
, 
bœck_dïth
);

114 
ªt
 +(
bœck_dïth
 !
bœck_height
);

117  
ªt
;

118 
	}
}

120 
node_t
 *

121 
	$åì_ôî©e_cb
(
åì_t
 *
åì
, 
node_t
 *
node
, *
d©a
) {

122 *
i
 = (*)
d©a
;

123 
node_t
 *
£¨ch_node
;

125 
	`as£π_u32_eq
(
node
->
magic
, 
NODE_MAGIC
, "Bad magic");

128 
£¨ch_node
 = 
	`åì_£¨ch
(
åì
, 
node
);

129 
	`as£π_±r_eq
(
£¨ch_node
, 
node
,

133 
£¨ch_node
 = 
	`åì_n£¨ch
(
åì
, 
node
);

134 
	`as£π_±r_eq
(
£¨ch_node
, 
node
,

138 
£¨ch_node
 = 
	`åì_p£¨ch
(
åì
, 
node
);

139 
	`as£π_±r_eq
(
£¨ch_node
, 
node
,

142 (*
i
)++;

144  
NULL
;

145 
	}
}

148 
	$åì_ôî©e
(
åì_t
 *
åì
) {

149 
i
;

151 
i
 = 0;

152 
	`åì_ôî
(
åì
, 
NULL
, 
åì_ôî©e_cb
, (*)&
i
);

154  
i
;

155 
	}
}

158 
	$åì_ôî©e_ªvî£
(
åì_t
 *
åì
) {

159 
i
;

161 
i
 = 0;

162 
	`åì_ªvî£_ôî
(
åì
, 
NULL
, 
åì_ôî©e_cb
, (*)&
i
);

164  
i
;

165 
	}
}

168 
	$node_ªmove
(
åì_t
 *
åì
, 
node_t
 *
node
, 
¬odes
) {

169 
node_t
 *
£¨ch_node
;

170 
bœck_height
, 
imbÆ™˚s
;

172 
	`åì_ªmove
(
åì
, 
node
);

175 
£¨ch_node
 = 
	`åì_n£¨ch
(
åì
, 
node
);

176 i‡(
£¨ch_node
 !
NULL
) {

177 
	`as£π_u64_ge
(
£¨ch_node
->
key
, 
node
->key,

182 
£¨ch_node
 = 
	`åì_p£¨ch
(
åì
, 
node
);

183 i‡(
£¨ch_node
 !
NULL
) {

184 
	`as£π_u64_À
(
£¨ch_node
->
key
, 
node
->key,

188 
node
->
magic
 = 0;

190 
	`rbä_bœck_height
(
node_t
, 
lök
, 
åì
, 
bœck_height
);

191 
imbÆ™˚s
 = 
	`åì_ªcur£
(
åì
->
rbt_roŸ
, 
bœck_height
, 0);

192 
	`as£π_u_eq
(
imbÆ™˚s
, 0, "Tree is unbalanced");

193 
	`as£π_u_eq
(
	`åì_ôî©e
(
åì
), 
¬odes
-1,

195 
	`as£π_u_eq
(
	`åì_ôî©e_ªvî£
(
åì
), 
¬odes
-1,

197 
	}
}

199 
node_t
 *

200 
	$ªmove_ôî©e_cb
(
åì_t
 *
åì
, 
node_t
 *
node
, *
d©a
) {

201 *
¬odes
 = (*)
d©a
;

202 
node_t
 *
ªt
 = 
	`åì_√xt
(
åì
, 
node
);

204 
	`node_ªmove
(
åì
, 
node
, *
¬odes
);

206  
ªt
;

207 
	}
}

209 
node_t
 *

210 
	$ªmove_ªvî£_ôî©e_cb
(
åì_t
 *
åì
, 
node_t
 *
node
, *
d©a
) {

211 *
¬odes
 = (*)
d©a
;

212 
node_t
 *
ªt
 = 
	`åì_¥ev
(
åì
, 
node
);

214 
	`node_ªmove
(
åì
, 
node
, *
¬odes
);

216  
ªt
;

217 
	}
}

220 
	$de°roy_cb
(
node_t
 *
node
, *
d©a
) {

221 *
¬odes
 = (*)
d©a
;

223 
	`as£π_u_gt
(*
¬odes
, 0, "DestructionÑemovedÅoo manyÇodes");

224 (*
¬odes
)--;

225 
	}
}

227 
	$TEST_BEGIN
(
ã°_rb_øndom
) {

228 
	#NNODES
 25

	)

229 
	#NBAGS
 250

	)

230 
	#SEED
 42

	)

231 
sfmt_t
 *
sfmt
;

232 
uöt64_t
 
bag
[
NNODES
];

233 
åì_t
 
åì
;

234 
node_t
 
nodes
[
NNODES
];

235 
i
, 
j
, 
k
, 
bœck_height
, 
imbÆ™˚s
;

237 
sfmt
 = 
	`öô_gí_ønd
(
SEED
);

238 
i
 = 0; i < 
NBAGS
; i++) {

239 
i
) {

242 
j
 = 0; j < 
NNODES
; j++) {

243 
bag
[
j
] = j;

248 
j
 = 0; j < 
NNODES
; j++) {

249 
bag
[
j
] = 
NNODES
 - j - 1;

253 
j
 = 0; j < 
NNODES
; j++) {

254 
bag
[
j
] = 
	`gí_ønd64_ønge
(
sfmt
, 
NNODES
);

258 
j
 = 1; j <
NNODES
; j++) {

260 
	`åì_√w
(&
åì
);

261 
k
 = 0; k < 
j
; k++) {

262 
nodes
[
k
].
magic
 = 
NODE_MAGIC
;

263 
nodes
[
k
].
key
 = 
bag
[k];

267 
k
 = 0; k < 
j
; k++) {

268 
	`åì_ö£π
(&
åì
, &
nodes
[
k
]);

270 
	`rbä_bœck_height
(
node_t
, 
lök
, &
åì
,

271 
bœck_height
);

272 
imbÆ™˚s
 = 
	`åì_ªcur£
(
åì
.
rbt_roŸ
,

273 
bœck_height
, 0);

274 
	`as£π_u_eq
(
imbÆ™˚s
, 0,

277 
	`as£π_u_eq
(
	`åì_ôî©e
(&
åì
), 
k
+1,

279 
	`as£π_u_eq
(
	`åì_ôî©e_ªvî£
(&
åì
), 
k
+1,

282 
	`as£π_Ál£
(
	`åì_em±y
(&
åì
),

284 
	`as£π_±r_nŸ_nuŒ
(
	`åì_fú°
(&
åì
),

286 
	`as£π_±r_nŸ_nuŒ
(
	`åì_œ°
(&
åì
),

289 
	`åì_√xt
(&
åì
, &
nodes
[
k
]);

290 
	`åì_¥ev
(&
åì
, &
nodes
[
k
]);

294 
i
 % 5) {

296 
k
 = 0; k < 
j
; k++) {

297 
	`node_ªmove
(&
åì
, &
nodes
[
k
], 
j
 - k);

301 
k
 = 
j
; k > 0; k--) {

302 
	`node_ªmove
(&
åì
, &
nodes
[
k
-1], k);

306 
node_t
 *
°¨t
;

307 
¬odes
 = 
j
;

309 
°¨t
 = 
NULL
;

311 
°¨t
 = 
	`åì_ôî
(&
åì
, start,

312 
ªmove_ôî©e_cb
, (*)&
¬odes
);

313 
¬odes
--;

314 } 
°¨t
 !
NULL
);

315 
	`as£π_u_eq
(
¬odes
, 0,

319 
node_t
 *
°¨t
;

320 
¬odes
 = 
j
;

322 
°¨t
 = 
NULL
;

324 
°¨t
 = 
	`åì_ªvî£_ôî
(&
åì
, start,

325 
ªmove_ªvî£_ôî©e_cb
,

326 (*)&
¬odes
);

327 
¬odes
--;

328 } 
°¨t
 !
NULL
);

329 
	`as£π_u_eq
(
¬odes
, 0,

333 
¬odes
 = 
j
;

334 
	`åì_de°roy
(&
åì
, 
de°roy_cb
, &
¬odes
);

335 
	`as£π_u_eq
(
¬odes
, 0,

339 
	`nŸ_ªached
();

343 
	`föi_gí_ønd
(
sfmt
);

344 #unde‡
NNODES


345 #unde‡
NBAGS


346 #unde‡
SEED


347 
	}
}

348 
TEST_END


351 
	$maö
() {

352  
	`ã°
(

353 
ã°_rb_em±y
,

354 
ã°_rb_øndom
);

355 
	}
}

	@test/unit/retained.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/•ö.h
"

5 
	g¨ía_öd
;

6 
size_t
 
	gsz
;

7 
size_t
 
	gesz
;

8 
	#NEPOCHS
 8

	)

9 
	#PER_THD_NALLOCS
 1

	)

10 
©omic_u_t
 
	gïoch
;

11 
©omic_u_t
 
	gnföished
;

14 
	$do_¨ía_¸óã
(
exã¡_hooks_t
 *
h
) {

15 
¨ía_öd
;

16 
size_t
 
sz
 = ();

17 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.¸óã", (*)&
¨ía_öd
, &
sz
,

18 (*)(
h
 !
NULL
 ? &h : NULL), (h != NULL ? (h) : 0)), 0,

20  
¨ía_öd
;

21 
	}
}

24 
	$do_¨ía_de°roy
(
¨ía_öd
) {

25 
size_t
 
mib
[3];

26 
size_t
 
mibÀn
;

28 
mibÀn
 = (
mib
)/(
size_t
);

29 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ía.0.de°roy", 
mib
, &
mibÀn
), 0,

31 
mib
[1] = (
size_t
)
¨ía_öd
;

32 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, NULL, 0), 0,

34 
	}
}

37 
	$do_ª‰esh
() {

38 
uöt64_t
 
ïoch
 = 1;

39 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", 
NULL
, NULL, (*)&
ïoch
,

40 (
ïoch
)), 0, "Unexpected mallctl() failure");

41 
	}
}

43 
size_t


44 
	$do_gë_size_im∂
(c⁄° *
cmd
, 
¨ía_öd
) {

45 
size_t
 
mib
[4];

46 
size_t
 
mibÀn
 = (
mib
) / (size_t);

47 
size_t
 
z
 = (size_t);

49 
	`as£π_d_eq
(
	`mÆl˘ amëomib
(
cmd
, 
mib
, &
mibÀn
),

50 0, "U√x≥˘ed mÆl˘ amëomib(\"%s\", ...ËÁûuª", 
cmd
);

51 
mib
[2] = 
¨ía_öd
;

52 
size_t
 
size
;

53 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
size
, &
z
, 
NULL
, 0),

54 0, "U√x≥˘ed mÆl˘lbymib([\"%s\"], ...ËÁûuª", 
cmd
);

56  
size
;

57 
	}
}

59 
size_t


60 
	$do_gë_a˘ive
(
¨ía_öd
) {

61  
	`do_gë_size_im∂
("°©s.¨ías.0.∑˘ive", 
¨ía_öd
Ë* 
PAGE
;

62 
	}
}

64 
size_t


65 
	$do_gë_m≠≥d
(
¨ía_öd
) {

66  
	`do_gë_size_im∂
("°©s.¨ías.0.m≠≥d", 
¨ía_öd
);

67 
	}
}

70 
	$thd_°¨t
(*
¨g
) {

71 
√xt_ïoch
 = 1;Çext_ïoch < 
NEPOCHS
;Çext_epoch++) {

73 
cur_ïoch
;

74 
•ö_t
 
•ö√r
 = 
SPIN_INITIALIZER
;

75 (
cur_ïoch
 = 
	`©omic_lﬂd_u
(&
ïoch
, 
ATOMIC_ACQUIRE
)) !=

76 
√xt_ïoch
) {

77 
	`•ö_ad≠tive
(&
•ö√r
);

79 
	`as£π_u_eq
(
cur_ïoch
, 
√xt_ïoch
, "UnexpectedÉpoch");

85 
i
 = 0; i < 
PER_THD_NALLOCS
; i++) {

86 *
p
 = 
	`mÆlocx
(
sz
, 
	`MALLOCX_ARENA
(
¨ía_öd
) |

87 
MALLOCX_TCACHE_NONE


89 
	`as£π_±r_nŸ_nuŒ
(
p
,

94 
	`©omic_„tch_add_u
(&
nföished
, 1, 
ATOMIC_RELEASE
);

97  
NULL
;

98 
	}
}

100 
	$TEST_BEGIN
(
ã°_ªèöed
) {

101 
	`ã°_skù_if
(!
c⁄fig_°©s
);

103 
¨ía_öd
 = 
	`do_¨ía_¸óã
(
NULL
);

104 
sz
 = 
	`«Œocx
(
HUGEPAGE
, 0);

105 
esz
 = 
sz
 + 
sz_œrge_∑d
;

107 
	`©omic_°‹e_u
(&
ïoch
, 0, 
ATOMIC_RELAXED
);

109 
¡hªads
 = 
n˝us
 * 2;

110 
	`VARIABLE_ARRAY
(
thd_t
, 
thªads
, 
¡hªads
);

111 
i
 = 0; i < 
¡hªads
; i++) {

112 
	`thd_¸óã
(&
thªads
[
i
], 
thd_°¨t
, 
NULL
);

115 
e
 = 1;É < 
NEPOCHS
;É++) {

116 
	`©omic_°‹e_u
(&
nföished
, 0, 
ATOMIC_RELEASE
);

117 
	`©omic_°‹e_u
(&
ïoch
, 
e
, 
ATOMIC_RELEASE
);

120 
•ö_t
 
•ö√r
 = 
SPIN_INITIALIZER
;

121 
	`©omic_lﬂd_u
(&
nföished
, 
ATOMIC_ACQUIRE
Ë< 
¡hªads
) {

122 
	`•ö_ad≠tive
(&
•ö√r
);

130 
	`do_ª‰esh
();

132 
size_t
 
Æloˇãd
 = 
esz
 * 
¡hªads
 * 
PER_THD_NALLOCS
;

133 
size_t
 
a˘ive
 = 
	`do_gë_a˘ive
(
¨ía_öd
);

134 
	`as£π_zu_À
(
Æloˇãd
, 
a˘ive
, "Unexpectedáctive memory");

135 
size_t
 
m≠≥d
 = 
	`do_gë_m≠≥d
(
¨ía_öd
);

136 
	`as£π_zu_À
(
a˘ive
, 
m≠≥d
, "Unexpected mapped memory");

138 
¨ía_t
 *
¨ía
 = 
	`¨ía_gë
(
	`tsdn_„tch
(), 
¨ía_öd
, 
Ál£
);

139 
size_t
 
ußbÀ
 = 0;

140 
size_t
 
‰agmíãd
 = 0;

141 
pszöd_t
 
pöd
 = 
	`sz_psz2öd
(
HUGEPAGE
);Öind <

142 
¨ía
->
exã¡_grow_√xt
; 
pöd
++) {

143 
size_t
 
psz
 = 
	`sz_pöd2sz
(
pöd
);

144 
size_t
 
psz_‰agmíãd
 = 
psz
 % 
esz
;

145 
size_t
 
psz_ußbÀ
 = 
psz
 - 
psz_‰agmíãd
;

149 i‡(
psz_ußbÀ
 > 0) {

150 
	`as£π_zu_…
(
ußbÀ
, 
Æloˇãd
,

152 "(%#zx[+%#zx] > %#zx)", 
ußbÀ
, 
psz_ußbÀ
,

153 
Æloˇãd
);

154 
‰agmíãd
 +
psz_‰agmíãd
;

155 
ußbÀ
 +
psz_ußbÀ
;

164 
	`do_¨ía_de°roy
(
¨ía_öd
);

165 
	`as£π_u_eq
(
	`do_¨ía_¸óã
(
NULL
), 
¨ía_öd
,

169 
i
 = 0; i < 
¡hªads
; i++) {

170 
	`thd_joö
(
thªads
[
i
], 
NULL
);

173 
	`do_¨ía_de°roy
(
¨ía_öd
);

174 
	}
}

175 
TEST_END


178 
	$maö
() {

179  
	`ã°
(

180 
ã°_ªèöed
);

181 
	}
}

	@test/unit/rtree.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/πªe.h
"

5 
πªe_node_Æloc_t
 *
	gπªe_node_Æloc_‹ig
;

6 
πªe_node_dÆloc_t
 *
	gπªe_node_dÆloc_‹ig
;

7 
πªe_Àaf_Æloc_t
 *
	gπªe_Àaf_Æloc_‹ig
;

8 
πªe_Àaf_dÆloc_t
 *
	gπªe_Àaf_dÆloc_‹ig
;

11 
πªe_t
 
	gã°_πªe
;

13 
πªe_node_ñm_t
 *

14 
	$πªe_node_Æloc_öãr˚±
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
size_t
 
√lms
) {

15 
πªe_node_ñm_t
 *
node
;

17 i‡(
πªe
 !&
ã°_πªe
) {

18  
	`πªe_node_Æloc_‹ig
(
tsdn
, 
πªe
, 
√lms
);

21 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
πªe
->
öô_lock
);

22 
node
 = (
πªe_node_ñm_t
 *)
	`ˇŒoc
(
√lms
, (rtree_node_elm_t));

23 
	`as£π_±r_nŸ_nuŒ
(
node
, "Unexpected calloc() failure");

24 
	`mÆloc_muãx_lock
(
tsdn
, &
πªe
->
öô_lock
);

26  
node
;

27 
	}
}

30 
	$πªe_node_dÆloc_öãr˚±
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
,

31 
πªe_node_ñm_t
 *
node
) {

32 i‡(
πªe
 !&
ã°_πªe
) {

33 
	`πªe_node_dÆloc_‹ig
(
tsdn
, 
πªe
, 
node
);

37 
	`‰ì
(
node
);

38 
	}
}

40 
πªe_Àaf_ñm_t
 *

41 
	$πªe_Àaf_Æloc_öãr˚±
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
, 
size_t
 
√lms
) {

42 
πªe_Àaf_ñm_t
 *
Àaf
;

44 i‡(
πªe
 !&
ã°_πªe
) {

45  
	`πªe_Àaf_Æloc_‹ig
(
tsdn
, 
πªe
, 
√lms
);

48 
	`mÆloc_muãx_u∆ock
(
tsdn
, &
πªe
->
öô_lock
);

49 
Àaf
 = (
πªe_Àaf_ñm_t
 *)
	`ˇŒoc
(
√lms
, (rtree_leaf_elm_t));

50 
	`as£π_±r_nŸ_nuŒ
(
Àaf
, "Unexpected calloc() failure");

51 
	`mÆloc_muãx_lock
(
tsdn
, &
πªe
->
öô_lock
);

53  
Àaf
;

54 
	}
}

57 
	$πªe_Àaf_dÆloc_öãr˚±
(
tsdn_t
 *
tsdn
, 
πªe_t
 *
πªe
,

58 
πªe_Àaf_ñm_t
 *
Àaf
) {

59 i‡(
πªe
 !&
ã°_πªe
) {

60 
	`πªe_Àaf_dÆloc_‹ig
(
tsdn
, 
πªe
, 
Àaf
);

64 
	`‰ì
(
Àaf
);

65 
	}
}

67 
	$TEST_BEGIN
(
ã°_πªe_ªad_em±y
) {

68 
tsdn_t
 *
tsdn
;

70 
tsdn
 = 
	`tsdn_„tch
();

72 
πªe_t
 *
πªe
 = &
ã°_πªe
;

73 
πªe_˘x_t
 
πªe_˘x
;

74 
	`πªe_˘x_d©a_öô
(&
πªe_˘x
);

75 
	`as£π_Ál£
(
	`πªe_√w
(
πªe
, 
Ál£
), "UnexpectedÑtree_new() failure");

76 
	`as£π_±r_nuŒ
(
	`πªe_exã¡_ªad
(
tsdn
, 
πªe
, &
πªe_˘x
, 
PAGE
,

77 
Ál£
), "rtree_extent_read() shouldÑeturn NULL forÉmptyÅree");

78 
	`πªe_dñëe
(
tsdn
, 
πªe
);

79 
	}
}

80 
	gTEST_END


82 #unde‡
NTHREADS


83 #unde‡
NITERS


84 #unde‡
SEED


86 
	$TEST_BEGIN
(
ã°_πªe_exåema
) {

87 
exã¡_t
 
exã¡_a
, 
exã¡_b
;

88 
	`exã¡_öô
(&
exã¡_a
, 
NULL
, NULL, 
LARGE_MINCLASS
, 
Ál£
,

89 
	`sz_size2ödex
(
LARGE_MINCLASS
), 0, 
exã¡_°©e_a˘ive
, 
Ál£
,

90 
Ál£
, 
åue
);

91 
	`exã¡_öô
(&
exã¡_b
, 
NULL
, NULL, 0, 
Ál£
, 
NSIZES
, 0,

92 
exã¡_°©e_a˘ive
, 
Ál£
, fÆ£, 
åue
);

94 
tsdn_t
 *
tsdn
 = 
	`tsdn_„tch
();

96 
πªe_t
 *
πªe
 = &
ã°_πªe
;

97 
πªe_˘x_t
 
πªe_˘x
;

98 
	`πªe_˘x_d©a_öô
(&
πªe_˘x
);

99 
	`as£π_Ál£
(
	`πªe_√w
(
πªe
, 
Ál£
), "UnexpectedÑtree_new() failure");

101 
	`as£π_Ál£
(
	`πªe_wrôe
(
tsdn
, 
πªe
, &
πªe_˘x
, 
PAGE
, &
exã¡_a
,

102 
	`exã¡_szöd_gë
(&
exã¡_a
), 
	`exã¡_¶ab_gë
(&extent_a)),

104 
	`πªe_szöd_¶ab_upd©e
(
tsdn
, 
πªe
, &
πªe_˘x
, 
PAGE
,

105 
	`exã¡_szöd_gë
(&
exã¡_a
), 
	`exã¡_¶ab_gë
(&extent_a));

106 
	`as£π_±r_eq
(
	`πªe_exã¡_ªad
(
tsdn
, 
πªe
, &
πªe_˘x
, 
PAGE
, 
åue
),

107 &
exã¡_a
,

110 
	`as£π_Ál£
(
	`πªe_wrôe
(
tsdn
, 
πªe
, &
πªe_˘x
, ~((
uöçå_t
)0),

111 &
exã¡_b
, 
	`exã¡_szöd_gë_maybe_övÆid
(&extent_b),

112 
	`exã¡_¶ab_gë
(&
exã¡_b
)), "UnexpectedÑtree_write() failure");

113 
	`as£π_±r_eq
(
	`πªe_exã¡_ªad
(
tsdn
, 
πªe
, &
πªe_˘x
,

114 ~((
uöçå_t
)0), 
åue
), &
exã¡_b
,

117 
	`πªe_dñëe
(
tsdn
, 
πªe
);

118 
	}
}

119 
TEST_END


121 
	$TEST_BEGIN
(
ã°_πªe_bôs
) {

122 
tsdn_t
 *
tsdn
 = 
	`tsdn_„tch
();

124 
uöçå_t
 
keys
[] = {
PAGE
, PAGE + 1,

125 
PAGE
 + (((
uöçå_t
)1Ë<< 
LG_PAGE
) - 1};

127 
exã¡_t
 
exã¡
;

128 
	`exã¡_öô
(&
exã¡
, 
NULL
, NULL, 0, 
Ál£
, 
NSIZES
, 0,

129 
exã¡_°©e_a˘ive
, 
Ál£
, fÆ£, 
åue
);

131 
πªe_t
 *
πªe
 = &
ã°_πªe
;

132 
πªe_˘x_t
 
πªe_˘x
;

133 
	`πªe_˘x_d©a_öô
(&
πªe_˘x
);

134 
	`as£π_Ál£
(
	`πªe_√w
(
πªe
, 
Ál£
), "UnexpectedÑtree_new() failure");

136 
i
 = 0; i < (
keys
)/(
uöçå_t
); i++) {

137 
	`as£π_Ál£
(
	`πªe_wrôe
(
tsdn
, 
πªe
, &
πªe_˘x
, 
keys
[
i
],

138 &
exã¡
, 
NSIZES
, 
Ál£
),

140 
j
 = 0; j < (
keys
)/(
uöçå_t
); j++) {

141 
	`as£π_±r_eq
(
	`πªe_exã¡_ªad
(
tsdn
, 
πªe
, &
πªe_˘x
,

142 
keys
[
j
], 
åue
), &
exã¡
,

145 "j=%u, së key=%#"
FMTxPTR
", gë key=%#"FMTxPTR, 
i
,

146 
j
, 
keys
[
i
], keys[j]);

148 
	`as£π_±r_nuŒ
(
	`πªe_exã¡_ªad
(
tsdn
, 
πªe
, &
πªe_˘x
,

149 (((
uöçå_t
)2Ë<< 
LG_PAGE
), 
Ál£
),

150 "O∆yÜe·mo°ÑåìÜó‡should bê£t; i=%u", 
i
);

151 
	`πªe_˛ór
(
tsdn
, 
πªe
, &
πªe_˘x
, 
keys
[
i
]);

154 
	`πªe_dñëe
(
tsdn
, 
πªe
);

155 
	}
}

156 
TEST_END


158 
	$TEST_BEGIN
(
ã°_πªe_øndom
) {

159 
	#NSET
 16

	)

160 
	#SEED
 42

	)

161 
sfmt_t
 *
sfmt
 = 
	`öô_gí_ønd
(
SEED
);

162 
tsdn_t
 *
tsdn
 = 
	`tsdn_„tch
();

163 
uöçå_t
 
keys
[
NSET
];

164 
πªe_t
 *
πªe
 = &
ã°_πªe
;

165 
πªe_˘x_t
 
πªe_˘x
;

166 
	`πªe_˘x_d©a_öô
(&
πªe_˘x
);

168 
exã¡_t
 
exã¡
;

169 
	`exã¡_öô
(&
exã¡
, 
NULL
, NULL, 0, 
Ál£
, 
NSIZES
, 0,

170 
exã¡_°©e_a˘ive
, 
Ál£
, fÆ£, 
åue
);

172 
	`as£π_Ál£
(
	`πªe_√w
(
πªe
, 
Ál£
), "UnexpectedÑtree_new() failure");

174 
i
 = 0; i < 
NSET
; i++) {

175 
keys
[
i
] = (
uöçå_t
)
	`gí_ønd64
(
sfmt
);

176 
πªe_Àaf_ñm_t
 *
ñm
 = 
	`πªe_Àaf_ñm_lookup
(
tsdn
, 
πªe
,

177 &
πªe_˘x
, 
keys
[
i
], 
Ál£
, 
åue
);

178 
	`as£π_±r_nŸ_nuŒ
(
ñm
,

180 
	`πªe_Àaf_ñm_wrôe
(
tsdn
, 
πªe
, 
ñm
, &
exã¡
, 
NSIZES
, 
Ál£
);

181 
	`as£π_±r_eq
(
	`πªe_exã¡_ªad
(
tsdn
, 
πªe
, &
πªe_˘x
,

182 
keys
[
i
], 
åue
), &
exã¡
,

185 
i
 = 0; i < 
NSET
; i++) {

186 
	`as£π_±r_eq
(
	`πªe_exã¡_ªad
(
tsdn
, 
πªe
, &
πªe_˘x
,

187 
keys
[
i
], 
åue
), &
exã¡
,

189 "i=%u", 
i
);

192 
i
 = 0; i < 
NSET
; i++) {

193 
	`πªe_˛ór
(
tsdn
, 
πªe
, &
πªe_˘x
, 
keys
[
i
]);

194 
	`as£π_±r_nuŒ
(
	`πªe_exã¡_ªad
(
tsdn
, 
πªe
, &
πªe_˘x
,

195 
keys
[
i
], 
åue
),

198 
i
 = 0; i < 
NSET
; i++) {

199 
	`as£π_±r_nuŒ
(
	`πªe_exã¡_ªad
(
tsdn
, 
πªe
, &
πªe_˘x
,

200 
keys
[
i
], 
åue
),

204 
	`πªe_dñëe
(
tsdn
, 
πªe
);

205 
	`föi_gí_ønd
(
sfmt
);

206 #unde‡
NSET


207 #unde‡
SEED


208 
	}
}

209 
TEST_END


212 
	$maö
() {

213 
πªe_node_Æloc_‹ig
 = 
πªe_node_Æloc
;

214 
πªe_node_Æloc
 = 
πªe_node_Æloc_öãr˚±
;

215 
πªe_node_dÆloc_‹ig
 = 
πªe_node_dÆloc
;

216 
πªe_node_dÆloc
 = 
πªe_node_dÆloc_öãr˚±
;

217 
πªe_Àaf_Æloc_‹ig
 = 
πªe_Àaf_Æloc
;

218 
πªe_Àaf_Æloc
 = 
πªe_Àaf_Æloc_öãr˚±
;

219 
πªe_Àaf_dÆloc_‹ig
 = 
πªe_Àaf_dÆloc
;

220 
πªe_Àaf_dÆloc
 = 
πªe_Àaf_dÆloc_öãr˚±
;

222  
	`ã°
(

223 
ã°_πªe_ªad_em±y
,

224 
ã°_πªe_exåema
,

225 
ã°_πªe_bôs
,

226 
ã°_πªe_øndom
);

227 
	}
}

	@test/unit/size_classes.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
size_t


4 
	$gë_max_size_˛ass
() {

5 
∆exã¡s
;

6 
size_t
 
mib
[4];

7 
size_t
 
sz
, 
mibÀn
, 
max_size_˛ass
;

9 
sz
 = ();

10 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.∆exã¡s", (*)&
∆exã¡s
, &
sz
, 
NULL
,

13 
mibÀn
 = (
mib
Ë/ (
size_t
);

14 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("¨ías.Àxã¡.0.size", 
mib
, &
mibÀn
), 0,

16 
mib
[2] = 
∆exã¡s
 - 1;

18 
sz
 = (
size_t
);

19 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, (*)&
max_size_˛ass
, &
sz
,

20 
NULL
, 0), 0, "Unexpected mallctlbymib()Érror");

22  
max_size_˛ass
;

23 
	}
}

25 
	$TEST_BEGIN
(
ã°_size_˛as£s
) {

26 
size_t
 
size_˛ass
, 
max_size_˛ass
;

27 
szöd_t
 
ödex
, 
max_ödex
;

29 
max_size_˛ass
 = 
	`gë_max_size_˛ass
();

30 
max_ödex
 = 
	`sz_size2ödex
(
max_size_˛ass
);

32 
ödex
 = 0, 
size_˛ass
 = 
	`sz_ödex2size
(ödex); index < 
max_ödex
 ||

33 
size_˛ass
 < 
max_size_˛ass
; 
ödex
++, size_class =

34 
	`sz_ödex2size
(
ödex
)) {

35 
	`as£π_åue
(
ödex
 < 
max_ödex
,

37 "size_˛ass=%zu (%#zx)", 
ödex
, 
size_˛ass
, size_class);

38 
	`as£π_åue
(
size_˛ass
 < 
max_size_˛ass
,

40 "size_˛ass=%zu (%#zx)", 
ödex
, 
size_˛ass
, size_class);

42 
	`as£π_u_eq
(
ödex
, 
	`sz_size2ödex
(
size_˛ass
),

45 
ödex
, 
size_˛ass
, 
	`sz_size2ödex
(size_class),

46 
	`sz_ödex2size
(
	`sz_size2ödex
(
size_˛ass
)));

47 
	`as£π_zu_eq
(
size_˛ass
,

48 
	`sz_ödex2size
(
	`sz_size2ödex
(
size_˛ass
)),

51 
ödex
, 
size_˛ass
, 
	`sz_size2ödex
(size_class),

52 
	`sz_ödex2size
(
	`sz_size2ödex
(
size_˛ass
)));

54 
	`as£π_u_eq
(
ödex
+1, 
	`sz_size2ödex
(
size_˛ass
+1),

57 
	`as£π_zu_eq
(
size_˛ass
, (
ödex
 > 0) ?

58 
	`sz_s2u
(
	`sz_ödex2size
(
ödex
-1)+1) : sz_s2u(1),

60 
	`as£π_zu_eq
(
size_˛ass
, 
	`sz_s2u
(size_class-1),

62 
	`as£π_zu_eq
(
size_˛ass
, 
	`sz_s2u
(size_class),

64 
	`as£π_zu_eq
(
	`sz_s2u
(
size_˛ass
+1), 
	`sz_ödex2size
(
ödex
+1),

68 
	`as£π_u_eq
(
ödex
, 
	`sz_size2ödex
(
	`sz_ödex2size
(index)),

70 
	`as£π_zu_eq
(
max_size_˛ass
, 
	`sz_ödex2size
(

71 
	`sz_size2ödex
(
max_size_˛ass
)),

74 
	`as£π_zu_eq
(
size_˛ass
, 
	`sz_s2u
(
	`sz_ödex2size
(
ödex
-1)+1),

76 
	`as£π_zu_eq
(
size_˛ass
, 
	`sz_s2u
(size_class-1),

78 
	`as£π_zu_eq
(
size_˛ass
, 
	`sz_s2u
(size_class),

80 
	}
}

81 
TEST_END


83 
	$TEST_BEGIN
(
ã°_psize_˛as£s
) {

84 
size_t
 
size_˛ass
, 
max_psz
;

85 
pszöd_t
 
pöd
, 
max_pöd
;

87 
max_psz
 = 
	`gë_max_size_˛ass
(Ë+ 
PAGE
;

88 
max_pöd
 = 
	`sz_psz2öd
(
max_psz
);

90 
pöd
 = 0, 
size_˛ass
 = 
	`sz_pöd2sz
(pind);

91 
pöd
 < 
max_pöd
 || 
size_˛ass
 < 
max_psz
;

92 
pöd
++, 
size_˛ass
 = 
	`sz_pöd2sz
(pind)) {

93 
	`as£π_åue
(
pöd
 < 
max_pöd
,

95 "size_˛ass=%zu (%#zx)", 
pöd
, 
size_˛ass
, size_class);

96 
	`as£π_åue
(
size_˛ass
 < 
max_psz
,

98 "size_˛ass=%zu (%#zx)", 
pöd
, 
size_˛ass
, size_class);

100 
	`as£π_u_eq
(
pöd
, 
	`sz_psz2öd
(
size_˛ass
),

102 " size_˛ass=%zu -->Ööd=%u --> size_˛ass=%zu", 
pöd
,

103 
size_˛ass
, 
	`sz_psz2öd
(size_class),

104 
	`sz_pöd2sz
(
	`sz_psz2öd
(
size_˛ass
)));

105 
	`as£π_zu_eq
(
size_˛ass
, 
	`sz_pöd2sz
(
	`sz_psz2öd
(size_class)),

107 " size_˛ass=%zu -->Ööd=%u --> size_˛ass=%zu", 
pöd
,

108 
size_˛ass
, 
	`sz_psz2öd
(size_class),

109 
	`sz_pöd2sz
(
	`sz_psz2öd
(
size_˛ass
)));

111 
	`as£π_u_eq
(
pöd
+1, 
	`sz_psz2öd
(
size_˛ass
+1),

114 
	`as£π_zu_eq
(
size_˛ass
, (
pöd
 > 0) ?

115 
	`sz_psz2u
(
	`sz_pöd2sz
(
pöd
-1)+1) : sz_psz2u(1),

117 
	`as£π_zu_eq
(
size_˛ass
, 
	`sz_psz2u
(size_class-1),

119 
	`as£π_zu_eq
(
size_˛ass
, 
	`sz_psz2u
(size_class),

121 
	`as£π_zu_eq
(
	`sz_psz2u
(
size_˛ass
+1), 
	`sz_pöd2sz
(
pöd
+1),

125 
	`as£π_u_eq
(
pöd
, 
	`sz_psz2öd
(
	`sz_pöd2sz
(pind)),

127 
	`as£π_zu_eq
(
max_psz
, 
	`sz_pöd2sz
(
	`sz_psz2öd
(max_psz)),

130 
	`as£π_zu_eq
(
size_˛ass
, 
	`sz_psz2u
(
	`sz_pöd2sz
(
pöd
-1)+1),

132 
	`as£π_zu_eq
(
size_˛ass
, 
	`sz_psz2u
(size_class-1),

134 
	`as£π_zu_eq
(
size_˛ass
, 
	`sz_psz2u
(size_class),

136 
	}
}

137 
TEST_END


139 
	$TEST_BEGIN
(
ã°_ovîÊow
) {

140 
size_t
 
max_size_˛ass
, 
max_psz
;

142 
max_size_˛ass
 = 
	`gë_max_size_˛ass
();

143 
max_psz
 = 
max_size_˛ass
 + 
PAGE
;

145 
	`as£π_u_eq
(
	`sz_size2ödex
(
max_size_˛ass
+1), 
NSIZES
,

147 
	`as£π_u_eq
(
	`sz_size2ödex
(
	`ZU
(
PTRDIFF_MAX
)+1), 
NSIZES
,

149 
	`as£π_u_eq
(
	`sz_size2ödex
(
SIZE_T_MAX
), 
NSIZES
,

152 
	`as£π_zu_eq
(
	`sz_s2u
(
max_size_˛ass
+1), 0,

154 
	`as£π_zu_eq
(
	`sz_s2u
(
	`ZU
(
PTRDIFF_MAX
)+1), 0,

156 
	`as£π_zu_eq
(
	`sz_s2u
(
SIZE_T_MAX
), 0,

159 
	`as£π_u_eq
(
	`sz_psz2öd
(
max_size_˛ass
+1), 
NPSIZES
,

161 
	`as£π_u_eq
(
	`sz_psz2öd
(
	`ZU
(
PTRDIFF_MAX
)+1), 
NPSIZES
,

163 
	`as£π_u_eq
(
	`sz_psz2öd
(
SIZE_T_MAX
), 
NPSIZES
,

166 
	`as£π_zu_eq
(
	`sz_psz2u
(
max_size_˛ass
+1), 
max_psz
,

169 
	`as£π_zu_eq
(
	`sz_psz2u
(
	`ZU
(
PTRDIFF_MAX
)+1), 
max_psz
,

172 
	`as£π_zu_eq
(
	`sz_psz2u
(
SIZE_T_MAX
), 
max_psz
,

174 
	}
}

175 
TEST_END


178 
	$maö
() {

179  
	`ã°
(

180 
ã°_size_˛as£s
,

181 
ã°_psize_˛as£s
,

182 
ã°_ovîÊow
);

183 
	}
}

	@test/unit/slab.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	$TEST_BEGIN
(
ã°_¨ía_¶ab_ªgöd
) {

4 
szöd_t
 
bööd
;

6 
bööd
 = 0; bööd < 
NBINS
; binind++) {

7 
size_t
 
ªgöd
;

8 
exã¡_t
 
¶ab
;

9 c⁄° 
bö_öfo_t
 *
bö_öfo
 = &
bö_öfos
[
bööd
];

10 
	`exã¡_öô
(&
¶ab
, 
NULL
, 
	`mÆlocx
(
bö_öfo
->
¶ab_size
,

11 
	`MALLOCX_LG_ALIGN
(
LG_PAGE
)), 
bö_öfo
->
¶ab_size
, 
åue
,

12 
bööd
, 0, 
exã¡_°©e_a˘ive
, 
Ál£
, 
åue
,Årue);

13 
	`as£π_±r_nŸ_nuŒ
(
	`exã¡_addr_gë
(&
¶ab
),

15 
ªgöd
 = 0;Ñegöd < 
bö_öfo
->
ƒegs
;Ñegind++) {

16 *
ªg
 = (*)((
uöçå_t
)
	`exã¡_addr_gë
(&
¶ab
) +

17 (
bö_öfo
->
ªg_size
 * 
ªgöd
));

18 
	`as£π_zu_eq
(
	`¨ía_¶ab_ªgöd
(&
¶ab
, 
bööd
, 
ªg
),

19 
ªgöd
,

21 
bö_öfo
->
ªg_size
);

23 
	`‰ì
(
	`exã¡_addr_gë
(&
¶ab
));

25 
	}
}

26 
TEST_END


29 
	$maö
() {

30  
	`ã°
(

31 
ã°_¨ía_¶ab_ªgöd
);

32 
	}
}

	@test/unit/smoothstep.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 c⁄° 
uöt64_t
 
	gsmoŸh°ï_èb
[] = {

4 
	#STEP
(
°ï
, 
h
, 
x
, 
y
) \

5 
h
,

	)

6 
SMOOTHSTEP


7 #unde‡
STEP


10 
	$TEST_BEGIN
(
ã°_smoŸh°ï_öãgøl
) {

11 
uöt64_t
 
sum
, 
mö
, 
max
;

12 
i
;

21 
sum
 = 0;

22 
i
 = 0; i < 
SMOOTHSTEP_NSTEPS
; i++) {

23 
sum
 +
smoŸh°ï_èb
[
i
];

26 
max
 = (
	`KQU
(1Ë<< (
SMOOTHSTEP_BFP
-1)Ë* (
SMOOTHSTEP_NSTEPS
+1);

27 
mö
 = 
max
 - 
SMOOTHSTEP_NSTEPS
;

29 
	`as£π_u64_ge
(
sum
, 
mö
,

31 
	`as£π_u64_À
(
sum
, 
max
, "IntegralÉxceeds 1/2");

32 i‡(
Ál£
) {

33 
	`mÆloc_¥ötf
("%"
FMTu64
" ulps under 1/2 (limit %d)\n",

34 
max
 - 
sum
, 
SMOOTHSTEP_NSTEPS
);

36 
	}
}

37 
TEST_END


39 
	$TEST_BEGIN
(
ã°_smoŸh°ï_m⁄Ÿ⁄ic
) {

40 
uöt64_t
 
¥ev_h
;

41 
i
;

49 
¥ev_h
 = 0;

50 
i
 = 0; i < 
SMOOTHSTEP_NSTEPS
; i++) {

51 
uöt64_t
 
h
 = 
smoŸh°ï_èb
[
i
];

52 
	`as£π_u64_ge
(
h
, 
¥ev_h
, "Põ˚wi£Ç⁄-m⁄Ÿ⁄ic, i=%u", 
i
);

53 
¥ev_h
 = 
h
;

55 
	`as£π_u64_eq
(
smoŸh°ï_èb
[
SMOOTHSTEP_NSTEPS
-1],

56 (
	`KQU
(1Ë<< 
SMOOTHSTEP_BFP
), "Last step mustÉqual 1");

57 
	}
}

58 
TEST_END


60 
	$TEST_BEGIN
(
ã°_smoŸh°ï_¶›e
) {

61 
uöt64_t
 
¥ev_h
, 
¥ev_dñè
;

62 
i
;

70 
¥ev_h
 = 0;

71 
¥ev_dñè
 = 0;

72 
i
 = 0; i < 
SMOOTHSTEP_NSTEPS
 / 2 + SMOOTHSTEP_NSTEPS % 2; i++) {

73 
uöt64_t
 
h
 = 
smoŸh°ï_èb
[
i
];

74 
uöt64_t
 
dñè
 = 
h
 - 
¥ev_h
;

75 
	`as£π_u64_ge
(
dñè
, 
¥ev_dñè
,

77 "i=%u", 
i
);

78 
¥ev_h
 = 
h
;

79 
¥ev_dñè
 = 
dñè
;

82 
¥ev_h
 = 
	`KQU
(1Ë<< 
SMOOTHSTEP_BFP
;

83 
¥ev_dñè
 = 0;

84 
i
 = 
SMOOTHSTEP_NSTEPS
-1; i >= SMOOTHSTEP_NSTEPS / 2; i--) {

85 
uöt64_t
 
h
 = 
smoŸh°ï_èb
[
i
];

86 
uöt64_t
 
dñè
 = 
¥ev_h
 - 
h
;

87 
	`as£π_u64_ge
(
dñè
, 
¥ev_dñè
,

89 "i=%u", 
i
);

90 
¥ev_h
 = 
h
;

91 
¥ev_dñè
 = 
dñè
;

93 
	}
}

94 
TEST_END


97 
	$maö
() {

98  
	`ã°
(

99 
ã°_smoŸh°ï_öãgøl
,

100 
ã°_smoŸh°ï_m⁄Ÿ⁄ic
,

101 
ã°_smoŸh°ï_¶›e
);

102 
	}
}

	@test/unit/spin.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/•ö.h
"

5 
	$TEST_BEGIN
(
ã°_•ö
) {

6 
•ö_t
 
•ö√r
 = 
SPIN_INITIALIZER
;

8 
i
 = 0; i < 100; i++) {

9 
	`•ö_ad≠tive
(&
•ö√r
);

11 
	}
}

12 
TEST_END


15 
	$maö
() {

16  
	`ã°
(

17 
ã°_•ö
);

18 
	}
}

	@test/unit/stats.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	$TEST_BEGIN
(
ã°_°©s_summ¨y
) {

4 
size_t
 
sz
, 
Æloˇãd
, 
a˘ive
, 
ªsidít
, 
m≠≥d
;

5 
ex≥˘ed
 = 
c⁄fig_°©s
 ? 0 : 
ENOENT
;

7 
sz
 = (
size_t
);

8 
	`as£π_d_eq
(
	`mÆl˘l
("°©s.Æloˇãd", (*)&
Æloˇãd
, &
sz
, 
NULL
,

9 0), 
ex≥˘ed
, "Unexpected mallctl()Ñesult");

10 
	`as£π_d_eq
(
	`mÆl˘l
("°©s.a˘ive", (*)&
a˘ive
, &
sz
, 
NULL
, 0),

11 
ex≥˘ed
, "Unexpected mallctl()Ñesult");

12 
	`as£π_d_eq
(
	`mÆl˘l
("°©s.ªsidít", (*)&
ªsidít
, &
sz
, 
NULL
, 0),

13 
ex≥˘ed
, "Unexpected mallctl()Ñesult");

14 
	`as£π_d_eq
(
	`mÆl˘l
("°©s.m≠≥d", (*)&
m≠≥d
, &
sz
, 
NULL
, 0),

15 
ex≥˘ed
, "Unexpected mallctl()Ñesult");

17 i‡(
c⁄fig_°©s
) {

18 
	`as£π_zu_À
(
Æloˇãd
, 
a˘ive
,

20 
	`as£π_zu_…
(
a˘ive
, 
ªsidít
,

22 
	`as£π_zu_…
(
a˘ive
, 
m≠≥d
,

25 
	}
}

26 
TEST_END


28 
	$TEST_BEGIN
(
ã°_°©s_œrge
) {

29 *
p
;

30 
uöt64_t
 
ïoch
;

31 
size_t
 
Æloˇãd
;

32 
uöt64_t
 
nmÆloc
, 
ndÆloc
, 
ƒeque°s
;

33 
size_t
 
sz
;

34 
ex≥˘ed
 = 
c⁄fig_°©s
 ? 0 : 
ENOENT
;

36 
p
 = 
	`mÆlocx
(
SMALL_MAXCLASS
+1, 
	`MALLOCX_ARENA
(0));

37 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

39 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", 
NULL
, NULL, (*)&
ïoch
, (epoch)),

42 
sz
 = (
size_t
);

43 
	`as£π_d_eq
(
	`mÆl˘l
("stats.arenas.0.large.allocated",

44 (*)&
Æloˇãd
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

46 
sz
 = (
uöt64_t
);

47 
	`as£π_d_eq
(
	`mÆl˘l
("°©s.¨ías.0.œrge.nmÆloc", (*)&
nmÆloc
,

48 &
sz
, 
NULL
, 0), 
ex≥˘ed
, "Unexpected mallctl()Ñesult");

49 
	`as£π_d_eq
(
	`mÆl˘l
("°©s.¨ías.0.œrge.ndÆloc", (*)&
ndÆloc
,

50 &
sz
, 
NULL
, 0), 
ex≥˘ed
, "Unexpected mallctl()Ñesult");

51 
	`as£π_d_eq
(
	`mÆl˘l
("stats.arenas.0.large.nrequests",

52 (*)&
ƒeque°s
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

55 i‡(
c⁄fig_°©s
) {

56 
	`as£π_zu_gt
(
Æloˇãd
, 0,

58 
	`as£π_u64_ge
(
nmÆloc
, 
ndÆloc
,

60 
	`as£π_u64_À
(
nmÆloc
, 
ƒeque°s
,

64 
	`dÆlocx
(
p
, 0);

65 
	}
}

66 
TEST_END


68 
	$TEST_BEGIN
(
ã°_°©s_¨ías_summ¨y
) {

69 *
lôée
, *
œrge
;

70 
uöt64_t
 
ïoch
;

71 
size_t
 
sz
;

72 
ex≥˘ed
 = 
c⁄fig_°©s
 ? 0 : 
ENOENT
;

73 
size_t
 
m≠≥d
;

74 
uöt64_t
 
dúty_≈urge
, 
dúty_nmadvi£
, 
dúty_purged
;

75 
uöt64_t
 
muzzy_≈urge
, 
muzzy_nmadvi£
, 
muzzy_purged
;

77 
lôée
 = 
	`mÆlocx
(
SMALL_MAXCLASS
, 
	`MALLOCX_ARENA
(0));

78 
	`as£π_±r_nŸ_nuŒ
(
lôée
, "Unexpected mallocx() failure");

79 
œrge
 = 
	`mÆlocx
((1U << 
LG_LARGE_MINCLASS
), 
	`MALLOCX_ARENA
(0));

80 
	`as£π_±r_nŸ_nuŒ
(
œrge
, "Unexpected mallocx() failure");

82 
	`dÆlocx
(
lôée
, 0);

83 
	`dÆlocx
(
œrge
, 0);

85 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.tˇche.Êush", 
NULL
, NULL, NULL, 0),

86 
›t_tˇche
 ? 0 : 
EFAULT
, "Unexpected mallctl()Ñesult");

87 
	`as£π_d_eq
(
	`mÆl˘l
("¨ía.0.purge", 
NULL
, NULL, NULL, 0), 0,

90 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", 
NULL
, NULL, (*)&
ïoch
, (epoch)),

93 
sz
 = (
size_t
);

94 
	`as£π_d_eq
(
	`mÆl˘l
("°©s.¨ías.0.m≠≥d", (*)&
m≠≥d
, &
sz
, 
NULL
,

95 0), 
ex≥˘ed
, "Unexepected mallctl()Ñesult");

97 
sz
 = (
uöt64_t
);

98 
	`as£π_d_eq
(
	`mÆl˘l
("stats.arenas.0.dirty_npurge",

99 (*)&
dúty_≈urge
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

101 
	`as£π_d_eq
(
	`mÆl˘l
("stats.arenas.0.dirty_nmadvise",

102 (*)&
dúty_nmadvi£
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

104 
	`as£π_d_eq
(
	`mÆl˘l
("stats.arenas.0.dirty_purged",

105 (*)&
dúty_purged
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

107 
	`as£π_d_eq
(
	`mÆl˘l
("stats.arenas.0.muzzy_npurge",

108 (*)&
muzzy_≈urge
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

110 
	`as£π_d_eq
(
	`mÆl˘l
("stats.arenas.0.muzzy_nmadvise",

111 (*)&
muzzy_nmadvi£
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

113 
	`as£π_d_eq
(
	`mÆl˘l
("stats.arenas.0.muzzy_purged",

114 (*)&
muzzy_purged
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

117 i‡(
c⁄fig_°©s
) {

118 i‡(!
	`background_thªad_íabÀd
()) {

119 
	`as£π_u64_gt
(
dúty_≈urge
 + 
muzzy_≈urge
, 0,

122 
	`as£π_u64_À
(
dúty_nmadvi£
, 
dúty_purged
,

124 
	`as£π_u64_À
(
muzzy_nmadvi£
, 
muzzy_purged
,

127 
	}
}

128 
TEST_END


131 
	$thd_°¨t
(*
¨g
) {

132  
NULL
;

133 
	}
}

136 
	$no_œzy_lock
() {

137 
thd_t
 
thd
;

139 
	`thd_¸óã
(&
thd
, 
thd_°¨t
, 
NULL
);

140 
	`thd_joö
(
thd
, 
NULL
);

141 
	}
}

143 
	$TEST_BEGIN
(
ã°_°©s_¨ías_smÆl
) {

144 *
p
;

145 
size_t
 
sz
, 
Æloˇãd
;

146 
uöt64_t
 
ïoch
, 
nmÆloc
, 
ndÆloc
, 
ƒeque°s
;

147 
ex≥˘ed
 = 
c⁄fig_°©s
 ? 0 : 
ENOENT
;

149 
	`no_œzy_lock
();

151 
p
 = 
	`mÆlocx
(
SMALL_MAXCLASS
, 
	`MALLOCX_ARENA
(0));

152 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

154 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.tˇche.Êush", 
NULL
, NULL, NULL, 0),

155 
›t_tˇche
 ? 0 : 
EFAULT
, "Unexpected mallctl()Ñesult");

157 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", 
NULL
, NULL, (*)&
ïoch
, (epoch)),

160 
sz
 = (
size_t
);

161 
	`as£π_d_eq
(
	`mÆl˘l
("stats.arenas.0.small.allocated",

162 (*)&
Æloˇãd
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

164 
sz
 = (
uöt64_t
);

165 
	`as£π_d_eq
(
	`mÆl˘l
("°©s.¨ías.0.smÆl.nmÆloc", (*)&
nmÆloc
,

166 &
sz
, 
NULL
, 0), 
ex≥˘ed
, "Unexpected mallctl()Ñesult");

167 
	`as£π_d_eq
(
	`mÆl˘l
("°©s.¨ías.0.smÆl.ndÆloc", (*)&
ndÆloc
,

168 &
sz
, 
NULL
, 0), 
ex≥˘ed
, "Unexpected mallctl()Ñesult");

169 
	`as£π_d_eq
(
	`mÆl˘l
("stats.arenas.0.small.nrequests",

170 (*)&
ƒeque°s
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

173 i‡(
c⁄fig_°©s
) {

174 
	`as£π_zu_gt
(
Æloˇãd
, 0,

176 
	`as£π_u64_gt
(
nmÆloc
, 0,

178 
	`as£π_u64_ge
(
nmÆloc
, 
ndÆloc
,

180 
	`as£π_u64_gt
(
ƒeque°s
, 0,

184 
	`dÆlocx
(
p
, 0);

185 
	}
}

186 
TEST_END


188 
	$TEST_BEGIN
(
ã°_°©s_¨ías_œrge
) {

189 *
p
;

190 
size_t
 
sz
, 
Æloˇãd
;

191 
uöt64_t
 
ïoch
, 
nmÆloc
, 
ndÆloc
;

192 
ex≥˘ed
 = 
c⁄fig_°©s
 ? 0 : 
ENOENT
;

194 
p
 = 
	`mÆlocx
((1U << 
LG_LARGE_MINCLASS
), 
	`MALLOCX_ARENA
(0));

195 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

197 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", 
NULL
, NULL, (*)&
ïoch
, (epoch)),

200 
sz
 = (
size_t
);

201 
	`as£π_d_eq
(
	`mÆl˘l
("stats.arenas.0.large.allocated",

202 (*)&
Æloˇãd
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

204 
sz
 = (
uöt64_t
);

205 
	`as£π_d_eq
(
	`mÆl˘l
("°©s.¨ías.0.œrge.nmÆloc", (*)&
nmÆloc
,

206 &
sz
, 
NULL
, 0), 
ex≥˘ed
, "Unexpected mallctl()Ñesult");

207 
	`as£π_d_eq
(
	`mÆl˘l
("°©s.¨ías.0.œrge.ndÆloc", (*)&
ndÆloc
,

208 &
sz
, 
NULL
, 0), 
ex≥˘ed
, "Unexpected mallctl()Ñesult");

210 i‡(
c⁄fig_°©s
) {

211 
	`as£π_zu_gt
(
Æloˇãd
, 0,

213 
	`as£π_u64_gt
(
nmÆloc
, 0,

215 
	`as£π_u64_ge
(
nmÆloc
, 
ndÆloc
,

219 
	`dÆlocx
(
p
, 0);

220 
	}
}

221 
TEST_END


224 
	$gí_mÆl˘l_°r
(*
cmd
, *
«me
, 
¨ía_öd
) {

225 
	`•rötf
(
cmd
, "°©s.¨ías.%u.bös.0.%s", 
¨ía_öd
, 
«me
);

226 
	}
}

228 
	$TEST_BEGIN
(
ã°_°©s_¨ías_bös
) {

229 *
p
;

230 
size_t
 
sz
, 
cur¶abs
, 
cuºegs
;

231 
uöt64_t
 
ïoch
, 
nmÆloc
, 
ndÆloc
, 
ƒeque°s
, 
nfûls
, 
nÊushes
;

232 
uöt64_t
 
n¶abs
, 
ƒe¶abs
;

233 
ex≥˘ed
 = 
c⁄fig_°©s
 ? 0 : 
ENOENT
;

236 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.tˇche.Êush", 
NULL
, NULL, NULL, 0),

237 
›t_tˇche
 ? 0 : 
EFAULT
, "Unexpected mallctl()Ñesult");

239 
¨ía_öd
, 
ﬁd_¨ía_öd
;

240 
sz
 = ();

241 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.¸óã", (*)&
¨ía_öd
, &
sz
, 
NULL
, 0),

243 
sz
 = (
¨ía_öd
);

244 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.¨ía", (*)&
ﬁd_¨ía_öd
, &
sz
,

245 (*)&
¨ía_öd
, (arena_ind)), 0,

248 
p
 = 
	`mÆloc
(
bö_öfos
[0].
ªg_size
);

249 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected malloc() failure");

251 
	`as£π_d_eq
(
	`mÆl˘l
("thªad.tˇche.Êush", 
NULL
, NULL, NULL, 0),

252 
›t_tˇche
 ? 0 : 
EFAULT
, "Unexpected mallctl()Ñesult");

254 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", 
NULL
, NULL, (*)&
ïoch
, (epoch)),

257 
cmd
[128];

258 
sz
 = (
uöt64_t
);

259 
	`gí_mÆl˘l_°r
(
cmd
, "nmÆloc", 
¨ía_öd
);

260 
	`as£π_d_eq
(
	`mÆl˘l
(
cmd
, (*)&
nmÆloc
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

262 
	`gí_mÆl˘l_°r
(
cmd
, "ndÆloc", 
¨ía_öd
);

263 
	`as£π_d_eq
(
	`mÆl˘l
(
cmd
, (*)&
ndÆloc
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

265 
	`gí_mÆl˘l_°r
(
cmd
, "ƒeque°s", 
¨ía_öd
);

266 
	`as£π_d_eq
(
	`mÆl˘l
(
cmd
, (*)&
ƒeque°s
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

268 
sz
 = (
size_t
);

269 
	`gí_mÆl˘l_°r
(
cmd
, "cuºegs", 
¨ía_öd
);

270 
	`as£π_d_eq
(
	`mÆl˘l
(
cmd
, (*)&
cuºegs
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

273 
sz
 = (
uöt64_t
);

274 
	`gí_mÆl˘l_°r
(
cmd
, "nfûls", 
¨ía_öd
);

275 
	`as£π_d_eq
(
	`mÆl˘l
(
cmd
, (*)&
nfûls
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

277 
	`gí_mÆl˘l_°r
(
cmd
, "nÊushes", 
¨ía_öd
);

278 
	`as£π_d_eq
(
	`mÆl˘l
(
cmd
, (*)&
nÊushes
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

281 
	`gí_mÆl˘l_°r
(
cmd
, "n¶abs", 
¨ía_öd
);

282 
	`as£π_d_eq
(
	`mÆl˘l
(
cmd
, (*)&
n¶abs
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

284 
	`gí_mÆl˘l_°r
(
cmd
, "ƒe¶abs", 
¨ía_öd
);

285 
	`as£π_d_eq
(
	`mÆl˘l
(
cmd
, (*)&
ƒe¶abs
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

287 
sz
 = (
size_t
);

288 
	`gí_mÆl˘l_°r
(
cmd
, "cur¶abs", 
¨ía_öd
);

289 
	`as£π_d_eq
(
	`mÆl˘l
(
cmd
, (*)&
cur¶abs
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

292 i‡(
c⁄fig_°©s
) {

293 
	`as£π_u64_gt
(
nmÆloc
, 0,

295 
	`as£π_u64_ge
(
nmÆloc
, 
ndÆloc
,

297 
	`as£π_u64_gt
(
ƒeque°s
, 0,

299 
	`as£π_zu_gt
(
cuºegs
, 0,

301 i‡(
›t_tˇche
) {

302 
	`as£π_u64_gt
(
nfûls
, 0,

304 
	`as£π_u64_gt
(
nÊushes
, 0,

307 
	`as£π_u64_gt
(
n¶abs
, 0,

309 
	`as£π_zu_gt
(
cur¶abs
, 0,

313 
	`dÆlocx
(
p
, 0);

314 
	}
}

315 
TEST_END


317 
	$TEST_BEGIN
(
ã°_°©s_¨ías_Àxã¡s
) {

318 *
p
;

319 
uöt64_t
 
ïoch
, 
nmÆloc
, 
ndÆloc
;

320 
size_t
 
cuæexã¡s
, 
sz
, 
hsize
;

321 
ex≥˘ed
 = 
c⁄fig_°©s
 ? 0 : 
ENOENT
;

323 
sz
 = (
size_t
);

324 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.Àxã¡.0.size", (*)&
hsize
, &
sz
, 
NULL
,

327 
p
 = 
	`mÆlocx
(
hsize
, 
	`MALLOCX_ARENA
(0));

328 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected mallocx() failure");

330 
	`as£π_d_eq
(
	`mÆl˘l
("ïoch", 
NULL
, NULL, (*)&
ïoch
, (epoch)),

333 
sz
 = (
uöt64_t
);

334 
	`as£π_d_eq
(
	`mÆl˘l
("stats.arenas.0.lextents.0.nmalloc",

335 (*)&
nmÆloc
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

337 
	`as£π_d_eq
(
	`mÆl˘l
("stats.arenas.0.lextents.0.ndalloc",

338 (*)&
ndÆloc
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

340 
sz
 = (
size_t
);

341 
	`as£π_d_eq
(
	`mÆl˘l
("stats.arenas.0.lextents.0.curlextents",

342 (*)&
cuæexã¡s
, &
sz
, 
NULL
, 0), 
ex≥˘ed
,

345 i‡(
c⁄fig_°©s
) {

346 
	`as£π_u64_gt
(
nmÆloc
, 0,

348 
	`as£π_u64_ge
(
nmÆloc
, 
ndÆloc
,

350 
	`as£π_u64_gt
(
cuæexã¡s
, 0,

354 
	`dÆlocx
(
p
, 0);

355 
	}
}

356 
TEST_END


359 
	$maö
() {

360  
	`ã°_no_ªíå™cy
(

361 
ã°_°©s_summ¨y
,

362 
ã°_°©s_œrge
,

363 
ã°_°©s_¨ías_summ¨y
,

364 
ã°_°©s_¨ías_smÆl
,

365 
ã°_°©s_¨ías_œrge
,

366 
ã°_°©s_¨ías_bös
,

367 
ã°_°©s_¨ías_Àxã¡s
);

368 
	}
}

	@test/unit/stats_print.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/utû.h
"

6 
	mTOKEN_TYPE_NONE
,

7 
	mTOKEN_TYPE_ERROR
,

8 
	mTOKEN_TYPE_EOI
,

9 
	mTOKEN_TYPE_NULL
,

10 
	mTOKEN_TYPE_FALSE
,

11 
	mTOKEN_TYPE_TRUE
,

12 
	mTOKEN_TYPE_LBRACKET
,

13 
	mTOKEN_TYPE_RBRACKET
,

14 
	mTOKEN_TYPE_LBRACE
,

15 
	mTOKEN_TYPE_RBRACE
,

16 
	mTOKEN_TYPE_COLON
,

17 
	mTOKEN_TYPE_COMMA
,

18 
	mTOKEN_TYPE_STRING
,

19 
	mTOKEN_TYPE_NUMBER


20 } 
	ttokí_ty≥_t
;

22 
∑r£r_s
 
	t∑r£r_t
;

24 
∑r£r_t
 *
	m∑r£r
;

25 
tokí_ty≥_t
 
	mtokí_ty≥
;

26 
size_t
 
	mpos
;

27 
size_t
 
	mÀn
;

28 
size_t
 
	mlöe
;

29 
size_t
 
	mcﬁ
;

30 } 
	ttokí_t
;

32 
	s∑r£r_s
 {

33 
boﬁ
 
	mvîbo£
;

34 *
	mbuf
;

35 
size_t
 
	mÀn
;

36 
size_t
 
	mpos
;

37 
size_t
 
	mlöe
;

38 
size_t
 
	mcﬁ
;

39 
tokí_t
 
	mtokí
;

43 
	$tokí_öô
(
tokí_t
 *
tokí
, 
∑r£r_t
 *
∑r£r
, 
tokí_ty≥_t
 
tokí_ty≥
,

44 
size_t
 
pos
, size_à
Àn
, size_à
löe
, size_à
cﬁ
) {

45 
tokí
->
∑r£r
 =Öarser;

46 
tokí
->
tokí_ty≥
 =Åoken_type;

47 
tokí
->
pos
 =Öos;

48 
tokí
->
Àn
 =Üen;

49 
tokí
->
löe
 =Üine;

50 
tokí
->
cﬁ
 = col;

51 
	}
}

54 
	$tokí_îr‹
(
tokí_t
 *
tokí
) {

55 i‡(!
tokí
->
∑r£r
->
vîbo£
) {

58 
tokí
->
tokí_ty≥
) {

59 
TOKEN_TYPE_NONE
:

60 
	`nŸ_ªached
();

61 
TOKEN_TYPE_ERROR
:

62 
	`mÆloc_¥ötf
("%zu:%zu: Unexpected character inÅoken: ",

63 
tokí
->
löe
,Åokí->
cﬁ
);

66 
	`mÆloc_¥ötf
("%zu:%zu: U√x≥˘edÅokí: ", 
tokí
->
löe
,

67 
tokí
->
cﬁ
);

70 
UNUSED
 
ssize_t
 
îr
 = 
	`wrôe
(
STDERR_FILENO
,

71 &
tokí
->
∑r£r
->
buf
[tokí->
pos
],Åokí->
Àn
);

72 
	`mÆloc_¥ötf
("\n");

73 
	}
}

76 
	$∑r£r_öô
(
∑r£r_t
 *
∑r£r
, 
boﬁ
 
vîbo£
) {

77 
∑r£r
->
vîbo£
 = verbose;

78 
∑r£r
->
buf
 = 
NULL
;

79 
∑r£r
->
Àn
 = 0;

80 
∑r£r
->
pos
 = 0;

81 
∑r£r
->
löe
 = 1;

82 
∑r£r
->
cﬁ
 = 0;

83 
	}
}

86 
	$∑r£r_föi
(
∑r£r_t
 *
∑r£r
) {

87 i‡(
∑r£r
->
buf
 !
NULL
) {

88 
	`dÆlocx
(
∑r£r
->
buf
, 
MALLOCX_TCACHE_NONE
);

90 
	}
}

92 
boﬁ


93 
	$∑r£r_≠≥nd
(
∑r£r_t
 *
∑r£r
, c⁄° *
°r
) {

94 
size_t
 
Àn
 = 
	`°æí
(
°r
);

95 *
buf
 = (
∑r£r
->bu‡=
NULL
Ë? 
	`mÆlocx
(
Àn
 + 1,

96 
MALLOCX_TCACHE_NONE
Ë: 
	`øŒocx
(
∑r£r
->
buf
,Ö¨£r->
Àn
 +Üen + 1,

97 
MALLOCX_TCACHE_NONE
);

98 i‡(
buf
 =
NULL
) {

99  
åue
;

101 
	`mem˝y
(&
buf
[
∑r£r
->
Àn
], 
°r
,Üen + 1);

102 
∑r£r
->
buf
 = buf;

103 
∑r£r
->
Àn
 +=Üen;

104  
Ál£
;

105 
	}
}

107 
boﬁ


108 
	$∑r£r_tokíize
(
∑r£r_t
 *
∑r£r
) {

110 
STATE_START
,

111 
STATE_EOI
,

112 
STATE_N
, 
STATE_NU
, 
STATE_NUL
, 
STATE_NULL
,

113 
STATE_F
, 
STATE_FA
, 
STATE_FAL
, 
STATE_FALS
, 
STATE_FALSE
,

114 
STATE_T
, 
STATE_TR
, 
STATE_TRU
, 
STATE_TRUE
,

115 
STATE_LBRACKET
,

116 
STATE_RBRACKET
,

117 
STATE_LBRACE
,

118 
STATE_RBRACE
,

119 
STATE_COLON
,

120 
STATE_COMMA
,

121 
STATE_CHARS
,

122 
STATE_CHAR_ESCAPE
,

123 
STATE_CHAR_U
, 
STATE_CHAR_UD
, 
STATE_CHAR_UDD
, 
STATE_CHAR_UDDD
,

124 
STATE_STRING
,

125 
STATE_MINUS
,

126 
STATE_LEADING_ZERO
,

127 
STATE_DIGITS
,

128 
STATE_DECIMAL
,

129 
STATE_FRAC_DIGITS
,

130 
STATE_EXP
,

131 
STATE_EXP_SIGN
,

132 
STATE_EXP_DIGITS
,

133 
STATE_ACCEPT


134 } 
°©e
 = 
STATE_START
;

135 
size_t
 
tokí_pos
 
	`JEMALLOC_CC_SILENCE_INIT
(0);

136 
size_t
 
tokí_löe
 
	`JEMALLOC_CC_SILENCE_INIT
(1);

137 
size_t
 
tokí_cﬁ
 
	`JEMALLOC_CC_SILENCE_INIT
(0);

139 
	`as£π_zu_À
(
∑r£r
->
pos
,Ö¨£r->
Àn
,

142 
°©e
 !
STATE_ACCEPT
) {

143 
c
 = 
∑r£r
->
buf
[∑r£r->
pos
];

145 
°©e
) {

146 
STATE_START
:

147 
tokí_pos
 = 
∑r£r
->
pos
;

148 
tokí_löe
 = 
∑r£r
->
löe
;

149 
tokí_cﬁ
 = 
∑r£r
->
cﬁ
;

150 
c
) {

154 
°©e
 = 
STATE_EOI
;

157 
°©e
 = 
STATE_N
;

160 
°©e
 = 
STATE_F
;

163 
°©e
 = 
STATE_T
;

166 
°©e
 = 
STATE_LBRACKET
;

169 
°©e
 = 
STATE_RBRACKET
;

172 
°©e
 = 
STATE_LBRACE
;

175 
°©e
 = 
STATE_RBRACE
;

178 
°©e
 = 
STATE_COLON
;

181 
°©e
 = 
STATE_COMMA
;

184 
°©e
 = 
STATE_CHARS
;

187 
°©e
 = 
STATE_MINUS
;

190 
°©e
 = 
STATE_LEADING_ZERO
;

194 
°©e
 = 
STATE_DIGITS
;

197 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

198 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

199 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

200  
åue
;

203 
STATE_EOI
:

204 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

205 
TOKEN_TYPE_EOI
, 
tokí_pos
, 
∑r£r
->
pos
 -

206 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

207 
°©e
 = 
STATE_ACCEPT
;

209 
STATE_N
:

210 
c
) {

212 
°©e
 = 
STATE_NU
;

215 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

216 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

217 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

218  
åue
;

221 
STATE_NU
:

222 
c
) {

224 
°©e
 = 
STATE_NUL
;

227 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

228 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

229 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

230  
åue
;

233 
STATE_NUL
:

234 
c
) {

236 
°©e
 = 
STATE_NULL
;

239 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

240 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

241 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

242  
åue
;

245 
STATE_NULL
:

246 
c
) {

253 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

254 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

255 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

256  
åue
;

258 
	`tokí_öô
(&
∑r£r
->
tokí
,Ö¨£r, 
TOKEN_TYPE_NULL
,

259 
tokí_pos
, 
∑r£r
->
pos
 -Åokí_pos, 
tokí_löe
,

260 
tokí_cﬁ
);

261 
°©e
 = 
STATE_ACCEPT
;

263 
STATE_F
:

264 
c
) {

266 
°©e
 = 
STATE_FA
;

269 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

270 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

271 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

272  
åue
;

275 
STATE_FA
:

276 
c
) {

278 
°©e
 = 
STATE_FAL
;

281 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

282 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

283 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

284  
åue
;

287 
STATE_FAL
:

288 
c
) {

290 
°©e
 = 
STATE_FALS
;

293 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

294 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

295 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

296  
åue
;

299 
STATE_FALS
:

300 
c
) {

302 
°©e
 = 
STATE_FALSE
;

305 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

306 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

307 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

308  
åue
;

311 
STATE_FALSE
:

312 
c
) {

319 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

320 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

321 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

322  
åue
;

324 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

325 
TOKEN_TYPE_FALSE
, 
tokí_pos
, 
∑r£r
->
pos
 -

326 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

327 
°©e
 = 
STATE_ACCEPT
;

329 
STATE_T
:

330 
c
) {

332 
°©e
 = 
STATE_TR
;

335 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

336 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

337 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

338  
åue
;

341 
STATE_TR
:

342 
c
) {

344 
°©e
 = 
STATE_TRU
;

347 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

348 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

349 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

350  
åue
;

353 
STATE_TRU
:

354 
c
) {

356 
°©e
 = 
STATE_TRUE
;

359 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

360 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

361 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

362  
åue
;

365 
STATE_TRUE
:

366 
c
) {

373 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

374 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

375 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

376  
åue
;

378 
	`tokí_öô
(&
∑r£r
->
tokí
,Ö¨£r, 
TOKEN_TYPE_TRUE
,

379 
tokí_pos
, 
∑r£r
->
pos
 -Åokí_pos, 
tokí_löe
,

380 
tokí_cﬁ
);

381 
°©e
 = 
STATE_ACCEPT
;

383 
STATE_LBRACKET
:

384 
	`tokí_öô
(&
∑r£r
->
tokí
,Ö¨£r, 
TOKEN_TYPE_LBRACKET
,

385 
tokí_pos
, 
∑r£r
->
pos
 -Åokí_pos, 
tokí_löe
,

386 
tokí_cﬁ
);

387 
°©e
 = 
STATE_ACCEPT
;

389 
STATE_RBRACKET
:

390 
	`tokí_öô
(&
∑r£r
->
tokí
,Ö¨£r, 
TOKEN_TYPE_RBRACKET
,

391 
tokí_pos
, 
∑r£r
->
pos
 -Åokí_pos, 
tokí_löe
,

392 
tokí_cﬁ
);

393 
°©e
 = 
STATE_ACCEPT
;

395 
STATE_LBRACE
:

396 
	`tokí_öô
(&
∑r£r
->
tokí
,Ö¨£r, 
TOKEN_TYPE_LBRACE
,

397 
tokí_pos
, 
∑r£r
->
pos
 -Åokí_pos, 
tokí_löe
,

398 
tokí_cﬁ
);

399 
°©e
 = 
STATE_ACCEPT
;

401 
STATE_RBRACE
:

402 
	`tokí_öô
(&
∑r£r
->
tokí
,Ö¨£r, 
TOKEN_TYPE_RBRACE
,

403 
tokí_pos
, 
∑r£r
->
pos
 -Åokí_pos, 
tokí_löe
,

404 
tokí_cﬁ
);

405 
°©e
 = 
STATE_ACCEPT
;

407 
STATE_COLON
:

408 
	`tokí_öô
(&
∑r£r
->
tokí
,Ö¨£r, 
TOKEN_TYPE_COLON
,

409 
tokí_pos
, 
∑r£r
->
pos
 -Åokí_pos, 
tokí_löe
,

410 
tokí_cﬁ
);

411 
°©e
 = 
STATE_ACCEPT
;

413 
STATE_COMMA
:

414 
	`tokí_öô
(&
∑r£r
->
tokí
,Ö¨£r, 
TOKEN_TYPE_COMMA
,

415 
tokí_pos
, 
∑r£r
->
pos
 -Åokí_pos, 
tokí_löe
,

416 
tokí_cﬁ
);

417 
°©e
 = 
STATE_ACCEPT
;

419 
STATE_CHARS
:

420 
c
) {

422 
°©e
 = 
STATE_CHAR_ESCAPE
;

425 
°©e
 = 
STATE_STRING
;

434 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

435 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

436 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

437  
åue
;

442 
STATE_CHAR_ESCAPE
:

443 
c
) {

446 
°©e
 = 
STATE_CHARS
;

449 
°©e
 = 
STATE_CHAR_U
;

452 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

453 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

454 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

455  
åue
;

458 
STATE_CHAR_U
:

459 
c
) {

466 
°©e
 = 
STATE_CHAR_UD
;

469 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

470 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

471 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

472  
åue
;

475 
STATE_CHAR_UD
:

476 
c
) {

483 
°©e
 = 
STATE_CHAR_UDD
;

486 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

487 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

488 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

489  
åue
;

492 
STATE_CHAR_UDD
:

493 
c
) {

500 
°©e
 = 
STATE_CHAR_UDDD
;

503 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

504 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

505 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

506  
åue
;

509 
STATE_CHAR_UDDD
:

510 
c
) {

517 
°©e
 = 
STATE_CHARS
;

520 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

521 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

522 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

523  
åue
;

526 
STATE_STRING
:

527 
	`tokí_öô
(&
∑r£r
->
tokí
,Ö¨£r, 
TOKEN_TYPE_STRING
,

528 
tokí_pos
, 
∑r£r
->
pos
 -Åokí_pos, 
tokí_löe
,

529 
tokí_cﬁ
);

530 
°©e
 = 
STATE_ACCEPT
;

532 
STATE_MINUS
:

533 
c
) {

535 
°©e
 = 
STATE_LEADING_ZERO
;

539 
°©e
 = 
STATE_DIGITS
;

542 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

543 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

544 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

545  
åue
;

548 
STATE_LEADING_ZERO
:

549 
c
) {

551 
°©e
 = 
STATE_DECIMAL
;

554 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

555 
TOKEN_TYPE_NUMBER
, 
tokí_pos
, 
∑r£r
->
pos
 -

556 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

557 
°©e
 = 
STATE_ACCEPT
;

561 
STATE_DIGITS
:

562 
c
) {

567 
°©e
 = 
STATE_DECIMAL
;

570 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

571 
TOKEN_TYPE_NUMBER
, 
tokí_pos
, 
∑r£r
->
pos
 -

572 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

573 
°©e
 = 
STATE_ACCEPT
;

577 
STATE_DECIMAL
:

578 
c
) {

581 
°©e
 = 
STATE_FRAC_DIGITS
;

584 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

585 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

586 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

587  
åue
;

590 
STATE_FRAC_DIGITS
:

591 
c
) {

596 
°©e
 = 
STATE_EXP
;

599 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

600 
TOKEN_TYPE_NUMBER
, 
tokí_pos
, 
∑r£r
->
pos
 -

601 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

602 
°©e
 = 
STATE_ACCEPT
;

606 
STATE_EXP
:

607 
c
) {

609 
°©e
 = 
STATE_EXP_SIGN
;

613 
°©e
 = 
STATE_EXP_DIGITS
;

616 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

617 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

618 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

619  
åue
;

622 
STATE_EXP_SIGN
:

623 
c
) {

626 
°©e
 = 
STATE_EXP_DIGITS
;

629 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

630 
TOKEN_TYPE_ERROR
, 
tokí_pos
, 
∑r£r
->
pos
 + 1

631 - 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

632  
åue
;

635 
STATE_EXP_DIGITS
:

636 
c
) {

641 
	`tokí_öô
(&
∑r£r
->
tokí
,Öarser,

642 
TOKEN_TYPE_NUMBER
, 
tokí_pos
, 
∑r£r
->
pos
 -

643 
tokí_pos
, 
tokí_löe
, 
tokí_cﬁ
);

644 
°©e
 = 
STATE_ACCEPT
;

649 
	`nŸ_ªached
();

652 i‡(
°©e
 !
STATE_ACCEPT
) {

653 i‡(
c
 == '\n') {

654 
∑r£r
->
löe
++;

655 
∑r£r
->
cﬁ
 = 0;

657 
∑r£r
->
cﬁ
++;

659 
∑r£r
->
pos
++;

662  
Ál£
;

663 
	}
}

665 
boﬁ
 
∑r£r_∑r£_¨øy
(
∑r£r_t
 *
∑r£r
);

666 
boﬁ
 
∑r£r_∑r£_obje˘
(
∑r£r_t
 *
∑r£r
);

668 
boﬁ


669 
	$∑r£r_∑r£_vÆue
(
∑r£r_t
 *
∑r£r
) {

670 
∑r£r
->
tokí
.
tokí_ty≥
) {

671 
TOKEN_TYPE_NULL
:

672 
TOKEN_TYPE_FALSE
:

673 
TOKEN_TYPE_TRUE
:

674 
TOKEN_TYPE_STRING
:

675 
TOKEN_TYPE_NUMBER
:

676  
Ál£
;

677 
TOKEN_TYPE_LBRACE
:

678  
	`∑r£r_∑r£_obje˘
(
∑r£r
);

679 
TOKEN_TYPE_LBRACKET
:

680  
	`∑r£r_∑r£_¨øy
(
∑r£r
);

682  
åue
;

684 
	`nŸ_ªached
();

685 
	}
}

687 
boﬁ


688 
	$∑r£r_∑r£_∑ú
(
∑r£r_t
 *
∑r£r
) {

689 
	`as£π_d_eq
(
∑r£r
->
tokí
.
tokí_ty≥
, 
TOKEN_TYPE_STRING
,

691 i‡(
	`∑r£r_tokíize
(
∑r£r
)) {

692  
åue
;

694 
∑r£r
->
tokí
.
tokí_ty≥
) {

695 
TOKEN_TYPE_COLON
:

696 i‡(
	`∑r£r_tokíize
(
∑r£r
)) {

697  
åue
;

699  
	`∑r£r_∑r£_vÆue
(
∑r£r
);

701  
åue
;

703 
	}
}

705 
boﬁ


706 
	$∑r£r_∑r£_vÆues
(
∑r£r_t
 *
∑r£r
) {

707 i‡(
	`∑r£r_∑r£_vÆue
(
∑r£r
)) {

708  
åue
;

711 
åue
) {

712 i‡(
	`∑r£r_tokíize
(
∑r£r
)) {

713  
åue
;

715 
∑r£r
->
tokí
.
tokí_ty≥
) {

716 
TOKEN_TYPE_COMMA
:

717 i‡(
	`∑r£r_tokíize
(
∑r£r
)) {

718  
åue
;

720 i‡(
	`∑r£r_∑r£_vÆue
(
∑r£r
)) {

721  
åue
;

724 
TOKEN_TYPE_RBRACKET
:

725  
Ál£
;

727  
åue
;

730 
	}
}

732 
boﬁ


733 
	$∑r£r_∑r£_¨øy
(
∑r£r_t
 *
∑r£r
) {

734 
	`as£π_d_eq
(
∑r£r
->
tokí
.
tokí_ty≥
, 
TOKEN_TYPE_LBRACKET
,

736 i‡(
	`∑r£r_tokíize
(
∑r£r
)) {

737  
åue
;

739 
∑r£r
->
tokí
.
tokí_ty≥
) {

740 
TOKEN_TYPE_RBRACKET
:

741  
Ál£
;

743  
	`∑r£r_∑r£_vÆues
(
∑r£r
);

745 
	`nŸ_ªached
();

746 
	}
}

748 
boﬁ


749 
	$∑r£r_∑r£_∑ús
(
∑r£r_t
 *
∑r£r
) {

750 
	`as£π_d_eq
(
∑r£r
->
tokí
.
tokí_ty≥
, 
TOKEN_TYPE_STRING
,

752 i‡(
	`∑r£r_∑r£_∑ú
(
∑r£r
)) {

753  
åue
;

756 
åue
) {

757 i‡(
	`∑r£r_tokíize
(
∑r£r
)) {

758  
åue
;

760 
∑r£r
->
tokí
.
tokí_ty≥
) {

761 
TOKEN_TYPE_COMMA
:

762 i‡(
	`∑r£r_tokíize
(
∑r£r
)) {

763  
åue
;

765 
∑r£r
->
tokí
.
tokí_ty≥
) {

766 
TOKEN_TYPE_STRING
:

767 i‡(
	`∑r£r_∑r£_∑ú
(
∑r£r
)) {

768  
åue
;

772  
åue
;

775 
TOKEN_TYPE_RBRACE
:

776  
Ál£
;

778  
åue
;

781 
	}
}

783 
boﬁ


784 
	$∑r£r_∑r£_obje˘
(
∑r£r_t
 *
∑r£r
) {

785 
	`as£π_d_eq
(
∑r£r
->
tokí
.
tokí_ty≥
, 
TOKEN_TYPE_LBRACE
,

787 i‡(
	`∑r£r_tokíize
(
∑r£r
)) {

788  
åue
;

790 
∑r£r
->
tokí
.
tokí_ty≥
) {

791 
TOKEN_TYPE_STRING
:

792  
	`∑r£r_∑r£_∑ús
(
∑r£r
);

793 
TOKEN_TYPE_RBRACE
:

794  
Ál£
;

796  
åue
;

798 
	`nŸ_ªached
();

799 
	}
}

801 
boﬁ


802 
	$∑r£r_∑r£
(
∑r£r_t
 *
∑r£r
) {

803 i‡(
	`∑r£r_tokíize
(
∑r£r
)) {

804 
œbñ_îr‹
;

806 i‡(
	`∑r£r_∑r£_vÆue
(
∑r£r
)) {

807 
œbñ_îr‹
;

810 i‡(
	`∑r£r_tokíize
(
∑r£r
)) {

811 
œbñ_îr‹
;

813 
∑r£r
->
tokí
.
tokí_ty≥
) {

814 
TOKEN_TYPE_EOI
:

815  
Ál£
;

817 
œbñ_îr‹
;

819 
	`nŸ_ªached
();

821 
œbñ_îr‹
:

822 
	`tokí_îr‹
(&
∑r£r
->
tokí
);

823  
åue
;

824 
	}
}

826 
	$TEST_BEGIN
(
ã°_js⁄_∑r£r
) {

827 
size_t
 
i
;

828 c⁄° *
övÆid_öputs
[] = {

864 c⁄° *
vÆid_öputs
[] = {

898 
i
 = 0; i < (
övÆid_öputs
)/(const *); i++) {

899 c⁄° *
öput
 = 
övÆid_öputs
[
i
];

900 
∑r£r_t
 
∑r£r
;

901 
	`∑r£r_öô
(&
∑r£r
, 
Ál£
);

902 
	`as£π_Ál£
(
	`∑r£r_≠≥nd
(&
∑r£r
, 
öput
),

904 
	`as£π_åue
(
	`∑r£r_∑r£
(&
∑r£r
),

905 "U√x≥˘edÖ¨£ suc˚s†f‹ i≈ut: %s", 
öput
);

906 
	`∑r£r_föi
(&
∑r£r
);

909 
i
 = 0; i < (
vÆid_öputs
)/(const *); i++) {

910 c⁄° *
öput
 = 
vÆid_öputs
[
i
];

911 
∑r£r_t
 
∑r£r
;

912 
	`∑r£r_öô
(&
∑r£r
, 
åue
);

913 
	`as£π_Ál£
(
	`∑r£r_≠≥nd
(&
∑r£r
, 
öput
),

915 
	`as£π_Ál£
(
	`∑r£r_∑r£
(&
∑r£r
),

916 "U√x≥˘edÖ¨£Éº‹ f‹ i≈ut: %s", 
öput
);

917 
	`∑r£r_föi
(&
∑r£r
);

919 
	}
}

920 
TEST_END


923 
	$wrôe_cb
(*
›aque
, c⁄° *
°r
) {

924 
∑r£r_t
 *
∑r£r
 = (∑r£r_à*)
›aque
;

925 i‡(
	`∑r£r_≠≥nd
(
∑r£r
, 
°r
)) {

926 
	`ã°_Áû
("Unexpected inputáppending failure");

928 
	}
}

930 
	$TEST_BEGIN
(
ã°_°©s_¥öt_js⁄
) {

931 c⁄° *
›ts
[] = {

954 
¨ía_öd
, 
i
;

956 
i
 = 0; i < 3; i++) {

957 
j
;

959 
i
) {

963 
size_t
 
sz
 = (
¨ía_öd
);

964 
	`as£π_d_eq
(
	`mÆl˘l
("¨ías.¸óã", (*)&
¨ía_öd
,

965 &
sz
, 
NULL
, 0), 0, "Unexpected mallctl failure");

968 
size_t
 
mib
[3];

969 
size_t
 
mibÀn
 = (
mib
)/(size_t);

970 
	`as£π_d_eq
(
	`mÆl˘ amëomib
("arena.0.destroy",

971 
mib
, &
mibÀn
), 0,

973 
mib
[1] = 
¨ía_öd
;

974 
	`as£π_d_eq
(
	`mÆl˘lbymib
(
mib
, 
mibÀn
, 
NULL
, NULL, NULL,

978 
	`nŸ_ªached
();

981 
j
 = 0; j < (
›ts
)/(const *); j++) {

982 
∑r£r_t
 
∑r£r
;

984 
	`∑r£r_öô
(&
∑r£r
, 
åue
);

985 
	`mÆloc_°©s_¥öt
(
wrôe_cb
, (*)&
∑r£r
, 
›ts
[
j
]);

986 
	`as£π_Ál£
(
	`∑r£r_∑r£
(&
∑r£r
),

987 "U√x≥˘edÖ¨£Éº‹, o±s=\"%s\"", 
›ts
[
j
]);

988 
	`∑r£r_föi
(&
∑r£r
);

991 
	}
}

992 
TEST_END


995 
	$maö
() {

996  
	`ã°
(

997 
ã°_js⁄_∑r£r
,

998 
ã°_°©s_¥öt_js⁄
);

999 
	}
}

	@test/unit/ticker.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	~"jemÆloc/öã∫Æ/tickî.h
"

5 
	$TEST_BEGIN
(
ã°_tickî_tick
) {

6 
	#NREPS
 2

	)

7 
	#NTICKS
 3

	)

8 
tickî_t
 
tickî
;

9 
öt32_t
 
i
, 
j
;

11 
	`tickî_öô
(&
tickî
, 
NTICKS
);

12 
i
 = 0; i < 
NREPS
; i++) {

13 
j
 = 0; j < 
NTICKS
; j++) {

14 
	`as£π_u_eq
(
	`tickî_ªad
(&
tickî
), 
NTICKS
 - 
j
,

15 "U√x≥˘edÅickî vÆuê(i=%d, j=%d)", 
i
, 
j
);

16 
	`as£π_Ál£
(
	`tickî_tick
(&
tickî
),

17 "U√x≥˘edÅickî fúê(i=%d, j=%d)", 
i
, 
j
);

19 
	`as£π_u32_eq
(
	`tickî_ªad
(&
tickî
), 0,

21 
	`as£π_åue
(
	`tickî_tick
(&
tickî
),

22 "Ex≥˘edÅickî fúê(i=%d)", 
i
);

23 
	`as£π_u32_eq
(
	`tickî_ªad
(&
tickî
), 
NTICKS
,

26 #unde‡
NTICKS


27 
	}
}

28 
TEST_END


30 
	$TEST_BEGIN
(
ã°_tickî_ticks
) {

31 
	#NTICKS
 3

	)

32 
tickî_t
 
tickî
;

34 
	`tickî_öô
(&
tickî
, 
NTICKS
);

36 
	`as£π_u_eq
(
	`tickî_ªad
(&
tickî
), 
NTICKS
, "UnexpectedÅicker value");

37 
	`as£π_Ál£
(
	`tickî_ticks
(&
tickî
, 
NTICKS
), "UnexpectedÅicker fire");

38 
	`as£π_u_eq
(
	`tickî_ªad
(&
tickî
), 0, "UnexpectedÅicker value");

39 
	`as£π_åue
(
	`tickî_ticks
(&
tickî
, 
NTICKS
), "ExpectedÅicker fire");

40 
	`as£π_u_eq
(
	`tickî_ªad
(&
tickî
), 
NTICKS
, "UnexpectedÅicker value");

42 
	`as£π_åue
(
	`tickî_ticks
(&
tickî
, 
NTICKS
 + 1), "ExpectedÅicker fire");

43 
	`as£π_u_eq
(
	`tickî_ªad
(&
tickî
), 
NTICKS
, "UnexpectedÅicker value");

44 #unde‡
NTICKS


45 
	}
}

46 
TEST_END


48 
	$TEST_BEGIN
(
ã°_tickî_c›y
) {

49 
	#NTICKS
 3

	)

50 
tickî_t
 
è
, 
tb
;

52 
	`tickî_öô
(&
è
, 
NTICKS
);

53 
	`tickî_c›y
(&
tb
, &
è
);

54 
	`as£π_u_eq
(
	`tickî_ªad
(&
tb
), 
NTICKS
, "UnexpectedÅicker value");

55 
	`as£π_åue
(
	`tickî_ticks
(&
tb
, 
NTICKS
 + 1), "ExpectedÅicker fire");

56 
	`as£π_u_eq
(
	`tickî_ªad
(&
tb
), 
NTICKS
, "UnexpectedÅicker value");

58 
	`tickî_tick
(&
è
);

59 
	`tickî_c›y
(&
tb
, &
è
);

60 
	`as£π_u_eq
(
	`tickî_ªad
(&
tb
), 
NTICKS
 - 1, "UnexpectedÅicker value");

61 
	`as£π_åue
(
	`tickî_ticks
(&
tb
, 
NTICKS
), "ExpectedÅicker fire");

62 
	`as£π_u_eq
(
	`tickî_ªad
(&
tb
), 
NTICKS
, "UnexpectedÅicker value");

63 #unde‡
NTICKS


64 
	}
}

65 
TEST_END


68 
	$maö
() {

69  
	`ã°
(

70 
ã°_tickî_tick
,

71 
ã°_tickî_ticks
,

72 
ã°_tickî_c›y
);

73 
	}
}

	@test/unit/tsd.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
	gd©a_˛ónup_cou¡
;

6 
	$d©a_˛ónup
(*
d©a
) {

7 i‡(
d©a_˛ónup_cou¡
 == 0) {

8 
	`as£π_x_eq
(*
d©a
, 
MALLOC_TSD_TEST_DATA_INIT
,

12 ++
d©a_˛ónup_cou¡
;

18 
boﬁ
 
ªöˇ∫©e
 = 
Ál£
;

19 *
d©a
) {

20 
MALLOC_TSD_TEST_DATA_INIT
:

21 *
d©a
 = 1;

22 
ªöˇ∫©e
 = 
åue
;

25 *
d©a
 = 2;

26 
ªöˇ∫©e
 = 
åue
;

31 
	`nŸ_ªached
();

34 i‡(
ªöˇ∫©e
) {

35 *
p
 = 
	`mÆlocx
(1, 0);

36 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpeced mallocx() failure");

37 
	`dÆlocx
(
p
, 0);

39 
	}
}

42 
	$thd_°¨t
(*
¨g
) {

43 
d
 = ()(
uöçå_t
)
¨g
;

44 *
p
;

46 
tsd_t
 *
tsd
 = 
	`tsd_„tch
();

47 
	`as£π_x_eq
(
	`tsd_ã°_d©a_gë
(
tsd
), 
MALLOC_TSD_TEST_DATA_INIT
,

50 
p
 = 
	`mÆloc
(1);

51 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected malloc() failure");

53 
	`tsd_ã°_d©a_£t
(
tsd
, 
d
);

54 
	`as£π_x_eq
(
	`tsd_ã°_d©a_gë
(
tsd
), 
d
,

57 
d
 = 0;

58 
	`as£π_x_eq
(
	`tsd_ã°_d©a_gë
(
tsd
), ()(
uöçå_t
)
¨g
,

61 
	`tsd_ã°_ˇŒback_£t
(
tsd
, &
d©a_˛ónup
);

63 
	`‰ì
(
p
);

64  
NULL
;

65 
	}
}

67 
	$TEST_BEGIN
(
ã°_tsd_maö_thªad
) {

68 
	`thd_°¨t
((*)(
uöçå_t
)0xa5f3e329);

69 
	}
}

70 
TEST_END


72 
	$TEST_BEGIN
(
ã°_tsd_sub_thªad
) {

73 
thd_t
 
thd
;

75 
d©a_˛ónup_cou¡
 = 0;

76 
	`thd_¸óã
(&
thd
, 
thd_°¨t
, (*)
MALLOC_TSD_TEST_DATA_INIT
);

77 
	`thd_joö
(
thd
, 
NULL
);

82 
	`as£π_x_ge
(
d©a_˛ónup_cou¡
, 3,

84 
	}
}

85 
TEST_END


88 
	$thd_°¨t_ªöˇ∫©ed
(*
¨g
) {

89 
tsd_t
 *
tsd
 = 
	`tsd_„tch
();

90 
	`as£π
(
tsd
);

92 *
p
 = 
	`mÆloc
(1);

93 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected malloc() failure");

96 
	`as£π_±r_nŸ_nuŒ
(
	`tsd_¨ía_gë
(
tsd
),

98 
	`tsd_˛ónup
((*)
tsd
);

99 
	`as£π_±r_nuŒ
(*
	`tsd_¨í≠_gë_unß„
(
tsd
),

101 
	`as£π_u_eq
(
tsd
->
°©e
, 
tsd_°©e_purg©‹y
,

104 
	`‰ì
(
p
);

105 
	`as£π_u_eq
(
tsd
->
°©e
, 
tsd_°©e_ªöˇ∫©ed
,

107 
p
 = 
	`mÆlocx
(1, 
MALLOCX_TCACHE_NONE
);

108 
	`as£π_±r_nŸ_nuŒ
(
p
, "Unexpected malloc() failure");

109 
	`as£π_±r_nuŒ
(*
	`tsd_¨í≠_gë_unß„
(
tsd
),

112 
	`‰ì
(
p
);

113 
	`tsd_˛ónup
((*)
tsd
);

114 
	`as£π_±r_nuŒ
(*
	`tsd_¨í≠_gë_unß„
(
tsd
),

117  
NULL
;

118 
	}
}

120 
	$TEST_BEGIN
(
ã°_tsd_ªöˇ∫©i⁄
) {

121 
thd_t
 
thd
;

122 
	`thd_¸óã
(&
thd
, 
thd_°¨t_ªöˇ∫©ed
, 
NULL
);

123 
	`thd_joö
(
thd
, 
NULL
);

124 
	}
}

125 
TEST_END


128 
	$maö
() {

130 i‡(
	`«Œocx
(1, 0) == 0) {

131 
	`mÆloc_¥ötf
("InitializationÉrror");

132  
ã°_°©us_Áû
;

135  
	`ã°_no_ªíå™cy
(

136 
ã°_tsd_maö_thªad
,

137 
ã°_tsd_sub_thªad
,

138 
ã°_tsd_ªöˇ∫©i⁄
);

139 
	}
}

	@test/unit/witness.c

1 
	~"ã°/jemÆloc_ã°.h
"

3 
wô√ss_lock_îr‹_t
 *
	gwô√ss_lock_îr‹_‹ig
;

4 
wô√ss_ow√r_îr‹_t
 *
	gwô√ss_ow√r_îr‹_‹ig
;

5 
wô√ss_nŸ_ow√r_îr‹_t
 *
	gwô√ss_nŸ_ow√r_îr‹_‹ig
;

6 
wô√ss_dïth_îr‹_t
 *
	gwô√ss_dïth_îr‹_‹ig
;

8 
boﬁ
 
	gßw_lock_îr‹
;

9 
boﬁ
 
	gßw_ow√r_îr‹
;

10 
boﬁ
 
	gßw_nŸ_ow√r_îr‹
;

11 
boﬁ
 
	gßw_dïth_îr‹
;

14 
	$wô√ss_lock_îr‹_öãr˚±
(c⁄° 
wô√ss_li°_t
 *
wô√s£s
,

15 c⁄° 
wô√ss_t
 *
wô√ss
) {

16 
ßw_lock_îr‹
 = 
åue
;

17 
	}
}

20 
	$wô√ss_ow√r_îr‹_öãr˚±
(c⁄° 
wô√ss_t
 *
wô√ss
) {

21 
ßw_ow√r_îr‹
 = 
åue
;

22 
	}
}

25 
	$wô√ss_nŸ_ow√r_îr‹_öãr˚±
(c⁄° 
wô√ss_t
 *
wô√ss
) {

26 
ßw_nŸ_ow√r_îr‹
 = 
åue
;

27 
	}
}

30 
	$wô√ss_dïth_îr‹_öãr˚±
(c⁄° 
wô√ss_li°_t
 *
wô√s£s
,

31 
wô√ss_ønk_t
 
ønk_ö˛usive
, 
dïth
) {

32 
ßw_dïth_îr‹
 = 
åue
;

33 
	}
}

36 
	$wô√ss_comp
(c⁄° 
wô√ss_t
 *
a
, *
ﬂ
, c⁄° wô√ss_à*
b
, *
ob
) {

37 
	`as£π_u_eq
(
a
->
ønk
, 
b
->rank, "Witnesses should haveÉqualÑank");

39 
	`as£π
(
ﬂ
 =(*)
a
);

40 
	`as£π
(
ob
 =(*)
b
);

42  
	`°rcmp
(
a
->
«me
, 
b
->name);

43 
	}
}

46 
	$wô√ss_comp_ªvî£
(c⁄° 
wô√ss_t
 *
a
, *
ﬂ
, c⁄° wô√ss_à*
b
,

47 *
ob
) {

48 
	`as£π_u_eq
(
a
->
ønk
, 
b
->rank, "Witnesses should haveÉqualÑank");

50 
	`as£π
(
ﬂ
 =(*)
a
);

51 
	`as£π
(
ob
 =(*)
b
);

53  -
	`°rcmp
(
a
->
«me
, 
b
->name);

54 
	}
}

56 
	$TEST_BEGIN
(
ã°_wô√ss
) {

57 
wô√ss_t
 
a
, 
b
;

58 
wô√ss_tsdn_t
 
wô√ss_tsdn
 = { 
WITNESS_TSD_INITIALIZER
 };

60 
	`ã°_skù_if
(!
c⁄fig_debug
);

62 
	`wô√ss_as£π_lockÀss
(&
wô√ss_tsdn
);

63 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 0);

64 
	`wô√ss_as£π_dïth_to_ønk
(&
wô√ss_tsdn
, (
wô√ss_ønk_t
)1U, 0);

66 
	`wô√ss_öô
(&
a
, "a", 1, 
NULL
, NULL);

67 
	`wô√ss_as£π_nŸ_ow√r
(&
wô√ss_tsdn
, &
a
);

68 
	`wô√ss_lock
(&
wô√ss_tsdn
, &
a
);

69 
	`wô√ss_as£π_ow√r
(&
wô√ss_tsdn
, &
a
);

70 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 1);

71 
	`wô√ss_as£π_dïth_to_ønk
(&
wô√ss_tsdn
, (
wô√ss_ønk_t
)1U, 1);

72 
	`wô√ss_as£π_dïth_to_ønk
(&
wô√ss_tsdn
, (
wô√ss_ønk_t
)2U, 0);

74 
	`wô√ss_öô
(&
b
, "b", 2, 
NULL
, NULL);

75 
	`wô√ss_as£π_nŸ_ow√r
(&
wô√ss_tsdn
, &
b
);

76 
	`wô√ss_lock
(&
wô√ss_tsdn
, &
b
);

77 
	`wô√ss_as£π_ow√r
(&
wô√ss_tsdn
, &
b
);

78 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 2);

79 
	`wô√ss_as£π_dïth_to_ønk
(&
wô√ss_tsdn
, (
wô√ss_ønk_t
)1U, 2);

80 
	`wô√ss_as£π_dïth_to_ønk
(&
wô√ss_tsdn
, (
wô√ss_ønk_t
)2U, 1);

81 
	`wô√ss_as£π_dïth_to_ønk
(&
wô√ss_tsdn
, (
wô√ss_ønk_t
)3U, 0);

83 
	`wô√ss_u∆ock
(&
wô√ss_tsdn
, &
a
);

84 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 1);

85 
	`wô√ss_as£π_dïth_to_ønk
(&
wô√ss_tsdn
, (
wô√ss_ønk_t
)1U, 1);

86 
	`wô√ss_as£π_dïth_to_ønk
(&
wô√ss_tsdn
, (
wô√ss_ønk_t
)2U, 1);

87 
	`wô√ss_as£π_dïth_to_ønk
(&
wô√ss_tsdn
, (
wô√ss_ønk_t
)3U, 0);

88 
	`wô√ss_u∆ock
(&
wô√ss_tsdn
, &
b
);

90 
	`wô√ss_as£π_lockÀss
(&
wô√ss_tsdn
);

91 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 0);

92 
	`wô√ss_as£π_dïth_to_ønk
(&
wô√ss_tsdn
, (
wô√ss_ønk_t
)1U, 0);

93 
	}
}

94 
TEST_END


96 
	$TEST_BEGIN
(
ã°_wô√ss_comp
) {

97 
wô√ss_t
 
a
, 
b
, 
c
, 
d
;

98 
wô√ss_tsdn_t
 
wô√ss_tsdn
 = { 
WITNESS_TSD_INITIALIZER
 };

100 
	`ã°_skù_if
(!
c⁄fig_debug
);

102 
	`wô√ss_as£π_lockÀss
(&
wô√ss_tsdn
);

104 
	`wô√ss_öô
(&
a
, "a", 1, 
wô√ss_comp
, &a);

105 
	`wô√ss_as£π_nŸ_ow√r
(&
wô√ss_tsdn
, &
a
);

106 
	`wô√ss_lock
(&
wô√ss_tsdn
, &
a
);

107 
	`wô√ss_as£π_ow√r
(&
wô√ss_tsdn
, &
a
);

108 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 1);

110 
	`wô√ss_öô
(&
b
, "b", 1, 
wô√ss_comp
, &b);

111 
	`wô√ss_as£π_nŸ_ow√r
(&
wô√ss_tsdn
, &
b
);

112 
	`wô√ss_lock
(&
wô√ss_tsdn
, &
b
);

113 
	`wô√ss_as£π_ow√r
(&
wô√ss_tsdn
, &
b
);

114 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 2);

115 
	`wô√ss_u∆ock
(&
wô√ss_tsdn
, &
b
);

116 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 1);

118 
wô√ss_lock_îr‹_‹ig
 = 
wô√ss_lock_îr‹
;

119 
wô√ss_lock_îr‹
 = 
wô√ss_lock_îr‹_öãr˚±
;

120 
ßw_lock_îr‹
 = 
Ál£
;

122 
	`wô√ss_öô
(&
c
, "c", 1, 
wô√ss_comp_ªvî£
, &c);

123 
	`wô√ss_as£π_nŸ_ow√r
(&
wô√ss_tsdn
, &
c
);

124 
	`as£π_Ál£
(
ßw_lock_îr‹
, "Unexpected witnessÜockÉrror");

125 
	`wô√ss_lock
(&
wô√ss_tsdn
, &
c
);

126 
	`as£π_åue
(
ßw_lock_îr‹
, "Expected witnessÜockÉrror");

127 
	`wô√ss_u∆ock
(&
wô√ss_tsdn
, &
c
);

128 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 1);

130 
ßw_lock_îr‹
 = 
Ál£
;

132 
	`wô√ss_öô
(&
d
, "d", 1, 
NULL
, NULL);

133 
	`wô√ss_as£π_nŸ_ow√r
(&
wô√ss_tsdn
, &
d
);

134 
	`as£π_Ál£
(
ßw_lock_îr‹
, "Unexpected witnessÜockÉrror");

135 
	`wô√ss_lock
(&
wô√ss_tsdn
, &
d
);

136 
	`as£π_åue
(
ßw_lock_îr‹
, "Expected witnessÜockÉrror");

137 
	`wô√ss_u∆ock
(&
wô√ss_tsdn
, &
d
);

138 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 1);

140 
	`wô√ss_u∆ock
(&
wô√ss_tsdn
, &
a
);

142 
	`wô√ss_as£π_lockÀss
(&
wô√ss_tsdn
);

144 
wô√ss_lock_îr‹
 = 
wô√ss_lock_îr‹_‹ig
;

145 
	}
}

146 
TEST_END


148 
	$TEST_BEGIN
(
ã°_wô√ss_ªvîßl
) {

149 
wô√ss_t
 
a
, 
b
;

150 
wô√ss_tsdn_t
 
wô√ss_tsdn
 = { 
WITNESS_TSD_INITIALIZER
 };

152 
	`ã°_skù_if
(!
c⁄fig_debug
);

154 
wô√ss_lock_îr‹_‹ig
 = 
wô√ss_lock_îr‹
;

155 
wô√ss_lock_îr‹
 = 
wô√ss_lock_îr‹_öãr˚±
;

156 
ßw_lock_îr‹
 = 
Ál£
;

158 
	`wô√ss_as£π_lockÀss
(&
wô√ss_tsdn
);

160 
	`wô√ss_öô
(&
a
, "a", 1, 
NULL
, NULL);

161 
	`wô√ss_öô
(&
b
, "b", 2, 
NULL
, NULL);

163 
	`wô√ss_lock
(&
wô√ss_tsdn
, &
b
);

164 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 1);

165 
	`as£π_Ál£
(
ßw_lock_îr‹
, "Unexpected witnessÜockÉrror");

166 
	`wô√ss_lock
(&
wô√ss_tsdn
, &
a
);

167 
	`as£π_åue
(
ßw_lock_îr‹
, "Expected witnessÜockÉrror");

169 
	`wô√ss_u∆ock
(&
wô√ss_tsdn
, &
a
);

170 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 1);

171 
	`wô√ss_u∆ock
(&
wô√ss_tsdn
, &
b
);

173 
	`wô√ss_as£π_lockÀss
(&
wô√ss_tsdn
);

175 
wô√ss_lock_îr‹
 = 
wô√ss_lock_îr‹_‹ig
;

176 
	}
}

177 
TEST_END


179 
	$TEST_BEGIN
(
ã°_wô√ss_ªcursive
) {

180 
wô√ss_t
 
a
;

181 
wô√ss_tsdn_t
 
wô√ss_tsdn
 = { 
WITNESS_TSD_INITIALIZER
 };

183 
	`ã°_skù_if
(!
c⁄fig_debug
);

185 
wô√ss_nŸ_ow√r_îr‹_‹ig
 = 
wô√ss_nŸ_ow√r_îr‹
;

186 
wô√ss_nŸ_ow√r_îr‹
 = 
wô√ss_nŸ_ow√r_îr‹_öãr˚±
;

187 
ßw_nŸ_ow√r_îr‹
 = 
Ál£
;

189 
wô√ss_lock_îr‹_‹ig
 = 
wô√ss_lock_îr‹
;

190 
wô√ss_lock_îr‹
 = 
wô√ss_lock_îr‹_öãr˚±
;

191 
ßw_lock_îr‹
 = 
Ál£
;

193 
	`wô√ss_as£π_lockÀss
(&
wô√ss_tsdn
);

195 
	`wô√ss_öô
(&
a
, "a", 1, 
NULL
, NULL);

197 
	`wô√ss_lock
(&
wô√ss_tsdn
, &
a
);

198 
	`as£π_Ál£
(
ßw_lock_îr‹
, "Unexpected witnessÜockÉrror");

199 
	`as£π_Ál£
(
ßw_nŸ_ow√r_îr‹
, "Unexpected witnessÇot ownerÉrror");

200 
	`wô√ss_lock
(&
wô√ss_tsdn
, &
a
);

201 
	`as£π_åue
(
ßw_lock_îr‹
, "Expected witnessÜockÉrror");

202 
	`as£π_åue
(
ßw_nŸ_ow√r_îr‹
, "Expected witnessÇot ownerÉrror");

204 
	`wô√ss_u∆ock
(&
wô√ss_tsdn
, &
a
);

206 
	`wô√ss_as£π_lockÀss
(&
wô√ss_tsdn
);

208 
wô√ss_ow√r_îr‹
 = 
wô√ss_ow√r_îr‹_‹ig
;

209 
wô√ss_lock_îr‹
 = 
wô√ss_lock_îr‹_‹ig
;

211 
	}
}

212 
TEST_END


214 
	$TEST_BEGIN
(
ã°_wô√ss_u∆ock_nŸ_ow√d
) {

215 
wô√ss_t
 
a
;

216 
wô√ss_tsdn_t
 
wô√ss_tsdn
 = { 
WITNESS_TSD_INITIALIZER
 };

218 
	`ã°_skù_if
(!
c⁄fig_debug
);

220 
wô√ss_ow√r_îr‹_‹ig
 = 
wô√ss_ow√r_îr‹
;

221 
wô√ss_ow√r_îr‹
 = 
wô√ss_ow√r_îr‹_öãr˚±
;

222 
ßw_ow√r_îr‹
 = 
Ál£
;

224 
	`wô√ss_as£π_lockÀss
(&
wô√ss_tsdn
);

226 
	`wô√ss_öô
(&
a
, "a", 1, 
NULL
, NULL);

228 
	`as£π_Ál£
(
ßw_ow√r_îr‹
, "Unexpected ownerÉrror");

229 
	`wô√ss_u∆ock
(&
wô√ss_tsdn
, &
a
);

230 
	`as£π_åue
(
ßw_ow√r_îr‹
, "Expected ownerÉrror");

232 
	`wô√ss_as£π_lockÀss
(&
wô√ss_tsdn
);

234 
wô√ss_ow√r_îr‹
 = 
wô√ss_ow√r_îr‹_‹ig
;

235 
	}
}

236 
TEST_END


238 
	$TEST_BEGIN
(
ã°_wô√ss_dïth
) {

239 
wô√ss_t
 
a
;

240 
wô√ss_tsdn_t
 
wô√ss_tsdn
 = { 
WITNESS_TSD_INITIALIZER
 };

242 
	`ã°_skù_if
(!
c⁄fig_debug
);

244 
wô√ss_dïth_îr‹_‹ig
 = 
wô√ss_dïth_îr‹
;

245 
wô√ss_dïth_îr‹
 = 
wô√ss_dïth_îr‹_öãr˚±
;

246 
ßw_dïth_îr‹
 = 
Ál£
;

248 
	`wô√ss_as£π_lockÀss
(&
wô√ss_tsdn
);

249 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 0);

251 
	`wô√ss_öô
(&
a
, "a", 1, 
NULL
, NULL);

253 
	`as£π_Ál£
(
ßw_dïth_îr‹
, "Unexpected depthÉrror");

254 
	`wô√ss_as£π_lockÀss
(&
wô√ss_tsdn
);

255 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 0);

257 
	`wô√ss_lock
(&
wô√ss_tsdn
, &
a
);

258 
	`wô√ss_as£π_lockÀss
(&
wô√ss_tsdn
);

259 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 0);

260 
	`as£π_åue
(
ßw_dïth_îr‹
, "Expected depthÉrror");

262 
	`wô√ss_u∆ock
(&
wô√ss_tsdn
, &
a
);

264 
	`wô√ss_as£π_lockÀss
(&
wô√ss_tsdn
);

265 
	`wô√ss_as£π_dïth
(&
wô√ss_tsdn
, 0);

267 
wô√ss_dïth_îr‹
 = 
wô√ss_dïth_îr‹_‹ig
;

268 
	}
}

269 
TEST_END


272 
	$maö
() {

273  
	`ã°
(

274 
ã°_wô√ss
,

275 
ã°_wô√ss_comp
,

276 
ã°_wô√ss_ªvîßl
,

277 
ã°_wô√ss_ªcursive
,

278 
ã°_wô√ss_u∆ock_nŸ_ow√d
,

279 
ã°_wô√ss_dïth
);

280 
	}
}

	@test/unit/zero.c

1 
	~"ã°/jemÆloc_ã°.h
"

4 
	$ã°_zîo
(
size_t
 
sz_mö
, size_à
sz_max
) {

5 
uöt8_t
 *
s
;

6 
size_t
 
sz_¥ev
, 
sz
, 
i
;

7 
	#MAGIC
 ((
uöt8_t
)0x61)

	)

9 
sz_¥ev
 = 0;

10 
s
 = (
uöt8_t
 *)
	`mÆlocx
(
sz_mö
, 0);

11 
	`as£π_±r_nŸ_nuŒ
((*)
s
, "Unexpected mallocx() failure");

13 
sz
 = 
	`ßŒocx
(
s
, 0); sz <
sz_max
;

14 
sz_¥ev
 = 
sz
, sz = 
	`ßŒocx
(
s
, 0)) {

15 i‡(
sz_¥ev
 > 0) {

16 
	`as£π_u_eq
(
s
[0], 
MAGIC
,

18 
	`ZU
(0), 
sz_¥ev
);

19 
	`as£π_u_eq
(
s
[
sz_¥ev
-1], 
MAGIC
,

21 
sz_¥ev
-1, sz_prev);

24 
i
 = 
sz_¥ev
; i < 
sz
; i++) {

25 
	`as£π_u_eq
(
s
[
i
], 0x0,

27 
i
, 
sz
);

28 
s
[
i
] = 
MAGIC
;

31 i‡(
	`xÆlocx
(
s
, 
sz
+1, 0, 0) == sz) {

32 
s
 = (
uöt8_t
 *)
	`øŒocx
(s, 
sz
+1, 0);

33 
	`as£π_±r_nŸ_nuŒ
((*)
s
,

38 
	`dÆlocx
(
s
, 0);

39 #unde‡
MAGIC


40 
	}
}

42 
	$TEST_BEGIN
(
ã°_zîo_smÆl
) {

43 
	`ã°_skù_if
(!
c⁄fig_fûl
);

44 
	`ã°_zîo
(1, 
SMALL_MAXCLASS
-1);

45 
	}
}

46 
TEST_END


48 
	$TEST_BEGIN
(
ã°_zîo_œrge
) {

49 
	`ã°_skù_if
(!
c⁄fig_fûl
);

50 
	`ã°_zîo
(
SMALL_MAXCLASS
+1, (1U << (
LG_LARGE_MINCLASS
+1)));

51 
	}
}

52 
TEST_END


55 
	$maö
() {

56  
	`ã°
(

57 
ã°_zîo_smÆl
,

58 
ã°_zîo_œrge
);

59 
	}
}

	@/usr/include/alloca.h

18 #i‚def 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<„©uªs.h
>

23 
	#__√ed_size_t


	)

24 
	~<°ddef.h
>

26 
	g__BEGIN_DECLS


29 #unde‡
Æloˇ


32 *
	$Æloˇ
 (
size_t
 
__size
Ë
__THROW
;

34 #ifdef 
__GNUC__


35 
	#Æloˇ
(
size
Ë
	`__buûtö_Æloˇ
 (size)

	)

38 
__END_DECLS


	@/usr/include/ctype.h

22 #i‚def 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 
	g__BEGIN_DECLS


30 #i‚de‡
_ISbô


39 
	~<ídün.h
>

40 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


41 
	#_ISbô
(
bô
Ë(1 << (bô))

	)

43 
	#_ISbô
(
bô
Ë((bôË< 8 ? ((1 << (bô)Ë<< 8Ë: ((1 << (bô)Ë>> 8))

	)

48 
	m_ISuµî
 = 
_ISbô
 (0),

49 
	m_ISlowî
 = 
_ISbô
 (1),

50 
	m_ISÆpha
 = 
_ISbô
 (2),

51 
	m_ISdigô
 = 
_ISbô
 (3),

52 
	m_ISxdigô
 = 
_ISbô
 (4),

53 
	m_IS•a˚
 = 
_ISbô
 (5),

54 
	m_IS¥öt
 = 
_ISbô
 (6),

55 
	m_ISgøph
 = 
_ISbô
 (7),

56 
	m_ISbœnk
 = 
_ISbô
 (8),

57 
	m_IS˙ål
 = 
_ISbô
 (9),

58 
	m_ISpun˘
 = 
_ISbô
 (10),

59 
	m_ISÆnum
 = 
_ISbô
 (11)

79 c⁄° **
	$__˘y≥_b_loc
 ()

80 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

81 c⁄° 
__öt32_t
 **
	$__˘y≥_tﬁowî_loc
 ()

82 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

83 c⁄° 
__öt32_t
 **
	$__˘y≥_touµî_loc
 ()

84 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

87 #i‚de‡
__˝lu•lus


88 
	#__is˘y≥
(
c
, 
ty≥
) \

89 ((*
	`__˘y≥_b_loc
 ())[(Ë(
c
)] & (Ë
ty≥
)

	)

90 #ñi‡
deföed
 
__USE_EXTERN_INLINES


91 
	#__is˘y≥_f
(
ty≥
) \

92 
__exã∫_ölöe
 \

93 
is
##
	`ty≥
 (
__c
Ë
__THROW
 \

95  (*
	`__˘y≥_b_loc
 ())[(Ë(
__c
)] & (Ë
_IS
##
ty≥
; \

96 
	}

	)
}

99 
	#__ißscii
(
c
Ë(((cË& ~0x7fË=0Ë

	)

100 
	#__tﬂscii
(
c
Ë((cË& 0x7fË

	)

102 
	#__ex˘y≥
(
«me
Ë
	`«me
 (Ë
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__ex˘y≥
 (
iß um
);

111 
__ex˘y≥
 (
ißÕha
);

112 
__ex˘y≥
 (
is˙ål
);

113 
__ex˘y≥
 (
isdigô
);

114 
__ex˘y≥
 (
i¶owî
);

115 
__ex˘y≥
 (
isgøph
);

116 
__ex˘y≥
 (
i•röt
);

117 
__ex˘y≥
 (
i•un˘
);

118 
__ex˘y≥
 (
is•a˚
);

119 
__ex˘y≥
 (
isuµî
);

120 
__ex˘y≥
 (
isxdigô
);

124 
	$tﬁowî
 (
__c
Ë
__THROW
;

127 
	$touµî
 (
__c
Ë
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__ex˘y≥
 (
isbœnk
);

138 
__END_NAMESPACE_C99


141 #ifde‡
__USE_GNU


143 
	$is˘y≥
 (
__c
, 
__mask
Ë
__THROW
;

146 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


150 
	$ißscii
 (
__c
Ë
__THROW
;

154 
	$tﬂscii
 (
__c
Ë
__THROW
;

158 
	`__ex˘y≥
 (
_touµî
);

159 
	`__ex˘y≥
 (
_tﬁowî
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¨gs
) \

164 (
__exãnsi⁄__
 \

165 ({ 
__ªs
; \

166 i‡( (
c
) > 1) \

168 i‡(
	`__buûtö_c⁄°™t_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__ªs
 = 
__c
 < -128 || __¯> 255 ? __¯: (
a
)[__c]; \

174 
__ªs
 = 
f
 
¨gs
; \

177 
__ªs
 = (
a
)[(Ë(
c
)]; \

178 
__ªs
; 
	}
}))

	)

180 #i‡!
deföed
 
__NO_CTYPE


181 #ifde‡
__is˘y≥_f


182 
	$__is˘y≥_f
 (
Ænum
)

183 
	$__is˘y≥_f
 (
Æpha
)

184 
	$__is˘y≥_f
 (
˙ål
)

185 
	$__is˘y≥_f
 (
digô
)

186 
	$__is˘y≥_f
 (
lowî
)

187 
	$__is˘y≥_f
 (
gøph
)

188 
	$__is˘y≥_f
 (
¥öt
)

189 
	$__is˘y≥_f
 (
pun˘
)

190 
	$__is˘y≥_f
 (
•a˚
)

191 
	$__is˘y≥_f
 (
uµî
)

192 
	$__is˘y≥_f
 (
xdigô
)

193 #ifde‡
__USE_ISOC99


194 
	$__is˘y≥_f
 (
bœnk
)

196 #ñi‡
deföed
 
__is˘y≥


197 
	#iß um
(
c
Ë
	`__is˘y≥
((c), 
_ISÆnum
)

	)

198 
	#ißÕha
(
c
Ë
	`__is˘y≥
((c), 
_ISÆpha
)

	)

199 
	#is˙ål
(
c
Ë
	`__is˘y≥
((c), 
_IS˙ål
)

	)

200 
	#isdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISdigô
)

	)

201 
	#i¶owî
(
c
Ë
	`__is˘y≥
((c), 
_ISlowî
)

	)

202 
	#isgøph
(
c
Ë
	`__is˘y≥
((c), 
_ISgøph
)

	)

203 
	#i•röt
(
c
Ë
	`__is˘y≥
((c), 
_IS¥öt
)

	)

204 
	#i•un˘
(
c
Ë
	`__is˘y≥
((c), 
_ISpun˘
)

	)

205 
	#is•a˚
(
c
Ë
	`__is˘y≥
((c), 
_IS•a˚
)

	)

206 
	#isuµî
(
c
Ë
	`__is˘y≥
((c), 
_ISuµî
)

	)

207 
	#isxdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISxdigô
)

	)

208 #ifde‡
__USE_ISOC99


209 
	#isbœnk
(
c
Ë
	`__is˘y≥
((c), 
_ISbœnk
)

	)

213 #ifde‡
__USE_EXTERN_INLINES


214 
__exã∫_ölöe
 

215 
	`__NTH
 (
	$tﬁowî
 (
__c
))

217  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_tﬁowî_loc
 ())[__c] : __c;

218 
	}
}

220 
__exã∫_ölöe
 

221 
__NTH
 (
	$touµî
 (
__c
))

223  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_touµî_loc
 ())[__c] : __c;

224 
	}
}

227 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


228 
	#tﬁowî
(
c
Ë
	`__tobody
 (c, 
tﬁowî
, *
	`__˘y≥_tﬁowî_loc
 (), (c))

	)

229 
	#touµî
(
c
Ë
	`__tobody
 (c, 
touµî
, *
	`__˘y≥_touµî_loc
 (), (c))

	)

232 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


233 
	#ißscii
(
c
Ë
	`__ißscii
 (c)

	)

234 
	#tﬂscii
(
c
Ë
	`__tﬂscii
 (c)

	)

236 
	#_tﬁowî
(
c
Ë((Ë(*
	`__˘y≥_tﬁowî_loc
 ())[(Ë(c)])

	)

237 
	#_touµî
(
c
Ë((Ë(*
	`__˘y≥_touµî_loc
 ())[(Ë(c)])

	)

243 #ifde‡
__USE_XOPEN2K8


257 
	~<xloˇÀ.h
>

261 
	#__is˘y≥_l
(
c
, 
ty≥
, 
loˇÀ
) \

262 ((
loˇÀ
)->
__˘y≥_b
[(Ë(
c
)] & (Ë
ty≥
)

	)

264 
	#__ex˘y≥_l
(
«me
) \

265 
	`«me
 (, 
__loˇÀ_t
Ë
__THROW


	)

271 
__ex˘y≥_l
 (
iß um_l
);

272 
__ex˘y≥_l
 (
ißÕha_l
);

273 
__ex˘y≥_l
 (
is˙ål_l
);

274 
__ex˘y≥_l
 (
isdigô_l
);

275 
__ex˘y≥_l
 (
i¶owî_l
);

276 
__ex˘y≥_l
 (
isgøph_l
);

277 
__ex˘y≥_l
 (
i•röt_l
);

278 
__ex˘y≥_l
 (
i•un˘_l
);

279 
__ex˘y≥_l
 (
is•a˚_l
);

280 
__ex˘y≥_l
 (
isuµî_l
);

281 
__ex˘y≥_l
 (
isxdigô_l
);

283 
__ex˘y≥_l
 (
isbœnk_l
);

287 
	$__tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

288 
	$tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

291 
	$__touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

292 
	$touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

294 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


295 
	#__tﬁowî_l
(
c
, 
loˇÀ
) \

296 
	`__tobody
 (
c
, 
__tﬁowî_l
, (
loˇÀ
)->
__˘y≥_tﬁowî
, (c,ÜoˇÀ))

	)

297 
	#__touµî_l
(
c
, 
loˇÀ
) \

298 
	`__tobody
 (
c
, 
__touµî_l
, (
loˇÀ
)->
__˘y≥_touµî
, (c,ÜoˇÀ))

	)

299 
	#tﬁowî_l
(
c
, 
loˇÀ
Ë
	`__tﬁowî_l
 ((c), (loˇÀ))

	)

300 
	#touµî_l
(
c
, 
loˇÀ
Ë
	`__touµî_l
 ((c), (loˇÀ))

	)

304 #i‚de‡
__NO_CTYPE


305 
	#__iß um_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆnum
, (l))

	)

306 
	#__ißÕha_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆpha
, (l))

	)

307 
	#__is˙ål_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS˙ål
, (l))

	)

308 
	#__isdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISdigô
, (l))

	)

309 
	#__i¶owî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISlowî
, (l))

	)

310 
	#__isgøph_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISgøph
, (l))

	)

311 
	#__i•röt_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS¥öt
, (l))

	)

312 
	#__i•un˘_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISpun˘
, (l))

	)

313 
	#__is•a˚_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS•a˚
, (l))

	)

314 
	#__isuµî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISuµî
, (l))

	)

315 
	#__isxdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISxdigô
, (l))

	)

317 
	#__isbœnk_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISbœnk
, (l))

	)

319 #ifde‡
__USE_MISC


320 
	#__ißscii_l
(
c
,
l
Ë(÷), 
	`__ißscii
 (c))

	)

321 
	#__tﬂscii_l
(
c
,
l
Ë(÷), 
	`__tﬂscii
 (c))

	)

324 
	#iß um_l
(
c
,
l
Ë
	`__iß um_l
 ((c), (l))

	)

325 
	#ißÕha_l
(
c
,
l
Ë
	`__ißÕha_l
 ((c), (l))

	)

326 
	#is˙ål_l
(
c
,
l
Ë
	`__is˙ål_l
 ((c), (l))

	)

327 
	#isdigô_l
(
c
,
l
Ë
	`__isdigô_l
 ((c), (l))

	)

328 
	#i¶owî_l
(
c
,
l
Ë
	`__i¶owî_l
 ((c), (l))

	)

329 
	#isgøph_l
(
c
,
l
Ë
	`__isgøph_l
 ((c), (l))

	)

330 
	#i•röt_l
(
c
,
l
Ë
	`__i•röt_l
 ((c), (l))

	)

331 
	#i•un˘_l
(
c
,
l
Ë
	`__i•un˘_l
 ((c), (l))

	)

332 
	#is•a˚_l
(
c
,
l
Ë
	`__is•a˚_l
 ((c), (l))

	)

333 
	#isuµî_l
(
c
,
l
Ë
	`__isuµî_l
 ((c), (l))

	)

334 
	#isxdigô_l
(
c
,
l
Ë
	`__isxdigô_l
 ((c), (l))

	)

336 
	#isbœnk_l
(
c
,
l
Ë
	`__isbœnk_l
 ((c), (l))

	)

338 #ifde‡
__USE_MISC


339 
	#ißscii_l
(
c
,
l
Ë
	`__ißscii_l
 ((c), (l))

	)

340 
	#tﬂscii_l
(
c
,
l
Ë
	`__tﬂscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/dlfcn.h

19 #i‚def 
_DLFCN_H


20 
	#_DLFCN_H
 1

	)

22 
	~<„©uªs.h
>

23 
	#__√ed_size_t


	)

24 
	~<°ddef.h
>

27 
	~<bôs/dlf˙.h
>

30 #ifde‡
__USE_GNU


35 
	#RTLD_NEXT
 ((*Ë-1l)

	)

40 
	#RTLD_DEFAULT
 ((*Ë0)

	)

44 
	tLmid_t
;

47 
	#LM_ID_BASE
 0

	)

48 
	#LM_ID_NEWLM
 -1

	)

52 
__BEGIN_DECLS


56 *
	$dl›í
 (c⁄° *
__fûe
, 
__mode
Ë
__THROWNL
;

60 
	$dl˛o£
 (*
__h™dÀ
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1));

64 *
	$dlsym
 (*
__ª°ri˘
 
__h™dÀ
,

65 c⁄° *
__ª°ri˘
 
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

67 #ifde‡
__USE_GNU


69 *
	$dlm›í
 (
Lmid_t
 
__nsid
, c⁄° *
__fûe
, 
__mode
Ë
__THROWNL
;

73 *
	$dlvsym
 (*
__ª°ri˘
 
__h™dÀ
,

74 c⁄° *
__ª°ri˘
 
__«me
,

75 c⁄° *
__ª°ri˘
 
__vîsi⁄
)

76 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

82 *
	$dÀº‹
 (Ë
__THROW
;

85 #ifde‡
__USE_GNU


90 c⁄° *
dli_‚ame
;

91 *
dli_fba£
;

92 c⁄° *
dli_¢ame
;

93 *
dli_ßddr
;

94 } 
	tDl_öfo
;

98 
	$dœddr
 (c⁄° *
__addªss
, 
Dl_öfo
 *
__öfo
)

99 
__THROW
 
	`__n⁄nuŒ
 ((2));

102 
	$dœddr1
 (c⁄° *
__addªss
, 
Dl_öfo
 *
__öfo
,

103 **
__exåa_öfo
, 
__Êags
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

111 
RTLD_DL_SYMENT
 = 1,

114 
RTLD_DL_LINKMAP
 = 2

123 
	$dlöfo
 (*
__ª°ri˘
 
__h™dÀ
,

124 
__ªque°
, *
__ª°ri˘
 
__¨g
)

125 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

131 
RTLD_DI_LMID
 = 1,

135 
RTLD_DI_LINKMAP
 = 2,

137 
RTLD_DI_CONFIGADDR
 = 3,

144 
RTLD_DI_SERINFO
 = 4,

145 
RTLD_DI_SERINFOSIZE
 = 5,

149 
RTLD_DI_ORIGIN
 = 6,

151 
RTLD_DI_PROFILENAME
 = 7,

152 
RTLD_DI_PROFILEOUT
 = 8,

157 
RTLD_DI_TLS_MODID
 = 9,

163 
RTLD_DI_TLS_DATA
 = 10,

165 
RTLD_DI_MAX
 = 10

173 *
dls_«me
;

174 
dls_Êags
;

175 } 
	tDl_£Ω©h
;

181 
size_t
 
dls_size
;

182 
dls_˙t
;

183 
Dl_£Ω©h
 
dls_£Ω©h
[1];

184 } 
	tDl_£röfo
;

188 
__END_DECLS


	@/usr/include/errno.h

22 #i‚def 
_ERRNO_H


26 #i‚def 
__√ed_Em©h


27 
	#_ERRNO_H
 1

	)

28 
	~<„©uªs.h
>

31 
	g__BEGIN_DECLS


35 
	~<bôs/î∫o.h
>

36 #unde‡
__√ed_Em©h


38 #ifdef 
_ERRNO_H


45 #i‚def 
î∫o


46 
î∫o
;

49 #ifde‡
__USE_GNU


54 *
¥ogøm_övoˇti⁄_«me
, *
¥ogøm_övoˇti⁄_sh‹t_«me
;

58 
	g__END_DECLS


66 #i‡
deföed
 
__USE_GNU
 || deföed 
__√ed_îr‹_t


67 #i‚de‡
__îr‹_t_deföed


68 
	tîr‹_t
;

69 
	#__îr‹_t_deföed
 1

	)

71 #unde‡
__√ed_îr‹_t


	@/usr/include/fcntl.h

22 #i‚def 
_FCNTL_H


23 
	#_FCNTL_H
 1

	)

25 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


31 
	~<bôs/ty≥s.h
>

35 
	~<bôs/f˙é.h
>

39 #ifde‡
__O_TMPFILE


40 
	#__OPEN_NEEDS_MODE
(
oÊag
) \

41 (((
oÊag
Ë& 
O_CREAT
Ë!0 || ((oÊagË& 
__O_TMPFILE
Ë=__O_TMPFILE)

	)

43 
	#__OPEN_NEEDS_MODE
(
oÊag
Ë(((oÊagË& 
O_CREAT
Ë!0)

	)

49 #i‚de‡
__mode_t_deföed


50 
__mode_t
 
	tmode_t
;

51 
	#__mode_t_deföed


	)

54 #i‚de‡
__off_t_deföed


55 #i‚de‡
__USE_FILE_OFFSET64


56 
__off_t
 
	toff_t
;

58 
__off64_t
 
	toff_t
;

60 
	#__off_t_deföed


	)

63 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


64 
__off64_t
 
	toff64_t
;

65 
	#__off64_t_deföed


	)

68 #i‚de‡
__pid_t_deföed


69 
__pid_t
 
	tpid_t
;

70 
	#__pid_t_deföed


	)

74 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


75 
	#__√ed_time•ec


	)

76 
	~<time.h
>

77 
	~<bôs/°©.h
>

79 
	#S_IFMT
 
__S_IFMT


	)

80 
	#S_IFDIR
 
__S_IFDIR


	)

81 
	#S_IFCHR
 
__S_IFCHR


	)

82 
	#S_IFBLK
 
__S_IFBLK


	)

83 
	#S_IFREG
 
__S_IFREG


	)

84 #ifde‡
__S_IFIFO


85 
	#S_IFIFO
 
__S_IFIFO


	)

87 #ifde‡
__S_IFLNK


88 
	#S_IFLNK
 
__S_IFLNK


	)

90 #i‡(
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8
Ë&& deföed 
__S_IFSOCK


91 
	#S_IFSOCK
 
__S_IFSOCK


	)

96 
	#S_ISUID
 
__S_ISUID


	)

97 
	#S_ISGID
 
__S_ISGID


	)

99 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


101 
	#S_ISVTX
 
__S_ISVTX


	)

104 
	#S_IRUSR
 
__S_IREAD


	)

105 
	#S_IWUSR
 
__S_IWRITE


	)

106 
	#S_IXUSR
 
__S_IEXEC


	)

108 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

110 
	#S_IRGRP
 (
S_IRUSR
 >> 3Ë

	)

111 
	#S_IWGRP
 (
S_IWUSR
 >> 3Ë

	)

112 
	#S_IXGRP
 (
S_IXUSR
 >> 3Ë

	)

114 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

116 
	#S_IROTH
 (
S_IRGRP
 >> 3Ë

	)

117 
	#S_IWOTH
 (
S_IWGRP
 >> 3Ë

	)

118 
	#S_IXOTH
 (
S_IXGRP
 >> 3Ë

	)

120 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

123 #ifdef 
__USE_MISC


124 #i‚de‡
R_OK


127 
	#R_OK
 4

	)

128 
	#W_OK
 2

	)

129 
	#X_OK
 1

	)

130 
	#F_OK
 0

	)

135 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


136 
	#SEEK_SET
 0

	)

137 
	#SEEK_CUR
 1

	)

138 
	#SEEK_END
 2

	)

146 
f˙é
 (
__fd
, 
__cmd
, ...);

155 #i‚de‡
__USE_FILE_OFFSET64


156 
	$›í
 (c⁄° *
__fûe
, 
__oÊag
, ...Ë
	`__n⁄nuŒ
 ((1));

158 #ifde‡
__REDIRECT


159 
	`__REDIRECT
 (
›í
, (c⁄° *
__fûe
, 
__oÊag
, ...), 
›í64
)

160 
	`__n⁄nuŒ
 ((1));

162 
	#›í
 
›í64


	)

165 #ifde‡
__USE_LARGEFILE64


166 
	$›í64
 (c⁄° *
__fûe
, 
__oÊag
, ...Ë
	`__n⁄nuŒ
 ((1));

169 #ifde‡
__USE_ATFILE


179 #i‚de‡
__USE_FILE_OFFSET64


180 
	$›í©
 (
__fd
, c⁄° *
__fûe
, 
__oÊag
, ...)

181 
	`__n⁄nuŒ
 ((2));

183 #ifde‡
__REDIRECT


184 
	`__REDIRECT
 (
›í©
, (
__fd
, c⁄° *
__fûe
, 
__oÊag
,

185 ...), 
›í©64
Ë
	`__n⁄nuŒ
 ((2));

187 
	#›í©
 
›í©64


	)

190 #ifde‡
__USE_LARGEFILE64


191 
	$›í©64
 (
__fd
, c⁄° *
__fûe
, 
__oÊag
, ...)

192 
	`__n⁄nuŒ
 ((2));

201 #i‚de‡
__USE_FILE_OFFSET64


202 
	$¸ót
 (c⁄° *
__fûe
, 
mode_t
 
__mode
Ë
	`__n⁄nuŒ
 ((1));

204 #ifde‡
__REDIRECT


205 
	`__REDIRECT
 (
¸ót
, (c⁄° *
__fûe
, 
mode_t
 
__mode
),

206 
¸ót64
Ë
	`__n⁄nuŒ
 ((1));

208 
	#¸ót
 
¸ót64


	)

211 #ifde‡
__USE_LARGEFILE64


212 
	$¸ót64
 (c⁄° *
__fûe
, 
mode_t
 
__mode
Ë
	`__n⁄nuŒ
 ((1));

215 #i‡!
deföed
 
F_LOCK
 && (deföed 
__USE_MISC
 || (deföed 
__USE_XOPEN_EXTENDED
 \

216 && !
deföed
 
__USE_POSIX
))

225 
	#F_ULOCK
 0

	)

226 
	#F_LOCK
 1

	)

227 
	#F_TLOCK
 2

	)

228 
	#F_TEST
 3

	)

230 #i‚de‡
__USE_FILE_OFFSET64


231 
	`lockf
 (
__fd
, 
__cmd
, 
off_t
 
__Àn
);

233 #ifde‡
__REDIRECT


234 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
), 
lockf64
);

236 
	#lockf
 
lockf64


	)

239 #ifde‡
__USE_LARGEFILE64


240 
	`lockf64
 (
__fd
, 
__cmd
, 
off64_t
 
__Àn
);

244 #ifde‡
__USE_XOPEN2K


247 #i‚de‡
__USE_FILE_OFFSET64


248 
	$posix_Ádvi£
 (
__fd
, 
off_t
 
__off£t
, off_à
__Àn
,

249 
__advi£
Ë
__THROW
;

251 #ifde‡
__REDIRECT_NTH


252 
	`__REDIRECT_NTH
 (
posix_Ádvi£
, (
__fd
, 
__off64_t
 
__off£t
,

253 
__off64_t
 
__Àn
, 
__advi£
),

254 
posix_Ádvi£64
);

256 
	#posix_Ádvi£
 
posix_Ádvi£64


	)

259 #ifde‡
__USE_LARGEFILE64


260 
	$posix_Ádvi£64
 (
__fd
, 
off64_t
 
__off£t
, off64_à
__Àn
,

261 
__advi£
Ë
__THROW
;

269 #i‚de‡
__USE_FILE_OFFSET64


270 
	`posix_ÁŒoˇã
 (
__fd
, 
off_t
 
__off£t
, off_à
__Àn
);

272 #ifde‡
__REDIRECT


273 
	`__REDIRECT
 (
posix_ÁŒoˇã
, (
__fd
, 
__off64_t
 
__off£t
,

274 
__off64_t
 
__Àn
),

275 
posix_ÁŒoˇã64
);

277 
	#posix_ÁŒoˇã
 
posix_ÁŒoˇã64


	)

280 #ifde‡
__USE_LARGEFILE64


281 
	`posix_ÁŒoˇã64
 (
__fd
, 
off64_t
 
__off£t
, off64_à
__Àn
);

287 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄
 \

288 && 
deföed
 
__va_¨g_∑ck_Àn


289 
	~<bôs/f˙é2.h
>

292 
__END_DECLS


	@/usr/include/inttypes.h

22 #i‚de‡
_INTTYPES_H


23 
	#_INTTYPES_H
 1

	)

25 
	~<„©uªs.h
>

27 
	~<°döt.h
>

30 #i‚de‡
____gwch¨_t_deföed


31 #ifde‡
__˝lu•lus


32 
	#__gwch¨_t
 
wch¨_t


	)

33 #ñi‡
deföed
 
__WCHAR_TYPE__


34 
__WCHAR_TYPE__
 
	t__gwch¨_t
;

36 
	#__√ed_wch¨_t


	)

37 
	~<°ddef.h
>

38 
wch¨_t
 
	t__gwch¨_t
;

40 
	#____gwch¨_t_deföed
 1

	)

43 #i‡
__WORDSIZE
 == 64

44 
	#__PRI64_PREFIX
 "l"

	)

45 
	#__PRIPTR_PREFIX
 "l"

	)

47 
	#__PRI64_PREFIX
 "Œ"

	)

48 
	#__PRIPTR_PREFIX


	)

54 
	#PRId8
 "d"

	)

55 
	#PRId16
 "d"

	)

56 
	#PRId32
 "d"

	)

57 
	#PRId64
 
__PRI64_PREFIX
 "d"

	)

59 
	#PRIdLEAST8
 "d"

	)

60 
	#PRIdLEAST16
 "d"

	)

61 
	#PRIdLEAST32
 "d"

	)

62 
	#PRIdLEAST64
 
__PRI64_PREFIX
 "d"

	)

64 
	#PRIdFAST8
 "d"

	)

65 
	#PRIdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

66 
	#PRIdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

67 
	#PRIdFAST64
 
__PRI64_PREFIX
 "d"

	)

70 
	#PRIi8
 "i"

	)

71 
	#PRIi16
 "i"

	)

72 
	#PRIi32
 "i"

	)

73 
	#PRIi64
 
__PRI64_PREFIX
 "i"

	)

75 
	#PRIiLEAST8
 "i"

	)

76 
	#PRIiLEAST16
 "i"

	)

77 
	#PRIiLEAST32
 "i"

	)

78 
	#PRIiLEAST64
 
__PRI64_PREFIX
 "i"

	)

80 
	#PRIiFAST8
 "i"

	)

81 
	#PRIiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

82 
	#PRIiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

83 
	#PRIiFAST64
 
__PRI64_PREFIX
 "i"

	)

86 
	#PRIo8
 "o"

	)

87 
	#PRIo16
 "o"

	)

88 
	#PRIo32
 "o"

	)

89 
	#PRIo64
 
__PRI64_PREFIX
 "o"

	)

91 
	#PRIoLEAST8
 "o"

	)

92 
	#PRIoLEAST16
 "o"

	)

93 
	#PRIoLEAST32
 "o"

	)

94 
	#PRIoLEAST64
 
__PRI64_PREFIX
 "o"

	)

96 
	#PRIoFAST8
 "o"

	)

97 
	#PRIoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

98 
	#PRIoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

99 
	#PRIoFAST64
 
__PRI64_PREFIX
 "o"

	)

102 
	#PRIu8
 "u"

	)

103 
	#PRIu16
 "u"

	)

104 
	#PRIu32
 "u"

	)

105 
	#PRIu64
 
__PRI64_PREFIX
 "u"

	)

107 
	#PRIuLEAST8
 "u"

	)

108 
	#PRIuLEAST16
 "u"

	)

109 
	#PRIuLEAST32
 "u"

	)

110 
	#PRIuLEAST64
 
__PRI64_PREFIX
 "u"

	)

112 
	#PRIuFAST8
 "u"

	)

113 
	#PRIuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

114 
	#PRIuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

115 
	#PRIuFAST64
 
__PRI64_PREFIX
 "u"

	)

118 
	#PRIx8
 "x"

	)

119 
	#PRIx16
 "x"

	)

120 
	#PRIx32
 "x"

	)

121 
	#PRIx64
 
__PRI64_PREFIX
 "x"

	)

123 
	#PRIxLEAST8
 "x"

	)

124 
	#PRIxLEAST16
 "x"

	)

125 
	#PRIxLEAST32
 "x"

	)

126 
	#PRIxLEAST64
 
__PRI64_PREFIX
 "x"

	)

128 
	#PRIxFAST8
 "x"

	)

129 
	#PRIxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

130 
	#PRIxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

131 
	#PRIxFAST64
 
__PRI64_PREFIX
 "x"

	)

134 
	#PRIX8
 "X"

	)

135 
	#PRIX16
 "X"

	)

136 
	#PRIX32
 "X"

	)

137 
	#PRIX64
 
__PRI64_PREFIX
 "X"

	)

139 
	#PRIXLEAST8
 "X"

	)

140 
	#PRIXLEAST16
 "X"

	)

141 
	#PRIXLEAST32
 "X"

	)

142 
	#PRIXLEAST64
 
__PRI64_PREFIX
 "X"

	)

144 
	#PRIXFAST8
 "X"

	)

145 
	#PRIXFAST16
 
__PRIPTR_PREFIX
 "X"

	)

146 
	#PRIXFAST32
 
__PRIPTR_PREFIX
 "X"

	)

147 
	#PRIXFAST64
 
__PRI64_PREFIX
 "X"

	)

151 
	#PRIdMAX
 
__PRI64_PREFIX
 "d"

	)

152 
	#PRIiMAX
 
__PRI64_PREFIX
 "i"

	)

153 
	#PRIoMAX
 
__PRI64_PREFIX
 "o"

	)

154 
	#PRIuMAX
 
__PRI64_PREFIX
 "u"

	)

155 
	#PRIxMAX
 
__PRI64_PREFIX
 "x"

	)

156 
	#PRIXMAX
 
__PRI64_PREFIX
 "X"

	)

160 
	#PRIdPTR
 
__PRIPTR_PREFIX
 "d"

	)

161 
	#PRIiPTR
 
__PRIPTR_PREFIX
 "i"

	)

162 
	#PRIoPTR
 
__PRIPTR_PREFIX
 "o"

	)

163 
	#PRIuPTR
 
__PRIPTR_PREFIX
 "u"

	)

164 
	#PRIxPTR
 
__PRIPTR_PREFIX
 "x"

	)

165 
	#PRIXPTR
 
__PRIPTR_PREFIX
 "X"

	)

171 
	#SCNd8
 "hhd"

	)

172 
	#SCNd16
 "hd"

	)

173 
	#SCNd32
 "d"

	)

174 
	#SCNd64
 
__PRI64_PREFIX
 "d"

	)

176 
	#SCNdLEAST8
 "hhd"

	)

177 
	#SCNdLEAST16
 "hd"

	)

178 
	#SCNdLEAST32
 "d"

	)

179 
	#SCNdLEAST64
 
__PRI64_PREFIX
 "d"

	)

181 
	#SCNdFAST8
 "hhd"

	)

182 
	#SCNdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

183 
	#SCNdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

184 
	#SCNdFAST64
 
__PRI64_PREFIX
 "d"

	)

187 
	#SCNi8
 "hhi"

	)

188 
	#SCNi16
 "hi"

	)

189 
	#SCNi32
 "i"

	)

190 
	#SCNi64
 
__PRI64_PREFIX
 "i"

	)

192 
	#SCNiLEAST8
 "hhi"

	)

193 
	#SCNiLEAST16
 "hi"

	)

194 
	#SCNiLEAST32
 "i"

	)

195 
	#SCNiLEAST64
 
__PRI64_PREFIX
 "i"

	)

197 
	#SCNiFAST8
 "hhi"

	)

198 
	#SCNiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

199 
	#SCNiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

200 
	#SCNiFAST64
 
__PRI64_PREFIX
 "i"

	)

203 
	#SCNu8
 "hhu"

	)

204 
	#SCNu16
 "hu"

	)

205 
	#SCNu32
 "u"

	)

206 
	#SCNu64
 
__PRI64_PREFIX
 "u"

	)

208 
	#SCNuLEAST8
 "hhu"

	)

209 
	#SCNuLEAST16
 "hu"

	)

210 
	#SCNuLEAST32
 "u"

	)

211 
	#SCNuLEAST64
 
__PRI64_PREFIX
 "u"

	)

213 
	#SCNuFAST8
 "hhu"

	)

214 
	#SCNuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

215 
	#SCNuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

216 
	#SCNuFAST64
 
__PRI64_PREFIX
 "u"

	)

219 
	#SCNo8
 "hho"

	)

220 
	#SCNo16
 "ho"

	)

221 
	#SCNo32
 "o"

	)

222 
	#SCNo64
 
__PRI64_PREFIX
 "o"

	)

224 
	#SCNoLEAST8
 "hho"

	)

225 
	#SCNoLEAST16
 "ho"

	)

226 
	#SCNoLEAST32
 "o"

	)

227 
	#SCNoLEAST64
 
__PRI64_PREFIX
 "o"

	)

229 
	#SCNoFAST8
 "hho"

	)

230 
	#SCNoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

231 
	#SCNoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

232 
	#SCNoFAST64
 
__PRI64_PREFIX
 "o"

	)

235 
	#SCNx8
 "hhx"

	)

236 
	#SCNx16
 "hx"

	)

237 
	#SCNx32
 "x"

	)

238 
	#SCNx64
 
__PRI64_PREFIX
 "x"

	)

240 
	#SCNxLEAST8
 "hhx"

	)

241 
	#SCNxLEAST16
 "hx"

	)

242 
	#SCNxLEAST32
 "x"

	)

243 
	#SCNxLEAST64
 
__PRI64_PREFIX
 "x"

	)

245 
	#SCNxFAST8
 "hhx"

	)

246 
	#SCNxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

247 
	#SCNxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

248 
	#SCNxFAST64
 
__PRI64_PREFIX
 "x"

	)

252 
	#SCNdMAX
 
__PRI64_PREFIX
 "d"

	)

253 
	#SCNiMAX
 
__PRI64_PREFIX
 "i"

	)

254 
	#SCNoMAX
 
__PRI64_PREFIX
 "o"

	)

255 
	#SCNuMAX
 
__PRI64_PREFIX
 "u"

	)

256 
	#SCNxMAX
 
__PRI64_PREFIX
 "x"

	)

259 
	#SCNdPTR
 
__PRIPTR_PREFIX
 "d"

	)

260 
	#SCNiPTR
 
__PRIPTR_PREFIX
 "i"

	)

261 
	#SCNoPTR
 
__PRIPTR_PREFIX
 "o"

	)

262 
	#SCNuPTR
 
__PRIPTR_PREFIX
 "u"

	)

263 
	#SCNxPTR
 
__PRIPTR_PREFIX
 "x"

	)

266 
	g__BEGIN_DECLS


268 #i‡
__WORDSIZE
 == 64

273 
	mquŸ
;

274 
	mªm
;

275 } 
	timaxdiv_t
;

282 
__exãnsi⁄__
 
	mquŸ
;

283 
__exãnsi⁄__
 
	mªm
;

284 } 
	timaxdiv_t
;

290 
ötmax_t
 
	$imaxabs
 (
ötmax_t
 
__n
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

293 
imaxdiv_t
 
	$imaxdiv
 (
ötmax_t
 
__numî
, i¡max_à
__díom
)

294 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

297 
ötmax_t
 
	$°πoimax
 (c⁄° *
__ª°ri˘
 
__≈å
,

298 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

301 
uötmax_t
 
	$°πoumax
 (c⁄° *
__ª°ri˘
 
__≈å
,

302 ** 
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

305 
ötmax_t
 
	$wc°oimax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
__≈å
,

306 
__gwch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

307 
__THROW
;

310 
uötmax_t
 
	$wc°oumax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
__≈å
,

311 
__gwch¨_t
 ** 
__ª°ri˘
 
__íd±r
, 
__ba£
)

312 
__THROW
;

314 #ifde‡
__USE_EXTERN_INLINES


316 #i‡
__WORDSIZE
 == 64

318 
	$__°πﬁ_öã∫Æ
 (c⁄° *
__ª°ri˘
 
__≈å
,

319 **
__ª°ri˘
 
__íd±r
,

320 
__ba£
, 
__group
)

321 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

323 
__exã∫_ölöe
 
ötmax_t


324 
	`__NTH
 (
	$°πoimax
 (c⁄° *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

325 
ba£
))

327  
	`__°πﬁ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

328 
	}
}

330 
	$__°πoul_öã∫Æ
 (c⁄° *
__ª°ri˘
 
__≈å
,

331 ** 
__ª°ri˘
 
__íd±r
,

332 
__ba£
, 
__group
)

333 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

335 
__exã∫_ölöe
 
uötmax_t


336 
	`__NTH
 (
	$°πoumax
 (c⁄° *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

337 
ba£
))

339  
	`__°πoul_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

340 
	}
}

342 
	$__wc°ﬁ_öã∫Æ
 (c⁄° 
__gwch¨_t
 * 
__ª°ri˘
 
__≈å
,

343 
__gwch¨_t
 **
__ª°ri˘
 
__íd±r
,

344 
__ba£
, 
__group
)

345 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

347 
__exã∫_ölöe
 
ötmax_t


348 
	`__NTH
 (
	$wc°oimax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

349 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

351  
	`__wc°ﬁ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

352 
	}
}

354 
	$__wc°oul_öã∫Æ
 (c⁄° 
__gwch¨_t
 *

355 
__ª°ri˘
 
__≈å
,

356 
__gwch¨_t
 **

357 
__ª°ri˘
 
__íd±r
,

358 
__ba£
, 
__group
)

359 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

361 
__exã∫_ölöe
 
uötmax_t


362 
	`__NTH
 (
	$wc°oumax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

363 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

365  
	`__wc°oul_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

366 
	}
}

370 
__exãnsi⁄__


371 
	$__°πﬁl_öã∫Æ
 (c⁄° *
__ª°ri˘
 
__≈å
,

372 **
__ª°ri˘
 
__íd±r
,

373 
__ba£
, 
__group
)

374 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

376 
__exã∫_ölöe
 
ötmax_t


377 
	`__NTH
 (
	$°πoimax
 (c⁄° *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

378 
ba£
))

380  
	`__°πﬁl_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

381 
	}
}

383 
__exãnsi⁄__


384 
	$__°πouŒ_öã∫Æ
 (const *

385 
__ª°ri˘
 
__≈å
,

387 
__ª°ri˘
 
__íd±r
,

388 
__ba£
,

389 
__group
)

390 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

392 
__exã∫_ölöe
 
uötmax_t


393 
	`__NTH
 (
	$°πoumax
 (c⁄° *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

394 
ba£
))

396  
	`__°πouŒ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

397 
	}
}

399 
__exãnsi⁄__


400 
	$__wc°ﬁl_öã∫Æ
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
__≈å
,

401 
__gwch¨_t
 **
__ª°ri˘
 
__íd±r
,

402 
__ba£
, 
__group
)

403 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

405 
__exã∫_ölöe
 
ötmax_t


406 
	`__NTH
 (
	$wc°oimax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

407 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

409  
	`__wc°ﬁl_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

410 
	}
}

413 
__exãnsi⁄__


414 
	$__wc°ouŒ_öã∫Æ
 (c⁄° 
__gwch¨_t
 *

415 
__ª°ri˘
 
__≈å
,

416 
__gwch¨_t
 **

417 
__ª°ri˘
 
__íd±r
,

418 
__ba£
,

419 
__group
)

420 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

422 
__exã∫_ölöe
 
uötmax_t


423 
	`__NTH
 (
	$wc°oumax
 (c⁄° 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

424 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

426  
	`__wc°ouŒ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

427 
	}
}

432 
	g__END_DECLS


	@/usr/include/jemalloc/jemalloc.h

1 #i‚de‡
JEMALLOC_H_


2 
	#JEMALLOC_H_


	)

3 #ifde‡
__˝lu•lus


8 
	#JEMALLOC_HAVE_ATTR


	)

11 
	#JEMALLOC_EXPERIMENTAL


	)

17 
	#JEMALLOC_OVERRIDE_MEMALIGN


	)

18 
	#JEMALLOC_OVERRIDE_VALLOC


	)

27 
	#JEMALLOC_USABLE_SIZE_CONST


	)

30 
	#LG_SIZEOF_PTR
 3

	)

37 #i‚de‡
JEMALLOC_NO_RENAME


38 
	#je_mÆloc_c⁄f
 
mÆloc_c⁄f


	)

39 
	#je_mÆloc_mesßge
 
mÆloc_mesßge


	)

40 
	#je_mÆloc
 
mÆloc


	)

41 
	#je_ˇŒoc
 
ˇŒoc


	)

42 
	#je_posix_memÆign
 
posix_memÆign


	)

43 
	#je_Æig√d_Æloc
 
Æig√d_Æloc


	)

44 
	#je_ªÆloc
 
ªÆloc


	)

45 
	#je_‰ì
 
‰ì


	)

46 
	#je_mÆlocx
 
mÆlocx


	)

47 
	#je_øŒocx
 
øŒocx


	)

48 
	#je_xÆlocx
 
xÆlocx


	)

49 
	#je_ßŒocx
 
ßŒocx


	)

50 
	#je_dÆlocx
 
dÆlocx


	)

51 
	#je_«Œocx
 
«Œocx


	)

52 
	#je_mÆl˘l
 
mÆl˘l


	)

53 
	#je_mÆl˘ amëomib
 
mÆl˘ amëomib


	)

54 
	#je_mÆl˘lbymib
 
mÆl˘lbymib


	)

55 
	#je_mÆloc_°©s_¥öt
 
mÆloc_°©s_¥öt


	)

56 
	#je_mÆloc_ußbÀ_size
 
mÆloc_ußbÀ_size


	)

57 
	#je_memÆign
 
memÆign


	)

58 
	#je_vÆloc
 
vÆloc


	)

59 
	#je_Ælocm
 
Ælocm


	)

60 
	#je_dÆlocm
 
dÆlocm


	)

61 
	#je_«Œocm
 
«Œocm


	)

62 
	#je_øŒocm
 
øŒocm


	)

63 
	#je_ßŒocm
 
ßŒocm


	)

66 
	~<limôs.h
>

67 
	~<°rögs.h
>

69 
	#JEMALLOC_VERSION
 "3.6.0-0-g46c0af68bd248b04df75e4f92d5fb804c3d75340"

	)

70 
	#JEMALLOC_VERSION_MAJOR
 3

	)

71 
	#JEMALLOC_VERSION_MINOR
 6

	)

72 
	#JEMALLOC_VERSION_BUGFIX
 0

	)

73 
	#JEMALLOC_VERSION_NREV
 0

	)

74 
	#JEMALLOC_VERSION_GID
 "46c0af68bd248b04df75e4f92d5fb804c3d75340"

	)

76 
	#MALLOCX_LG_ALIGN
(
œ
Ë÷a)

	)

77 #i‡
LG_SIZEOF_PTR
 == 2

78 
	#MALLOCX_ALIGN
(
a
Ë(
	`ffs
◊)-1)

	)

80 
	#MALLOCX_ALIGN
(
a
) \

81 ((
a
 < (
size_t
)
INT_MAX
Ë? 
	`ffs
◊)-1 : ffs◊>>32)+31)

	)

83 
	#MALLOCX_ZERO
 (()0x40)

	)

85 
	#MALLOCX_ARENA
(
a
Ë(()((◊)+1Ë<< 8))

	)

87 #ifde‡
JEMALLOC_EXPERIMENTAL


88 
	#ALLOCM_LG_ALIGN
(
œ
Ë÷a)

	)

89 #i‡
LG_SIZEOF_PTR
 == 2

90 
	#ALLOCM_ALIGN
(
a
Ë(
	`ffs
◊)-1)

	)

92 
	#ALLOCM_ALIGN
(
a
) \

93 ((
a
 < (
size_t
)
INT_MAX
Ë? 
	`ffs
◊)-1 : ffs◊>>32)+31)

	)

95 
	#ALLOCM_ZERO
 (()0x40)

	)

96 
	#ALLOCM_NO_MOVE
 (()0x80)

	)

98 
	#ALLOCM_ARENA
(
a
Ë(()((◊)+1Ë<< 8))

	)

99 
	#ALLOCM_SUCCESS
 0

	)

100 
	#ALLOCM_ERR_OOM
 1

	)

101 
	#ALLOCM_ERR_NOT_MOVED
 2

	)

104 #ifde‡
JEMALLOC_HAVE_ATTR


105 
	#JEMALLOC_ATTR
(
s
Ë
	`__©åibuã__
((s))

	)

106 
	#JEMALLOC_EXPORT
 
	`JEMALLOC_ATTR
(
	`visibûôy
("deÁu…"))

	)

107 
	#JEMALLOC_ALIGNED
(
s
Ë
	`JEMALLOC_ATTR
(
	`Æig√d
(s))

	)

108 
	#JEMALLOC_SECTION
(
s
Ë
	`JEMALLOC_ATTR
(
	`£˘i⁄
(s))

	)

109 
	#JEMALLOC_NOINLINE
 
	`JEMALLOC_ATTR
(
noölöe
)

	)

110 #ñi‡
_MSC_VER


111 
	#JEMALLOC_ATTR
(
s
)

	)

112 #ifde‡
DLLEXPORT


113 
	#JEMALLOC_EXPORT
 
	`__de˛•ec
(
dŒexp‹t
)

	)

115 
	#JEMALLOC_EXPORT
 
	`__de˛•ec
(
dŒimp‹t
)

	)

117 
	#JEMALLOC_ALIGNED
(
s
Ë
	`__de˛•ec
(
	`Æign
(s))

	)

118 
	#JEMALLOC_SECTION
(
s
Ë
	`__de˛•ec
(
	`Æloˇã
(s))

	)

119 
	#JEMALLOC_NOINLINE
 
	`__de˛•ec
(
noölöe
)

	)

121 
	#JEMALLOC_ATTR
(
s
)

	)

122 
	#JEMALLOC_EXPORT


	)

123 
	#JEMALLOC_ALIGNED
(
s
)

	)

124 
	#JEMALLOC_SECTION
(
s
)

	)

125 
	#JEMALLOC_NOINLINE


	)

133 
JEMALLOC_EXPORT
 c⁄° *
je_mÆloc_c⁄f
;

134 
JEMALLOC_EXPORT
 (*
je_mÆloc_mesßge
)(*
cb›aque
,

135 c⁄° *
s
);

137 
JEMALLOC_EXPORT
 *
je_mÆloc
(
size_t
 
size
Ë
JEMALLOC_ATTR
(
mÆloc
);

138 
JEMALLOC_EXPORT
 *
je_ˇŒoc
(
size_t
 
num
, size_à
size
)

139 
JEMALLOC_ATTR
(
mÆloc
);

140 
JEMALLOC_EXPORT
 
je_posix_memÆign
(**
mem±r
, 
size_t
 
Æignmít
,

141 
size_t
 
size
Ë
JEMALLOC_ATTR
(
n⁄nuŒ
(1));

142 
JEMALLOC_EXPORT
 *
je_Æig√d_Æloc
(
size_t
 
Æignmít
, size_à
size
)

143 
JEMALLOC_ATTR
(
mÆloc
);

144 
JEMALLOC_EXPORT
 *
je_ªÆloc
(*
±r
, 
size_t
 
size
);

145 
JEMALLOC_EXPORT
 
je_‰ì
(*
±r
);

147 
JEMALLOC_EXPORT
 *
je_mÆlocx
(
size_t
 
size
, 
Êags
);

148 
JEMALLOC_EXPORT
 *
je_øŒocx
(*
±r
, 
size_t
 
size
, 
Êags
);

149 
JEMALLOC_EXPORT
 
size_t
 
je_xÆlocx
(*
±r
, size_à
size
, size_à
exåa
,

150 
Êags
);

151 
JEMALLOC_EXPORT
 
size_t
 
je_ßŒocx
(c⁄° *
±r
, 
Êags
);

152 
JEMALLOC_EXPORT
 
je_dÆlocx
(*
±r
, 
Êags
);

153 
JEMALLOC_EXPORT
 
size_t
 
je_«Œocx
(size_à
size
, 
Êags
);

155 
JEMALLOC_EXPORT
 
je_mÆl˘l
(c⁄° *
«me
, *
ﬁdp
,

156 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
);

157 
JEMALLOC_EXPORT
 
je_mÆl˘ amëomib
(c⁄° *
«me
, 
size_t
 *
mibp
,

158 
size_t
 *
mibÀ≈
);

159 
JEMALLOC_EXPORT
 
je_mÆl˘lbymib
(c⁄° 
size_t
 *
mib
, size_à
mibÀn
,

160 *
ﬁdp
, 
size_t
 *
ﬁdÀ≈
, *
√wp
, size_à
√wÀn
);

161 
JEMALLOC_EXPORT
 
je_mÆloc_°©s_¥öt
((*
wrôe_cb
)(*,

162 c⁄° *), *
je_cb›aque
, c⁄° *
›ts
);

163 
JEMALLOC_EXPORT
 
size_t
 
je_mÆloc_ußbÀ_size
(

164 
JEMALLOC_USABLE_SIZE_CONST
 *
±r
);

166 #ifde‡
JEMALLOC_OVERRIDE_MEMALIGN


167 
JEMALLOC_EXPORT
 * 
je_memÆign
(
size_t
 
Æignmít
, size_à
size
)

168 
JEMALLOC_ATTR
(
mÆloc
);

171 #ifde‡
JEMALLOC_OVERRIDE_VALLOC


172 
JEMALLOC_EXPORT
 * 
je_vÆloc
(
size_t
 
size
Ë
JEMALLOC_ATTR
(
mÆloc
);

175 #ifde‡
JEMALLOC_EXPERIMENTAL


176 
JEMALLOC_EXPORT
 
je_Ælocm
(**
±r
, 
size_t
 *
rsize
, size_à
size
,

177 
Êags
Ë
JEMALLOC_ATTR
(
n⁄nuŒ
(1));

178 
JEMALLOC_EXPORT
 
je_øŒocm
(**
±r
, 
size_t
 *
rsize
, size_à
size
,

179 
size_t
 
exåa
, 
Êags
Ë
JEMALLOC_ATTR
(
n⁄nuŒ
(1));

180 
JEMALLOC_EXPORT
 
je_ßŒocm
(c⁄° *
±r
, 
size_t
 *
rsize
, 
Êags
)

181 
JEMALLOC_ATTR
(
n⁄nuŒ
(1));

182 
JEMALLOC_EXPORT
 
je_dÆlocm
(*
±r
, 
Êags
)

183 
JEMALLOC_ATTR
(
n⁄nuŒ
(1));

184 
JEMALLOC_EXPORT
 
je_«Œocm
(
size_t
 *
rsize
, size_à
size
, 
Êags
);

194 #ifde‡
JEMALLOC_MANGLE


195 #i‚de‡
JEMALLOC_NO_DEMANGLE


196 
	#JEMALLOC_NO_DEMANGLE


	)

198 
	#mÆloc_c⁄f
 
je_mÆloc_c⁄f


	)

199 
	#mÆloc_mesßge
 
je_mÆloc_mesßge


	)

200 
	#mÆloc
 
je_mÆloc


	)

201 
	#ˇŒoc
 
je_ˇŒoc


	)

202 
	#posix_memÆign
 
je_posix_memÆign


	)

203 
	#Æig√d_Æloc
 
je_Æig√d_Æloc


	)

204 
	#ªÆloc
 
je_ªÆloc


	)

205 
	#‰ì
 
je_‰ì


	)

206 
	#mÆlocx
 
je_mÆlocx


	)

207 
	#øŒocx
 
je_øŒocx


	)

208 
	#xÆlocx
 
je_xÆlocx


	)

209 
	#ßŒocx
 
je_ßŒocx


	)

210 
	#dÆlocx
 
je_dÆlocx


	)

211 
	#«Œocx
 
je_«Œocx


	)

212 
	#mÆl˘l
 
je_mÆl˘l


	)

213 
	#mÆl˘ amëomib
 
je_mÆl˘ amëomib


	)

214 
	#mÆl˘lbymib
 
je_mÆl˘lbymib


	)

215 
	#mÆloc_°©s_¥öt
 
je_mÆloc_°©s_¥öt


	)

216 
	#mÆloc_ußbÀ_size
 
je_mÆloc_ußbÀ_size


	)

217 
	#memÆign
 
je_memÆign


	)

218 
	#vÆloc
 
je_vÆloc


	)

219 
	#Ælocm
 
je_Ælocm


	)

220 
	#dÆlocm
 
je_dÆlocm


	)

221 
	#«Œocm
 
je_«Œocm


	)

222 
	#øŒocm
 
je_øŒocm


	)

223 
	#ßŒocm
 
je_ßŒocm


	)

233 #i‚de‡
JEMALLOC_NO_DEMANGLE


234 #unde‡
je_mÆloc_c⁄f


235 #unde‡
je_mÆloc_mesßge


236 #unde‡
je_mÆloc


237 #unde‡
je_ˇŒoc


238 #unde‡
je_posix_memÆign


239 #unde‡
je_Æig√d_Æloc


240 #unde‡
je_ªÆloc


241 #unde‡
je_‰ì


242 #unde‡
je_mÆlocx


243 #unde‡
je_øŒocx


244 #unde‡
je_xÆlocx


245 #unde‡
je_ßŒocx


246 #unde‡
je_dÆlocx


247 #unde‡
je_«Œocx


248 #unde‡
je_mÆl˘l


249 #unde‡
je_mÆl˘ amëomib


250 #unde‡
je_mÆl˘lbymib


251 #unde‡
je_mÆloc_°©s_¥öt


252 #unde‡
je_mÆloc_ußbÀ_size


253 #unde‡
je_memÆign


254 #unde‡
je_vÆloc


255 #unde‡
je_Ælocm


256 #unde‡
je_dÆlocm


257 #unde‡
je_«Œocm


258 #unde‡
je_øŒocm


259 #unde‡
je_ßŒocm


262 #ifde‡
__˝lu•lus


	@/usr/include/libunwind.h

4 #i‚de‡
UNW_REMOTE_ONLY


6 #i‡
deföed
 
__Ørch64__


7 
	~"libunwöd-Ørch64.h
"

8 #ñi‡
deföed
 
__¨m__


9 
	~"libunwöd-¨m.h
"

10 #ñi‡
deföed
 
__hµa__


11 
	~"libunwöd-hµa.h
"

12 #ñi‡
deföed
 
__ü64__


13 
	~"libunwöd-ü64.h
"

14 #ñi‡
deföed
 
__mùs__


15 
	~"libunwöd-mùs.h
"

16 #ñi‡
deföed
 
__powîpc__
 && !deföed 
__powîpc64__


17 
	~"libunwöd-µc32.h
"

18 #ñi‡
deföed
 
__powîpc64__


19 
	~"libunwöd-µc64.h
"

20 #ñi‡
deföed
 
__sh__


21 
	~"libunwöd-sh.h
"

22 #ñi‡
deföed
 
__i386__


23 
	~"libunwöd-x86.h
"

24 #ñi‡
deföed
 
__x86_64__


25 
	~"libunwöd-x86_64.h
"

32 
	~"libunwöd-x86_64.h
"

	@/usr/include/limits.h

22 #i‚de‡
_LIBC_LIMITS_H_


23 
	#_LIBC_LIMITS_H_
 1

	)

25 
	~<„©uªs.h
>

31 
	#MB_LEN_MAX
 16

	)

36 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2

41 #i‚de‡
_LIMITS_H


42 
	#_LIMITS_H
 1

	)

44 
	~<bôs/w‹dsize.h
>

53 
	#CHAR_BIT
 8

	)

56 
	#SCHAR_MIN
 (-128)

	)

57 
	#SCHAR_MAX
 127

	)

60 
	#UCHAR_MAX
 255

	)

63 #ifde‡
__CHAR_UNSIGNED__


64 
	#CHAR_MIN
 0

	)

65 
	#CHAR_MAX
 
UCHAR_MAX


	)

67 
	#CHAR_MIN
 
SCHAR_MIN


	)

68 
	#CHAR_MAX
 
SCHAR_MAX


	)

72 
	#SHRT_MIN
 (-32768)

	)

73 
	#SHRT_MAX
 32767

	)

76 
	#USHRT_MAX
 65535

	)

79 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

80 
	#INT_MAX
 2147483647

	)

83 
	#UINT_MAX
 4294967295U

	)

86 #i‡
__WORDSIZE
 == 64

87 
	#LONG_MAX
 9223372036854775807L

	)

89 
	#LONG_MAX
 2147483647L

	)

91 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

94 #i‡
__WORDSIZE
 == 64

95 
	#ULONG_MAX
 18446744073709551615UL

	)

97 
	#ULONG_MAX
 4294967295UL

	)

100 #ifde‡
__USE_ISOC99


103 
	#LLONG_MAX
 9223372036854775807LL

	)

104 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

107 
	#ULLONG_MAX
 18446744073709551615ULL

	)

121 #i‡
deföed
 
__GNUC__
 && !deföed 
_GCC_LIMITS_H_


123 #ö˛ude_√xà<
limôs
.
h
>

129 #i‡
deföed
 
__USE_ISOC99
 && deföed 
__GNUC__


130 #i‚de‡
LLONG_MIN


131 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

133 #i‚de‡
LLONG_MAX


134 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

136 #i‚de‡
ULLONG_MAX


137 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

141 #ifdef 
__USE_POSIX


143 
	~<bôs/posix1_lim.h
>

146 #ifdef 
__USE_POSIX2


147 
	~<bôs/posix2_lim.h
>

150 #ifdef 
__USE_XOPEN


151 
	~<bôs/x›í_lim.h
>

	@/usr/include/malloc.h

19 #i‚de‡
_MALLOC_H


20 
	#_MALLOC_H
 1

	)

22 
	~<„©uªs.h
>

23 
	~<°ddef.h
>

24 
	~<°dio.h
>

26 #ifde‡
_LIBC


27 
	#__MALLOC_HOOK_VOLATILE


	)

28 
	#__MALLOC_DEPRECATED


	)

30 
	#__MALLOC_HOOK_VOLATILE
 vﬁ©ûe

	)

31 
	#__MALLOC_DEPRECATED
 
__©åibuã_dïªˇãd__


	)

35 
__BEGIN_DECLS


38 *
	$mÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

41 *
	$ˇŒoc
 (
size_t
 
__nmemb
, size_à
__size
)

42 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

49 *
	$ªÆloc
 (*
__±r
, 
size_t
 
__size
)

50 
__THROW
 
__©åibuã_w¨n_unu£d_ªsu…__
;

53 
	$‰ì
 (*
__±r
Ë
__THROW
;

56 
	$c‰ì
 (*
__±r
Ë
__THROW
;

59 *
	$memÆign
 (
size_t
 
__Æignmít
, size_à
__size
)

60 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

63 *
	$vÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

67 *
	$pvÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

71 *(*
__m‹ec‹e
Ë(
±rdiff_t
 
__size
);

74 *
	$__deÁu…_m‹ec‹e
 (
±rdiff_t
 
__size
)

75 
__THROW
 
__©åibuã_mÆloc__
;

79 
	smÆlöfo


81 
¨ía
;

82 
‹dblks
;

83 
smblks
;

84 
hblks
;

85 
hblkhd
;

86 
usmblks
;

87 
fsmblks
;

88 
u‹dblks
;

89 
f‹dblks
;

90 
kìpco°
;

94 
mÆlöfo
 
	$mÆlöfo
 (Ë
__THROW
;

97 #i‚de‡
M_MXFAST


98 
	#M_MXFAST
 1

	)

100 #i‚de‡
M_NLBLKS


101 
	#M_NLBLKS
 2

	)

103 #i‚de‡
M_GRAIN


104 
	#M_GRAIN
 3

	)

106 #i‚de‡
M_KEEP


107 
	#M_KEEP
 4

	)

111 
	#M_TRIM_THRESHOLD
 -1

	)

112 
	#M_TOP_PAD
 -2

	)

113 
	#M_MMAP_THRESHOLD
 -3

	)

114 
	#M_MMAP_MAX
 -4

	)

115 
	#M_CHECK_ACTION
 -5

	)

116 
	#M_PERTURB
 -6

	)

117 
	#M_ARENA_TEST
 -7

	)

118 
	#M_ARENA_MAX
 -8

	)

121 
	$mÆl›t
 (
__∑øm
, 
__vÆ
Ë
__THROW
;

125 
	$mÆloc_åim
 (
size_t
 
__∑d
Ë
__THROW
;

129 
size_t
 
	$mÆloc_ußbÀ_size
 (*
__±r
Ë
__THROW
;

132 
	$mÆloc_°©s
 (Ë
__THROW
;

135 
	$mÆloc_öfo
 (
__›ti⁄s
, 
FILE
 *
__Â
Ë
__THROW
;

138 *
	$mÆloc_gë_°©e
 (Ë
__THROW
;

142 
	$mÆloc_£t_°©e
 (*
__±r
Ë
__THROW
;

147 (*
__MALLOC_HOOK_VOLATILE
 
__mÆloc_öôülize_hook
) ()

148 
__MALLOC_DEPRECATED
;

150 (*
__MALLOC_HOOK_VOLATILE
 
__‰ì_hook
Ë(*
__±r
,

152 
__MALLOC_DEPRECATED
;

153 *(*
__MALLOC_HOOK_VOLATILE
 
__mÆloc_hook
)(
size_t
 
__size
,

155 
__MALLOC_DEPRECATED
;

156 *(*
__MALLOC_HOOK_VOLATILE
 
__ªÆloc_hook
)(*
__±r
,

157 
size_t
 
__size
,

159 
__MALLOC_DEPRECATED
;

160 *(*
__MALLOC_HOOK_VOLATILE
 
__memÆign_hook
)(
size_t
 
__Æignmít
,

161 
size_t
 
__size
,

163 
__MALLOC_DEPRECATED
;

164 (*
__MALLOC_HOOK_VOLATILE
 
__a·î_m‹ec‹e_hook
) ();

167 
	$__mÆloc_check_öô
 (Ë
__THROW
 
__MALLOC_DEPRECATED
;

170 
__END_DECLS


	@/usr/include/math.h

23 #i‚def 
_MATH_H


24 
	#_MATH_H
 1

	)

26 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


31 
	~<bôs/m©h-ve˘‹.h
>

35 
	~<bôs/huge_vÆ.h
>

36 #ifde‡
__USE_ISOC99


37 
	~<bôs/huge_vÆf.h
>

38 
	~<bôs/huge_vÆl.h
>

41 
	~<bôs/öf.h
>

44 
	~<bôs/«n.h
>

48 
	~<bôs/m©hdef.h
>

55 
	#__SIMD_DECL
(
fun˘i⁄
Ë
	`__CONCAT
 (
__DECL_SIMD_
, fun˘i⁄)

	)

57 
	#__MATHCALL_VEC
(
fun˘i⁄
, 
suffix
, 
¨gs
) \

58 
	`__SIMD_DECL
 (
	`__MATH_PRECNAME
 (
fun˘i⁄
, 
suffix
)) \

59 
	`__MATHCALL
 (
fun˘i⁄
, 
suffix
, 
¨gs
)

	)

61 
	#__MATHDECL_VEC
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

62 
	`__SIMD_DECL
 (
	`__MATH_PRECNAME
 (
fun˘i⁄
, 
suffix
)) \

63 
	`__MATHDECL
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
)

	)

65 
	#__MATHCALL
(
fun˘i⁄
,
suffix
, 
¨gs
) \

66 
	`__MATHDECL
 (
_MdoubÀ_
,
fun˘i⁄
,
suffix
, 
¨gs
)

	)

67 
	#__MATHDECL
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

68 
	`__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
); \

69 
	`__MATHDECL_1
(
ty≥
, 
	`__CONCAT
(
__
,
fun˘i⁄
),
suffix
, 
¨gs
)

	)

70 
	#__MATHCALLX
(
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
) \

71 
	`__MATHDECLX
 (
_MdoubÀ_
,
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
)

	)

72 
	#__MATHDECLX
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
) \

73 
	`__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
Ë
	`__©åibuã__
 (
©åib
); \

74 
	`__MATHDECL_1
(
ty≥
, 
	`__CONCAT
(
__
,
fun˘i⁄
),
suffix
, 
¨gs
Ë
	`__©åibuã__
 (
©åib
)

	)

75 
	#__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

76 
ty≥
 
	`__MATH_PRECNAME
(
fun˘i⁄
,
suffix
Ë
¨gs
 
__THROW


	)

78 
	#_MdoubÀ_
 

	)

79 
	#__MATH_PRECNAME
(
«me
,
r
Ë
	`__CONCAT
“ame,r)

	)

80 
	#__MATH_DECLARING_DOUBLE
 1

	)

81 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

82 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

83 
	~<bôs/m©hˇŒs.h
>

84 #unde‡
_MdoubÀ_


85 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


86 #unde‡
_MdoubÀ_END_NAMESPACE


87 #unde‡
__MATH_PRECNAME


88 #unde‡
__MATH_DECLARING_DOUBLE


90 #ifde‡
__USE_ISOC99


96 #i‚de‡
_MÊﬂt_


97 
	#_MÊﬂt_
 

	)

99 
	#_MdoubÀ_
 
_MÊﬂt_


	)

100 
	#__MATH_PRECNAME
(
«me
,
r
Ë«me##
f
##
	)
r

101 
	#__MATH_DECLARING_DOUBLE
 0

	)

102 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

103 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

104 
	~<bôs/m©hˇŒs.h
>

105 #unde‡
_MdoubÀ_


106 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


107 #unde‡
_MdoubÀ_END_NAMESPACE


108 #unde‡
__MATH_PRECNAME


109 #unde‡
__MATH_DECLARING_DOUBLE


111 #i‡!(
deföed
 
__NO_LONG_DOUBLE_MATH
 && deföed 
_LIBC
) \

112 || 
deföed
 
__LDBL_COMPAT
 \

113 || 
deföed
 
_LIBC_TEST


114 #ifde‡
__LDBL_COMPAT


116 #ifde‡
__USE_ISOC99


117 
	$__∆dbl_√xâow¨df
 (
__x
, 
__y
)

118 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

119 #ifde‡
__REDIRECT_NTH


120 
	`__REDIRECT_NTH
 (
√xâow¨df
, (
__x
, 
__y
),

121 
__∆dbl_√xâow¨df
)

122 
	`__©åibuã__
 ((
__c⁄°__
));

123 
	`__REDIRECT_NTH
 (
√xâow¨d
, (
__x
, 
__y
),

124 
√xè·î
Ë
	`__©åibuã__
 ((
__c⁄°__
));

125 
	`__REDIRECT_NTH
 (
√xâow¨dl
,

126 (
__x
, 
__y
),

127 
√xè·î
Ë
	`__©åibuã__
 ((
__c⁄°__
));

131 #unde‡
__MATHDECL_1


132 
	#__MATHDECL_2
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
Æüs
) \

133 
ty≥
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
fun˘i⁄
,
suffix
), \

134 
¨gs
, 
Æüs
)

	)

135 
	#__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

136 
	`__MATHDECL_2
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
	`__CONCAT
(fun˘i⁄,suffix))

	)

142 #i‚de‡
_Ml⁄g_doubÀ_


143 
	#_Ml⁄g_doubÀ_
 

	)

145 
	#_MdoubÀ_
 
_Ml⁄g_doubÀ_


	)

146 
	#__MATH_PRECNAME
(
«me
,
r
Ë«me##
l
##
	)
r

147 
	#__MATH_DECLARING_DOUBLE
 0

	)

148 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

149 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

150 
	#__MATH_DECLARE_LDOUBLE
 1

	)

151 
	~<bôs/m©hˇŒs.h
>

152 #unde‡
_MdoubÀ_


153 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


154 #unde‡
_MdoubÀ_END_NAMESPACE


155 #unde‡
__MATH_PRECNAME


156 #unde‡
__MATH_DECLARING_DOUBLE


161 #unde‡
__MATHDECL_1


162 #unde‡
__MATHDECL


163 #unde‡
__MATHCALL


166 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


168 
signgam
;

173 #ifde‡
__USE_ISOC99


211 
FP_NAN
 =

212 
	#FP_NAN
 0

	)

213 
FP_NAN
,

214 
FP_INFINITE
 =

215 
	#FP_INFINITE
 1

	)

216 
FP_INFINITE
,

217 
FP_ZERO
 =

218 
	#FP_ZERO
 2

	)

219 
FP_ZERO
,

220 
FP_SUBNORMAL
 =

221 
	#FP_SUBNORMAL
 3

	)

222 
FP_SUBNORMAL
,

223 
FP_NORMAL
 =

224 
	#FP_NORMAL
 4

	)

225 
FP_NORMAL


233 #i‡
	`__GNUC_PREREQ
 (4,4Ë&& !
deföed
 
__SUPPORT_SNAN__
 \

234 && !
deföed
 
__OPTIMIZE_SIZE__


235 
	#Â˛assify
(
x
Ë
	`__buûtö_Â˛assify
 (
FP_NAN
, 
FP_INFINITE
, \

236 
FP_NORMAL
, 
FP_SUBNORMAL
, 
FP_ZERO
, 
x
)

	)

237 #ñi‡
deföed
 
__NO_LONG_DOUBLE_MATH


238 
	#Â˛assify
(
x
) \

239 ( (
x
Ë= (Ë? 
	`__Â˛assifyf
 (xË: 
	`__Â˛assify
 (x))

	)

241 
	#Â˛assify
(
x
) \

242 ( (
x
) ==  () \

243 ? 
	`__Â˛assifyf
 (
x
) \

244 :  (
x
) ==  () \

245 ? 
	`__Â˛assify
 (
x
Ë: 
	`__Â˛assifyl
 (x))

	)

249 #i‡
	`__GNUC_PREREQ
 (4,0)

250 
	#signbô
(
x
) \

251 ( (
x
) ==  () \

252 ? 
	`__buûtö_signbôf
 (
x
) \

253 :  (
x
) ==  () \

254 ? 
	`__buûtö_signbô
 (
x
Ë: 
	`__buûtö_signbôl
 (x))

	)

256 #ifde‡
__NO_LONG_DOUBLE_MATH


257 
	#signbô
(
x
) \

258 ( (
x
Ë= (Ë? 
	`__signbôf
 (xË: 
	`__signbô
 (x))

	)

260 
	#signbô
(
x
) \

261 ( (
x
) ==  () \

262 ? 
	`__signbôf
 (
x
) \

263 :  (
x
) ==  () \

264 ? 
	`__signbô
 (
x
Ë: 
	`__signbôl
 (x))

	)

269 #i‡
	`__GNUC_PREREQ
 (4,4Ë&& !
deföed
 
__SUPPORT_SNAN__


270 
	#isföôe
(
x
Ë
	`__buûtö_isföôe
 (x)

	)

271 #ñi‡
deföed
 
__NO_LONG_DOUBLE_MATH


272 
	#isföôe
(
x
) \

273 ( (
x
Ë= (Ë? 
	`__föôef
 (xË: 
	`__föôe
 (x))

	)

275 
	#isföôe
(
x
) \

276 ( (
x
) ==  () \

277 ? 
	`__föôef
 (
x
) \

278 :  (
x
) ==  () \

279 ? 
	`__föôe
 (
x
Ë: 
	`__föôñ
 (x))

	)

283 #i‡
	`__GNUC_PREREQ
 (4,4Ë&& !
deföed
 
__SUPPORT_SNAN__


284 
	#i¢‹mÆ
(
x
Ë
	`__buûtö_i¢‹mÆ
 (x)

	)

286 
	#i¢‹mÆ
(
x
Ë(
	`Â˛assify
 (xË=
FP_NORMAL
)

	)

291 #i‡
	`__GNUC_PREREQ
 (4,4Ë&& !
deföed
 
__SUPPORT_SNAN__


292 
	#i¢™
(
x
Ë
	`__buûtö_i¢™
 (x)

	)

293 #ñi‡
deföed
 
__NO_LONG_DOUBLE_MATH


294 
	#i¢™
(
x
) \

295 ( (
x
Ë= (Ë? 
	`__i¢™f
 (xË: 
	`__i¢™
 (x))

	)

297 
	#i¢™
(
x
) \

298 ( (
x
) ==  () \

299 ? 
	`__i¢™f
 (
x
) \

300 :  (
x
) ==  () \

301 ? 
	`__i¢™
 (
x
Ë: 
	`__i¢™l
 (x))

	)

305 #i‡
	`__GNUC_PREREQ
 (4,4Ë&& !
deföed
 
__SUPPORT_SNAN__


306 
	#isöf
(
x
Ë
	`__buûtö_isöf_sign
 (x)

	)

307 #ñi‡
deföed
 
__NO_LONG_DOUBLE_MATH


308 
	#isöf
(
x
) \

309 ( (
x
Ë= (Ë? 
	`__isöff
 (xË: 
	`__isöf
 (x))

	)

311 
	#isöf
(
x
) \

312 ( (
x
) ==  () \

313 ? 
	`__isöff
 (
x
) \

314 :  (
x
) ==  () \

315 ? 
	`__isöf
 (
x
Ë: 
	`__isöÊ
 (x))

	)

319 
	#MATH_ERRNO
 1

	)

320 
	#MATH_ERREXCEPT
 2

	)

325 #i‚de‡
__FAST_MATH__


326 
	#m©h_îrh™dlög
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

331 #ifde‡
__USE_GNU


333 #ifde‡
__NO_LONG_DOUBLE_MATH


334 
	#issig«lög
(
x
) \

335 ( (
x
Ë= (Ë? 
	`__issig«lögf
 (xË: 
	`__issig«lög
 (x))

	)

337 
	#issig«lög
(
x
) \

338 ( (
x
) ==  () \

339 ? 
	`__issig«lögf
 (
x
) \

340 :  (
x
) ==  () \

341 ? 
	`__issig«lög
 (
x
Ë: 
	`__issig«lögl
 (x))

	)

345 #ifdef 
__USE_MISC


349 
_IEEE_
 = -1,

350 
_SVID_
,

351 
_XOPEN_
,

352 
_POSIX_
,

353 
_ISOC_


354 } 
	t_LIB_VERSION_TYPE
;

359 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

363 #ifde‡
__USE_MISC


369 #ifde‡
__˝lu•lus


370 
__ex˚±i⁄


372 
ex˚±i⁄


375 
ty≥
;

376 *
«me
;

377 
¨g1
;

378 
¨g2
;

379 
ªtvÆ
;

380 
	}
};

382 #ifde‡
__˝lu•lus


383 
	$m©hîr
 (
__ex˚±i⁄
 *
__exc
Ë
	`throw
 ();

385 
	`m©hîr
 (
ex˚±i⁄
 *
__exc
);

388 
	#X_TLOSS
 1.41484755040568800000e+16

	)

391 
	#DOMAIN
 1

	)

392 
	#SING
 2

	)

393 
	#OVERFLOW
 3

	)

394 
	#UNDERFLOW
 4

	)

395 
	#TLOSS
 5

	)

396 
	#PLOSS
 6

	)

399 
	#HUGE
 3.40282347e+38F

	)

403 #ifde‡
__USE_XOPEN


405 
	#MAXFLOAT
 3.40282347e+38F

	)

412 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


413 
	#M_E
 2.7182818284590452354

	)

414 
	#M_LOG2E
 1.4426950408889634074

	)

415 
	#M_LOG10E
 0.43429448190325182765

	)

416 
	#M_LN2
 0.69314718055994530942

	)

417 
	#M_LN10
 2.30258509299404568402

	)

418 
	#M_PI
 3.14159265358979323846

	)

419 
	#M_PI_2
 1.57079632679489661923

	)

420 
	#M_PI_4
 0.78539816339744830962

	)

421 
	#M_1_PI
 0.31830988618379067154

	)

422 
	#M_2_PI
 0.63661977236758134308

	)

423 
	#M_2_SQRTPI
 1.12837916709551257390

	)

424 
	#M_SQRT2
 1.41421356237309504880

	)

425 
	#M_SQRT1_2
 0.70710678118654752440

	)

431 #ifde‡
__USE_GNU


432 
	#M_El
 2.718281828459045235360287471352662498L

	)

433 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

434 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

435 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

436 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

437 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

438 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

439 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

440 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

441 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

442 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

443 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

444 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

451 #i‡
deföed
 
__STRICT_ANSI__
 && !deföed 
__NO_MATH_INLINES


452 
	#__NO_MATH_INLINES
 1

	)

455 #i‡
deföed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

462 
	#isgª©î
(
x
, 
y
Ë
	`__buûtö_isgª©î
(x, y)

	)

463 
	#isgª©îequÆ
(
x
, 
y
Ë
	`__buûtö_isgª©îequÆ
(x, y)

	)

464 
	#i¶ess
(
x
, 
y
Ë
	`__buûtö_i¶ess
(x, y)

	)

465 
	#i¶es£quÆ
(
x
, 
y
Ë
	`__buûtö_i¶es£quÆ
(x, y)

	)

466 
	#i¶essgª©î
(
x
, 
y
Ë
	`__buûtö_i¶essgª©î
(x, y)

	)

467 
	#isun‹dîed
(
u
, 
v
Ë
	`__buûtö_isun‹dîed
(u, v)

	)

471 #ifde‡
__USE_EXTERN_INLINES


472 
	~<bôs/m©hölöe.h
>

477 #i‡
deföed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

478 
	~<bôs/m©h-föôe.h
>

481 #ifde‡
__USE_ISOC99


485 #i‚de‡
isgª©î


486 
	#isgª©î
(
x
, 
y
) \

487 (
__exãnsi⁄__
 \

488 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

489 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x > __y; 
	}
}))

	)

493 #i‚de‡
isgª©îequÆ


494 
	#isgª©îequÆ
(
x
, 
y
) \

495 (
__exãnsi⁄__
 \

496 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

497 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x >__y; }))

	)

501 #i‚de‡
i¶ess


502 
	#i¶ess
(
x
, 
y
) \

503 (
__exãnsi⁄__
 \

504 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

505 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x < __y; }))

	)

509 #i‚de‡
i¶es£quÆ


510 
	#i¶es£quÆ
(
x
, 
y
) \

511 (
__exãnsi⁄__
 \

512 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

513 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x <__y; }))

	)

517 #i‚de‡
i¶essgª©î


518 
	#i¶essgª©î
(
x
, 
y
) \

519 (
__exãnsi⁄__
 \

520 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

521 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& (__x < __y || __y < __x); }))

	)

525 #i‚de‡
isun‹dîed


526 
	#isun‹dîed
(
u
, 
v
) \

527 (
__exãnsi⁄__
 \

528 ({ 
	`__ty≥of__
(
u
Ë
__u
 = (u); __ty≥of__(
v
Ë
__v
 = (v); \

529 
	`Â˛assify
 (
__u
Ë=
FP_NAN
 || fp˛assify (
__v
Ë=FP_NAN; }))

	)

534 
	g__END_DECLS


	@/usr/include/pthread.h

18 #i‚de‡
_PTHREAD_H


19 
	#_PTHREAD_H
 1

	)

21 
	~<„©uªs.h
>

22 
	~<ídün.h
>

23 
	~<sched.h
>

24 
	~<time.h
>

26 
	~<bôs/±hªadty≥s.h
>

27 
	~<bôs/£tjmp.h
>

28 
	~<bôs/w‹dsize.h
>

34 
	mPTHREAD_CREATE_JOINABLE
,

35 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

36 
	mPTHREAD_CREATE_DETACHED


37 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

44 
	mPTHREAD_MUTEX_TIMED_NP
,

45 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

46 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

47 
	mPTHREAD_MUTEX_ADAPTIVE_NP


48 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


50 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

51 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

52 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

53 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


55 #ifde‡
__USE_GNU


57 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


62 #ifde‡
__USE_XOPEN2K


66 
	mPTHREAD_MUTEX_STALLED
,

67 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

68 
	mPTHREAD_MUTEX_ROBUST
,

69 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


74 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


78 
	mPTHREAD_PRIO_NONE
,

79 
	mPTHREAD_PRIO_INHERIT
,

80 
	mPTHREAD_PRIO_PROTECT


85 #ifde‡
__PTHREAD_MUTEX_HAVE_PREV


86 
	#PTHREAD_MUTEX_INITIALIZER
 \

87 { { 0, 0, 0, 0, 0, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

88 #ifde‡
__USE_GNU


89 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

90 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

91 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

92 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

93 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

94 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

98 
	#PTHREAD_MUTEX_INITIALIZER
 \

99 { { 0, 0, 0, 0, 0, { 
__PTHREAD_SPINS
 } } }

	)

100 #ifde‡
__USE_GNU


101 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

102 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

103 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

104 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

105 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

106 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

113 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


116 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

117 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

118 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

119 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


125 #i‚de‡
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


126 #i‡
__WORDSIZE
 == 64

127 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

132 
	#PTHREAD_RWLOCK_INITIALIZER
 \

133 { { 0, 0, 0, 0, 0, 0, 0, 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, 0 } }

	)

134 #ifde‡
__USE_GNU


135 #ifde‡
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


136 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

137 { { 0, 0, 0, 0, 0, 0, 0, 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, \

138 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

140 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


141 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

142 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

143 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, 0 } }

	)

145 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

146 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

147 0 } }

	)

157 
	mPTHREAD_INHERIT_SCHED
,

158 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

159 
	mPTHREAD_EXPLICIT_SCHED


160 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

167 
	mPTHREAD_SCOPE_SYSTEM
,

168 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

169 
	mPTHREAD_SCOPE_PROCESS


170 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

177 
	mPTHREAD_PROCESS_PRIVATE
,

178 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

179 
	mPTHREAD_PROCESS_SHARED


180 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

186 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*Ë0, 0, 0 } }

	)

190 
	s_±hªad_˛ónup_buf„r


192 (*
	m__routöe
) (*);

193 *
	m__¨g
;

194 
	m__ˇn˚…y≥
;

195 
_±hªad_˛ónup_buf„r
 *
	m__¥ev
;

201 
	mPTHREAD_CANCEL_ENABLE
,

202 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

203 
	mPTHREAD_CANCEL_DISABLE


204 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

208 
	mPTHREAD_CANCEL_DEFERRED
,

209 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

210 
	mPTHREAD_CANCEL_ASYNCHRONOUS


211 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

213 
	#PTHREAD_CANCELED
 ((*Ë-1)

	)

217 
	#PTHREAD_ONCE_INIT
 0

	)

220 #ifde‡
__USE_XOPEN2K


224 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

228 
__BEGIN_DECLS


233 
	$±hªad_¸óã
 (
±hªad_t
 *
__ª°ri˘
 
__√wthªad
,

234 c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

235 *(*
__°¨t_routöe
) (*),

236 *
__ª°ri˘
 
__¨g
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 3));

242 
	$±hªad_exô
 (*
__ªtvÆ
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

250 
	`±hªad_joö
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
);

252 #ifde‡
__USE_GNU


255 
	$±hªad_åyjoö_≈
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
Ë
__THROW
;

263 
	`±hªad_timedjoö_≈
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
,

264 c⁄° 
time•ec
 *
__ab°ime
);

271 
	$±hªad_dëach
 (
±hªad_t
 
__th
Ë
__THROW
;

275 
±hªad_t
 
	$±hªad_£lf
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

278 
	$±hªad_equÆ
 (
±hªad_t
 
__thªad1
,Öthªad_à
__thªad2
)

279 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

287 
	$±hªad_©å_öô
 (
±hªad_©å_t
 *
__©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

290 
	$±hªad_©å_de°roy
 (
±hªad_©å_t
 *
__©å
)

291 
__THROW
 
	`__n⁄nuŒ
 ((1));

294 
	$±hªad_©å_gëdëach°©e
 (c⁄° 
±hªad_©å_t
 *
__©å
,

295 *
__dëach°©e
)

296 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

299 
	$±hªad_©å_£tdëach°©e
 (
±hªad_©å_t
 *
__©å
,

300 
__dëach°©e
)

301 
__THROW
 
	`__n⁄nuŒ
 ((1));

305 
	$±hªad_©å_gëgu¨dsize
 (c⁄° 
±hªad_©å_t
 *
__©å
,

306 
size_t
 *
__gu¨dsize
)

307 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

310 
	$±hªad_©å_£tgu¨dsize
 (
±hªad_©å_t
 *
__©å
,

311 
size_t
 
__gu¨dsize
)

312 
__THROW
 
	`__n⁄nuŒ
 ((1));

316 
	$±hªad_©å_gësched∑øm
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

317 
sched_∑øm
 *
__ª°ri˘
 
__∑øm
)

318 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

321 
	$±hªad_©å_£tsched∑øm
 (
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

322 c⁄° 
sched_∑øm
 *
__ª°ri˘


323 
__∑øm
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

326 
	$±hªad_©å_gëschedpﬁicy
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


327 
__©å
, *
__ª°ri˘
 
__pﬁicy
)

328 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

331 
	$±hªad_©å_£tschedpﬁicy
 (
±hªad_©å_t
 *
__©å
, 
__pﬁicy
)

332 
__THROW
 
	`__n⁄nuŒ
 ((1));

335 
	$±hªad_©å_gëöhîôsched
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


336 
__©å
, *
__ª°ri˘
 
__öhîô
)

337 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

340 
	$±hªad_©å_£töhîôsched
 (
±hªad_©å_t
 *
__©å
,

341 
__öhîô
)

342 
__THROW
 
	`__n⁄nuŒ
 ((1));

346 
	$±hªad_©å_gësc›e
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

347 *
__ª°ri˘
 
__sc›e
)

348 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

351 
	$±hªad_©å_£tsc›e
 (
±hªad_©å_t
 *
__©å
, 
__sc›e
)

352 
__THROW
 
	`__n⁄nuŒ
 ((1));

355 
	$±hªad_©å_gë°ackaddr
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


356 
__©å
, **
__ª°ri˘
 
__°ackaddr
)

357 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__©åibuã_dïªˇãd__
;

363 
	$±hªad_©å_£t°ackaddr
 (
±hªad_©å_t
 *
__©å
,

364 *
__°ackaddr
)

365 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
;

368 
	$±hªad_©å_gë°acksize
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


369 
__©å
, 
size_t
 *
__ª°ri˘
 
__°acksize
)

370 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

375 
	$±hªad_©å_£t°acksize
 (
±hªad_©å_t
 *
__©å
,

376 
size_t
 
__°acksize
)

377 
__THROW
 
	`__n⁄nuŒ
 ((1));

379 #ifde‡
__USE_XOPEN2K


381 
	$±hªad_©å_gë°ack
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

382 **
__ª°ri˘
 
__°ackaddr
,

383 
size_t
 *
__ª°ri˘
 
__°acksize
)

384 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

389 
	$±hªad_©å_£t°ack
 (
±hªad_©å_t
 *
__©å
, *
__°ackaddr
,

390 
size_t
 
__°acksize
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

393 #ifde‡
__USE_GNU


396 
	$±hªad_©å_£èfföôy_≈
 (
±hªad_©å_t
 *
__©å
,

397 
size_t
 
__˝u£tsize
,

398 c⁄° 
˝u_£t_t
 *
__˝u£t
)

399 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

403 
	$±hªad_©å_gëafföôy_≈
 (c⁄° 
±hªad_©å_t
 *
__©å
,

404 
size_t
 
__˝u£tsize
,

405 
˝u_£t_t
 *
__˝u£t
)

406 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

409 
	$±hªad_gë©å_deÁu…_≈
 (
±hªad_©å_t
 *
__©å
)

410 
__THROW
 
	`__n⁄nuŒ
 ((1));

414 
	$±hªad_£èâr_deÁu…_≈
 (c⁄° 
±hªad_©å_t
 *
__©å
)

415 
__THROW
 
	`__n⁄nuŒ
 ((1));

420 
	$±hªad_gë©å_≈
 (
±hªad_t
 
__th
, 
±hªad_©å_t
 *
__©å
)

421 
__THROW
 
	`__n⁄nuŒ
 ((2));

429 
	$±hªad_£tsched∑øm
 (
±hªad_t
 
__èrgë_thªad
, 
__pﬁicy
,

430 c⁄° 
sched_∑øm
 *
__∑øm
)

431 
__THROW
 
	`__n⁄nuŒ
 ((3));

434 
	$±hªad_gësched∑øm
 (
±hªad_t
 
__èrgë_thªad
,

435 *
__ª°ri˘
 
__pﬁicy
,

436 
sched_∑øm
 *
__ª°ri˘
 
__∑øm
)

437 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

440 
	$±hªad_£tsched¥io
 (
±hªad_t
 
__èrgë_thªad
, 
__¥io
)

441 
__THROW
;

444 #ifde‡
__USE_GNU


446 
	$±hªad_gë«me_≈
 (
±hªad_t
 
__èrgë_thªad
, *
__buf
,

447 
size_t
 
__buÊí
)

448 
__THROW
 
	`__n⁄nuŒ
 ((2));

451 
	$±hªad_£äame_≈
 (
±hªad_t
 
__èrgë_thªad
, c⁄° *
__«me
)

452 
__THROW
 
	`__n⁄nuŒ
 ((2));

456 #ifde‡
__USE_UNIX98


458 
	$±hªad_gëc⁄cuºícy
 (Ë
__THROW
;

461 
	$±hªad_£tc⁄cuºícy
 (
__Àvñ
Ë
__THROW
;

464 #ifde‡
__USE_GNU


469 
	$±hªad_yõld
 (Ë
__THROW
;

474 
	$±hªad_£èfföôy_≈
 (
±hªad_t
 
__th
, 
size_t
 
__˝u£tsize
,

475 c⁄° 
˝u_£t_t
 *
__˝u£t
)

476 
__THROW
 
	`__n⁄nuŒ
 ((3));

479 
	$±hªad_gëafföôy_≈
 (
±hªad_t
 
__th
, 
size_t
 
__˝u£tsize
,

480 
˝u_£t_t
 *
__˝u£t
)

481 
__THROW
 
	`__n⁄nuŒ
 ((3));

494 
	$±hªad_⁄˚
 (
±hªad_⁄˚_t
 *
__⁄˚_c⁄åﬁ
,

495 (*
__öô_routöe
Ë()Ë
	`__n⁄nuŒ
 ((1, 2));

506 
	`±hªad_£tˇn˚l°©e
 (
__°©e
, *
__ﬁd°©e
);

510 
	`±hªad_£tˇn˚…y≥
 (
__ty≥
, *
__ﬁdty≥
);

513 
	`±hªad_ˇn˚l
 (
±hªad_t
 
__th
);

518 
	`±hªad_ã°ˇn˚l
 ();

527 
__jmp_buf
 
__ˇn˚l_jmp_buf
;

528 
__mask_was_ßved
;

529 } 
__ˇn˚l_jmp_buf
[1];

530 *
__∑d
[4];

531 } 
	t__±hªad_unwöd_buf_t
 
	t__©åibuã__
 ((
	t__Æig√d__
));

534 #i‚de‡
__˛ónup_f˘_©åibuã


535 
	#__˛ónup_f˘_©åibuã


	)

540 
	s__±hªad_˛ónup_‰ame


542 (*
__ˇn˚l_routöe
) (*);

543 *
__ˇn˚l_¨g
;

544 
__do_ô
;

545 
__ˇn˚l_ty≥
;

548 #i‡
deföed
 
__GNUC__
 && deföed 
__EXCEPTIONS


549 #ifde‡
__˝lu•lus


551 ˛as†
	c__±hªad_˛ónup_˛ass


553 (*
__ˇn˚l_routöe
) (*);

554 *
__ˇn˚l_¨g
;

555 
__do_ô
;

556 
__ˇn˚l_ty≥
;

558 
public
:

559 
	$__±hªad_˛ónup_˛ass
 ((*
__f˘
Ë(*), *
__¨g
)

560 : 
	`__ˇn˚l_routöe
 (
__f˘
), 
	`__ˇn˚l_¨g
 (
__¨g
), 
	$__do_ô
 (1) { }

561 ~
	$__±hªad_˛ónup_˛ass
 (Ë{ i‡(
__do_ô
Ë
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); 
	}
}

562 
	$__£tdoô
 (
__√wvÆ
Ë{ 
__do_ô
 = __√wvÆ; 
	}
}

563 
	$__de„r
 (Ë{ 
	`±hªad_£tˇn˚…y≥
 (
PTHREAD_CANCEL_DEFERRED
,

564 &
__ˇn˚l_ty≥
); 
	}
}

565 
	$__ª°‹e
 (Ëc⁄° { 
	`±hªad_£tˇn˚…y≥
 (
__ˇn˚l_ty≥
, 0); 
	}
}

575 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

577 
__±hªad_˛ónup_˛ass
 
	`__˛‰ame
 (
routöe
, 
¨g
)

	)

581 
	#±hªad_˛ónup_p›
(
execuã
) \

582 
__˛‰ame
.
	`__£tdoô
 (
execuã
); \

583 } 0)

	)

585 #ifde‡
__USE_GNU


589 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

591 
__±hªad_˛ónup_˛ass
 
	`__˛‰ame
 (
routöe
, 
¨g
); \

592 
__˛‰ame
.
	`__de„r
 ()

	)

597 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

598 
__˛‰ame
.
	`__ª°‹e
 (); \

599 
__˛‰ame
.
	`__£tdoô
 (
execuã
); \

600 } 0)

	)

607 
__exã∫_ölöe
 

608 
	$__±hªad_˛ónup_routöe
 (
__±hªad_˛ónup_‰ame
 *
__‰ame
)

610 i‡(
__‰ame
->
__do_ô
)

611 
__‰ame
->
	`__ˇn˚l_routöe
 (__‰ame->
__ˇn˚l_¨g
);

612 
	}
}

621 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

623 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

624 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__±hªad_˛ónup_routöe
))) \

625 { .
__ˇn˚l_routöe
 = (
routöe
), .
__ˇn˚l_¨g
 = (
¨g
), \

626 .
__do_ô
 = 1 };

	)

630 
	#±hªad_˛ónup_p›
(
execuã
) \

631 
__˛‰ame
.
__do_ô
 = (
execuã
); \

632 } 0)

	)

634 #ifde‡
__USE_GNU


638 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

640 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

641 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__±hªad_˛ónup_routöe
))) \

642 { .
__ˇn˚l_routöe
 = (
routöe
), .
__ˇn˚l_¨g
 = (
¨g
), \

643 .
__do_ô
 = 1 }; \

644 (Ë
	`±hªad_£tˇn˚…y≥
 (
PTHREAD_CANCEL_DEFERRED
, \

645 &
__˛‰ame
.
__ˇn˚l_ty≥
)

	)

650 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

651 (Ë
	`±hªad_£tˇn˚…y≥
 (
__˛‰ame
.
__ˇn˚l_ty≥
, 
NULL
); \

652 
__˛‰ame
.
__do_ô
 = (
execuã
); \

653 } 0)

	)

664 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

666 
__±hªad_unwöd_buf_t
 
__ˇn˚l_buf
; \

667 (*
__ˇn˚l_routöe
Ë(*Ë(
routöe
); \

668 *
__ˇn˚l_¨g
 = (
¨g
); \

669 
__nŸ_fú°_ˇŒ
 = 
	`__sig£tjmp
 ((
__jmp_buf_èg
 *) (*) \

670 
__ˇn˚l_buf
.
__ˇn˚l_jmp_buf
, 0); \

671 i‡(
	`__glibc_u∆ikñy
 (
__nŸ_fú°_ˇŒ
)) \

673 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

674 
	`__±hªad_unwöd_√xt
 (&
__ˇn˚l_buf
); \

678 
	`__±hªad_ªgi°î_ˇn˚l
 (&
__ˇn˚l_buf
); \

679 dÿ{

	)

680 
__±hªad_ªgi°î_ˇn˚l
 (
__±hªad_unwöd_buf_t
 *
__buf
)

681 
__˛ónup_f˘_©åibuã
;

685 
	#±hªad_˛ónup_p›
(
execuã
) \

688 
	`__±hªad_uƒegi°î_ˇn˚l
 (&
__ˇn˚l_buf
); \

689 i‡(
execuã
) \

690 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

691 } 0)

	)

692 
	$__±hªad_uƒegi°î_ˇn˚l
 (
__±hªad_unwöd_buf_t
 *
__buf
)

693 
__˛ónup_f˘_©åibuã
;

695 #ifde‡
__USE_GNU


699 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

701 
__±hªad_unwöd_buf_t
 
__ˇn˚l_buf
; \

702 (*
__ˇn˚l_routöe
Ë(*Ë(
routöe
); \

703 *
__ˇn˚l_¨g
 = (
¨g
); \

704 
__nŸ_fú°_ˇŒ
 = 
	`__sig£tjmp
 ((
__jmp_buf_èg
 *) (*) \

705 
__ˇn˚l_buf
.
__ˇn˚l_jmp_buf
, 0); \

706 i‡(
	`__glibc_u∆ikñy
 (
__nŸ_fú°_ˇŒ
)) \

708 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

709 
	`__±hªad_unwöd_√xt
 (&
__ˇn˚l_buf
); \

713 
	`__±hªad_ªgi°î_ˇn˚l_de„r
 (&
__ˇn˚l_buf
); \

714 dÿ{

	)

715 
	`__±hªad_ªgi°î_ˇn˚l_de„r
 (
__±hªad_unwöd_buf_t
 *
__buf
)

716 
__˛ónup_f˘_©åibuã
;

721 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

724 
	`__±hªad_uƒegi°î_ˇn˚l_ª°‹e
 (&
__ˇn˚l_buf
); \

725 i‡(
execuã
) \

726 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

727 
	}
} 0)

	)

728 
	$__±hªad_uƒegi°î_ˇn˚l_ª°‹e
 (
__±hªad_unwöd_buf_t
 *
__buf
)

729 
__˛ónup_f˘_©åibuã
;

733 
	$__±hªad_unwöd_√xt
 (
__±hªad_unwöd_buf_t
 *
__buf
)

734 
__˛ónup_f˘_©åibuã
 
	`__©åibuã__
 ((
__n‹ëu∫__
))

735 #i‚de‡
SHARED


736 
	`__©åibuã__
 ((
__wók__
))

742 
__jmp_buf_èg
;

743 
	$__sig£tjmp
 (
__jmp_buf_èg
 *
__ív
, 
__ßvemask
Ë
__THROWNL
;

749 
	$±hªad_muãx_öô
 (
±hªad_muãx_t
 *
__muãx
,

750 c⁄° 
±hªad_muãx©å_t
 *
__muãx©å
)

751 
__THROW
 
	`__n⁄nuŒ
 ((1));

754 
	$±hªad_muãx_de°roy
 (
±hªad_muãx_t
 *
__muãx
)

755 
__THROW
 
	`__n⁄nuŒ
 ((1));

758 
	$±hªad_muãx_åylock
 (
±hªad_muãx_t
 *
__muãx
)

759 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

762 
	$±hªad_muãx_lock
 (
±hªad_muãx_t
 *
__muãx
)

763 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

765 #ifde‡
__USE_XOPEN2K


767 
	$±hªad_muãx_timedlock
 (
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

768 c⁄° 
time•ec
 *
__ª°ri˘


769 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

773 
	$±hªad_muãx_u∆ock
 (
±hªad_muãx_t
 *
__muãx
)

774 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

778 
	$±hªad_muãx_gë¥io˚ûög
 (c⁄° 
±hªad_muãx_t
 *

779 
__ª°ri˘
 
__muãx
,

780 *
__ª°ri˘
 
__¥io˚ûög
)

781 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

785 
	$±hªad_muãx_£çrio˚ûög
 (
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

786 
__¥io˚ûög
,

787 *
__ª°ri˘
 
__ﬁd_˚ûög
)

788 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

791 #ifde‡
__USE_XOPEN2K8


793 
	$±hªad_muãx_c⁄si°ít
 (
±hªad_muãx_t
 *
__muãx
)

794 
__THROW
 
	`__n⁄nuŒ
 ((1));

795 #ifde‡
__USE_GNU


796 
	$±hªad_muãx_c⁄si°ít_≈
 (
±hªad_muãx_t
 *
__muãx
)

797 
__THROW
 
	`__n⁄nuŒ
 ((1));

806 
	$±hªad_muãx©å_öô
 (
±hªad_muãx©å_t
 *
__©å
)

807 
__THROW
 
	`__n⁄nuŒ
 ((1));

810 
	$±hªad_muãx©å_de°roy
 (
±hªad_muãx©å_t
 *
__©å
)

811 
__THROW
 
	`__n⁄nuŒ
 ((1));

814 
	$±hªad_muãx©å_gëpsh¨ed
 (c⁄° 
±hªad_muãx©å_t
 *

815 
__ª°ri˘
 
__©å
,

816 *
__ª°ri˘
 
__psh¨ed
)

817 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

820 
	$±hªad_muãx©å_£çsh¨ed
 (
±hªad_muãx©å_t
 *
__©å
,

821 
__psh¨ed
)

822 
__THROW
 
	`__n⁄nuŒ
 ((1));

824 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


826 
	$±hªad_muãx©å_gëty≥
 (c⁄° 
±hªad_muãx©å_t
 *
__ª°ri˘


827 
__©å
, *
__ª°ri˘
 
__köd
)

828 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

833 
	$±hªad_muãx©å_£ây≥
 (
±hªad_muãx©å_t
 *
__©å
, 
__köd
)

834 
__THROW
 
	`__n⁄nuŒ
 ((1));

838 
	$±hªad_muãx©å_gë¥Ÿocﬁ
 (c⁄° 
±hªad_muãx©å_t
 *

839 
__ª°ri˘
 
__©å
,

840 *
__ª°ri˘
 
__¥Ÿocﬁ
)

841 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

845 
	$±hªad_muãx©å_£çrŸocﬁ
 (
±hªad_muãx©å_t
 *
__©å
,

846 
__¥Ÿocﬁ
)

847 
__THROW
 
	`__n⁄nuŒ
 ((1));

850 
	$±hªad_muãx©å_gë¥io˚ûög
 (c⁄° 
±hªad_muãx©å_t
 *

851 
__ª°ri˘
 
__©å
,

852 *
__ª°ri˘
 
__¥io˚ûög
)

853 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

856 
	$±hªad_muãx©å_£çrio˚ûög
 (
±hªad_muãx©å_t
 *
__©å
,

857 
__¥io˚ûög
)

858 
__THROW
 
	`__n⁄nuŒ
 ((1));

860 #ifde‡
__USE_XOPEN2K


862 
	$±hªad_muãx©å_gërobu°
 (c⁄° 
±hªad_muãx©å_t
 *
__©å
,

863 *
__robu°√ss
)

864 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

865 #ifde‡
__USE_GNU


866 
	$±hªad_muãx©å_gërobu°_≈
 (c⁄° 
±hªad_muãx©å_t
 *
__©å
,

867 *
__robu°√ss
)

868 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

872 
	$±hªad_muãx©å_£åobu°
 (
±hªad_muãx©å_t
 *
__©å
,

873 
__robu°√ss
)

874 
__THROW
 
	`__n⁄nuŒ
 ((1));

875 #ifde‡
__USE_GNU


876 
	$±hªad_muãx©å_£åobu°_≈
 (
±hªad_muãx©å_t
 *
__©å
,

877 
__robu°√ss
)

878 
__THROW
 
	`__n⁄nuŒ
 ((1));

883 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


888 
	$±hªad_rwlock_öô
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

889 c⁄° 
±hªad_rwlock©å_t
 *
__ª°ri˘


890 
__©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

893 
	$±hªad_rwlock_de°roy
 (
±hªad_rwlock_t
 *
__rwlock
)

894 
__THROW
 
	`__n⁄nuŒ
 ((1));

897 
	$±hªad_rwlock_rdlock
 (
±hªad_rwlock_t
 *
__rwlock
)

898 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

901 
	$±hªad_rwlock_åyrdlock
 (
±hªad_rwlock_t
 *
__rwlock
)

902 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

904 #ifde‡
__USE_XOPEN2K


906 
	$±hªad_rwlock_timedrdlock
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

907 c⁄° 
time•ec
 *
__ª°ri˘


908 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

912 
	$±hªad_rwlock_wæock
 (
±hªad_rwlock_t
 *
__rwlock
)

913 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

916 
	$±hªad_rwlock_åywæock
 (
±hªad_rwlock_t
 *
__rwlock
)

917 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

919 #ifde‡
__USE_XOPEN2K


921 
	$±hªad_rwlock_timedwæock
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

922 c⁄° 
time•ec
 *
__ª°ri˘


923 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

927 
	$±hªad_rwlock_u∆ock
 (
±hªad_rwlock_t
 *
__rwlock
)

928 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

934 
	$±hªad_rwlock©å_öô
 (
±hªad_rwlock©å_t
 *
__©å
)

935 
__THROW
 
	`__n⁄nuŒ
 ((1));

938 
	$±hªad_rwlock©å_de°roy
 (
±hªad_rwlock©å_t
 *
__©å
)

939 
__THROW
 
	`__n⁄nuŒ
 ((1));

942 
	$±hªad_rwlock©å_gëpsh¨ed
 (c⁄° 
±hªad_rwlock©å_t
 *

943 
__ª°ri˘
 
__©å
,

944 *
__ª°ri˘
 
__psh¨ed
)

945 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

948 
	$±hªad_rwlock©å_£çsh¨ed
 (
±hªad_rwlock©å_t
 *
__©å
,

949 
__psh¨ed
)

950 
__THROW
 
	`__n⁄nuŒ
 ((1));

953 
	$±hªad_rwlock©å_gëköd_≈
 (c⁄° 
±hªad_rwlock©å_t
 *

954 
__ª°ri˘
 
__©å
,

955 *
__ª°ri˘
 
__¥ef
)

956 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

959 
	$±hªad_rwlock©å_£tköd_≈
 (
±hªad_rwlock©å_t
 *
__©å
,

960 
__¥ef
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

968 
	$±hªad_c⁄d_öô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

969 c⁄° 
±hªad_c⁄d©å_t
 *
__ª°ri˘
 
__c⁄d_©å
)

970 
__THROW
 
	`__n⁄nuŒ
 ((1));

973 
	$±hªad_c⁄d_de°roy
 (
±hªad_c⁄d_t
 *
__c⁄d
)

974 
__THROW
 
	`__n⁄nuŒ
 ((1));

977 
	$±hªad_c⁄d_sig«l
 (
±hªad_c⁄d_t
 *
__c⁄d
)

978 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

981 
	$±hªad_c⁄d_brﬂdˇ°
 (
±hªad_c⁄d_t
 *
__c⁄d
)

982 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

989 
	$±hªad_c⁄d_waô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

990 
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
)

991 
	`__n⁄nuŒ
 ((1, 2));

1000 
	$±hªad_c⁄d_timedwaô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

1001 
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

1002 c⁄° 
time•ec
 *
__ª°ri˘
 
__ab°ime
)

1003 
	`__n⁄nuŒ
 ((1, 2, 3));

1008 
	$±hªad_c⁄d©å_öô
 (
±hªad_c⁄d©å_t
 *
__©å
)

1009 
__THROW
 
	`__n⁄nuŒ
 ((1));

1012 
	$±hªad_c⁄d©å_de°roy
 (
±hªad_c⁄d©å_t
 *
__©å
)

1013 
__THROW
 
	`__n⁄nuŒ
 ((1));

1016 
	$±hªad_c⁄d©å_gëpsh¨ed
 (c⁄° 
±hªad_c⁄d©å_t
 *

1017 
__ª°ri˘
 
__©å
,

1018 *
__ª°ri˘
 
__psh¨ed
)

1019 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1022 
	$±hªad_c⁄d©å_£çsh¨ed
 (
±hªad_c⁄d©å_t
 *
__©å
,

1023 
__psh¨ed
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

1025 #ifde‡
__USE_XOPEN2K


1027 
	$±hªad_c⁄d©å_gë˛ock
 (c⁄° 
±hªad_c⁄d©å_t
 *

1028 
__ª°ri˘
 
__©å
,

1029 
__˛ockid_t
 *
__ª°ri˘
 
__˛ock_id
)

1030 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1033 
	$±hªad_c⁄d©å_£t˛ock
 (
±hªad_c⁄d©å_t
 *
__©å
,

1034 
__˛ockid_t
 
__˛ock_id
)

1035 
__THROW
 
	`__n⁄nuŒ
 ((1));

1039 #ifde‡
__USE_XOPEN2K


1044 
	$±hªad_•ö_öô
 (
±hªad_•ölock_t
 *
__lock
, 
__psh¨ed
)

1045 
__THROW
 
	`__n⁄nuŒ
 ((1));

1048 
	$±hªad_•ö_de°roy
 (
±hªad_•ölock_t
 *
__lock
)

1049 
__THROW
 
	`__n⁄nuŒ
 ((1));

1052 
	$±hªad_•ö_lock
 (
±hªad_•ölock_t
 *
__lock
)

1053 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1056 
	$±hªad_•ö_åylock
 (
±hªad_•ölock_t
 *
__lock
)

1057 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1060 
	$±hªad_•ö_u∆ock
 (
±hªad_•ölock_t
 *
__lock
)

1061 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1068 
	$±hªad_b¨rõr_öô
 (
±hªad_b¨rõr_t
 *
__ª°ri˘
 
__b¨rõr
,

1069 c⁄° 
±hªad_b¨rõøâr_t
 *
__ª°ri˘


1070 
__©å
, 
__cou¡
)

1071 
__THROW
 
	`__n⁄nuŒ
 ((1));

1074 
	$±hªad_b¨rõr_de°roy
 (
±hªad_b¨rõr_t
 *
__b¨rõr
)

1075 
__THROW
 
	`__n⁄nuŒ
 ((1));

1078 
	$±hªad_b¨rõr_waô
 (
±hªad_b¨rõr_t
 *
__b¨rõr
)

1079 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1083 
	$±hªad_b¨rõøâr_öô
 (
±hªad_b¨rõøâr_t
 *
__©å
)

1084 
__THROW
 
	`__n⁄nuŒ
 ((1));

1087 
	$±hªad_b¨rõøâr_de°roy
 (
±hªad_b¨rõøâr_t
 *
__©å
)

1088 
__THROW
 
	`__n⁄nuŒ
 ((1));

1091 
	$±hªad_b¨rõøâr_gëpsh¨ed
 (c⁄° 
±hªad_b¨rõøâr_t
 *

1092 
__ª°ri˘
 
__©å
,

1093 *
__ª°ri˘
 
__psh¨ed
)

1094 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1097 
	$±hªad_b¨rõøâr_£çsh¨ed
 (
±hªad_b¨rõøâr_t
 *
__©å
,

1098 
__psh¨ed
)

1099 
__THROW
 
	`__n⁄nuŒ
 ((1));

1111 
	$±hªad_key_¸óã
 (
±hªad_key_t
 *
__key
,

1112 (*
__de°r_fun˘i⁄
) (*))

1113 
__THROW
 
	`__n⁄nuŒ
 ((1));

1116 
	$±hªad_key_dñëe
 (
±hªad_key_t
 
__key
Ë
__THROW
;

1119 *
	$±hªad_gë•ecific
 (
±hªad_key_t
 
__key
Ë
__THROW
;

1122 
	$±hªad_£t•ecific
 (
±hªad_key_t
 
__key
,

1123 c⁄° *
__poöãr
Ë
__THROW
 ;

1126 #ifde‡
__USE_XOPEN2K


1128 
	$±hªad_gë˝u˛ockid
 (
±hªad_t
 
__thªad_id
,

1129 
__˛ockid_t
 *
__˛ock_id
)

1130 
__THROW
 
	`__n⁄nuŒ
 ((2));

1145 
	$±hªad_©f‹k
 ((*
__¥ï¨e
) (),

1146 (*
__∑ª¡
) (),

1147 (*
__chûd
Ë()Ë
__THROW
;

1150 #ifde‡
__USE_EXTERN_INLINES


1152 
__exã∫_ölöe
 

1153 
	`__NTH
 (
	$±hªad_equÆ
 (
±hªad_t
 
__thªad1
,Öthªad_à
__thªad2
))

1155  
__thªad1
 =
__thªad2
;

1156 
	}
}

1159 
	g__END_DECLS


	@/usr/include/sched.h

19 #i‚def 
_SCHED_H


20 
	#_SCHED_H
 1

	)

22 
	~<„©uªs.h
>

25 
	~<bôs/ty≥s.h
>

27 
	#__√ed_size_t


	)

28 
	~<°ddef.h
>

30 #ifde‡
__USE_XOPEN2K


31 
	#__√ed_time_t


	)

32 
	#__√ed_time•ec


	)

34 
	~<time.h
>

36 #i‚de‡
__pid_t_deföed


37 
__pid_t
 
	tpid_t
;

38 
	#__pid_t_deföed


	)

43 
	~<bôs/sched.h
>

45 
	#sched_¥i‹ôy
 
__sched_¥i‹ôy


	)

48 
__BEGIN_DECLS


51 
	$sched_£ç¨am
 (
__pid_t
 
__pid
, c⁄° 
sched_∑øm
 *
__∑øm
)

52 
__THROW
;

55 
	$sched_gë∑øm
 (
__pid_t
 
__pid
, 
sched_∑øm
 *
__∑øm
Ë
__THROW
;

58 
	$sched_£tscheduÀr
 (
__pid_t
 
__pid
, 
__pﬁicy
,

59 c⁄° 
sched_∑øm
 *
__∑øm
Ë
__THROW
;

62 
	$sched_gëscheduÀr
 (
__pid_t
 
__pid
Ë
__THROW
;

65 
	$sched_yõld
 (Ë
__THROW
;

68 
	$sched_gë_¥i‹ôy_max
 (
__Æg‹ôhm
Ë
__THROW
;

71 
	$sched_gë_¥i‹ôy_mö
 (
__Æg‹ôhm
Ë
__THROW
;

74 
	$sched_º_gë_öãrvÆ
 (
__pid_t
 
__pid
, 
time•ec
 *
__t
Ë
__THROW
;

77 #ifde‡
__USE_GNU


79 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

80 
	#CPU_SET
(
˝u
, 
˝u£ç
Ë
	`__CPU_SET_S
 (˝u,  (
˝u_£t_t
), cpu£ç)

	)

81 
	#CPU_CLR
(
˝u
, 
˝u£ç
Ë
	`__CPU_CLR_S
 (˝u,  (
˝u_£t_t
), cpu£ç)

	)

82 
	#CPU_ISSET
(
˝u
, 
˝u£ç
Ë
	`__CPU_ISSET_S
 (˝u,  (
˝u_£t_t
), \

83 
˝u£ç
)

	)

84 
	#CPU_ZERO
(
˝u£ç
Ë
	`__CPU_ZERO_S
 ( (
˝u_£t_t
), cpu£ç)

	)

85 
	#CPU_COUNT
(
˝u£ç
Ë
	`__CPU_COUNT_S
 ( (
˝u_£t_t
), cpu£ç)

	)

87 
	#CPU_SET_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_SET_S
 (˝u, sësize, cpu£ç)

	)

88 
	#CPU_CLR_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_CLR_S
 (˝u, sësize, cpu£ç)

	)

89 
	#CPU_ISSET_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_ISSET_S
 (cpu, setsize, \

90 
˝u£ç
)

	)

91 
	#CPU_ZERO_S
(
£tsize
, 
˝u£ç
Ë
	`__CPU_ZERO_S
 (£tsize, cpu£ç)

	)

92 
	#CPU_COUNT_S
(
£tsize
, 
˝u£ç
Ë
	`__CPU_COUNT_S
 (£tsize, cpu£ç)

	)

94 
	#CPU_EQUAL
(
˝u£ç1
, 
˝u£ç2
) \

95 
	`__CPU_EQUAL_S
 ( (
˝u_£t_t
), 
˝u£ç1
, 
˝u£ç2
)

	)

96 
	#CPU_EQUAL_S
(
£tsize
, 
˝u£ç1
, 
˝u£ç2
) \

97 
	`__CPU_EQUAL_S
 (
£tsize
, 
˝u£ç1
, 
˝u£ç2
)

	)

99 
	#CPU_AND
(
de°£t
, 
§c£t1
, 
§c£t2
) \

100 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, &)

	)

101 
	#CPU_OR
(
de°£t
, 
§c£t1
, 
§c£t2
) \

102 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, |)

	)

103 
	#CPU_XOR
(
de°£t
, 
§c£t1
, 
§c£t2
) \

104 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, ^)

	)

105 
	#CPU_AND_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

106 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, &)

	)

107 
	#CPU_OR_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

108 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, |)

	)

109 
	#CPU_XOR_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

110 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, ^)

	)

112 
	#CPU_ALLOC_SIZE
(
cou¡
Ë
	`__CPU_ALLOC_SIZE
 (cou¡)

	)

113 
	#CPU_ALLOC
(
cou¡
Ë
	`__CPU_ALLOC
 (cou¡)

	)

114 
	#CPU_FREE
(
˝u£t
Ë
	`__CPU_FREE
 (˝u£t)

	)

118 
	$sched_£èfföôy
 (
__pid_t
 
__pid
, 
size_t
 
__˝u£tsize
,

119 c⁄° 
˝u_£t_t
 *
__˝u£t
Ë
__THROW
;

122 
	$sched_gëafföôy
 (
__pid_t
 
__pid
, 
size_t
 
__˝u£tsize
,

123 
˝u_£t_t
 *
__˝u£t
Ë
__THROW
;

126 
__END_DECLS


	@/usr/include/signal.h

22 #i‚def 
_SIGNAL_H


24 #i‡!
deföed
 
__√ed_sig_©omic_t
 && !deföed 
__√ed_sig£t_t


25 
	#_SIGNAL_H


	)

28 
	~<„©uªs.h
>

30 
	g__BEGIN_DECLS


32 
	~<bôs/sig£t.h
>

36 #i‡
deföed
 
__√ed_sig_©omic_t
 || deföed 
_SIGNAL_H


37 #i‚de‡
__sig_©omic_t_deföed


38 
	#__sig_©omic_t_deföed


	)

39 
__BEGIN_NAMESPACE_STD


40 
__sig_©omic_t
 
	tsig_©omic_t
;

41 
	g__END_NAMESPACE_STD


43 #unde‡
__√ed_sig_©omic_t


46 #i‡
deföed
 
__√ed_sig£t_t
 || (deföed 
_SIGNAL_H
 && deföed 
__USE_POSIX
)

47 #i‚de‡
__sig£t_t_deföed


48 
	#__sig£t_t_deföed


	)

49 
__sig£t_t
 
	tsig£t_t
;

51 #unde‡
__√ed_sig£t_t


54 #ifde‡
_SIGNAL_H


56 
	~<bôs/ty≥s.h
>

57 
	~<bôs/signum.h
>

59 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


60 #i‚de‡
__pid_t_deföed


61 
__pid_t
 
	tpid_t
;

62 
	#__pid_t_deföed


	)

64 #ifde‡
__USE_XOPEN


66 #i‚de‡
__uid_t_deföed


67 
__uid_t
 
	tuid_t
;

68 
	#__uid_t_deföed


	)

72 #ifde‡
__USE_POSIX199309


74 
	#__√ed_time•ec


	)

75 
	~<time.h
>

78 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_XOPEN_EXTENDED


80 
	~<bôs/sigöfo.h
>

85 (*
	t__sigh™dÀr_t
) ();

90 
__sigh™dÀr_t
 
	$__sysv_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

91 
__THROW
;

92 #ifde‡
__USE_GNU


93 
__sigh™dÀr_t
 
	$sysv_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

94 
__THROW
;

100 
__BEGIN_NAMESPACE_STD


101 #ifde‡
__USE_MISC


102 
__sigh™dÀr_t
 
	$sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

103 
__THROW
;

106 #ifde‡
__REDIRECT_NTH


107 
__sigh™dÀr_t
 
	`__REDIRECT_NTH
 (
sig«l
,

108 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
),

109 
__sysv_sig«l
);

111 
	#sig«l
 
__sysv_sig«l


	)

114 
__END_NAMESPACE_STD


116 #ifde‡
__USE_XOPEN


119 
__sigh™dÀr_t
 
	$bsd_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

120 
__THROW
;

126 #ifde‡
__USE_POSIX


127 
	$kûl
 (
__pid_t
 
__pid
, 
__sig
Ë
__THROW
;

130 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


134 
	$kûÕg
 (
__pid_t
 
__pgΩ
, 
__sig
Ë
__THROW
;

137 
__BEGIN_NAMESPACE_STD


139 
	$øi£
 (
__sig
Ë
__THROW
;

140 
__END_NAMESPACE_STD


142 #ifde‡
__USE_MISC


144 
__sigh™dÀr_t
 
	$ssig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

145 
__THROW
;

146 
	$gsig«l
 (
__sig
Ë
__THROW
;

149 #ifde‡
__USE_XOPEN2K8


151 
	`psig«l
 (
__sig
, c⁄° *
__s
);

154 
	`psigöfo
 (c⁄° 
sigöfo_t
 *
__pöfo
, c⁄° *
__s
);

166 #ifde‡
__USE_XOPEN


167 #ifde‡
__GNUC__


168 
	$sig∑u£
 (
__sig
Ë
	`__asm__
 ("__xpg_sigpause");

170 
	`__sig∑u£
 (
__sig_‹_mask
, 
__is_sig
);

172 
	#sig∑u£
(
sig
Ë
	`__sig∑u£
 ((sig), 1)

	)

177 #ifde‡
__USE_MISC


184 
	#sigmask
(
sig
Ë
	`__sigmask
(sig)

	)

187 
	$sigblock
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

190 
	$sig£tmask
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

193 
	$siggëmask
 (Ë
__THROW
 
__©åibuã_dïªˇãd__
;

197 #ifde‡
__USE_MISC


198 
	#NSIG
 
_NSIG


	)

201 #ifde‡
__USE_GNU


202 
__sigh™dÀr_t
 
	tsigh™dÀr_t
;

206 #ifde‡
__USE_MISC


207 
__sigh™dÀr_t
 
	tsig_t
;

210 #ifde‡
__USE_POSIX


213 
	$sigem±y£t
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

216 
	$sigfûl£t
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

219 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

222 
	$sigdñ£t
 (
sig£t_t
 *
__£t
, 
__signo
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

225 
	$sigismembî
 (c⁄° 
sig£t_t
 *
__£t
, 
__signo
)

226 
__THROW
 
	`__n⁄nuŒ
 ((1));

228 #ifde‡
__USE_GNU


230 
	$sigi£m±y£t
 (c⁄° 
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

233 
	$sig™d£t
 (
sig£t_t
 *
__£t
, c⁄° sig£t_à*
__À·
,

234 c⁄° 
sig£t_t
 *
__right
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

237 
	$sig‹£t
 (
sig£t_t
 *
__£t
, c⁄° sig£t_à*
__À·
,

238 c⁄° 
sig£t_t
 *
__right
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

243 
	~<bôs/siga˘i⁄.h
>

246 
	$sig¥ocmask
 (
__how
, c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
,

247 
sig£t_t
 *
__ª°ri˘
 
__o£t
Ë
__THROW
;

254 
	$sigsu•íd
 (c⁄° 
sig£t_t
 *
__£t
Ë
	`__n⁄nuŒ
 ((1));

257 
	$siga˘i⁄
 (
__sig
, c⁄° 
siga˘i⁄
 *
__ª°ri˘
 
__a˘
,

258 
siga˘i⁄
 *
__ª°ri˘
 
__ﬂ˘
Ë
__THROW
;

261 
	$sig≥ndög
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

268 
	$sigwaô
 (c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
, *__ª°ri˘ 
__sig
)

269 
	`__n⁄nuŒ
 ((1, 2));

271 #ifde‡
__USE_POSIX199309


276 
	$sigwaôöfo
 (c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
,

277 
sigöfo_t
 *
__ª°ri˘
 
__öfo
Ë
	`__n⁄nuŒ
 ((1));

284 
	$sigtimedwaô
 (c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
,

285 
sigöfo_t
 *
__ª°ri˘
 
__öfo
,

286 c⁄° 
time•ec
 *
__ª°ri˘
 
__timeout
)

287 
	`__n⁄nuŒ
 ((1));

291 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, c⁄° 
sigvÆ
 
__vÆ
)

292 
__THROW
;

297 #ifde‡
__USE_MISC


301 c⁄° *c⁄° 
_sys_sigli°
[
_NSIG
];

302 c⁄° *c⁄° 
sys_sigli°
[
_NSIG
];

306 
	~<bôs/sigc⁄ãxt.h
>

309 
	$sigªtu∫
 (
sigc⁄ãxt
 *
__s˝
Ë
__THROW
;

314 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


315 
	#__√ed_size_t


	)

316 
	~<°ddef.h
>

321 
	$sigöãºu±
 (
__sig
, 
__öãºu±
Ë
__THROW
;

323 
	~<bôs/sig°ack.h
>

324 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


326 
	~<sys/uc⁄ãxt.h
>

332 
	$sig°ack
 (
sig°ack
 *
__ss
, sig°ack *
__oss
)

333 
__THROW
 
__©åibuã_dïªˇãd__
;

337 
	$sigÆt°ack
 (c⁄° 
sigÆt°ack
 *
__ª°ri˘
 
__ss
,

338 
sigÆt°ack
 *
__ª°ri˘
 
__oss
Ë
__THROW
;

342 #ifde‡
__USE_XOPEN_EXTENDED


346 
	$sighﬁd
 (
__sig
Ë
__THROW
;

349 
	$sigªl£
 (
__sig
Ë
__THROW
;

352 
	$sigign‹e
 (
__sig
Ë
__THROW
;

355 
__sigh™dÀr_t
 
	$sig£t
 (
__sig
, 
__sigh™dÀr_t
 
__di•
Ë
__THROW
;

358 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


361 
	~<bôs/±hªadty≥s.h
>

362 
	~<bôs/sigthªad.h
>

369 
	$__libc_cuºít_sigπmö
 (Ë
__THROW
;

371 
	$__libc_cuºít_sigπmax
 (Ë
__THROW
;

375 
__END_DECLS


	@/usr/include/stdint.h

22 #i‚de‡
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<„©uªs.h
>

26 
	~<bôs/wch¨.h
>

27 
	~<bôs/w‹dsize.h
>

34 #i‚de‡
__öt8_t_deföed


35 
	#__öt8_t_deföed


	)

36 sig√d 
	töt8_t
;

37 
	töt16_t
;

38 
	töt32_t
;

39 #i‡
__WORDSIZE
 == 64

40 
	töt64_t
;

42 
__exãnsi⁄__


43 
	töt64_t
;

48 
	tuöt8_t
;

49 
	tuöt16_t
;

50 #i‚de‡
__uöt32_t_deföed


51 
	tuöt32_t
;

52 
	#__uöt32_t_deföed


	)

54 #i‡
__WORDSIZE
 == 64

55 
	tuöt64_t
;

57 
__exãnsi⁄__


58 
	tuöt64_t
;

65 sig√d 
	töt_Àa°8_t
;

66 
	töt_Àa°16_t
;

67 
	töt_Àa°32_t
;

68 #i‡
__WORDSIZE
 == 64

69 
	töt_Àa°64_t
;

71 
__exãnsi⁄__


72 
	töt_Àa°64_t
;

76 
	tuöt_Àa°8_t
;

77 
	tuöt_Àa°16_t
;

78 
	tuöt_Àa°32_t
;

79 #i‡
__WORDSIZE
 == 64

80 
	tuöt_Àa°64_t
;

82 
__exãnsi⁄__


83 
	tuöt_Àa°64_t
;

90 sig√d 
	töt_Á°8_t
;

91 #i‡
__WORDSIZE
 == 64

92 
	töt_Á°16_t
;

93 
	töt_Á°32_t
;

94 
	töt_Á°64_t
;

96 
	töt_Á°16_t
;

97 
	töt_Á°32_t
;

98 
__exãnsi⁄__


99 
	töt_Á°64_t
;

103 
	tuöt_Á°8_t
;

104 #i‡
__WORDSIZE
 == 64

105 
	tuöt_Á°16_t
;

106 
	tuöt_Á°32_t
;

107 
	tuöt_Á°64_t
;

109 
	tuöt_Á°16_t
;

110 
	tuöt_Á°32_t
;

111 
__exãnsi⁄__


112 
	tuöt_Á°64_t
;

117 #i‡
__WORDSIZE
 == 64

118 #i‚de‡
__öçå_t_deföed


119 
	töçå_t
;

120 
	#__öçå_t_deföed


	)

122 
	tuöçå_t
;

124 #i‚de‡
__öçå_t_deföed


125 
	töçå_t
;

126 
	#__öçå_t_deföed


	)

128 
	tuöçå_t
;

133 #i‡
__WORDSIZE
 == 64

134 
	tötmax_t
;

135 
	tuötmax_t
;

137 
__exãnsi⁄__


138 
	tötmax_t
;

139 
__exãnsi⁄__


140 
	tuötmax_t
;

144 #i‡
__WORDSIZE
 == 64

145 
	#__INT64_C
(
c
Ë¯## 
L


	)

146 
	#__UINT64_C
(
c
Ë¯## 
UL


	)

148 
	#__INT64_C
(
c
Ë¯## 
LL


	)

149 
	#__UINT64_C
(
c
Ë¯## 
ULL


	)

155 
	#INT8_MIN
 (-128)

	)

156 
	#INT16_MIN
 (-32767-1)

	)

157 
	#INT32_MIN
 (-2147483647-1)

	)

158 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

160 
	#INT8_MAX
 (127)

	)

161 
	#INT16_MAX
 (32767)

	)

162 
	#INT32_MAX
 (2147483647)

	)

163 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

166 
	#UINT8_MAX
 (255)

	)

167 
	#UINT16_MAX
 (65535)

	)

168 
	#UINT32_MAX
 (4294967295U)

	)

169 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

173 
	#INT_LEAST8_MIN
 (-128)

	)

174 
	#INT_LEAST16_MIN
 (-32767-1)

	)

175 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

176 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

178 
	#INT_LEAST8_MAX
 (127)

	)

179 
	#INT_LEAST16_MAX
 (32767)

	)

180 
	#INT_LEAST32_MAX
 (2147483647)

	)

181 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

184 
	#UINT_LEAST8_MAX
 (255)

	)

185 
	#UINT_LEAST16_MAX
 (65535)

	)

186 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

187 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

191 
	#INT_FAST8_MIN
 (-128)

	)

192 #i‡
__WORDSIZE
 == 64

193 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

194 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

196 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

197 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

199 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

201 
	#INT_FAST8_MAX
 (127)

	)

202 #i‡
__WORDSIZE
 == 64

203 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

204 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

206 
	#INT_FAST16_MAX
 (2147483647)

	)

207 
	#INT_FAST32_MAX
 (2147483647)

	)

209 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

212 
	#UINT_FAST8_MAX
 (255)

	)

213 #i‡
__WORDSIZE
 == 64

214 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

215 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

217 
	#UINT_FAST16_MAX
 (4294967295U)

	)

218 
	#UINT_FAST32_MAX
 (4294967295U)

	)

220 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

224 #i‡
__WORDSIZE
 == 64

225 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

226 
	#INTPTR_MAX
 (9223372036854775807L)

	)

227 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

229 
	#INTPTR_MIN
 (-2147483647-1)

	)

230 
	#INTPTR_MAX
 (2147483647)

	)

231 
	#UINTPTR_MAX
 (4294967295U)

	)

236 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

238 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

241 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

247 #i‡
__WORDSIZE
 == 64

248 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

249 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

251 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

252 
	#PTRDIFF_MAX
 (2147483647)

	)

256 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

257 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

260 #i‡
__WORDSIZE
 == 64

261 
	#SIZE_MAX
 (18446744073709551615UL)

	)

263 #ifde‡
__WORDSIZE32_SIZE_ULONG


264 
	#SIZE_MAX
 (4294967295UL)

	)

266 
	#SIZE_MAX
 (4294967295U)

	)

271 #i‚de‡
WCHAR_MIN


273 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

274 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

278 
	#WINT_MIN
 (0u)

	)

279 
	#WINT_MAX
 (4294967295u)

	)

282 
	#INT8_C
(
c
Ë
	)
c

283 
	#INT16_C
(
c
Ë
	)
c

284 
	#INT32_C
(
c
Ë
	)
c

285 #i‡
__WORDSIZE
 == 64

286 
	#INT64_C
(
c
Ë¯## 
L


	)

288 
	#INT64_C
(
c
Ë¯## 
LL


	)

292 
	#UINT8_C
(
c
Ë
	)
c

293 
	#UINT16_C
(
c
Ë
	)
c

294 
	#UINT32_C
(
c
Ë¯## 
U


	)

295 #i‡
__WORDSIZE
 == 64

296 
	#UINT64_C
(
c
Ë¯## 
UL


	)

298 
	#UINT64_C
(
c
Ë¯## 
ULL


	)

302 #i‡
__WORDSIZE
 == 64

303 
	#INTMAX_C
(
c
Ë¯## 
L


	)

304 
	#UINTMAX_C
(
c
Ë¯## 
UL


	)

306 
	#INTMAX_C
(
c
Ë¯## 
LL


	)

307 
	#UINTMAX_C
(
c
Ë¯## 
ULL


	)

	@/usr/include/stdio.h

23 #i‚de‡
_STDIO_H


25 #i‡!
deföed
 
__√ed_FILE
 && !deföed 
__√ed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


31 
	#__√ed_size_t


	)

32 
	#__√ed_NULL


	)

33 
	~<°ddef.h
>

35 
	~<bôs/ty≥s.h
>

36 
	#__√ed_FILE


	)

37 
	#__√ed___FILE


	)

41 #i‡!
deföed
 
__FILE_deföed
 && deföed 
__√ed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #i‡
deföed
 
__USE_LARGEFILE64
 || deföed 
__USE_POSIX
 \

51 || 
deföed
 
	g__USE_ISOC99
 || deföed 
	g__USE_XOPEN
 \

52 || 
deföed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_deföed
 1

	)

58 #unde‡
__√ed_FILE


61 #i‡!
deföed
 
____FILE_deföed
 && deföed 
__√ed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_deföed
 1

	)

68 #unde‡
__√ed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


77 #ifde‡
__GNUC__


78 #i‚de‡
_VA_LIST_DEFINED


79 
_G_va_li°
 
	tva_li°
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<°d¨g.h
>

87 #ifde‡
__USE_XOPEN2K8


88 #i‚de‡
__off_t_deföed


89 #i‚de‡
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_deföed


	)

96 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_deföed


	)

101 #i‚de‡
__ssize_t_deföed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_deföed


	)

108 
__BEGIN_NAMESPACE_STD


109 #i‚de‡
__USE_FILE_OFFSET64


110 
_G_Âos_t
 
	tÂos_t
;

112 
_G_Âos64_t
 
	tÂos_t
;

114 
__END_NAMESPACE_STD


115 #ifde‡
__USE_LARGEFILE64


116 
_G_Âos64_t
 
	tÂos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #i‚de‡
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #i‚de‡
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifde‡
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


151 
	#P_tmpdú
 "/tmp"

	)

164 
	~<bôs/°dio_lim.h
>

168 
_IO_FILE
 *
°dö
;

169 
_IO_FILE
 *
°dout
;

170 
_IO_FILE
 *
°dîr
;

172 
	#°dö
 
°dö


	)

173 
	#°dout
 
°dout


	)

174 
	#°dîr
 
°dîr


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$ªmove
 (c⁄° *
__fûíame
Ë
__THROW
;

180 
	$ª«me
 (c⁄° *
__ﬁd
, c⁄° *
__√w
Ë
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifde‡
__USE_ATFILE


185 
	$ª«mót
 (
__ﬁdfd
, c⁄° *
__ﬁd
, 
__√wfd
,

186 c⁄° *
__√w
Ë
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #i‚de‡
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfûe
 (Ë
__wur
;

197 #ifde‡
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfûe
, (), 
tmpfûe64
Ë
__wur
;

200 
	#tmpfûe
 
tmpfûe64


	)

204 #ifde‡
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfûe64
 (Ë
__wur
;

209 *
	$tm≤am
 (*
__s
Ë
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifde‡
__USE_MISC


215 *
	$tm≤am_r
 (*
__s
Ë
__THROW
 
__wur
;

219 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


227 *
	$ãm≤am
 (c⁄° *
__dú
, c⁄° *
__pfx
)

228 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`f˛o£
 (
FILE
 *
__°ªam
);

242 
	`fÊush
 (
FILE
 *
__°ªam
);

243 
__END_NAMESPACE_STD


245 #ifde‡
__USE_MISC


252 
	`fÊush_u∆ocked
 (
FILE
 *
__°ªam
);

255 #ifde‡
__USE_GNU


262 
	`f˛o£Æl
 ();

266 
__BEGIN_NAMESPACE_STD


267 #i‚de‡
__USE_FILE_OFFSET64


272 
FILE
 *
	$f›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

273 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

278 
FILE
 *
	$‰e›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

279 c⁄° *
__ª°ri˘
 
__modes
,

280 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

282 #ifde‡
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
f›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

284 c⁄° *
__ª°ri˘
 
__modes
), 
f›í64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
‰e›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

287 c⁄° *
__ª°ri˘
 
__modes
,

288 
FILE
 *
__ª°ri˘
 
__°ªam
), 
‰e›í64
)

289 
__wur
;

291 
	#f›í
 
f›í64


	)

292 
	#‰e›í
 
‰e›í64


	)

295 
__END_NAMESPACE_STD


296 #ifde‡
__USE_LARGEFILE64


297 
FILE
 *
	$f›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

298 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

299 
FILE
 *
	$‰e›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

300 c⁄° *
__ª°ri˘
 
__modes
,

301 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fd›í
 (
__fd
, c⁄° *
__modes
Ë
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$f›ícookõ
 (*
__ª°ri˘
 
__magic_cookõ
,

313 c⁄° *
__ª°ri˘
 
__modes
,

314 
_IO_cookõ_io_fun˘i⁄s_t
 
__io_funcs
Ë
__THROW
 
__wur
;

317 #ifde‡
__USE_XOPEN2K8


319 
FILE
 *
	$fmem›í
 (*
__s
, 
size_t
 
__Àn
, c⁄° *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$›í_mem°ªam
 (**
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
Ë
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

337 
__modes
, 
size_t
 
__n
Ë
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_MISC


343 
	$£tbuf„r
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

344 
size_t
 
__size
Ë
__THROW
;

347 
	$£éöebuf
 (
FILE
 *
__°ªam
Ë
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`Ârötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

357 c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

362 
	`¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

364 
	$•rötf
 (*
__ª°ri˘
 
__s
,

365 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROWNL
;

371 
	`vÂrötf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

372 
_G_va_li°
 
__¨g
);

377 
	`v¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
);

379 
	$v•rötf
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

380 
_G_va_li°
 
__¨g
Ë
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

387 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

388 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

390 
	$v¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

391 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

392 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifde‡
__USE_GNU


399 
	$va•rötf
 (**
__ª°ri˘
 
__±r
, c⁄° *__ª°ri˘ 
__f
,

400 
_G_va_li°
 
__¨g
)

401 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 0))Ë
__wur
;

402 
	$__a•rötf
 (**
__ª°ri˘
 
__±r
,

403 c⁄° *
__ª°ri˘
 
__fmt
, ...)

404 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

405 
	$a•rötf
 (**
__ª°ri˘
 
__±r
,

406 c⁄° *
__ª°ri˘
 
__fmt
, ...)

407 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

410 #ifde‡
__USE_XOPEN2K8


412 
	$vd¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
,

413 
_G_va_li°
 
__¨g
)

414 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

415 
	$d¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
, ...)

416 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

426 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

431 
	$sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

433 
	$ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

434 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

436 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

437 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

438 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

439 #ifde‡
__REDIRECT


443 
	`__REDIRECT
 (
fsˇnf
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

444 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

445 
__isoc99_fsˇnf
Ë
__wur
;

446 
	`__REDIRECT
 (
sˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

447 
__isoc99_sˇnf
Ë
__wur
;

448 
	`__REDIRECT_NTH
 (
ssˇnf
, (c⁄° *
__ª°ri˘
 
__s
,

449 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

450 
__isoc99_ssˇnf
);

452 
	$__isoc99_fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

453 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

454 
	$__isoc99_sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

455 
	$__isoc99_ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

456 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

457 
	#fsˇnf
 
__isoc99_fsˇnf


	)

458 
	#sˇnf
 
__isoc99_sˇnf


	)

459 
	#ssˇnf
 
__isoc99_ssˇnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

472 
_G_va_li°
 
__¨g
)

473 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

479 
	$vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

480 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

483 
	$vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

484 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

485 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

487 #i‡!
deföed
 
__USE_GNU
 \

488 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

489 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

490 #ifde‡
__REDIRECT


494 
	`__REDIRECT
 (
vfsˇnf
,

495 (
FILE
 *
__ª°ri˘
 
__s
,

496 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
),

497 
__isoc99_vfsˇnf
)

498 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

499 
	`__REDIRECT
 (
vsˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
,

500 
_G_va_li°
 
__¨g
), 
__isoc99_vsˇnf
)

501 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

502 
	`__REDIRECT_NTH
 (
vssˇnf
,

503 (c⁄° *
__ª°ri˘
 
__s
,

504 c⁄° *
__ª°ri˘
 
__f‹m©
,

505 
_G_va_li°
 
__¨g
), 
__isoc99_vssˇnf
)

506 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

508 
	$__isoc99_vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
,

509 c⁄° *
__ª°ri˘
 
__f‹m©
,

510 
_G_va_li°
 
__¨g
Ë
__wur
;

511 
	$__isoc99_vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
,

512 
_G_va_li°
 
__¨g
Ë
__wur
;

513 
	$__isoc99_vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

514 c⁄° *
__ª°ri˘
 
__f‹m©
,

515 
_G_va_li°
 
__¨g
Ë
__THROW
;

516 
	#vfsˇnf
 
__isoc99_vfsˇnf


	)

517 
	#vsˇnf
 
__isoc99_vsˇnf


	)

518 
	#vssˇnf
 
__isoc99_vssˇnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fgëc
 (
FILE
 *
__°ªam
);

532 
	`gëc
 (
FILE
 *
__°ªam
);

538 
	`gëch¨
 ();

539 
__END_NAMESPACE_STD


543 
	#gëc
(
_Â
Ë
	`_IO_gëc
 (_Â)

	)

545 #ifde‡
__USE_POSIX


550 
	`gëc_u∆ocked
 (
FILE
 *
__°ªam
);

551 
	`gëch¨_u∆ocked
 ();

554 #ifde‡
__USE_MISC


561 
	`fgëc_u∆ocked
 (
FILE
 *
__°ªam
);

565 
__BEGIN_NAMESPACE_STD


573 
	`Âutc
 (
__c
, 
FILE
 *
__°ªam
);

574 
	`putc
 (
__c
, 
FILE
 *
__°ªam
);

580 
	`putch¨
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_Â
Ë
	`_IO_putc
 (_ch, _Â)

	)

587 #ifde‡
__USE_MISC


594 
	`Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

597 #ifde‡
__USE_POSIX


602 
	`putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

603 
	`putch¨_u∆ocked
 (
__c
);

607 #i‡
deföed
 
__USE_MISC
 \

608 || (
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

610 
	`gëw
 (
FILE
 *
__°ªam
);

613 
	`putw
 (
__w
, 
FILE
 *
__°ªam
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

623 
__wur
;

625 #i‡!
deföed
 
__USE_ISOC11
 \

626 || (
deföed
 
__˝lu•lus
 && __cplusplus <= 201103L)

638 *
	$gës
 (*
__s
Ë
__wur
 
__©åibuã_dïªˇãd__
;

640 
__END_NAMESPACE_STD


642 #ifde‡
__USE_GNU


649 *
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
,

650 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__gëdñim
 (**
__ª°ri˘
 
__löïå
,

666 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

667 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

668 
_IO_ssize_t
 
	$gëdñim
 (**
__ª°ri˘
 
__löïå
,

669 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

670 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

678 
_IO_ssize_t
 
	$gëlöe
 (**
__ª°ri˘
 
__löïå
,

679 
size_t
 *
__ª°ri˘
 
__n
,

680 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`Âuts
 (c⁄° *
__ª°ri˘
 
__s
, 
FILE
 *__ª°ri˘ 
__°ªam
);

695 
	`puts
 (c⁄° *
__s
);

702 
	`ungëc
 (
__c
, 
FILE
 *
__°ªam
);

709 
size_t
 
	$‰ód
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

715 
size_t
 
	`fwrôe
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

716 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifde‡
__USE_GNU


726 
	`Âuts_u∆ocked
 (c⁄° *
__ª°ri˘
 
__s
,

727 
FILE
 *
__ª°ri˘
 
__°ªam
);

730 #ifde‡
__USE_MISC


737 
size_t
 
	$‰ód_u∆ocked
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

739 
size_t
 
	`fwrôe_u∆ocked
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

740 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__°ªam
, 
__off
, 
__whí˚
);

754 
	$·ñl
 (
FILE
 *
__°ªam
Ë
__wur
;

759 
	`ªwöd
 (
FILE
 *
__°ªam
);

760 
__END_NAMESPACE_STD


767 #i‡
deföed
 
__USE_LARGEFILE
 || deföed 
__USE_XOPEN2K


768 #i‚de‡
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__°ªam
, 
__off_t
 
__off
, 
__whí˚
);

778 
__off_t
 
	$·ñlo
 (
FILE
 *
__°ªam
Ë
__wur
;

780 #ifde‡
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
·ñlo
, (
FILE
 *
__°ªam
), 
·ñlo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#·ñlo
 
·ñlo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #i‚de‡
__USE_FILE_OFFSET64


798 
	`fgëpos
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos_t
 *__ª°ri˘ 
__pos
);

803 
	`f£ços
 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
);

805 #ifde‡
__REDIRECT


806 
	`__REDIRECT
 (
fgëpos
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

807 
Âos_t
 *
__ª°ri˘
 
__pos
), 
fgëpos64
);

808 
	`__REDIRECT
 (
f£ços
,

809 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
), 
f£ços64
);

811 
	#fgëpos
 
fgëpos64


	)

812 
	#f£ços
 
f£ços64


	)

815 
__END_NAMESPACE_STD


817 #ifde‡
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
);

819 
__off64_t
 
	$·ñlo64
 (
FILE
 *
__°ªam
Ë
__wur
;

820 
	`fgëpos64
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos64_t
 *__ª°ri˘ 
__pos
);

821 
	`f£ços64
 (
FILE
 *
__°ªam
, c⁄° 
Âos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$˛óªº
 (
FILE
 *
__°ªam
Ë
__THROW
;

828 
	$„of
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

830 
	$„º‹
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifde‡
__USE_MISC


835 
	$˛óªº_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
;

836 
	$„of_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

837 
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`≥º‹
 (c⁄° *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<bôs/sys_îæi°.h
>

856 #ifdef 
__USE_POSIX


858 
	$fûío
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

861 #ifde‡
__USE_MISC


863 
	$fûío_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

867 #ifde‡
__USE_POSIX2


872 
FILE
 *
	$p›í
 (c⁄° *
__comm™d
, c⁄° *
__modes
Ë
__wur
;

878 
	`p˛o£
 (
FILE
 *
__°ªam
);

882 #ifdef 
__USE_POSIX


884 *
	$˘îmid
 (*
__s
Ë
__THROW
;

888 #ifde‡
__USE_XOPEN


890 *
	`cu£rid
 (*
__s
);

894 #ifdef 
__USE_GNU


895 
ob°ack
;

898 
	$ob°ack_¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

899 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

900 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

901 
	$ob°ack_v¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

902 c⁄° *
__ª°ri˘
 
__f‹m©
,

903 
_G_va_li°
 
__¨gs
)

904 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

908 #ifde‡
__USE_POSIX


912 
	$Êockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

916 
	$·rylockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

919 
	$fu∆ockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

922 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


926 
	#__√ed_gë›t


	)

927 
	~<gë›t.h
>

932 #ifde‡
__USE_EXTERN_INLINES


933 
	~<bôs/°dio.h
>

935 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


936 
	~<bôs/°dio2.h
>

938 #ifde‡
__LDBL_COMPAT


939 
	~<bôs/°dio-ldbl.h
>

942 
__END_DECLS


	@/usr/include/stdlib.h

22 #i‚def 
_STDLIB_H


24 
	~<„©uªs.h
>

27 
	#__√ed_size_t


	)

28 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


29 
	#__√ed_wch¨_t


	)

30 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

34 
	g__BEGIN_DECLS


36 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


37 
	#_STDLIB_H
 1

	)

39 #i‡(
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8
Ë&& !deföed 
_SYS_WAIT_H


41 
	~<bôs/waôÊags.h
>

42 
	~<bôs/waô°©us.h
>

44 #ifde‡
__USE_MISC


49 #i‡
deföed
 
__GNUC__
 && !deföed 
__˝lu•lus


50 
	#__WAIT_INT
(
°©us
) \

51 (
	`__exãnsi⁄__
 (((uni⁄ { 
	`__ty≥of
(
°©us
Ë
__ö
; 
__i
; }) \

52 { .
__ö
 = (
°©us
Ë}).
__i
))

	)

54 
	#__WAIT_INT
(
°©us
Ë(*(*Ë&(°©us))

	)

62 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2 || deföed 
__˝lu•lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
waô
 *
	m__u±r
;

70 *
	m__ùå
;

71 } 
	t__WAIT_STATUS
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
°©us
Ë(°©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
°©us
Ë
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (°©us))

	)

85 
	#WTERMSIG
(
°©us
Ë
	`__WTERMSIG
 (
	`__WAIT_INT
 (°©us))

	)

86 
	#WSTOPSIG
(
°©us
Ë
	`__WSTOPSIG
 (
	`__WAIT_INT
 (°©us))

	)

87 
	#WIFEXITED
(
°©us
Ë
	`__WIFEXITED
 (
	`__WAIT_INT
 (°©us))

	)

88 
	#WIFSIGNALED
(
°©us
Ë
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (°©us))

	)

89 
	#WIFSTOPPED
(
°©us
Ë
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (°©us))

	)

90 #ifde‡
__WIFCONTINUED


91 
	#WIFCONTINUED
(
°©us
Ë
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (°©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquŸ
;

100 
	mªm
;

101 } 
	tdiv_t
;

104 #i‚de‡
__ldiv_t_deföed


107 
	mquŸ
;

108 
	mªm
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_deföed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__Œdiv_t_deföed


115 
__BEGIN_NAMESPACE_C99


117 
__exãnsi⁄__
 struct

119 
	mquŸ
;

120 
	mªm
;

121 } 
	tŒdiv_t
;

122 
	#__Œdiv_t_deföed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__˘y≥_gë_mb_cur_max
 ())

	)

139 
size_t
 
	$__˘y≥_gë_mb_cur_max
 (Ë
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (c⁄° *
__≈å
)

145 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

147 
	$©oi
 (c⁄° *
__≈å
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

150 
	$©ﬁ
 (c⁄° *
__≈å
)

151 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

152 
__END_NAMESPACE_STD


154 #ifde‡
__USE_ISOC99


155 
__BEGIN_NAMESPACE_C99


157 
__exãnsi⁄__
 
	$©ﬁl
 (c⁄° *
__≈å
)

158 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$°πod
 (c⁄° *
__ª°ri˘
 
__≈å
,

165 **
__ª°ri˘
 
__íd±r
)

166 
__THROW
 
	`__n⁄nuŒ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$°πof
 (c⁄° *
__ª°ri˘
 
__≈å
,

173 **
__ª°ri˘
 
__íd±r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

175 
	$°πﬁd
 (c⁄° *
__ª°ri˘
 
__≈å
,

176 **
__ª°ri˘
 
__íd±r
)

177 
__THROW
 
	`__n⁄nuŒ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$°πﬁ
 (c⁄° *
__ª°ri˘
 
__≈å
,

184 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

185 
__THROW
 
	`__n⁄nuŒ
 ((1));

187 
	$°πoul
 (c⁄° *
__ª°ri˘
 
__≈å
,

188 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

189 
__THROW
 
	`__n⁄nuŒ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifde‡
__USE_MISC


194 
__exãnsi⁄__


195 
	$°πoq
 (c⁄° *
__ª°ri˘
 
__≈å
,

196 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

197 
__THROW
 
	`__n⁄nuŒ
 ((1));

199 
__exãnsi⁄__


200 
	$°πouq
 (c⁄° *
__ª°ri˘
 
__≈å
,

201 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

202 
__THROW
 
	`__n⁄nuŒ
 ((1));

205 #ifde‡
__USE_ISOC99


206 
__BEGIN_NAMESPACE_C99


208 
__exãnsi⁄__


209 
	$°πﬁl
 (c⁄° *
__ª°ri˘
 
__≈å
,

210 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

211 
__THROW
 
	`__n⁄nuŒ
 ((1));

213 
__exãnsi⁄__


214 
	$°πouŒ
 (c⁄° *
__ª°ri˘
 
__≈å
,

215 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

216 
__THROW
 
	`__n⁄nuŒ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifde‡
__USE_GNU


235 
	~<xloˇÀ.h
>

239 
	$°πﬁ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

240 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

241 
__loˇÀ_t
 
__loc
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

243 
	$°πoul_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

244 **
__ª°ri˘
 
__íd±r
,

245 
__ba£
, 
__loˇÀ_t
 
__loc
)

246 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

248 
__exãnsi⁄__


249 
	$°πﬁl_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

250 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

251 
__loˇÀ_t
 
__loc
)

252 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

254 
__exãnsi⁄__


255 
	$°πouŒ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

256 **
__ª°ri˘
 
__íd±r
,

257 
__ba£
, 
__loˇÀ_t
 
__loc
)

258 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

260 
	$°πod_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

261 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

262 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

264 
	$°πof_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

265 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

266 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

268 
	$°πﬁd_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

269 **
__ª°ri˘
 
__íd±r
,

270 
__loˇÀ_t
 
__loc
)

271 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

275 #ifde‡
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__exã∫_ölöe
 

278 
	`__NTH
 (
	$©oi
 (c⁄° *
__≈å
))

280  (Ë
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

281 
	}
}

282 
__exã∫_ölöe
 

283 
__NTH
 (
	$©ﬁ
 (c⁄° *
__≈å
))

285  
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ifde‡
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__exãnsi⁄__
 
__exã∫_ölöe
 

292 
__NTH
 (
	$©ﬁl
 (c⁄° *
__≈å
))

294  
	`°πﬁl
 (
__≈å
, (**Ë
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
Ë
__THROW
 
__wur
;

308 
	$a64l
 (c⁄° *
__s
)

309 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

313 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


314 
	~<sys/ty≥s.h
>

321 
	$øndom
 (Ë
__THROW
;

324 
	$§™dom
 (
__£ed
Ë
__THROW
;

330 *
	$öô°©e
 (
__£ed
, *
__°©ebuf
,

331 
size_t
 
__°©ñí
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

335 *
	$£t°©e
 (*
__°©ebuf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

338 #ifde‡
__USE_MISC


343 
	søndom_d©a


345 
öt32_t
 *
Âå
;

346 
öt32_t
 *
Ωå
;

347 
öt32_t
 *
°©e
;

348 
ønd_ty≥
;

349 
ønd_deg
;

350 
ønd_£p
;

351 
öt32_t
 *
íd_±r
;

354 
	$øndom_r
 (
øndom_d©a
 *
__ª°ri˘
 
__buf
,

355 
öt32_t
 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

357 
	$§™dom_r
 (
__£ed
, 
øndom_d©a
 *
__buf
)

358 
__THROW
 
	`__n⁄nuŒ
 ((2));

360 
	$öô°©e_r
 (
__£ed
, *
__ª°ri˘
 
__°©ebuf
,

361 
size_t
 
__°©ñí
,

362 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

363 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

365 
	$£t°©e_r
 (*
__ª°ri˘
 
__°©ebuf
,

366 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

367 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$ønd
 (Ë
__THROW
;

376 
	$§™d
 (
__£ed
Ë
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifde‡
__USE_POSIX


381 
	$ønd_r
 (*
__£ed
Ë
__THROW
;

385 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


389 
	$dønd48
 (Ë
__THROW
;

390 
	$î™d48
 (
__xsubi
[3]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

393 
	$Ã™d48
 (Ë
__THROW
;

394 
	$ƒ™d48
 (
__xsubi
[3])

395 
__THROW
 
	`__n⁄nuŒ
 ((1));

398 
	$mønd48
 (Ë
__THROW
;

399 
	$jønd48
 (
__xsubi
[3])

400 
__THROW
 
	`__n⁄nuŒ
 ((1));

403 
	$§™d48
 (
__£edvÆ
Ë
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__n⁄nuŒ
 ((1));

406 
	$lc⁄g48
 (
__∑øm
[7]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

408 #ifde‡
__USE_MISC


412 
	sdønd48_d©a


414 
__x
[3];

415 
__ﬁd_x
[3];

416 
__c
;

417 
__öô
;

418 
__exãnsi⁄__
 
__a
;

423 
	$dønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

424 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

425 
	$î™d48_r
 (
__xsubi
[3],

426 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

427 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

430 
	$Ã™d48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

431 *
__ª°ri˘
 
__ªsu…
)

432 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

433 
	$ƒ™d48_r
 (
__xsubi
[3],

434 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

435 *
__ª°ri˘
 
__ªsu…
)

436 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

439 
	$mønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

440 *
__ª°ri˘
 
__ªsu…
)

441 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

442 
	$jønd48_r
 (
__xsubi
[3],

443 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

444 *
__ª°ri˘
 
__ªsu…
)

445 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

448 
	$§™d48_r
 (
__£edvÆ
, 
dønd48_d©a
 *
__buf„r
)

449 
__THROW
 
	`__n⁄nuŒ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
dønd48_d©a
 *
__buf„r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

454 
	$lc⁄g48_r
 (
__∑øm
[7],

455 
dønd48_d©a
 *
__buf„r
)

456 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

462 #i‚de‡
__mÆloc_™d_ˇŒoc_deföed


463 
	#__mÆloc_™d_ˇŒoc_deföed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$mÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

468 *
	$ˇŒoc
 (
size_t
 
__nmemb
, size_à
__size
)

469 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$ªÆloc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©åibuã_w¨n_unu£d_ªsu…__
;

483 
	$‰ì
 (*
__±r
Ë
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$c‰ì
 (*
__±r
Ë
__THROW
;

491 #ifde‡
__USE_MISC


492 
	~<Æloˇ.h
>

495 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

496 || 
deföed
 
__USE_MISC


498 *
	$vÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

501 #ifde‡
__USE_XOPEN2K


503 
	$posix_memÆign
 (**
__mem±r
, 
size_t
 
__Æignmít
, size_à
__size
)

504 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

507 #ifde‡
__USE_ISOC11


509 *
	$Æig√d_Æloc
 (
size_t
 
__Æignmít
, size_à
__size
)

510 
__THROW
 
__©åibuã_mÆloc__
 
	`__©åibuã_Æloc_size__
 ((2)Ë
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$ab‹t
 (Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

519 
	$©exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

521 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


523 #ifde‡
__˝lu•lus


524 "C++" 
	$©_quick_exô
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_exô"Ë
	`__n⁄nuŒ
 ((1));

527 
	$©_quick_exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	$⁄_exô
 ((*
__func
Ë(
__°©us
, *
__¨g
), *__arg)

536 
__THROW
 
	`__n⁄nuŒ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

545 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


549 
	$quick_exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

551 
__END_NAMESPACE_STD


553 #ifde‡
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$gëív
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

565 
__END_NAMESPACE_STD


567 #ifde‡
__USE_GNU


570 *
	$£cuª_gëív
 (c⁄° *
__«me
)

571 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

574 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


578 
	$puãnv
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

581 #ifde‡
__USE_XOPEN2K


584 
	$£ãnv
 (c⁄° *
__«me
, c⁄° *
__vÆue
, 
__ª∂a˚
)

585 
__THROW
 
	`__n⁄nuŒ
 ((2));

588 
	$un£ãnv
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$˛óªnv
 (Ë
__THROW
;

599 #i‡
deföed
 
__USE_MISC
 \

600 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
)

606 *
	$mkãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

609 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


618 #i‚de‡
__USE_FILE_OFFSET64


619 
	$mk°emp
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

621 #ifde‡
__REDIRECT


622 
	`__REDIRECT
 (
mk°emp
, (*
__ãm∂©e
), 
mk°emp64
)

623 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

625 
	#mk°emp
 
mk°emp64


	)

628 #ifde‡
__USE_LARGEFILE64


629 
	$mk°emp64
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

633 #ifde‡
__USE_MISC


640 #i‚de‡
__USE_FILE_OFFSET64


641 
	$mk°emps
 (*
__ãm∂©e
, 
__suffixÀn
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

643 #ifde‡
__REDIRECT


644 
	`__REDIRECT
 (
mk°emps
, (*
__ãm∂©e
, 
__suffixÀn
),

645 
mk°emps64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

647 
	#mk°emps
 
mk°emps64


	)

650 #ifde‡
__USE_LARGEFILE64


651 
	$mk°emps64
 (*
__ãm∂©e
, 
__suffixÀn
)

652 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

656 #ifde‡
__USE_XOPEN2K8


662 *
	$mkdãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

665 #ifde‡
__USE_GNU


672 #i‚de‡
__USE_FILE_OFFSET64


673 
	$mko°emp
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

675 #ifde‡
__REDIRECT


676 
	`__REDIRECT
 (
mko°emp
, (*
__ãm∂©e
, 
__Êags
), 
mko°emp64
)

677 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

679 
	#mko°emp
 
mko°emp64


	)

682 #ifde‡
__USE_LARGEFILE64


683 
	$mko°emp64
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

692 #i‚de‡
__USE_FILE_OFFSET64


693 
	$mko°emps
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

694 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

696 #ifde‡
__REDIRECT


697 
	`__REDIRECT
 (
mko°emps
, (*
__ãm∂©e
, 
__suffixÀn
,

698 
__Êags
), 
mko°emps64
)

699 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

701 
	#mko°emps
 
mko°emps64


	)

704 #ifde‡
__USE_LARGEFILE64


705 
	$mko°emps64
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

706 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

711 
__BEGIN_NAMESPACE_STD


716 
	$sy°em
 (c⁄° *
__comm™d
Ë
__wur
;

717 
__END_NAMESPACE_STD


720 #ifdef 
__USE_GNU


723 *
	$ˇn⁄iˇlize_fûe_«me
 (c⁄° *
__«me
)

724 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

727 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


733 *
	$ªÆ∑th
 (c⁄° *
__ª°ri˘
 
__«me
,

734 *
__ª°ri˘
 
__ªsﬁved
Ë
__THROW
 
__wur
;

739 #i‚de‡
__COMPAR_FN_T


740 
	#__COMPAR_FN_T


	)

741 (*
	t__com∑r_‚_t
) (const *, const *);

743 #ifdef 
__USE_GNU


744 
__com∑r_‚_t
 
	tcom∑ris⁄_‚_t
;

747 #ifde‡
__USE_GNU


748 (*
	t__com∑r_d_‚_t
) (const *, const *, *);

751 
__BEGIN_NAMESPACE_STD


754 *
	$b£¨ch
 (c⁄° *
__key
, c⁄° *
__ba£
,

755 
size_t
 
__nmemb
, size_à
__size
, 
__com∑r_‚_t
 
__com∑r
)

756 
	`__n⁄nuŒ
 ((1, 2, 5)Ë
__wur
;

758 #ifde‡
__USE_EXTERN_INLINES


759 
	~<bôs/°dlib-b£¨ch.h
>

764 
	$qs‹t
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

765 
__com∑r_‚_t
 
__com∑r
Ë
	`__n⁄nuŒ
 ((1, 4));

766 #ifde‡
__USE_GNU


767 
	$qs‹t_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

768 
__com∑r_d_‚_t
 
__com∑r
, *
__¨g
)

769 
	`__n⁄nuŒ
 ((1, 4));

774 
	$abs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

775 
	$œbs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

776 
__END_NAMESPACE_STD


778 #ifde‡
__USE_ISOC99


779 
__exãnsi⁄__
 
	$Œabs
 (
__x
)

780 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

784 
__BEGIN_NAMESPACE_STD


788 
div_t
 
	$div
 (
__numî
, 
__díom
)

789 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

790 
ldiv_t
 
	$ldiv
 (
__numî
, 
__díom
)

791 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

792 
__END_NAMESPACE_STD


794 #ifde‡
__USE_ISOC99


795 
__BEGIN_NAMESPACE_C99


796 
__exãnsi⁄__
 
Œdiv_t
 
	$Œdiv
 (
__numî
,

797 
__díom
)

798 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

799 
__END_NAMESPACE_C99


803 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

804 || 
deföed
 
__USE_MISC


811 *
	$ecvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

812 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

817 *
	$fcvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

818 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

823 *
	$gcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

824 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

827 #ifde‡
__USE_MISC


829 *
	$qecvt
 (
__vÆue
, 
__ndigô
,

830 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

831 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

832 *
	$qfcvt
 (
__vÆue
, 
__ndigô
,

833 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

834 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

835 *
	$qgcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

836 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

841 
	$ecvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

842 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

843 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

844 
	$fcvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

845 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

846 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

848 
	$qecvt_r
 (
__vÆue
, 
__ndigô
,

849 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

850 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

851 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

852 
	$qfcvt_r
 (
__vÆue
, 
__ndigô
,

853 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

854 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

855 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

859 
__BEGIN_NAMESPACE_STD


862 
	$mbÀn
 (c⁄° *
__s
, 
size_t
 
__n
Ë
__THROW
;

865 
	$mbtowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

866 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

869 
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
Ë
__THROW
;

873 
size_t
 
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__pwcs
,

874 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

876 
size_t
 
	$wc°ombs
 (*
__ª°ri˘
 
__s
,

877 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__pwcs
, 
size_t
 
__n
)

878 
__THROW
;

879 
__END_NAMESPACE_STD


882 #ifde‡
__USE_MISC


887 
	$Ωm©ch
 (c⁄° *
__ª•⁄£
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

891 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


898 
	$gësub›t
 (**
__ª°ri˘
 
__›ti⁄p
,

899 *c⁄° *
__ª°ri˘
 
__tokís
,

900 **
__ª°ri˘
 
__vÆuï
)

901 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3)Ë
__wur
;

905 #ifde‡
__USE_XOPEN


907 
	$£tkey
 (c⁄° *
__key
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

913 #ifde‡
__USE_XOPEN2KXSI


915 
	$posix_›í±
 (
__oÊag
Ë
__wur
;

918 #ifde‡
__USE_XOPEN


923 
	$gø¡±
 (
__fd
Ë
__THROW
;

927 
	$u∆ock±
 (
__fd
Ë
__THROW
;

932 *
	$±¢ame
 (
__fd
Ë
__THROW
 
__wur
;

935 #ifde‡
__USE_GNU


939 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

940 
__THROW
 
	`__n⁄nuŒ
 ((2));

943 
	`gë±
 ();

946 #ifde‡
__USE_MISC


950 
	$gëlﬂdavg
 (
__lﬂdavg
[], 
__√Àm
)

951 
__THROW
 
	`__n⁄nuŒ
 ((1));

954 
	~<bôs/°dlib-Êﬂt.h
>

957 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


958 
	~<bôs/°dlib.h
>

960 #ifde‡
__LDBL_COMPAT


961 
	~<bôs/°dlib-ldbl.h
>

965 #unde‡
__√ed_mÆloc_™d_ˇŒoc


967 
__END_DECLS


	@/usr/include/string.h

22 #i‚def 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


30 
	#__√ed_size_t


	)

31 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

35 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

36 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

40 
__BEGIN_NAMESPACE_STD


42 *
	$mem˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

43 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

46 *
	$memmove
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

47 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

48 
__END_NAMESPACE_STD


53 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


54 *
	$memc˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

55 
__c
, 
size_t
 
__n
)

56 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

60 
__BEGIN_NAMESPACE_STD


62 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

65 
	$memcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

66 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

69 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


72 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

73 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

74 c⁄° *
	`memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

75 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

77 #ifde‡
__OPTIMIZE__


78 
__exã∫_Æways_ölöe
 *

79 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


81  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

84 
__exã∫_Æways_ölöe
 const *

85 
	`memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


87  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

90 
	}
}

92 *
	$memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

93 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

95 
__END_NAMESPACE_STD


97 #ifde‡
__USE_GNU


100 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


101 "C++" *
	$øwmemchr
 (*
__s
, 
__c
)

102 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

103 "C++" c⁄° *
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

104 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

106 *
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

107 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

111 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


112 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

113 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

114 "C++" c⁄° *
	$memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

115 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

117 *
	$memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

123 
__BEGIN_NAMESPACE_STD


125 *
	$°r˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

126 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

128 *
	$°∫˝y
 (*
__ª°ri˘
 
__de°
,

129 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

130 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

133 *
	$°rˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

134 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

136 *
	$°∫ˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

137 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

140 
	$°rcmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

141 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

143 
	$°∫cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

144 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

147 
	$°rcﬁl
 (c⁄° *
__s1
, c⁄° *
__s2
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

150 
size_t
 
	$°rx‰m
 (*
__ª°ri˘
 
__de°
,

151 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

152 
__THROW
 
	`__n⁄nuŒ
 ((2));

153 
__END_NAMESPACE_STD


155 #ifde‡
__USE_XOPEN2K8


159 
	~<xloˇÀ.h
>

162 
	$°rcﬁl_l
 (c⁄° *
__s1
, c⁄° *
__s2
, 
__loˇÀ_t
 
__l
)

163 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

165 
size_t
 
	$°rx‰m_l
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
,

166 
__loˇÀ_t
 
__l
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

169 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


171 *
	$°rdup
 (c⁄° *
__s
)

172 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

178 #i‡
deföed
 
__USE_XOPEN2K8


179 *
	$°∫dup
 (c⁄° *
__°rög
, 
size_t
 
__n
)

180 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

183 #i‡
deföed
 
__USE_GNU
 && deföed 
__GNUC__


185 
	#°rdu∑
(
s
) \

186 (
__exãnsi⁄__
 \

188 c⁄° *
__ﬁd
 = (
s
); \

189 
size_t
 
__Àn
 = 
	`°æí
 (
__ﬁd
) + 1; \

190 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
); \

191 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

192 
	}
}))

	)

195 
	#°∫du∑
(
s
, 
n
) \

196 (
__exãnsi⁄__
 \

198 c⁄° *
__ﬁd
 = (
s
); \

199 
size_t
 
__Àn
 = 
	`°∫Àn
 (
__ﬁd
, (
n
)); \

200 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
 + 1); \

201 
__√w
[
__Àn
] = '\0'; \

202 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

203 }))

	)

206 
	g__BEGIN_NAMESPACE_STD


208 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


211 *
°rchr
 (*
__s
, 
__c
)

212 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

213 c⁄° *
°rchr
 (c⁄° *
__s
, 
__c
)

214 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

216 #ifde‡
__OPTIMIZE__


217 
__exã∫_Æways_ölöe
 *

218 
°rchr
 (*
__s
, 
__c
Ë
	g__THROW


220  
__buûtö_°rchr
 (
__s
, 
__c
);

223 
__exã∫_Æways_ölöe
 const *

224 
°rchr
 (c⁄° *
__s
, 
__c
Ë
	g__THROW


226  
__buûtö_°rchr
 (
__s
, 
__c
);

231 *
	$°rchr
 (c⁄° *
__s
, 
__c
)

232 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

235 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


238 *
	`°ºchr
 (*
__s
, 
__c
)

239 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

240 c⁄° *
	`°ºchr
 (c⁄° *
__s
, 
__c
)

241 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

243 #ifde‡
__OPTIMIZE__


244 
__exã∫_Æways_ölöe
 *

245 
	`°ºchr
 (*
__s
, 
__c
Ë
__THROW


247  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

250 
__exã∫_Æways_ölöe
 const *

251 
	`°ºchr
 (c⁄° *
__s
, 
__c
Ë
__THROW


253  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

256 
	}
}

258 *
	$°ºchr
 (c⁄° *
__s
, 
__c
)

259 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

261 
__END_NAMESPACE_STD


263 #ifde‡
__USE_GNU


266 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


267 "C++" *
	$°rch∫ul
 (*
__s
, 
__c
)

268 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

269 "C++" c⁄° *
	$°rch∫ul
 (c⁄° *
__s
, 
__c
)

270 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

272 *
	$°rch∫ul
 (c⁄° *
__s
, 
__c
)

273 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

277 
__BEGIN_NAMESPACE_STD


280 
size_t
 
	$°rc•n
 (c⁄° *
__s
, c⁄° *
__ªje˘
)

281 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

284 
size_t
 
	$°r•n
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

285 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

287 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


290 *
	`°Ωbrk
 (*
__s
, c⁄° *
__ac˚±
)

291 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

292 c⁄° *
	`°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

293 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

295 #ifde‡
__OPTIMIZE__


296 
__exã∫_Æways_ölöe
 *

297 
	`°Ωbrk
 (*
__s
, c⁄° *
__ac˚±
Ë
__THROW


299  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

302 
__exã∫_Æways_ölöe
 const *

303 
	`°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
Ë
__THROW


305  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

308 
	}
}

310 *
	$°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

311 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

314 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


317 *
	`°r°r
 (*
__hay°ack
, c⁄° *
__√edÀ
)

318 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

319 c⁄° *
	`°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

320 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

322 #ifde‡
__OPTIMIZE__


323 
__exã∫_Æways_ölöe
 *

324 
	`°r°r
 (*
__hay°ack
, c⁄° *
__√edÀ
Ë
__THROW


326  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

329 
__exã∫_Æways_ölöe
 const *

330 
	`°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
Ë
__THROW


332  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

335 
	}
}

337 *
	$°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

338 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

343 *
	$°πok
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__dñim
)

344 
__THROW
 
	`__n⁄nuŒ
 ((2));

345 
__END_NAMESPACE_STD


349 *
	$__°πok_r
 (*
__ª°ri˘
 
__s
,

350 c⁄° *
__ª°ri˘
 
__dñim
,

351 **
__ª°ri˘
 
__ßve_±r
)

352 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

353 #ifde‡
__USE_POSIX


354 *
	$°πok_r
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__dñim
,

355 **
__ª°ri˘
 
__ßve_±r
)

356 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

359 #ifde‡
__USE_GNU


361 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


362 "C++" *
	$°rˇ£°r
 (*
__hay°ack
, c⁄° *
__√edÀ
)

363 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

364 "C++" c⁄° *
	$°rˇ£°r
 (c⁄° *
__hay°ack
,

365 c⁄° *
__√edÀ
)

366 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

368 *
	$°rˇ£°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

369 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

373 #ifde‡
__USE_GNU


377 *
	$memmem
 (c⁄° *
__hay°ack
, 
size_t
 
__hay°ackÀn
,

378 c⁄° *
__√edÀ
, 
size_t
 
__√edÀÀn
)

379 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 3));

383 *
	$__memp˝y
 (*
__ª°ri˘
 
__de°
,

384 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

385 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

386 *
	$memp˝y
 (*
__ª°ri˘
 
__de°
,

387 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

388 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

392 
__BEGIN_NAMESPACE_STD


394 
size_t
 
	$°æí
 (c⁄° *
__s
)

395 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

396 
__END_NAMESPACE_STD


398 #ifdef 
__USE_XOPEN2K8


401 
size_t
 
	$°∫Àn
 (c⁄° *
__°rög
, 
size_t
 
__maxÀn
)

402 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

406 
__BEGIN_NAMESPACE_STD


408 *
	$°ªº‹
 (
__î∫um
Ë
__THROW
;

409 
__END_NAMESPACE_STD


410 #ifde‡
__USE_XOPEN2K


418 #i‡
deföed
 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


421 #ifde‡
__REDIRECT_NTH


422 
	`__REDIRECT_NTH
 (
°ªº‹_r
,

423 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
),

424 
__xpg_°ªº‹_r
Ë
	`__n⁄nuŒ
 ((2));

426 
	$__xpg_°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

427 
__THROW
 
	`__n⁄nuŒ
 ((2));

428 
	#°ªº‹_r
 
__xpg_°ªº‹_r


	)

433 *
	$°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

434 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

438 #ifde‡
__USE_XOPEN2K8


440 *
	$°ªº‹_l
 (
__î∫um
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

446 
	$__bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

448 #ifde‡
__USE_MISC


450 
	$bc›y
 (c⁄° *
__§c
, *
__de°
, 
size_t
 
__n
)

451 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

454 
	$bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

457 
	$bcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

458 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

461 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


464 *
	`ödex
 (*
__s
, 
__c
)

465 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

466 c⁄° *
	`ödex
 (c⁄° *
__s
, 
__c
)

467 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

469 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


470 
__exã∫_Æways_ölöe
 *

471 
	`ödex
 (*
__s
, 
__c
Ë
__THROW


473  
	`__buûtö_ödex
 (
__s
, 
__c
);

476 
__exã∫_Æways_ölöe
 const *

477 
	`ödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


479  
	`__buûtö_ödex
 (
__s
, 
__c
);

482 
	}
}

484 *
	$ödex
 (c⁄° *
__s
, 
__c
)

485 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

489 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


492 *
	`rödex
 (*
__s
, 
__c
)

493 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

494 c⁄° *
	`rödex
 (c⁄° *
__s
, 
__c
)

495 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

497 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


498 
__exã∫_Æways_ölöe
 *

499 
	`rödex
 (*
__s
, 
__c
Ë
__THROW


501  
	`__buûtö_rödex
 (
__s
, 
__c
);

504 
__exã∫_Æways_ölöe
 const *

505 
	`rödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


507  
	`__buûtö_rödex
 (
__s
, 
__c
);

510 
	}
}

512 *
	$rödex
 (c⁄° *
__s
, 
__c
)

513 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

518 
	$ffs
 (
__i
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

522 #ifdef 
__USE_GNU


523 
	$ff¶
 (
__l
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

524 
__exãnsi⁄__
 
	$ff¶l
 (
__Œ
)

525 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

529 
	$°rˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

530 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

533 
	$°∫ˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

534 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

537 #ifdef 
__USE_GNU


540 
	$°rˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

541 
__loˇÀ_t
 
__loc
)

542 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

544 
	$°∫ˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

545 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
)

546 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 4));

549 #ifdef 
__USE_MISC


552 *
	$°r£p
 (**
__ª°ri˘
 
__°rögp
,

553 c⁄° *
__ª°ri˘
 
__dñim
)

554 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

557 #ifdef 
__USE_XOPEN2K8


559 *
	$°rsig«l
 (
__sig
Ë
__THROW
;

562 *
	$__°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

563 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

564 *
	$°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

565 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

569 *
	$__°≤˝y
 (*
__ª°ri˘
 
__de°
,

570 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

571 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

572 *
	$°≤˝y
 (*
__ª°ri˘
 
__de°
,

573 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

574 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

577 #ifdef 
__USE_GNU


579 
	$°rvîscmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

580 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

583 *
	$°r‰y
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

586 *
	$mem‰ob
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

588 #i‚de‡
ba£«me


593 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


594 "C++" *
	$ba£«me
 (*
__fûíame
)

595 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

596 "C++" c⁄° *
	$ba£«me
 (c⁄° *
__fûíame
)

597 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

599 *
	$ba£«me
 (c⁄° *
__fûíame
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

605 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

606 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__OPTIMIZE_SIZE__
 \

607 && !
deföed
 
__NO_INLINE__
 && !deföed 
__˝lu•lus


627 
	~<bôs/°rög.h
>

630 
	~<bôs/°rög2.h
>

633 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


635 
	~<bôs/°rög3.h
>

639 #i‡
deföed
 
__USE_GNU
 && deföed 
__OPTIMIZE__
 \

640 && 
deföed
 
__exã∫_Æways_ölöe
 && 
	$__GNUC_PREREQ
 (3,2)

641 #i‡!
deföed
 
_FORCE_INLINES
 && !deföed 
_HAVE_STRING_ARCH_memp˝y


643 #unde‡
memp˝y


644 #unde‡
__memp˝y


645 
	#memp˝y
(
de°
, 
§c
, 
n
Ë
	`__memp˝y_ölöe
 (de°, src,Ç)

	)

646 
	#__memp˝y
(
de°
, 
§c
, 
n
Ë
	`__memp˝y_ölöe
 (de°, src,Ç)

	)

648 
__exã∫_Æways_ölöe
 *

649 
	$__memp˝y_ölöe
 (*
__ª°ri˘
 
__de°
,

650 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

652  (*Ë
	`mem˝y
 (
__de°
, 
__§c
, 
__n
) + __n;

653 
	}
}

658 
	g__END_DECLS


	@/usr/include/strings.h

18 #i‚def 
_STRINGS_H


19 
	#_STRINGS_H
 1

	)

24 #i‡!
deföed
 
_STRING_H
 || !deföed 
__USE_MISC


26 
	~<„©uªs.h
>

27 
	#__√ed_size_t


	)

28 
	~<°ddef.h
>

31 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

32 
	#__CORRECT_ISO_CPP_STRINGS_H_PROTO


	)

35 
	g__BEGIN_DECLS


37 #i‡
deföed
 
__USE_MISC
 || !deföed 
__USE_XOPEN2K8


39 
	$bcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

40 
__THROW
 
__©åibuã_puª__
;

43 
	$bc›y
 (c⁄° *
__§c
, *
__de°
, 
size_t
 
__n
Ë
__THROW
;

46 
	$bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
;

49 #ifde‡
__CORRECT_ISO_CPP_STRINGS_H_PROTO


52 *
	`ödex
 (*
__s
, 
__c
)

53 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

54 c⁄° *
	`ödex
 (c⁄° *
__s
, 
__c
)

55 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

57 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRING_H_PROTO


58 
__exã∫_Æways_ölöe
 *

59 
	`ödex
 (*
__s
, 
__c
Ë
__THROW


61  
	`__buûtö_ödex
 (
__s
, 
__c
);

64 
__exã∫_Æways_ölöe
 const *

65 
	`ödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


67  
	`__buûtö_ödex
 (
__s
, 
__c
);

70 
	}
}

72 *
	$ödex
 (c⁄° *
__s
, 
__c
)

73 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

77 #ifde‡
__CORRECT_ISO_CPP_STRINGS_H_PROTO


80 *
	`rödex
 (*
__s
, 
__c
)

81 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

82 c⁄° *
	`rödex
 (c⁄° *
__s
, 
__c
)

83 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

85 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRING_H_PROTO


86 
__exã∫_Æways_ölöe
 *

87 
	`rödex
 (*
__s
, 
__c
Ë
__THROW


89  
	`__buûtö_rödex
 (
__s
, 
__c
);

92 
__exã∫_Æways_ölöe
 const *

93 
	`rödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


95  
	`__buûtö_rödex
 (
__s
, 
__c
);

98 
	}
}

100 *
	$rödex
 (c⁄° *
__s
, 
__c
)

101 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

105 #i‡
deföed
 
__USE_MISC
 || !deföed 
__USE_XOPEN2K8
 || deföed 
__USE_XOPEN2K8XSI


108 
	$ffs
 (
__i
Ë
__THROW
 
	`__©åibuã__
 ((const));

112 
	$°rˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

113 
__THROW
 
__©åibuã_puª__
;

116 
	$°∫ˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

117 
__THROW
 
__©åibuã_puª__
;

119 #ifdef 
__USE_XOPEN2K8


123 
	~<xloˇÀ.h
>

127 
	$°rˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
, 
__loˇÀ_t
 
__loc
)

128 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

130 
	$°∫ˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

131 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
)

132 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 4));

135 
__END_DECLS


	@/usr/include/time.h

22 #i‚def 
_TIME_H


24 #i‡(! 
deföed
 
__√ed_time_t
 && !deföed 
__√ed_˛ock_t
 && \

25 ! 
deföed
 
	g__√ed_time•ec
)

26 
	#_TIME_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__√ed_size_t


	)

36 
	#__√ed_NULL


	)

37 
	~<°ddef.h
>

41 
	~<bôs/time.h
>

44 #i‡!
deföed
 
__STRICT_ANSI__
 && !deföed 
__USE_XOPEN2K


45 #i‚de‡
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #i‡!
deföed
 
__˛ock_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_˛ock_t
)

53 
	#__˛ock_t_deföed
 1

	)

55 
	~<bôs/ty≥s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__˛ock_t
 
	t˛ock_t
;

60 
	g__END_NAMESPACE_STD


61 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX


62 
	$__USING_NAMESPACE_STD
(
˛ock_t
)

66 #unde‡
__√ed_˛ock_t


68 #i‡!
deföed
 
__time_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_time_t
)

69 
	#__time_t_deföed
 1

	)

71 
	~<bôs/ty≥s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ifde‡
__USE_POSIX


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #unde‡
__√ed_time_t


84 #i‡!
deföed
 
__˛ockid_t_deföed
 && \

85 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_˛ockid_t
)

86 
	#__˛ockid_t_deföed
 1

	)

88 
	~<bôs/ty≥s.h
>

91 
__˛ockid_t
 
	t˛ockid_t
;

94 #unde‡
__˛ockid_time_t


96 #i‡!
deföed
 
__timî_t_deföed
 && \

97 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_timî_t
)

98 
	#__timî_t_deföed
 1

	)

100 
	~<bôs/ty≥s.h
>

103 
__timî_t
 
	ttimî_t
;

106 #unde‡
__√ed_timî_t


109 #i‡(!
deföed
 
__time•ec_deföed
 \

110 && ((
deföed
 
_TIME_H
 \

111 && (
deföed
 
__USE_POSIX199309
 \

112 || 
deföed
 
__USE_ISOC11
)) \

113 || 
deföed
 
__√ed_time•ec
))

114 
	#__time•ec_deföed
 1

	)

116 
	~<bôs/ty≥s.h
>

120 
	stime•ec


122 
__time_t
 
tv_£c
;

123 
__sysˇŒ_¶⁄g_t
 
tv_n£c
;

127 #unde‡
__√ed_time•ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mö
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_m⁄
;

140 
tm_yór
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd°
;

145 #ifdef 
__USE_MISC


146 
tm_gmtoff
;

147 c⁄° *
tm_z⁄e
;

149 
__tm_gmtoff
;

150 c⁄° *
__tm_z⁄e
;

153 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifde‡
__USE_POSIX199309


161 
	sôimî•ec


163 
time•ec
 
ô_öãrvÆ
;

164 
time•ec
 
ô_vÆue
;

168 
sigevít
;

172 #ifde‡
__USE_XOPEN2K


173 #i‚de‡
__pid_t_deföed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_deföed


	)

180 #ifde‡
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
˛ock_t
 
	$˛ock
 (Ë
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__timî
Ë
__THROW
;

195 
	$dif·ime
 (
time_t
 
__time1
,Åime_à
__time0
)

196 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

199 
time_t
 
	$mktime
 (
tm
 *
__ç
Ë
__THROW
;

205 
size_t
 
	$°r·ime
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

206 c⁄° *
__ª°ri˘
 
__f‹m©
,

207 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifde‡
__USE_XOPEN


213 *
	$°Ωtime
 (c⁄° *
__ª°ri˘
 
__s
,

214 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
)

215 
__THROW
;

218 #ifde‡
__USE_XOPEN2K8


221 
	~<xloˇÀ.h
>

223 
size_t
 
	$°r·ime_l
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

224 c⁄° *
__ª°ri˘
 
__f‹m©
,

225 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

226 
__loˇÀ_t
 
__loc
Ë
__THROW
;

229 #ifde‡
__USE_GNU


230 *
	$°Ωtime_l
 (c⁄° *
__ª°ri˘
 
__s
,

231 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
,

232 
__loˇÀ_t
 
__loc
Ë
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

243 
tm
 *
	$loˇ…ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

244 
__END_NAMESPACE_STD


246 #ifde‡
__USE_POSIX


249 
tm
 *
	$gmtime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

250 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

254 
tm
 *
	$loˇ…ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

255 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$as˘ime
 (c⁄° 
tm
 *
__ç
Ë
__THROW
;

264 *
	$˘ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

265 
__END_NAMESPACE_STD


267 #ifde‡
__USE_POSIX


272 *
	$as˘ime_r
 (c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

273 *
__ª°ri˘
 
__buf
Ë
__THROW
;

276 *
	$˘ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

277 *
__ª°ri˘
 
__buf
Ë
__THROW
;

282 *
__tz«me
[2];

283 
__daylight
;

284 
__timez⁄e
;

287 #ifdef 
__USE_POSIX


289 *
tz«me
[2];

293 
	$tz£t
 (Ë
__THROW
;

296 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


297 
daylight
;

298 
timez⁄e
;

301 #ifde‡
__USE_MISC


304 
	$°ime
 (c⁄° 
time_t
 *
__whí
Ë
__THROW
;

310 
	#__i¶óp
(
yór
) \

311 ((
yór
Ë% 4 =0 && ((yórË% 100 !0 || (yórË% 400 =0))

	)

314 #ifde‡
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__ç
Ë
__THROW
;

322 
time_t
 
	$timñoˇl
 (
tm
 *
__ç
Ë
__THROW
;

325 
	$dysize
 (
__yór
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

329 #ifde‡
__USE_POSIX199309


334 
	`«no¶ìp
 (c⁄° 
time•ec
 *
__ªque°ed_time
,

335 
time•ec
 *
__ªmaöög
);

339 
	$˛ock_gëªs
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ªs
Ë
__THROW
;

342 
	$˛ock_gëtime
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ç
Ë
__THROW
;

345 
	$˛ock_£âime
 (
˛ockid_t
 
__˛ock_id
, c⁄° 
time•ec
 *
__ç
)

346 
__THROW
;

348 #ifde‡
__USE_XOPEN2K


353 
	`˛ock_«no¶ìp
 (
˛ockid_t
 
__˛ock_id
, 
__Êags
,

354 c⁄° 
time•ec
 *
__ªq
,

355 
time•ec
 *
__ªm
);

358 
	$˛ock_gë˝u˛ockid
 (
pid_t
 
__pid
, 
˛ockid_t
 *
__˛ock_id
Ë
__THROW
;

363 
	$timî_¸óã
 (
˛ockid_t
 
__˛ock_id
,

364 
sigevít
 *
__ª°ri˘
 
__evp
,

365 
timî_t
 *
__ª°ri˘
 
__timîid
Ë
__THROW
;

368 
	$timî_dñëe
 (
timî_t
 
__timîid
Ë
__THROW
;

371 
	$timî_£âime
 (
timî_t
 
__timîid
, 
__Êags
,

372 c⁄° 
ôimî•ec
 *
__ª°ri˘
 
__vÆue
,

373 
ôimî•ec
 *
__ª°ri˘
 
__ovÆue
Ë
__THROW
;

376 
	$timî_gëtime
 (
timî_t
 
__timîid
, 
ôimî•ec
 *
__vÆue
)

377 
__THROW
;

380 
	$timî_gëovîrun
 (
timî_t
 
__timîid
Ë
__THROW
;

384 #ifde‡
__USE_ISOC11


386 
	$time•ec_gë
 (
time•ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__n⁄nuŒ
 ((1));

391 #ifde‡
__USE_XOPEN_EXTENDED


403 
gëd©e_îr
;

412 
tm
 *
	`gëd©e
 (c⁄° *
__°rög
);

415 #ifde‡
__USE_GNU


426 
	`gëd©e_r
 (c⁄° *
__ª°ri˘
 
__°rög
,

427 
tm
 *
__ª°ri˘
 
__ªsbuÂ
);

430 
__END_DECLS


	@/usr/include/unistd.h

22 #i‚def 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


32 #ifde‡
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #ñi‡
deföed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #ñi‡
deföed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #ñi‡
deföed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifde‡
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #ñi‡
deföed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #ñi‡
deföed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

70 
	#_POSIX2_C_VERSION
 
__POSIX2_THIS_VERSION


	)

74 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

78 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

82 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

86 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

89 #ifde‡
__USE_XOPEN2K8


90 
	#_XOPEN_VERSION
 700

	)

91 #ñi‡
deföed
 
__USE_XOPEN2K


92 
	#_XOPEN_VERSION
 600

	)

93 #ñi‡
deföed
 
__USE_UNIX98


94 
	#_XOPEN_VERSION
 500

	)

96 
	#_XOPEN_VERSION
 4

	)

100 
	#_XOPEN_XCU_VERSION
 4

	)

103 
	#_XOPEN_XPG2
 1

	)

104 
	#_XOPEN_XPG3
 1

	)

105 
	#_XOPEN_XPG4
 1

	)

108 
	#_XOPEN_UNIX
 1

	)

111 
	#_XOPEN_CRYPT
 1

	)

115 
	#_XOPEN_ENH_I18N
 1

	)

118 
	#_XOPEN_LEGACY
 1

	)

205 
	~<bôs/posix_›t.h
>

208 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


209 
	~<bôs/ívú⁄míts.h
>

213 
	#STDIN_FILENO
 0

	)

214 
	#STDOUT_FILENO
 1

	)

215 
	#STDERR_FILENO
 2

	)

220 
	~<bôs/ty≥s.h
>

222 #i‚def 
__ssize_t_deföed


223 
__ssize_t
 
	tssize_t
;

224 
	#__ssize_t_deföed


	)

227 
	#__√ed_size_t


	)

228 
	#__√ed_NULL


	)

229 
	~<°ddef.h
>

231 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


234 #i‚de‡
__gid_t_deföed


235 
__gid_t
 
	tgid_t
;

236 
	#__gid_t_deföed


	)

239 #i‚de‡
__uid_t_deföed


240 
__uid_t
 
	tuid_t
;

241 
	#__uid_t_deföed


	)

244 #i‚de‡
__off_t_deföed


245 #i‚de‡
__USE_FILE_OFFSET64


246 
__off_t
 
	toff_t
;

248 
__off64_t
 
	toff_t
;

250 
	#__off_t_deföed


	)

252 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


253 
__off64_t
 
	toff64_t
;

254 
	#__off64_t_deföed


	)

257 #i‚de‡
__u£c⁄ds_t_deföed


258 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

259 
	#__u£c⁄ds_t_deföed


	)

262 #i‚de‡
__pid_t_deföed


263 
__pid_t
 
	tpid_t
;

264 
	#__pid_t_deföed


	)

268 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


269 #i‚de‡
__öçå_t_deföed


270 
__öçå_t
 
	töçå_t
;

271 
	#__öçå_t_deföed


	)

275 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


276 #i‚de‡
__sockÀn_t_deföed


277 
__sockÀn_t
 
	tsockÀn_t
;

278 
	#__sockÀn_t_deföed


	)

284 
	#R_OK
 4

	)

285 
	#W_OK
 2

	)

286 
	#X_OK
 1

	)

287 
	#F_OK
 0

	)

290 
	$ac˚ss
 (c⁄° *
__«me
, 
__ty≥
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

292 #ifde‡
__USE_GNU


295 
	$euidac˚ss
 (c⁄° *
__«me
, 
__ty≥
)

296 
__THROW
 
	`__n⁄nuŒ
 ((1));

299 
	$óc˚ss
 (c⁄° *
__«me
, 
__ty≥
)

300 
__THROW
 
	`__n⁄nuŒ
 ((1));

303 #ifde‡
__USE_ATFILE


307 
	$Ác˚sßt
 (
__fd
, c⁄° *
__fûe
, 
__ty≥
, 
__Êag
)

308 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

313 #i‚def 
_STDIO_H


314 
	#SEEK_SET
 0

	)

315 
	#SEEK_CUR
 1

	)

316 
	#SEEK_END
 2

	)

317 #ifde‡
__USE_GNU


318 
	#SEEK_DATA
 3

	)

319 
	#SEEK_HOLE
 4

	)

323 #i‡
deföed
 
__USE_MISC
 && !deföed 
L_SET


325 
	#L_SET
 
SEEK_SET


	)

326 
	#L_INCR
 
SEEK_CUR


	)

327 
	#L_XTND
 
SEEK_END


	)

336 #i‚de‡
__USE_FILE_OFFSET64


337 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__whí˚
Ë
__THROW
;

339 #ifde‡
__REDIRECT_NTH


340 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

341 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
),

342 
l£ek64
);

344 
	#l£ek
 
l£ek64


	)

347 #ifde‡
__USE_LARGEFILE64


348 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
)

349 
__THROW
;

356 
	`˛o£
 (
__fd
);

363 
ssize_t
 
	$ªad
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
Ë
__wur
;

369 
ssize_t
 
	$wrôe
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
Ë
__wur
;

371 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


372 #i‚de‡
__USE_FILE_OFFSET64


379 
ssize_t
 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

380 
__off_t
 
__off£t
Ë
__wur
;

387 
ssize_t
 
	$pwrôe
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

388 
__off_t
 
__off£t
Ë
__wur
;

390 #ifde‡
__REDIRECT


391 
ssize_t
 
	`__REDIRECT
 (
¥ód
, (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

392 
__off64_t
 
__off£t
),

393 
¥ód64
Ë
__wur
;

394 
ssize_t
 
	`__REDIRECT
 (
pwrôe
, (
__fd
, c⁄° *
__buf
,

395 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
),

396 
pwrôe64
Ë
__wur
;

398 
	#¥ód
 
¥ód64


	)

399 
	#pwrôe
 
pwrôe64


	)

403 #ifde‡
__USE_LARGEFILE64


407 
ssize_t
 
	$¥ód64
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

408 
__off64_t
 
__off£t
Ë
__wur
;

411 
ssize_t
 
	$pwrôe64
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

412 
__off64_t
 
__off£t
Ë
__wur
;

420 
	$pùe
 (
__pùedes
[2]Ë
__THROW
 
__wur
;

422 #ifde‡
__USE_GNU


425 
	$pùe2
 (
__pùedes
[2], 
__Êags
Ë
__THROW
 
__wur
;

435 
	$Æ¨m
 (
__£c⁄ds
Ë
__THROW
;

447 
	`¶ìp
 (
__£c⁄ds
);

449 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

450 || 
deföed
 
__USE_MISC


455 
__u£c⁄ds_t
 
	$uÆ¨m
 (
__u£c⁄ds_t
 
__vÆue
, __u£c⁄ds_à
__öãrvÆ
)

456 
__THROW
;

463 
	`u¶ìp
 (
__u£c⁄ds_t
 
__u£c⁄ds
);

472 
	`∑u£
 ();

476 
	$chown
 (c⁄° *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

477 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

479 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


481 
	$fchown
 (
__fd
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
Ë
__THROW
 
__wur
;

486 
	$lchown
 (c⁄° *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

487 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

491 #ifde‡
__USE_ATFILE


494 
	$fchow«t
 (
__fd
, c⁄° *
__fûe
, 
__uid_t
 
__ow√r
,

495 
__gid_t
 
__group
, 
__Êag
)

496 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

500 
	$chdú
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

502 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


504 
	$fchdú
 (
__fd
Ë
__THROW
 
__wur
;

514 *
	$gëcwd
 (*
__buf
, 
size_t
 
__size
Ë
__THROW
 
__wur
;

516 #ifdef 
__USE_GNU


520 *
	$gë_cuºít_dú_«me
 (Ë
__THROW
;

523 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

524 || 
deföed
 
__USE_MISC


528 *
	$gëwd
 (*
__buf
)

529 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
 
__wur
;

534 
	$dup
 (
__fd
Ë
__THROW
 
__wur
;

537 
	$dup2
 (
__fd
, 
__fd2
Ë
__THROW
;

539 #ifde‡
__USE_GNU


542 
	$dup3
 (
__fd
, 
__fd2
, 
__Êags
Ë
__THROW
;

546 **
__ívú⁄
;

547 #ifde‡
__USE_GNU


548 **
ívú⁄
;

554 
	$execve
 (c⁄° *
__∑th
, *c⁄° 
__¨gv
[],

555 *c⁄° 
__ívp
[]Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

557 #ifde‡
__USE_XOPEN2K8


560 
	$„xecve
 (
__fd
, *c⁄° 
__¨gv
[], *c⁄° 
__ívp
[])

561 
__THROW
 
	`__n⁄nuŒ
 ((2));

566 
	$execv
 (c⁄° *
__∑th
, *c⁄° 
__¨gv
[])

567 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

571 
	$exe˛e
 (c⁄° *
__∑th
, c⁄° *
__¨g
, ...)

572 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

576 
	$exe˛
 (c⁄° *
__∑th
, c⁄° *
__¨g
, ...)

577 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

581 
	$execvp
 (c⁄° *
__fûe
, *c⁄° 
__¨gv
[])

582 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

587 
	$exe˛p
 (c⁄° *
__fûe
, c⁄° *
__¨g
, ...)

588 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

590 #ifde‡
__USE_GNU


593 
	$execv≥
 (c⁄° *
__fûe
, *c⁄° 
__¨gv
[],

594 *c⁄° 
__ívp
[])

595 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

599 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


601 
	$ni˚
 (
__öc
Ë
__THROW
 
__wur
;

606 
	$_exô
 (
__°©us
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

612 
	~<bôs/c⁄‚ame.h
>

615 
	$∑thc⁄f
 (c⁄° *
__∑th
, 
__«me
)

616 
__THROW
 
	`__n⁄nuŒ
 ((1));

619 
	$Â©hc⁄f
 (
__fd
, 
__«me
Ë
__THROW
;

622 
	$sysc⁄f
 (
__«me
Ë
__THROW
;

624 #ifdef 
__USE_POSIX2


626 
size_t
 
	$c⁄f°r
 (
__«me
, *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

631 
__pid_t
 
	$gëpid
 (Ë
__THROW
;

634 
__pid_t
 
	$gëµid
 (Ë
__THROW
;

637 
__pid_t
 
	$gëpgΩ
 (Ë
__THROW
;

640 
__pid_t
 
	$__gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

641 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


642 
__pid_t
 
	$gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

649 
	$£çgid
 (
__pid_t
 
__pid
, __pid_à
__pgid
Ë
__THROW
;

651 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


663 
	$£çgΩ
 (Ë
__THROW
;

670 
__pid_t
 
	$£tsid
 (Ë
__THROW
;

672 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


674 
__pid_t
 
	$gësid
 (
__pid_t
 
__pid
Ë
__THROW
;

678 
__uid_t
 
	$gëuid
 (Ë
__THROW
;

681 
__uid_t
 
	$gëeuid
 (Ë
__THROW
;

684 
__gid_t
 
	$gëgid
 (Ë
__THROW
;

687 
__gid_t
 
	$gëegid
 (Ë
__THROW
;

692 
	$gëgroups
 (
__size
, 
__gid_t
 
__li°
[]Ë
__THROW
 
__wur
;

694 #ifdef 
__USE_GNU


696 
	$group_membî
 (
__gid_t
 
__gid
Ë
__THROW
;

703 
	$£tuid
 (
__uid_t
 
__uid
Ë
__THROW
 
__wur
;

705 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


708 
	$£åeuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
Ë
__THROW
 
__wur
;

711 #ifde‡
__USE_XOPEN2K


713 
	$£ãuid
 (
__uid_t
 
__uid
Ë
__THROW
 
__wur
;

720 
	$£tgid
 (
__gid_t
 
__gid
Ë
__THROW
 
__wur
;

722 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


725 
	$£åegid
 (
__gid_t
 
__rgid
, __gid_à
__egid
Ë
__THROW
 
__wur
;

728 #ifde‡
__USE_XOPEN2K


730 
	$£ãgid
 (
__gid_t
 
__gid
Ë
__THROW
 
__wur
;

733 #ifde‡
__USE_GNU


736 
	$gëªsuid
 (
__uid_t
 *
__ruid
, __uid_à*
__euid
, __uid_à*
__suid
)

737 
__THROW
;

741 
	$gëªsgid
 (
__gid_t
 *
__rgid
, __gid_à*
__egid
, __gid_à*
__sgid
)

742 
__THROW
;

746 
	$£åesuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
, __uid_à
__suid
)

747 
__THROW
 
__wur
;

751 
	$£åesgid
 (
__gid_t
 
__rgid
, __gid_à
__egid
, __gid_à
__sgid
)

752 
__THROW
 
__wur
;

759 
__pid_t
 
	$f‹k
 (Ë
__THROWNL
;

761 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

762 || 
deföed
 
__USE_MISC


767 
__pid_t
 
	$vf‹k
 (Ë
__THROW
;

773 *
	$ây«me
 (
__fd
Ë
__THROW
;

777 
	$ây«me_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

778 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

782 
	$ißây
 (
__fd
Ë
__THROW
;

784 #i‡
deföed
 
__USE_MISC
 \

785 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_UNIX98
)

788 
	$ây¶Ÿ
 (Ë
__THROW
;

793 
	$lök
 (c⁄° *
__‰om
, c⁄° *
__to
)

794 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

796 #ifde‡
__USE_ATFILE


799 
	$lök©
 (
__‰omfd
, c⁄° *
__‰om
, 
__tofd
,

800 c⁄° *
__to
, 
__Êags
)

801 
__THROW
 
	`__n⁄nuŒ
 ((2, 4)Ë
__wur
;

804 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


806 
	$symlök
 (c⁄° *
__‰om
, c⁄° *
__to
)

807 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

812 
ssize_t
 
	$ªadlök
 (c⁄° *
__ª°ri˘
 
__∑th
,

813 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

814 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

817 #ifde‡
__USE_ATFILE


819 
	$symlök©
 (c⁄° *
__‰om
, 
__tofd
,

820 c⁄° *
__to
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

823 
ssize_t
 
	$ªadlök©
 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

824 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

825 
__THROW
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

829 
	$u∆ök
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

831 #ifde‡
__USE_ATFILE


833 
	$u∆ök©
 (
__fd
, c⁄° *
__«me
, 
__Êag
)

834 
__THROW
 
	`__n⁄nuŒ
 ((2));

838 
	$rmdú
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

842 
__pid_t
 
	$tcgëpgΩ
 (
__fd
Ë
__THROW
;

845 
	$tc£çgΩ
 (
__fd
, 
__pid_t
 
__pgΩ_id
Ë
__THROW
;

852 *
	`gëlogö
 ();

853 #i‡
deföed
 
__USE_REENTRANT
 || deföed 
__USE_POSIX199506


860 
	$gëlogö_r
 (*
__«me
, 
size_t
 
__«me_Àn
Ë
	`__n⁄nuŒ
 ((1));

863 #ifdef 
__USE_MISC


865 
	$£éogö
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

869 #ifdef 
__USE_POSIX2


873 
	#__√ed_gë›t


	)

874 
	~<gë›t.h
>

878 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


882 
	$gëho°«me
 (*
__«me
, 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

886 #i‡
deföed
 
__USE_MISC


889 
	$£tho°«me
 (c⁄° *
__«me
, 
size_t
 
__Àn
)

890 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

894 
	$£tho°id
 (
__id
Ë
__THROW
 
__wur
;

900 
	$gëdomaö«me
 (*
__«me
, 
size_t
 
__Àn
)

901 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

902 
	$£tdomaö«me
 (c⁄° *
__«me
, 
size_t
 
__Àn
)

903 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

909 
	$vh™gup
 (Ë
__THROW
;

912 
	$ªvoke
 (c⁄° *
__fûe
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

920 
	$¥ofû
 (*
__ßm∂e_buf„r
, 
size_t
 
__size
,

921 
size_t
 
__off£t
, 
__sˇÀ
)

922 
__THROW
 
	`__n⁄nuŒ
 ((1));

928 
	$ac˘
 (c⁄° *
__«me
Ë
__THROW
;

932 *
	$gëu£rshñl
 (Ë
__THROW
;

933 
	$ídu£rshñl
 (Ë
__THROW
;

934 
	$£tu£rshñl
 (Ë
__THROW
;

940 
	$d´m⁄
 (
__nochdú
, 
__no˛o£
Ë
__THROW
 
__wur
;

944 #i‡
deföed
 
__USE_MISC
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

947 
	$chroŸ
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

951 *
	$gë∑ss
 (c⁄° *
__¥om±
Ë
	`__n⁄nuŒ
 ((1));

959 
	`fsync
 (
__fd
);

962 #ifde‡
__USE_GNU


965 
	$syncfs
 (
__fd
Ë
__THROW
;

969 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


972 
	`gëho°id
 ();

975 
	$sync
 (Ë
__THROW
;

978 #i‡
deföed
 
__USE_MISC
 || !deföed 
__USE_XOPEN2K


981 
	$gë∑gesize
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

986 
	$gëdèbÀsize
 (Ë
__THROW
;

992 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


995 #i‚de‡
__USE_FILE_OFFSET64


996 
	$åunˇã
 (c⁄° *
__fûe
, 
__off_t
 
__Àngth
)

997 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

999 #ifde‡
__REDIRECT_NTH


1000 
	`__REDIRECT_NTH
 (
åunˇã
,

1001 (c⁄° *
__fûe
, 
__off64_t
 
__Àngth
),

1002 
åunˇã64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1004 
	#åunˇã
 
åunˇã64


	)

1007 #ifde‡
__USE_LARGEFILE64


1008 
	$åunˇã64
 (c⁄° *
__fûe
, 
__off64_t
 
__Àngth
)

1009 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1014 #i‡
deföed
 
__USE_POSIX199309
 \

1015 || 
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


1018 #i‚de‡
__USE_FILE_OFFSET64


1019 
	$·runˇã
 (
__fd
, 
__off_t
 
__Àngth
Ë
__THROW
 
__wur
;

1021 #ifde‡
__REDIRECT_NTH


1022 
	`__REDIRECT_NTH
 (
·runˇã
, (
__fd
, 
__off64_t
 
__Àngth
),

1023 
·runˇã64
Ë
__wur
;

1025 
	#·runˇã
 
·runˇã64


	)

1028 #ifde‡
__USE_LARGEFILE64


1029 
	$·runˇã64
 (
__fd
, 
__off64_t
 
__Àngth
Ë
__THROW
 
__wur
;

1035 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

1036 || 
deföed
 
__USE_MISC


1040 
	$brk
 (*
__addr
Ë
__THROW
 
__wur
;

1046 *
	$sbrk
 (
öçå_t
 
__dñè
Ë
__THROW
;

1050 #ifde‡
__USE_MISC


1061 
	$sysˇŒ
 (
__sy¢o
, ...Ë
__THROW
;

1066 #i‡(
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
Ë&& !deföed 
F_LOCK


1078 
	#F_ULOCK
 0

	)

1079 
	#F_LOCK
 1

	)

1080 
	#F_TLOCK
 2

	)

1081 
	#F_TEST
 3

	)

1083 #i‚de‡
__USE_FILE_OFFSET64


1084 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Àn
Ë
__wur
;

1086 #ifde‡
__REDIRECT


1087 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
),

1088 
lockf64
Ë
__wur
;

1090 
	#lockf
 
lockf64


	)

1093 #ifde‡
__USE_LARGEFILE64


1094 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
Ë
__wur
;

1099 #ifde‡
__USE_GNU


1104 
	#TEMP_FAILURE_RETRY
(
ex¥essi⁄
) \

1105 (
__exãnsi⁄__
 \

1106 ({ 
__ªsu…
; \

1107 dÿ
__ªsu…
 = (Ë(
ex¥essi⁄
); \

1108 
__ªsu…
 =-1L && 
î∫o
 =
EINTR
); \

1109 
__ªsu…
; 
	}
}))

	)

1112 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_UNIX98


1115 
fd©async
 (
__fûdes
);

1121 #ifdef 
__USE_XOPEN


1123 *
	$¸y±
 (c⁄° *
__key
, c⁄° *
__ß…
)

1124 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1128 
	$í¸y±
 (*
__glibc_block
, 
__edÊag
)

1129 
__THROW
 
	`__n⁄nuŒ
 ((1));

1136 
	$swab
 (c⁄° *
__ª°ri˘
 
__‰om
, *__ª°ri˘ 
__to
,

1137 
ssize_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1143 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K


1145 *
	$˘îmid
 (*
__s
Ë
__THROW
;

1150 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


1151 
	~<bôs/uni°d.h
>

1154 
__END_DECLS


	@/usr/include/unwind.h

26 #i‚de‡
_UNWIND_H


27 
	#_UNWIND_H


	)

30 
	~<°döt.h
>

32 #ifde‡
__˝lu•lus


42 
_URC_NO_REASON
 = 0,

43 
_URC_FOREIGN_EXCEPTION_CAUGHT
 = 1,

44 
_URC_FATAL_PHASE2_ERROR
 = 2,

45 
_URC_FATAL_PHASE1_ERROR
 = 3,

46 
_URC_NORMAL_STOP
 = 4,

47 
_URC_END_OF_STACK
 = 5,

48 
_URC_HANDLER_FOUND
 = 6,

49 
_URC_INSTALL_CONTEXT
 = 7,

50 
_URC_CONTINUE_UNWIND
 = 8

52 
	t_Unwöd_Rós⁄_Code
;

54 
	t_Unwöd_A˘i⁄
;

56 
	#_UA_SEARCH_PHASE
 1

	)

57 
	#_UA_CLEANUP_PHASE
 2

	)

58 
	#_UA_HANDLER_FRAME
 4

	)

59 
	#_UA_FORCE_UNWIND
 8

	)

61 
_Unwöd_C⁄ãxt
;

62 
_Unwöd_Ex˚±i⁄
;

64 (*
_Unwöd_Ex˚±i⁄_CÀ™up_Fn
Ë(
	t_Unwöd_Rós⁄_Code
,

65 
	t_Unwöd_Ex˚±i⁄
 *);

67 
_Unwöd_Rós⁄_Code
 (*
	t_Unwöd_St›_Fn
Ë(, 
	t_Unwöd_A˘i⁄
,

68 
	tuöt64_t
,

69 
	t_Unwöd_Ex˚±i⁄
 *,

70 
	t_Unwöd_C⁄ãxt
 *,

77 
	s_Unwöd_Ex˚±i⁄


79 
uöt64_t
 
ex˚±i⁄_˛ass
;

80 
_Unwöd_Ex˚±i⁄_CÀ™up_Fn
 
ex˚±i⁄_˛ónup
;

81 
¥iv©e_1
;

82 
¥iv©e_2
;

83 } 
__©åibuã__
((
__Æig√d__
));

85 
_Unwöd_Rós⁄_Code
 
_Unwöd_Rai£Ex˚±i⁄
 (
_Unwöd_Ex˚±i⁄
 *);

86 
_Unwöd_Rós⁄_Code
 
_Unwöd_F‹˚dUnwöd
 (
_Unwöd_Ex˚±i⁄
 *,

87 
_Unwöd_St›_Fn
, *);

88 
_Unwöd_Resume
 (
_Unwöd_Ex˚±i⁄
 *);

89 
_Unwöd_DñëeEx˚±i⁄
 (
_Unwöd_Ex˚±i⁄
 *);

90 
_Unwöd_GëGR
 (
_Unwöd_C⁄ãxt
 *, );

91 
_Unwöd_SëGR
 (
_Unwöd_C⁄ãxt
 *, , );

92 
_Unwöd_GëIP
 (
_Unwöd_C⁄ãxt
 *);

93 
_Unwöd_GëIPInfo
 (
_Unwöd_C⁄ãxt
 *, *);

94 
_Unwöd_SëIP
 (
_Unwöd_C⁄ãxt
 *, );

95 
_Unwöd_GëL™guageS≥cificD©a
 (
_Unwöd_C⁄ãxt
*);

96 
_Unwöd_GëRegi⁄Sèπ
 (
_Unwöd_C⁄ãxt
 *);

98 #ifde‡
_GNU_SOURCE


102 
_Unwöd_Rós⁄_Code
 (*
	t_Unwöd_Tø˚_Fn
Ë(
	t_Unwöd_C⁄ãxt
 *,

107 
	#_UA_END_OF_STACK
 16

	)

112 
_Unwöd_Rós⁄_Code


113 
_Unwöd_Resume_‹_Rëhrow
 (
_Unwöd_Ex˚±i⁄
 *);

117 
_Unwöd_GëBSP
 (
_Unwöd_C⁄ãxt
 *);

121 
_Unwöd_GëCFA
 (
_Unwöd_C⁄ãxt
 *);

124 
_Unwöd_GëD©aRñBa£
 (
_Unwöd_C⁄ãxt
 *);

127 
_Unwöd_GëTextRñBa£
 (
_Unwöd_C⁄ãxt
 *);

135 
_Unwöd_Rós⁄_Code
 
_Unwöd_Backåa˚
 (
_Unwöd_Tø˚_Fn
, *);

143 *
_Unwöd_FödEn˛osögFun˘i⁄
 (*);

150 #ifde‡
__˝lu•lus


	@/usr/include/wchar.h

23 #i‚de‡
_WCHAR_H


25 #i‡!
deföed
 
__√ed_mb°©e_t
 && !deföed 
__√ed_wöt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<„©uªs.h
>

30 #ifde‡
_WCHAR_H


32 
	#__√ed___FILE


	)

33 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


34 
	#__√ed_FILE


	)

36 
	~<°dio.h
>

38 
	#__√ed___va_li°


	)

39 
	~<°d¨g.h
>

41 
	~<bôs/wch¨.h
>

44 
	#__√ed_size_t


	)

45 
	#__√ed_wch¨_t


	)

46 
	#__√ed_NULL


	)

48 #i‡
deföed
 
_WCHAR_H
 || deföed 
__√ed_wöt_t
 || !deföed 
__WINT_TYPE__


49 #unde‡
__√ed_wöt_t


50 
	#__√ed_wöt_t


	)

51 
	~<°ddef.h
>

55 #i‚de‡
_WINT_T


60 
	#_WINT_T


	)

61 
	twöt_t
;

65 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
deföed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twöt_t
;

69 
	g__END_NAMESPACE_STD


74 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #i‡(
deföed
 
_WCHAR_H
 || deföed 
__√ed_mb°©e_t
Ë&& !deföed 
____mb°©e_t_deföed


80 
	#____mb°©e_t_deföed
 1

	)

84 
	m__cou¡
;

87 #ifde‡
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wöt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__vÆue
;

94 } 
	t__mb°©e_t
;

96 #unde‡
__√ed_mb°©e_t


101 #ifde‡
_WCHAR_H


103 #i‚de‡
__mb°©e_t_deföed


104 
__BEGIN_NAMESPACE_C99


106 
__mb°©e_t
 
	tmb°©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb°©e_t_deföed
 1

	)

111 #ifde‡
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb°©e_t
)

115 #i‚de‡
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #i‚de‡
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_UNIX98


128 
	~<w˘y≥.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¨_t
 *
	$wcs˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

148 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
)

149 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

152 
wch¨_t
 *
	$wc¢˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

153 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

154 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

157 
wch¨_t
 *
	$wcsˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

158 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
)

159 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

161 
wch¨_t
 *
	$wc¢ˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

162 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

163 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

166 
	$wcscmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
)

167 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

169 
	$wc¢cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

170 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

171 
__END_NAMESPACE_STD


173 #ifde‡
__USE_XOPEN2K8


175 
	$wcsˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

178 
	$wc¢ˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

179 
size_t
 
__n
Ë
__THROW
;

183 
	~<xloˇÀ.h
>

185 
	$wcsˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

186 
__loˇÀ_t
 
__loc
Ë
__THROW
;

188 
	$wc¢ˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

189 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

192 
__BEGIN_NAMESPACE_STD


195 
	$wcscﬁl
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

199 
size_t
 
	$wcsx‰m
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

200 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

201 
__END_NAMESPACE_STD


203 #ifde‡
__USE_XOPEN2K8


209 
	$wcscﬁl_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

210 
__loˇÀ_t
 
__loc
Ë
__THROW
;

215 
size_t
 
	$wcsx‰m_l
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

216 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

219 
wch¨_t
 *
	$wcsdup
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_mÆloc__
;

222 
__BEGIN_NAMESPACE_STD


224 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


225 "C++" 
wch¨_t
 *
	$wcschr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

226 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

227 "C++" c⁄° 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

228 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

230 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

231 
__THROW
 
__©åibuã_puª__
;

234 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


235 "C++" 
wch¨_t
 *
	$wc§chr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

236 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

237 "C++" c⁄° 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

238 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

240 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

241 
__THROW
 
__©åibuã_puª__
;

243 
__END_NAMESPACE_STD


245 #ifde‡
__USE_GNU


248 
wch¨_t
 *
	$wcsch∫ul
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__wc
)

249 
__THROW
 
__©åibuã_puª__
;

252 
__BEGIN_NAMESPACE_STD


255 
size_t
 
	$wcsc•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ªje˘
)

256 
__THROW
 
__©åibuã_puª__
;

259 
size_t
 
	$wcs•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

260 
__THROW
 
__©åibuã_puª__
;

262 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


263 "C++" 
wch¨_t
 *
	$wc•brk
 (
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

264 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

265 "C++" c⁄° 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
,

266 c⁄° 
wch¨_t
 *
__ac˚±
)

267 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

269 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

270 
__THROW
 
__©åibuã_puª__
;

273 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


274 "C++" 
wch¨_t
 *
	$wcs°r
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

275 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

276 "C++" c⁄° 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
,

277 c⁄° 
wch¨_t
 *
__√edÀ
)

278 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

280 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

281 
__THROW
 
__©åibuã_puª__
;

285 
wch¨_t
 *
	$wc°ok
 (
wch¨_t
 *
__ª°ri˘
 
__s
,

286 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__dñim
,

287 
wch¨_t
 **
__ª°ri˘
 
__±r
Ë
__THROW
;

290 
size_t
 
	$wc¶í
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_puª__
;

291 
__END_NAMESPACE_STD


293 #ifde‡
__USE_XOPEN


295 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


296 "C++" 
wch¨_t
 *
	$wcswcs
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

297 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

298 "C++" c⁄° 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
,

299 c⁄° 
wch¨_t
 *
__√edÀ
)

300 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

302 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

303 
__THROW
 
__©åibuã_puª__
;

307 #ifde‡
__USE_XOPEN2K8


309 
size_t
 
	$wc¢Àn
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__maxÀn
)

310 
__THROW
 
__©åibuã_puª__
;

314 
__BEGIN_NAMESPACE_STD


316 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


317 "C++" 
wch¨_t
 *
	$wmemchr
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

319 "C++" c⁄° 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
,

320 
size_t
 
__n
)

321 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

323 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

324 
__THROW
 
__©åibuã_puª__
;

328 
	$wmemcmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

329 
__THROW
 
__©åibuã_puª__
;

332 
wch¨_t
 *
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

333 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

337 
wch¨_t
 *
	$wmemmove
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

338 
__THROW
;

341 
wch¨_t
 *
	$wmem£t
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
Ë
__THROW
;

342 
__END_NAMESPACE_STD


344 #ifde‡
__USE_GNU


347 
wch¨_t
 *
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

348 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
)

349 
__THROW
;

353 
__BEGIN_NAMESPACE_STD


356 
wöt_t
 
	$btowc
 (
__c
Ë
__THROW
;

360 
	$w˘ob
 (
wöt_t
 
__c
Ë
__THROW
;

364 
	$mbsöô
 (c⁄° 
mb°©e_t
 *
__ps
Ë
__THROW
 
__©åibuã_puª__
;

368 
size_t
 
	$mbπowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

369 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

370 
mb°©e_t
 *
__ª°ri˘
 
__p
Ë
__THROW
;

373 
size_t
 
	$w¸tomb
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wc
,

374 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

377 
size_t
 
	$__mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

378 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

379 
size_t
 
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

380 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

381 
__END_NAMESPACE_STD


383 #ifde‡
__USE_EXTERN_INLINES


389 
wöt_t
 
	$__btowc_Æüs
 (
__c
Ë
	`__asm
 ("btowc");

390 
__exã∫_ölöe
 
wöt_t


391 
	`__NTH
 (
	$btowc
 (
__c
))

392 {  (
	`__buûtö_c⁄°™t_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

393 ? (
wöt_t
Ë
__c
 : 
	`__btowc_Æüs
 (__c)); 
	}
}

395 
	$__w˘ob_Æüs
 (
wöt_t
 
__c
Ë
	`__asm
 ("wctob");

396 
__exã∫_ölöe
 

397 
	`__NTH
 (
	$w˘ob
 (
wöt_t
 
__wc
))

398 {  (
	`__buûtö_c⁄°™t_p
 (
__wc
Ë&& __w¯>
L
'\0' && __wc <= L'\x7f'

399 ? (Ë
__wc
 : 
	`__w˘ob_Æüs
 (__wc)); 
	}
}

401 
__exã∫_ölöe
 
size_t


402 
__NTH
 (
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

403 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

404 {  (
__ps
 !
NULL


405 ? 
	`mbπowc
 (
NULL
, 
__s
, 
__n
, 
__ps
Ë: 
	`__mbæí
 (__s, __n, NULL)); 
	}
}

408 
__BEGIN_NAMESPACE_STD


411 
size_t
 
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

412 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

413 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

417 
size_t
 
	$wc§tombs
 (*
__ª°ri˘
 
__d°
,

418 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

419 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

420 
__END_NAMESPACE_STD


423 #ifdef 
__USE_XOPEN2K8


426 
size_t
 
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

427 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

428 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

432 
size_t
 
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
,

433 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

434 
size_t
 
__nwc
, size_à
__Àn
,

435 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

440 #ifde‡
__USE_XOPEN


442 
	$wcwidth
 (
wch¨_t
 
__c
Ë
__THROW
;

446 
	$wcswidth
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__n
Ë
__THROW
;

450 
__BEGIN_NAMESPACE_STD


453 
	$wc°od
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

454 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

455 
__END_NAMESPACE_STD


457 #ifde‡
__USE_ISOC99


458 
__BEGIN_NAMESPACE_C99


460 
	$wc°of
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

461 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

462 
	$wc°ﬁd
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

463 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

464 
__END_NAMESPACE_C99


468 
__BEGIN_NAMESPACE_STD


471 
	$wc°ﬁ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

472 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

476 
	$wc°oul
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

477 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

478 
__THROW
;

479 
__END_NAMESPACE_STD


481 #ifde‡
__USE_ISOC99


482 
__BEGIN_NAMESPACE_C99


485 
__exãnsi⁄__


486 
	$wc°ﬁl
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

487 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

488 
__THROW
;

492 
__exãnsi⁄__


493 
	$wc°ouŒ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

494 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

495 
__ba£
Ë
__THROW
;

496 
__END_NAMESPACE_C99


499 #ifde‡
__USE_GNU


502 
__exãnsi⁄__


503 
	$wc°oq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

504 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

505 
__THROW
;

509 
__exãnsi⁄__


510 
	$wc°ouq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

511 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

512 
__ba£
Ë
__THROW
;

515 #ifde‡
__USE_GNU


529 
	~<xloˇÀ.h
>

533 
	$wc°ﬁ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

534 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

535 
__loˇÀ_t
 
__loc
Ë
__THROW
;

537 
	$wc°oul_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

538 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

539 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

541 
__exãnsi⁄__


542 
	$wc°ﬁl_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

543 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

544 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

546 
__exãnsi⁄__


547 
	$wc°ouŒ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

548 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

549 
__ba£
, 
__loˇÀ_t
 
__loc
)

550 
__THROW
;

552 
	$wc°od_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

553 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

554 
__THROW
;

556 
	$wc°of_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

557 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

558 
__THROW
;

560 
	$wc°ﬁd_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

561 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

562 
__loˇÀ_t
 
__loc
Ë
__THROW
;

566 #ifde‡
__USE_XOPEN2K8


569 
wch¨_t
 *
	$w˝˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

570 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

574 
wch¨_t
 *
	$w˝n˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

575 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

576 
__THROW
;

583 
__FILE
 *
	$›í_wmem°ªam
 (
wch¨_t
 **
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
;

586 #i‡
deföed
 
__USE_ISOC95
 || deföed 
__USE_UNIX98


587 
__BEGIN_NAMESPACE_STD


590 
	$fwide
 (
__FILE
 *
__Â
, 
__mode
Ë
__THROW
;

597 
	`fw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

598 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

604 
	`w¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

607 
	$sw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

608 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

609 
__THROW
 ;

615 
	`vfw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__s
,

616 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

617 
__gnuc_va_li°
 
__¨g
)

623 
	`vw¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

624 
__gnuc_va_li°
 
__¨g
)

628 
	$vsw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

629 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

630 
__gnuc_va_li°
 
__¨g
)

631 
__THROW
 ;

638 
	`fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

639 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

645 
	`wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

648 
	$swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

649 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

650 
__THROW
 ;

652 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

653 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

654 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

655 #ifde‡
__REDIRECT


659 
	`__REDIRECT
 (
fwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__°ªam
,

660 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

661 
__isoc99_fwsˇnf
)

663 
	`__REDIRECT
 (
wsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

664 
__isoc99_wsˇnf
)

666 
	`__REDIRECT_NTH
 (
swsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

667 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

668 ...), 
__isoc99_swsˇnf
)

671 
	`__isoc99_fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

672 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

673 
	`__isoc99_wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

674 
	$__isoc99_swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

675 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

676 
__THROW
;

677 
	#fwsˇnf
 
__isoc99_fwsˇnf


	)

678 
	#wsˇnf
 
__isoc99_wsˇnf


	)

679 
	#swsˇnf
 
__isoc99_swsˇnf


	)

683 
__END_NAMESPACE_STD


686 #ifde‡
__USE_ISOC99


687 
__BEGIN_NAMESPACE_C99


692 
	`vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

693 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

694 
__gnuc_va_li°
 
__¨g
)

700 
	`vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

701 
__gnuc_va_li°
 
__¨g
)

704 
	$vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

705 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

706 
__gnuc_va_li°
 
__¨g
)

707 
__THROW
 ;

709 #i‡!
deföed
 
__USE_GNU
 \

710 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

711 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

712 #ifde‡
__REDIRECT


713 
	`__REDIRECT
 (
vfwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__s
,

714 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

715 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vfwsˇnf
)

717 
	`__REDIRECT
 (
vwsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

718 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vwsˇnf
)

720 
	`__REDIRECT_NTH
 (
vswsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

721 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

722 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vswsˇnf
)

725 
	`__isoc99_vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

726 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

727 
__gnuc_va_li°
 
__¨g
);

728 
	`__isoc99_vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

729 
__gnuc_va_li°
 
__¨g
);

730 
	$__isoc99_vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

731 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

732 
__gnuc_va_li°
 
__¨g
Ë
__THROW
;

733 
	#vfwsˇnf
 
__isoc99_vfwsˇnf


	)

734 
	#vwsˇnf
 
__isoc99_vwsˇnf


	)

735 
	#vswsˇnf
 
__isoc99_vswsˇnf


	)

739 
__END_NAMESPACE_C99


743 
__BEGIN_NAMESPACE_STD


748 
wöt_t
 
	`fgëwc
 (
__FILE
 *
__°ªam
);

749 
wöt_t
 
	`gëwc
 (
__FILE
 *
__°ªam
);

755 
wöt_t
 
	`gëwch¨
 ();

762 
wöt_t
 
	`Âutwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

763 
wöt_t
 
	`putwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

769 
wöt_t
 
	`putwch¨
 (
wch¨_t
 
__wc
);

777 
wch¨_t
 *
	`fgëws
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

778 
__FILE
 *
__ª°ri˘
 
__°ªam
);

784 
	`Âutws
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

785 
__FILE
 *
__ª°ri˘
 
__°ªam
);

792 
wöt_t
 
	`ungëwc
 (wöt_à
__wc
, 
__FILE
 *
__°ªam
);

793 
__END_NAMESPACE_STD


796 #ifde‡
__USE_GNU


804 
wöt_t
 
	`gëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

805 
wöt_t
 
	`gëwch¨_u∆ocked
 ();

813 
wöt_t
 
	`fgëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

821 
wöt_t
 
	`Âutwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

830 
wöt_t
 
	`putwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

831 
wöt_t
 
	`putwch¨_u∆ocked
 (
wch¨_t
 
__wc
);

840 
wch¨_t
 *
	`fgëws_u∆ocked
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

841 
__FILE
 *
__ª°ri˘
 
__°ªam
);

849 
	`Âutws_u∆ocked
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

850 
__FILE
 *
__ª°ri˘
 
__°ªam
);

854 
__BEGIN_NAMESPACE_C99


858 
size_t
 
	$wcs·ime
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

859 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

860 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

861 
__END_NAMESPACE_C99


863 #ifde‡
__USE_GNU


864 
	~<xloˇÀ.h
>

868 
size_t
 
	$wcs·ime_l
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

869 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

870 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

871 
__loˇÀ_t
 
__loc
Ë
__THROW
;

880 #i‡
deföed
 
__USE_UNIX98
 && !deföed 
__USE_GNU


881 
	#__√ed_iswxxx


	)

882 
	~<w˘y≥.h
>

886 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


887 
	~<bôs/wch¨2.h
>

890 #ifde‡
__LDBL_COMPAT


891 
	~<bôs/wch¨-ldbl.h
>

894 
__END_DECLS


902 #unde‡
__√ed_mb°©e_t


903 #unde‡
__√ed_wöt_t


	@/usr/include/endian.h

18 #i‚def 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<„©uªs.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<bôs/ídün.h
>

40 #i‚de‡
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_MISC


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËLO, 
	)
HI

53 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËHI, 
	)
LO

58 #i‡
deföed
 
__USE_MISC
 && !deföed 
__ASSEMBLER__


60 
	~<bôs/byãsw≠.h
>

62 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


63 
	#htobe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

64 
	#htﬁe16
(
x
Ë(x)

	)

65 
	#be16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

66 
	#À16toh
(
x
Ë(x)

	)

68 
	#htobe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

69 
	#htﬁe32
(
x
Ë(x)

	)

70 
	#be32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

71 
	#À32toh
(
x
Ë(x)

	)

73 
	#htobe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

74 
	#htﬁe64
(
x
Ë(x)

	)

75 
	#be64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

76 
	#À64toh
(
x
Ë(x)

	)

79 
	#htobe16
(
x
Ë(x)

	)

80 
	#htﬁe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

81 
	#be16toh
(
x
Ë(x)

	)

82 
	#À16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

84 
	#htobe32
(
x
Ë(x)

	)

85 
	#htﬁe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

86 
	#be32toh
(
x
Ë(x)

	)

87 
	#À32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

89 
	#htobe64
(
x
Ë(x)

	)

90 
	#htﬁe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

91 
	#be64toh
(
x
Ë(x)

	)

92 
	#À64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

	@/usr/include/features.h

18 #i‚def 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

97 #unde‡
__USE_ISOC11


98 #unde‡
__USE_ISOC99


99 #unde‡
__USE_ISOC95


100 #unde‡
__USE_ISOCXX11


101 #unde‡
__USE_POSIX


102 #unde‡
__USE_POSIX2


103 #unde‡
__USE_POSIX199309


104 #unde‡
__USE_POSIX199506


105 #unde‡
__USE_XOPEN


106 #unde‡
__USE_XOPEN_EXTENDED


107 #unde‡
__USE_UNIX98


108 #unde‡
__USE_XOPEN2K


109 #unde‡
__USE_XOPEN2KXSI


110 #unde‡
__USE_XOPEN2K8


111 #unde‡
__USE_XOPEN2K8XSI


112 #unde‡
__USE_LARGEFILE


113 #unde‡
__USE_LARGEFILE64


114 #unde‡
__USE_FILE_OFFSET64


115 #unde‡
__USE_MISC


116 #unde‡
__USE_ATFILE


117 #unde‡
__USE_GNU


118 #unde‡
__USE_REENTRANT


119 #unde‡
__USE_FORTIFY_LEVEL


120 #unde‡
__KERNEL_STRICT_NAMES


124 #i‚de‡
_LOOSE_KERNEL_NAMES


125 
	#__KERNEL_STRICT_NAMES


	)

135 #i‡
deföed
 
__GNUC__
 && deföed 
__GNUC_MINOR__


136 
	#__GNUC_PREREQ
(
maj
, 
mö
) \

137 ((
__GNUC__
 << 16Ë+ 
__GNUC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

139 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë0

	)

146 #i‡(
deföed
 
_BSD_SOURCE
 || deföed 
_SVID_SOURCE
) \

147 && !
deföed
 
	g_DEFAULT_SOURCE


152 #unde‡
_DEFAULT_SOURCE


153 
	#_DEFAULT_SOURCE
 1

	)

157 #ifde‡
_GNU_SOURCE


158 #unde‡
_ISOC95_SOURCE


159 
	#_ISOC95_SOURCE
 1

	)

160 #unde‡
_ISOC99_SOURCE


161 
	#_ISOC99_SOURCE
 1

	)

162 #unde‡
_ISOC11_SOURCE


163 
	#_ISOC11_SOURCE
 1

	)

164 #unde‡
_POSIX_SOURCE


165 
	#_POSIX_SOURCE
 1

	)

166 #unde‡
_POSIX_C_SOURCE


167 
	#_POSIX_C_SOURCE
 200809L

	)

168 #unde‡
_XOPEN_SOURCE


169 
	#_XOPEN_SOURCE
 700

	)

170 #unde‡
_XOPEN_SOURCE_EXTENDED


171 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

172 #unde‡
_LARGEFILE64_SOURCE


173 
	#_LARGEFILE64_SOURCE
 1

	)

174 #unde‡
_DEFAULT_SOURCE


175 
	#_DEFAULT_SOURCE
 1

	)

176 #unde‡
_ATFILE_SOURCE


177 
	#_ATFILE_SOURCE
 1

	)

182 #i‡(
deföed
 
_DEFAULT_SOURCE
 \

183 || (!
deföed
 
	g__STRICT_ANSI__
 \

184 && !
deföed
 
	g_ISOC99_SOURCE
 \

185 && !
deföed
 
	g_POSIX_SOURCE
 && !deföed 
	g_POSIX_C_SOURCE
 \

186 && !
deföed
 
	g_XOPEN_SOURCE
))

187 #unde‡
_DEFAULT_SOURCE


188 
	#_DEFAULT_SOURCE
 1

	)

192 #i‡(
deföed
 
_ISOC11_SOURCE
 \

193 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

194 
	#__USE_ISOC11
 1

	)

198 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

199 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

200 
	#__USE_ISOC99
 1

	)

204 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

205 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

206 
	#__USE_ISOC95
 1

	)

213 #i‡((
deföed
 
__˝lu•lus
 && __cplusplus >= 201103L) \

214 || 
deföed
 
__GXX_EXPERIMENTAL_CXX0X__
)

215 
	#__USE_ISOCXX11
 1

	)

221 #ifde‡
_DEFAULT_SOURCE


222 #i‡!
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE


223 
	#__USE_POSIX_IMPLICITLY
 1

	)

225 #unde‡
_POSIX_SOURCE


226 
	#_POSIX_SOURCE
 1

	)

227 #unde‡
_POSIX_C_SOURCE


228 
	#_POSIX_C_SOURCE
 200809L

	)

230 #i‡((!
deföed
 
__STRICT_ANSI__
 \

231 || (
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

232 && !
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE
)

233 
	#_POSIX_SOURCE
 1

	)

234 #i‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

235 
	#_POSIX_C_SOURCE
 2

	)

236 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

237 
	#_POSIX_C_SOURCE
 199506L

	)

238 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

239 
	#_POSIX_C_SOURCE
 200112L

	)

241 
	#_POSIX_C_SOURCE
 200809L

	)

243 
	#__USE_POSIX_IMPLICITLY
 1

	)

246 #i‡(
deföed
 
_POSIX_SOURCE
 \

247 || (
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

248 || 
deföed
 
_XOPEN_SOURCE
)

249 
	#__USE_POSIX
 1

	)

252 #i‡
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >2 || deföed 
_XOPEN_SOURCE


253 
	#__USE_POSIX2
 1

	)

256 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

257 
	#__USE_POSIX199309
 1

	)

260 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

261 
	#__USE_POSIX199506
 1

	)

264 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

265 
	#__USE_XOPEN2K
 1

	)

266 #unde‡
__USE_ISOC95


267 
	#__USE_ISOC95
 1

	)

268 #unde‡
__USE_ISOC99


269 
	#__USE_ISOC99
 1

	)

272 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

273 
	#__USE_XOPEN2K8
 1

	)

274 #unde‡
_ATFILE_SOURCE


275 
	#_ATFILE_SOURCE
 1

	)

278 #ifdef 
_XOPEN_SOURCE


279 
	#__USE_XOPEN
 1

	)

280 #i‡(
_XOPEN_SOURCE
 - 0) >= 500

281 
	#__USE_XOPEN_EXTENDED
 1

	)

282 
	#__USE_UNIX98
 1

	)

283 #unde‡
_LARGEFILE_SOURCE


284 
	#_LARGEFILE_SOURCE
 1

	)

285 #i‡(
_XOPEN_SOURCE
 - 0) >= 600

286 #i‡(
_XOPEN_SOURCE
 - 0) >= 700

287 
	#__USE_XOPEN2K8
 1

	)

288 
	#__USE_XOPEN2K8XSI
 1

	)

290 
	#__USE_XOPEN2K
 1

	)

291 
	#__USE_XOPEN2KXSI
 1

	)

292 #unde‡
__USE_ISOC95


293 
	#__USE_ISOC95
 1

	)

294 #unde‡
__USE_ISOC99


295 
	#__USE_ISOC99
 1

	)

298 #ifde‡
_XOPEN_SOURCE_EXTENDED


299 
	#__USE_XOPEN_EXTENDED
 1

	)

304 #ifde‡
_LARGEFILE_SOURCE


305 
	#__USE_LARGEFILE
 1

	)

308 #ifde‡
_LARGEFILE64_SOURCE


309 
	#__USE_LARGEFILE64
 1

	)

312 #i‡
deföed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

313 
	#__USE_FILE_OFFSET64
 1

	)

316 #i‡
deföed
 
_DEFAULT_SOURCE


317 
	#__USE_MISC
 1

	)

320 #ifdef 
_ATFILE_SOURCE


321 
	#__USE_ATFILE
 1

	)

324 #ifdef 
_GNU_SOURCE


325 
	#__USE_GNU
 1

	)

328 #i‡
deföed
 
_REENTRANT
 || deföed 
_THREAD_SAFE


329 
	#__USE_REENTRANT
 1

	)

332 #i‡
deföed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

333 && 
__GNUC_PREREQ
 (4, 1Ë&& 
deföed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

334 #i‡
_FORTIFY_SOURCE
 > 1

335 
	#__USE_FORTIFY_LEVEL
 2

	)

337 
	#__USE_FORTIFY_LEVEL
 1

	)

340 
	#__USE_FORTIFY_LEVEL
 0

	)

345 
	~<°dc-¥edef.h
>

353 #unde‡
__GNU_LIBRARY__


354 
	#__GNU_LIBRARY__
 6

	)

358 
	#__GLIBC__
 2

	)

359 
	#__GLIBC_MINOR__
 23

	)

361 
	#__GLIBC_PREREQ
(
maj
, 
mö
) \

362 ((
__GLIBC__
 << 16Ë+ 
__GLIBC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

365 #i‚de‡
__ASSEMBLER__


366 #i‚de‡
_SYS_CDEFS_H


367 
	~<sys/cdefs.h
>

372 #i‡
deföed
 
__USE_FILE_OFFSET64
 && !deföed 
__REDIRECT


373 
	#__USE_LARGEFILE
 1

	)

374 
	#__USE_LARGEFILE64
 1

	)

380 #i‡
__GNUC_PREREQ
 (2, 7Ë&& 
deföed
 
__OPTIMIZE__
 \

381 && !
deföed
 
	g__OPTIMIZE_SIZE__
 && !deföed 
	g__NO_INLINE__
 \

382 && 
deföed
 
	g__exã∫_ölöe


383 
	#__USE_EXTERN_INLINES
 1

	)

391 
	~<gnu/°ubs.h
>

	@/usr/include/getopt.h

19 #i‚de‡
_GETOPT_H


21 #i‚de‡
__√ed_gë›t


22 
	#_GETOPT_H
 1

	)

32 #i‡!
deföed
 
__GNU_LIBRARY__


33 
	~<˘y≥.h
>

36 #i‚de‡
__THROW


37 #i‚de‡
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë(0)

	)

40 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__˝lu•lus


57 *
›èrg
;

71 
›töd
;

76 
›ãº
;

80 
›t›t
;

82 #i‚de‡
__√ed_gë›t


104 
	s›ti⁄


106 c⁄° *
	g«me
;

109 
	ghas_¨g
;

110 *
	gÊag
;

111 
	gvÆ
;

116 
	#no_¨gumít
 0

	)

117 
	#ªquúed_¨gumít
 1

	)

118 
	#›ti⁄Æ_¨gumít
 2

	)

146 #ifde‡
__GNU_LIBRARY__


150 
gë›t
 (
___¨gc
, *c⁄° *
___¨gv
, c⁄° *
__sh‹t›ts
)

151 
__THROW
;

153 #i‡
deföed
 
__√ed_gë›t
 && deföed 
__USE_POSIX2
 \

154 && !
deföed
 
	g__USE_POSIX_IMPLICITLY
 && !deföed 
	g__USE_GNU


158 #ifde‡
__REDIRECT


159 
__REDIRECT_NTH
 (
gë›t
, (
___¨gc
, *c⁄° *
___¨gv
,

160 c⁄° *
__sh‹t›ts
),

161 
__posix_gë›t
);

163 
__posix_gë›t
 (
___¨gc
, *c⁄° *
___¨gv
,

164 c⁄° *
__sh‹t›ts
Ë
__THROW
;

165 
	#gë›t
 
__posix_gë›t


	)

169 
gë›t
 ();

172 #i‚de‡
__√ed_gë›t


173 
gë›t_l⁄g
 (
___¨gc
, *c⁄° *
___¨gv
,

174 c⁄° *
__sh‹t›ts
,

175 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

176 
__THROW
;

177 
gë›t_l⁄g_⁄ly
 (
___¨gc
, *c⁄° *
___¨gv
,

178 c⁄° *
__sh‹t›ts
,

179 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

180 
__THROW
;

184 #ifdef 
__˝lu•lus


189 #unde‡
__√ed_gë›t


	@/usr/include/libio.h

28 #i‚de‡
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_c⁄fig.h
>

33 
	#_IO_Âos_t
 
_G_Âos_t


	)

34 
	#_IO_Âos64_t
 
_G_Âos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_ic⁄v_t
 
_G_ic⁄v_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li°
 
_G_va_li°


	)

45 
	#_IO_wöt_t
 
wöt_t


	)

48 
	#__√ed___va_li°


	)

49 
	~<°d¨g.h
>

50 #ifde‡
__GNUC_VA_LIST


51 #unde‡
_IO_va_li°


52 
	#_IO_va_li°
 
__gnuc_va_li°


	)

55 #i‚de‡
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #i‚de‡
EOF


62 
	#EOF
 (-1)

	)

64 #i‚de‡
NULL


65 #i‡
deföed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuŒ
)

	)

69 #i‡!
deföed
(
__˝lu•lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifde‡
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifde‡
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifde‡
_IO_MTSAFE_IO


150 
	t_IO_lock_t
;

156 
	s_IO_m¨kî
 {

157 
_IO_m¨kî
 *
	m_√xt
;

158 
_IO_FILE
 *
	m_sbuf
;

162 
	m_pos
;

164 
£t_°ªampos
(
°ªampos
 
•
Ë{ 
	m_•os
 = sp; }

165 
£t_off£t
(
off£t
Ë{ 
	m_pos
 = off£t; 
	m_•os
 = (
°ªampos
)(-2); }

166 
	mpublic
:

167 
°ªamm¨kî
(
°ªambuf
 *
sb
);

168 ~
°ªamm¨kî
();

169 
ßvög
(Ë{  
	m_•os
 == -2; }

170 
dñè
(
°ªamm¨kî
&);

171 
dñè
();

176 
	e__codecvt_ªsu…


178 
	m__codecvt_ok
,

179 
	m__codecvt_∑πül
,

180 
	m__codecvt_îr‹
,

181 
	m__codecvt_noc⁄v


184 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


187 
	s_IO_codecvt


189 (*
	m__codecvt_de°r
Ë(
	m_IO_codecvt
 *);

190 
__codecvt_ªsu…
 (*
__codecvt_do_out
Ë(
	m_IO_codecvt
 *,

191 
	m__mb°©e_t
 *,

192 c⁄° 
	mwch¨_t
 *,

193 c⁄° 
	mwch¨_t
 *,

194 c⁄° 
	mwch¨_t
 **, *,

196 
__codecvt_ªsu…
 (*
__codecvt_do_unshi·
Ë(
	m_IO_codecvt
 *,

197 
	m__mb°©e_t
 *, *,

199 
__codecvt_ªsu…
 (*
__codecvt_do_ö
Ë(
	m_IO_codecvt
 *,

200 
	m__mb°©e_t
 *,

202 c⁄° **, 
	mwch¨_t
 *,

203 
	mwch¨_t
 *, wchar_t **);

204 (*
	m__codecvt_do_ícodög
Ë(
	m_IO_codecvt
 *);

205 (*
	m__codecvt_do_Æways_noc⁄v
Ë(
	m_IO_codecvt
 *);

206 (*
	m__codecvt_do_Àngth
Ë(
	m_IO_codecvt
 *, 
	m__mb°©e_t
 *,

207 c⁄° *, c⁄° *, 
	m_IO_size_t
);

208 (*
	m__codecvt_do_max_Àngth
Ë(
	m_IO_codecvt
 *);

210 
_IO_ic⁄v_t
 
	m__cd_ö
;

211 
_IO_ic⁄v_t
 
	m__cd_out
;

215 
	s_IO_wide_d©a


217 
wch¨_t
 *
	m_IO_ªad_±r
;

218 
wch¨_t
 *
	m_IO_ªad_íd
;

219 
wch¨_t
 *
	m_IO_ªad_ba£
;

220 
wch¨_t
 *
	m_IO_wrôe_ba£
;

221 
wch¨_t
 *
	m_IO_wrôe_±r
;

222 
wch¨_t
 *
	m_IO_wrôe_íd
;

223 
wch¨_t
 *
	m_IO_buf_ba£
;

224 
wch¨_t
 *
	m_IO_buf_íd
;

226 
wch¨_t
 *
	m_IO_ßve_ba£
;

227 
wch¨_t
 *
	m_IO_backup_ba£
;

229 
wch¨_t
 *
	m_IO_ßve_íd
;

231 
__mb°©e_t
 
	m_IO_°©e
;

232 
__mb°©e_t
 
	m_IO_œ°_°©e
;

233 
_IO_codecvt
 
	m_codecvt
;

235 
wch¨_t
 
	m_sh‹tbuf
[1];

237 c⁄° 
_IO_jump_t
 *
	m_wide_vèbÀ
;

241 
	s_IO_FILE
 {

242 
	m_Êags
;

243 
	#_IO_fûe_Êags
 
_Êags


	)

247 * 
	m_IO_ªad_±r
;

248 * 
	m_IO_ªad_íd
;

249 * 
	m_IO_ªad_ba£
;

250 * 
	m_IO_wrôe_ba£
;

251 * 
	m_IO_wrôe_±r
;

252 * 
	m_IO_wrôe_íd
;

253 * 
	m_IO_buf_ba£
;

254 * 
	m_IO_buf_íd
;

256 *
	m_IO_ßve_ba£
;

257 *
	m_IO_backup_ba£
;

258 *
	m_IO_ßve_íd
;

260 
_IO_m¨kî
 *
	m_m¨kîs
;

262 
_IO_FILE
 *
	m_chaö
;

264 
	m_fûío
;

266 
	m_blksize
;

268 
	m_Êags2
;

270 
_IO_off_t
 
	m_ﬁd_off£t
;

272 
	#__HAVE_COLUMN


	)

274 
	m_cur_cﬁumn
;

275 sig√d 
	m_vèbÀ_off£t
;

276 
	m_sh‹tbuf
[1];

280 
_IO_lock_t
 *
	m_lock
;

281 #ifde‡
_IO_USE_OLD_IO_FILE


284 
	s_IO_FILE_com∂ëe


286 
_IO_FILE
 
	m_fûe
;

288 #i‡
deföed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

289 
_IO_off64_t
 
	m_off£t
;

290 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


292 
_IO_codecvt
 *
	m_codecvt
;

293 
_IO_wide_d©a
 *
	m_wide_d©a
;

294 
_IO_FILE
 *
	m_‰ìªs_li°
;

295 *
	m_‰ìªs_buf
;

297 *
	m__∑d1
;

298 *
	m__∑d2
;

299 *
	m__∑d3
;

300 *
	m__∑d4
;

302 
size_t
 
	m__∑d5
;

303 
	m_mode
;

305 
	m_unu£d2
[15 *  (Ë- 4 *  (*Ë-  (
size_t
)];

309 #i‚de‡
__˝lu•lus


310 
_IO_FILE
 
	t_IO_FILE
;

313 
	g_IO_FILE_∂us
;

315 
_IO_FILE_∂us
 
_IO_2_1_°dö_
;

316 
_IO_FILE_∂us
 
_IO_2_1_°dout_
;

317 
_IO_FILE_∂us
 
_IO_2_1_°dîr_
;

318 #i‚de‡
_LIBC


319 
	#_IO_°dö
 ((
_IO_FILE
*)(&
_IO_2_1_°dö_
))

	)

320 
	#_IO_°dout
 ((
_IO_FILE
*)(&
_IO_2_1_°dout_
))

	)

321 
	#_IO_°dîr
 ((
_IO_FILE
*)(&
_IO_2_1_°dîr_
))

	)

323 
_IO_FILE
 *
_IO_°dö
 
©åibuã_hiddí
;

324 
_IO_FILE
 *
_IO_°dout
 
©åibuã_hiddí
;

325 
_IO_FILE
 *
_IO_°dîr
 
©åibuã_hiddí
;

333 
__ssize_t
 
	t__io_ªad_‚
 (*
	t__cookõ
, *
	t__buf
, 
	tsize_t
 
	t__nbyãs
);

341 
__ssize_t
 
	t__io_wrôe_‚
 (*
	t__cookõ
, c⁄° *
	t__buf
,

342 
	tsize_t
 
	t__n
);

350 
	t__io_£ek_‚
 (*
	t__cookõ
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

353 
	t__io_˛o£_‚
 (*
	t__cookõ
);

356 #ifde‡
_GNU_SOURCE


358 
__io_ªad_‚
 
	tcookõ_ªad_fun˘i⁄_t
;

359 
__io_wrôe_‚
 
	tcookõ_wrôe_fun˘i⁄_t
;

360 
__io_£ek_‚
 
	tcookõ_£ek_fun˘i⁄_t
;

361 
__io_˛o£_‚
 
	tcookõ_˛o£_fun˘i⁄_t
;

366 
__io_ªad_‚
 *
	mªad
;

367 
__io_wrôe_‚
 *
	mwrôe
;

368 
__io_£ek_‚
 *
	m£ek
;

369 
__io_˛o£_‚
 *
	m˛o£
;

370 } 
	t_IO_cookõ_io_fun˘i⁄s_t
;

371 
_IO_cookõ_io_fun˘i⁄s_t
 
	tcookõ_io_fun˘i⁄s_t
;

373 
	g_IO_cookõ_fûe
;

376 
_IO_cookõ_öô
 (
_IO_cookõ_fûe
 *
__cfûe
, 
__ªad_wrôe
,

377 *
__cookõ
, 
_IO_cookõ_io_fun˘i⁄s_t
 
__‚s
);

381 #ifde‡
__˝lu•lus


385 
__undîÊow
 (
_IO_FILE
 *);

386 
__uÊow
 (
_IO_FILE
 *);

387 
__ovîÊow
 (
_IO_FILE
 *, );

388 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


389 
_IO_wöt_t
 
__wundîÊow
 (
_IO_FILE
 *);

390 
_IO_wöt_t
 
__wuÊow
 (
_IO_FILE
 *);

391 
_IO_wöt_t
 
__wovîÊow
 (
_IO_FILE
 *, _IO_wint_t);

394 #i‡ 
__GNUC__
 >= 3

395 
	#_IO_BE
(
ex¥
, 
ªs
Ë
	`__buûtö_ex≥˘
 (”x¥),Ñes)

	)

397 
	#_IO_BE
(
ex¥
, 
ªs
Ë”x¥)

	)

400 
	#_IO_gëc_u∆ocked
(
_Â
) \

401 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

402 ? 
	`__uÊow
 (
_Â
Ë: *(*Ë(_Â)->
_IO_ªad_±r
++)

	)

403 
	#_IO_≥ekc_u∆ocked
(
_Â
) \

404 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

405 && 
	`__undîÊow
 (
_Â
Ë=
EOF
 ? EOF \

406 : *(*Ë(
_Â
)->
_IO_ªad_±r
)

	)

407 
	#_IO_putc_u∆ocked
(
_ch
, 
_Â
) \

408 (
	`_IO_BE
 ((
_Â
)->
_IO_wrôe_±r
 >(_Â)->
_IO_wrôe_íd
, 0) \

409 ? 
	`__ovîÊow
 (
_Â
, (Ë(
_ch
)) \

410 : (Ë(*(
_Â
)->
_IO_wrôe_±r
++ = (
_ch
)))

	)

412 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


413 
	#_IO_gëwc_u∆ocked
(
_Â
) \

414 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

415 || ((
_Â
)->
_wide_d©a
->
_IO_ªad_±r
 \

416 >(
_Â
)->
_wide_d©a
->
_IO_ªad_íd
), 0) \

417 ? 
	`__wuÊow
 (
_Â
Ë: (
_IO_wöt_t
Ë*(_Â)->
_wide_d©a
->
_IO_ªad_±r
++)

	)

418 
	#_IO_putwc_u∆ocked
(
_wch
, 
_Â
) \

419 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

420 || ((
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
 \

421 >(
_Â
)->
_wide_d©a
->
_IO_wrôe_íd
), 0) \

422 ? 
	`__wovîÊow
 (
_Â
, 
_wch
) \

423 : (
_IO_wöt_t
Ë(*(
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
++ = (
_wch
)))

	)

426 
	#_IO_„of_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_EOF_SEEN
Ë!0)

	)

427 
	#_IO_„º‹_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_ERR_SEEN
Ë!0)

	)

429 
_IO_gëc
 (
_IO_FILE
 *
__Â
);

430 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__Â
);

431 
_IO_„of
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

432 
_IO_„º‹
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

434 
_IO_≥ekc_locked
 (
_IO_FILE
 *
__Â
);

437 
	#_IO_PENDING_OUTPUT_COUNT
(
_Â
) \

438 ((
_Â
)->
_IO_wrôe_±r
 - (_Â)->
_IO_wrôe_ba£
)

	)

440 
_IO_Êockfûe
 (
_IO_FILE
 *Ë
__THROW
;

441 
_IO_fu∆ockfûe
 (
_IO_FILE
 *Ë
__THROW
;

442 
_IO_·rylockfûe
 (
_IO_FILE
 *Ë
__THROW
;

444 #ifde‡
_IO_MTSAFE_IO


445 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_locked
 (_Â)

	)

446 
	#_IO_Êockfûe
(
_Â
) \

447 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_Êockfûe
 (_Â)

	)

448 
	#_IO_fu∆ockfûe
(
_Â
) \

449 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_fu∆ockfûe
 (_Â)

	)

451 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_u∆ocked
 (_Â)

	)

452 
	#_IO_Êockfûe
(
_Â
Ë

	)

453 
	#_IO_fu∆ockfûe
(
_Â
Ë

	)

454 
	#_IO_·rylockfûe
(
_Â
Ë

	)

455 
	#_IO_˛ónup_ªgi⁄_°¨t
(
_f˘
, 
_Â
Ë

	)

456 
	#_IO_˛ónup_ªgi⁄_íd
(
_Doô
Ë

	)

459 
_IO_vfsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, const * __restrict,

460 
_IO_va_li°
, *
__ª°ri˘
);

461 
_IO_vÂrötf
 (
_IO_FILE
 *
__ª°ri˘
, const *__restrict,

462 
_IO_va_li°
);

463 
_IO_ssize_t
 
_IO_∑dn
 (
_IO_FILE
 *, , _IO_ssize_t);

464 
_IO_size_t
 
_IO_sgën
 (
_IO_FILE
 *, *, _IO_size_t);

466 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

467 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

469 
_IO_‰ì_backup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

471 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


472 
_IO_wöt_t
 
_IO_gëwc
 (
_IO_FILE
 *
__Â
);

473 
_IO_wöt_t
 
_IO_putwc
 (
wch¨_t
 
__wc
, 
_IO_FILE
 *
__Â
);

474 
_IO_fwide
 (
_IO_FILE
 *
__Â
, 
__mode
Ë
__THROW
;

475 #i‡
__GNUC__
 >= 2

478 #i‡
deföed
 
_LIBC
 && deföed 
SHARED


479 
	~<shlib-com∑t.h
>

480 #i‡
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

481 
	#_IO_fwide_maybe_öcom∑tibÀ
 \

482 (
	`__buûtö_ex≥˘
 (&
_IO_°dö_u£d
 =
NULL
, 0))

	)

483 c⁄° 
_IO_°dö_u£d
;

484 
wók_exã∫
 (
_IO_°dö_u£d
);

487 #i‚de‡
_IO_fwide_maybe_öcom∑tibÀ


488 
	#_IO_fwide_maybe_öcom∑tibÀ
 (0)

	)

492 
	#_IO_fwide
(
__Â
, 
__mode
) \

493 ({ 
__ªsu…
 = (
__mode
); \

494 i‡(
__ªsu…
 < 0 && ! 
_IO_fwide_maybe_öcom∑tibÀ
) \

496 i‡((
__Â
)->
_mode
 == 0) \

498 (
__Â
)->
_mode
 = -1; \

499 
__ªsu…
 = (
__Â
)->
_mode
; \

501 i‡(
	`__buûtö_c⁄°™t_p
 (
__mode
) && (__mode) == 0) \

502 
__ªsu…
 = 
_IO_fwide_maybe_öcom∑tibÀ
 ? -1 : (
__Â
)->
_mode
; \

504 
__ªsu…
 = 
	`_IO_fwide
 (
__Â
, __result); \

505 
__ªsu…
; })

	)

508 
_IO_vfwsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, c⁄° 
wch¨_t
 * __restrict,

509 
_IO_va_li°
, *
__ª°ri˘
);

510 
_IO_vfw¥ötf
 (
_IO_FILE
 *
__ª°ri˘
, c⁄° 
wch¨_t
 *__restrict,

511 
_IO_va_li°
);

512 
_IO_ssize_t
 
_IO_w∑dn
 (
_IO_FILE
 *, 
wöt_t
, _IO_ssize_t);

513 
_IO_‰ì_wbackup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

516 #ifde‡
__LDBL_COMPAT


517 
	~<bôs/libio-ldbl.h
>

520 #ifde‡
__˝lu•lus


	@/usr/include/libunwind-x86_64.h

28 #i‚de‡
LIBUNWIND_H


29 
	#LIBUNWIND_H


	)

31 #i‡
deföed
(
__˝lu•lus
Ë|| deföed(
c_∂u•lus
)

35 
	~<sys/ty≥s.h
>

36 
	~<öây≥s.h
>

37 
	~<uc⁄ãxt.h
>

39 
	#UNW_TARGET
 
x86_64


	)

40 
	#UNW_TARGET_X86_64
 1

	)

42 
	#_U_TDEP_QP_TRUE
 0

	)

49 
	#UNW_TDEP_CURSOR_LEN
 127

	)

51 
uöt64_t
 
	tunw_w‹d_t
;

52 
öt64_t
 
	tunw_sw‹d_t
;

54 
	tunw_tdï_Âªg_t
;

58 
UNW_X86_64_RAX
,

59 
UNW_X86_64_RDX
,

60 
UNW_X86_64_RCX
,

61 
UNW_X86_64_RBX
,

62 
UNW_X86_64_RSI
,

63 
UNW_X86_64_RDI
,

64 
UNW_X86_64_RBP
,

65 
UNW_X86_64_RSP
,

66 
UNW_X86_64_R8
,

67 
UNW_X86_64_R9
,

68 
UNW_X86_64_R10
,

69 
UNW_X86_64_R11
,

70 
UNW_X86_64_R12
,

71 
UNW_X86_64_R13
,

72 
UNW_X86_64_R14
,

73 
UNW_X86_64_R15
,

74 
UNW_X86_64_RIP
,

75 #ifde‡
CONFIG_MSABI_SUPPORT


76 
UNW_X86_64_XMM0
,

77 
UNW_X86_64_XMM1
,

78 
UNW_X86_64_XMM2
,

79 
UNW_X86_64_XMM3
,

80 
UNW_X86_64_XMM4
,

81 
UNW_X86_64_XMM5
,

82 
UNW_X86_64_XMM6
,

83 
UNW_X86_64_XMM7
,

84 
UNW_X86_64_XMM8
,

85 
UNW_X86_64_XMM9
,

86 
UNW_X86_64_XMM10
,

87 
UNW_X86_64_XMM11
,

88 
UNW_X86_64_XMM12
,

89 
UNW_X86_64_XMM13
,

90 
UNW_X86_64_XMM14
,

91 
UNW_X86_64_XMM15
,

92 
UNW_TDEP_LAST_REG
 = 
UNW_X86_64_XMM15
,

94 
UNW_TDEP_LAST_REG
 = 
UNW_X86_64_RIP
,

100 
UNW_X86_64_CFA
,

102 
UNW_TDEP_IP
 = 
UNW_X86_64_RIP
,

103 
UNW_TDEP_SP
 = 
UNW_X86_64_RSP
,

104 
UNW_TDEP_BP
 = 
UNW_X86_64_RBP
,

105 
UNW_TDEP_EH
 = 
UNW_X86_64_RAX


107 
	tx86_64_ªgnum_t
;

109 
	#UNW_TDEP_NUM_EH_REGS
 2

	)

111 
	sunw_tdï_ßve_loc


115 
unw_tdï_ßve_loc_t
;

118 
uc⁄ãxt_t
 
	tunw_tdï_c⁄ãxt_t
;

124 
unw_tdï_¥oc_öfo_t
;

126 
	~"libunwöd-dy«mic.h
"

127 
	~"libunwöd-comm⁄.h
"

129 
	#unw_tdï_gëc⁄ãxt
 
	`UNW_ARCH_OBJ
(
gëc⁄ãxt
)

	)

130 
	#unw_tdï_is_Âªg
 
	`UNW_ARCH_OBJ
(
is_Âªg
)

	)

132 
unw_tdï_gëc⁄ãxt
 (
unw_tdï_c⁄ãxt_t
 *);

133 
unw_tdï_is_Âªg
 ();

135 #i‡
deföed
(
__˝lu•lus
Ë|| deföed(
c_∂u•lus
)

	@/usr/include/wctype.h

23 #i‚de‡
_WCTYPE_H


25 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 #i‚de‡
__√ed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__√ed_wöt_t


	)

33 
	~<wch¨.h
>

37 #i‚de‡
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #unde‡
__√ed_iswxxx


46 #i‚de‡
__iswxxx_deföed


47 
	#__iswxxx_deföed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	tw˘y≥_t
;

53 
	g__END_NAMESPACE_C99


55 #i‚de‡
_ISwbô


60 
	~<ídün.h
>

61 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


62 
	#_ISwbô
(
bô
Ë(1 << (bô))

	)

64 
	#_ISwbô
(
bô
) \

65 ((
bô
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
bô
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
bô
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (Ë((1UL << (
bô
)Ë>> 24))))

	)

73 
	m__ISwuµî
 = 0,

74 
	m__ISwlowî
 = 1,

75 
	m__ISwÆpha
 = 2,

76 
	m__ISwdigô
 = 3,

77 
	m__ISwxdigô
 = 4,

78 
	m__ISw•a˚
 = 5,

79 
	m__ISw¥öt
 = 6,

80 
	m__ISwgøph
 = 7,

81 
	m__ISwbœnk
 = 8,

82 
	m__ISw˙ål
 = 9,

83 
	m__ISwpun˘
 = 10,

84 
	m__ISwÆnum
 = 11,

86 
	m_ISwuµî
 = 
_ISwbô
 (
__ISwuµî
),

87 
	m_ISwlowî
 = 
_ISwbô
 (
__ISwlowî
),

88 
	m_ISwÆpha
 = 
_ISwbô
 (
__ISwÆpha
),

89 
	m_ISwdigô
 = 
_ISwbô
 (
__ISwdigô
),

90 
	m_ISwxdigô
 = 
_ISwbô
 (
__ISwxdigô
),

91 
	m_ISw•a˚
 = 
_ISwbô
 (
__ISw•a˚
),

92 
	m_ISw¥öt
 = 
_ISwbô
 (
__ISw¥öt
),

93 
	m_ISwgøph
 = 
_ISwbô
 (
__ISwgøph
),

94 
	m_ISwbœnk
 = 
_ISwbô
 (
__ISwbœnk
),

95 
	m_ISw˙ål
 = 
_ISwbô
 (
__ISw˙ål
),

96 
	m_ISwpun˘
 = 
_ISwbô
 (
__ISwpun˘
),

97 
	m_ISwÆnum
 = 
_ISwbô
 (
__ISwÆnum
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$iswÆnum
 (
wöt_t
 
__wc
Ë
__THROW
;

117 
	$iswÆpha
 (
wöt_t
 
__wc
Ë
__THROW
;

120 
	$isw˙ål
 (
wöt_t
 
__wc
Ë
__THROW
;

124 
	$iswdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

128 
	$iswgøph
 (
wöt_t
 
__wc
Ë
__THROW
;

133 
	$iswlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

136 
	$isw¥öt
 (
wöt_t
 
__wc
Ë
__THROW
;

141 
	$iswpun˘
 (
wöt_t
 
__wc
Ë
__THROW
;

146 
	$isw•a˚
 (
wöt_t
 
__wc
Ë
__THROW
;

151 
	$iswuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

156 
	$iswxdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

161 #ifde‡
__USE_ISOC99


162 
	$iswbœnk
 (
wöt_t
 
__wc
Ë
__THROW
;

171 
w˘y≥_t
 
	$w˘y≥
 (c⁄° *
__¥›îty
Ë
__THROW
;

175 
	$isw˘y≥
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
Ë
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 c⁄° 
	t__öt32_t
 *
	tw˘øns_t
;

187 
__END_NAMESPACE_C99


188 #ifde‡
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
w˘øns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wöt_t
 
	$towlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

197 
wöt_t
 
	$towuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifde‡
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
w˘øns_t
 
	$w˘øns
 (c⁄° *
__¥›îty
Ë
__THROW
;

221 
wöt_t
 
	$tow˘øns
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
Ë
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifde‡
__USE_XOPEN2K8


226 
	~<xloˇÀ.h
>

230 
	$iswÆnum_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

236 
	$iswÆpha_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

239 
	$isw˙ål_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

243 
	$iswdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

247 
	$iswgøph_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

252 
	$iswlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

255 
	$isw¥öt_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

260 
	$iswpun˘_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

265 
	$isw•a˚_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

270 
	$iswuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

275 
	$iswxdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

280 
	$iswbœnk_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

284 
w˘y≥_t
 
	$w˘y≥_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

285 
__THROW
;

289 
	$isw˘y≥_l
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
, 
__loˇÀ_t
 
__loˇÀ
)

290 
__THROW
;

298 
wöt_t
 
	$towlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

301 
wöt_t
 
	$towuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

305 
w˘øns_t
 
	$w˘øns_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

306 
__THROW
;

309 
wöt_t
 
	$tow˘øns_l
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
,

310 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

314 
__END_DECLS


	@/usr/include/xlocale.h

20 #i‚de‡
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loˇÀ_°ru˘


30 
__loˇÀ_d©a
 *
	m__loˇÀs
[13];

33 c⁄° *
	m__˘y≥_b
;

34 c⁄° *
	m__˘y≥_tﬁowî
;

35 c⁄° *
	m__˘y≥_touµî
;

38 c⁄° *
	m__«mes
[13];

39 } *
	t__loˇÀ_t
;

42 
__loˇÀ_t
 
	tloˇÀ_t
;

	@/usr/include/_G_config.h

4 #i‚de‡
_G_c⁄fig_h


5 
	#_G_c⁄fig_h
 1

	)

9 
	~<bôs/ty≥s.h
>

10 
	#__√ed_size_t


	)

11 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


12 
	#__√ed_wch¨_t


	)

14 
	#__√ed_NULL


	)

15 
	~<°ddef.h
>

16 
	#__√ed_mb°©e_t


	)

17 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


18 
	#__√ed_wöt_t


	)

20 
	~<wch¨.h
>

23 
__off_t
 
	m__pos
;

24 
__mb°©e_t
 
	m__°©e
;

25 } 
	t_G_Âos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb°©e_t
 
	m__°©e
;

30 } 
	t_G_Âos64_t
;

31 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gc⁄v.h
>

35 
__gc⁄v_öfo
 
	m__cd
;

38 
__gc⁄v_öfo
 
	m__cd
;

39 
__gc⁄v_°ï_d©a
 
	m__d©a
;

40 } 
	m__comböed
;

41 } 
	t_G_ic⁄v_t
;

46 
	#_G_va_li°
 
__gnuc_va_li°


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`deföed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/libunwind-common.h

26 
	#UNW_VERSION_MAJOR
 1

	)

27 
	#UNW_VERSION_MINOR
 1

	)

28 
	#UNW_VERSION_EXTRA


	)

30 
	#UNW_VERSION_CODE
(
maj
,
mö
Ë(((majË<< 16Ë| (mö))

	)

31 
	#UNW_VERSION
 
	`UNW_VERSION_CODE
(
UNW_VERSION_MAJOR
, 
UNW_VERSION_MINOR
)

	)

33 
	#UNW_PASTE2
(
x
,
y
Ëx##
	)
y

34 
	#UNW_PASTE
(
x
,
y
Ë
	`UNW_PASTE2
(x,y)

	)

35 
	#UNW_OBJ
(
‚
Ë
	`UNW_PASTE
(
UNW_PREFIX
, fn)

	)

36 
	#UNW_ARCH_OBJ
(
‚
Ë
	`UNW_PASTE
(UNW_PASTE(UNW_PASTE(
_U
,
UNW_TARGET
),
_
), fn)

	)

38 #ifde‡
UNW_LOCAL_ONLY


39 
	#UNW_PREFIX
 
	`UNW_PASTE
(UNW_PASTE(
_UL
,
UNW_TARGET
),
_
)

	)

41 
	#UNW_PREFIX
 
	`UNW_PASTE
(UNW_PASTE(
_U
,
UNW_TARGET
),
_
)

	)

48 
	mUNW_ESUCCESS
 = 0,

49 
	mUNW_EUNSPEC
,

50 
	mUNW_ENOMEM
,

51 
	mUNW_EBADREG
,

52 
	mUNW_EREADONLYREG
,

53 
	mUNW_ESTOPUNWIND
,

54 
	mUNW_EINVALIDIP
,

55 
	mUNW_EBADFRAME
,

56 
	mUNW_EINVAL
,

57 
	mUNW_EBADVERSION
,

58 
	mUNW_ENOINFO


60 
	tunw_îr‹_t
;

71 
	mUNW_REG_IP
 = 
UNW_TDEP_IP
,

72 
	mUNW_REG_SP
 = 
UNW_TDEP_SP
,

73 
	mUNW_REG_EH
 = 
UNW_TDEP_EH
,

74 
	mUNW_REG_LAST
 = 
UNW_TDEP_LAST_REG


76 
	tunw_‰ame_ªgnum_t
;

79 
	#UNW_NUM_EH_REGS
 
UNW_TDEP_NUM_EH_REGS


	)

83 
	mUNW_CACHE_NONE
,

84 
	mUNW_CACHE_GLOBAL
,

85 
	mUNW_CACHE_PER_THREAD


87 
	tunw_ˇchög_pﬁicy_t
;

89 
	tunw_ªgnum_t
;

95 
	sunw_curs‹


97 
unw_w‹d_t
 
	m›aque
[
UNW_TDEP_CURSOR_LEN
];

99 
	tunw_curs‹_t
;

102 
unw_tdï_c⁄ãxt_t
 
	tunw_c⁄ãxt_t
;

108 
	#unw_gëc⁄ãxt
(
uc
Ë
	`unw_tdï_gëc⁄ãxt
(uc)

	)

113 
	#unw_is_Âªg
(
r
Ë
	`unw_tdï_is_Âªg
‘)

	)

115 
unw_tdï_Âªg_t
 
	tunw_Âªg_t
;

117 
unw_addr_•a˚
 *
	tunw_addr_•a˚_t
;

121 
	#UNW_PI_FLAG_FIRST_TDEP_BIT
 16

	)

123 
	#UNW_PI_FLAG_DEBUG_FRAME
 32

	)

125 
	sunw_¥oc_öfo


127 
unw_w‹d_t
 
	m°¨t_ù
;

128 
unw_w‹d_t
 
	míd_ù
;

129 
unw_w‹d_t
 
	mlsda
;

130 
unw_w‹d_t
 
	mh™dÀr
;

131 
unw_w‹d_t
 
	mgp
;

132 
unw_w‹d_t
 
	mÊags
;

134 
	mf‹m©
;

135 
	munwöd_öfo_size
;

136 *
	munwöd_öfo
;

137 
unw_tdï_¥oc_öfo_t
 
	mexåa
;

139 
	tunw_¥oc_öfo_t
;

144 
	sunw_ac˚ss‹s


148 (*
	mföd_¥oc_öfo
Ë(
	munw_addr_•a˚_t
, 
	munw_w‹d_t
, 
	munw_¥oc_öfo_t
 *,

154 (*
	mput_unwöd_öfo
Ë(
	munw_addr_•a˚_t
, 
	munw_¥oc_öfo_t
 *, *);

158 (*
	mgë_dyn_öfo_li°_addr
Ë(
	munw_addr_•a˚_t
, 
	munw_w‹d_t
 *, *);

164 (*
	mac˚ss_mem
Ë(
	munw_addr_•a˚_t
, 
	munw_w‹d_t
, unw_word_t *, ,

168 (*
	mac˚ss_ªg
Ë(
	munw_addr_•a˚_t
, 
	munw_ªgnum_t
, 
	munw_w‹d_t
 *, ,

172 (*
	mac˚ss_Âªg
Ë(
	munw_addr_•a˚_t
, 
	munw_ªgnum_t
,

173 
	munw_Âªg_t
 *, , *);

175 (*
	mªsume
Ë(
	munw_addr_•a˚_t
, 
	munw_curs‹_t
 *, *);

181 (*
	mgë_¥oc_«me
Ë(
	munw_addr_•a˚_t
, 
	munw_w‹d_t
, *, 
	msize_t
,

182 
	munw_w‹d_t
 *, *);

184 
	tunw_ac˚ss‹s_t
;

186 
	eunw_ßve_loc_ty≥


188 
	mUNW_SLT_NONE
,

189 
	mUNW_SLT_MEMORY
,

190 
	mUNW_SLT_REG


192 
	tunw_ßve_loc_ty≥_t
;

194 
	sunw_ßve_loc


196 
unw_ßve_loc_ty≥_t
 
	mty≥
;

199 
unw_w‹d_t
 
	maddr
;

200 
unw_ªgnum_t
 
	mªgnum
;

202 
	mu
;

203 
unw_tdï_ßve_loc_t
 
	mexåa
;

205 
	tunw_ßve_loc_t
;

209 
	#unw_loˇl_addr_•a˚
 
	`UNW_OBJ
(
loˇl_addr_•a˚
)

	)

210 
	#unw_¸óã_addr_•a˚
 
	`UNW_OBJ
(
¸óã_addr_•a˚
)

	)

211 
	#unw_de°roy_addr_•a˚
 
	`UNW_OBJ
(
de°roy_addr_•a˚
)

	)

212 
	#unw_gë_ac˚ss‹s
 
	`UNW_ARCH_OBJ
(
gë_ac˚ss‹s
)

	)

213 
	#unw_öô_loˇl
 
	`UNW_OBJ
(
öô_loˇl
)

	)

214 
	#unw_öô_ªmŸe
 
	`UNW_OBJ
(
öô_ªmŸe
)

	)

215 
	#unw_°ï
 
	`UNW_OBJ
(
°ï
)

	)

216 
	#unw_ªsume
 
	`UNW_OBJ
(
ªsume
)

	)

217 
	#unw_gë_¥oc_öfo
 
	`UNW_OBJ
(
gë_¥oc_öfo
)

	)

218 
	#unw_gë_¥oc_öfo_by_ù
 
	`UNW_OBJ
(
gë_¥oc_öfo_by_ù
)

	)

219 
	#unw_gë_ªg
 
	`UNW_OBJ
(
gë_ªg
)

	)

220 
	#unw_£t_ªg
 
	`UNW_OBJ
(
£t_ªg
)

	)

221 
	#unw_gë_Âªg
 
	`UNW_OBJ
(
gë_Âªg
)

	)

222 
	#unw_£t_Âªg
 
	`UNW_OBJ
(
£t_Âªg
)

	)

223 
	#unw_gë_ßve_loc
 
	`UNW_OBJ
(
gë_ßve_loc
)

	)

224 
	#unw_is_sig«l_‰ame
 
	`UNW_OBJ
(
is_sig«l_‰ame
)

	)

225 
	#unw_h™dÀ_sig«l_‰ame
 
	`UNW_OBJ
(
h™dÀ_sig«l_‰ame
)

	)

226 
	#unw_gë_¥oc_«me
 
	`UNW_OBJ
(
gë_¥oc_«me
)

	)

227 
	#unw_£t_ˇchög_pﬁicy
 
	`UNW_OBJ
(
£t_ˇchög_pﬁicy
)

	)

228 
	#unw_ªg«me
 
	`UNW_ARCH_OBJ
(
ªg«me
)

	)

229 
	#unw_Êush_ˇche
 
	`UNW_ARCH_OBJ
(
Êush_ˇche
)

	)

230 
	#unw_°ªº‹
 
	`UNW_ARCH_OBJ
(
°ªº‹
)

	)

232 
unw_addr_•a˚_t
 
unw_¸óã_addr_•a˚
 (
unw_ac˚ss‹s_t
 *, );

233 
unw_de°roy_addr_•a˚
 (
unw_addr_•a˚_t
);

234 
unw_ac˚ss‹s_t
 *
unw_gë_ac˚ss‹s
 (
unw_addr_•a˚_t
);

235 
unw_Êush_ˇche
 (
unw_addr_•a˚_t
, 
unw_w‹d_t
, unw_word_t);

236 
unw_£t_ˇchög_pﬁicy
 (
unw_addr_•a˚_t
, 
unw_ˇchög_pﬁicy_t
);

237 c⁄° *
unw_ªg«me
 (
unw_ªgnum_t
);

239 
unw_öô_loˇl
 (
unw_curs‹_t
 *, 
unw_c⁄ãxt_t
 *);

240 
unw_öô_ªmŸe
 (
unw_curs‹_t
 *, 
unw_addr_•a˚_t
, *);

241 
unw_°ï
 (
unw_curs‹_t
 *);

242 
unw_ªsume
 (
unw_curs‹_t
 *);

243 
unw_gë_¥oc_öfo
 (
unw_curs‹_t
 *, 
unw_¥oc_öfo_t
 *);

244 
unw_gë_¥oc_öfo_by_ù
 (
unw_addr_•a˚_t
, 
unw_w‹d_t
,

245 
unw_¥oc_öfo_t
 *, *);

246 
unw_gë_ªg
 (
unw_curs‹_t
 *, , 
unw_w‹d_t
 *);

247 
unw_£t_ªg
 (
unw_curs‹_t
 *, , 
unw_w‹d_t
);

248 
unw_gë_Âªg
 (
unw_curs‹_t
 *, , 
unw_Âªg_t
 *);

249 
unw_£t_Âªg
 (
unw_curs‹_t
 *, , 
unw_Âªg_t
);

250 
unw_gë_ßve_loc
 (
unw_curs‹_t
 *, , 
unw_ßve_loc_t
 *);

251 
unw_is_sig«l_‰ame
 (
unw_curs‹_t
 *);

252 
unw_h™dÀ_sig«l_‰ame
 (
unw_curs‹_t
 *);

253 
unw_gë_¥oc_«me
 (
unw_curs‹_t
 *, *, 
size_t
, 
unw_w‹d_t
 *);

254 c⁄° *
unw_°ªº‹
 ();

255 
unw_backåa˚
 (**, );

257 
unw_addr_•a˚_t
 
unw_loˇl_addr_•a˚
;

	@/usr/include/libunwind-dynamic.h

62 
	mUNW_DYN_STOP
 = 0,

63 
	mUNW_DYN_SAVE_REG
,

64 
	mUNW_DYN_SPILL_FP_REL
,

65 
	mUNW_DYN_SPILL_SP_REL
,

66 
	mUNW_DYN_ADD
,

67 
	mUNW_DYN_POP_FRAMES
,

68 
	mUNW_DYN_LABEL_STATE
,

69 
	mUNW_DYN_COPY_STATE
,

70 
	mUNW_DYN_ALIAS


72 
	tunw_dyn_›î©i⁄_t
;

76 
	mUNW_INFO_FORMAT_DYNAMIC
,

77 
	mUNW_INFO_FORMAT_TABLE
,

78 
	mUNW_INFO_FORMAT_REMOTE_TABLE
,

79 
	mUNW_INFO_FORMAT_ARM_EXIDX


81 
	tunw_dyn_öfo_f‹m©_t
;

83 
	sunw_dyn_›


85 
öt8_t
 
	mèg
;

86 
öt8_t
 
	mqp
;

87 
öt16_t
 
	mªg
;

88 
öt32_t
 
	mwhí
;

89 
unw_w‹d_t
 
	mvÆ
;

91 
	tunw_dyn_›_t
;

93 
	sunw_dyn_ªgi⁄_öfo


95 
unw_dyn_ªgi⁄_öfo
 *
	m√xt
;

96 
öt32_t
 
	mö¢_cou¡
;

97 
uöt32_t
 
	m›_cou¡
;

98 
unw_dyn_›_t
 
	m›
[1];

100 
	tunw_dyn_ªgi⁄_öfo_t
;

102 
	sunw_dyn_¥oc_öfo


104 
unw_w‹d_t
 
	m«me_±r
;

105 
unw_w‹d_t
 
	mh™dÀr
;

106 
uöt32_t
 
	mÊags
;

107 
öt32_t
 
	m∑d0
;

108 
unw_dyn_ªgi⁄_öfo_t
 *
	mªgi⁄s
;

110 
	tunw_dyn_¥oc_öfo_t
;

112 
	sunw_dyn_èbÀ_öfo


114 
unw_w‹d_t
 
	m«me_±r
;

115 
unw_w‹d_t
 
	m£gba£
;

116 
unw_w‹d_t
 
	mèbÀ_Àn
;

117 
unw_w‹d_t
 *
	mèbÀ_d©a
;

119 
	tunw_dyn_èbÀ_öfo_t
;

121 
	sunw_dyn_ªmŸe_èbÀ_öfo


123 
unw_w‹d_t
 
	m«me_±r
;

124 
unw_w‹d_t
 
	m£gba£
;

125 
unw_w‹d_t
 
	mèbÀ_Àn
;

126 
unw_w‹d_t
 
	mèbÀ_d©a
;

128 
	tunw_dyn_ªmŸe_èbÀ_öfo_t
;

130 
	sunw_dyn_öfo


133 
unw_dyn_öfo
 *
	m√xt
;

134 
unw_dyn_öfo
 *
	m¥ev
;

135 
unw_w‹d_t
 
	m°¨t_ù
;

136 
unw_w‹d_t
 
	míd_ù
;

137 
unw_w‹d_t
 
	mgp
;

138 
öt32_t
 
	mf‹m©
;

139 
öt32_t
 
	m∑d
;

142 
unw_dyn_¥oc_öfo_t
 
	mpi
;

143 
unw_dyn_èbÀ_öfo_t
 
	mti
;

144 
unw_dyn_ªmŸe_èbÀ_öfo_t
 
	mπi
;

146 
	mu
;

148 
	tunw_dyn_öfo_t
;

150 
	sunw_dyn_öfo_li°


152 
uöt32_t
 
	mvîsi⁄
;

153 
uöt32_t
 
	mgíî©i⁄
;

154 
unw_dyn_öfo_t
 *
	mfú°
;

156 
	tunw_dyn_öfo_li°_t
;

160 
	#_U_dyn_ªgi⁄_öfo_size
(
›_cou¡
) \

161 ((*Ë(((
unw_dyn_ªgi⁄_öfo_t
 *Ë
NULL
)->
›
 + (
›_cou¡
)) \

162 - (*Ë
NULL
)

	)

166 
_U_dyn_ªgi°î
 (
unw_dyn_öfo_t
 *);

170 
_U_dyn_ˇn˚l
 (
unw_dyn_öfo_t
 *);

175 
	#_U_dyn_›
(
_èg
, 
_qp
, 
_whí
, 
_ªg
, 
_vÆ
) \

176 ((
unw_dyn_›_t
Ë{ (
_èg
), (
_qp
), (
_ªg
), (
_whí
), (
_vÆ
Ë})

	)

178 
	#_U_dyn_›_ßve_ªg
(
›
, 
qp
, 
whí
, 
ªg
, 
d°
) \

179 (*(
›
Ë
	`_U_dyn_›
 (
UNW_DYN_SAVE_REG
, (
qp
), (
whí
), (
ªg
), (
d°
)))

	)

181 
	#_U_dyn_›_•ûl_Â_ªl
(
›
, 
qp
, 
whí
, 
ªg
, 
off£t
) \

182 (*(
›
Ë
	`_U_dyn_›
 (
UNW_DYN_SPILL_FP_REL
, (
qp
), (
whí
), (
ªg
), \

183 (
off£t
)))

	)

185 
	#_U_dyn_›_•ûl_•_ªl
(
›
, 
qp
, 
whí
, 
ªg
, 
off£t
) \

186 (*(
›
Ë
	`_U_dyn_›
 (
UNW_DYN_SPILL_SP_REL
, (
qp
), (
whí
), (
ªg
), \

187 (
off£t
)))

	)

189 
	#_U_dyn_›_add
(
›
, 
qp
, 
whí
, 
ªg
, 
vÆue
) \

190 (*(
›
Ë
	`_U_dyn_›
 (
UNW_DYN_ADD
, (
qp
), (
whí
), (
ªg
), (
vÆue
)))

	)

192 
	#_U_dyn_›_p›_‰ames
(
›
, 
qp
, 
whí
, 
num_‰ames
) \

193 (*(
›
Ë
	`_U_dyn_›
 (
UNW_DYN_POP_FRAMES
, (
qp
), (
whí
), 0, (
num_‰ames
)))

	)

195 
	#_U_dyn_›_œbñ_°©e
(
›
, 
œbñ
) \

196 (*(
›
Ë
	`_U_dyn_›
 (
UNW_DYN_LABEL_STATE
, 
_U_QP_TRUE
, -1, 0, (
œbñ
)))

	)

198 
	#_U_dyn_›_c›y_°©e
(
›
, 
œbñ
) \

199 (*(
›
Ë
	`_U_dyn_›
 (
UNW_DYN_COPY_STATE
, 
_U_QP_TRUE
, -1, 0, (
œbñ
)))

	)

201 
	#_U_dyn_›_Æüs
(
›
, 
qp
, 
whí
, 
addr
) \

202 (*(
›
Ë
	`_U_dyn_›
 (
UNW_DYN_ALIAS
, (
qp
), (
whí
), 0, (
addr
)))

	)

204 
	#_U_dyn_›_°›
(
›
) \

205 (*(
›
Ë
	`_U_dyn_›
 (
UNW_DYN_STOP
, 
_U_QP_TRUE
, -1, 0, 0))

	)

210 
	#_U_QP_TRUE
 
_U_TDEP_QP_TRUE


	)

	@/usr/include/stdc-predef.h

18 #i‚def 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifde‡
__GCC_IEC_559


37 #i‡
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifde‡
__GCC_IEC_559_COMPLEX


45 #i‡
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

55 
	#__STDC_ISO_10646__
 201505L

	)

58 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/ucontext.h

20 #i‚de‡
_UCONTEXT_H


21 
	#_UCONTEXT_H
 1

	)

23 
	~<„©uªs.h
>

26 
	~<sys/uc⁄ãxt.h
>

28 
__BEGIN_DECLS


31 
	$gëc⁄ãxt
 (
uc⁄ãxt_t
 *
__u˝
Ë
__THROWNL
;

34 
	$£tc⁄ãxt
 (c⁄° 
uc⁄ãxt_t
 *
__u˝
Ë
__THROWNL
;

38 
	$sw≠c⁄ãxt
 (
uc⁄ãxt_t
 *
__ª°ri˘
 
__ou˝
,

39 c⁄° 
uc⁄ãxt_t
 *
__ª°ri˘
 
__u˝
Ë
__THROWNL
;

47 
	$makec⁄ãxt
 (
uc⁄ãxt_t
 *
__u˝
, (*
__func
) (),

48 
__¨gc
, ...Ë
__THROW
;

50 
__END_DECLS


	@/usr/include/gconv.h

22 #i‚de‡
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<„©uªs.h
>

26 
	#__√ed_mb°©e_t


	)

27 
	#__√ed_wöt_t


	)

28 
	~<wch¨.h
>

29 
	#__√ed_size_t


	)

30 
	#__√ed_wch¨_t


	)

31 
	~<°ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¨_t
Ë0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004,

60 
	m__GCONV_TRANSLIT
 = 0x0008

65 
	g__gc⁄v_°ï
;

66 
	g__gc⁄v_°ï_d©a
;

67 
	g__gc⁄v_lﬂded_obje˘
;

71 (*
	t__gc⁄v_f˘
Ë(
	t__gc⁄v_°ï
 *, 
	t__gc⁄v_°ï_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wöt_t
 (*
	t__gc⁄v_btowc_f˘
Ë(
	t__gc⁄v_°ï
 *, );

79 (*
	t__gc⁄v_öô_f˘
Ë(
	t__gc⁄v_°ï
 *);

80 (*
	t__gc⁄v_íd_f˘
Ë(
	t__gc⁄v_°ï
 *);

84 
	s__gc⁄v_°ï


86 
__gc⁄v_lﬂded_obje˘
 *
__shlib_h™dÀ
;

87 c⁄° *
__mod«me
;

89 
__cou¡î
;

91 *
__‰om_«me
;

92 *
__to_«me
;

94 
__gc⁄v_f˘
 
__f˘
;

95 
__gc⁄v_btowc_f˘
 
__btowc_f˘
;

96 
__gc⁄v_öô_f˘
 
__öô_f˘
;

97 
__gc⁄v_íd_f˘
 
__íd_f˘
;

101 
__mö_√eded_‰om
;

102 
__max_√eded_‰om
;

103 
__mö_√eded_to
;

104 
__max_√eded_to
;

107 
__°©eful
;

109 *
__d©a
;

114 
	s__gc⁄v_°ï_d©a


116 *
__outbuf
;

117 *
__outbu„nd
;

121 
__Êags
;

125 
__övoˇti⁄_cou¡î
;

129 
__öã∫Æ_u£
;

131 
__mb°©e_t
 *
__°©ï
;

132 
__mb°©e_t
 
__°©e
;

138 
	s__gc⁄v_öfo


140 
size_t
 
__n°ïs
;

141 
__gc⁄v_°ï
 *
__°ïs
;

142 
__exãnsi⁄__
 
__gc⁄v_°ï_d©a
 
__d©a
 
__Êex¨r
;

143 } *
	t__gc⁄v_t
;

146 
	`__gc⁄v_å™¶ôî©e
 (
__gc⁄v_°ï
 *
°ï
,

147 
__gc⁄v_°ï_d©a
 *
°ï_d©a
,

148 c⁄° *
öbuf°¨t
,

149 c⁄° **
öbuÂ
,

150 c⁄° *
öbu„nd
,

151 **
outbuf°¨t
,

152 
size_t
 *
úªvîsibÀ
);

	@
1
.
1
/usr/include
273
7817
include/jemalloc/internal/arena_externs.h
include/jemalloc/internal/arena_inlines_a.h
include/jemalloc/internal/arena_inlines_b.h
include/jemalloc/internal/arena_stats.h
include/jemalloc/internal/arena_structs_a.h
include/jemalloc/internal/arena_structs_b.h
include/jemalloc/internal/arena_types.h
include/jemalloc/internal/assert.h
include/jemalloc/internal/atomic.h
include/jemalloc/internal/atomic_c11.h
include/jemalloc/internal/atomic_gcc_atomic.h
include/jemalloc/internal/atomic_gcc_sync.h
include/jemalloc/internal/atomic_msvc.h
include/jemalloc/internal/background_thread_externs.h
include/jemalloc/internal/background_thread_inlines.h
include/jemalloc/internal/background_thread_structs.h
include/jemalloc/internal/base_externs.h
include/jemalloc/internal/base_inlines.h
include/jemalloc/internal/base_structs.h
include/jemalloc/internal/base_types.h
include/jemalloc/internal/bin.h
include/jemalloc/internal/bin_stats.h
include/jemalloc/internal/bit_util.h
include/jemalloc/internal/bitmap.h
include/jemalloc/internal/cache_bin.h
include/jemalloc/internal/ckh.h
include/jemalloc/internal/ctl.h
include/jemalloc/internal/div.h
include/jemalloc/internal/extent_dss.h
include/jemalloc/internal/extent_externs.h
include/jemalloc/internal/extent_inlines.h
include/jemalloc/internal/extent_mmap.h
include/jemalloc/internal/extent_structs.h
include/jemalloc/internal/extent_types.h
include/jemalloc/internal/hash.h
include/jemalloc/internal/hooks.h
include/jemalloc/internal/jemalloc_internal_decls.h
include/jemalloc/internal/jemalloc_internal_defs.h
include/jemalloc/internal/jemalloc_internal_externs.h
include/jemalloc/internal/jemalloc_internal_includes.h
include/jemalloc/internal/jemalloc_internal_inlines_a.h
include/jemalloc/internal/jemalloc_internal_inlines_b.h
include/jemalloc/internal/jemalloc_internal_inlines_c.h
include/jemalloc/internal/jemalloc_internal_macros.h
include/jemalloc/internal/jemalloc_internal_types.h
include/jemalloc/internal/jemalloc_preamble.h
include/jemalloc/internal/large_externs.h
include/jemalloc/internal/log.h
include/jemalloc/internal/malloc_io.h
include/jemalloc/internal/mutex.h
include/jemalloc/internal/mutex_pool.h
include/jemalloc/internal/mutex_prof.h
include/jemalloc/internal/nstime.h
include/jemalloc/internal/pages.h
include/jemalloc/internal/ph.h
include/jemalloc/internal/private_namespace.gen.h
include/jemalloc/internal/private_namespace.h
include/jemalloc/internal/prng.h
include/jemalloc/internal/prof_externs.h
include/jemalloc/internal/prof_inlines_a.h
include/jemalloc/internal/prof_inlines_b.h
include/jemalloc/internal/prof_structs.h
include/jemalloc/internal/prof_types.h
include/jemalloc/internal/public_namespace.h
include/jemalloc/internal/public_unnamespace.h
include/jemalloc/internal/ql.h
include/jemalloc/internal/qr.h
include/jemalloc/internal/rb.h
include/jemalloc/internal/rtree.h
include/jemalloc/internal/rtree_tsd.h
include/jemalloc/internal/size_classes.h
include/jemalloc/internal/smoothstep.h
include/jemalloc/internal/spin.h
include/jemalloc/internal/stats.h
include/jemalloc/internal/sz.h
include/jemalloc/internal/tcache_externs.h
include/jemalloc/internal/tcache_inlines.h
include/jemalloc/internal/tcache_structs.h
include/jemalloc/internal/tcache_types.h
include/jemalloc/internal/ticker.h
include/jemalloc/internal/tsd.h
include/jemalloc/internal/tsd_generic.h
include/jemalloc/internal/tsd_malloc_thread_cleanup.h
include/jemalloc/internal/tsd_tls.h
include/jemalloc/internal/tsd_types.h
include/jemalloc/internal/tsd_win.h
include/jemalloc/internal/util.h
include/jemalloc/internal/witness.h
include/jemalloc/jemalloc.h
include/jemalloc/jemalloc_defs.h
include/jemalloc/jemalloc_macros.h
include/jemalloc/jemalloc_mangle.h
include/jemalloc/jemalloc_mangle_jet.h
include/jemalloc/jemalloc_protos.h
include/jemalloc/jemalloc_protos_jet.h
include/jemalloc/jemalloc_rename.h
include/jemalloc/jemalloc_typedefs.h
include/msvc_compat/C99/stdbool.h
include/msvc_compat/C99/stdint.h
include/msvc_compat/strings.h
include/msvc_compat/windows_extra.h
msvc/test_threads/test_threads.cpp
msvc/test_threads/test_threads.h
msvc/test_threads/test_threads_main.cpp
src/arena.c
src/background_thread.c
src/base.c
src/bin.c
src/bitmap.c
src/ckh.c
src/ctl.c
src/div.c
src/extent.c
src/extent_dss.c
src/extent_mmap.c
src/hash.c
src/hooks.c
src/jemalloc.c
src/jemalloc_cpp.cpp
src/large.c
src/log.c
src/malloc_io.c
src/mutex.c
src/mutex_pool.c
src/nstime.c
src/pages.c
src/prng.c
src/prof.c
src/rtree.c
src/stats.c
src/sz.c
src/tcache.c
src/ticker.c
src/tsd.c
src/witness.c
src/zone.c
test/include/test/SFMT-alti.h
test/include/test/SFMT-params.h
test/include/test/SFMT-params11213.h
test/include/test/SFMT-params1279.h
test/include/test/SFMT-params132049.h
test/include/test/SFMT-params19937.h
test/include/test/SFMT-params216091.h
test/include/test/SFMT-params2281.h
test/include/test/SFMT-params4253.h
test/include/test/SFMT-params44497.h
test/include/test/SFMT-params607.h
test/include/test/SFMT-params86243.h
test/include/test/SFMT-sse2.h
test/include/test/SFMT.h
test/include/test/btalloc.h
test/include/test/extent_hooks.h
test/include/test/jemalloc_test.h
test/include/test/jemalloc_test_defs.h
test/include/test/math.h
test/include/test/mq.h
test/include/test/mtx.h
test/include/test/test.h
test/include/test/thd.h
test/include/test/timer.h
test/integration/MALLOCX_ARENA.c
test/integration/aligned_alloc.c
test/integration/allocated.c
test/integration/cpp/basic.cpp
test/integration/extent.c
test/integration/mallocx.c
test/integration/overflow.c
test/integration/posix_memalign.c
test/integration/rallocx.c
test/integration/sdallocx.c
test/integration/thread_arena.c
test/integration/thread_tcache_enabled.c
test/integration/xallocx.c
test/src/SFMT.c
test/src/btalloc.c
test/src/btalloc_0.c
test/src/btalloc_1.c
test/src/math.c
test/src/mq.c
test/src/mtx.c
test/src/test.c
test/src/thd.c
test/src/timer.c
test/stress/microbench.c
test/unit/SFMT.c
test/unit/a0.c
test/unit/arena_reset.c
test/unit/arena_reset_prof.c
test/unit/atomic.c
test/unit/background_thread.c
test/unit/background_thread_enable.c
test/unit/base.c
test/unit/bit_util.c
test/unit/bitmap.c
test/unit/ckh.c
test/unit/decay.c
test/unit/div.c
test/unit/extent_quantize.c
test/unit/fork.c
test/unit/hash.c
test/unit/hooks.c
test/unit/junk.c
test/unit/junk_alloc.c
test/unit/junk_free.c
test/unit/log.c
test/unit/mallctl.c
test/unit/malloc_io.c
test/unit/math.c
test/unit/mq.c
test/unit/mtx.c
test/unit/nstime.c
test/unit/pack.c
test/unit/pages.c
test/unit/ph.c
test/unit/prng.c
test/unit/prof_accum.c
test/unit/prof_active.c
test/unit/prof_gdump.c
test/unit/prof_idump.c
test/unit/prof_reset.c
test/unit/prof_tctx.c
test/unit/prof_thread_name.c
test/unit/ql.c
test/unit/qr.c
test/unit/rb.c
test/unit/retained.c
test/unit/rtree.c
test/unit/size_classes.c
test/unit/slab.c
test/unit/smoothstep.c
test/unit/spin.c
test/unit/stats.c
test/unit/stats_print.c
test/unit/ticker.c
test/unit/tsd.c
test/unit/witness.c
test/unit/zero.c
/usr/include/alloca.h
/usr/include/ctype.h
/usr/include/dlfcn.h
/usr/include/errno.h
/usr/include/fcntl.h
/usr/include/inttypes.h
/usr/include/jemalloc/jemalloc.h
/usr/include/libunwind.h
/usr/include/limits.h
/usr/include/malloc.h
/usr/include/math.h
/usr/include/pthread.h
/usr/include/sched.h
/usr/include/signal.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/strings.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/unwind.h
/usr/include/wchar.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/libunwind-x86_64.h
/usr/include/wctype.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/libunwind-common.h
/usr/include/libunwind-dynamic.h
/usr/include/stdc-predef.h
/usr/include/ucontext.h
/usr/include/gconv.h
